{"ast":null,"code":"import _slicedToArray from \"C:/Users/17192/reactProjects/finalPort/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport { useRef, useState, useLayoutEffect, createElement } from 'react';\nimport { Box3, Vector3, Sphere } from 'three';\nimport { useThree } from '@react-three/fiber';\nimport { Environment } from './Environment.js';\nimport { ContactShadows } from './ContactShadows.js';\nvar presets = {\n  rembrandt: {\n    main: [1, 2, 1],\n    fill: [-2, -0.5, -2]\n  },\n  portrait: {\n    main: [-1, 2, 0.5],\n    fill: [-1, 0.5, -1.5]\n  },\n  upfront: {\n    main: [0, 2, 1],\n    fill: [-1, 0.5, -1.5]\n  },\n  soft: {\n    main: [-2, 4, 4],\n    fill: [-1, 0.5, -1.5]\n  }\n};\n\nfunction Stage(_ref) {\n  var children = _ref.children,\n      controls = _ref.controls,\n      _ref$shadows = _ref.shadows,\n      shadows = _ref$shadows === void 0 ? true : _ref$shadows,\n      _ref$adjustCamera = _ref.adjustCamera,\n      adjustCamera = _ref$adjustCamera === void 0 ? true : _ref$adjustCamera,\n      _ref$environment = _ref.environment,\n      environment = _ref$environment === void 0 ? 'city' : _ref$environment,\n      _ref$contactShadow = _ref.contactShadow,\n      contactShadow = _ref$contactShadow === void 0 ? true : _ref$contactShadow,\n      _ref$intensity = _ref.intensity,\n      intensity = _ref$intensity === void 0 ? 1 : _ref$intensity,\n      _ref$preset = _ref.preset,\n      preset = _ref$preset === void 0 ? 'rembrandt' : _ref$preset,\n      _ref$shadowBias = _ref.shadowBias,\n      shadowBias = _ref$shadowBias === void 0 ? 0 : _ref$shadowBias,\n      _ref$contactShadowBlu = _ref.contactShadowBlur,\n      contactShadowBlur = _ref$contactShadowBlu === void 0 ? 2 : _ref$contactShadowBlu,\n      _ref$contactShadowOpa = _ref.contactShadowOpacity,\n      contactShadowOpacity = _ref$contactShadowOpa === void 0 ? 0.5 : _ref$contactShadowOpa,\n      props = _objectWithoutPropertiesLoose(_ref, [\"children\", \"controls\", \"shadows\", \"adjustCamera\", \"environment\", \"contactShadow\", \"intensity\", \"preset\", \"shadowBias\", \"contactShadowBlur\", \"contactShadowOpacity\"]);\n\n  var config = presets[preset];\n  var camera = useThree(function (state) {\n    return state.camera;\n  });\n  var outer = useRef(null);\n  var inner = useRef(null);\n\n  var _useState = useState({\n    radius: 0,\n    width: 0,\n    height: 0\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      _useState2$ = _useState2[0],\n      radius = _useState2$.radius,\n      width = _useState2$.width,\n      height = _useState2$.height,\n      set = _useState2[1];\n\n  useLayoutEffect(function () {\n    outer.current.position.set(0, 0, 0);\n    outer.current.updateWorldMatrix(true, true);\n    var box3 = new Box3().setFromObject(inner.current);\n    var center = new Vector3();\n    var sphere = new Sphere();\n    var height = box3.max.y - box3.min.y;\n    var width = box3.max.x - box3.min.x;\n    box3.getCenter(center);\n    box3.getBoundingSphere(sphere);\n    set({\n      radius: sphere.radius,\n      width: width,\n      height: height\n    });\n    outer.current.position.set(-center.x, -center.y + height / 2, -center.z);\n  }, [children]);\n  useLayoutEffect(function () {\n    if (adjustCamera) {\n      var y = radius / (height > width ? 1.5 : 2.5);\n      camera.position.set(0, radius * 0.5, radius * 2.5);\n      camera.near = 0.1;\n      camera.far = Math.max(5000, radius * 4);\n      camera.lookAt(0, y, 0);\n\n      if (controls && controls.current) {\n        controls.current.target.set(0, y, 0);\n        controls.current.update();\n      }\n    }\n  }, [radius, height, width, adjustCamera]);\n  return /*#__PURE__*/createElement(\"group\", props, /*#__PURE__*/createElement(\"group\", {\n    ref: outer\n  }, /*#__PURE__*/createElement(\"group\", {\n    ref: inner\n  }, children)), contactShadow && /*#__PURE__*/createElement(ContactShadows, {\n    \"rotation-x\": Math.PI / 2,\n    opacity: contactShadowOpacity,\n    width: radius * 2,\n    height: radius * 2,\n    blur: contactShadowBlur,\n    far: radius / 2\n  }), environment && /*#__PURE__*/createElement(Environment, {\n    preset: environment\n  }), /*#__PURE__*/createElement(\"ambientLight\", {\n    intensity: intensity / 3\n  }), /*#__PURE__*/createElement(\"spotLight\", {\n    penumbra: 1,\n    position: [config.main[0] * radius, config.main[1] * radius, config.main[2] * radius],\n    intensity: intensity * 2,\n    castShadow: shadows,\n    \"shadow-bias\": shadowBias\n  }), /*#__PURE__*/createElement(\"pointLight\", {\n    position: [config.fill[0] * radius, config.fill[1] * radius, config.fill[2] * radius],\n    intensity: intensity\n  }));\n}\n\nexport { Stage };","map":{"version":3,"sources":["C:/Users/17192/reactProjects/finalPort/node_modules/@react-three/drei/core/Stage.js"],"names":["_objectWithoutPropertiesLoose","useRef","useState","useLayoutEffect","createElement","Box3","Vector3","Sphere","useThree","Environment","ContactShadows","presets","rembrandt","main","fill","portrait","upfront","soft","Stage","_ref","children","controls","shadows","adjustCamera","environment","contactShadow","intensity","preset","shadowBias","contactShadowBlur","contactShadowOpacity","props","config","camera","state","outer","inner","radius","width","height","set","current","position","updateWorldMatrix","box3","setFromObject","center","sphere","max","y","min","x","getCenter","getBoundingSphere","z","near","far","Math","lookAt","target","update","ref","PI","opacity","blur","penumbra","castShadow"],"mappings":";AAAA,OAAOA,6BAAP,MAA0C,yDAA1C;AACA,SAASC,MAAT,EAAiBC,QAAjB,EAA2BC,eAA3B,EAA4CC,aAA5C,QAAiE,OAAjE;AACA,SAASC,IAAT,EAAeC,OAAf,EAAwBC,MAAxB,QAAsC,OAAtC;AACA,SAASC,QAAT,QAAyB,oBAAzB;AACA,SAASC,WAAT,QAA4B,kBAA5B;AACA,SAASC,cAAT,QAA+B,qBAA/B;AAEA,IAAMC,OAAO,GAAG;AACdC,EAAAA,SAAS,EAAE;AACTC,IAAAA,IAAI,EAAE,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CADG;AAETC,IAAAA,IAAI,EAAE,CAAC,CAAC,CAAF,EAAK,CAAC,GAAN,EAAW,CAAC,CAAZ;AAFG,GADG;AAKdC,EAAAA,QAAQ,EAAE;AACRF,IAAAA,IAAI,EAAE,CAAC,CAAC,CAAF,EAAK,CAAL,EAAQ,GAAR,CADE;AAERC,IAAAA,IAAI,EAAE,CAAC,CAAC,CAAF,EAAK,GAAL,EAAU,CAAC,GAAX;AAFE,GALI;AASdE,EAAAA,OAAO,EAAE;AACPH,IAAAA,IAAI,EAAE,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CADC;AAEPC,IAAAA,IAAI,EAAE,CAAC,CAAC,CAAF,EAAK,GAAL,EAAU,CAAC,GAAX;AAFC,GATK;AAadG,EAAAA,IAAI,EAAE;AACJJ,IAAAA,IAAI,EAAE,CAAC,CAAC,CAAF,EAAK,CAAL,EAAQ,CAAR,CADF;AAEJC,IAAAA,IAAI,EAAE,CAAC,CAAC,CAAF,EAAK,GAAL,EAAU,CAAC,GAAX;AAFF;AAbQ,CAAhB;;AAkBA,SAASI,KAAT,CAAeC,IAAf,EAAqB;AACnB,MACEC,QADF,GAYID,IAZJ,CACEC,QADF;AAAA,MAEEC,QAFF,GAYIF,IAZJ,CAEEE,QAFF;AAAA,qBAYIF,IAZJ,CAGEG,OAHF;AAAA,MAGEA,OAHF,6BAGY,IAHZ;AAAA,0BAYIH,IAZJ,CAIEI,YAJF;AAAA,MAIEA,YAJF,kCAIiB,IAJjB;AAAA,yBAYIJ,IAZJ,CAKEK,WALF;AAAA,MAKEA,WALF,iCAKgB,MALhB;AAAA,2BAYIL,IAZJ,CAMEM,aANF;AAAA,MAMEA,aANF,mCAMkB,IANlB;AAAA,uBAYIN,IAZJ,CAOEO,SAPF;AAAA,MAOEA,SAPF,+BAOc,CAPd;AAAA,oBAYIP,IAZJ,CAQEQ,MARF;AAAA,MAQEA,MARF,4BAQW,WARX;AAAA,wBAYIR,IAZJ,CASES,UATF;AAAA,MASEA,UATF,gCASe,CATf;AAAA,8BAYIT,IAZJ,CAUEU,iBAVF;AAAA,MAUEA,iBAVF,sCAUsB,CAVtB;AAAA,8BAYIV,IAZJ,CAWEW,oBAXF;AAAA,MAWEA,oBAXF,sCAWyB,GAXzB;AAAA,MAaIC,KAbJ,GAaY/B,6BAA6B,CAACmB,IAAD,EAAO,CAAC,UAAD,EAAa,UAAb,EAAyB,SAAzB,EAAoC,cAApC,EAAoD,aAApD,EAAmE,eAAnE,EAAoF,WAApF,EAAiG,QAAjG,EAA2G,YAA3G,EAAyH,mBAAzH,EAA8I,sBAA9I,CAAP,CAbzC;;AAeA,MAAMa,MAAM,GAAGrB,OAAO,CAACgB,MAAD,CAAtB;AACA,MAAMM,MAAM,GAAGzB,QAAQ,CAAC,UAAA0B,KAAK;AAAA,WAAIA,KAAK,CAACD,MAAV;AAAA,GAAN,CAAvB;AACA,MAAME,KAAK,GAAGlC,MAAM,CAAC,IAAD,CAApB;AACA,MAAMmC,KAAK,GAAGnC,MAAM,CAAC,IAAD,CAApB;;AACA,kBAIUC,QAAQ,CAAC;AACjBmC,IAAAA,MAAM,EAAE,CADS;AAEjBC,IAAAA,KAAK,EAAE,CAFU;AAGjBC,IAAAA,MAAM,EAAE;AAHS,GAAD,CAJlB;AAAA;AAAA;AAAA,MACEF,MADF,eACEA,MADF;AAAA,MAEEC,KAFF,eAEEA,KAFF;AAAA,MAGEC,MAHF,eAGEA,MAHF;AAAA,MAIGC,GAJH;;AASArC,EAAAA,eAAe,CAAC,YAAM;AACpBgC,IAAAA,KAAK,CAACM,OAAN,CAAcC,QAAd,CAAuBF,GAAvB,CAA2B,CAA3B,EAA8B,CAA9B,EAAiC,CAAjC;AACAL,IAAAA,KAAK,CAACM,OAAN,CAAcE,iBAAd,CAAgC,IAAhC,EAAsC,IAAtC;AACA,QAAMC,IAAI,GAAG,IAAIvC,IAAJ,GAAWwC,aAAX,CAAyBT,KAAK,CAACK,OAA/B,CAAb;AACA,QAAMK,MAAM,GAAG,IAAIxC,OAAJ,EAAf;AACA,QAAMyC,MAAM,GAAG,IAAIxC,MAAJ,EAAf;AACA,QAAMgC,MAAM,GAAGK,IAAI,CAACI,GAAL,CAASC,CAAT,GAAaL,IAAI,CAACM,GAAL,CAASD,CAArC;AACA,QAAMX,KAAK,GAAGM,IAAI,CAACI,GAAL,CAASG,CAAT,GAAaP,IAAI,CAACM,GAAL,CAASC,CAApC;AACAP,IAAAA,IAAI,CAACQ,SAAL,CAAeN,MAAf;AACAF,IAAAA,IAAI,CAACS,iBAAL,CAAuBN,MAAvB;AACAP,IAAAA,GAAG,CAAC;AACFH,MAAAA,MAAM,EAAEU,MAAM,CAACV,MADb;AAEFC,MAAAA,KAAK,EAALA,KAFE;AAGFC,MAAAA,MAAM,EAANA;AAHE,KAAD,CAAH;AAKAJ,IAAAA,KAAK,CAACM,OAAN,CAAcC,QAAd,CAAuBF,GAAvB,CAA2B,CAACM,MAAM,CAACK,CAAnC,EAAsC,CAACL,MAAM,CAACG,CAAR,GAAYV,MAAM,GAAG,CAA3D,EAA8D,CAACO,MAAM,CAACQ,CAAtE;AACD,GAhBc,EAgBZ,CAAClC,QAAD,CAhBY,CAAf;AAiBAjB,EAAAA,eAAe,CAAC,YAAM;AACpB,QAAIoB,YAAJ,EAAkB;AAChB,UAAM0B,CAAC,GAAGZ,MAAM,IAAIE,MAAM,GAAGD,KAAT,GAAiB,GAAjB,GAAuB,GAA3B,CAAhB;AACAL,MAAAA,MAAM,CAACS,QAAP,CAAgBF,GAAhB,CAAoB,CAApB,EAAuBH,MAAM,GAAG,GAAhC,EAAqCA,MAAM,GAAG,GAA9C;AACAJ,MAAAA,MAAM,CAACsB,IAAP,GAAc,GAAd;AACAtB,MAAAA,MAAM,CAACuB,GAAP,GAAaC,IAAI,CAACT,GAAL,CAAS,IAAT,EAAeX,MAAM,GAAG,CAAxB,CAAb;AACAJ,MAAAA,MAAM,CAACyB,MAAP,CAAc,CAAd,EAAiBT,CAAjB,EAAoB,CAApB;;AAEA,UAAI5B,QAAQ,IAAIA,QAAQ,CAACoB,OAAzB,EAAkC;AAChCpB,QAAAA,QAAQ,CAACoB,OAAT,CAAiBkB,MAAjB,CAAwBnB,GAAxB,CAA4B,CAA5B,EAA+BS,CAA/B,EAAkC,CAAlC;AACA5B,QAAAA,QAAQ,CAACoB,OAAT,CAAiBmB,MAAjB;AACD;AACF;AACF,GAbc,EAaZ,CAACvB,MAAD,EAASE,MAAT,EAAiBD,KAAjB,EAAwBf,YAAxB,CAbY,CAAf;AAcA,SAAO,aAAanB,aAAa,CAAC,OAAD,EAAU2B,KAAV,EAAiB,aAAa3B,aAAa,CAAC,OAAD,EAAU;AACpFyD,IAAAA,GAAG,EAAE1B;AAD+E,GAAV,EAEzE,aAAa/B,aAAa,CAAC,OAAD,EAAU;AACrCyD,IAAAA,GAAG,EAAEzB;AADgC,GAAV,EAE1BhB,QAF0B,CAF+C,CAA3C,EAIlBK,aAAa,IAAI,aAAarB,aAAa,CAACM,cAAD,EAAiB;AACzE,kBAAc+C,IAAI,CAACK,EAAL,GAAU,CADiD;AAEzEC,IAAAA,OAAO,EAAEjC,oBAFgE;AAGzEQ,IAAAA,KAAK,EAAED,MAAM,GAAG,CAHyD;AAIzEE,IAAAA,MAAM,EAAEF,MAAM,GAAG,CAJwD;AAKzE2B,IAAAA,IAAI,EAAEnC,iBALmE;AAMzE2B,IAAAA,GAAG,EAAEnB,MAAM,GAAG;AAN2D,GAAjB,CAJzB,EAW7Bb,WAAW,IAAI,aAAapB,aAAa,CAACK,WAAD,EAAc;AACzDkB,IAAAA,MAAM,EAAEH;AADiD,GAAd,CAXZ,EAa7B,aAAapB,aAAa,CAAC,cAAD,EAAiB;AAC7CsB,IAAAA,SAAS,EAAEA,SAAS,GAAG;AADsB,GAAjB,CAbG,EAe7B,aAAatB,aAAa,CAAC,WAAD,EAAc;AAC1C6D,IAAAA,QAAQ,EAAE,CADgC;AAE1CvB,IAAAA,QAAQ,EAAE,CAACV,MAAM,CAACnB,IAAP,CAAY,CAAZ,IAAiBwB,MAAlB,EAA0BL,MAAM,CAACnB,IAAP,CAAY,CAAZ,IAAiBwB,MAA3C,EAAmDL,MAAM,CAACnB,IAAP,CAAY,CAAZ,IAAiBwB,MAApE,CAFgC;AAG1CX,IAAAA,SAAS,EAAEA,SAAS,GAAG,CAHmB;AAI1CwC,IAAAA,UAAU,EAAE5C,OAJ8B;AAK1C,mBAAeM;AAL2B,GAAd,CAfG,EAqB7B,aAAaxB,aAAa,CAAC,YAAD,EAAe;AAC3CsC,IAAAA,QAAQ,EAAE,CAACV,MAAM,CAAClB,IAAP,CAAY,CAAZ,IAAiBuB,MAAlB,EAA0BL,MAAM,CAAClB,IAAP,CAAY,CAAZ,IAAiBuB,MAA3C,EAAmDL,MAAM,CAAClB,IAAP,CAAY,CAAZ,IAAiBuB,MAApE,CADiC;AAE3CX,IAAAA,SAAS,EAAEA;AAFgC,GAAf,CArBG,CAAjC;AAyBD;;AAED,SAASR,KAAT","sourcesContent":["import _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport { useRef, useState, useLayoutEffect, createElement } from 'react';\nimport { Box3, Vector3, Sphere } from 'three';\nimport { useThree } from '@react-three/fiber';\nimport { Environment } from './Environment.js';\nimport { ContactShadows } from './ContactShadows.js';\n\nconst presets = {\n  rembrandt: {\n    main: [1, 2, 1],\n    fill: [-2, -0.5, -2]\n  },\n  portrait: {\n    main: [-1, 2, 0.5],\n    fill: [-1, 0.5, -1.5]\n  },\n  upfront: {\n    main: [0, 2, 1],\n    fill: [-1, 0.5, -1.5]\n  },\n  soft: {\n    main: [-2, 4, 4],\n    fill: [-1, 0.5, -1.5]\n  }\n};\nfunction Stage(_ref) {\n  let {\n    children,\n    controls,\n    shadows = true,\n    adjustCamera = true,\n    environment = 'city',\n    contactShadow = true,\n    intensity = 1,\n    preset = 'rembrandt',\n    shadowBias = 0,\n    contactShadowBlur = 2,\n    contactShadowOpacity = 0.5\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"children\", \"controls\", \"shadows\", \"adjustCamera\", \"environment\", \"contactShadow\", \"intensity\", \"preset\", \"shadowBias\", \"contactShadowBlur\", \"contactShadowOpacity\"]);\n\n  const config = presets[preset];\n  const camera = useThree(state => state.camera);\n  const outer = useRef(null);\n  const inner = useRef(null);\n  const [{\n    radius,\n    width,\n    height\n  }, set] = useState({\n    radius: 0,\n    width: 0,\n    height: 0\n  });\n  useLayoutEffect(() => {\n    outer.current.position.set(0, 0, 0);\n    outer.current.updateWorldMatrix(true, true);\n    const box3 = new Box3().setFromObject(inner.current);\n    const center = new Vector3();\n    const sphere = new Sphere();\n    const height = box3.max.y - box3.min.y;\n    const width = box3.max.x - box3.min.x;\n    box3.getCenter(center);\n    box3.getBoundingSphere(sphere);\n    set({\n      radius: sphere.radius,\n      width,\n      height\n    });\n    outer.current.position.set(-center.x, -center.y + height / 2, -center.z);\n  }, [children]);\n  useLayoutEffect(() => {\n    if (adjustCamera) {\n      const y = radius / (height > width ? 1.5 : 2.5);\n      camera.position.set(0, radius * 0.5, radius * 2.5);\n      camera.near = 0.1;\n      camera.far = Math.max(5000, radius * 4);\n      camera.lookAt(0, y, 0);\n\n      if (controls && controls.current) {\n        controls.current.target.set(0, y, 0);\n        controls.current.update();\n      }\n    }\n  }, [radius, height, width, adjustCamera]);\n  return /*#__PURE__*/createElement(\"group\", props, /*#__PURE__*/createElement(\"group\", {\n    ref: outer\n  }, /*#__PURE__*/createElement(\"group\", {\n    ref: inner\n  }, children)), contactShadow && /*#__PURE__*/createElement(ContactShadows, {\n    \"rotation-x\": Math.PI / 2,\n    opacity: contactShadowOpacity,\n    width: radius * 2,\n    height: radius * 2,\n    blur: contactShadowBlur,\n    far: radius / 2\n  }), environment && /*#__PURE__*/createElement(Environment, {\n    preset: environment\n  }), /*#__PURE__*/createElement(\"ambientLight\", {\n    intensity: intensity / 3\n  }), /*#__PURE__*/createElement(\"spotLight\", {\n    penumbra: 1,\n    position: [config.main[0] * radius, config.main[1] * radius, config.main[2] * radius],\n    intensity: intensity * 2,\n    castShadow: shadows,\n    \"shadow-bias\": shadowBias\n  }), /*#__PURE__*/createElement(\"pointLight\", {\n    position: [config.fill[0] * radius, config.fill[1] * radius, config.fill[2] * radius],\n    intensity: intensity\n  }));\n}\n\nexport { Stage };\n"]},"metadata":{},"sourceType":"module"}