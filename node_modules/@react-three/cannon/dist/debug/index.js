import React, { createContext, useEffect, useState, useRef, useCallback, useLayoutEffect, useMemo, useContext, Suspense } from 'react';
import { useThree, useFrame } from '@react-three/fiber';
import { InstancedMesh, Vector3, Quaternion as Quaternion$1, Matrix4, MeshBasicMaterial, SphereGeometry, BoxGeometry, PlaneGeometry, Mesh, CylinderGeometry, BufferGeometry, Float32BufferAttribute, Scene, Object3D, MathUtils, DynamicDrawUsage } from 'three';

const context = /*#__PURE__*/createContext({});
const debugContext = /*#__PURE__*/createContext(null);

function decodeBase64(base64, enableUnicode) {
    var binaryString = atob(base64);
    if (enableUnicode) {
        var binaryView = new Uint8Array(binaryString.length);
        for (var i = 0, n = binaryString.length; i < n; ++i) {
            binaryView[i] = binaryString.charCodeAt(i);
        }
        return String.fromCharCode.apply(null, new Uint16Array(binaryView.buffer));
    }
    return binaryString;
}

function createURL(base64, sourcemapArg, enableUnicodeArg) {
    var sourcemap = sourcemapArg === undefined ? null : sourcemapArg;
    var enableUnicode = enableUnicodeArg === undefined ? false : enableUnicodeArg;
    var source = decodeBase64(base64, enableUnicode);
    var start = source.indexOf('\n', 10) + 1;
    var body = source.substring(start) + (sourcemap ? '\/\/# sourceMappingURL=' + sourcemap : '');
    var blob = new Blob([body], { type: 'application/javascript' });
    return URL.createObjectURL(blob);
}

function createBase64WorkerFactory(base64, sourcemapArg, enableUnicodeArg) {
    var url;
    return function WorkerFactory(options) {
        url = url || createURL(base64, sourcemapArg, enableUnicodeArg);
        return new Worker(url, options);
    };
}

var WorkerFactory = createBase64WorkerFactory('Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICd1c2Ugc3RyaWN0JzsKCiAgLyoqCiAgICogUmVjb3JkcyB3aGF0IG9iamVjdHMgYXJlIGNvbGxpZGluZyB3aXRoIGVhY2ggb3RoZXIKICAgKi8KICAvKioKICAgKiBBIDN4MyBtYXRyaXguCiAgICogQXV0aG9yZWQgYnkge0BsaW5rIGh0dHA6Ly9naXRodWIuY29tL3NjaHRlcHBlLyBzY2h0ZXBwZX0KICAgKi8KCgogIGNsYXNzIE1hdDMgewogICAgLyoqCiAgICAgKiBBIHZlY3RvciBvZiBsZW5ndGggOSwgY29udGFpbmluZyBhbGwgbWF0cml4IGVsZW1lbnRzLgogICAgICovCgogICAgLyoqCiAgICAgKiBAcGFyYW0gZWxlbWVudHMgQSB2ZWN0b3Igb2YgbGVuZ3RoIDksIGNvbnRhaW5pbmcgYWxsIG1hdHJpeCBlbGVtZW50cy4KICAgICAqLwogICAgY29uc3RydWN0b3IoZWxlbWVudHMgPSBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF0pIHsKICAgICAgdGhpcy5lbGVtZW50cyA9IHZvaWQgMDsKICAgICAgdGhpcy5lbGVtZW50cyA9IGVsZW1lbnRzOwogICAgfQogICAgLyoqCiAgICAgKiBTZXRzIHRoZSBtYXRyaXggdG8gaWRlbnRpdHkKICAgICAqIEB0b2RvIFNob3VsZCBwZXJoYXBzIGJlIHJlbmFtZWQgdG8gYHNldElkZW50aXR5KClgIHRvIGJlIG1vcmUgY2xlYXIuCiAgICAgKiBAdG9kbyBDcmVhdGUgYW5vdGhlciBmdW5jdGlvbiB0aGF0IGltbWVkaWF0ZWx5IGNyZWF0ZXMgYW4gaWRlbnRpdHkgbWF0cml4IGVnLiBgZXllKClgCiAgICAgKi8KCgogICAgaWRlbnRpdHkoKSB7CiAgICAgIGNvbnN0IGUgPSB0aGlzLmVsZW1lbnRzOwogICAgICBlWzBdID0gMTsKICAgICAgZVsxXSA9IDA7CiAgICAgIGVbMl0gPSAwOwogICAgICBlWzNdID0gMDsKICAgICAgZVs0XSA9IDE7CiAgICAgIGVbNV0gPSAwOwogICAgICBlWzZdID0gMDsKICAgICAgZVs3XSA9IDA7CiAgICAgIGVbOF0gPSAxOwogICAgfQogICAgLyoqCiAgICAgKiBTZXQgYWxsIGVsZW1lbnRzIHRvIHplcm8KICAgICAqLwoKCiAgICBzZXRaZXJvKCkgewogICAgICBjb25zdCBlID0gdGhpcy5lbGVtZW50czsKICAgICAgZVswXSA9IDA7CiAgICAgIGVbMV0gPSAwOwogICAgICBlWzJdID0gMDsKICAgICAgZVszXSA9IDA7CiAgICAgIGVbNF0gPSAwOwogICAgICBlWzVdID0gMDsKICAgICAgZVs2XSA9IDA7CiAgICAgIGVbN10gPSAwOwogICAgICBlWzhdID0gMDsKICAgIH0KICAgIC8qKgogICAgICogU2V0cyB0aGUgbWF0cml4IGRpYWdvbmFsIGVsZW1lbnRzIGZyb20gYSBWZWMzCiAgICAgKi8KCgogICAgc2V0VHJhY2UodmVjdG9yKSB7CiAgICAgIGNvbnN0IGUgPSB0aGlzLmVsZW1lbnRzOwogICAgICBlWzBdID0gdmVjdG9yLng7CiAgICAgIGVbNF0gPSB2ZWN0b3IueTsKICAgICAgZVs4XSA9IHZlY3Rvci56OwogICAgfQogICAgLyoqCiAgICAgKiBHZXRzIHRoZSBtYXRyaXggZGlhZ29uYWwgZWxlbWVudHMKICAgICAqLwoKCiAgICBnZXRUcmFjZSh0YXJnZXQgPSBuZXcgVmVjMygpKSB7CiAgICAgIGNvbnN0IGUgPSB0aGlzLmVsZW1lbnRzOwogICAgICB0YXJnZXQueCA9IGVbMF07CiAgICAgIHRhcmdldC55ID0gZVs0XTsKICAgICAgdGFyZ2V0LnogPSBlWzhdOwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBNYXRyaXgtVmVjdG9yIG11bHRpcGxpY2F0aW9uCiAgICAgKiBAcGFyYW0gdiBUaGUgdmVjdG9yIHRvIG11bHRpcGx5IHdpdGgKICAgICAqIEBwYXJhbSB0YXJnZXQgT3B0aW9uYWwsIHRhcmdldCB0byBzYXZlIHRoZSByZXN1bHQgaW4uCiAgICAgKi8KCgogICAgdm11bHQodiwgdGFyZ2V0ID0gbmV3IFZlYzMoKSkgewogICAgICBjb25zdCBlID0gdGhpcy5lbGVtZW50czsKICAgICAgY29uc3QgeCA9IHYueDsKICAgICAgY29uc3QgeSA9IHYueTsKICAgICAgY29uc3QgeiA9IHYuejsKICAgICAgdGFyZ2V0LnggPSBlWzBdICogeCArIGVbMV0gKiB5ICsgZVsyXSAqIHo7CiAgICAgIHRhcmdldC55ID0gZVszXSAqIHggKyBlWzRdICogeSArIGVbNV0gKiB6OwogICAgICB0YXJnZXQueiA9IGVbNl0gKiB4ICsgZVs3XSAqIHkgKyBlWzhdICogejsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogTWF0cml4LXNjYWxhciBtdWx0aXBsaWNhdGlvbgogICAgICovCgoKICAgIHNtdWx0KHMpIHsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdGhpcy5lbGVtZW50c1tpXSAqPSBzOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIE1hdHJpeCBtdWx0aXBsaWNhdGlvbgogICAgICogQHBhcmFtIG1hdHJpeCBNYXRyaXggdG8gbXVsdGlwbHkgd2l0aCBmcm9tIGxlZnQgc2lkZS4KICAgICAqLwoKCiAgICBtbXVsdChtYXRyaXgsIHRhcmdldCA9IG5ldyBNYXQzKCkpIHsKICAgICAgY29uc3QgQSA9IHRoaXMuZWxlbWVudHM7CiAgICAgIGNvbnN0IEIgPSBtYXRyaXguZWxlbWVudHM7CiAgICAgIGNvbnN0IFQgPSB0YXJnZXQuZWxlbWVudHM7CiAgICAgIGNvbnN0IGExMSA9IEFbMF0sCiAgICAgICAgICAgIGExMiA9IEFbMV0sCiAgICAgICAgICAgIGExMyA9IEFbMl0sCiAgICAgICAgICAgIGEyMSA9IEFbM10sCiAgICAgICAgICAgIGEyMiA9IEFbNF0sCiAgICAgICAgICAgIGEyMyA9IEFbNV0sCiAgICAgICAgICAgIGEzMSA9IEFbNl0sCiAgICAgICAgICAgIGEzMiA9IEFbN10sCiAgICAgICAgICAgIGEzMyA9IEFbOF07CiAgICAgIGNvbnN0IGIxMSA9IEJbMF0sCiAgICAgICAgICAgIGIxMiA9IEJbMV0sCiAgICAgICAgICAgIGIxMyA9IEJbMl0sCiAgICAgICAgICAgIGIyMSA9IEJbM10sCiAgICAgICAgICAgIGIyMiA9IEJbNF0sCiAgICAgICAgICAgIGIyMyA9IEJbNV0sCiAgICAgICAgICAgIGIzMSA9IEJbNl0sCiAgICAgICAgICAgIGIzMiA9IEJbN10sCiAgICAgICAgICAgIGIzMyA9IEJbOF07CiAgICAgIFRbMF0gPSBhMTEgKiBiMTEgKyBhMTIgKiBiMjEgKyBhMTMgKiBiMzE7CiAgICAgIFRbMV0gPSBhMTEgKiBiMTIgKyBhMTIgKiBiMjIgKyBhMTMgKiBiMzI7CiAgICAgIFRbMl0gPSBhMTEgKiBiMTMgKyBhMTIgKiBiMjMgKyBhMTMgKiBiMzM7CiAgICAgIFRbM10gPSBhMjEgKiBiMTEgKyBhMjIgKiBiMjEgKyBhMjMgKiBiMzE7CiAgICAgIFRbNF0gPSBhMjEgKiBiMTIgKyBhMjIgKiBiMjIgKyBhMjMgKiBiMzI7CiAgICAgIFRbNV0gPSBhMjEgKiBiMTMgKyBhMjIgKiBiMjMgKyBhMjMgKiBiMzM7CiAgICAgIFRbNl0gPSBhMzEgKiBiMTEgKyBhMzIgKiBiMjEgKyBhMzMgKiBiMzE7CiAgICAgIFRbN10gPSBhMzEgKiBiMTIgKyBhMzIgKiBiMjIgKyBhMzMgKiBiMzI7CiAgICAgIFRbOF0gPSBhMzEgKiBiMTMgKyBhMzIgKiBiMjMgKyBhMzMgKiBiMzM7CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKioKICAgICAqIFNjYWxlIGVhY2ggY29sdW1uIG9mIHRoZSBtYXRyaXgKICAgICAqLwoKCiAgICBzY2FsZSh2ZWN0b3IsIHRhcmdldCA9IG5ldyBNYXQzKCkpIHsKICAgICAgY29uc3QgZSA9IHRoaXMuZWxlbWVudHM7CiAgICAgIGNvbnN0IHQgPSB0YXJnZXQuZWxlbWVudHM7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gMzsgaSsrKSB7CiAgICAgICAgdFszICogaSArIDBdID0gdmVjdG9yLnggKiBlWzMgKiBpICsgMF07CiAgICAgICAgdFszICogaSArIDFdID0gdmVjdG9yLnkgKiBlWzMgKiBpICsgMV07CiAgICAgICAgdFszICogaSArIDJdID0gdmVjdG9yLnogKiBlWzMgKiBpICsgMl07CiAgICAgIH0KCiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKioKICAgICAqIFNvbHZlIEF4PWIKICAgICAqIEBwYXJhbSBiIFRoZSByaWdodCBoYW5kIHNpZGUKICAgICAqIEBwYXJhbSB0YXJnZXQgT3B0aW9uYWwuIFRhcmdldCB2ZWN0b3IgdG8gc2F2ZSBpbi4KICAgICAqIEByZXR1cm4gVGhlIHNvbHV0aW9uIHgKICAgICAqIEB0b2RvIHNob3VsZCByZXVzZSBhcnJheXMKICAgICAqLwoKCiAgICBzb2x2ZShiLCB0YXJnZXQgPSBuZXcgVmVjMygpKSB7CiAgICAgIC8vIENvbnN0cnVjdCBlcXVhdGlvbnMKICAgICAgY29uc3QgbnIgPSAzOyAvLyBudW0gcm93cwoKICAgICAgY29uc3QgbmMgPSA0OyAvLyBudW0gY29scwoKICAgICAgY29uc3QgZXFucyA9IFtdOwogICAgICBsZXQgaTsKICAgICAgbGV0IGo7CgogICAgICBmb3IgKGkgPSAwOyBpIDwgbnIgKiBuYzsgaSsrKSB7CiAgICAgICAgZXFucy5wdXNoKDApOwogICAgICB9CgogICAgICBmb3IgKGkgPSAwOyBpIDwgMzsgaSsrKSB7CiAgICAgICAgZm9yIChqID0gMDsgaiA8IDM7IGorKykgewogICAgICAgICAgZXFuc1tpICsgbmMgKiBqXSA9IHRoaXMuZWxlbWVudHNbaSArIDMgKiBqXTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGVxbnNbMyArIDQgKiAwXSA9IGIueDsKICAgICAgZXFuc1szICsgNCAqIDFdID0gYi55OwogICAgICBlcW5zWzMgKyA0ICogMl0gPSBiLno7IC8vIENvbXB1dGUgcmlnaHQgdXBwZXIgdHJpYW5ndWxhciB2ZXJzaW9uIG9mIHRoZSBtYXRyaXggLSBHYXVzcyBlbGltaW5hdGlvbgoKICAgICAgbGV0IG4gPSAzOwogICAgICBjb25zdCBrID0gbjsKICAgICAgbGV0IG5wOwogICAgICBjb25zdCBrcCA9IDQ7IC8vIG51bSByb3dzCgogICAgICBsZXQgcDsKCiAgICAgIGRvIHsKICAgICAgICBpID0gayAtIG47CgogICAgICAgIGlmIChlcW5zW2kgKyBuYyAqIGldID09PSAwKSB7CiAgICAgICAgICAvLyB0aGUgcGl2b3QgaXMgbnVsbCwgc3dhcCBsaW5lcwogICAgICAgICAgZm9yIChqID0gaSArIDE7IGogPCBrOyBqKyspIHsKICAgICAgICAgICAgaWYgKGVxbnNbaSArIG5jICogal0gIT09IDApIHsKICAgICAgICAgICAgICBucCA9IGtwOwoKICAgICAgICAgICAgICBkbyB7CiAgICAgICAgICAgICAgICAvLyBkbyBsaWduZSggaSApID0gbGlnbmUoIGkgKSArIGxpZ25lKCBrICkKICAgICAgICAgICAgICAgIHAgPSBrcCAtIG5wOwogICAgICAgICAgICAgICAgZXFuc1twICsgbmMgKiBpXSArPSBlcW5zW3AgKyBuYyAqIGpdOwogICAgICAgICAgICAgIH0gd2hpbGUgKC0tbnApOwoKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKGVxbnNbaSArIG5jICogaV0gIT09IDApIHsKICAgICAgICAgIGZvciAoaiA9IGkgKyAxOyBqIDwgazsgaisrKSB7CiAgICAgICAgICAgIGNvbnN0IG11bHRpcGxpZXIgPSBlcW5zW2kgKyBuYyAqIGpdIC8gZXFuc1tpICsgbmMgKiBpXTsKICAgICAgICAgICAgbnAgPSBrcDsKCiAgICAgICAgICAgIGRvIHsKICAgICAgICAgICAgICAvLyBkbyBsaWduZSggayApID0gbGlnbmUoIGsgKSAtIG11bHRpcGxpZXIgKiBsaWduZSggaSApCiAgICAgICAgICAgICAgcCA9IGtwIC0gbnA7CiAgICAgICAgICAgICAgZXFuc1twICsgbmMgKiBqXSA9IHAgPD0gaSA/IDAgOiBlcW5zW3AgKyBuYyAqIGpdIC0gZXFuc1twICsgbmMgKiBpXSAqIG11bHRpcGxpZXI7CiAgICAgICAgICAgIH0gd2hpbGUgKC0tbnApOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSB3aGlsZSAoLS1uKTsgLy8gR2V0IHRoZSBzb2x1dGlvbgoKCiAgICAgIHRhcmdldC56ID0gZXFuc1syICogbmMgKyAzXSAvIGVxbnNbMiAqIG5jICsgMl07CiAgICAgIHRhcmdldC55ID0gKGVxbnNbMSAqIG5jICsgM10gLSBlcW5zWzEgKiBuYyArIDJdICogdGFyZ2V0LnopIC8gZXFuc1sxICogbmMgKyAxXTsKICAgICAgdGFyZ2V0LnggPSAoZXFuc1swICogbmMgKyAzXSAtIGVxbnNbMCAqIG5jICsgMl0gKiB0YXJnZXQueiAtIGVxbnNbMCAqIG5jICsgMV0gKiB0YXJnZXQueSkgLyBlcW5zWzAgKiBuYyArIDBdOwoKICAgICAgaWYgKGlzTmFOKHRhcmdldC54KSB8fCBpc05hTih0YXJnZXQueSkgfHwgaXNOYU4odGFyZ2V0LnopIHx8IHRhcmdldC54ID09PSBJbmZpbml0eSB8fCB0YXJnZXQueSA9PT0gSW5maW5pdHkgfHwgdGFyZ2V0LnogPT09IEluZmluaXR5KSB7CiAgICAgICAgdGhyb3cgIkNvdWxkIG5vdCBzb2x2ZSBlcXVhdGlvbiEgR290IHg9WyIgKyB0YXJnZXQudG9TdHJpbmcoKSArICJdLCBiPVsiICsgYi50b1N0cmluZygpICsgIl0sIEE9WyIgKyB0aGlzLnRvU3RyaW5nKCkgKyAiXSI7CiAgICAgIH0KCiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhbiBlbGVtZW50IGluIHRoZSBtYXRyaXggYnkgaW5kZXguIEluZGV4IHN0YXJ0cyBhdCAwLCBub3QgMSEhIQogICAgICogQHBhcmFtIHZhbHVlIElmIHByb3ZpZGVkLCB0aGUgbWF0cml4IGVsZW1lbnQgd2lsbCBiZSBzZXQgdG8gdGhpcyB2YWx1ZS4KICAgICAqLwoKCiAgICBlKHJvdywgY29sdW1uLCB2YWx1ZSkgewogICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkgewogICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnRzW2NvbHVtbiArIDMgKiByb3ddOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIFNldCB2YWx1ZQogICAgICAgIHRoaXMuZWxlbWVudHNbY29sdW1uICsgMyAqIHJvd10gPSB2YWx1ZTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBDb3B5IGFub3RoZXIgbWF0cml4IGludG8gdGhpcyBtYXRyaXggb2JqZWN0LgogICAgICovCgoKICAgIGNvcHkobWF0cml4KSB7CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWF0cml4LmVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdGhpcy5lbGVtZW50c1tpXSA9IG1hdHJpeC5lbGVtZW50c1tpXTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIG1hdHJpeC4KICAgICAqLwoKCiAgICB0b1N0cmluZygpIHsKICAgICAgbGV0IHIgPSAnJzsKICAgICAgY29uc3Qgc2VwID0gJywnOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA5OyBpKyspIHsKICAgICAgICByICs9IHRoaXMuZWxlbWVudHNbaV0gKyBzZXA7CiAgICAgIH0KCiAgICAgIHJldHVybiByOwogICAgfQogICAgLyoqCiAgICAgKiByZXZlcnNlIHRoZSBtYXRyaXgKICAgICAqIEBwYXJhbSB0YXJnZXQgVGFyZ2V0IG1hdHJpeCB0byBzYXZlIGluLgogICAgICogQHJldHVybiBUaGUgc29sdXRpb24geAogICAgICovCgoKICAgIHJldmVyc2UodGFyZ2V0ID0gbmV3IE1hdDMoKSkgewogICAgICAvLyBDb25zdHJ1Y3QgZXF1YXRpb25zCiAgICAgIGNvbnN0IG5yID0gMzsgLy8gbnVtIHJvd3MKCiAgICAgIGNvbnN0IG5jID0gNjsgLy8gbnVtIGNvbHMKCiAgICAgIGNvbnN0IGVxbnMgPSByZXZlcnNlX2VxbnM7CiAgICAgIGxldCBpOwogICAgICBsZXQgajsKCiAgICAgIGZvciAoaSA9IDA7IGkgPCAzOyBpKyspIHsKICAgICAgICBmb3IgKGogPSAwOyBqIDwgMzsgaisrKSB7CiAgICAgICAgICBlcW5zW2kgKyBuYyAqIGpdID0gdGhpcy5lbGVtZW50c1tpICsgMyAqIGpdOwogICAgICAgIH0KICAgICAgfQoKICAgICAgZXFuc1szICsgNiAqIDBdID0gMTsKICAgICAgZXFuc1szICsgNiAqIDFdID0gMDsKICAgICAgZXFuc1szICsgNiAqIDJdID0gMDsKICAgICAgZXFuc1s0ICsgNiAqIDBdID0gMDsKICAgICAgZXFuc1s0ICsgNiAqIDFdID0gMTsKICAgICAgZXFuc1s0ICsgNiAqIDJdID0gMDsKICAgICAgZXFuc1s1ICsgNiAqIDBdID0gMDsKICAgICAgZXFuc1s1ICsgNiAqIDFdID0gMDsKICAgICAgZXFuc1s1ICsgNiAqIDJdID0gMTsgLy8gQ29tcHV0ZSByaWdodCB1cHBlciB0cmlhbmd1bGFyIHZlcnNpb24gb2YgdGhlIG1hdHJpeCAtIEdhdXNzIGVsaW1pbmF0aW9uCgogICAgICBsZXQgbiA9IDM7CiAgICAgIGNvbnN0IGsgPSBuOwogICAgICBsZXQgbnA7CiAgICAgIGNvbnN0IGtwID0gbmM7IC8vIG51bSByb3dzCgogICAgICBsZXQgcDsKCiAgICAgIGRvIHsKICAgICAgICBpID0gayAtIG47CgogICAgICAgIGlmIChlcW5zW2kgKyBuYyAqIGldID09PSAwKSB7CiAgICAgICAgICAvLyB0aGUgcGl2b3QgaXMgbnVsbCwgc3dhcCBsaW5lcwogICAgICAgICAgZm9yIChqID0gaSArIDE7IGogPCBrOyBqKyspIHsKICAgICAgICAgICAgaWYgKGVxbnNbaSArIG5jICogal0gIT09IDApIHsKICAgICAgICAgICAgICBucCA9IGtwOwoKICAgICAgICAgICAgICBkbyB7CiAgICAgICAgICAgICAgICAvLyBkbyBsaW5lKCBpICkgPSBsaW5lKCBpICkgKyBsaW5lKCBrICkKICAgICAgICAgICAgICAgIHAgPSBrcCAtIG5wOwogICAgICAgICAgICAgICAgZXFuc1twICsgbmMgKiBpXSArPSBlcW5zW3AgKyBuYyAqIGpdOwogICAgICAgICAgICAgIH0gd2hpbGUgKC0tbnApOwoKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKGVxbnNbaSArIG5jICogaV0gIT09IDApIHsKICAgICAgICAgIGZvciAoaiA9IGkgKyAxOyBqIDwgazsgaisrKSB7CiAgICAgICAgICAgIGNvbnN0IG11bHRpcGxpZXIgPSBlcW5zW2kgKyBuYyAqIGpdIC8gZXFuc1tpICsgbmMgKiBpXTsKICAgICAgICAgICAgbnAgPSBrcDsKCiAgICAgICAgICAgIGRvIHsKICAgICAgICAgICAgICAvLyBkbyBsaW5lKCBrICkgPSBsaW5lKCBrICkgLSBtdWx0aXBsaWVyICogbGluZSggaSApCiAgICAgICAgICAgICAgcCA9IGtwIC0gbnA7CiAgICAgICAgICAgICAgZXFuc1twICsgbmMgKiBqXSA9IHAgPD0gaSA/IDAgOiBlcW5zW3AgKyBuYyAqIGpdIC0gZXFuc1twICsgbmMgKiBpXSAqIG11bHRpcGxpZXI7CiAgICAgICAgICAgIH0gd2hpbGUgKC0tbnApOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSB3aGlsZSAoLS1uKTsgLy8gZWxpbWluYXRlIHRoZSB1cHBlciBsZWZ0IHRyaWFuZ2xlIG9mIHRoZSBtYXRyaXgKCgogICAgICBpID0gMjsKCiAgICAgIGRvIHsKICAgICAgICBqID0gaSAtIDE7CgogICAgICAgIGRvIHsKICAgICAgICAgIGNvbnN0IG11bHRpcGxpZXIgPSBlcW5zW2kgKyBuYyAqIGpdIC8gZXFuc1tpICsgbmMgKiBpXTsKICAgICAgICAgIG5wID0gbmM7CgogICAgICAgICAgZG8gewogICAgICAgICAgICBwID0gbmMgLSBucDsKICAgICAgICAgICAgZXFuc1twICsgbmMgKiBqXSA9IGVxbnNbcCArIG5jICogal0gLSBlcW5zW3AgKyBuYyAqIGldICogbXVsdGlwbGllcjsKICAgICAgICAgIH0gd2hpbGUgKC0tbnApOwogICAgICAgIH0gd2hpbGUgKGotLSk7CiAgICAgIH0gd2hpbGUgKC0taSk7IC8vIG9wZXJhdGlvbnMgb24gdGhlIGRpYWdvbmFsCgoKICAgICAgaSA9IDI7CgogICAgICBkbyB7CiAgICAgICAgY29uc3QgbXVsdGlwbGllciA9IDEgLyBlcW5zW2kgKyBuYyAqIGldOwogICAgICAgIG5wID0gbmM7CgogICAgICAgIGRvIHsKICAgICAgICAgIHAgPSBuYyAtIG5wOwogICAgICAgICAgZXFuc1twICsgbmMgKiBpXSA9IGVxbnNbcCArIG5jICogaV0gKiBtdWx0aXBsaWVyOwogICAgICAgIH0gd2hpbGUgKC0tbnApOwogICAgICB9IHdoaWxlIChpLS0pOwoKICAgICAgaSA9IDI7CgogICAgICBkbyB7CiAgICAgICAgaiA9IDI7CgogICAgICAgIGRvIHsKICAgICAgICAgIHAgPSBlcW5zW25yICsgaiArIG5jICogaV07CgogICAgICAgICAgaWYgKGlzTmFOKHApIHx8IHAgPT09IEluZmluaXR5KSB7CiAgICAgICAgICAgIHRocm93ICJDb3VsZCBub3QgcmV2ZXJzZSEgQT1bIiArIHRoaXMudG9TdHJpbmcoKSArICJdIjsKICAgICAgICAgIH0KCiAgICAgICAgICB0YXJnZXQuZShpLCBqLCBwKTsKICAgICAgICB9IHdoaWxlIChqLS0pOwogICAgICB9IHdoaWxlIChpLS0pOwoKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogU2V0IHRoZSBtYXRyaXggZnJvbSBhIHF1YXRlcmlvbgogICAgICovCgoKICAgIHNldFJvdGF0aW9uRnJvbVF1YXRlcm5pb24ocSkgewogICAgICBjb25zdCB4ID0gcS54OwogICAgICBjb25zdCB5ID0gcS55OwogICAgICBjb25zdCB6ID0gcS56OwogICAgICBjb25zdCB3ID0gcS53OwogICAgICBjb25zdCB4MiA9IHggKyB4OwogICAgICBjb25zdCB5MiA9IHkgKyB5OwogICAgICBjb25zdCB6MiA9IHogKyB6OwogICAgICBjb25zdCB4eCA9IHggKiB4MjsKICAgICAgY29uc3QgeHkgPSB4ICogeTI7CiAgICAgIGNvbnN0IHh6ID0geCAqIHoyOwogICAgICBjb25zdCB5eSA9IHkgKiB5MjsKICAgICAgY29uc3QgeXogPSB5ICogejI7CiAgICAgIGNvbnN0IHp6ID0geiAqIHoyOwogICAgICBjb25zdCB3eCA9IHcgKiB4MjsKICAgICAgY29uc3Qgd3kgPSB3ICogeTI7CiAgICAgIGNvbnN0IHd6ID0gdyAqIHoyOwogICAgICBjb25zdCBlID0gdGhpcy5lbGVtZW50czsKICAgICAgZVszICogMCArIDBdID0gMSAtICh5eSArIHp6KTsKICAgICAgZVszICogMCArIDFdID0geHkgLSB3ejsKICAgICAgZVszICogMCArIDJdID0geHogKyB3eTsKICAgICAgZVszICogMSArIDBdID0geHkgKyB3ejsKICAgICAgZVszICogMSArIDFdID0gMSAtICh4eCArIHp6KTsKICAgICAgZVszICogMSArIDJdID0geXogLSB3eDsKICAgICAgZVszICogMiArIDBdID0geHogLSB3eTsKICAgICAgZVszICogMiArIDFdID0geXogKyB3eDsKICAgICAgZVszICogMiArIDJdID0gMSAtICh4eCArIHl5KTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIFRyYW5zcG9zZSB0aGUgbWF0cml4CiAgICAgKiBAcGFyYW0gdGFyZ2V0IE9wdGlvbmFsLiBXaGVyZSB0byBzdG9yZSB0aGUgcmVzdWx0LgogICAgICogQHJldHVybiBUaGUgdGFyZ2V0IE1hdDMsIG9yIGEgbmV3IE1hdDMgaWYgdGFyZ2V0IHdhcyBvbWl0dGVkLgogICAgICovCgoKICAgIHRyYW5zcG9zZSh0YXJnZXQgPSBuZXcgTWF0MygpKSB7CiAgICAgIGNvbnN0IE0gPSB0aGlzLmVsZW1lbnRzOwogICAgICBjb25zdCBUID0gdGFyZ2V0LmVsZW1lbnRzOwogICAgICBsZXQgdG1wOyAvL1NldCBkaWFnb25hbHMKCiAgICAgIFRbMF0gPSBNWzBdOwogICAgICBUWzRdID0gTVs0XTsKICAgICAgVFs4XSA9IE1bOF07CiAgICAgIHRtcCA9IE1bMV07CiAgICAgIFRbMV0gPSBNWzNdOwogICAgICBUWzNdID0gdG1wOwogICAgICB0bXAgPSBNWzJdOwogICAgICBUWzJdID0gTVs2XTsKICAgICAgVFs2XSA9IHRtcDsKICAgICAgdG1wID0gTVs1XTsKICAgICAgVFs1XSA9IE1bN107CiAgICAgIFRbN10gPSB0bXA7CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CgogIH0KCiAgY29uc3QgcmV2ZXJzZV9lcW5zID0gWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDBdOwogIC8qKgogICAqIDMtZGltZW5zaW9uYWwgdmVjdG9yCiAgICogQGV4YW1wbGUKICAgKiAgICAgY29uc3QgdiA9IG5ldyBWZWMzKDEsIDIsIDMpCiAgICogICAgIGNvbnNvbGUubG9nKCd4PScgKyB2LngpIC8vIHg9MQogICAqLwoKICBjbGFzcyBWZWMzIHsKICAgIGNvbnN0cnVjdG9yKHggPSAwLjAsIHkgPSAwLjAsIHogPSAwLjApIHsKICAgICAgdGhpcy54ID0gdm9pZCAwOwogICAgICB0aGlzLnkgPSB2b2lkIDA7CiAgICAgIHRoaXMueiA9IHZvaWQgMDsKICAgICAgdGhpcy54ID0geDsKICAgICAgdGhpcy55ID0geTsKICAgICAgdGhpcy56ID0gejsKICAgIH0KICAgIC8qKgogICAgICogVmVjdG9yIGNyb3NzIHByb2R1Y3QKICAgICAqIEBwYXJhbSB0YXJnZXQgT3B0aW9uYWwgdGFyZ2V0IHRvIHNhdmUgaW4uCiAgICAgKi8KCgogICAgY3Jvc3ModmVjdG9yLCB0YXJnZXQgPSBuZXcgVmVjMygpKSB7CiAgICAgIGNvbnN0IHZ4ID0gdmVjdG9yLng7CiAgICAgIGNvbnN0IHZ5ID0gdmVjdG9yLnk7CiAgICAgIGNvbnN0IHZ6ID0gdmVjdG9yLno7CiAgICAgIGNvbnN0IHggPSB0aGlzLng7CiAgICAgIGNvbnN0IHkgPSB0aGlzLnk7CiAgICAgIGNvbnN0IHogPSB0aGlzLno7CiAgICAgIHRhcmdldC54ID0geSAqIHZ6IC0geiAqIHZ5OwogICAgICB0YXJnZXQueSA9IHogKiB2eCAtIHggKiB2ejsKICAgICAgdGFyZ2V0LnogPSB4ICogdnkgLSB5ICogdng7CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKioKICAgICAqIFNldCB0aGUgdmVjdG9ycycgMyBlbGVtZW50cwogICAgICovCgoKICAgIHNldCh4LCB5LCB6KSB7CiAgICAgIHRoaXMueCA9IHg7CiAgICAgIHRoaXMueSA9IHk7CiAgICAgIHRoaXMueiA9IHo7CiAgICAgIHJldHVybiB0aGlzOwogICAgfQogICAgLyoqCiAgICAgKiBTZXQgYWxsIGNvbXBvbmVudHMgb2YgdGhlIHZlY3RvciB0byB6ZXJvLgogICAgICovCgoKICAgIHNldFplcm8oKSB7CiAgICAgIHRoaXMueCA9IHRoaXMueSA9IHRoaXMueiA9IDA7CiAgICB9CiAgICAvKioKICAgICAqIFZlY3RvciBhZGRpdGlvbgogICAgICovCgoKICAgIHZhZGQodmVjdG9yLCB0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCkgewogICAgICAgIHRhcmdldC54ID0gdmVjdG9yLnggKyB0aGlzLng7CiAgICAgICAgdGFyZ2V0LnkgPSB2ZWN0b3IueSArIHRoaXMueTsKICAgICAgICB0YXJnZXQueiA9IHZlY3Rvci56ICsgdGhpcy56OwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBuZXcgVmVjMyh0aGlzLnggKyB2ZWN0b3IueCwgdGhpcy55ICsgdmVjdG9yLnksIHRoaXMueiArIHZlY3Rvci56KTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBWZWN0b3Igc3VidHJhY3Rpb24KICAgICAqIEBwYXJhbSB0YXJnZXQgT3B0aW9uYWwgdGFyZ2V0IHRvIHNhdmUgaW4uCiAgICAgKi8KCgogICAgdnN1Yih2ZWN0b3IsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0KSB7CiAgICAgICAgdGFyZ2V0LnggPSB0aGlzLnggLSB2ZWN0b3IueDsKICAgICAgICB0YXJnZXQueSA9IHRoaXMueSAtIHZlY3Rvci55OwogICAgICAgIHRhcmdldC56ID0gdGhpcy56IC0gdmVjdG9yLno7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIG5ldyBWZWMzKHRoaXMueCAtIHZlY3Rvci54LCB0aGlzLnkgLSB2ZWN0b3IueSwgdGhpcy56IC0gdmVjdG9yLnopOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgY3Jvc3MgcHJvZHVjdCBtYXRyaXggYV9jcm9zcyBmcm9tIGEgdmVjdG9yLCBzdWNoIHRoYXQgYSB4IGIgPSBhX2Nyb3NzICogYiA9IGMKICAgICAqCiAgICAgKiBTZWUge0BsaW5rIGh0dHBzOi8vd3d3OC5jcy51bXUuc2Uva3Vyc2VyL1REQkQyNC9WVDA2L2xlY3R1cmVzL0xlY3R1cmU2LnBkZiBVbWXDpSBVbml2ZXJzaXR5IExlY3R1cmV9CiAgICAgKi8KCgogICAgY3Jvc3NtYXQoKSB7CiAgICAgIHJldHVybiBuZXcgTWF0MyhbMCwgLXRoaXMueiwgdGhpcy55LCB0aGlzLnosIDAsIC10aGlzLngsIC10aGlzLnksIHRoaXMueCwgMF0pOwogICAgfQogICAgLyoqCiAgICAgKiBOb3JtYWxpemUgdGhlIHZlY3Rvci4gTm90ZSB0aGF0IHRoaXMgY2hhbmdlcyB0aGUgdmFsdWVzIGluIHRoZSB2ZWN0b3IuCiAgICAgICogQHJldHVybiBSZXR1cm5zIHRoZSBub3JtIG9mIHRoZSB2ZWN0b3IKICAgICAqLwoKCiAgICBub3JtYWxpemUoKSB7CiAgICAgIGNvbnN0IHggPSB0aGlzLng7CiAgICAgIGNvbnN0IHkgPSB0aGlzLnk7CiAgICAgIGNvbnN0IHogPSB0aGlzLno7CiAgICAgIGNvbnN0IG4gPSBNYXRoLnNxcnQoeCAqIHggKyB5ICogeSArIHogKiB6KTsKCiAgICAgIGlmIChuID4gMC4wKSB7CiAgICAgICAgY29uc3QgaW52TiA9IDEgLyBuOwogICAgICAgIHRoaXMueCAqPSBpbnZOOwogICAgICAgIHRoaXMueSAqPSBpbnZOOwogICAgICAgIHRoaXMueiAqPSBpbnZOOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIE1ha2Ugc29tZXRoaW5nIHVwCiAgICAgICAgdGhpcy54ID0gMDsKICAgICAgICB0aGlzLnkgPSAwOwogICAgICAgIHRoaXMueiA9IDA7CiAgICAgIH0KCiAgICAgIHJldHVybiBuOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIHZlcnNpb24gb2YgdGhpcyB2ZWN0b3IgdGhhdCBpcyBvZiBsZW5ndGggMS4KICAgICAqIEBwYXJhbSB0YXJnZXQgT3B0aW9uYWwgdGFyZ2V0IHRvIHNhdmUgaW4KICAgICAqIEByZXR1cm4gUmV0dXJucyB0aGUgdW5pdCB2ZWN0b3IKICAgICAqLwoKCiAgICB1bml0KHRhcmdldCA9IG5ldyBWZWMzKCkpIHsKICAgICAgY29uc3QgeCA9IHRoaXMueDsKICAgICAgY29uc3QgeSA9IHRoaXMueTsKICAgICAgY29uc3QgeiA9IHRoaXMuejsKICAgICAgbGV0IG5pbnYgPSBNYXRoLnNxcnQoeCAqIHggKyB5ICogeSArIHogKiB6KTsKCiAgICAgIGlmIChuaW52ID4gMC4wKSB7CiAgICAgICAgbmludiA9IDEuMCAvIG5pbnY7CiAgICAgICAgdGFyZ2V0LnggPSB4ICogbmludjsKICAgICAgICB0YXJnZXQueSA9IHkgKiBuaW52OwogICAgICAgIHRhcmdldC56ID0geiAqIG5pbnY7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGFyZ2V0LnggPSAxOwogICAgICAgIHRhcmdldC55ID0gMDsKICAgICAgICB0YXJnZXQueiA9IDA7CiAgICAgIH0KCiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgbGVuZ3RoIG9mIHRoZSB2ZWN0b3IKICAgICAqLwoKCiAgICBsZW5ndGgoKSB7CiAgICAgIGNvbnN0IHggPSB0aGlzLng7CiAgICAgIGNvbnN0IHkgPSB0aGlzLnk7CiAgICAgIGNvbnN0IHogPSB0aGlzLno7CiAgICAgIHJldHVybiBNYXRoLnNxcnQoeCAqIHggKyB5ICogeSArIHogKiB6KTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSBzcXVhcmVkIGxlbmd0aCBvZiB0aGUgdmVjdG9yLgogICAgICovCgoKICAgIGxlbmd0aFNxdWFyZWQoKSB7CiAgICAgIHJldHVybiB0aGlzLmRvdCh0aGlzKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IGRpc3RhbmNlIGZyb20gdGhpcyBwb2ludCB0byBhbm90aGVyIHBvaW50CiAgICAgKi8KCgogICAgZGlzdGFuY2VUbyhwKSB7CiAgICAgIGNvbnN0IHggPSB0aGlzLng7CiAgICAgIGNvbnN0IHkgPSB0aGlzLnk7CiAgICAgIGNvbnN0IHogPSB0aGlzLno7CiAgICAgIGNvbnN0IHB4ID0gcC54OwogICAgICBjb25zdCBweSA9IHAueTsKICAgICAgY29uc3QgcHogPSBwLno7CiAgICAgIHJldHVybiBNYXRoLnNxcnQoKHB4IC0geCkgKiAocHggLSB4KSArIChweSAtIHkpICogKHB5IC0geSkgKyAocHogLSB6KSAqIChweiAtIHopKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHNxdWFyZWQgZGlzdGFuY2UgZnJvbSB0aGlzIHBvaW50IHRvIGFub3RoZXIgcG9pbnQKICAgICAqLwoKCiAgICBkaXN0YW5jZVNxdWFyZWQocCkgewogICAgICBjb25zdCB4ID0gdGhpcy54OwogICAgICBjb25zdCB5ID0gdGhpcy55OwogICAgICBjb25zdCB6ID0gdGhpcy56OwogICAgICBjb25zdCBweCA9IHAueDsKICAgICAgY29uc3QgcHkgPSBwLnk7CiAgICAgIGNvbnN0IHB6ID0gcC56OwogICAgICByZXR1cm4gKHB4IC0geCkgKiAocHggLSB4KSArIChweSAtIHkpICogKHB5IC0geSkgKyAocHogLSB6KSAqIChweiAtIHopOwogICAgfQogICAgLyoqCiAgICAgKiBNdWx0aXBseSBhbGwgdGhlIGNvbXBvbmVudHMgb2YgdGhlIHZlY3RvciB3aXRoIGEgc2NhbGFyLgogICAgICogQHBhcmFtIHRhcmdldCBUaGUgdmVjdG9yIHRvIHNhdmUgdGhlIHJlc3VsdCBpbi4KICAgICAqLwoKCiAgICBzY2FsZShzY2FsYXIsIHRhcmdldCA9IG5ldyBWZWMzKCkpIHsKICAgICAgY29uc3QgeCA9IHRoaXMueDsKICAgICAgY29uc3QgeSA9IHRoaXMueTsKICAgICAgY29uc3QgeiA9IHRoaXMuejsKICAgICAgdGFyZ2V0LnggPSBzY2FsYXIgKiB4OwogICAgICB0YXJnZXQueSA9IHNjYWxhciAqIHk7CiAgICAgIHRhcmdldC56ID0gc2NhbGFyICogejsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogTXVsdGlwbHkgdGhlIHZlY3RvciB3aXRoIGFuIG90aGVyIHZlY3RvciwgY29tcG9uZW50LXdpc2UuCiAgICAgKiBAcGFyYW0gdGFyZ2V0IFRoZSB2ZWN0b3IgdG8gc2F2ZSB0aGUgcmVzdWx0IGluLgogICAgICovCgoKICAgIHZtdWwodmVjdG9yLCB0YXJnZXQgPSBuZXcgVmVjMygpKSB7CiAgICAgIHRhcmdldC54ID0gdmVjdG9yLnggKiB0aGlzLng7CiAgICAgIHRhcmdldC55ID0gdmVjdG9yLnkgKiB0aGlzLnk7CiAgICAgIHRhcmdldC56ID0gdmVjdG9yLnogKiB0aGlzLno7CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKioKICAgICAqIFNjYWxlIGEgdmVjdG9yIGFuZCBhZGQgaXQgdG8gdGhpcyB2ZWN0b3IuIFNhdmUgdGhlIHJlc3VsdCBpbiAidGFyZ2V0Ii4gKHRhcmdldCA9IHRoaXMgKyB2ZWN0b3IgKiBzY2FsYXIpCiAgICAgKiBAcGFyYW0gdGFyZ2V0IFRoZSB2ZWN0b3IgdG8gc2F2ZSB0aGUgcmVzdWx0IGluLgogICAgICovCgoKICAgIGFkZFNjYWxlZFZlY3RvcihzY2FsYXIsIHZlY3RvciwgdGFyZ2V0ID0gbmV3IFZlYzMoKSkgewogICAgICB0YXJnZXQueCA9IHRoaXMueCArIHNjYWxhciAqIHZlY3Rvci54OwogICAgICB0YXJnZXQueSA9IHRoaXMueSArIHNjYWxhciAqIHZlY3Rvci55OwogICAgICB0YXJnZXQueiA9IHRoaXMueiArIHNjYWxhciAqIHZlY3Rvci56OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBDYWxjdWxhdGUgZG90IHByb2R1Y3QKICAgICAqIEBwYXJhbSB2ZWN0b3IKICAgICAqLwoKCiAgICBkb3QodmVjdG9yKSB7CiAgICAgIHJldHVybiB0aGlzLnggKiB2ZWN0b3IueCArIHRoaXMueSAqIHZlY3Rvci55ICsgdGhpcy56ICogdmVjdG9yLno7CiAgICB9CgogICAgaXNaZXJvKCkgewogICAgICByZXR1cm4gdGhpcy54ID09PSAwICYmIHRoaXMueSA9PT0gMCAmJiB0aGlzLnogPT09IDA7CiAgICB9CiAgICAvKioKICAgICAqIE1ha2UgdGhlIHZlY3RvciBwb2ludCBpbiB0aGUgb3Bwb3NpdGUgZGlyZWN0aW9uLgogICAgICogQHBhcmFtIHRhcmdldCBPcHRpb25hbCB0YXJnZXQgdG8gc2F2ZSBpbgogICAgICovCgoKICAgIG5lZ2F0ZSh0YXJnZXQgPSBuZXcgVmVjMygpKSB7CiAgICAgIHRhcmdldC54ID0gLXRoaXMueDsKICAgICAgdGFyZ2V0LnkgPSAtdGhpcy55OwogICAgICB0YXJnZXQueiA9IC10aGlzLno7CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKioKICAgICAqIENvbXB1dGUgdHdvIGFydGlmaWNpYWwgdGFuZ2VudHMgdG8gdGhlIHZlY3RvcgogICAgICogQHBhcmFtIHQxIFZlY3RvciBvYmplY3QgdG8gc2F2ZSB0aGUgZmlyc3QgdGFuZ2VudCBpbgogICAgICogQHBhcmFtIHQyIFZlY3RvciBvYmplY3QgdG8gc2F2ZSB0aGUgc2Vjb25kIHRhbmdlbnQgaW4KICAgICAqLwoKCiAgICB0YW5nZW50cyh0MSwgdDIpIHsKICAgICAgY29uc3Qgbm9ybSA9IHRoaXMubGVuZ3RoKCk7CgogICAgICBpZiAobm9ybSA+IDAuMCkgewogICAgICAgIGNvbnN0IG4gPSBWZWMzX3RhbmdlbnRzX247CiAgICAgICAgY29uc3QgaW5vcm0gPSAxIC8gbm9ybTsKICAgICAgICBuLnNldCh0aGlzLnggKiBpbm9ybSwgdGhpcy55ICogaW5vcm0sIHRoaXMueiAqIGlub3JtKTsKICAgICAgICBjb25zdCByYW5kVmVjID0gVmVjM190YW5nZW50c19yYW5kVmVjOwoKICAgICAgICBpZiAoTWF0aC5hYnMobi54KSA8IDAuOSkgewogICAgICAgICAgcmFuZFZlYy5zZXQoMSwgMCwgMCk7CiAgICAgICAgICBuLmNyb3NzKHJhbmRWZWMsIHQxKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmFuZFZlYy5zZXQoMCwgMSwgMCk7CiAgICAgICAgICBuLmNyb3NzKHJhbmRWZWMsIHQxKTsKICAgICAgICB9CgogICAgICAgIG4uY3Jvc3ModDEsIHQyKTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBUaGUgbm9ybWFsIGxlbmd0aCBpcyB6ZXJvLCBtYWtlIHNvbWV0aGluZyB1cAogICAgICAgIHQxLnNldCgxLCAwLCAwKTsKICAgICAgICB0Mi5zZXQoMCwgMSwgMCk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQ29udmVydHMgdG8gYSBtb3JlIHJlYWRhYmxlIGZvcm1hdAogICAgICovCgoKICAgIHRvU3RyaW5nKCkgewogICAgICByZXR1cm4gdGhpcy54ICsgIiwiICsgdGhpcy55ICsgIiwiICsgdGhpcy56OwogICAgfQogICAgLyoqCiAgICAgKiBDb252ZXJ0cyB0byBhbiBhcnJheQogICAgICovCgoKICAgIHRvQXJyYXkoKSB7CiAgICAgIHJldHVybiBbdGhpcy54LCB0aGlzLnksIHRoaXMuel07CiAgICB9CiAgICAvKioKICAgICAqIENvcGllcyB2YWx1ZSBvZiBzb3VyY2UgdG8gdGhpcyB2ZWN0b3IuCiAgICAgKi8KCgogICAgY29weSh2ZWN0b3IpIHsKICAgICAgdGhpcy54ID0gdmVjdG9yLng7CiAgICAgIHRoaXMueSA9IHZlY3Rvci55OwogICAgICB0aGlzLnogPSB2ZWN0b3IuejsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIERvIGEgbGluZWFyIGludGVycG9sYXRpb24gYmV0d2VlbiB0d28gdmVjdG9ycwogICAgICogQHBhcmFtIHQgQSBudW1iZXIgYmV0d2VlbiAwIGFuZCAxLiAwIHdpbGwgbWFrZSB0aGlzIGZ1bmN0aW9uIHJldHVybiB1LCBhbmQgMSB3aWxsIG1ha2UgaXQgcmV0dXJuIHYuIE51bWJlcnMgaW4gYmV0d2VlbiB3aWxsIGdlbmVyYXRlIGEgdmVjdG9yIGluIGJldHdlZW4gdGhlbS4KICAgICAqLwoKCiAgICBsZXJwKHZlY3RvciwgdCwgdGFyZ2V0KSB7CiAgICAgIGNvbnN0IHggPSB0aGlzLng7CiAgICAgIGNvbnN0IHkgPSB0aGlzLnk7CiAgICAgIGNvbnN0IHogPSB0aGlzLno7CiAgICAgIHRhcmdldC54ID0geCArICh2ZWN0b3IueCAtIHgpICogdDsKICAgICAgdGFyZ2V0LnkgPSB5ICsgKHZlY3Rvci55IC0geSkgKiB0OwogICAgICB0YXJnZXQueiA9IHogKyAodmVjdG9yLnogLSB6KSAqIHQ7CiAgICB9CiAgICAvKioKICAgICAqIENoZWNrIGlmIGEgdmVjdG9yIGVxdWFscyBpcyBhbG1vc3QgZXF1YWwgdG8gYW5vdGhlciBvbmUuCiAgICAgKi8KCgogICAgYWxtb3N0RXF1YWxzKHZlY3RvciwgcHJlY2lzaW9uID0gMWUtNikgewogICAgICBpZiAoTWF0aC5hYnModGhpcy54IC0gdmVjdG9yLngpID4gcHJlY2lzaW9uIHx8IE1hdGguYWJzKHRoaXMueSAtIHZlY3Rvci55KSA+IHByZWNpc2lvbiB8fCBNYXRoLmFicyh0aGlzLnogLSB2ZWN0b3IueikgPiBwcmVjaXNpb24pIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgLyoqCiAgICAgKiBDaGVjayBpZiBhIHZlY3RvciBpcyBhbG1vc3QgemVybwogICAgICovCgoKICAgIGFsbW9zdFplcm8ocHJlY2lzaW9uID0gMWUtNikgewogICAgICBpZiAoTWF0aC5hYnModGhpcy54KSA+IHByZWNpc2lvbiB8fCBNYXRoLmFicyh0aGlzLnkpID4gcHJlY2lzaW9uIHx8IE1hdGguYWJzKHRoaXMueikgPiBwcmVjaXNpb24pIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgLyoqCiAgICAgKiBDaGVjayBpZiB0aGUgdmVjdG9yIGlzIGFudGktcGFyYWxsZWwgdG8gYW5vdGhlciB2ZWN0b3IuCiAgICAgKiBAcGFyYW0gcHJlY2lzaW9uIFNldCB0byB6ZXJvIGZvciBleGFjdCBjb21wYXJpc29ucwogICAgICovCgoKICAgIGlzQW50aXBhcmFsbGVsVG8odmVjdG9yLCBwcmVjaXNpb24pIHsKICAgICAgdGhpcy5uZWdhdGUoYW50aXBfbmVnKTsKICAgICAgcmV0dXJuIGFudGlwX25lZy5hbG1vc3RFcXVhbHModmVjdG9yLCBwcmVjaXNpb24pOwogICAgfQogICAgLyoqCiAgICAgKiBDbG9uZSB0aGUgdmVjdG9yCiAgICAgKi8KCgogICAgY2xvbmUoKSB7CiAgICAgIHJldHVybiBuZXcgVmVjMyh0aGlzLngsIHRoaXMueSwgdGhpcy56KTsKICAgIH0KCiAgfQoKICBWZWMzLlpFUk8gPSB2b2lkIDA7CiAgVmVjMy5VTklUX1ggPSB2b2lkIDA7CiAgVmVjMy5VTklUX1kgPSB2b2lkIDA7CiAgVmVjMy5VTklUX1ogPSB2b2lkIDA7CiAgVmVjMy5aRVJPID0gbmV3IFZlYzMoMCwgMCwgMCk7CiAgVmVjMy5VTklUX1ggPSBuZXcgVmVjMygxLCAwLCAwKTsKICBWZWMzLlVOSVRfWSA9IG5ldyBWZWMzKDAsIDEsIDApOwogIFZlYzMuVU5JVF9aID0gbmV3IFZlYzMoMCwgMCwgMSk7CiAgY29uc3QgVmVjM190YW5nZW50c19uID0gbmV3IFZlYzMoKTsKICBjb25zdCBWZWMzX3RhbmdlbnRzX3JhbmRWZWMgPSBuZXcgVmVjMygpOwogIGNvbnN0IGFudGlwX25lZyA9IG5ldyBWZWMzKCk7CiAgLyoqCiAgICogQXhpcyBhbGlnbmVkIGJvdW5kaW5nIGJveCBjbGFzcy4KICAgKi8KCiAgY2xhc3MgQUFCQiB7CiAgICAvKioKICAgICAqIFRoZSBsb3dlciBib3VuZCBvZiB0aGUgYm91bmRpbmcgYm94CiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSB1cHBlciBib3VuZCBvZiB0aGUgYm91bmRpbmcgYm94CiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkgewogICAgICB0aGlzLmxvd2VyQm91bmQgPSB2b2lkIDA7CiAgICAgIHRoaXMudXBwZXJCb3VuZCA9IHZvaWQgMDsKICAgICAgdGhpcy5sb3dlckJvdW5kID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy51cHBlckJvdW5kID0gbmV3IFZlYzMoKTsKCiAgICAgIGlmIChvcHRpb25zLmxvd2VyQm91bmQpIHsKICAgICAgICB0aGlzLmxvd2VyQm91bmQuY29weShvcHRpb25zLmxvd2VyQm91bmQpOwogICAgICB9CgogICAgICBpZiAob3B0aW9ucy51cHBlckJvdW5kKSB7CiAgICAgICAgdGhpcy51cHBlckJvdW5kLmNvcHkob3B0aW9ucy51cHBlckJvdW5kKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBTZXQgdGhlIEFBQkIgYm91bmRzIGZyb20gYSBzZXQgb2YgcG9pbnRzLgogICAgICogQHBhcmFtIHBvaW50cyBBbiBhcnJheSBvZiBWZWMzJ3MuCiAgICAgKiBAcmV0dXJuIFRoZSBzZWxmIG9iamVjdAogICAgICovCgoKICAgIHNldEZyb21Qb2ludHMocG9pbnRzLCBwb3NpdGlvbiwgcXVhdGVybmlvbiwgc2tpblNpemUpIHsKICAgICAgY29uc3QgbCA9IHRoaXMubG93ZXJCb3VuZDsKICAgICAgY29uc3QgdSA9IHRoaXMudXBwZXJCb3VuZDsKICAgICAgY29uc3QgcSA9IHF1YXRlcm5pb247IC8vIFNldCB0byB0aGUgZmlyc3QgcG9pbnQKCiAgICAgIGwuY29weShwb2ludHNbMF0pOwoKICAgICAgaWYgKHEpIHsKICAgICAgICBxLnZtdWx0KGwsIGwpOwogICAgICB9CgogICAgICB1LmNvcHkobCk7CgogICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHBvaW50cy5sZW5ndGg7IGkrKykgewogICAgICAgIGxldCBwID0gcG9pbnRzW2ldOwoKICAgICAgICBpZiAocSkgewogICAgICAgICAgcS52bXVsdChwLCB0bXAkMSk7CiAgICAgICAgICBwID0gdG1wJDE7CiAgICAgICAgfQoKICAgICAgICBpZiAocC54ID4gdS54KSB7CiAgICAgICAgICB1LnggPSBwLng7CiAgICAgICAgfQoKICAgICAgICBpZiAocC54IDwgbC54KSB7CiAgICAgICAgICBsLnggPSBwLng7CiAgICAgICAgfQoKICAgICAgICBpZiAocC55ID4gdS55KSB7CiAgICAgICAgICB1LnkgPSBwLnk7CiAgICAgICAgfQoKICAgICAgICBpZiAocC55IDwgbC55KSB7CiAgICAgICAgICBsLnkgPSBwLnk7CiAgICAgICAgfQoKICAgICAgICBpZiAocC56ID4gdS56KSB7CiAgICAgICAgICB1LnogPSBwLno7CiAgICAgICAgfQoKICAgICAgICBpZiAocC56IDwgbC56KSB7CiAgICAgICAgICBsLnogPSBwLno7CiAgICAgICAgfQogICAgICB9IC8vIEFkZCBvZmZzZXQKCgogICAgICBpZiAocG9zaXRpb24pIHsKICAgICAgICBwb3NpdGlvbi52YWRkKGwsIGwpOwogICAgICAgIHBvc2l0aW9uLnZhZGQodSwgdSk7CiAgICAgIH0KCiAgICAgIGlmIChza2luU2l6ZSkgewogICAgICAgIGwueCAtPSBza2luU2l6ZTsKICAgICAgICBsLnkgLT0gc2tpblNpemU7CiAgICAgICAgbC56IC09IHNraW5TaXplOwogICAgICAgIHUueCArPSBza2luU2l6ZTsKICAgICAgICB1LnkgKz0gc2tpblNpemU7CiAgICAgICAgdS56ICs9IHNraW5TaXplOwogICAgICB9CgogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogQ29weSBib3VuZHMgZnJvbSBhbiBBQUJCIHRvIHRoaXMgQUFCQgogICAgICogQHBhcmFtIGFhYmIgU291cmNlIHRvIGNvcHkgZnJvbQogICAgICogQHJldHVybiBUaGUgdGhpcyBvYmplY3QsIGZvciBjaGFpbmFiaWxpdHkKICAgICAqLwoKCiAgICBjb3B5KGFhYmIpIHsKICAgICAgdGhpcy5sb3dlckJvdW5kLmNvcHkoYWFiYi5sb3dlckJvdW5kKTsKICAgICAgdGhpcy51cHBlckJvdW5kLmNvcHkoYWFiYi51cHBlckJvdW5kKTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIENsb25lIGFuIEFBQkIKICAgICAqLwoKCiAgICBjbG9uZSgpIHsKICAgICAgcmV0dXJuIG5ldyBBQUJCKCkuY29weSh0aGlzKTsKICAgIH0KICAgIC8qKgogICAgICogRXh0ZW5kIHRoaXMgQUFCQiBzbyB0aGF0IGl0IGNvdmVycyB0aGUgZ2l2ZW4gQUFCQiB0b28uCiAgICAgKi8KCgogICAgZXh0ZW5kKGFhYmIpIHsKICAgICAgdGhpcy5sb3dlckJvdW5kLnggPSBNYXRoLm1pbih0aGlzLmxvd2VyQm91bmQueCwgYWFiYi5sb3dlckJvdW5kLngpOwogICAgICB0aGlzLnVwcGVyQm91bmQueCA9IE1hdGgubWF4KHRoaXMudXBwZXJCb3VuZC54LCBhYWJiLnVwcGVyQm91bmQueCk7CiAgICAgIHRoaXMubG93ZXJCb3VuZC55ID0gTWF0aC5taW4odGhpcy5sb3dlckJvdW5kLnksIGFhYmIubG93ZXJCb3VuZC55KTsKICAgICAgdGhpcy51cHBlckJvdW5kLnkgPSBNYXRoLm1heCh0aGlzLnVwcGVyQm91bmQueSwgYWFiYi51cHBlckJvdW5kLnkpOwogICAgICB0aGlzLmxvd2VyQm91bmQueiA9IE1hdGgubWluKHRoaXMubG93ZXJCb3VuZC56LCBhYWJiLmxvd2VyQm91bmQueik7CiAgICAgIHRoaXMudXBwZXJCb3VuZC56ID0gTWF0aC5tYXgodGhpcy51cHBlckJvdW5kLnosIGFhYmIudXBwZXJCb3VuZC56KTsKICAgIH0KICAgIC8qKgogICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiBBQUJCIG92ZXJsYXBzIHRoaXMgQUFCQi4KICAgICAqLwoKCiAgICBvdmVybGFwcyhhYWJiKSB7CiAgICAgIGNvbnN0IGwxID0gdGhpcy5sb3dlckJvdW5kOwogICAgICBjb25zdCB1MSA9IHRoaXMudXBwZXJCb3VuZDsKICAgICAgY29uc3QgbDIgPSBhYWJiLmxvd2VyQm91bmQ7CiAgICAgIGNvbnN0IHUyID0gYWFiYi51cHBlckJvdW5kOyAvLyAgICAgIGwyICAgICAgICB1MgogICAgICAvLyAgICAgIHwtLS0tLS0tLS18CiAgICAgIC8vIHwtLS0tLS0tLXwKICAgICAgLy8gbDEgICAgICAgdTEKCiAgICAgIGNvbnN0IG92ZXJsYXBzWCA9IGwyLnggPD0gdTEueCAmJiB1MS54IDw9IHUyLnggfHwgbDEueCA8PSB1Mi54ICYmIHUyLnggPD0gdTEueDsKICAgICAgY29uc3Qgb3ZlcmxhcHNZID0gbDIueSA8PSB1MS55ICYmIHUxLnkgPD0gdTIueSB8fCBsMS55IDw9IHUyLnkgJiYgdTIueSA8PSB1MS55OwogICAgICBjb25zdCBvdmVybGFwc1ogPSBsMi56IDw9IHUxLnogJiYgdTEueiA8PSB1Mi56IHx8IGwxLnogPD0gdTIueiAmJiB1Mi56IDw9IHUxLno7CiAgICAgIHJldHVybiBvdmVybGFwc1ggJiYgb3ZlcmxhcHNZICYmIG92ZXJsYXBzWjsKICAgIH0gLy8gTW9zdGx5IGZvciBkZWJ1Z2dpbmcKCgogICAgdm9sdW1lKCkgewogICAgICBjb25zdCBsID0gdGhpcy5sb3dlckJvdW5kOwogICAgICBjb25zdCB1ID0gdGhpcy51cHBlckJvdW5kOwogICAgICByZXR1cm4gKHUueCAtIGwueCkgKiAodS55IC0gbC55KSAqICh1LnogLSBsLnopOwogICAgfQogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIEFBQkIgaXMgZnVsbHkgY29udGFpbmVkIGluIHRoaXMgQUFCQi4KICAgICAqLwoKCiAgICBjb250YWlucyhhYWJiKSB7CiAgICAgIGNvbnN0IGwxID0gdGhpcy5sb3dlckJvdW5kOwogICAgICBjb25zdCB1MSA9IHRoaXMudXBwZXJCb3VuZDsKICAgICAgY29uc3QgbDIgPSBhYWJiLmxvd2VyQm91bmQ7CiAgICAgIGNvbnN0IHUyID0gYWFiYi51cHBlckJvdW5kOyAvLyAgICAgIGwyICAgICAgICB1MgogICAgICAvLyAgICAgIHwtLS0tLS0tLS18CiAgICAgIC8vIHwtLS0tLS0tLS0tLS0tLS18CiAgICAgIC8vIGwxICAgICAgICAgICAgICB1MQoKICAgICAgcmV0dXJuIGwxLnggPD0gbDIueCAmJiB1MS54ID49IHUyLnggJiYgbDEueSA8PSBsMi55ICYmIHUxLnkgPj0gdTIueSAmJiBsMS56IDw9IGwyLnogJiYgdTEueiA+PSB1Mi56OwogICAgfQoKICAgIGdldENvcm5lcnMoYSwgYiwgYywgZCwgZSwgZiwgZywgaCkgewogICAgICBjb25zdCBsID0gdGhpcy5sb3dlckJvdW5kOwogICAgICBjb25zdCB1ID0gdGhpcy51cHBlckJvdW5kOwogICAgICBhLmNvcHkobCk7CiAgICAgIGIuc2V0KHUueCwgbC55LCBsLnopOwogICAgICBjLnNldCh1LngsIHUueSwgbC56KTsKICAgICAgZC5zZXQobC54LCB1LnksIHUueik7CiAgICAgIGUuc2V0KHUueCwgbC55LCB1LnopOwogICAgICBmLnNldChsLngsIHUueSwgbC56KTsKICAgICAgZy5zZXQobC54LCBsLnksIHUueik7CiAgICAgIGguY29weSh1KTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSByZXByZXNlbnRhdGlvbiBvZiBhbiBBQUJCIGluIGFub3RoZXIgZnJhbWUuCiAgICAgKiBAcmV0dXJuIFRoZSAidGFyZ2V0IiBBQUJCIG9iamVjdC4KICAgICAqLwoKCiAgICB0b0xvY2FsRnJhbWUoZnJhbWUsIHRhcmdldCkgewogICAgICBjb25zdCBjb3JuZXJzID0gdHJhbnNmb3JtSW50b0ZyYW1lX2Nvcm5lcnM7CiAgICAgIGNvbnN0IGEgPSBjb3JuZXJzWzBdOwogICAgICBjb25zdCBiID0gY29ybmVyc1sxXTsKICAgICAgY29uc3QgYyA9IGNvcm5lcnNbMl07CiAgICAgIGNvbnN0IGQgPSBjb3JuZXJzWzNdOwogICAgICBjb25zdCBlID0gY29ybmVyc1s0XTsKICAgICAgY29uc3QgZiA9IGNvcm5lcnNbNV07CiAgICAgIGNvbnN0IGcgPSBjb3JuZXJzWzZdOwogICAgICBjb25zdCBoID0gY29ybmVyc1s3XTsgLy8gR2V0IGNvcm5lcnMgaW4gY3VycmVudCBmcmFtZQoKICAgICAgdGhpcy5nZXRDb3JuZXJzKGEsIGIsIGMsIGQsIGUsIGYsIGcsIGgpOyAvLyBUcmFuc2Zvcm0gdGhlbSB0byBuZXcgbG9jYWwgZnJhbWUKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSA4OyBpKyspIHsKICAgICAgICBjb25zdCBjb3JuZXIgPSBjb3JuZXJzW2ldOwogICAgICAgIGZyYW1lLnBvaW50VG9Mb2NhbChjb3JuZXIsIGNvcm5lcik7CiAgICAgIH0KCiAgICAgIHJldHVybiB0YXJnZXQuc2V0RnJvbVBvaW50cyhjb3JuZXJzKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSByZXByZXNlbnRhdGlvbiBvZiBhbiBBQUJCIGluIHRoZSBnbG9iYWwgZnJhbWUuCiAgICAgKiBAcmV0dXJuIFRoZSAidGFyZ2V0IiBBQUJCIG9iamVjdC4KICAgICAqLwoKCiAgICB0b1dvcmxkRnJhbWUoZnJhbWUsIHRhcmdldCkgewogICAgICBjb25zdCBjb3JuZXJzID0gdHJhbnNmb3JtSW50b0ZyYW1lX2Nvcm5lcnM7CiAgICAgIGNvbnN0IGEgPSBjb3JuZXJzWzBdOwogICAgICBjb25zdCBiID0gY29ybmVyc1sxXTsKICAgICAgY29uc3QgYyA9IGNvcm5lcnNbMl07CiAgICAgIGNvbnN0IGQgPSBjb3JuZXJzWzNdOwogICAgICBjb25zdCBlID0gY29ybmVyc1s0XTsKICAgICAgY29uc3QgZiA9IGNvcm5lcnNbNV07CiAgICAgIGNvbnN0IGcgPSBjb3JuZXJzWzZdOwogICAgICBjb25zdCBoID0gY29ybmVyc1s3XTsgLy8gR2V0IGNvcm5lcnMgaW4gY3VycmVudCBmcmFtZQoKICAgICAgdGhpcy5nZXRDb3JuZXJzKGEsIGIsIGMsIGQsIGUsIGYsIGcsIGgpOyAvLyBUcmFuc2Zvcm0gdGhlbSB0byBuZXcgbG9jYWwgZnJhbWUKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSA4OyBpKyspIHsKICAgICAgICBjb25zdCBjb3JuZXIgPSBjb3JuZXJzW2ldOwogICAgICAgIGZyYW1lLnBvaW50VG9Xb3JsZChjb3JuZXIsIGNvcm5lcik7CiAgICAgIH0KCiAgICAgIHJldHVybiB0YXJnZXQuc2V0RnJvbVBvaW50cyhjb3JuZXJzKTsKICAgIH0KICAgIC8qKgogICAgICogQ2hlY2sgaWYgdGhlIEFBQkIgaXMgaGl0IGJ5IGEgcmF5LgogICAgICovCgoKICAgIG92ZXJsYXBzUmF5KHJheSkgewogICAgICBjb25zdCB7CiAgICAgICAgZGlyZWN0aW9uLAogICAgICAgIGZyb20KICAgICAgfSA9IHJheTsgLy8gY29uc3QgdCA9IDAKICAgICAgLy8gcmF5LmRpcmVjdGlvbiBpcyB1bml0IGRpcmVjdGlvbiB2ZWN0b3Igb2YgcmF5CgogICAgICBjb25zdCBkaXJGcmFjWCA9IDEgLyBkaXJlY3Rpb24ueDsKICAgICAgY29uc3QgZGlyRnJhY1kgPSAxIC8gZGlyZWN0aW9uLnk7CiAgICAgIGNvbnN0IGRpckZyYWNaID0gMSAvIGRpcmVjdGlvbi56OyAvLyB0aGlzLmxvd2VyQm91bmQgaXMgdGhlIGNvcm5lciBvZiBBQUJCIHdpdGggbWluaW1hbCBjb29yZGluYXRlcyAtIGxlZnQgYm90dG9tLCBydCBpcyBtYXhpbWFsIGNvcm5lcgoKICAgICAgY29uc3QgdDEgPSAodGhpcy5sb3dlckJvdW5kLnggLSBmcm9tLngpICogZGlyRnJhY1g7CiAgICAgIGNvbnN0IHQyID0gKHRoaXMudXBwZXJCb3VuZC54IC0gZnJvbS54KSAqIGRpckZyYWNYOwogICAgICBjb25zdCB0MyA9ICh0aGlzLmxvd2VyQm91bmQueSAtIGZyb20ueSkgKiBkaXJGcmFjWTsKICAgICAgY29uc3QgdDQgPSAodGhpcy51cHBlckJvdW5kLnkgLSBmcm9tLnkpICogZGlyRnJhY1k7CiAgICAgIGNvbnN0IHQ1ID0gKHRoaXMubG93ZXJCb3VuZC56IC0gZnJvbS56KSAqIGRpckZyYWNaOwogICAgICBjb25zdCB0NiA9ICh0aGlzLnVwcGVyQm91bmQueiAtIGZyb20ueikgKiBkaXJGcmFjWjsgLy8gY29uc3QgdG1pbiA9IE1hdGgubWF4KE1hdGgubWF4KE1hdGgubWluKHQxLCB0MiksIE1hdGgubWluKHQzLCB0NCkpKTsKICAgICAgLy8gY29uc3QgdG1heCA9IE1hdGgubWluKE1hdGgubWluKE1hdGgubWF4KHQxLCB0MiksIE1hdGgubWF4KHQzLCB0NCkpKTsKCiAgICAgIGNvbnN0IHRtaW4gPSBNYXRoLm1heChNYXRoLm1heChNYXRoLm1pbih0MSwgdDIpLCBNYXRoLm1pbih0MywgdDQpKSwgTWF0aC5taW4odDUsIHQ2KSk7CiAgICAgIGNvbnN0IHRtYXggPSBNYXRoLm1pbihNYXRoLm1pbihNYXRoLm1heCh0MSwgdDIpLCBNYXRoLm1heCh0MywgdDQpKSwgTWF0aC5tYXgodDUsIHQ2KSk7IC8vIGlmIHRtYXggPCAwLCByYXkgKGxpbmUpIGlzIGludGVyc2VjdGluZyBBQUJCLCBidXQgd2hvbGUgQUFCQiBpcyBiZWhpbmcgdXMKCiAgICAgIGlmICh0bWF4IDwgMCkgewogICAgICAgIC8vdCA9IHRtYXg7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9IC8vIGlmIHRtaW4gPiB0bWF4LCByYXkgZG9lc24ndCBpbnRlcnNlY3QgQUFCQgoKCiAgICAgIGlmICh0bWluID4gdG1heCkgewogICAgICAgIC8vdCA9IHRtYXg7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgfQoKICBjb25zdCB0bXAkMSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgdHJhbnNmb3JtSW50b0ZyYW1lX2Nvcm5lcnMgPSBbbmV3IFZlYzMoKSwgbmV3IFZlYzMoKSwgbmV3IFZlYzMoKSwgbmV3IFZlYzMoKSwgbmV3IFZlYzMoKSwgbmV3IFZlYzMoKSwgbmV3IFZlYzMoKSwgbmV3IFZlYzMoKV07CiAgLyoqCiAgICogQ29sbGlzaW9uICJtYXRyaXgiLgogICAqIEl0J3MgYWN0dWFsbHkgYSB0cmlhbmd1bGFyLXNoYXBlZCBhcnJheSBvZiB3aGV0aGVyIHR3byBib2RpZXMgYXJlIHRvdWNoaW5nIHRoaXMgc3RlcCwgZm9yIHJlZmVyZW5jZSBuZXh0IHN0ZXAKICAgKi8KCiAgY2xhc3MgQXJyYXlDb2xsaXNpb25NYXRyaXggewogICAgLyoqCiAgICAgKiBUaGUgbWF0cml4IHN0b3JhZ2UuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKCkgewogICAgICB0aGlzLm1hdHJpeCA9IHZvaWQgMDsKICAgICAgdGhpcy5tYXRyaXggPSBbXTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IGFuIGVsZW1lbnQKICAgICAqLwoKCiAgICBnZXQoYmksIGJqKSB7CiAgICAgIGxldCB7CiAgICAgICAgaW5kZXg6IGkKICAgICAgfSA9IGJpOwogICAgICBsZXQgewogICAgICAgIGluZGV4OiBqCiAgICAgIH0gPSBiajsKCiAgICAgIGlmIChqID4gaSkgewogICAgICAgIGNvbnN0IHRlbXAgPSBqOwogICAgICAgIGogPSBpOwogICAgICAgIGkgPSB0ZW1wOwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5tYXRyaXhbKGkgKiAoaSArIDEpID4+IDEpICsgaiAtIDFdOwogICAgfQogICAgLyoqCiAgICAgKiBTZXQgYW4gZWxlbWVudAogICAgICovCgoKICAgIHNldChiaSwgYmosIHZhbHVlKSB7CiAgICAgIGxldCB7CiAgICAgICAgaW5kZXg6IGkKICAgICAgfSA9IGJpOwogICAgICBsZXQgewogICAgICAgIGluZGV4OiBqCiAgICAgIH0gPSBiajsKCiAgICAgIGlmIChqID4gaSkgewogICAgICAgIGNvbnN0IHRlbXAgPSBqOwogICAgICAgIGogPSBpOwogICAgICAgIGkgPSB0ZW1wOwogICAgICB9CgogICAgICB0aGlzLm1hdHJpeFsoaSAqIChpICsgMSkgPj4gMSkgKyBqIC0gMV0gPSB2YWx1ZSA/IDEgOiAwOwogICAgfQogICAgLyoqCiAgICAgKiBTZXRzIGFsbCBlbGVtZW50cyB0byB6ZXJvCiAgICAgKi8KCgogICAgcmVzZXQoKSB7CiAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gdGhpcy5tYXRyaXgubGVuZ3RoOyBpICE9PSBsOyBpKyspIHsKICAgICAgICB0aGlzLm1hdHJpeFtpXSA9IDA7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogU2V0cyB0aGUgbWF4IG51bWJlciBvZiBvYmplY3RzCiAgICAgKi8KCgogICAgc2V0TnVtT2JqZWN0cyhuKSB7CiAgICAgIHRoaXMubWF0cml4Lmxlbmd0aCA9IG4gKiAobiAtIDEpID4+IDE7CiAgICB9CgogIH0KICAvKioKICAgKiBCYXNlIGNsYXNzIGZvciBvYmplY3RzIHRoYXQgZGlzcGF0Y2hlcyBldmVudHMuCiAgICovCgoKICBjbGFzcyBFdmVudFRhcmdldCB7CiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgdGhpcy5fbGlzdGVuZXJzID0gdm9pZCAwOwogICAgfQogICAgLyoqCiAgICAgKiBBZGQgYW4gZXZlbnQgbGlzdGVuZXIKICAgICAqIEByZXR1cm4gVGhlIHNlbGYgb2JqZWN0LCBmb3IgY2hhaW5hYmlsaXR5LgogICAgICovCgoKICAgIGFkZEV2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHsKICAgICAgaWYgKHRoaXMuX2xpc3RlbmVycyA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgdGhpcy5fbGlzdGVuZXJzID0ge307CiAgICAgIH0KCiAgICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuX2xpc3RlbmVyczsKCiAgICAgIGlmIChsaXN0ZW5lcnNbdHlwZV0gPT09IHVuZGVmaW5lZCkgewogICAgICAgIGxpc3RlbmVyc1t0eXBlXSA9IFtdOwogICAgICB9CgogICAgICBpZiAoIWxpc3RlbmVyc1t0eXBlXS5pbmNsdWRlcyhsaXN0ZW5lcikpIHsKICAgICAgICBsaXN0ZW5lcnNbdHlwZV0ucHVzaChsaXN0ZW5lcik7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzOwogICAgfQogICAgLyoqCiAgICAgKiBDaGVjayBpZiBhbiBldmVudCBsaXN0ZW5lciBpcyBhZGRlZAogICAgICovCgoKICAgIGhhc0V2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHsKICAgICAgaWYgKHRoaXMuX2xpc3RlbmVycyA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnM7CgogICAgICBpZiAobGlzdGVuZXJzW3R5cGVdICE9PSB1bmRlZmluZWQgJiYgbGlzdGVuZXJzW3R5cGVdLmluY2x1ZGVzKGxpc3RlbmVyKSkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CgogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIENoZWNrIGlmIGFueSBldmVudCBsaXN0ZW5lciBvZiB0aGUgZ2l2ZW4gdHlwZSBpcyBhZGRlZAogICAgICovCgoKICAgIGhhc0FueUV2ZW50TGlzdGVuZXIodHlwZSkgewogICAgICBpZiAodGhpcy5fbGlzdGVuZXJzID09PSB1bmRlZmluZWQpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuX2xpc3RlbmVyczsKICAgICAgcmV0dXJuIGxpc3RlbmVyc1t0eXBlXSAhPT0gdW5kZWZpbmVkOwogICAgfQogICAgLyoqCiAgICAgKiBSZW1vdmUgYW4gZXZlbnQgbGlzdGVuZXIKICAgICAqIEByZXR1cm4gVGhlIHNlbGYgb2JqZWN0LCBmb3IgY2hhaW5hYmlsaXR5LgogICAgICovCgoKICAgIHJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHsKICAgICAgaWYgKHRoaXMuX2xpc3RlbmVycyA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH0KCiAgICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuX2xpc3RlbmVyczsKCiAgICAgIGlmIChsaXN0ZW5lcnNbdHlwZV0gPT09IHVuZGVmaW5lZCkgewogICAgICAgIHJldHVybiB0aGlzOwogICAgICB9CgogICAgICBjb25zdCBpbmRleCA9IGxpc3RlbmVyc1t0eXBlXS5pbmRleE9mKGxpc3RlbmVyKTsKCiAgICAgIGlmIChpbmRleCAhPT0gLTEpIHsKICAgICAgICBsaXN0ZW5lcnNbdHlwZV0uc3BsaWNlKGluZGV4LCAxKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIEVtaXQgYW4gZXZlbnQuCiAgICAgKiBAcmV0dXJuIFRoZSBzZWxmIG9iamVjdCwgZm9yIGNoYWluYWJpbGl0eS4KICAgICAqLwoKCiAgICBkaXNwYXRjaEV2ZW50KGV2ZW50KSB7CiAgICAgIGlmICh0aGlzLl9saXN0ZW5lcnMgPT09IHVuZGVmaW5lZCkgewogICAgICAgIHJldHVybiB0aGlzOwogICAgICB9CgogICAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnM7CiAgICAgIGNvbnN0IGxpc3RlbmVyQXJyYXkgPSBsaXN0ZW5lcnNbZXZlbnQudHlwZV07CgogICAgICBpZiAobGlzdGVuZXJBcnJheSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgZXZlbnQudGFyZ2V0ID0gdGhpczsKCiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGwgPSBsaXN0ZW5lckFycmF5Lmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICAgICAgbGlzdGVuZXJBcnJheVtpXS5jYWxsKHRoaXMsIGV2ZW50KTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzOwogICAgfQoKICB9CiAgLyoqCiAgICogQSBRdWF0ZXJuaW9uIGRlc2NyaWJlcyBhIHJvdGF0aW9uIGluIDNEIHNwYWNlLiBUaGUgUXVhdGVybmlvbiBpcyBtYXRoZW1hdGljYWxseSBkZWZpbmVkIGFzIFEgPSB4KmkgKyB5KmogKyB6KmsgKyB3LCB3aGVyZSAoaSxqLGspIGFyZSBpbWFnaW5hcnkgYmFzaXMgdmVjdG9ycy4gKHgseSx6KSBjYW4gYmUgc2VlbiBhcyBhIHZlY3RvciByZWxhdGVkIHRvIHRoZSBheGlzIG9mIHJvdGF0aW9uLCB3aGlsZSB0aGUgcmVhbCBtdWx0aXBsaWVyLCB3LCBpcyByZWxhdGVkIHRvIHRoZSBhbW91bnQgb2Ygcm90YXRpb24uCiAgICogQHBhcmFtIHggTXVsdGlwbGllciBvZiB0aGUgaW1hZ2luYXJ5IGJhc2lzIHZlY3RvciBpLgogICAqIEBwYXJhbSB5IE11bHRpcGxpZXIgb2YgdGhlIGltYWdpbmFyeSBiYXNpcyB2ZWN0b3Igai4KICAgKiBAcGFyYW0geiBNdWx0aXBsaWVyIG9mIHRoZSBpbWFnaW5hcnkgYmFzaXMgdmVjdG9yIGsuCiAgICogQHBhcmFtIHcgTXVsdGlwbGllciBvZiB0aGUgcmVhbCBwYXJ0LgogICAqIEBzZWUgaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9RdWF0ZXJuaW9uCiAgICovCgoKICBjbGFzcyBRdWF0ZXJuaW9uIHsKICAgIGNvbnN0cnVjdG9yKHggPSAwLCB5ID0gMCwgeiA9IDAsIHcgPSAxKSB7CiAgICAgIHRoaXMueCA9IHZvaWQgMDsKICAgICAgdGhpcy55ID0gdm9pZCAwOwogICAgICB0aGlzLnogPSB2b2lkIDA7CiAgICAgIHRoaXMudyA9IHZvaWQgMDsKICAgICAgdGhpcy54ID0geDsKICAgICAgdGhpcy55ID0geTsKICAgICAgdGhpcy56ID0gejsKICAgICAgdGhpcy53ID0gdzsKICAgIH0KICAgIC8qKgogICAgICogU2V0IHRoZSB2YWx1ZSBvZiB0aGUgcXVhdGVybmlvbi4KICAgICAqLwoKCiAgICBzZXQoeCwgeSwgeiwgdykgewogICAgICB0aGlzLnggPSB4OwogICAgICB0aGlzLnkgPSB5OwogICAgICB0aGlzLnogPSB6OwogICAgICB0aGlzLncgPSB3OwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogQ29udmVydCB0byBhIHJlYWRhYmxlIGZvcm1hdAogICAgICogQHJldHVybiAieCx5LHosdyIKICAgICAqLwoKCiAgICB0b1N0cmluZygpIHsKICAgICAgcmV0dXJuIHRoaXMueCArICIsIiArIHRoaXMueSArICIsIiArIHRoaXMueiArICIsIiArIHRoaXMudzsKICAgIH0KICAgIC8qKgogICAgICogQ29udmVydCB0byBhbiBBcnJheQogICAgICogQHJldHVybiBbeCwgeSwgeiwgd10KICAgICAqLwoKCiAgICB0b0FycmF5KCkgewogICAgICByZXR1cm4gW3RoaXMueCwgdGhpcy55LCB0aGlzLnosIHRoaXMud107CiAgICB9CiAgICAvKioKICAgICAqIFNldCB0aGUgcXVhdGVybmlvbiBjb21wb25lbnRzIGdpdmVuIGFuIGF4aXMgYW5kIGFuIGFuZ2xlIGluIHJhZGlhbnMuCiAgICAgKi8KCgogICAgc2V0RnJvbUF4aXNBbmdsZSh2ZWN0b3IsIGFuZ2xlKSB7CiAgICAgIGNvbnN0IHMgPSBNYXRoLnNpbihhbmdsZSAqIDAuNSk7CiAgICAgIHRoaXMueCA9IHZlY3Rvci54ICogczsKICAgICAgdGhpcy55ID0gdmVjdG9yLnkgKiBzOwogICAgICB0aGlzLnogPSB2ZWN0b3IueiAqIHM7CiAgICAgIHRoaXMudyA9IE1hdGguY29zKGFuZ2xlICogMC41KTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIENvbnZlcnRzIHRoZSBxdWF0ZXJuaW9uIHRvIFsgYXhpcywgYW5nbGUgXSByZXByZXNlbnRhdGlvbi4KICAgICAqIEBwYXJhbSB0YXJnZXRBeGlzIEEgdmVjdG9yIG9iamVjdCB0byByZXVzZSBmb3Igc3RvcmluZyB0aGUgYXhpcy4KICAgICAqIEByZXR1cm4gQW4gYXJyYXksIGZpcnN0IGVsZW1lbnQgaXMgdGhlIGF4aXMgYW5kIHRoZSBzZWNvbmQgaXMgdGhlIGFuZ2xlIGluIHJhZGlhbnMuCiAgICAgKi8KCgogICAgdG9BeGlzQW5nbGUodGFyZ2V0QXhpcyA9IG5ldyBWZWMzKCkpIHsKICAgICAgdGhpcy5ub3JtYWxpemUoKTsgLy8gaWYgdz4xIGFjb3MgYW5kIHNxcnQgd2lsbCBwcm9kdWNlIGVycm9ycywgdGhpcyBjYW50IGhhcHBlbiBpZiBxdWF0ZXJuaW9uIGlzIG5vcm1hbGlzZWQKCiAgICAgIGNvbnN0IGFuZ2xlID0gMiAqIE1hdGguYWNvcyh0aGlzLncpOwogICAgICBjb25zdCBzID0gTWF0aC5zcXJ0KDEgLSB0aGlzLncgKiB0aGlzLncpOyAvLyBhc3N1bWluZyBxdWF0ZXJuaW9uIG5vcm1hbGlzZWQgdGhlbiB3IGlzIGxlc3MgdGhhbiAxLCBzbyB0ZXJtIGFsd2F5cyBwb3NpdGl2ZS4KCiAgICAgIGlmIChzIDwgMC4wMDEpIHsKICAgICAgICAvLyB0ZXN0IHRvIGF2b2lkIGRpdmlkZSBieSB6ZXJvLCBzIGlzIGFsd2F5cyBwb3NpdGl2ZSBkdWUgdG8gc3FydAogICAgICAgIC8vIGlmIHMgY2xvc2UgdG8gemVybyB0aGVuIGRpcmVjdGlvbiBvZiBheGlzIG5vdCBpbXBvcnRhbnQKICAgICAgICB0YXJnZXRBeGlzLnggPSB0aGlzLng7IC8vIGlmIGl0IGlzIGltcG9ydGFudCB0aGF0IGF4aXMgaXMgbm9ybWFsaXNlZCB0aGVuIHJlcGxhY2Ugd2l0aCB4PTE7IHk9ej0wOwoKICAgICAgICB0YXJnZXRBeGlzLnkgPSB0aGlzLnk7CiAgICAgICAgdGFyZ2V0QXhpcy56ID0gdGhpcy56OwogICAgICB9IGVsc2UgewogICAgICAgIHRhcmdldEF4aXMueCA9IHRoaXMueCAvIHM7IC8vIG5vcm1hbGlzZSBheGlzCgogICAgICAgIHRhcmdldEF4aXMueSA9IHRoaXMueSAvIHM7CiAgICAgICAgdGFyZ2V0QXhpcy56ID0gdGhpcy56IC8gczsKICAgICAgfQoKICAgICAgcmV0dXJuIFt0YXJnZXRBeGlzLCBhbmdsZV07CiAgICB9CiAgICAvKioKICAgICAqIFNldCB0aGUgcXVhdGVybmlvbiB2YWx1ZSBnaXZlbiB0d28gdmVjdG9ycy4gVGhlIHJlc3VsdGluZyByb3RhdGlvbiB3aWxsIGJlIHRoZSBuZWVkZWQgcm90YXRpb24gdG8gcm90YXRlIHUgdG8gdi4KICAgICAqLwoKCiAgICBzZXRGcm9tVmVjdG9ycyh1LCB2KSB7CiAgICAgIGlmICh1LmlzQW50aXBhcmFsbGVsVG8odikpIHsKICAgICAgICBjb25zdCB0MSA9IHNmdl90MTsKICAgICAgICBjb25zdCB0MiA9IHNmdl90MjsKICAgICAgICB1LnRhbmdlbnRzKHQxLCB0Mik7CiAgICAgICAgdGhpcy5zZXRGcm9tQXhpc0FuZ2xlKHQxLCBNYXRoLlBJKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zdCBhID0gdS5jcm9zcyh2KTsKICAgICAgICB0aGlzLnggPSBhLng7CiAgICAgICAgdGhpcy55ID0gYS55OwogICAgICAgIHRoaXMueiA9IGEuejsKICAgICAgICB0aGlzLncgPSBNYXRoLnNxcnQodS5sZW5ndGgoKSAqKiAyICogdi5sZW5ndGgoKSAqKiAyKSArIHUuZG90KHYpOwogICAgICAgIHRoaXMubm9ybWFsaXplKCk7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzOwogICAgfQogICAgLyoqCiAgICAgKiBNdWx0aXBseSB0aGUgcXVhdGVybmlvbiB3aXRoIGFuIG90aGVyIHF1YXRlcm5pb24uCiAgICAgKi8KCgogICAgbXVsdChxdWF0LCB0YXJnZXQgPSBuZXcgUXVhdGVybmlvbigpKSB7CiAgICAgIGNvbnN0IGF4ID0gdGhpcy54OwogICAgICBjb25zdCBheSA9IHRoaXMueTsKICAgICAgY29uc3QgYXogPSB0aGlzLno7CiAgICAgIGNvbnN0IGF3ID0gdGhpcy53OwogICAgICBjb25zdCBieCA9IHF1YXQueDsKICAgICAgY29uc3QgYnkgPSBxdWF0Lnk7CiAgICAgIGNvbnN0IGJ6ID0gcXVhdC56OwogICAgICBjb25zdCBidyA9IHF1YXQudzsKICAgICAgdGFyZ2V0LnggPSBheCAqIGJ3ICsgYXcgKiBieCArIGF5ICogYnogLSBheiAqIGJ5OwogICAgICB0YXJnZXQueSA9IGF5ICogYncgKyBhdyAqIGJ5ICsgYXogKiBieCAtIGF4ICogYno7CiAgICAgIHRhcmdldC56ID0gYXogKiBidyArIGF3ICogYnogKyBheCAqIGJ5IC0gYXkgKiBieDsKICAgICAgdGFyZ2V0LncgPSBhdyAqIGJ3IC0gYXggKiBieCAtIGF5ICogYnkgLSBheiAqIGJ6OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIGludmVyc2UgcXVhdGVybmlvbiByb3RhdGlvbi4KICAgICAqLwoKCiAgICBpbnZlcnNlKHRhcmdldCA9IG5ldyBRdWF0ZXJuaW9uKCkpIHsKICAgICAgY29uc3QgeCA9IHRoaXMueDsKICAgICAgY29uc3QgeSA9IHRoaXMueTsKICAgICAgY29uc3QgeiA9IHRoaXMuejsKICAgICAgY29uc3QgdyA9IHRoaXMudzsKICAgICAgdGhpcy5jb25qdWdhdGUodGFyZ2V0KTsKICAgICAgY29uc3QgaW5vcm0yID0gMSAvICh4ICogeCArIHkgKiB5ICsgeiAqIHogKyB3ICogdyk7CiAgICAgIHRhcmdldC54ICo9IGlub3JtMjsKICAgICAgdGFyZ2V0LnkgKj0gaW5vcm0yOwogICAgICB0YXJnZXQueiAqPSBpbm9ybTI7CiAgICAgIHRhcmdldC53ICo9IGlub3JtMjsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSBxdWF0ZXJuaW9uIGNvbmp1Z2F0ZQogICAgICovCgoKICAgIGNvbmp1Z2F0ZSh0YXJnZXQgPSBuZXcgUXVhdGVybmlvbigpKSB7CiAgICAgIHRhcmdldC54ID0gLXRoaXMueDsKICAgICAgdGFyZ2V0LnkgPSAtdGhpcy55OwogICAgICB0YXJnZXQueiA9IC10aGlzLno7CiAgICAgIHRhcmdldC53ID0gdGhpcy53OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBOb3JtYWxpemUgdGhlIHF1YXRlcm5pb24uIE5vdGUgdGhhdCB0aGlzIGNoYW5nZXMgdGhlIHZhbHVlcyBvZiB0aGUgcXVhdGVybmlvbi4KICAgICAqLwoKCiAgICBub3JtYWxpemUoKSB7CiAgICAgIGxldCBsID0gTWF0aC5zcXJ0KHRoaXMueCAqIHRoaXMueCArIHRoaXMueSAqIHRoaXMueSArIHRoaXMueiAqIHRoaXMueiArIHRoaXMudyAqIHRoaXMudyk7CgogICAgICBpZiAobCA9PT0gMCkgewogICAgICAgIHRoaXMueCA9IDA7CiAgICAgICAgdGhpcy55ID0gMDsKICAgICAgICB0aGlzLnogPSAwOwogICAgICAgIHRoaXMudyA9IDA7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbCA9IDEgLyBsOwogICAgICAgIHRoaXMueCAqPSBsOwogICAgICAgIHRoaXMueSAqPSBsOwogICAgICAgIHRoaXMueiAqPSBsOwogICAgICAgIHRoaXMudyAqPSBsOwogICAgICB9CgogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogQXBwcm94aW1hdGlvbiBvZiBxdWF0ZXJuaW9uIG5vcm1hbGl6YXRpb24uIFdvcmtzIGJlc3Qgd2hlbiBxdWF0IGlzIGFscmVhZHkgYWxtb3N0LW5vcm1hbGl6ZWQuCiAgICAgKiBAYXV0aG9yIHVucGhhc2VkLCBodHRwczovL2dpdGh1Yi5jb20vdW5waGFzZWQKICAgICAqLwoKCiAgICBub3JtYWxpemVGYXN0KCkgewogICAgICBjb25zdCBmID0gKDMuMCAtICh0aGlzLnggKiB0aGlzLnggKyB0aGlzLnkgKiB0aGlzLnkgKyB0aGlzLnogKiB0aGlzLnogKyB0aGlzLncgKiB0aGlzLncpKSAvIDIuMDsKCiAgICAgIGlmIChmID09PSAwKSB7CiAgICAgICAgdGhpcy54ID0gMDsKICAgICAgICB0aGlzLnkgPSAwOwogICAgICAgIHRoaXMueiA9IDA7CiAgICAgICAgdGhpcy53ID0gMDsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnggKj0gZjsKICAgICAgICB0aGlzLnkgKj0gZjsKICAgICAgICB0aGlzLnogKj0gZjsKICAgICAgICB0aGlzLncgKj0gZjsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIE11bHRpcGx5IHRoZSBxdWF0ZXJuaW9uIGJ5IGEgdmVjdG9yCiAgICAgKi8KCgogICAgdm11bHQodiwgdGFyZ2V0ID0gbmV3IFZlYzMoKSkgewogICAgICBjb25zdCB4ID0gdi54OwogICAgICBjb25zdCB5ID0gdi55OwogICAgICBjb25zdCB6ID0gdi56OwogICAgICBjb25zdCBxeCA9IHRoaXMueDsKICAgICAgY29uc3QgcXkgPSB0aGlzLnk7CiAgICAgIGNvbnN0IHF6ID0gdGhpcy56OwogICAgICBjb25zdCBxdyA9IHRoaXMudzsgLy8gcSp2CgogICAgICBjb25zdCBpeCA9IHF3ICogeCArIHF5ICogeiAtIHF6ICogeTsKICAgICAgY29uc3QgaXkgPSBxdyAqIHkgKyBxeiAqIHggLSBxeCAqIHo7CiAgICAgIGNvbnN0IGl6ID0gcXcgKiB6ICsgcXggKiB5IC0gcXkgKiB4OwogICAgICBjb25zdCBpdyA9IC1xeCAqIHggLSBxeSAqIHkgLSBxeiAqIHo7CiAgICAgIHRhcmdldC54ID0gaXggKiBxdyArIGl3ICogLXF4ICsgaXkgKiAtcXogLSBpeiAqIC1xeTsKICAgICAgdGFyZ2V0LnkgPSBpeSAqIHF3ICsgaXcgKiAtcXkgKyBpeiAqIC1xeCAtIGl4ICogLXF6OwogICAgICB0YXJnZXQueiA9IGl6ICogcXcgKyBpdyAqIC1xeiArIGl4ICogLXF5IC0gaXkgKiAtcXg7CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKioKICAgICAqIENvcGllcyB2YWx1ZSBvZiBzb3VyY2UgdG8gdGhpcyBxdWF0ZXJuaW9uLgogICAgICogQHJldHVybiB0aGlzCiAgICAgKi8KCgogICAgY29weShxdWF0KSB7CiAgICAgIHRoaXMueCA9IHF1YXQueDsKICAgICAgdGhpcy55ID0gcXVhdC55OwogICAgICB0aGlzLnogPSBxdWF0Lno7CiAgICAgIHRoaXMudyA9IHF1YXQudzsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIENvbnZlcnQgdGhlIHF1YXRlcm5pb24gdG8gZXVsZXIgYW5nbGUgcmVwcmVzZW50YXRpb24uIE9yZGVyOiBZWlgsIGFzIHRoaXMgcGFnZSBkZXNjcmliZXM6IGh0dHBzOi8vd3d3LmV1Y2xpZGVhbnNwYWNlLmNvbS9tYXRocy9zdGFuZGFyZHMvaW5kZXguaHRtCiAgICAgKiBAcGFyYW0gb3JkZXIgVGhyZWUtY2hhcmFjdGVyIHN0cmluZywgZGVmYXVsdHMgdG8gIllaWCIKICAgICAqLwoKCiAgICB0b0V1bGVyKHRhcmdldCwgb3JkZXIgPSAnWVpYJykgewogICAgICBsZXQgaGVhZGluZzsKICAgICAgbGV0IGF0dGl0dWRlOwogICAgICBsZXQgYmFuazsKICAgICAgY29uc3QgeCA9IHRoaXMueDsKICAgICAgY29uc3QgeSA9IHRoaXMueTsKICAgICAgY29uc3QgeiA9IHRoaXMuejsKICAgICAgY29uc3QgdyA9IHRoaXMudzsKCiAgICAgIHN3aXRjaCAob3JkZXIpIHsKICAgICAgICBjYXNlICdZWlgnOgogICAgICAgICAgY29uc3QgdGVzdCA9IHggKiB5ICsgeiAqIHc7CgogICAgICAgICAgaWYgKHRlc3QgPiAwLjQ5OSkgewogICAgICAgICAgICAvLyBzaW5ndWxhcml0eSBhdCBub3J0aCBwb2xlCiAgICAgICAgICAgIGhlYWRpbmcgPSAyICogTWF0aC5hdGFuMih4LCB3KTsKICAgICAgICAgICAgYXR0aXR1ZGUgPSBNYXRoLlBJIC8gMjsKICAgICAgICAgICAgYmFuayA9IDA7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHRlc3QgPCAtMC40OTkpIHsKICAgICAgICAgICAgLy8gc2luZ3VsYXJpdHkgYXQgc291dGggcG9sZQogICAgICAgICAgICBoZWFkaW5nID0gLTIgKiBNYXRoLmF0YW4yKHgsIHcpOwogICAgICAgICAgICBhdHRpdHVkZSA9IC1NYXRoLlBJIC8gMjsKICAgICAgICAgICAgYmFuayA9IDA7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGhlYWRpbmcgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICBjb25zdCBzcXggPSB4ICogeDsKICAgICAgICAgICAgY29uc3Qgc3F5ID0geSAqIHk7CiAgICAgICAgICAgIGNvbnN0IHNxeiA9IHogKiB6OwogICAgICAgICAgICBoZWFkaW5nID0gTWF0aC5hdGFuMigyICogeSAqIHcgLSAyICogeCAqIHosIDEgLSAyICogc3F5IC0gMiAqIHNxeik7IC8vIEhlYWRpbmcKCiAgICAgICAgICAgIGF0dGl0dWRlID0gTWF0aC5hc2luKDIgKiB0ZXN0KTsgLy8gYXR0aXR1ZGUKCiAgICAgICAgICAgIGJhbmsgPSBNYXRoLmF0YW4yKDIgKiB4ICogdyAtIDIgKiB5ICogeiwgMSAtIDIgKiBzcXggLSAyICogc3F6KTsgLy8gYmFuawogICAgICAgICAgfQoKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJFdWxlciBvcmRlciAiICsgb3JkZXIgKyAiIG5vdCBzdXBwb3J0ZWQgeWV0LiIpOwogICAgICB9CgogICAgICB0YXJnZXQueSA9IGhlYWRpbmc7CiAgICAgIHRhcmdldC56ID0gYXR0aXR1ZGU7CiAgICAgIHRhcmdldC54ID0gYmFuazsKICAgIH0KICAgIC8qKgogICAgICogQHBhcmFtIG9yZGVyIFRoZSBvcmRlciB0byBhcHBseSBhbmdsZXM6ICdYWVonIG9yICdZWFonIG9yIGFueSBvdGhlciBjb21iaW5hdGlvbi4KICAgICAqCiAgICAgKiBTZWUge0BsaW5rIGh0dHBzOi8vd3d3Lm1hdGh3b3Jrcy5jb20vbWF0bGFiY2VudHJhbC9maWxlZXhjaGFuZ2UvMjA2OTYtZnVuY3Rpb24tdG8tY29udmVydC1iZXR3ZWVuLWRjbS1ldWxlci1hbmdsZXMtcXVhdGVybmlvbnMtYW5kLWV1bGVyLXZlY3RvcnMgTWF0aFdvcmtzfSByZWZlcmVuY2UKICAgICAqLwoKCiAgICBzZXRGcm9tRXVsZXIoeCwgeSwgeiwgb3JkZXIgPSAnWFlaJykgewogICAgICBjb25zdCBjMSA9IE1hdGguY29zKHggLyAyKTsKICAgICAgY29uc3QgYzIgPSBNYXRoLmNvcyh5IC8gMik7CiAgICAgIGNvbnN0IGMzID0gTWF0aC5jb3MoeiAvIDIpOwogICAgICBjb25zdCBzMSA9IE1hdGguc2luKHggLyAyKTsKICAgICAgY29uc3QgczIgPSBNYXRoLnNpbih5IC8gMik7CiAgICAgIGNvbnN0IHMzID0gTWF0aC5zaW4oeiAvIDIpOwoKICAgICAgaWYgKG9yZGVyID09PSAnWFlaJykgewogICAgICAgIHRoaXMueCA9IHMxICogYzIgKiBjMyArIGMxICogczIgKiBzMzsKICAgICAgICB0aGlzLnkgPSBjMSAqIHMyICogYzMgLSBzMSAqIGMyICogczM7CiAgICAgICAgdGhpcy56ID0gYzEgKiBjMiAqIHMzICsgczEgKiBzMiAqIGMzOwogICAgICAgIHRoaXMudyA9IGMxICogYzIgKiBjMyAtIHMxICogczIgKiBzMzsKICAgICAgfSBlbHNlIGlmIChvcmRlciA9PT0gJ1lYWicpIHsKICAgICAgICB0aGlzLnggPSBzMSAqIGMyICogYzMgKyBjMSAqIHMyICogczM7CiAgICAgICAgdGhpcy55ID0gYzEgKiBzMiAqIGMzIC0gczEgKiBjMiAqIHMzOwogICAgICAgIHRoaXMueiA9IGMxICogYzIgKiBzMyAtIHMxICogczIgKiBjMzsKICAgICAgICB0aGlzLncgPSBjMSAqIGMyICogYzMgKyBzMSAqIHMyICogczM7CiAgICAgIH0gZWxzZSBpZiAob3JkZXIgPT09ICdaWFknKSB7CiAgICAgICAgdGhpcy54ID0gczEgKiBjMiAqIGMzIC0gYzEgKiBzMiAqIHMzOwogICAgICAgIHRoaXMueSA9IGMxICogczIgKiBjMyArIHMxICogYzIgKiBzMzsKICAgICAgICB0aGlzLnogPSBjMSAqIGMyICogczMgKyBzMSAqIHMyICogYzM7CiAgICAgICAgdGhpcy53ID0gYzEgKiBjMiAqIGMzIC0gczEgKiBzMiAqIHMzOwogICAgICB9IGVsc2UgaWYgKG9yZGVyID09PSAnWllYJykgewogICAgICAgIHRoaXMueCA9IHMxICogYzIgKiBjMyAtIGMxICogczIgKiBzMzsKICAgICAgICB0aGlzLnkgPSBjMSAqIHMyICogYzMgKyBzMSAqIGMyICogczM7CiAgICAgICAgdGhpcy56ID0gYzEgKiBjMiAqIHMzIC0gczEgKiBzMiAqIGMzOwogICAgICAgIHRoaXMudyA9IGMxICogYzIgKiBjMyArIHMxICogczIgKiBzMzsKICAgICAgfSBlbHNlIGlmIChvcmRlciA9PT0gJ1laWCcpIHsKICAgICAgICB0aGlzLnggPSBzMSAqIGMyICogYzMgKyBjMSAqIHMyICogczM7CiAgICAgICAgdGhpcy55ID0gYzEgKiBzMiAqIGMzICsgczEgKiBjMiAqIHMzOwogICAgICAgIHRoaXMueiA9IGMxICogYzIgKiBzMyAtIHMxICogczIgKiBjMzsKICAgICAgICB0aGlzLncgPSBjMSAqIGMyICogYzMgLSBzMSAqIHMyICogczM7CiAgICAgIH0gZWxzZSBpZiAob3JkZXIgPT09ICdYWlknKSB7CiAgICAgICAgdGhpcy54ID0gczEgKiBjMiAqIGMzIC0gYzEgKiBzMiAqIHMzOwogICAgICAgIHRoaXMueSA9IGMxICogczIgKiBjMyAtIHMxICogYzIgKiBzMzsKICAgICAgICB0aGlzLnogPSBjMSAqIGMyICogczMgKyBzMSAqIHMyICogYzM7CiAgICAgICAgdGhpcy53ID0gYzEgKiBjMiAqIGMzICsgczEgKiBzMiAqIHMzOwogICAgICB9CgogICAgICByZXR1cm4gdGhpczsKICAgIH0KCiAgICBjbG9uZSgpIHsKICAgICAgcmV0dXJuIG5ldyBRdWF0ZXJuaW9uKHRoaXMueCwgdGhpcy55LCB0aGlzLnosIHRoaXMudyk7CiAgICB9CiAgICAvKioKICAgICAqIFBlcmZvcm1zIGEgc3BoZXJpY2FsIGxpbmVhciBpbnRlcnBvbGF0aW9uIGJldHdlZW4gdHdvIHF1YXQKICAgICAqCiAgICAgKiBAcGFyYW0gdG9RdWF0IHNlY29uZCBvcGVyYW5kCiAgICAgKiBAcGFyYW0gdCBpbnRlcnBvbGF0aW9uIGFtb3VudCBiZXR3ZWVuIHRoZSBzZWxmIHF1YXRlcm5pb24gYW5kIHRvUXVhdAogICAgICogQHBhcmFtIHRhcmdldCBBIHF1YXRlcm5pb24gdG8gc3RvcmUgdGhlIHJlc3VsdCBpbi4gSWYgbm90IHByb3ZpZGVkLCBhIG5ldyBvbmUgd2lsbCBiZSBjcmVhdGVkLgogICAgICogQHJldHVybnMge1F1YXRlcm5pb259IFRoZSAidGFyZ2V0IiBvYmplY3QKICAgICAqLwoKCiAgICBzbGVycCh0b1F1YXQsIHQsIHRhcmdldCA9IG5ldyBRdWF0ZXJuaW9uKCkpIHsKICAgICAgY29uc3QgYXggPSB0aGlzLng7CiAgICAgIGNvbnN0IGF5ID0gdGhpcy55OwogICAgICBjb25zdCBheiA9IHRoaXMuejsKICAgICAgY29uc3QgYXcgPSB0aGlzLnc7CiAgICAgIGxldCBieCA9IHRvUXVhdC54OwogICAgICBsZXQgYnkgPSB0b1F1YXQueTsKICAgICAgbGV0IGJ6ID0gdG9RdWF0Lno7CiAgICAgIGxldCBidyA9IHRvUXVhdC53OwogICAgICBsZXQgb21lZ2E7CiAgICAgIGxldCBjb3NvbTsKICAgICAgbGV0IHNpbm9tOwogICAgICBsZXQgc2NhbGUwOwogICAgICBsZXQgc2NhbGUxOyAvLyBjYWxjIGNvc2luZQoKICAgICAgY29zb20gPSBheCAqIGJ4ICsgYXkgKiBieSArIGF6ICogYnogKyBhdyAqIGJ3OyAvLyBhZGp1c3Qgc2lnbnMgKGlmIG5lY2Vzc2FyeSkKCiAgICAgIGlmIChjb3NvbSA8IDAuMCkgewogICAgICAgIGNvc29tID0gLWNvc29tOwogICAgICAgIGJ4ID0gLWJ4OwogICAgICAgIGJ5ID0gLWJ5OwogICAgICAgIGJ6ID0gLWJ6OwogICAgICAgIGJ3ID0gLWJ3OwogICAgICB9IC8vIGNhbGN1bGF0ZSBjb2VmZmljaWVudHMKCgogICAgICBpZiAoMS4wIC0gY29zb20gPiAwLjAwMDAwMSkgewogICAgICAgIC8vIHN0YW5kYXJkIGNhc2UgKHNsZXJwKQogICAgICAgIG9tZWdhID0gTWF0aC5hY29zKGNvc29tKTsKICAgICAgICBzaW5vbSA9IE1hdGguc2luKG9tZWdhKTsKICAgICAgICBzY2FsZTAgPSBNYXRoLnNpbigoMS4wIC0gdCkgKiBvbWVnYSkgLyBzaW5vbTsKICAgICAgICBzY2FsZTEgPSBNYXRoLnNpbih0ICogb21lZ2EpIC8gc2lub207CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gImZyb20iIGFuZCAidG8iIHF1YXRlcm5pb25zIGFyZSB2ZXJ5IGNsb3NlCiAgICAgICAgLy8gIC4uLiBzbyB3ZSBjYW4gZG8gYSBsaW5lYXIgaW50ZXJwb2xhdGlvbgogICAgICAgIHNjYWxlMCA9IDEuMCAtIHQ7CiAgICAgICAgc2NhbGUxID0gdDsKICAgICAgfSAvLyBjYWxjdWxhdGUgZmluYWwgdmFsdWVzCgoKICAgICAgdGFyZ2V0LnggPSBzY2FsZTAgKiBheCArIHNjYWxlMSAqIGJ4OwogICAgICB0YXJnZXQueSA9IHNjYWxlMCAqIGF5ICsgc2NhbGUxICogYnk7CiAgICAgIHRhcmdldC56ID0gc2NhbGUwICogYXogKyBzY2FsZTEgKiBiejsKICAgICAgdGFyZ2V0LncgPSBzY2FsZTAgKiBhdyArIHNjYWxlMSAqIGJ3OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBSb3RhdGUgYW4gYWJzb2x1dGUgb3JpZW50YXRpb24gcXVhdGVybmlvbiBnaXZlbiBhbiBhbmd1bGFyIHZlbG9jaXR5IGFuZCBhIHRpbWUgc3RlcC4KICAgICAqLwoKCiAgICBpbnRlZ3JhdGUoYW5ndWxhclZlbG9jaXR5LCBkdCwgYW5ndWxhckZhY3RvciwgdGFyZ2V0ID0gbmV3IFF1YXRlcm5pb24oKSkgewogICAgICBjb25zdCBheCA9IGFuZ3VsYXJWZWxvY2l0eS54ICogYW5ndWxhckZhY3Rvci54LAogICAgICAgICAgICBheSA9IGFuZ3VsYXJWZWxvY2l0eS55ICogYW5ndWxhckZhY3Rvci55LAogICAgICAgICAgICBheiA9IGFuZ3VsYXJWZWxvY2l0eS56ICogYW5ndWxhckZhY3Rvci56LAogICAgICAgICAgICBieCA9IHRoaXMueCwKICAgICAgICAgICAgYnkgPSB0aGlzLnksCiAgICAgICAgICAgIGJ6ID0gdGhpcy56LAogICAgICAgICAgICBidyA9IHRoaXMudzsKICAgICAgY29uc3QgaGFsZl9kdCA9IGR0ICogMC41OwogICAgICB0YXJnZXQueCArPSBoYWxmX2R0ICogKGF4ICogYncgKyBheSAqIGJ6IC0gYXogKiBieSk7CiAgICAgIHRhcmdldC55ICs9IGhhbGZfZHQgKiAoYXkgKiBidyArIGF6ICogYnggLSBheCAqIGJ6KTsKICAgICAgdGFyZ2V0LnogKz0gaGFsZl9kdCAqIChheiAqIGJ3ICsgYXggKiBieSAtIGF5ICogYngpOwogICAgICB0YXJnZXQudyArPSBoYWxmX2R0ICogKC1heCAqIGJ4IC0gYXkgKiBieSAtIGF6ICogYnopOwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQoKICB9CgogIGNvbnN0IHNmdl90MSA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc2Z2X3QyID0gbmV3IFZlYzMoKTsKICAvKioKICAgKiBUaGUgYXZhaWxhYmxlIHNoYXBlIHR5cGVzLgogICAqLwoKICBjb25zdCBTSEFQRV9UWVBFUyA9IHsKICAgIC8qKiBTUEhFUkUgKi8KICAgIFNQSEVSRTogMSwKCiAgICAvKiogUExBTkUgKi8KICAgIFBMQU5FOiAyLAoKICAgIC8qKiBCT1ggKi8KICAgIEJPWDogNCwKCiAgICAvKiogQ09NUE9VTkQgKi8KICAgIENPTVBPVU5EOiA4LAoKICAgIC8qKiBDT05WRVhQT0xZSEVEUk9OICovCiAgICBDT05WRVhQT0xZSEVEUk9OOiAxNiwKCiAgICAvKiogSEVJR0hURklFTEQgKi8KICAgIEhFSUdIVEZJRUxEOiAzMiwKCiAgICAvKiogUEFSVElDTEUgKi8KICAgIFBBUlRJQ0xFOiA2NCwKCiAgICAvKiogQ1lMSU5ERVIgKi8KICAgIENZTElOREVSOiAxMjgsCgogICAgLyoqIFRSSU1FU0ggKi8KICAgIFRSSU1FU0g6IDI1NgogIH07CiAgLyoqCiAgICogU2hhcGVUeXBlCiAgICovCgogIC8qKgogICAqIEJhc2UgY2xhc3MgZm9yIHNoYXBlcwogICAqLwoKICBjbGFzcyBTaGFwZSB7CiAgICAvKioKICAgICAqIElkZW50aWZpZXIgb2YgdGhlIFNoYXBlLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgdHlwZSBvZiB0aGlzIHNoYXBlLiBNdXN0IGJlIHNldCB0byBhbiBpbnQgPiAwIGJ5IHN1YmNsYXNzZXMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBsb2NhbCBib3VuZGluZyBzcGhlcmUgcmFkaXVzIG9mIHRoaXMgc2hhcGUuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFdoZXRoZXIgdG8gcHJvZHVjZSBjb250YWN0IGZvcmNlcyB3aGVuIGluIGNvbnRhY3Qgd2l0aCBvdGhlciBib2RpZXMuIE5vdGUgdGhhdCBjb250YWN0cyB3aWxsIGJlIGdlbmVyYXRlZCwgYnV0IHRoZXkgd2lsbCBiZSBkaXNhYmxlZC4KICAgICAqIEBkZWZhdWx0IHRydWUKICAgICAqLwoKICAgIC8qKgogICAgICogQGRlZmF1bHQgMQogICAgICovCgogICAgLyoqCiAgICAgKiBAZGVmYXVsdCAtMQogICAgICovCgogICAgLyoqCiAgICAgKiBPcHRpb25hbCBtYXRlcmlhbCBvZiB0aGUgc2hhcGUgdGhhdCByZWd1bGF0ZXMgY29udGFjdCBwcm9wZXJ0aWVzLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgYm9keSB0byB3aGljaCB0aGUgc2hhcGUgaXMgYWRkZWQgdG8uCiAgICAgKi8KCiAgICAvKioKICAgICAqIEFsbCB0aGUgU2hhcGUgdHlwZXMuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkgewogICAgICB0aGlzLmlkID0gdm9pZCAwOwogICAgICB0aGlzLnR5cGUgPSB2b2lkIDA7CiAgICAgIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgPSB2b2lkIDA7CiAgICAgIHRoaXMuY29sbGlzaW9uUmVzcG9uc2UgPSB2b2lkIDA7CiAgICAgIHRoaXMuY29sbGlzaW9uRmlsdGVyR3JvdXAgPSB2b2lkIDA7CiAgICAgIHRoaXMuY29sbGlzaW9uRmlsdGVyTWFzayA9IHZvaWQgMDsKICAgICAgdGhpcy5tYXRlcmlhbCA9IHZvaWQgMDsKICAgICAgdGhpcy5ib2R5ID0gdm9pZCAwOwogICAgICB0aGlzLmlkID0gU2hhcGUuaWRDb3VudGVyKys7CiAgICAgIHRoaXMudHlwZSA9IG9wdGlvbnMudHlwZSB8fCAwOwogICAgICB0aGlzLmJvdW5kaW5nU3BoZXJlUmFkaXVzID0gMDsKICAgICAgdGhpcy5jb2xsaXNpb25SZXNwb25zZSA9IG9wdGlvbnMuY29sbGlzaW9uUmVzcG9uc2UgPyBvcHRpb25zLmNvbGxpc2lvblJlc3BvbnNlIDogdHJ1ZTsKICAgICAgdGhpcy5jb2xsaXNpb25GaWx0ZXJHcm91cCA9IG9wdGlvbnMuY29sbGlzaW9uRmlsdGVyR3JvdXAgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuY29sbGlzaW9uRmlsdGVyR3JvdXAgOiAxOwogICAgICB0aGlzLmNvbGxpc2lvbkZpbHRlck1hc2sgPSBvcHRpb25zLmNvbGxpc2lvbkZpbHRlck1hc2sgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuY29sbGlzaW9uRmlsdGVyTWFzayA6IC0xOwogICAgICB0aGlzLm1hdGVyaWFsID0gb3B0aW9ucy5tYXRlcmlhbCA/IG9wdGlvbnMubWF0ZXJpYWwgOiBudWxsOwogICAgICB0aGlzLmJvZHkgPSBudWxsOwogICAgfQogICAgLyoqCiAgICAgKiBDb21wdXRlcyB0aGUgYm91bmRpbmcgc3BoZXJlIHJhZGl1cy4KICAgICAqIFRoZSByZXN1bHQgaXMgc3RvcmVkIGluIHRoZSBwcm9wZXJ0eSBgLmJvdW5kaW5nU3BoZXJlUmFkaXVzYAogICAgICovCgoKICAgIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCkgewogICAgICB0aHJvdyAiY29tcHV0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCkgbm90IGltcGxlbWVudGVkIGZvciBzaGFwZSB0eXBlICIgKyB0aGlzLnR5cGU7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgdm9sdW1lIG9mIHRoaXMgc2hhcGUKICAgICAqLwoKCiAgICB2b2x1bWUoKSB7CiAgICAgIHRocm93ICJ2b2x1bWUoKSBub3QgaW1wbGVtZW50ZWQgZm9yIHNoYXBlIHR5cGUgIiArIHRoaXMudHlwZTsKICAgIH0KICAgIC8qKgogICAgICogQ2FsY3VsYXRlcyB0aGUgaW5lcnRpYSBpbiB0aGUgbG9jYWwgZnJhbWUgZm9yIHRoaXMgc2hhcGUuCiAgICAgKiBAc2VlIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTGlzdF9vZl9tb21lbnRzX29mX2luZXJ0aWEKICAgICAqLwoKCiAgICBjYWxjdWxhdGVMb2NhbEluZXJ0aWEobWFzcywgdGFyZ2V0KSB7CiAgICAgIHRocm93ICJjYWxjdWxhdGVMb2NhbEluZXJ0aWEoKSBub3QgaW1wbGVtZW50ZWQgZm9yIHNoYXBlIHR5cGUgIiArIHRoaXMudHlwZTsKICAgIH0KICAgIC8qKgogICAgICogQHRvZG8gdXNlIGFic3RyYWN0IGZvciB0aGVzZSBraW5kIG9mIG1ldGhvZHMKICAgICAqLwoKCiAgICBjYWxjdWxhdGVXb3JsZEFBQkIocG9zLCBxdWF0LCBtaW4sIG1heCkgewogICAgICB0aHJvdyAiY2FsY3VsYXRlV29ybGRBQUJCKCkgbm90IGltcGxlbWVudGVkIGZvciBzaGFwZSB0eXBlICIgKyB0aGlzLnR5cGU7CiAgICB9CgogIH0KCiAgU2hhcGUuaWRDb3VudGVyID0gMDsKICBTaGFwZS50eXBlcyA9IFNIQVBFX1RZUEVTOwogIC8qKgogICAqIFRyYW5zZm9ybWF0aW9uIHV0aWxpdGllcy4KICAgKi8KCiAgY2xhc3MgVHJhbnNmb3JtIHsKICAgIC8qKgogICAgICogcG9zaXRpb24KICAgICAqLwoKICAgIC8qKgogICAgICogcXVhdGVybmlvbgogICAgICovCiAgICBjb25zdHJ1Y3RvcihvcHRpb25zID0ge30pIHsKICAgICAgdGhpcy5wb3NpdGlvbiA9IHZvaWQgMDsKICAgICAgdGhpcy5xdWF0ZXJuaW9uID0gdm9pZCAwOwogICAgICB0aGlzLnBvc2l0aW9uID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5xdWF0ZXJuaW9uID0gbmV3IFF1YXRlcm5pb24oKTsKCiAgICAgIGlmIChvcHRpb25zLnBvc2l0aW9uKSB7CiAgICAgICAgdGhpcy5wb3NpdGlvbi5jb3B5KG9wdGlvbnMucG9zaXRpb24pOwogICAgICB9CgogICAgICBpZiAob3B0aW9ucy5xdWF0ZXJuaW9uKSB7CiAgICAgICAgdGhpcy5xdWF0ZXJuaW9uLmNvcHkob3B0aW9ucy5xdWF0ZXJuaW9uKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBHZXQgYSBnbG9iYWwgcG9pbnQgaW4gbG9jYWwgdHJhbnNmb3JtIGNvb3JkaW5hdGVzLgogICAgICovCgoKICAgIHBvaW50VG9Mb2NhbCh3b3JsZFBvaW50LCByZXN1bHQpIHsKICAgICAgcmV0dXJuIFRyYW5zZm9ybS5wb2ludFRvTG9jYWxGcmFtZSh0aGlzLnBvc2l0aW9uLCB0aGlzLnF1YXRlcm5pb24sIHdvcmxkUG9pbnQsIHJlc3VsdCk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhIGxvY2FsIHBvaW50IGluIGdsb2JhbCB0cmFuc2Zvcm0gY29vcmRpbmF0ZXMuCiAgICAgKi8KCgogICAgcG9pbnRUb1dvcmxkKGxvY2FsUG9pbnQsIHJlc3VsdCkgewogICAgICByZXR1cm4gVHJhbnNmb3JtLnBvaW50VG9Xb3JsZEZyYW1lKHRoaXMucG9zaXRpb24sIHRoaXMucXVhdGVybmlvbiwgbG9jYWxQb2ludCwgcmVzdWx0KTsKICAgIH0KICAgIC8qKgogICAgICogdmVjdG9yVG9Xb3JsZEZyYW1lCiAgICAgKi8KCgogICAgdmVjdG9yVG9Xb3JsZEZyYW1lKGxvY2FsVmVjdG9yLCByZXN1bHQgPSBuZXcgVmVjMygpKSB7CiAgICAgIHRoaXMucXVhdGVybmlvbi52bXVsdChsb2NhbFZlY3RvciwgcmVzdWx0KTsKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KICAgIC8qKgogICAgICogcG9pbnRUb0xvY2FsRnJhbWUKICAgICAqLwoKCiAgICBzdGF0aWMgcG9pbnRUb0xvY2FsRnJhbWUocG9zaXRpb24sIHF1YXRlcm5pb24sIHdvcmxkUG9pbnQsIHJlc3VsdCA9IG5ldyBWZWMzKCkpIHsKICAgICAgd29ybGRQb2ludC52c3ViKHBvc2l0aW9uLCByZXN1bHQpOwogICAgICBxdWF0ZXJuaW9uLmNvbmp1Z2F0ZSh0bXBRdWF0JDEpOwogICAgICB0bXBRdWF0JDEudm11bHQocmVzdWx0LCByZXN1bHQpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgLyoqCiAgICAgKiBwb2ludFRvV29ybGRGcmFtZQogICAgICovCgoKICAgIHN0YXRpYyBwb2ludFRvV29ybGRGcmFtZShwb3NpdGlvbiwgcXVhdGVybmlvbiwgbG9jYWxQb2ludCwgcmVzdWx0ID0gbmV3IFZlYzMoKSkgewogICAgICBxdWF0ZXJuaW9uLnZtdWx0KGxvY2FsUG9pbnQsIHJlc3VsdCk7CiAgICAgIHJlc3VsdC52YWRkKHBvc2l0aW9uLCByZXN1bHQpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgLyoqCiAgICAgKiB2ZWN0b3JUb1dvcmxkRnJhbWUKICAgICAqLwoKCiAgICBzdGF0aWMgdmVjdG9yVG9Xb3JsZEZyYW1lKHF1YXRlcm5pb24sIGxvY2FsVmVjdG9yLCByZXN1bHQgPSBuZXcgVmVjMygpKSB7CiAgICAgIHF1YXRlcm5pb24udm11bHQobG9jYWxWZWN0b3IsIHJlc3VsdCk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIHZlY3RvclRvTG9jYWxGcmFtZQogICAgICovCgoKICAgIHN0YXRpYyB2ZWN0b3JUb0xvY2FsRnJhbWUocG9zaXRpb24sIHF1YXRlcm5pb24sIHdvcmxkVmVjdG9yLCByZXN1bHQgPSBuZXcgVmVjMygpKSB7CiAgICAgIHF1YXRlcm5pb24udyAqPSAtMTsKICAgICAgcXVhdGVybmlvbi52bXVsdCh3b3JsZFZlY3RvciwgcmVzdWx0KTsKICAgICAgcXVhdGVybmlvbi53ICo9IC0xOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQoKICB9CgogIGNvbnN0IHRtcFF1YXQkMSA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgLyoqCiAgICogQSBzZXQgb2YgcG9seWdvbnMgZGVzY3JpYmluZyBhIGNvbnZleCBzaGFwZS4KICAgKgogICAqIFRoZSBzaGFwZSBNVVNUIGJlIGNvbnZleCBmb3IgdGhlIGNvZGUgdG8gd29yayBwcm9wZXJseS4gTm8gcG9seWdvbnMgbWF5IGJlIGNvcGxhbmFyIChjb250YWluZWQKICAgKiBpbiB0aGUgc2FtZSAzRCBwbGFuZSksIGluc3RlYWQgdGhlc2Ugc2hvdWxkIGJlIG1lcmdlZCBpbnRvIG9uZSBwb2x5Z29uLgogICAqCiAgICogQGF1dGhvciBxaWFvIC8gaHR0cHM6Ly9naXRodWIuY29tL3FpYW8gKG9yaWdpbmFsIGF1dGhvciwgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9xaWFvL3RocmVlLmpzL2NvbW1pdC84NTAyNmYwYzc2OWU0MDAwMTQ4YTY3ZDQ1YTllOWI5YzUxMDg4MzZmKQogICAqIEBhdXRob3Igc2NodGVwcGUgLyBodHRwczovL2dpdGh1Yi5jb20vc2NodGVwcGUKICAgKiBAc2VlIGh0dHBzOi8vd3d3LmFsdGRldmJsb2dhZGF5LmNvbS8yMDExLzA1LzEzL2NvbnRhY3QtZ2VuZXJhdGlvbi1iZXR3ZWVuLTNkLWNvbnZleC1tZXNoZXMvCiAgICoKICAgKiBAdG9kbyBNb3ZlIHRoZSBjbGlwcGluZyBmdW5jdGlvbnMgdG8gQ29udGFjdEdlbmVyYXRvcj8KICAgKiBAdG9kbyBBdXRvbWF0aWNhbGx5IG1lcmdlIGNvcGxhbmFyIHBvbHlnb25zIGluIGNvbnN0cnVjdG9yLgogICAqIEBleGFtcGxlCiAgICogICAgIGNvbnN0IGNvbnZleFNoYXBlID0gbmV3IENBTk5PTi5Db252ZXhQb2x5aGVkcm9uKHsgdmVydGljZXMsIGZhY2VzIH0pCiAgICogICAgIGNvbnN0IGNvbnZleEJvZHkgPSBuZXcgQ0FOTk9OLkJvZHkoeyBtYXNzOiAxLCBzaGFwZTogY29udmV4U2hhcGUgfSkKICAgKiAgICAgd29ybGQuYWRkQm9keShjb252ZXhCb2R5KQogICAqLwoKICBjbGFzcyBDb252ZXhQb2x5aGVkcm9uIGV4dGVuZHMgU2hhcGUgewogICAgLyoqIHZlcnRpY2VzICovCgogICAgLyoqCiAgICAgKiBBcnJheSBvZiBpbnRlZ2VyIGFycmF5cywgaW5kaWNhdGluZyB3aGljaCB2ZXJ0aWNlcyBlYWNoIGZhY2UgY29uc2lzdHMgb2YKICAgICAqLwoKICAgIC8qKiBmYWNlTm9ybWFscyAqLwoKICAgIC8qKiB3b3JsZFZlcnRpY2VzICovCgogICAgLyoqIHdvcmxkVmVydGljZXNOZWVkc1VwZGF0ZSAqLwoKICAgIC8qKiB3b3JsZEZhY2VOb3JtYWxzICovCgogICAgLyoqIHdvcmxkRmFjZU5vcm1hbHNOZWVkc1VwZGF0ZSAqLwoKICAgIC8qKgogICAgICogSWYgZ2l2ZW4sIHRoZXNlIGxvY2FsbHkgZGVmaW5lZCwgbm9ybWFsaXplZCBheGVzIGFyZSB0aGUgb25seSBvbmVzIGJlaW5nIGNoZWNrZWQgd2hlbiBkb2luZyBzZXBhcmF0aW5nIGF4aXMgY2hlY2suCiAgICAgKi8KCiAgICAvKiogdW5pcXVlRWRnZXMgKi8KCiAgICAvKioKICAgICAqIEBwYXJhbSB2ZXJ0aWNlcyBBbiBhcnJheSBvZiBWZWMzJ3MKICAgICAqIEBwYXJhbSBmYWNlcyBBcnJheSBvZiBpbnRlZ2VyIGFycmF5cywgZGVzY3JpYmluZyB3aGljaCB2ZXJ0aWNlcyB0aGF0IGlzIGluY2x1ZGVkIGluIGVhY2ggZmFjZS4KICAgICAqLwogICAgY29uc3RydWN0b3IocHJvcHMgPSB7fSkgewogICAgICBjb25zdCB7CiAgICAgICAgdmVydGljZXMgPSBbXSwKICAgICAgICBmYWNlcyA9IFtdLAogICAgICAgIG5vcm1hbHMgPSBbXSwKICAgICAgICBheGVzLAogICAgICAgIGJvdW5kaW5nU3BoZXJlUmFkaXVzCiAgICAgIH0gPSBwcm9wczsKICAgICAgc3VwZXIoewogICAgICAgIHR5cGU6IFNoYXBlLnR5cGVzLkNPTlZFWFBPTFlIRURST04KICAgICAgfSk7CiAgICAgIHRoaXMudmVydGljZXMgPSB2b2lkIDA7CiAgICAgIHRoaXMuZmFjZXMgPSB2b2lkIDA7CiAgICAgIHRoaXMuZmFjZU5vcm1hbHMgPSB2b2lkIDA7CiAgICAgIHRoaXMud29ybGRWZXJ0aWNlcyA9IHZvaWQgMDsKICAgICAgdGhpcy53b3JsZFZlcnRpY2VzTmVlZHNVcGRhdGUgPSB2b2lkIDA7CiAgICAgIHRoaXMud29ybGRGYWNlTm9ybWFscyA9IHZvaWQgMDsKICAgICAgdGhpcy53b3JsZEZhY2VOb3JtYWxzTmVlZHNVcGRhdGUgPSB2b2lkIDA7CiAgICAgIHRoaXMudW5pcXVlQXhlcyA9IHZvaWQgMDsKICAgICAgdGhpcy51bmlxdWVFZGdlcyA9IHZvaWQgMDsKICAgICAgdGhpcy52ZXJ0aWNlcyA9IHZlcnRpY2VzOwogICAgICB0aGlzLmZhY2VzID0gZmFjZXM7CiAgICAgIHRoaXMuZmFjZU5vcm1hbHMgPSBub3JtYWxzOwoKICAgICAgaWYgKHRoaXMuZmFjZU5vcm1hbHMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgdGhpcy5jb21wdXRlTm9ybWFscygpOwogICAgICB9CgogICAgICBpZiAoIWJvdW5kaW5nU3BoZXJlUmFkaXVzKSB7CiAgICAgICAgdGhpcy51cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgPSBib3VuZGluZ1NwaGVyZVJhZGl1czsKICAgICAgfQoKICAgICAgdGhpcy53b3JsZFZlcnRpY2VzID0gW107IC8vIFdvcmxkIHRyYW5zZm9ybWVkIHZlcnNpb24gb2YgLnZlcnRpY2VzCgogICAgICB0aGlzLndvcmxkVmVydGljZXNOZWVkc1VwZGF0ZSA9IHRydWU7CiAgICAgIHRoaXMud29ybGRGYWNlTm9ybWFscyA9IFtdOyAvLyBXb3JsZCB0cmFuc2Zvcm1lZCB2ZXJzaW9uIG9mIC5mYWNlTm9ybWFscwoKICAgICAgdGhpcy53b3JsZEZhY2VOb3JtYWxzTmVlZHNVcGRhdGUgPSB0cnVlOwogICAgICB0aGlzLnVuaXF1ZUF4ZXMgPSBheGVzID8gYXhlcy5zbGljZSgpIDogbnVsbDsKICAgICAgdGhpcy51bmlxdWVFZGdlcyA9IFtdOwogICAgICB0aGlzLmNvbXB1dGVFZGdlcygpOwogICAgfQogICAgLyoqCiAgICAgKiBDb21wdXRlcyB1bmlxdWVFZGdlcwogICAgICovCgoKICAgIGNvbXB1dGVFZGdlcygpIHsKICAgICAgY29uc3QgZmFjZXMgPSB0aGlzLmZhY2VzOwogICAgICBjb25zdCB2ZXJ0aWNlcyA9IHRoaXMudmVydGljZXM7CiAgICAgIGNvbnN0IGVkZ2VzID0gdGhpcy51bmlxdWVFZGdlczsKICAgICAgZWRnZXMubGVuZ3RoID0gMDsKICAgICAgY29uc3QgZWRnZSA9IG5ldyBWZWMzKCk7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gZmFjZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBmYWNlID0gZmFjZXNbaV07CiAgICAgICAgY29uc3QgbnVtVmVydGljZXMgPSBmYWNlLmxlbmd0aDsKCiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogIT09IG51bVZlcnRpY2VzOyBqKyspIHsKICAgICAgICAgIGNvbnN0IGsgPSAoaiArIDEpICUgbnVtVmVydGljZXM7CiAgICAgICAgICB2ZXJ0aWNlc1tmYWNlW2pdXS52c3ViKHZlcnRpY2VzW2ZhY2Vba11dLCBlZGdlKTsKICAgICAgICAgIGVkZ2Uubm9ybWFsaXplKCk7CiAgICAgICAgICBsZXQgZm91bmQgPSBmYWxzZTsKCiAgICAgICAgICBmb3IgKGxldCBwID0gMDsgcCAhPT0gZWRnZXMubGVuZ3RoOyBwKyspIHsKICAgICAgICAgICAgaWYgKGVkZ2VzW3BdLmFsbW9zdEVxdWFscyhlZGdlKSB8fCBlZGdlc1twXS5hbG1vc3RFcXVhbHMoZWRnZSkpIHsKICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoIWZvdW5kKSB7CiAgICAgICAgICAgIGVkZ2VzLnB1c2goZWRnZS5jbG9uZSgpKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZSB0aGUgbm9ybWFscyBvZiB0aGUgZmFjZXMuCiAgICAgKiBXaWxsIHJldXNlIGV4aXN0aW5nIFZlYzMgb2JqZWN0cyBpbiB0aGUgYGZhY2VOb3JtYWxzYCBhcnJheSBpZiB0aGV5IGV4aXN0LgogICAgICovCgoKICAgIGNvbXB1dGVOb3JtYWxzKCkgewogICAgICB0aGlzLmZhY2VOb3JtYWxzLmxlbmd0aCA9IHRoaXMuZmFjZXMubGVuZ3RoOyAvLyBHZW5lcmF0ZSBub3JtYWxzCgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZmFjZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAvLyBDaGVjayBzbyBhbGwgdmVydGljZXMgZXhpc3RzIGZvciB0aGlzIGZhY2UKICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMuZmFjZXNbaV0ubGVuZ3RoOyBqKyspIHsKICAgICAgICAgIGlmICghdGhpcy52ZXJ0aWNlc1t0aGlzLmZhY2VzW2ldW2pdXSkgewogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIlZlcnRleCAiICsgdGhpcy5mYWNlc1tpXVtqXSArICIgbm90IGZvdW5kISIpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgY29uc3QgbiA9IHRoaXMuZmFjZU5vcm1hbHNbaV0gfHwgbmV3IFZlYzMoKTsKICAgICAgICB0aGlzLmdldEZhY2VOb3JtYWwoaSwgbik7CiAgICAgICAgbi5uZWdhdGUobik7CiAgICAgICAgdGhpcy5mYWNlTm9ybWFsc1tpXSA9IG47CiAgICAgICAgY29uc3QgdmVydGV4ID0gdGhpcy52ZXJ0aWNlc1t0aGlzLmZhY2VzW2ldWzBdXTsKCiAgICAgICAgaWYgKG4uZG90KHZlcnRleCkgPCAwKSB7CiAgICAgICAgICBjb25zb2xlLmVycm9yKCIuZmFjZU5vcm1hbHNbIiArIGkgKyAiXSA9IFZlYzMoIiArIG4udG9TdHJpbmcoKSArICIpIGxvb2tzIGxpa2UgaXQgcG9pbnRzIGludG8gdGhlIHNoYXBlPyBUaGUgdmVydGljZXMgZm9sbG93LiBNYWtlIHN1cmUgdGhleSBhcmUgb3JkZXJlZCBDQ1cgYXJvdW5kIHRoZSBub3JtYWwsIHVzaW5nIHRoZSByaWdodCBoYW5kIHJ1bGUuIik7CgogICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLmZhY2VzW2ldLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgIGNvbnNvbGUud2FybigiLnZlcnRpY2VzWyIgKyB0aGlzLmZhY2VzW2ldW2pdICsgIl0gPSBWZWMzKCIgKyB0aGlzLnZlcnRpY2VzW3RoaXMuZmFjZXNbaV1bal1dLnRvU3RyaW5nKCkgKyAiKSIpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBDb21wdXRlIHRoZSBub3JtYWwgb2YgYSBmYWNlIGZyb20gaXRzIHZlcnRpY2VzCiAgICAgKi8KCgogICAgZ2V0RmFjZU5vcm1hbChpLCB0YXJnZXQpIHsKICAgICAgY29uc3QgZiA9IHRoaXMuZmFjZXNbaV07CiAgICAgIGNvbnN0IHZhID0gdGhpcy52ZXJ0aWNlc1tmWzBdXTsKICAgICAgY29uc3QgdmIgPSB0aGlzLnZlcnRpY2VzW2ZbMV1dOwogICAgICBjb25zdCB2YyA9IHRoaXMudmVydGljZXNbZlsyXV07CiAgICAgIENvbnZleFBvbHloZWRyb24uY29tcHV0ZU5vcm1hbCh2YSwgdmIsIHZjLCB0YXJnZXQpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgZmFjZSBub3JtYWwgZ2l2ZW4gMyB2ZXJ0aWNlcwogICAgICovCgoKICAgIHN0YXRpYyBjb21wdXRlTm9ybWFsKHZhLCB2YiwgdmMsIHRhcmdldCkgewogICAgICBjb25zdCBjYiA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IGFiID0gbmV3IFZlYzMoKTsKICAgICAgdmIudnN1Yih2YSwgYWIpOwogICAgICB2Yy52c3ViKHZiLCBjYik7CiAgICAgIGNiLmNyb3NzKGFiLCB0YXJnZXQpOwoKICAgICAgaWYgKCF0YXJnZXQuaXNaZXJvKCkpIHsKICAgICAgICB0YXJnZXQubm9ybWFsaXplKCk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQHBhcmFtIG1pbkRpc3QgQ2xhbXAgZGlzdGFuY2UKICAgICAqIEBwYXJhbSByZXN1bHQgVGhlIGFuIGFycmF5IG9mIGNvbnRhY3QgcG9pbnQgb2JqZWN0cywgc2VlIGNsaXBGYWNlQWdhaW5zdEh1bGwKICAgICAqLwoKCiAgICBjbGlwQWdhaW5zdEh1bGwocG9zQSwgcXVhdEEsIGh1bGxCLCBwb3NCLCBxdWF0Qiwgc2VwYXJhdGluZ05vcm1hbCwgbWluRGlzdCwgbWF4RGlzdCwgcmVzdWx0KSB7CiAgICAgIGNvbnN0IFdvcmxkTm9ybWFsID0gbmV3IFZlYzMoKTsKICAgICAgbGV0IGNsb3Nlc3RGYWNlQiA9IC0xOwogICAgICBsZXQgZG1heCA9IC1OdW1iZXIuTUFYX1ZBTFVFOwoKICAgICAgZm9yIChsZXQgZmFjZSA9IDA7IGZhY2UgPCBodWxsQi5mYWNlcy5sZW5ndGg7IGZhY2UrKykgewogICAgICAgIFdvcmxkTm9ybWFsLmNvcHkoaHVsbEIuZmFjZU5vcm1hbHNbZmFjZV0pOwogICAgICAgIHF1YXRCLnZtdWx0KFdvcmxkTm9ybWFsLCBXb3JsZE5vcm1hbCk7CiAgICAgICAgY29uc3QgZCA9IFdvcmxkTm9ybWFsLmRvdChzZXBhcmF0aW5nTm9ybWFsKTsKCiAgICAgICAgaWYgKGQgPiBkbWF4KSB7CiAgICAgICAgICBkbWF4ID0gZDsKICAgICAgICAgIGNsb3Nlc3RGYWNlQiA9IGZhY2U7CiAgICAgICAgfQogICAgICB9CgogICAgICBjb25zdCB3b3JsZFZlcnRzQjEgPSBbXTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaHVsbEIuZmFjZXNbY2xvc2VzdEZhY2VCXS5sZW5ndGg7IGkrKykgewogICAgICAgIGNvbnN0IGIgPSBodWxsQi52ZXJ0aWNlc1todWxsQi5mYWNlc1tjbG9zZXN0RmFjZUJdW2ldXTsKICAgICAgICBjb25zdCB3b3JsZGIgPSBuZXcgVmVjMygpOwogICAgICAgIHdvcmxkYi5jb3B5KGIpOwogICAgICAgIHF1YXRCLnZtdWx0KHdvcmxkYiwgd29ybGRiKTsKICAgICAgICBwb3NCLnZhZGQod29ybGRiLCB3b3JsZGIpOwogICAgICAgIHdvcmxkVmVydHNCMS5wdXNoKHdvcmxkYik7CiAgICAgIH0KCiAgICAgIGlmIChjbG9zZXN0RmFjZUIgPj0gMCkgewogICAgICAgIHRoaXMuY2xpcEZhY2VBZ2FpbnN0SHVsbChzZXBhcmF0aW5nTm9ybWFsLCBwb3NBLCBxdWF0QSwgd29ybGRWZXJ0c0IxLCBtaW5EaXN0LCBtYXhEaXN0LCByZXN1bHQpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEZpbmQgdGhlIHNlcGFyYXRpbmcgYXhpcyBiZXR3ZWVuIHRoaXMgaHVsbCBhbmQgYW5vdGhlcgogICAgICogQHBhcmFtIHRhcmdldCBUaGUgdGFyZ2V0IHZlY3RvciB0byBzYXZlIHRoZSBheGlzIGluCiAgICAgKiBAcmV0dXJuIFJldHVybnMgZmFsc2UgaWYgYSBzZXBhcmF0aW9uIGlzIGZvdW5kLCBlbHNlIHRydWUKICAgICAqLwoKCiAgICBmaW5kU2VwYXJhdGluZ0F4aXMoaHVsbEIsIHBvc0EsIHF1YXRBLCBwb3NCLCBxdWF0QiwgdGFyZ2V0LCBmYWNlTGlzdEEsIGZhY2VMaXN0QikgewogICAgICBjb25zdCBmYWNlQU5vcm1hbFdTMyA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IFdvcmxkbm9ybWFsMSA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IGRlbHRhQyA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IHdvcmxkRWRnZTAgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCB3b3JsZEVkZ2UxID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgQ3Jvc3MgPSBuZXcgVmVjMygpOwogICAgICBsZXQgZG1pbiA9IE51bWJlci5NQVhfVkFMVUU7CiAgICAgIGNvbnN0IGh1bGxBID0gdGhpczsKCiAgICAgIGlmICghaHVsbEEudW5pcXVlQXhlcykgewogICAgICAgIGNvbnN0IG51bUZhY2VzQSA9IGZhY2VMaXN0QSA/IGZhY2VMaXN0QS5sZW5ndGggOiBodWxsQS5mYWNlcy5sZW5ndGg7IC8vIFRlc3QgZmFjZSBub3JtYWxzIGZyb20gaHVsbEEKCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1GYWNlc0E7IGkrKykgewogICAgICAgICAgY29uc3QgZmkgPSBmYWNlTGlzdEEgPyBmYWNlTGlzdEFbaV0gOiBpOyAvLyBHZXQgd29ybGQgZmFjZSBub3JtYWwKCiAgICAgICAgICBmYWNlQU5vcm1hbFdTMy5jb3B5KGh1bGxBLmZhY2VOb3JtYWxzW2ZpXSk7CiAgICAgICAgICBxdWF0QS52bXVsdChmYWNlQU5vcm1hbFdTMywgZmFjZUFOb3JtYWxXUzMpOwogICAgICAgICAgY29uc3QgZCA9IGh1bGxBLnRlc3RTZXBBeGlzKGZhY2VBTm9ybWFsV1MzLCBodWxsQiwgcG9zQSwgcXVhdEEsIHBvc0IsIHF1YXRCKTsKCiAgICAgICAgICBpZiAoZCA9PT0gZmFsc2UpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChkIDwgZG1pbikgewogICAgICAgICAgICBkbWluID0gZDsKICAgICAgICAgICAgdGFyZ2V0LmNvcHkoZmFjZUFOb3JtYWxXUzMpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBUZXN0IHVuaXF1ZSBheGVzCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IGh1bGxBLnVuaXF1ZUF4ZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIC8vIEdldCB3b3JsZCBheGlzCiAgICAgICAgICBxdWF0QS52bXVsdChodWxsQS51bmlxdWVBeGVzW2ldLCBmYWNlQU5vcm1hbFdTMyk7CiAgICAgICAgICBjb25zdCBkID0gaHVsbEEudGVzdFNlcEF4aXMoZmFjZUFOb3JtYWxXUzMsIGh1bGxCLCBwb3NBLCBxdWF0QSwgcG9zQiwgcXVhdEIpOwoKICAgICAgICAgIGlmIChkID09PSBmYWxzZSkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGQgPCBkbWluKSB7CiAgICAgICAgICAgIGRtaW4gPSBkOwogICAgICAgICAgICB0YXJnZXQuY29weShmYWNlQU5vcm1hbFdTMyk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAoIWh1bGxCLnVuaXF1ZUF4ZXMpIHsKICAgICAgICAvLyBUZXN0IGZhY2Ugbm9ybWFscyBmcm9tIGh1bGxCCiAgICAgICAgY29uc3QgbnVtRmFjZXNCID0gZmFjZUxpc3RCID8gZmFjZUxpc3RCLmxlbmd0aCA6IGh1bGxCLmZhY2VzLmxlbmd0aDsKCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1GYWNlc0I7IGkrKykgewogICAgICAgICAgY29uc3QgZmkgPSBmYWNlTGlzdEIgPyBmYWNlTGlzdEJbaV0gOiBpOwogICAgICAgICAgV29ybGRub3JtYWwxLmNvcHkoaHVsbEIuZmFjZU5vcm1hbHNbZmldKTsKICAgICAgICAgIHF1YXRCLnZtdWx0KFdvcmxkbm9ybWFsMSwgV29ybGRub3JtYWwxKTsKICAgICAgICAgIGNvbnN0IGQgPSBodWxsQS50ZXN0U2VwQXhpcyhXb3JsZG5vcm1hbDEsIGh1bGxCLCBwb3NBLCBxdWF0QSwgcG9zQiwgcXVhdEIpOwoKICAgICAgICAgIGlmIChkID09PSBmYWxzZSkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGQgPCBkbWluKSB7CiAgICAgICAgICAgIGRtaW4gPSBkOwogICAgICAgICAgICB0YXJnZXQuY29weShXb3JsZG5vcm1hbDEpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBUZXN0IHVuaXF1ZSBheGVzIGluIEIKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gaHVsbEIudW5pcXVlQXhlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgcXVhdEIudm11bHQoaHVsbEIudW5pcXVlQXhlc1tpXSwgV29ybGRub3JtYWwxKTsKICAgICAgICAgIGNvbnN0IGQgPSBodWxsQS50ZXN0U2VwQXhpcyhXb3JsZG5vcm1hbDEsIGh1bGxCLCBwb3NBLCBxdWF0QSwgcG9zQiwgcXVhdEIpOwoKICAgICAgICAgIGlmIChkID09PSBmYWxzZSkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGQgPCBkbWluKSB7CiAgICAgICAgICAgIGRtaW4gPSBkOwogICAgICAgICAgICB0YXJnZXQuY29weShXb3JsZG5vcm1hbDEpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSAvLyBUZXN0IGVkZ2VzCgoKICAgICAgZm9yIChsZXQgZTAgPSAwOyBlMCAhPT0gaHVsbEEudW5pcXVlRWRnZXMubGVuZ3RoOyBlMCsrKSB7CiAgICAgICAgLy8gR2V0IHdvcmxkIGVkZ2UKICAgICAgICBxdWF0QS52bXVsdChodWxsQS51bmlxdWVFZGdlc1tlMF0sIHdvcmxkRWRnZTApOwoKICAgICAgICBmb3IgKGxldCBlMSA9IDA7IGUxICE9PSBodWxsQi51bmlxdWVFZGdlcy5sZW5ndGg7IGUxKyspIHsKICAgICAgICAgIC8vIEdldCB3b3JsZCBlZGdlIDIKICAgICAgICAgIHF1YXRCLnZtdWx0KGh1bGxCLnVuaXF1ZUVkZ2VzW2UxXSwgd29ybGRFZGdlMSk7CiAgICAgICAgICB3b3JsZEVkZ2UwLmNyb3NzKHdvcmxkRWRnZTEsIENyb3NzKTsKCiAgICAgICAgICBpZiAoIUNyb3NzLmFsbW9zdFplcm8oKSkgewogICAgICAgICAgICBDcm9zcy5ub3JtYWxpemUoKTsKICAgICAgICAgICAgY29uc3QgZGlzdCA9IGh1bGxBLnRlc3RTZXBBeGlzKENyb3NzLCBodWxsQiwgcG9zQSwgcXVhdEEsIHBvc0IsIHF1YXRCKTsKCiAgICAgICAgICAgIGlmIChkaXN0ID09PSBmYWxzZSkgewogICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKGRpc3QgPCBkbWluKSB7CiAgICAgICAgICAgICAgZG1pbiA9IGRpc3Q7CiAgICAgICAgICAgICAgdGFyZ2V0LmNvcHkoQ3Jvc3MpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICBwb3NCLnZzdWIocG9zQSwgZGVsdGFDKTsKCiAgICAgIGlmIChkZWx0YUMuZG90KHRhcmdldCkgPiAwLjApIHsKICAgICAgICB0YXJnZXQubmVnYXRlKHRhcmdldCk7CiAgICAgIH0KCiAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgLyoqCiAgICAgKiBUZXN0IHNlcGFyYXRpbmcgYXhpcyBhZ2FpbnN0IHR3byBodWxscy4gQm90aCBodWxscyBhcmUgcHJvamVjdGVkIG9udG8gdGhlIGF4aXMgYW5kIHRoZSBvdmVybGFwIHNpemUgaXMgcmV0dXJuZWQgaWYgdGhlcmUgaXMgb25lLgogICAgICogQHJldHVybiBUaGUgb3ZlcmxhcCBkZXB0aCwgb3IgRkFMU0UgaWYgbm8gcGVuZXRyYXRpb24uCiAgICAgKi8KCgogICAgdGVzdFNlcEF4aXMoYXhpcywgaHVsbEIsIHBvc0EsIHF1YXRBLCBwb3NCLCBxdWF0QikgewogICAgICBjb25zdCBodWxsQSA9IHRoaXM7CiAgICAgIENvbnZleFBvbHloZWRyb24ucHJvamVjdChodWxsQSwgYXhpcywgcG9zQSwgcXVhdEEsIG1heG1pbkEpOwogICAgICBDb252ZXhQb2x5aGVkcm9uLnByb2plY3QoaHVsbEIsIGF4aXMsIHBvc0IsIHF1YXRCLCBtYXhtaW5CKTsKICAgICAgY29uc3QgbWF4QSA9IG1heG1pbkFbMF07CiAgICAgIGNvbnN0IG1pbkEgPSBtYXhtaW5BWzFdOwogICAgICBjb25zdCBtYXhCID0gbWF4bWluQlswXTsKICAgICAgY29uc3QgbWluQiA9IG1heG1pbkJbMV07CgogICAgICBpZiAobWF4QSA8IG1pbkIgfHwgbWF4QiA8IG1pbkEpIHsKICAgICAgICByZXR1cm4gZmFsc2U7IC8vIFNlcGFyYXRlZAogICAgICB9CgogICAgICBjb25zdCBkMCA9IG1heEEgLSBtaW5COwogICAgICBjb25zdCBkMSA9IG1heEIgLSBtaW5BOwogICAgICBjb25zdCBkZXB0aCA9IGQwIDwgZDEgPyBkMCA6IGQxOwogICAgICByZXR1cm4gZGVwdGg7CiAgICB9CiAgICAvKioKICAgICAqIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYQogICAgICovCgoKICAgIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYShtYXNzLCB0YXJnZXQpIHsKICAgICAgLy8gQXBwcm94aW1hdGUgd2l0aCBib3ggaW5lcnRpYQogICAgICAvLyBFeGFjdCBpbmVydGlhIGNhbGN1bGF0aW9uIGlzIG92ZXJraWxsLCBidXQgc2VlIGh0dHA6Ly9nZW9tZXRyaWN0b29scy5jb20vRG9jdW1lbnRhdGlvbi9Qb2x5aGVkcmFsTWFzc1Byb3BlcnRpZXMucGRmIGZvciB0aGUgY29ycmVjdCB3YXkgdG8gZG8gaXQKICAgICAgY29uc3QgYWFiYm1heCA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IGFhYmJtaW4gPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmNvbXB1dGVMb2NhbEFBQkIoYWFiYm1pbiwgYWFiYm1heCk7CiAgICAgIGNvbnN0IHggPSBhYWJibWF4LnggLSBhYWJibWluLng7CiAgICAgIGNvbnN0IHkgPSBhYWJibWF4LnkgLSBhYWJibWluLnk7CiAgICAgIGNvbnN0IHogPSBhYWJibWF4LnogLSBhYWJibWluLno7CiAgICAgIHRhcmdldC54ID0gMS4wIC8gMTIuMCAqIG1hc3MgKiAoMiAqIHkgKiAyICogeSArIDIgKiB6ICogMiAqIHopOwogICAgICB0YXJnZXQueSA9IDEuMCAvIDEyLjAgKiBtYXNzICogKDIgKiB4ICogMiAqIHggKyAyICogeiAqIDIgKiB6KTsKICAgICAgdGFyZ2V0LnogPSAxLjAgLyAxMi4wICogbWFzcyAqICgyICogeSAqIDIgKiB5ICsgMiAqIHggKiAyICogeCk7CiAgICB9CiAgICAvKioKICAgICAqIEBwYXJhbSBmYWNlX2kgSW5kZXggb2YgdGhlIGZhY2UKICAgICAqLwoKCiAgICBnZXRQbGFuZUNvbnN0YW50T2ZGYWNlKGZhY2VfaSkgewogICAgICBjb25zdCBmID0gdGhpcy5mYWNlc1tmYWNlX2ldOwogICAgICBjb25zdCBuID0gdGhpcy5mYWNlTm9ybWFsc1tmYWNlX2ldOwogICAgICBjb25zdCB2ID0gdGhpcy52ZXJ0aWNlc1tmWzBdXTsKICAgICAgY29uc3QgYyA9IC1uLmRvdCh2KTsKICAgICAgcmV0dXJuIGM7CiAgICB9CiAgICAvKioKICAgICAqIENsaXAgYSBmYWNlIGFnYWluc3QgYSBodWxsLgogICAgICogQHBhcmFtIHdvcmxkVmVydHNCMSBBbiBhcnJheSBvZiBWZWMzIHdpdGggdmVydGljZXMgaW4gdGhlIHdvcmxkIGZyYW1lLgogICAgICogQHBhcmFtIG1pbkRpc3QgRGlzdGFuY2UgY2xhbXBpbmcKICAgICAqIEBwYXJhbSBBcnJheSByZXN1bHQgQXJyYXkgdG8gc3RvcmUgcmVzdWx0aW5nIGNvbnRhY3QgcG9pbnRzIGluLiBXaWxsIGJlIG9iamVjdHMgd2l0aCBwcm9wZXJ0aWVzOiBwb2ludCwgZGVwdGgsIG5vcm1hbC4gVGhlc2UgYXJlIHJlcHJlc2VudGVkIGluIHdvcmxkIGNvb3JkaW5hdGVzLgogICAgICovCgoKICAgIGNsaXBGYWNlQWdhaW5zdEh1bGwoc2VwYXJhdGluZ05vcm1hbCwgcG9zQSwgcXVhdEEsIHdvcmxkVmVydHNCMSwgbWluRGlzdCwgbWF4RGlzdCwgcmVzdWx0KSB7CiAgICAgIGNvbnN0IGZhY2VBTm9ybWFsV1MgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBlZGdlMCA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IFdvcmxkRWRnZTAgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCB3b3JsZFBsYW5lQW5vcm1hbDEgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBwbGFuZU5vcm1hbFdTMSA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IHdvcmxkQTEgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBsb2NhbFBsYW5lTm9ybWFsID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgcGxhbmVOb3JtYWxXUyA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IGh1bGxBID0gdGhpczsKICAgICAgY29uc3Qgd29ybGRWZXJ0c0IyID0gW107CiAgICAgIGNvbnN0IHBWdHhJbiA9IHdvcmxkVmVydHNCMTsKICAgICAgY29uc3QgcFZ0eE91dCA9IHdvcmxkVmVydHNCMjsKICAgICAgbGV0IGNsb3Nlc3RGYWNlQSA9IC0xOwogICAgICBsZXQgZG1pbiA9IE51bWJlci5NQVhfVkFMVUU7IC8vIEZpbmQgdGhlIGZhY2Ugd2l0aCBub3JtYWwgY2xvc2VzdCB0byB0aGUgc2VwYXJhdGluZyBheGlzCgogICAgICBmb3IgKGxldCBmYWNlID0gMDsgZmFjZSA8IGh1bGxBLmZhY2VzLmxlbmd0aDsgZmFjZSsrKSB7CiAgICAgICAgZmFjZUFOb3JtYWxXUy5jb3B5KGh1bGxBLmZhY2VOb3JtYWxzW2ZhY2VdKTsKICAgICAgICBxdWF0QS52bXVsdChmYWNlQU5vcm1hbFdTLCBmYWNlQU5vcm1hbFdTKTsKICAgICAgICBjb25zdCBkID0gZmFjZUFOb3JtYWxXUy5kb3Qoc2VwYXJhdGluZ05vcm1hbCk7CgogICAgICAgIGlmIChkIDwgZG1pbikgewogICAgICAgICAgZG1pbiA9IGQ7CiAgICAgICAgICBjbG9zZXN0RmFjZUEgPSBmYWNlOwogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKGNsb3Nlc3RGYWNlQSA8IDApIHsKICAgICAgICByZXR1cm47CiAgICAgIH0gLy8gR2V0IHRoZSBmYWNlIGFuZCBjb25zdHJ1Y3QgY29ubmVjdGVkIGZhY2VzCgoKICAgICAgY29uc3QgcG9seUEgPSBodWxsQS5mYWNlc1tjbG9zZXN0RmFjZUFdOwogICAgICBwb2x5QS5jb25uZWN0ZWRGYWNlcyA9IFtdOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBodWxsQS5mYWNlcy5sZW5ndGg7IGkrKykgewogICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgaHVsbEEuZmFjZXNbaV0ubGVuZ3RoOyBqKyspIHsKICAgICAgICAgIGlmICgKICAgICAgICAgIC8qIFNoYXJpbmcgYSB2ZXJ0ZXgqLwogICAgICAgICAgcG9seUEuaW5kZXhPZihodWxsQS5mYWNlc1tpXVtqXSkgIT09IC0xICYmCiAgICAgICAgICAvKiBOb3QgdGhlIG9uZSB3ZSBhcmUgbG9va2luZyBmb3IgY29ubmVjdGlvbnMgZnJvbSAqLwogICAgICAgICAgaSAhPT0gY2xvc2VzdEZhY2VBICYmCiAgICAgICAgICAvKiBOb3QgYWxyZWFkeSBhZGRlZCAqLwogICAgICAgICAgcG9seUEuY29ubmVjdGVkRmFjZXMuaW5kZXhPZihpKSA9PT0gLTEpIHsKICAgICAgICAgICAgcG9seUEuY29ubmVjdGVkRmFjZXMucHVzaChpKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gLy8gQ2xpcCB0aGUgcG9seWdvbiB0byB0aGUgYmFjayBvZiB0aGUgcGxhbmVzIG9mIGFsbCBmYWNlcyBvZiBodWxsIEEsCiAgICAgIC8vIHRoYXQgYXJlIGFkamFjZW50IHRvIHRoZSB3aXRuZXNzIGZhY2UKCgogICAgICBjb25zdCBudW1WZXJ0aWNlc0EgPSBwb2x5QS5sZW5ndGg7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVZlcnRpY2VzQTsgaSsrKSB7CiAgICAgICAgY29uc3QgYSA9IGh1bGxBLnZlcnRpY2VzW3BvbHlBW2ldXTsKICAgICAgICBjb25zdCBiID0gaHVsbEEudmVydGljZXNbcG9seUFbKGkgKyAxKSAlIG51bVZlcnRpY2VzQV1dOwogICAgICAgIGEudnN1YihiLCBlZGdlMCk7CiAgICAgICAgV29ybGRFZGdlMC5jb3B5KGVkZ2UwKTsKICAgICAgICBxdWF0QS52bXVsdChXb3JsZEVkZ2UwLCBXb3JsZEVkZ2UwKTsKICAgICAgICBwb3NBLnZhZGQoV29ybGRFZGdlMCwgV29ybGRFZGdlMCk7CiAgICAgICAgd29ybGRQbGFuZUFub3JtYWwxLmNvcHkodGhpcy5mYWNlTm9ybWFsc1tjbG9zZXN0RmFjZUFdKTsKICAgICAgICBxdWF0QS52bXVsdCh3b3JsZFBsYW5lQW5vcm1hbDEsIHdvcmxkUGxhbmVBbm9ybWFsMSk7CiAgICAgICAgcG9zQS52YWRkKHdvcmxkUGxhbmVBbm9ybWFsMSwgd29ybGRQbGFuZUFub3JtYWwxKTsKICAgICAgICBXb3JsZEVkZ2UwLmNyb3NzKHdvcmxkUGxhbmVBbm9ybWFsMSwgcGxhbmVOb3JtYWxXUzEpOwogICAgICAgIHBsYW5lTm9ybWFsV1MxLm5lZ2F0ZShwbGFuZU5vcm1hbFdTMSk7CiAgICAgICAgd29ybGRBMS5jb3B5KGEpOwogICAgICAgIHF1YXRBLnZtdWx0KHdvcmxkQTEsIHdvcmxkQTEpOwogICAgICAgIHBvc0EudmFkZCh3b3JsZEExLCB3b3JsZEExKTsKICAgICAgICBjb25zdCBvdGhlckZhY2UgPSBwb2x5QS5jb25uZWN0ZWRGYWNlc1tpXTsKICAgICAgICBsb2NhbFBsYW5lTm9ybWFsLmNvcHkodGhpcy5mYWNlTm9ybWFsc1tvdGhlckZhY2VdKTsKICAgICAgICBjb25zdCBsb2NhbFBsYW5lRXEgPSB0aGlzLmdldFBsYW5lQ29uc3RhbnRPZkZhY2Uob3RoZXJGYWNlKTsKICAgICAgICBwbGFuZU5vcm1hbFdTLmNvcHkobG9jYWxQbGFuZU5vcm1hbCk7CiAgICAgICAgcXVhdEEudm11bHQocGxhbmVOb3JtYWxXUywgcGxhbmVOb3JtYWxXUyk7CiAgICAgICAgY29uc3QgcGxhbmVFcVdTID0gbG9jYWxQbGFuZUVxIC0gcGxhbmVOb3JtYWxXUy5kb3QocG9zQSk7IC8vIENsaXAgZmFjZSBhZ2FpbnN0IG91ciBjb25zdHJ1Y3RlZCBwbGFuZQoKICAgICAgICB0aGlzLmNsaXBGYWNlQWdhaW5zdFBsYW5lKHBWdHhJbiwgcFZ0eE91dCwgcGxhbmVOb3JtYWxXUywgcGxhbmVFcVdTKTsgLy8gVGhyb3cgYXdheSBhbGwgY2xpcHBlZCBwb2ludHMsIGJ1dCBzYXZlIHRoZSByZW1haW5pbmcgdW50aWwgbmV4dCBjbGlwCgogICAgICAgIHdoaWxlIChwVnR4SW4ubGVuZ3RoKSB7CiAgICAgICAgICBwVnR4SW4uc2hpZnQoKTsKICAgICAgICB9CgogICAgICAgIHdoaWxlIChwVnR4T3V0Lmxlbmd0aCkgewogICAgICAgICAgcFZ0eEluLnB1c2gocFZ0eE91dC5zaGlmdCgpKTsKICAgICAgICB9CiAgICAgIH0gLy8gb25seSBrZWVwIGNvbnRhY3QgcG9pbnRzIHRoYXQgYXJlIGJlaGluZCB0aGUgd2l0bmVzcyBmYWNlCgoKICAgICAgbG9jYWxQbGFuZU5vcm1hbC5jb3B5KHRoaXMuZmFjZU5vcm1hbHNbY2xvc2VzdEZhY2VBXSk7CiAgICAgIGNvbnN0IGxvY2FsUGxhbmVFcSA9IHRoaXMuZ2V0UGxhbmVDb25zdGFudE9mRmFjZShjbG9zZXN0RmFjZUEpOwogICAgICBwbGFuZU5vcm1hbFdTLmNvcHkobG9jYWxQbGFuZU5vcm1hbCk7CiAgICAgIHF1YXRBLnZtdWx0KHBsYW5lTm9ybWFsV1MsIHBsYW5lTm9ybWFsV1MpOwogICAgICBjb25zdCBwbGFuZUVxV1MgPSBsb2NhbFBsYW5lRXEgLSBwbGFuZU5vcm1hbFdTLmRvdChwb3NBKTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcFZ0eEluLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgbGV0IGRlcHRoID0gcGxhbmVOb3JtYWxXUy5kb3QocFZ0eEluW2ldKSArIHBsYW5lRXFXUzsgLy8gPz8/CgogICAgICAgIGlmIChkZXB0aCA8PSBtaW5EaXN0KSB7CiAgICAgICAgICBjb25zb2xlLmxvZygiY2xhbXBlZDogZGVwdGg9IiArIGRlcHRoICsgIiB0byBtaW5EaXN0PSIgKyBtaW5EaXN0KTsKICAgICAgICAgIGRlcHRoID0gbWluRGlzdDsKICAgICAgICB9CgogICAgICAgIGlmIChkZXB0aCA8PSBtYXhEaXN0KSB7CiAgICAgICAgICBjb25zdCBwb2ludCA9IHBWdHhJbltpXTsKCiAgICAgICAgICBpZiAoZGVwdGggPD0gMWUtNikgewogICAgICAgICAgICBjb25zdCBwID0gewogICAgICAgICAgICAgIHBvaW50LAogICAgICAgICAgICAgIG5vcm1hbDogcGxhbmVOb3JtYWxXUywKICAgICAgICAgICAgICBkZXB0aAogICAgICAgICAgICB9OwogICAgICAgICAgICByZXN1bHQucHVzaChwKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQ2xpcCBhIGZhY2UgaW4gYSBodWxsIGFnYWluc3QgdGhlIGJhY2sgb2YgYSBwbGFuZS4KICAgICAqIEBwYXJhbSBwbGFuZUNvbnN0YW50IFRoZSBjb25zdGFudCBpbiB0aGUgbWF0aGVtYXRpY2FsIHBsYW5lIGVxdWF0aW9uCiAgICAgKi8KCgogICAgY2xpcEZhY2VBZ2FpbnN0UGxhbmUoaW5WZXJ0aWNlcywgb3V0VmVydGljZXMsIHBsYW5lTm9ybWFsLCBwbGFuZUNvbnN0YW50KSB7CiAgICAgIGxldCBuX2RvdF9maXJzdDsKICAgICAgbGV0IG5fZG90X2xhc3Q7CiAgICAgIGNvbnN0IG51bVZlcnRzID0gaW5WZXJ0aWNlcy5sZW5ndGg7CgogICAgICBpZiAobnVtVmVydHMgPCAyKSB7CiAgICAgICAgcmV0dXJuIG91dFZlcnRpY2VzOwogICAgICB9CgogICAgICBsZXQgZmlyc3RWZXJ0ZXggPSBpblZlcnRpY2VzW2luVmVydGljZXMubGVuZ3RoIC0gMV07CiAgICAgIGxldCBsYXN0VmVydGV4ID0gaW5WZXJ0aWNlc1swXTsKICAgICAgbl9kb3RfZmlyc3QgPSBwbGFuZU5vcm1hbC5kb3QoZmlyc3RWZXJ0ZXgpICsgcGxhbmVDb25zdGFudDsKCiAgICAgIGZvciAobGV0IHZpID0gMDsgdmkgPCBudW1WZXJ0czsgdmkrKykgewogICAgICAgIGxhc3RWZXJ0ZXggPSBpblZlcnRpY2VzW3ZpXTsKICAgICAgICBuX2RvdF9sYXN0ID0gcGxhbmVOb3JtYWwuZG90KGxhc3RWZXJ0ZXgpICsgcGxhbmVDb25zdGFudDsKCiAgICAgICAgaWYgKG5fZG90X2ZpcnN0IDwgMCkgewogICAgICAgICAgaWYgKG5fZG90X2xhc3QgPCAwKSB7CiAgICAgICAgICAgIC8vIFN0YXJ0IDwgMCwgZW5kIDwgMCwgc28gb3V0cHV0IGxhc3RWZXJ0ZXgKICAgICAgICAgICAgY29uc3QgbmV3diA9IG5ldyBWZWMzKCk7CiAgICAgICAgICAgIG5ld3YuY29weShsYXN0VmVydGV4KTsKICAgICAgICAgICAgb3V0VmVydGljZXMucHVzaChuZXd2KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIFN0YXJ0IDwgMCwgZW5kID49IDAsIHNvIG91dHB1dCBpbnRlcnNlY3Rpb24KICAgICAgICAgICAgY29uc3QgbmV3diA9IG5ldyBWZWMzKCk7CiAgICAgICAgICAgIGZpcnN0VmVydGV4LmxlcnAobGFzdFZlcnRleCwgbl9kb3RfZmlyc3QgLyAobl9kb3RfZmlyc3QgLSBuX2RvdF9sYXN0KSwgbmV3dik7CiAgICAgICAgICAgIG91dFZlcnRpY2VzLnB1c2gobmV3dik7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmIChuX2RvdF9sYXN0IDwgMCkgewogICAgICAgICAgICAvLyBTdGFydCA+PSAwLCBlbmQgPCAwIHNvIG91dHB1dCBpbnRlcnNlY3Rpb24gYW5kIGVuZAogICAgICAgICAgICBjb25zdCBuZXd2ID0gbmV3IFZlYzMoKTsKICAgICAgICAgICAgZmlyc3RWZXJ0ZXgubGVycChsYXN0VmVydGV4LCBuX2RvdF9maXJzdCAvIChuX2RvdF9maXJzdCAtIG5fZG90X2xhc3QpLCBuZXd2KTsKICAgICAgICAgICAgb3V0VmVydGljZXMucHVzaChuZXd2KTsKICAgICAgICAgICAgb3V0VmVydGljZXMucHVzaChsYXN0VmVydGV4KTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZpcnN0VmVydGV4ID0gbGFzdFZlcnRleDsKICAgICAgICBuX2RvdF9maXJzdCA9IG5fZG90X2xhc3Q7CiAgICAgIH0KCiAgICAgIHJldHVybiBvdXRWZXJ0aWNlczsKICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlcyBgLndvcmxkVmVydGljZXNgIGFuZCBzZXRzIGAud29ybGRWZXJ0aWNlc05lZWRzVXBkYXRlYCB0byBmYWxzZS4KICAgICAqLwoKCiAgICBjb21wdXRlV29ybGRWZXJ0aWNlcyhwb3NpdGlvbiwgcXVhdCkgewogICAgICB3aGlsZSAodGhpcy53b3JsZFZlcnRpY2VzLmxlbmd0aCA8IHRoaXMudmVydGljZXMubGVuZ3RoKSB7CiAgICAgICAgdGhpcy53b3JsZFZlcnRpY2VzLnB1c2gobmV3IFZlYzMoKSk7CiAgICAgIH0KCiAgICAgIGNvbnN0IHZlcnRzID0gdGhpcy52ZXJ0aWNlczsKICAgICAgY29uc3Qgd29ybGRWZXJ0cyA9IHRoaXMud29ybGRWZXJ0aWNlczsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSB0aGlzLnZlcnRpY2VzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgcXVhdC52bXVsdCh2ZXJ0c1tpXSwgd29ybGRWZXJ0c1tpXSk7CiAgICAgICAgcG9zaXRpb24udmFkZCh3b3JsZFZlcnRzW2ldLCB3b3JsZFZlcnRzW2ldKTsKICAgICAgfQoKICAgICAgdGhpcy53b3JsZFZlcnRpY2VzTmVlZHNVcGRhdGUgPSBmYWxzZTsKICAgIH0KCiAgICBjb21wdXRlTG9jYWxBQUJCKGFhYmJtaW4sIGFhYmJtYXgpIHsKICAgICAgY29uc3QgdmVydGljZXMgPSB0aGlzLnZlcnRpY2VzOwogICAgICBhYWJibWluLnNldChOdW1iZXIuTUFYX1ZBTFVFLCBOdW1iZXIuTUFYX1ZBTFVFLCBOdW1iZXIuTUFYX1ZBTFVFKTsKICAgICAgYWFiYm1heC5zZXQoLU51bWJlci5NQVhfVkFMVUUsIC1OdW1iZXIuTUFYX1ZBTFVFLCAtTnVtYmVyLk1BWF9WQUxVRSk7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudmVydGljZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCB2ID0gdmVydGljZXNbaV07CgogICAgICAgIGlmICh2LnggPCBhYWJibWluLngpIHsKICAgICAgICAgIGFhYmJtaW4ueCA9IHYueDsKICAgICAgICB9IGVsc2UgaWYgKHYueCA+IGFhYmJtYXgueCkgewogICAgICAgICAgYWFiYm1heC54ID0gdi54OwogICAgICAgIH0KCiAgICAgICAgaWYgKHYueSA8IGFhYmJtaW4ueSkgewogICAgICAgICAgYWFiYm1pbi55ID0gdi55OwogICAgICAgIH0gZWxzZSBpZiAodi55ID4gYWFiYm1heC55KSB7CiAgICAgICAgICBhYWJibWF4LnkgPSB2Lnk7CiAgICAgICAgfQoKICAgICAgICBpZiAodi56IDwgYWFiYm1pbi56KSB7CiAgICAgICAgICBhYWJibWluLnogPSB2Lno7CiAgICAgICAgfSBlbHNlIGlmICh2LnogPiBhYWJibWF4LnopIHsKICAgICAgICAgIGFhYmJtYXgueiA9IHYuejsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlcyBgd29ybGRWZXJ0aWNlc2AgYW5kIHNldHMgYHdvcmxkVmVydGljZXNOZWVkc1VwZGF0ZWAgdG8gZmFsc2UuCiAgICAgKi8KCgogICAgY29tcHV0ZVdvcmxkRmFjZU5vcm1hbHMocXVhdCkgewogICAgICBjb25zdCBOID0gdGhpcy5mYWNlTm9ybWFscy5sZW5ndGg7CgogICAgICB3aGlsZSAodGhpcy53b3JsZEZhY2VOb3JtYWxzLmxlbmd0aCA8IE4pIHsKICAgICAgICB0aGlzLndvcmxkRmFjZU5vcm1hbHMucHVzaChuZXcgVmVjMygpKTsKICAgICAgfQoKICAgICAgY29uc3Qgbm9ybWFscyA9IHRoaXMuZmFjZU5vcm1hbHM7CiAgICAgIGNvbnN0IHdvcmxkTm9ybWFscyA9IHRoaXMud29ybGRGYWNlTm9ybWFsczsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBxdWF0LnZtdWx0KG5vcm1hbHNbaV0sIHdvcmxkTm9ybWFsc1tpXSk7CiAgICAgIH0KCiAgICAgIHRoaXMud29ybGRGYWNlTm9ybWFsc05lZWRzVXBkYXRlID0gZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzCiAgICAgKi8KCgogICAgdXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKSB7CiAgICAgIC8vIEFzc3VtZSBwb2ludHMgYXJlIGRpc3RyaWJ1dGVkIHdpdGggbG9jYWwgKDAsMCwwKSBhcyBjZW50ZXIKICAgICAgbGV0IG1heDIgPSAwOwogICAgICBjb25zdCB2ZXJ0cyA9IHRoaXMudmVydGljZXM7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gdmVydHMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBub3JtMiA9IHZlcnRzW2ldLmxlbmd0aFNxdWFyZWQoKTsKCiAgICAgICAgaWYgKG5vcm0yID4gbWF4MikgewogICAgICAgICAgbWF4MiA9IG5vcm0yOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IE1hdGguc3FydChtYXgyKTsKICAgIH0KICAgIC8qKgogICAgICogY2FsY3VsYXRlV29ybGRBQUJCCiAgICAgKi8KCgogICAgY2FsY3VsYXRlV29ybGRBQUJCKHBvcywgcXVhdCwgbWluLCBtYXgpIHsKICAgICAgY29uc3QgdmVydHMgPSB0aGlzLnZlcnRpY2VzOwogICAgICBsZXQgbWlueDsKICAgICAgbGV0IG1pbnk7CiAgICAgIGxldCBtaW56OwogICAgICBsZXQgbWF4eDsKICAgICAgbGV0IG1heHk7CiAgICAgIGxldCBtYXh6OwogICAgICBsZXQgdGVtcFdvcmxkVmVydGV4ID0gbmV3IFZlYzMoKTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmVydHMubGVuZ3RoOyBpKyspIHsKICAgICAgICB0ZW1wV29ybGRWZXJ0ZXguY29weSh2ZXJ0c1tpXSk7CiAgICAgICAgcXVhdC52bXVsdCh0ZW1wV29ybGRWZXJ0ZXgsIHRlbXBXb3JsZFZlcnRleCk7CiAgICAgICAgcG9zLnZhZGQodGVtcFdvcmxkVmVydGV4LCB0ZW1wV29ybGRWZXJ0ZXgpOwogICAgICAgIGNvbnN0IHYgPSB0ZW1wV29ybGRWZXJ0ZXg7CgogICAgICAgIGlmIChtaW54ID09PSB1bmRlZmluZWQgfHwgdi54IDwgbWlueCkgewogICAgICAgICAgbWlueCA9IHYueDsKICAgICAgICB9CgogICAgICAgIGlmIChtYXh4ID09PSB1bmRlZmluZWQgfHwgdi54ID4gbWF4eCkgewogICAgICAgICAgbWF4eCA9IHYueDsKICAgICAgICB9CgogICAgICAgIGlmIChtaW55ID09PSB1bmRlZmluZWQgfHwgdi55IDwgbWlueSkgewogICAgICAgICAgbWlueSA9IHYueTsKICAgICAgICB9CgogICAgICAgIGlmIChtYXh5ID09PSB1bmRlZmluZWQgfHwgdi55ID4gbWF4eSkgewogICAgICAgICAgbWF4eSA9IHYueTsKICAgICAgICB9CgogICAgICAgIGlmIChtaW56ID09PSB1bmRlZmluZWQgfHwgdi56IDwgbWlueikgewogICAgICAgICAgbWlueiA9IHYuejsKICAgICAgICB9CgogICAgICAgIGlmIChtYXh6ID09PSB1bmRlZmluZWQgfHwgdi56ID4gbWF4eikgewogICAgICAgICAgbWF4eiA9IHYuejsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIG1pbi5zZXQobWlueCwgbWlueSwgbWlueik7CiAgICAgIG1heC5zZXQobWF4eCwgbWF4eSwgbWF4eik7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhcHByb3hpbWF0ZSBjb252ZXggdm9sdW1lCiAgICAgKi8KCgogICAgdm9sdW1lKCkgewogICAgICByZXR1cm4gNC4wICogTWF0aC5QSSAqIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgLyAzLjA7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhbiBhdmVyYWdlIG9mIGFsbCB0aGUgdmVydGljZXMgcG9zaXRpb25zCiAgICAgKi8KCgogICAgZ2V0QXZlcmFnZVBvaW50TG9jYWwodGFyZ2V0ID0gbmV3IFZlYzMoKSkgewogICAgICBjb25zdCB2ZXJ0cyA9IHRoaXMudmVydGljZXM7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZlcnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdGFyZ2V0LnZhZGQodmVydHNbaV0sIHRhcmdldCk7CiAgICAgIH0KCiAgICAgIHRhcmdldC5zY2FsZSgxIC8gdmVydHMubGVuZ3RoLCB0YXJnZXQpOwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBUcmFuc2Zvcm0gYWxsIGxvY2FsIHBvaW50cy4gV2lsbCBjaGFuZ2UgdGhlIC52ZXJ0aWNlcwogICAgICovCgoKICAgIHRyYW5zZm9ybUFsbFBvaW50cyhvZmZzZXQsIHF1YXQpIHsKICAgICAgY29uc3QgbiA9IHRoaXMudmVydGljZXMubGVuZ3RoOwogICAgICBjb25zdCB2ZXJ0cyA9IHRoaXMudmVydGljZXM7IC8vIEFwcGx5IHJvdGF0aW9uCgogICAgICBpZiAocXVhdCkgewogICAgICAgIC8vIFJvdGF0ZSB2ZXJ0aWNlcwogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbjsgaSsrKSB7CiAgICAgICAgICBjb25zdCB2ID0gdmVydHNbaV07CiAgICAgICAgICBxdWF0LnZtdWx0KHYsIHYpOwogICAgICAgIH0gLy8gUm90YXRlIGZhY2Ugbm9ybWFscwoKCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmZhY2VOb3JtYWxzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBjb25zdCB2ID0gdGhpcy5mYWNlTm9ybWFsc1tpXTsKICAgICAgICAgIHF1YXQudm11bHQodiwgdik7CiAgICAgICAgfQogICAgICAgIC8qCiAgICAgICAgICAgICAgLy8gUm90YXRlIGVkZ2VzCiAgICAgICAgICAgICAgZm9yKGxldCBpPTA7IGk8dGhpcy51bmlxdWVFZGdlcy5sZW5ndGg7IGkrKyl7CiAgICAgICAgICAgICAgICAgIGNvbnN0IHYgPSB0aGlzLnVuaXF1ZUVkZ2VzW2ldOwogICAgICAgICAgICAgICAgICBxdWF0LnZtdWx0KHYsdik7CiAgICAgICAgICAgICAgfSovCgogICAgICB9IC8vIEFwcGx5IG9mZnNldAoKCiAgICAgIGlmIChvZmZzZXQpIHsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG47IGkrKykgewogICAgICAgICAgY29uc3QgdiA9IHZlcnRzW2ldOwogICAgICAgICAgdi52YWRkKG9mZnNldCwgdik7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIENoZWNrcyB3aGV0aGVyIHAgaXMgaW5zaWRlIHRoZSBwb2x5aGVkcmEuIE11c3QgYmUgaW4gbG9jYWwgY29vcmRzLgogICAgICogVGhlIHBvaW50IGxpZXMgb3V0c2lkZSBvZiB0aGUgY29udmV4IGh1bGwgb2YgdGhlIG90aGVyIHBvaW50cyBpZiBhbmQgb25seSBpZiB0aGUgZGlyZWN0aW9uCiAgICAgKiBvZiBhbGwgdGhlIHZlY3RvcnMgZnJvbSBpdCB0byB0aG9zZSBvdGhlciBwb2ludHMgYXJlIG9uIGxlc3MgdGhhbiBvbmUgaGFsZiBvZiBhIHNwaGVyZSBhcm91bmQgaXQuCiAgICAgKiBAcGFyYW0gcCBBIHBvaW50IGdpdmVuIGluIGxvY2FsIGNvb3JkaW5hdGVzCiAgICAgKi8KCgogICAgcG9pbnRJc0luc2lkZShwKSB7CiAgICAgIGNvbnN0IHZlcnRzID0gdGhpcy52ZXJ0aWNlczsKICAgICAgY29uc3QgZmFjZXMgPSB0aGlzLmZhY2VzOwogICAgICBjb25zdCBub3JtYWxzID0gdGhpcy5mYWNlTm9ybWFsczsKICAgICAgY29uc3QgcG9pbnRJbnNpZGUgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmdldEF2ZXJhZ2VQb2ludExvY2FsKHBvaW50SW5zaWRlKTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5mYWNlcy5sZW5ndGg7IGkrKykgewogICAgICAgIGxldCBuID0gbm9ybWFsc1tpXTsKICAgICAgICBjb25zdCB2ID0gdmVydHNbZmFjZXNbaV1bMF1dOyAvLyBXZSBvbmx5IG5lZWQgb25lIHBvaW50IGluIHRoZSBmYWNlCiAgICAgICAgLy8gVGhpcyBkb3QgcHJvZHVjdCBkZXRlcm1pbmVzIHdoaWNoIHNpZGUgb2YgdGhlIGVkZ2UgdGhlIHBvaW50IGlzCgogICAgICAgIGNvbnN0IHZUb1AgPSBuZXcgVmVjMygpOwogICAgICAgIHAudnN1Yih2LCB2VG9QKTsKICAgICAgICBjb25zdCByMSA9IG4uZG90KHZUb1ApOwogICAgICAgIGNvbnN0IHZUb1BvaW50SW5zaWRlID0gbmV3IFZlYzMoKTsKICAgICAgICBwb2ludEluc2lkZS52c3ViKHYsIHZUb1BvaW50SW5zaWRlKTsKICAgICAgICBjb25zdCByMiA9IG4uZG90KHZUb1BvaW50SW5zaWRlKTsKCiAgICAgICAgaWYgKHIxIDwgMCAmJiByMiA+IDAgfHwgcjEgPiAwICYmIHIyIDwgMCkgewogICAgICAgICAgcmV0dXJuIGZhbHNlOyAvLyBFbmNvdW50ZXJlZCBzb21lIG90aGVyIHNpZ24uIEV4aXQuCiAgICAgICAgfQogICAgICB9IC8vIElmIHdlIGdvdCBoZXJlLCBhbGwgZG90IHByb2R1Y3RzIHdlcmUgb2YgdGhlIHNhbWUgc2lnbi4KCgogICAgICByZXR1cm4gLTE7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBtYXggYW5kIG1pbiBkb3QgcHJvZHVjdCBvZiBhIGNvbnZleCBodWxsIGF0IHBvc2l0aW9uIChwb3MscXVhdCkgcHJvamVjdGVkIG9udG8gYW4gYXhpcy4KICAgICAqIFJlc3VsdHMgYXJlIHNhdmVkIGluIHRoZSBhcnJheSBtYXhtaW4uCiAgICAgKiBAcGFyYW0gcmVzdWx0IHJlc3VsdFswXSBhbmQgcmVzdWx0WzFdIHdpbGwgYmUgc2V0IHRvIG1heGltdW0gYW5kIG1pbmltdW0sIHJlc3BlY3RpdmVseS4KICAgICAqLwoKCiAgICBzdGF0aWMgcHJvamVjdChzaGFwZSwgYXhpcywgcG9zLCBxdWF0LCByZXN1bHQpIHsKICAgICAgY29uc3QgbiA9IHNoYXBlLnZlcnRpY2VzLmxlbmd0aDsKICAgICAgY29uc3QgbG9jYWxBeGlzID0gcHJvamVjdF9sb2NhbEF4aXM7CiAgICAgIGxldCBtYXggPSAwOwogICAgICBsZXQgbWluID0gMDsKICAgICAgY29uc3QgbG9jYWxPcmlnaW4gPSBwcm9qZWN0X2xvY2FsT3JpZ2luOwogICAgICBjb25zdCB2cyA9IHNoYXBlLnZlcnRpY2VzOwogICAgICBsb2NhbE9yaWdpbi5zZXRaZXJvKCk7IC8vIFRyYW5zZm9ybSB0aGUgYXhpcyB0byBsb2NhbAoKICAgICAgVHJhbnNmb3JtLnZlY3RvclRvTG9jYWxGcmFtZShwb3MsIHF1YXQsIGF4aXMsIGxvY2FsQXhpcyk7CiAgICAgIFRyYW5zZm9ybS5wb2ludFRvTG9jYWxGcmFtZShwb3MsIHF1YXQsIGxvY2FsT3JpZ2luLCBsb2NhbE9yaWdpbik7CiAgICAgIGNvbnN0IGFkZCA9IGxvY2FsT3JpZ2luLmRvdChsb2NhbEF4aXMpOwogICAgICBtaW4gPSBtYXggPSB2c1swXS5kb3QobG9jYWxBeGlzKTsKCiAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgbjsgaSsrKSB7CiAgICAgICAgY29uc3QgdmFsID0gdnNbaV0uZG90KGxvY2FsQXhpcyk7CgogICAgICAgIGlmICh2YWwgPiBtYXgpIHsKICAgICAgICAgIG1heCA9IHZhbDsKICAgICAgICB9CgogICAgICAgIGlmICh2YWwgPCBtaW4pIHsKICAgICAgICAgIG1pbiA9IHZhbDsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIG1pbiAtPSBhZGQ7CiAgICAgIG1heCAtPSBhZGQ7CgogICAgICBpZiAobWluID4gbWF4KSB7CiAgICAgICAgLy8gSW5jb25zaXN0ZW50IC0gc3dhcAogICAgICAgIGNvbnN0IHRlbXAgPSBtaW47CiAgICAgICAgbWluID0gbWF4OwogICAgICAgIG1heCA9IHRlbXA7CiAgICAgIH0gLy8gT3V0cHV0CgoKICAgICAgcmVzdWx0WzBdID0gbWF4OwogICAgICByZXN1bHRbMV0gPSBtaW47CiAgICB9CgogIH0KCiAgY29uc3QgbWF4bWluQSA9IFtdOwogIGNvbnN0IG1heG1pbkIgPSBbXTsKICBjb25zdCBwcm9qZWN0X2xvY2FsQXhpcyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcHJvamVjdF9sb2NhbE9yaWdpbiA9IG5ldyBWZWMzKCk7CiAgLyoqCiAgICogQSAzZCBib3ggc2hhcGUuCiAgICogQGV4YW1wbGUKICAgKiAgICAgY29uc3Qgc2l6ZSA9IDEKICAgKiAgICAgY29uc3QgaGFsZkV4dGVudHMgPSBuZXcgQ0FOTk9OLlZlYzMoc2l6ZSwgc2l6ZSwgc2l6ZSkKICAgKiAgICAgY29uc3QgYm94U2hhcGUgPSBuZXcgQ0FOTk9OLkJveChoYWxmRXh0ZW50cykKICAgKiAgICAgY29uc3QgYm94Qm9keSA9IG5ldyBDQU5OT04uQm9keSh7IG1hc3M6IDEsIHNoYXBlOiBib3hTaGFwZSB9KQogICAqICAgICB3b3JsZC5hZGRCb2R5KGJveEJvZHkpCiAgICovCgogIGNsYXNzIEJveCBleHRlbmRzIFNoYXBlIHsKICAgIC8qKgogICAgICogVGhlIGhhbGYgZXh0ZW50cyBvZiB0aGUgYm94LgogICAgICovCgogICAgLyoqCiAgICAgKiBVc2VkIGJ5IHRoZSBjb250YWN0IGdlbmVyYXRvciB0byBtYWtlIGNvbnRhY3RzIHdpdGggb3RoZXIgY29udmV4IHBvbHloZWRyYSBmb3IgZXhhbXBsZS4KICAgICAqLwogICAgY29uc3RydWN0b3IoaGFsZkV4dGVudHMpIHsKICAgICAgc3VwZXIoewogICAgICAgIHR5cGU6IFNoYXBlLnR5cGVzLkJPWAogICAgICB9KTsKICAgICAgdGhpcy5oYWxmRXh0ZW50cyA9IHZvaWQgMDsKICAgICAgdGhpcy5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24gPSB2b2lkIDA7CiAgICAgIHRoaXMuaGFsZkV4dGVudHMgPSBoYWxmRXh0ZW50czsKICAgICAgdGhpcy5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24gPSBudWxsOwogICAgICB0aGlzLnVwZGF0ZUNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbigpOwogICAgICB0aGlzLnVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCk7CiAgICB9CiAgICAvKioKICAgICAqIFVwZGF0ZXMgdGhlIGxvY2FsIGNvbnZleCBwb2x5aGVkcm9uIHJlcHJlc2VudGF0aW9uIHVzZWQgZm9yIHNvbWUgY29sbGlzaW9ucy4KICAgICAqLwoKCiAgICB1cGRhdGVDb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24oKSB7CiAgICAgIGNvbnN0IHN4ID0gdGhpcy5oYWxmRXh0ZW50cy54OwogICAgICBjb25zdCBzeSA9IHRoaXMuaGFsZkV4dGVudHMueTsKICAgICAgY29uc3Qgc3ogPSB0aGlzLmhhbGZFeHRlbnRzLno7CiAgICAgIGNvbnN0IFYgPSBWZWMzOwogICAgICBjb25zdCB2ZXJ0aWNlcyA9IFtuZXcgVigtc3gsIC1zeSwgLXN6KSwgbmV3IFYoc3gsIC1zeSwgLXN6KSwgbmV3IFYoc3gsIHN5LCAtc3opLCBuZXcgVigtc3gsIHN5LCAtc3opLCBuZXcgVigtc3gsIC1zeSwgc3opLCBuZXcgVihzeCwgLXN5LCBzeiksIG5ldyBWKHN4LCBzeSwgc3opLCBuZXcgVigtc3gsIHN5LCBzeildOwogICAgICBjb25zdCBmYWNlcyA9IFtbMywgMiwgMSwgMF0sIC8vIC16CiAgICAgIFs0LCA1LCA2LCA3XSwgLy8gK3oKICAgICAgWzUsIDQsIDAsIDFdLCAvLyAteQogICAgICBbMiwgMywgNywgNl0sIC8vICt5CiAgICAgIFswLCA0LCA3LCAzXSwgLy8gLXgKICAgICAgWzEsIDIsIDYsIDVdIC8vICt4CiAgICAgIF07CiAgICAgIGNvbnN0IGF4ZXMgPSBbbmV3IFYoMCwgMCwgMSksIG5ldyBWKDAsIDEsIDApLCBuZXcgVigxLCAwLCAwKV07CiAgICAgIGNvbnN0IGggPSBuZXcgQ29udmV4UG9seWhlZHJvbih7CiAgICAgICAgdmVydGljZXMsCiAgICAgICAgZmFjZXMsCiAgICAgICAgYXhlcwogICAgICB9KTsKICAgICAgdGhpcy5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24gPSBoOwogICAgICBoLm1hdGVyaWFsID0gdGhpcy5tYXRlcmlhbDsKICAgIH0KICAgIC8qKgogICAgICogQ2FsY3VsYXRlIHRoZSBpbmVydGlhIG9mIHRoZSBib3guCiAgICAgKi8KCgogICAgY2FsY3VsYXRlTG9jYWxJbmVydGlhKG1hc3MsIHRhcmdldCA9IG5ldyBWZWMzKCkpIHsKICAgICAgQm94LmNhbGN1bGF0ZUluZXJ0aWEodGhpcy5oYWxmRXh0ZW50cywgbWFzcywgdGFyZ2V0KTsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KCiAgICBzdGF0aWMgY2FsY3VsYXRlSW5lcnRpYShoYWxmRXh0ZW50cywgbWFzcywgdGFyZ2V0KSB7CiAgICAgIGNvbnN0IGUgPSBoYWxmRXh0ZW50czsKICAgICAgdGFyZ2V0LnggPSAxLjAgLyAxMi4wICogbWFzcyAqICgyICogZS55ICogMiAqIGUueSArIDIgKiBlLnogKiAyICogZS56KTsKICAgICAgdGFyZ2V0LnkgPSAxLjAgLyAxMi4wICogbWFzcyAqICgyICogZS54ICogMiAqIGUueCArIDIgKiBlLnogKiAyICogZS56KTsKICAgICAgdGFyZ2V0LnogPSAxLjAgLyAxMi4wICogbWFzcyAqICgyICogZS55ICogMiAqIGUueSArIDIgKiBlLnggKiAyICogZS54KTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSBib3ggNiBzaWRlIG5vcm1hbHMKICAgICAqIEBwYXJhbSBzaXhUYXJnZXRWZWN0b3JzIEFuIGFycmF5IG9mIDYgdmVjdG9ycywgdG8gc3RvcmUgdGhlIHJlc3VsdGluZyBzaWRlIG5vcm1hbHMgaW4uCiAgICAgKiBAcGFyYW0gcXVhdCBPcmllbnRhdGlvbiB0byBhcHBseSB0byB0aGUgbm9ybWFsIHZlY3RvcnMuIElmIG5vdCBwcm92aWRlZCwgdGhlIHZlY3RvcnMgd2lsbCBiZSBpbiByZXNwZWN0IHRvIHRoZSBsb2NhbCBmcmFtZS4KICAgICAqLwoKCiAgICBnZXRTaWRlTm9ybWFscyhzaXhUYXJnZXRWZWN0b3JzLCBxdWF0KSB7CiAgICAgIGNvbnN0IHNpZGVzID0gc2l4VGFyZ2V0VmVjdG9yczsKICAgICAgY29uc3QgZXggPSB0aGlzLmhhbGZFeHRlbnRzOwogICAgICBzaWRlc1swXS5zZXQoZXgueCwgMCwgMCk7CiAgICAgIHNpZGVzWzFdLnNldCgwLCBleC55LCAwKTsKICAgICAgc2lkZXNbMl0uc2V0KDAsIDAsIGV4LnopOwogICAgICBzaWRlc1szXS5zZXQoLWV4LngsIDAsIDApOwogICAgICBzaWRlc1s0XS5zZXQoMCwgLWV4LnksIDApOwogICAgICBzaWRlc1s1XS5zZXQoMCwgMCwgLWV4LnopOwoKICAgICAgaWYgKHF1YXQgIT09IHVuZGVmaW5lZCkgewogICAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBzaWRlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgcXVhdC52bXVsdChzaWRlc1tpXSwgc2lkZXNbaV0pOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIHNpZGVzOwogICAgfQogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSB2b2x1bWUgb2YgdGhlIGJveC4KICAgICAqLwoKCiAgICB2b2x1bWUoKSB7CiAgICAgIHJldHVybiA4LjAgKiB0aGlzLmhhbGZFeHRlbnRzLnggKiB0aGlzLmhhbGZFeHRlbnRzLnkgKiB0aGlzLmhhbGZFeHRlbnRzLno7CiAgICB9CiAgICAvKioKICAgICAqIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzCiAgICAgKi8KCgogICAgdXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKSB7CiAgICAgIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgPSB0aGlzLmhhbGZFeHRlbnRzLmxlbmd0aCgpOwogICAgfQogICAgLyoqCiAgICAgKiBmb3JFYWNoV29ybGRDb3JuZXIKICAgICAqLwoKCiAgICBmb3JFYWNoV29ybGRDb3JuZXIocG9zLCBxdWF0LCBjYWxsYmFjaykgewogICAgICBjb25zdCBlID0gdGhpcy5oYWxmRXh0ZW50czsKICAgICAgY29uc3QgY29ybmVycyA9IFtbZS54LCBlLnksIGUuel0sIFstZS54LCBlLnksIGUuel0sIFstZS54LCAtZS55LCBlLnpdLCBbLWUueCwgLWUueSwgLWUuel0sIFtlLngsIC1lLnksIC1lLnpdLCBbZS54LCBlLnksIC1lLnpdLCBbLWUueCwgZS55LCAtZS56XSwgW2UueCwgLWUueSwgZS56XV07CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvcm5lcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICB3b3JsZENvcm5lclRlbXBQb3Muc2V0KGNvcm5lcnNbaV1bMF0sIGNvcm5lcnNbaV1bMV0sIGNvcm5lcnNbaV1bMl0pOwogICAgICAgIHF1YXQudm11bHQod29ybGRDb3JuZXJUZW1wUG9zLCB3b3JsZENvcm5lclRlbXBQb3MpOwogICAgICAgIHBvcy52YWRkKHdvcmxkQ29ybmVyVGVtcFBvcywgd29ybGRDb3JuZXJUZW1wUG9zKTsKICAgICAgICBjYWxsYmFjayh3b3JsZENvcm5lclRlbXBQb3MueCwgd29ybGRDb3JuZXJUZW1wUG9zLnksIHdvcmxkQ29ybmVyVGVtcFBvcy56KTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBjYWxjdWxhdGVXb3JsZEFBQkIKICAgICAqLwoKCiAgICBjYWxjdWxhdGVXb3JsZEFBQkIocG9zLCBxdWF0LCBtaW4sIG1heCkgewogICAgICBjb25zdCBlID0gdGhpcy5oYWxmRXh0ZW50czsKICAgICAgd29ybGRDb3JuZXJzVGVtcFswXS5zZXQoZS54LCBlLnksIGUueik7CiAgICAgIHdvcmxkQ29ybmVyc1RlbXBbMV0uc2V0KC1lLngsIGUueSwgZS56KTsKICAgICAgd29ybGRDb3JuZXJzVGVtcFsyXS5zZXQoLWUueCwgLWUueSwgZS56KTsKICAgICAgd29ybGRDb3JuZXJzVGVtcFszXS5zZXQoLWUueCwgLWUueSwgLWUueik7CiAgICAgIHdvcmxkQ29ybmVyc1RlbXBbNF0uc2V0KGUueCwgLWUueSwgLWUueik7CiAgICAgIHdvcmxkQ29ybmVyc1RlbXBbNV0uc2V0KGUueCwgZS55LCAtZS56KTsKICAgICAgd29ybGRDb3JuZXJzVGVtcFs2XS5zZXQoLWUueCwgZS55LCAtZS56KTsKICAgICAgd29ybGRDb3JuZXJzVGVtcFs3XS5zZXQoZS54LCAtZS55LCBlLnopOwogICAgICBjb25zdCB3YyA9IHdvcmxkQ29ybmVyc1RlbXBbMF07CiAgICAgIHF1YXQudm11bHQod2MsIHdjKTsKICAgICAgcG9zLnZhZGQod2MsIHdjKTsKICAgICAgbWF4LmNvcHkod2MpOwogICAgICBtaW4uY29weSh3Yyk7CgogICAgICBmb3IgKGxldCBpID0gMTsgaSA8IDg7IGkrKykgewogICAgICAgIGNvbnN0IHdjID0gd29ybGRDb3JuZXJzVGVtcFtpXTsKICAgICAgICBxdWF0LnZtdWx0KHdjLCB3Yyk7CiAgICAgICAgcG9zLnZhZGQod2MsIHdjKTsKICAgICAgICBjb25zdCB4ID0gd2MueDsKICAgICAgICBjb25zdCB5ID0gd2MueTsKICAgICAgICBjb25zdCB6ID0gd2MuejsKCiAgICAgICAgaWYgKHggPiBtYXgueCkgewogICAgICAgICAgbWF4LnggPSB4OwogICAgICAgIH0KCiAgICAgICAgaWYgKHkgPiBtYXgueSkgewogICAgICAgICAgbWF4LnkgPSB5OwogICAgICAgIH0KCiAgICAgICAgaWYgKHogPiBtYXgueikgewogICAgICAgICAgbWF4LnogPSB6OwogICAgICAgIH0KCiAgICAgICAgaWYgKHggPCBtaW4ueCkgewogICAgICAgICAgbWluLnggPSB4OwogICAgICAgIH0KCiAgICAgICAgaWYgKHkgPCBtaW4ueSkgewogICAgICAgICAgbWluLnkgPSB5OwogICAgICAgIH0KCiAgICAgICAgaWYgKHogPCBtaW4ueikgewogICAgICAgICAgbWluLnogPSB6OwogICAgICAgIH0KICAgICAgfSAvLyBHZXQgZWFjaCBheGlzIG1heAogICAgICAvLyBtaW4uc2V0KEluZmluaXR5LEluZmluaXR5LEluZmluaXR5KTsKICAgICAgLy8gbWF4LnNldCgtSW5maW5pdHksLUluZmluaXR5LC1JbmZpbml0eSk7CiAgICAgIC8vIHRoaXMuZm9yRWFjaFdvcmxkQ29ybmVyKHBvcyxxdWF0LGZ1bmN0aW9uKHgseSx6KXsKICAgICAgLy8gICAgIGlmKHggPiBtYXgueCl7CiAgICAgIC8vICAgICAgICAgbWF4LnggPSB4OwogICAgICAvLyAgICAgfQogICAgICAvLyAgICAgaWYoeSA+IG1heC55KXsKICAgICAgLy8gICAgICAgICBtYXgueSA9IHk7CiAgICAgIC8vICAgICB9CiAgICAgIC8vICAgICBpZih6ID4gbWF4LnopewogICAgICAvLyAgICAgICAgIG1heC56ID0gejsKICAgICAgLy8gICAgIH0KICAgICAgLy8gICAgIGlmKHggPCBtaW4ueCl7CiAgICAgIC8vICAgICAgICAgbWluLnggPSB4OwogICAgICAvLyAgICAgfQogICAgICAvLyAgICAgaWYoeSA8IG1pbi55KXsKICAgICAgLy8gICAgICAgICBtaW4ueSA9IHk7CiAgICAgIC8vICAgICB9CiAgICAgIC8vICAgICBpZih6IDwgbWluLnopewogICAgICAvLyAgICAgICAgIG1pbi56ID0gejsKICAgICAgLy8gICAgIH0KICAgICAgLy8gfSk7CgogICAgfQoKICB9CgogIGNvbnN0IHdvcmxkQ29ybmVyVGVtcFBvcyA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgd29ybGRDb3JuZXJzVGVtcCA9IFtuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpXTsKICAvKioKICAgKiBCT0RZX1RZUEVTCiAgICovCgogIGNvbnN0IEJPRFlfVFlQRVMgPSB7CiAgICAvKiogRFlOQU1JQyAqLwogICAgRFlOQU1JQzogMSwKCiAgICAvKiogU1RBVElDICovCiAgICBTVEFUSUM6IDIsCgogICAgLyoqIEtJTkVNQVRJQyAqLwogICAgS0lORU1BVElDOiA0CiAgfTsKICAvKioKICAgKiBCb2R5VHlwZQogICAqLwoKICAvKioKICAgKiBCT0RZX1NMRUVQX1NUQVRFUwogICAqLwoKICBjb25zdCBCT0RZX1NMRUVQX1NUQVRFUyA9IHsKICAgIC8qKiBBV0FLRSAqLwogICAgQVdBS0U6IDAsCgogICAgLyoqIFNMRUVQWSAqLwogICAgU0xFRVBZOiAxLAoKICAgIC8qKiBTTEVFUElORyAqLwogICAgU0xFRVBJTkc6IDIKICB9OwogIC8qKgogICAqIEJvZHlTbGVlcFN0YXRlCiAgICovCgogIC8qKgogICAqIEJhc2UgY2xhc3MgZm9yIGFsbCBib2R5IHR5cGVzLgogICAqIEBleGFtcGxlCiAgICogICAgIGNvbnN0IHNoYXBlID0gbmV3IENBTk5PTi5TcGhlcmUoMSkKICAgKiAgICAgY29uc3QgYm9keSA9IG5ldyBDQU5OT04uQm9keSh7CiAgICogICAgICAgbWFzczogMSwKICAgKiAgICAgICBzaGFwZSwKICAgKiAgICAgfSkKICAgKiAgICAgd29ybGQuYWRkQm9keShib2R5KQogICAqLwoKICBjbGFzcyBCb2R5IGV4dGVuZHMgRXZlbnRUYXJnZXQgewogICAgLyoqCiAgICAgKiBEaXNwYXRjaGVkIGFmdGVyIHR3byBib2RpZXMgY29sbGlkZS4gVGhpcyBldmVudCBpcyBkaXNwYXRjaGVkIG9uIGVhY2gKICAgICAqIG9mIHRoZSB0d28gYm9kaWVzIGludm9sdmVkIGluIHRoZSBjb2xsaXNpb24uCiAgICAgKiBAZXZlbnQgY29sbGlkZQogICAgICogQHBhcmFtIGJvZHkgVGhlIGJvZHkgdGhhdCB3YXMgaW52b2x2ZWQgaW4gdGhlIGNvbGxpc2lvbi4KICAgICAqIEBwYXJhbSBjb250YWN0IFRoZSBkZXRhaWxzIG9mIHRoZSBjb2xsaXNpb24uCiAgICAgKi8KCiAgICAvKioKICAgICAqIEEgZHluYW1pYyBib2R5IGlzIGZ1bGx5IHNpbXVsYXRlZC4gQ2FuIGJlIG1vdmVkIG1hbnVhbGx5IGJ5IHRoZSB1c2VyLCBidXQgbm9ybWFsbHkgdGhleSBtb3ZlIGFjY29yZGluZyB0byBmb3JjZXMuIEEgZHluYW1pYyBib2R5IGNhbiBjb2xsaWRlIHdpdGggYWxsIGJvZHkgdHlwZXMuIEEgZHluYW1pYyBib2R5IGFsd2F5cyBoYXMgZmluaXRlLCBub24temVybyBtYXNzLgogICAgICovCgogICAgLyoqCiAgICAgKiBBIHN0YXRpYyBib2R5IGRvZXMgbm90IG1vdmUgZHVyaW5nIHNpbXVsYXRpb24gYW5kIGJlaGF2ZXMgYXMgaWYgaXQgaGFzIGluZmluaXRlIG1hc3MuIFN0YXRpYyBib2RpZXMgY2FuIGJlIG1vdmVkIG1hbnVhbGx5IGJ5IHNldHRpbmcgdGhlIHBvc2l0aW9uIG9mIHRoZSBib2R5LiBUaGUgdmVsb2NpdHkgb2YgYSBzdGF0aWMgYm9keSBpcyBhbHdheXMgemVyby4gU3RhdGljIGJvZGllcyBkbyBub3QgY29sbGlkZSB3aXRoIG90aGVyIHN0YXRpYyBvciBraW5lbWF0aWMgYm9kaWVzLgogICAgICovCgogICAgLyoqCiAgICAgKiBBIGtpbmVtYXRpYyBib2R5IG1vdmVzIHVuZGVyIHNpbXVsYXRpb24gYWNjb3JkaW5nIHRvIGl0cyB2ZWxvY2l0eS4gVGhleSBkbyBub3QgcmVzcG9uZCB0byBmb3JjZXMuIFRoZXkgY2FuIGJlIG1vdmVkIG1hbnVhbGx5LCBidXQgbm9ybWFsbHkgYSBraW5lbWF0aWMgYm9keSBpcyBtb3ZlZCBieSBzZXR0aW5nIGl0cyB2ZWxvY2l0eS4gQSBraW5lbWF0aWMgYm9keSBiZWhhdmVzIGFzIGlmIGl0IGhhcyBpbmZpbml0ZSBtYXNzLiBLaW5lbWF0aWMgYm9kaWVzIGRvIG5vdCBjb2xsaWRlIHdpdGggb3RoZXIgc3RhdGljIG9yIGtpbmVtYXRpYyBib2RpZXMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIEFXQUtFCiAgICAgKi8KCiAgICAvKioKICAgICAqIFNMRUVQWQogICAgICovCgogICAgLyoqCiAgICAgKiBTTEVFUElORwogICAgICovCgogICAgLyoqCiAgICAgKiBEaXNwYXRjaGVkIGFmdGVyIGEgc2xlZXBpbmcgYm9keSBoYXMgd29rZW4gdXAuCiAgICAgKiBAZXZlbnQgd2FrZXVwCiAgICAgKi8KCiAgICAvKioKICAgICAqIERpc3BhdGNoZWQgYWZ0ZXIgYSBib2R5IGhhcyBnb25lIGluIHRvIHRoZSBzbGVlcHkgc3RhdGUuCiAgICAgKiBAZXZlbnQgc2xlZXB5CiAgICAgKi8KCiAgICAvKioKICAgICAqIERpc3BhdGNoZWQgYWZ0ZXIgYSBib2R5IGhhcyBmYWxsZW4gYXNsZWVwLgogICAgICogQGV2ZW50IHNsZWVwCiAgICAgKi8KCiAgICAvKioKICAgICAqIElkZW50aWZpZXIgb2YgdGhlIGJvZHkuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFBvc2l0aW9uIG9mIGJvZHkgaW4gV29ybGQuYm9kaWVzLiBVcGRhdGVkIGJ5IFdvcmxkIGFuZCB1c2VkIGluIEFycmF5Q29sbGlzaW9uTWF0cml4LgogICAgICovCgogICAgLyoqCiAgICAgKiBSZWZlcmVuY2UgdG8gdGhlIHdvcmxkIHRoZSBib2R5IGlzIGxpdmluZyBpbi4KICAgICAqLwoKICAgIC8qKgogICAgICogQ2FsbGJhY2sgZnVuY3Rpb24gdGhhdCBpcyB1c2VkIEJFRk9SRSBzdGVwcGluZyB0aGUgc3lzdGVtLiBVc2UgaXQgdG8gYXBwbHkgZm9yY2VzLCBmb3IgZXhhbXBsZS4gSW5zaWRlIHRoZSBmdW5jdGlvbiwgInRoaXMiIHdpbGwgcmVmZXIgdG8gdGhpcyBCb2R5IG9iamVjdC4gRGVwcmVjYXRlZCAtIHVzZSBXb3JsZCBldmVudHMgaW5zdGVhZC4KICAgICAqIEBkZXByZWNhdGVkIFVzZSBXb3JsZCBldmVudHMgaW5zdGVhZAogICAgICovCgogICAgLyoqCiAgICAgKiBDYWxsYmFjayBmdW5jdGlvbiB0aGF0IGlzIHVzZWQgQUZURVIgc3RlcHBpbmcgdGhlIHN5c3RlbS4gSW5zaWRlIHRoZSBmdW5jdGlvbiwgInRoaXMiIHdpbGwgcmVmZXIgdG8gdGhpcyBCb2R5IG9iamVjdC4gRGVwcmVjYXRlZCAtIHVzZSBXb3JsZCBldmVudHMgaW5zdGVhZC4KICAgICAqIEBkZXByZWNhdGVkIFVzZSBXb3JsZCBldmVudHMgaW5zdGVhZAogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgY29sbGlzaW9uIGdyb3VwIHRoZSBib2R5IGJlbG9uZ3MgdG8uCiAgICAgKiBAZGVmYXVsdCAxCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBjb2xsaXNpb24gZ3JvdXAgdGhlIGJvZHkgY2FuIGNvbGxpZGUgd2l0aC4KICAgICAqIEBkZWZhdWx0IC0xCiAgICAgKi8KCiAgICAvKioKICAgICAqIFdoZXRoZXIgdG8gcHJvZHVjZSBjb250YWN0IGZvcmNlcyB3aGVuIGluIGNvbnRhY3Qgd2l0aCBvdGhlciBib2RpZXMuIE5vdGUgdGhhdCBjb250YWN0cyB3aWxsIGJlIGdlbmVyYXRlZCwgYnV0IHRoZXkgd2lsbCBiZSBkaXNhYmxlZCAtIGkuZS4gImNvbGxpZGUiIGV2ZW50cyB3aWxsIGJlIHJhaXNlZCwgYnV0IGZvcmNlcyB3aWxsIG5vdCBiZSBhbHRlcmVkLgogICAgICovCgogICAgLyoqCiAgICAgKiBXb3JsZCBzcGFjZSBwb3NpdGlvbiBvZiB0aGUgYm9keS4KICAgICAqLwoKICAgIC8qKgogICAgICogSW50ZXJwb2xhdGVkIHBvc2l0aW9uIG9mIHRoZSBib2R5LgogICAgICovCgogICAgLyoqCiAgICAgKiBJbml0aWFsIHBvc2l0aW9uIG9mIHRoZSBib2R5LgogICAgICovCgogICAgLyoqCiAgICAgKiBXb3JsZCBzcGFjZSB2ZWxvY2l0eSBvZiB0aGUgYm9keS4KICAgICAqLwoKICAgIC8qKgogICAgICogSW5pdGlhbCB2ZWxvY2l0eSBvZiB0aGUgYm9keS4KICAgICAqLwoKICAgIC8qKgogICAgICogTGluZWFyIGZvcmNlIG9uIHRoZSBib2R5IGluIHdvcmxkIHNwYWNlLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgbWFzcyBvZiB0aGUgYm9keS4KICAgICAqIEBkZWZhdWx0IDAKICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIHBoeXNpY3MgbWF0ZXJpYWwgb2YgdGhlIGJvZHkuIEl0IGRlZmluZXMgdGhlIGJvZHkgaW50ZXJhY3Rpb24gd2l0aCBvdGhlciBib2RpZXMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIEhvdyBtdWNoIHRvIGRhbXAgdGhlIGJvZHkgdmVsb2NpdHkgZWFjaCBzdGVwLiBJdCBjYW4gZ28gZnJvbSAwIHRvIDEuCiAgICAgKiBAZGVmYXVsdCAwLjAxCiAgICAgKi8KCiAgICAvKioKICAgICAqIE9uZSBvZjogYEJvZHkuRFlOQU1JQ2AsIGBCb2R5LlNUQVRJQ2AgYW5kIGBCb2R5LktJTkVNQVRJQ2AuCiAgICAgKi8KCiAgICAvKioKICAgICAqIElmIHRydWUsIHRoZSBib2R5IHdpbGwgYXV0b21hdGljYWxseSBmYWxsIHRvIHNsZWVwLgogICAgICogQGRlZmF1bHQgdHJ1ZQogICAgICovCgogICAgLyoqCiAgICAgKiBDdXJyZW50IHNsZWVwIHN0YXRlLgogICAgICovCgogICAgLyoqCiAgICAgKiBJZiB0aGUgc3BlZWQgKHRoZSBub3JtIG9mIHRoZSB2ZWxvY2l0eSkgaXMgc21hbGxlciB0aGFuIHRoaXMgdmFsdWUsIHRoZSBib2R5IGlzIGNvbnNpZGVyZWQgc2xlZXB5LgogICAgICogQGRlZmF1bHQgMC4xCiAgICAgKi8KCiAgICAvKioKICAgICAqIElmIHRoZSBib2R5IGhhcyBiZWVuIHNsZWVweSBmb3IgdGhpcyBzbGVlcFRpbWVMaW1pdCBzZWNvbmRzLCBpdCBpcyBjb25zaWRlcmVkIHNsZWVwaW5nLgogICAgICogQGRlZmF1bHQgMQogICAgICovCgogICAgLyoqCiAgICAgKiBXb3JsZCBzcGFjZSByb3RhdGlvbmFsIGZvcmNlIG9uIHRoZSBib2R5LCBhcm91bmQgY2VudGVyIG9mIG1hc3MuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFdvcmxkIHNwYWNlIG9yaWVudGF0aW9uIG9mIHRoZSBib2R5LgogICAgICovCgogICAgLyoqCiAgICAgKiBJbml0aWFsIHF1YXRlcm5pb24gb2YgdGhlIGJvZHkuCiAgICAgKi8KCiAgICAvKioKICAgICAqIEludGVycG9sYXRlZCBvcmllbnRhdGlvbiBvZiB0aGUgYm9keS4KICAgICAqLwoKICAgIC8qKgogICAgICogQW5ndWxhciB2ZWxvY2l0eSBvZiB0aGUgYm9keSwgaW4gd29ybGQgc3BhY2UuIFRoaW5rIG9mIHRoZSBhbmd1bGFyIHZlbG9jaXR5IGFzIGEgdmVjdG9yLCB3aGljaCB0aGUgYm9keSByb3RhdGVzIGFyb3VuZC4gVGhlIGxlbmd0aCBvZiB0aGlzIHZlY3RvciBkZXRlcm1pbmVzIGhvdyBmYXN0IChpbiByYWRpYW5zIHBlciBzZWNvbmQpIHRoZSBib2R5IHJvdGF0ZXMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIEluaXRpYWwgYW5ndWxhciB2ZWxvY2l0eSBvZiB0aGUgYm9keS4KICAgICAqLwoKICAgIC8qKgogICAgICogTGlzdCBvZiBTaGFwZXMgdGhhdCBoYXZlIGJlZW4gYWRkZWQgdG8gdGhlIGJvZHkuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFBvc2l0aW9uIG9mIGVhY2ggU2hhcGUgaW4gdGhlIGJvZHksIGdpdmVuIGluIGxvY2FsIEJvZHkgc3BhY2UuCiAgICAgKi8KCiAgICAvKioKICAgICAqIE9yaWVudGF0aW9uIG9mIGVhY2ggU2hhcGUsIGdpdmVuIGluIGxvY2FsIEJvZHkgc3BhY2UuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBpbmVydGlhIG9mIHRoZSBib2R5LgogICAgICovCgogICAgLyoqCiAgICAgKiBTZXQgdG8gdHJ1ZSBpZiB5b3UgZG9uJ3Qgd2FudCB0aGUgYm9keSB0byByb3RhdGUuIE1ha2Ugc3VyZSB0byBydW4gLnVwZGF0ZU1hc3NQcm9wZXJ0aWVzKCkgaWYgeW91IGNoYW5nZSB0aGlzIGFmdGVyIHRoZSBib2R5IGNyZWF0aW9uLgogICAgICogQGRlZmF1bHQgZmFsc2UKICAgICAqLwoKICAgIC8qKgogICAgICogSG93IG11Y2ggdG8gZGFtcCB0aGUgYm9keSBhbmd1bGFyIHZlbG9jaXR5IGVhY2ggc3RlcC4gSXQgY2FuIGdvIGZyb20gMCB0byAxLgogICAgICogQGRlZmF1bHQgMC4wMQogICAgICovCgogICAgLyoqCiAgICAgKiBVc2UgdGhpcyBwcm9wZXJ0eSB0byBsaW1pdCB0aGUgbW90aW9uIGFsb25nIGFueSB3b3JsZCBheGlzLiAoMSwxLDEpIHdpbGwgYWxsb3cgbW90aW9uIGFsb25nIGFsbCBheGVzIHdoaWxlICgwLDAsMCkgYWxsb3dzIG5vbmUuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFVzZSB0aGlzIHByb3BlcnR5IHRvIGxpbWl0IHRoZSByb3RhdGlvbmFsIG1vdGlvbiBhbG9uZyBhbnkgd29ybGQgYXhpcy4gKDEsMSwxKSB3aWxsIGFsbG93IHJvdGF0aW9uIGFsb25nIGFsbCBheGVzIHdoaWxlICgwLDAsMCkgYWxsb3dzIG5vbmUuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFdvcmxkIHNwYWNlIGJvdW5kaW5nIGJveCBvZiB0aGUgYm9keSBhbmQgaXRzIHNoYXBlcy4KICAgICAqLwoKICAgIC8qKgogICAgICogSW5kaWNhdGVzIGlmIHRoZSBBQUJCIG5lZWRzIHRvIGJlIHVwZGF0ZWQgYmVmb3JlIHVzZS4KICAgICAqLwoKICAgIC8qKgogICAgICogVG90YWwgYm91bmRpbmcgcmFkaXVzIG9mIHRoZSBCb2R5IGluY2x1ZGluZyBpdHMgc2hhcGVzLCByZWxhdGl2ZSB0byBib2R5LnBvc2l0aW9uLgogICAgICovCgogICAgLyoqCiAgICAgKiBXaGVuIHRydWUgdGhlIGJvZHkgYmVoYXZlcyBsaWtlIGEgdHJpZ2dlci4gSXQgZG9lcyBub3QgY29sbGlkZQogICAgICogd2l0aCBvdGhlciBib2RpZXMgYnV0IGNvbGxpc2lvbiBldmVudHMgYXJlIHN0aWxsIHRyaWdnZXJlZC4KICAgICAqIEBkZWZhdWx0IGZhbHNlCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkgewogICAgICBzdXBlcigpOwogICAgICB0aGlzLmlkID0gdm9pZCAwOwogICAgICB0aGlzLmluZGV4ID0gdm9pZCAwOwogICAgICB0aGlzLndvcmxkID0gdm9pZCAwOwogICAgICB0aGlzLnByZVN0ZXAgPSB2b2lkIDA7CiAgICAgIHRoaXMucG9zdFN0ZXAgPSB2b2lkIDA7CiAgICAgIHRoaXMudmxhbWJkYSA9IHZvaWQgMDsKICAgICAgdGhpcy5jb2xsaXNpb25GaWx0ZXJHcm91cCA9IHZvaWQgMDsKICAgICAgdGhpcy5jb2xsaXNpb25GaWx0ZXJNYXNrID0gdm9pZCAwOwogICAgICB0aGlzLmNvbGxpc2lvblJlc3BvbnNlID0gdm9pZCAwOwogICAgICB0aGlzLnBvc2l0aW9uID0gdm9pZCAwOwogICAgICB0aGlzLnByZXZpb3VzUG9zaXRpb24gPSB2b2lkIDA7CiAgICAgIHRoaXMuaW50ZXJwb2xhdGVkUG9zaXRpb24gPSB2b2lkIDA7CiAgICAgIHRoaXMuaW5pdFBvc2l0aW9uID0gdm9pZCAwOwogICAgICB0aGlzLnZlbG9jaXR5ID0gdm9pZCAwOwogICAgICB0aGlzLmluaXRWZWxvY2l0eSA9IHZvaWQgMDsKICAgICAgdGhpcy5mb3JjZSA9IHZvaWQgMDsKICAgICAgdGhpcy5tYXNzID0gdm9pZCAwOwogICAgICB0aGlzLmludk1hc3MgPSB2b2lkIDA7CiAgICAgIHRoaXMubWF0ZXJpYWwgPSB2b2lkIDA7CiAgICAgIHRoaXMubGluZWFyRGFtcGluZyA9IHZvaWQgMDsKICAgICAgdGhpcy50eXBlID0gdm9pZCAwOwogICAgICB0aGlzLmFsbG93U2xlZXAgPSB2b2lkIDA7CiAgICAgIHRoaXMuc2xlZXBTdGF0ZSA9IHZvaWQgMDsKICAgICAgdGhpcy5zbGVlcFNwZWVkTGltaXQgPSB2b2lkIDA7CiAgICAgIHRoaXMuc2xlZXBUaW1lTGltaXQgPSB2b2lkIDA7CiAgICAgIHRoaXMudGltZUxhc3RTbGVlcHkgPSB2b2lkIDA7CiAgICAgIHRoaXMud2FrZVVwQWZ0ZXJOYXJyb3dwaGFzZSA9IHZvaWQgMDsKICAgICAgdGhpcy50b3JxdWUgPSB2b2lkIDA7CiAgICAgIHRoaXMucXVhdGVybmlvbiA9IHZvaWQgMDsKICAgICAgdGhpcy5pbml0UXVhdGVybmlvbiA9IHZvaWQgMDsKICAgICAgdGhpcy5wcmV2aW91c1F1YXRlcm5pb24gPSB2b2lkIDA7CiAgICAgIHRoaXMuaW50ZXJwb2xhdGVkUXVhdGVybmlvbiA9IHZvaWQgMDsKICAgICAgdGhpcy5hbmd1bGFyVmVsb2NpdHkgPSB2b2lkIDA7CiAgICAgIHRoaXMuaW5pdEFuZ3VsYXJWZWxvY2l0eSA9IHZvaWQgMDsKICAgICAgdGhpcy5zaGFwZXMgPSB2b2lkIDA7CiAgICAgIHRoaXMuc2hhcGVPZmZzZXRzID0gdm9pZCAwOwogICAgICB0aGlzLnNoYXBlT3JpZW50YXRpb25zID0gdm9pZCAwOwogICAgICB0aGlzLmluZXJ0aWEgPSB2b2lkIDA7CiAgICAgIHRoaXMuaW52SW5lcnRpYSA9IHZvaWQgMDsKICAgICAgdGhpcy5pbnZJbmVydGlhV29ybGQgPSB2b2lkIDA7CiAgICAgIHRoaXMuaW52TWFzc1NvbHZlID0gdm9pZCAwOwogICAgICB0aGlzLmludkluZXJ0aWFTb2x2ZSA9IHZvaWQgMDsKICAgICAgdGhpcy5pbnZJbmVydGlhV29ybGRTb2x2ZSA9IHZvaWQgMDsKICAgICAgdGhpcy5maXhlZFJvdGF0aW9uID0gdm9pZCAwOwogICAgICB0aGlzLmFuZ3VsYXJEYW1waW5nID0gdm9pZCAwOwogICAgICB0aGlzLmxpbmVhckZhY3RvciA9IHZvaWQgMDsKICAgICAgdGhpcy5hbmd1bGFyRmFjdG9yID0gdm9pZCAwOwogICAgICB0aGlzLmFhYmIgPSB2b2lkIDA7CiAgICAgIHRoaXMuYWFiYk5lZWRzVXBkYXRlID0gdm9pZCAwOwogICAgICB0aGlzLmJvdW5kaW5nUmFkaXVzID0gdm9pZCAwOwogICAgICB0aGlzLndsYW1iZGEgPSB2b2lkIDA7CiAgICAgIHRoaXMuaXNUcmlnZ2VyID0gdm9pZCAwOwogICAgICB0aGlzLmlkID0gQm9keS5pZENvdW50ZXIrKzsKICAgICAgdGhpcy5pbmRleCA9IC0xOwogICAgICB0aGlzLndvcmxkID0gbnVsbDsKICAgICAgdGhpcy5wcmVTdGVwID0gbnVsbDsKICAgICAgdGhpcy5wb3N0U3RlcCA9IG51bGw7CiAgICAgIHRoaXMudmxhbWJkYSA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuY29sbGlzaW9uRmlsdGVyR3JvdXAgPSB0eXBlb2Ygb3B0aW9ucy5jb2xsaXNpb25GaWx0ZXJHcm91cCA9PT0gJ251bWJlcicgPyBvcHRpb25zLmNvbGxpc2lvbkZpbHRlckdyb3VwIDogMTsKICAgICAgdGhpcy5jb2xsaXNpb25GaWx0ZXJNYXNrID0gdHlwZW9mIG9wdGlvbnMuY29sbGlzaW9uRmlsdGVyTWFzayA9PT0gJ251bWJlcicgPyBvcHRpb25zLmNvbGxpc2lvbkZpbHRlck1hc2sgOiAtMTsKICAgICAgdGhpcy5jb2xsaXNpb25SZXNwb25zZSA9IHR5cGVvZiBvcHRpb25zLmNvbGxpc2lvblJlc3BvbnNlID09PSAnYm9vbGVhbicgPyBvcHRpb25zLmNvbGxpc2lvblJlc3BvbnNlIDogdHJ1ZTsKICAgICAgdGhpcy5wb3NpdGlvbiA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMucHJldmlvdXNQb3NpdGlvbiA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuaW50ZXJwb2xhdGVkUG9zaXRpb24gPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmluaXRQb3NpdGlvbiA9IG5ldyBWZWMzKCk7CgogICAgICBpZiAob3B0aW9ucy5wb3NpdGlvbikgewogICAgICAgIHRoaXMucG9zaXRpb24uY29weShvcHRpb25zLnBvc2l0aW9uKTsKICAgICAgICB0aGlzLnByZXZpb3VzUG9zaXRpb24uY29weShvcHRpb25zLnBvc2l0aW9uKTsKICAgICAgICB0aGlzLmludGVycG9sYXRlZFBvc2l0aW9uLmNvcHkob3B0aW9ucy5wb3NpdGlvbik7CiAgICAgICAgdGhpcy5pbml0UG9zaXRpb24uY29weShvcHRpb25zLnBvc2l0aW9uKTsKICAgICAgfQoKICAgICAgdGhpcy52ZWxvY2l0eSA9IG5ldyBWZWMzKCk7CgogICAgICBpZiAob3B0aW9ucy52ZWxvY2l0eSkgewogICAgICAgIHRoaXMudmVsb2NpdHkuY29weShvcHRpb25zLnZlbG9jaXR5KTsKICAgICAgfQoKICAgICAgdGhpcy5pbml0VmVsb2NpdHkgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmZvcmNlID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgbWFzcyA9IHR5cGVvZiBvcHRpb25zLm1hc3MgPT09ICdudW1iZXInID8gb3B0aW9ucy5tYXNzIDogMDsKICAgICAgdGhpcy5tYXNzID0gbWFzczsKICAgICAgdGhpcy5pbnZNYXNzID0gbWFzcyA+IDAgPyAxLjAgLyBtYXNzIDogMDsKICAgICAgdGhpcy5tYXRlcmlhbCA9IG9wdGlvbnMubWF0ZXJpYWwgfHwgbnVsbDsKICAgICAgdGhpcy5saW5lYXJEYW1waW5nID0gdHlwZW9mIG9wdGlvbnMubGluZWFyRGFtcGluZyA9PT0gJ251bWJlcicgPyBvcHRpb25zLmxpbmVhckRhbXBpbmcgOiAwLjAxOwogICAgICB0aGlzLnR5cGUgPSBtYXNzIDw9IDAuMCA/IEJvZHkuU1RBVElDIDogQm9keS5EWU5BTUlDOwoKICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLnR5cGUgPT09IHR5cGVvZiBCb2R5LlNUQVRJQykgewogICAgICAgIHRoaXMudHlwZSA9IG9wdGlvbnMudHlwZTsKICAgICAgfQoKICAgICAgdGhpcy5hbGxvd1NsZWVwID0gdHlwZW9mIG9wdGlvbnMuYWxsb3dTbGVlcCAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmFsbG93U2xlZXAgOiB0cnVlOwogICAgICB0aGlzLnNsZWVwU3RhdGUgPSBCb2R5LkFXQUtFOwogICAgICB0aGlzLnNsZWVwU3BlZWRMaW1pdCA9IHR5cGVvZiBvcHRpb25zLnNsZWVwU3BlZWRMaW1pdCAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLnNsZWVwU3BlZWRMaW1pdCA6IDAuMTsKICAgICAgdGhpcy5zbGVlcFRpbWVMaW1pdCA9IHR5cGVvZiBvcHRpb25zLnNsZWVwVGltZUxpbWl0ICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuc2xlZXBUaW1lTGltaXQgOiAxOwogICAgICB0aGlzLnRpbWVMYXN0U2xlZXB5ID0gMDsKICAgICAgdGhpcy53YWtlVXBBZnRlck5hcnJvd3BoYXNlID0gZmFsc2U7CiAgICAgIHRoaXMudG9ycXVlID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5xdWF0ZXJuaW9uID0gbmV3IFF1YXRlcm5pb24oKTsKICAgICAgdGhpcy5pbml0UXVhdGVybmlvbiA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgICAgIHRoaXMucHJldmlvdXNRdWF0ZXJuaW9uID0gbmV3IFF1YXRlcm5pb24oKTsKICAgICAgdGhpcy5pbnRlcnBvbGF0ZWRRdWF0ZXJuaW9uID0gbmV3IFF1YXRlcm5pb24oKTsKCiAgICAgIGlmIChvcHRpb25zLnF1YXRlcm5pb24pIHsKICAgICAgICB0aGlzLnF1YXRlcm5pb24uY29weShvcHRpb25zLnF1YXRlcm5pb24pOwogICAgICAgIHRoaXMuaW5pdFF1YXRlcm5pb24uY29weShvcHRpb25zLnF1YXRlcm5pb24pOwogICAgICAgIHRoaXMucHJldmlvdXNRdWF0ZXJuaW9uLmNvcHkob3B0aW9ucy5xdWF0ZXJuaW9uKTsKICAgICAgICB0aGlzLmludGVycG9sYXRlZFF1YXRlcm5pb24uY29weShvcHRpb25zLnF1YXRlcm5pb24pOwogICAgICB9CgogICAgICB0aGlzLmFuZ3VsYXJWZWxvY2l0eSA9IG5ldyBWZWMzKCk7CgogICAgICBpZiAob3B0aW9ucy5hbmd1bGFyVmVsb2NpdHkpIHsKICAgICAgICB0aGlzLmFuZ3VsYXJWZWxvY2l0eS5jb3B5KG9wdGlvbnMuYW5ndWxhclZlbG9jaXR5KTsKICAgICAgfQoKICAgICAgdGhpcy5pbml0QW5ndWxhclZlbG9jaXR5ID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5zaGFwZXMgPSBbXTsKICAgICAgdGhpcy5zaGFwZU9mZnNldHMgPSBbXTsKICAgICAgdGhpcy5zaGFwZU9yaWVudGF0aW9ucyA9IFtdOwogICAgICB0aGlzLmluZXJ0aWEgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmludkluZXJ0aWEgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmludkluZXJ0aWFXb3JsZCA9IG5ldyBNYXQzKCk7CiAgICAgIHRoaXMuaW52TWFzc1NvbHZlID0gMDsKICAgICAgdGhpcy5pbnZJbmVydGlhU29sdmUgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmludkluZXJ0aWFXb3JsZFNvbHZlID0gbmV3IE1hdDMoKTsKICAgICAgdGhpcy5maXhlZFJvdGF0aW9uID0gdHlwZW9mIG9wdGlvbnMuZml4ZWRSb3RhdGlvbiAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmZpeGVkUm90YXRpb24gOiBmYWxzZTsKICAgICAgdGhpcy5hbmd1bGFyRGFtcGluZyA9IHR5cGVvZiBvcHRpb25zLmFuZ3VsYXJEYW1waW5nICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuYW5ndWxhckRhbXBpbmcgOiAwLjAxOwogICAgICB0aGlzLmxpbmVhckZhY3RvciA9IG5ldyBWZWMzKDEsIDEsIDEpOwoKICAgICAgaWYgKG9wdGlvbnMubGluZWFyRmFjdG9yKSB7CiAgICAgICAgdGhpcy5saW5lYXJGYWN0b3IuY29weShvcHRpb25zLmxpbmVhckZhY3Rvcik7CiAgICAgIH0KCiAgICAgIHRoaXMuYW5ndWxhckZhY3RvciA9IG5ldyBWZWMzKDEsIDEsIDEpOwoKICAgICAgaWYgKG9wdGlvbnMuYW5ndWxhckZhY3RvcikgewogICAgICAgIHRoaXMuYW5ndWxhckZhY3Rvci5jb3B5KG9wdGlvbnMuYW5ndWxhckZhY3Rvcik7CiAgICAgIH0KCiAgICAgIHRoaXMuYWFiYiA9IG5ldyBBQUJCKCk7CiAgICAgIHRoaXMuYWFiYk5lZWRzVXBkYXRlID0gdHJ1ZTsKICAgICAgdGhpcy5ib3VuZGluZ1JhZGl1cyA9IDA7CiAgICAgIHRoaXMud2xhbWJkYSA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuaXNUcmlnZ2VyID0gQm9vbGVhbihvcHRpb25zLmlzVHJpZ2dlcik7CgogICAgICBpZiAob3B0aW9ucy5zaGFwZSkgewogICAgICAgIHRoaXMuYWRkU2hhcGUob3B0aW9ucy5zaGFwZSk7CiAgICAgIH0KCiAgICAgIHRoaXMudXBkYXRlTWFzc1Byb3BlcnRpZXMoKTsKICAgIH0KICAgIC8qKgogICAgICogV2FrZSB0aGUgYm9keSB1cC4KICAgICAqLwoKCiAgICB3YWtlVXAoKSB7CiAgICAgIGNvbnN0IHByZXZTdGF0ZSA9IHRoaXMuc2xlZXBTdGF0ZTsKICAgICAgdGhpcy5zbGVlcFN0YXRlID0gQm9keS5BV0FLRTsKICAgICAgdGhpcy53YWtlVXBBZnRlck5hcnJvd3BoYXNlID0gZmFsc2U7CgogICAgICBpZiAocHJldlN0YXRlID09PSBCb2R5LlNMRUVQSU5HKSB7CiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KEJvZHkud2FrZXVwRXZlbnQpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEZvcmNlIGJvZHkgc2xlZXAKICAgICAqLwoKCiAgICBzbGVlcCgpIHsKICAgICAgdGhpcy5zbGVlcFN0YXRlID0gQm9keS5TTEVFUElORzsKICAgICAgdGhpcy52ZWxvY2l0eS5zZXQoMCwgMCwgMCk7CiAgICAgIHRoaXMuYW5ndWxhclZlbG9jaXR5LnNldCgwLCAwLCAwKTsKICAgICAgdGhpcy53YWtlVXBBZnRlck5hcnJvd3BoYXNlID0gZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIENhbGxlZCBldmVyeSB0aW1lc3RlcCB0byB1cGRhdGUgaW50ZXJuYWwgc2xlZXAgdGltZXIgYW5kIGNoYW5nZSBzbGVlcCBzdGF0ZSBpZiBuZWVkZWQuCiAgICAgKiBAcGFyYW0gdGltZSBUaGUgd29ybGQgdGltZSBpbiBzZWNvbmRzCiAgICAgKi8KCgogICAgc2xlZXBUaWNrKHRpbWUpIHsKICAgICAgaWYgKHRoaXMuYWxsb3dTbGVlcCkgewogICAgICAgIGNvbnN0IHNsZWVwU3RhdGUgPSB0aGlzLnNsZWVwU3RhdGU7CiAgICAgICAgY29uc3Qgc3BlZWRTcXVhcmVkID0gdGhpcy52ZWxvY2l0eS5sZW5ndGhTcXVhcmVkKCkgKyB0aGlzLmFuZ3VsYXJWZWxvY2l0eS5sZW5ndGhTcXVhcmVkKCk7CiAgICAgICAgY29uc3Qgc3BlZWRMaW1pdFNxdWFyZWQgPSB0aGlzLnNsZWVwU3BlZWRMaW1pdCAqKiAyOwoKICAgICAgICBpZiAoc2xlZXBTdGF0ZSA9PT0gQm9keS5BV0FLRSAmJiBzcGVlZFNxdWFyZWQgPCBzcGVlZExpbWl0U3F1YXJlZCkgewogICAgICAgICAgdGhpcy5zbGVlcFN0YXRlID0gQm9keS5TTEVFUFk7IC8vIFNsZWVweQoKICAgICAgICAgIHRoaXMudGltZUxhc3RTbGVlcHkgPSB0aW1lOwogICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KEJvZHkuc2xlZXB5RXZlbnQpOwogICAgICAgIH0gZWxzZSBpZiAoc2xlZXBTdGF0ZSA9PT0gQm9keS5TTEVFUFkgJiYgc3BlZWRTcXVhcmVkID4gc3BlZWRMaW1pdFNxdWFyZWQpIHsKICAgICAgICAgIHRoaXMud2FrZVVwKCk7IC8vIFdha2UgdXAKICAgICAgICB9IGVsc2UgaWYgKHNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBZICYmIHRpbWUgLSB0aGlzLnRpbWVMYXN0U2xlZXB5ID4gdGhpcy5zbGVlcFRpbWVMaW1pdCkgewogICAgICAgICAgdGhpcy5zbGVlcCgpOyAvLyBTbGVlcGluZwoKICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChCb2R5LnNsZWVwRXZlbnQpOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBJZiB0aGUgYm9keSBpcyBzbGVlcGluZywgaXQgc2hvdWxkIGJlIGltbW92YWJsZSAvIGhhdmUgaW5maW5pdGUgbWFzcyBkdXJpbmcgc29sdmUuIFdlIHNvbHZlIGl0IGJ5IGhhdmluZyBhIHNlcGFyYXRlICJzb2x2ZSBtYXNzIi4KICAgICAqLwoKCiAgICB1cGRhdGVTb2x2ZU1hc3NQcm9wZXJ0aWVzKCkgewogICAgICBpZiAodGhpcy5zbGVlcFN0YXRlID09PSBCb2R5LlNMRUVQSU5HIHx8IHRoaXMudHlwZSA9PT0gQm9keS5LSU5FTUFUSUMpIHsKICAgICAgICB0aGlzLmludk1hc3NTb2x2ZSA9IDA7CiAgICAgICAgdGhpcy5pbnZJbmVydGlhU29sdmUuc2V0WmVybygpOwogICAgICAgIHRoaXMuaW52SW5lcnRpYVdvcmxkU29sdmUuc2V0WmVybygpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuaW52TWFzc1NvbHZlID0gdGhpcy5pbnZNYXNzOwogICAgICAgIHRoaXMuaW52SW5lcnRpYVNvbHZlLmNvcHkodGhpcy5pbnZJbmVydGlhKTsKICAgICAgICB0aGlzLmludkluZXJ0aWFXb3JsZFNvbHZlLmNvcHkodGhpcy5pbnZJbmVydGlhV29ybGQpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIENvbnZlcnQgYSB3b3JsZCBwb2ludCB0byBsb2NhbCBib2R5IGZyYW1lLgogICAgICovCgoKICAgIHBvaW50VG9Mb2NhbEZyYW1lKHdvcmxkUG9pbnQsIHJlc3VsdCA9IG5ldyBWZWMzKCkpIHsKICAgICAgd29ybGRQb2ludC52c3ViKHRoaXMucG9zaXRpb24sIHJlc3VsdCk7CiAgICAgIHRoaXMucXVhdGVybmlvbi5jb25qdWdhdGUoKS52bXVsdChyZXN1bHQsIHJlc3VsdCk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIENvbnZlcnQgYSB3b3JsZCB2ZWN0b3IgdG8gbG9jYWwgYm9keSBmcmFtZS4KICAgICAqLwoKCiAgICB2ZWN0b3JUb0xvY2FsRnJhbWUod29ybGRWZWN0b3IsIHJlc3VsdCA9IG5ldyBWZWMzKCkpIHsKICAgICAgdGhpcy5xdWF0ZXJuaW9uLmNvbmp1Z2F0ZSgpLnZtdWx0KHdvcmxkVmVjdG9yLCByZXN1bHQpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgLyoqCiAgICAgKiBDb252ZXJ0IGEgbG9jYWwgYm9keSBwb2ludCB0byB3b3JsZCBmcmFtZS4KICAgICAqLwoKCiAgICBwb2ludFRvV29ybGRGcmFtZShsb2NhbFBvaW50LCByZXN1bHQgPSBuZXcgVmVjMygpKSB7CiAgICAgIHRoaXMucXVhdGVybmlvbi52bXVsdChsb2NhbFBvaW50LCByZXN1bHQpOwogICAgICByZXN1bHQudmFkZCh0aGlzLnBvc2l0aW9uLCByZXN1bHQpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgLyoqCiAgICAgKiBDb252ZXJ0IGEgbG9jYWwgYm9keSBwb2ludCB0byB3b3JsZCBmcmFtZS4KICAgICAqLwoKCiAgICB2ZWN0b3JUb1dvcmxkRnJhbWUobG9jYWxWZWN0b3IsIHJlc3VsdCA9IG5ldyBWZWMzKCkpIHsKICAgICAgdGhpcy5xdWF0ZXJuaW9uLnZtdWx0KGxvY2FsVmVjdG9yLCByZXN1bHQpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgLyoqCiAgICAgKiBBZGQgYSBzaGFwZSB0byB0aGUgYm9keSB3aXRoIGEgbG9jYWwgb2Zmc2V0IGFuZCBvcmllbnRhdGlvbi4KICAgICAqIEByZXR1cm4gVGhlIGJvZHkgb2JqZWN0LCBmb3IgY2hhaW5hYmlsaXR5LgogICAgICovCgoKICAgIGFkZFNoYXBlKHNoYXBlLCBfb2Zmc2V0LCBfb3JpZW50YXRpb24pIHsKICAgICAgY29uc3Qgb2Zmc2V0ID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3Qgb3JpZW50YXRpb24gPSBuZXcgUXVhdGVybmlvbigpOwoKICAgICAgaWYgKF9vZmZzZXQpIHsKICAgICAgICBvZmZzZXQuY29weShfb2Zmc2V0KTsKICAgICAgfQoKICAgICAgaWYgKF9vcmllbnRhdGlvbikgewogICAgICAgIG9yaWVudGF0aW9uLmNvcHkoX29yaWVudGF0aW9uKTsKICAgICAgfQoKICAgICAgdGhpcy5zaGFwZXMucHVzaChzaGFwZSk7CiAgICAgIHRoaXMuc2hhcGVPZmZzZXRzLnB1c2gob2Zmc2V0KTsKICAgICAgdGhpcy5zaGFwZU9yaWVudGF0aW9ucy5wdXNoKG9yaWVudGF0aW9uKTsKICAgICAgdGhpcy51cGRhdGVNYXNzUHJvcGVydGllcygpOwogICAgICB0aGlzLnVwZGF0ZUJvdW5kaW5nUmFkaXVzKCk7CiAgICAgIHRoaXMuYWFiYk5lZWRzVXBkYXRlID0gdHJ1ZTsKICAgICAgc2hhcGUuYm9keSA9IHRoaXM7CiAgICAgIHJldHVybiB0aGlzOwogICAgfQogICAgLyoqCiAgICAgKiBSZW1vdmUgYSBzaGFwZSBmcm9tIHRoZSBib2R5LgogICAgICogQHJldHVybiBUaGUgYm9keSBvYmplY3QsIGZvciBjaGFpbmFiaWxpdHkuCiAgICAgKi8KCgogICAgcmVtb3ZlU2hhcGUoc2hhcGUpIHsKICAgICAgY29uc3QgaW5kZXggPSB0aGlzLnNoYXBlcy5pbmRleE9mKHNoYXBlKTsKCiAgICAgIGlmIChpbmRleCA9PT0gLTEpIHsKICAgICAgICBjb25zb2xlLndhcm4oJ1NoYXBlIGRvZXMgbm90IGJlbG9uZyB0byB0aGUgYm9keScpOwogICAgICAgIHJldHVybiB0aGlzOwogICAgICB9CgogICAgICB0aGlzLnNoYXBlcy5zcGxpY2UoaW5kZXgsIDEpOwogICAgICB0aGlzLnNoYXBlT2Zmc2V0cy5zcGxpY2UoaW5kZXgsIDEpOwogICAgICB0aGlzLnNoYXBlT3JpZW50YXRpb25zLnNwbGljZShpbmRleCwgMSk7CiAgICAgIHRoaXMudXBkYXRlTWFzc1Byb3BlcnRpZXMoKTsKICAgICAgdGhpcy51cGRhdGVCb3VuZGluZ1JhZGl1cygpOwogICAgICB0aGlzLmFhYmJOZWVkc1VwZGF0ZSA9IHRydWU7CiAgICAgIHNoYXBlLmJvZHkgPSBudWxsOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlIHRoZSBib3VuZGluZyByYWRpdXMgb2YgdGhlIGJvZHkuIFNob3VsZCBiZSBkb25lIGlmIGFueSBvZiB0aGUgc2hhcGVzIGFyZSBjaGFuZ2VkLgogICAgICovCgoKICAgIHVwZGF0ZUJvdW5kaW5nUmFkaXVzKCkgewogICAgICBjb25zdCBzaGFwZXMgPSB0aGlzLnNoYXBlczsKICAgICAgY29uc3Qgc2hhcGVPZmZzZXRzID0gdGhpcy5zaGFwZU9mZnNldHM7CiAgICAgIGNvbnN0IE4gPSBzaGFwZXMubGVuZ3RoOwogICAgICBsZXQgcmFkaXVzID0gMDsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBjb25zdCBzaGFwZSA9IHNoYXBlc1tpXTsKICAgICAgICBzaGFwZS51cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpOwogICAgICAgIGNvbnN0IG9mZnNldCA9IHNoYXBlT2Zmc2V0c1tpXS5sZW5ndGgoKTsKICAgICAgICBjb25zdCByID0gc2hhcGUuYm91bmRpbmdTcGhlcmVSYWRpdXM7CgogICAgICAgIGlmIChvZmZzZXQgKyByID4gcmFkaXVzKSB7CiAgICAgICAgICByYWRpdXMgPSBvZmZzZXQgKyByOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5ib3VuZGluZ1JhZGl1cyA9IHJhZGl1czsKICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlcyB0aGUgLmFhYmIKICAgICAqLwoKCiAgICB1cGRhdGVBQUJCKCkgewogICAgICBjb25zdCBzaGFwZXMgPSB0aGlzLnNoYXBlczsKICAgICAgY29uc3Qgc2hhcGVPZmZzZXRzID0gdGhpcy5zaGFwZU9mZnNldHM7CiAgICAgIGNvbnN0IHNoYXBlT3JpZW50YXRpb25zID0gdGhpcy5zaGFwZU9yaWVudGF0aW9uczsKICAgICAgY29uc3QgTiA9IHNoYXBlcy5sZW5ndGg7CiAgICAgIGNvbnN0IG9mZnNldCA9IHRtcFZlYzsKICAgICAgY29uc3Qgb3JpZW50YXRpb24gPSB0bXBRdWF0OwogICAgICBjb25zdCBib2R5UXVhdCA9IHRoaXMucXVhdGVybmlvbjsKICAgICAgY29uc3QgYWFiYiA9IHRoaXMuYWFiYjsKICAgICAgY29uc3Qgc2hhcGVBQUJCID0gdXBkYXRlQUFCQl9zaGFwZUFBQkI7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTjsgaSsrKSB7CiAgICAgICAgY29uc3Qgc2hhcGUgPSBzaGFwZXNbaV07IC8vIEdldCBzaGFwZSB3b3JsZCBwb3NpdGlvbgoKICAgICAgICBib2R5UXVhdC52bXVsdChzaGFwZU9mZnNldHNbaV0sIG9mZnNldCk7CiAgICAgICAgb2Zmc2V0LnZhZGQodGhpcy5wb3NpdGlvbiwgb2Zmc2V0KTsgLy8gR2V0IHNoYXBlIHdvcmxkIHF1YXRlcm5pb24KCiAgICAgICAgYm9keVF1YXQubXVsdChzaGFwZU9yaWVudGF0aW9uc1tpXSwgb3JpZW50YXRpb24pOyAvLyBHZXQgc2hhcGUgQUFCQgoKICAgICAgICBzaGFwZS5jYWxjdWxhdGVXb3JsZEFBQkIob2Zmc2V0LCBvcmllbnRhdGlvbiwgc2hhcGVBQUJCLmxvd2VyQm91bmQsIHNoYXBlQUFCQi51cHBlckJvdW5kKTsKCiAgICAgICAgaWYgKGkgPT09IDApIHsKICAgICAgICAgIGFhYmIuY29weShzaGFwZUFBQkIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBhYWJiLmV4dGVuZChzaGFwZUFBQkIpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5hYWJiTmVlZHNVcGRhdGUgPSBmYWxzZTsKICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlIGAuaW5lcnRpYVdvcmxkYCBhbmQgYC5pbnZJbmVydGlhV29ybGRgCiAgICAgKi8KCgogICAgdXBkYXRlSW5lcnRpYVdvcmxkKGZvcmNlKSB7CiAgICAgIGNvbnN0IEkgPSB0aGlzLmludkluZXJ0aWE7CiAgICAgIGlmIChJLnggPT09IEkueSAmJiBJLnkgPT09IEkueiAmJiAhZm9yY2UpIDtlbHNlIHsKICAgICAgICBjb25zdCBtMSA9IHVpd19tMTsKICAgICAgICBjb25zdCBtMiA9IHVpd19tMjsKICAgICAgICBtMS5zZXRSb3RhdGlvbkZyb21RdWF0ZXJuaW9uKHRoaXMucXVhdGVybmlvbik7CiAgICAgICAgbTEudHJhbnNwb3NlKG0yKTsKICAgICAgICBtMS5zY2FsZShJLCBtMSk7CiAgICAgICAgbTEubW11bHQobTIsIHRoaXMuaW52SW5lcnRpYVdvcmxkKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBBcHBseSBmb3JjZSB0byBhIHBvaW50IG9mIHRoZSBib2R5LiBUaGlzIGNvdWxkIGZvciBleGFtcGxlIGJlIGEgcG9pbnQgb24gdGhlIEJvZHkgc3VyZmFjZS4KICAgICAqIEFwcGx5aW5nIGZvcmNlIHRoaXMgd2F5IHdpbGwgYWRkIHRvIEJvZHkuZm9yY2UgYW5kIEJvZHkudG9ycXVlLgogICAgICogQHBhcmFtIGZvcmNlIFRoZSBhbW91bnQgb2YgZm9yY2UgdG8gYWRkLgogICAgICogQHBhcmFtIHJlbGF0aXZlUG9pbnQgQSBwb2ludCByZWxhdGl2ZSB0byB0aGUgY2VudGVyIG9mIG1hc3MgdG8gYXBwbHkgdGhlIGZvcmNlIG9uLgogICAgICovCgoKICAgIGFwcGx5Rm9yY2UoZm9yY2UsIHJlbGF0aXZlUG9pbnQgPSBuZXcgVmVjMygpKSB7CiAgICAgIC8vIE5lZWRlZD8KICAgICAgaWYgKHRoaXMudHlwZSAhPT0gQm9keS5EWU5BTUlDKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAodGhpcy5zbGVlcFN0YXRlID09PSBCb2R5LlNMRUVQSU5HKSB7CiAgICAgICAgdGhpcy53YWtlVXAoKTsKICAgICAgfSAvLyBDb21wdXRlIHByb2R1Y2VkIHJvdGF0aW9uYWwgZm9yY2UKCgogICAgICBjb25zdCByb3RGb3JjZSA9IEJvZHlfYXBwbHlGb3JjZV9yb3RGb3JjZTsKICAgICAgcmVsYXRpdmVQb2ludC5jcm9zcyhmb3JjZSwgcm90Rm9yY2UpOyAvLyBBZGQgbGluZWFyIGZvcmNlCgogICAgICB0aGlzLmZvcmNlLnZhZGQoZm9yY2UsIHRoaXMuZm9yY2UpOyAvLyBBZGQgcm90YXRpb25hbCBmb3JjZQoKICAgICAgdGhpcy50b3JxdWUudmFkZChyb3RGb3JjZSwgdGhpcy50b3JxdWUpOwogICAgfQogICAgLyoqCiAgICAgKiBBcHBseSBmb3JjZSB0byBhIGxvY2FsIHBvaW50IGluIHRoZSBib2R5LgogICAgICogQHBhcmFtIGZvcmNlIFRoZSBmb3JjZSB2ZWN0b3IgdG8gYXBwbHksIGRlZmluZWQgbG9jYWxseSBpbiB0aGUgYm9keSBmcmFtZS4KICAgICAqIEBwYXJhbSBsb2NhbFBvaW50IEEgbG9jYWwgcG9pbnQgaW4gdGhlIGJvZHkgdG8gYXBwbHkgdGhlIGZvcmNlIG9uLgogICAgICovCgoKICAgIGFwcGx5TG9jYWxGb3JjZShsb2NhbEZvcmNlLCBsb2NhbFBvaW50ID0gbmV3IFZlYzMoKSkgewogICAgICBpZiAodGhpcy50eXBlICE9PSBCb2R5LkRZTkFNSUMpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNvbnN0IHdvcmxkRm9yY2UgPSBCb2R5X2FwcGx5TG9jYWxGb3JjZV93b3JsZEZvcmNlOwogICAgICBjb25zdCByZWxhdGl2ZVBvaW50V29ybGQgPSBCb2R5X2FwcGx5TG9jYWxGb3JjZV9yZWxhdGl2ZVBvaW50V29ybGQ7IC8vIFRyYW5zZm9ybSB0aGUgZm9yY2UgdmVjdG9yIHRvIHdvcmxkIHNwYWNlCgogICAgICB0aGlzLnZlY3RvclRvV29ybGRGcmFtZShsb2NhbEZvcmNlLCB3b3JsZEZvcmNlKTsKICAgICAgdGhpcy52ZWN0b3JUb1dvcmxkRnJhbWUobG9jYWxQb2ludCwgcmVsYXRpdmVQb2ludFdvcmxkKTsKICAgICAgdGhpcy5hcHBseUZvcmNlKHdvcmxkRm9yY2UsIHJlbGF0aXZlUG9pbnRXb3JsZCk7CiAgICB9CiAgICAvKioKICAgICAqIEFwcGx5IHRvcnF1ZSB0byB0aGUgYm9keS4KICAgICAqIEBwYXJhbSB0b3JxdWUgVGhlIGFtb3VudCBvZiB0b3JxdWUgdG8gYWRkLgogICAgICovCgoKICAgIGFwcGx5VG9ycXVlKHRvcnF1ZSkgewogICAgICBpZiAodGhpcy50eXBlICE9PSBCb2R5LkRZTkFNSUMpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcpIHsKICAgICAgICB0aGlzLndha2VVcCgpOwogICAgICB9IC8vIEFkZCByb3RhdGlvbmFsIGZvcmNlCgoKICAgICAgdGhpcy50b3JxdWUudmFkZCh0b3JxdWUsIHRoaXMudG9ycXVlKTsKICAgIH0KICAgIC8qKgogICAgICogQXBwbHkgaW1wdWxzZSB0byBhIHBvaW50IG9mIHRoZSBib2R5LiBUaGlzIGNvdWxkIGZvciBleGFtcGxlIGJlIGEgcG9pbnQgb24gdGhlIEJvZHkgc3VyZmFjZS4KICAgICAqIEFuIGltcHVsc2UgaXMgYSBmb3JjZSBhZGRlZCB0byBhIGJvZHkgZHVyaW5nIGEgc2hvcnQgcGVyaW9kIG9mIHRpbWUgKGltcHVsc2UgPSBmb3JjZSAqIHRpbWUpLgogICAgICogSW1wdWxzZXMgd2lsbCBiZSBhZGRlZCB0byBCb2R5LnZlbG9jaXR5IGFuZCBCb2R5LmFuZ3VsYXJWZWxvY2l0eS4KICAgICAqIEBwYXJhbSBpbXB1bHNlIFRoZSBhbW91bnQgb2YgaW1wdWxzZSB0byBhZGQuCiAgICAgKiBAcGFyYW0gcmVsYXRpdmVQb2ludCBBIHBvaW50IHJlbGF0aXZlIHRvIHRoZSBjZW50ZXIgb2YgbWFzcyB0byBhcHBseSB0aGUgZm9yY2Ugb24uCiAgICAgKi8KCgogICAgYXBwbHlJbXB1bHNlKGltcHVsc2UsIHJlbGF0aXZlUG9pbnQgPSBuZXcgVmVjMygpKSB7CiAgICAgIGlmICh0aGlzLnR5cGUgIT09IEJvZHkuRFlOQU1JQykgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuc2xlZXBTdGF0ZSA9PT0gQm9keS5TTEVFUElORykgewogICAgICAgIHRoaXMud2FrZVVwKCk7CiAgICAgIH0gLy8gQ29tcHV0ZSBwb2ludCBwb3NpdGlvbiByZWxhdGl2ZSB0byB0aGUgYm9keSBjZW50ZXIKCgogICAgICBjb25zdCByID0gcmVsYXRpdmVQb2ludDsgLy8gQ29tcHV0ZSBwcm9kdWNlZCBjZW50cmFsIGltcHVsc2UgdmVsb2NpdHkKCiAgICAgIGNvbnN0IHZlbG8gPSBCb2R5X2FwcGx5SW1wdWxzZV92ZWxvOwogICAgICB2ZWxvLmNvcHkoaW1wdWxzZSk7CiAgICAgIHZlbG8uc2NhbGUodGhpcy5pbnZNYXNzLCB2ZWxvKTsgLy8gQWRkIGxpbmVhciBpbXB1bHNlCgogICAgICB0aGlzLnZlbG9jaXR5LnZhZGQodmVsbywgdGhpcy52ZWxvY2l0eSk7IC8vIENvbXB1dGUgcHJvZHVjZWQgcm90YXRpb25hbCBpbXB1bHNlIHZlbG9jaXR5CgogICAgICBjb25zdCByb3RWZWxvID0gQm9keV9hcHBseUltcHVsc2Vfcm90VmVsbzsKICAgICAgci5jcm9zcyhpbXB1bHNlLCByb3RWZWxvKTsKICAgICAgLyoKICAgICAgIHJvdFZlbG8ueCAqPSB0aGlzLmludkluZXJ0aWEueDsKICAgICAgIHJvdFZlbG8ueSAqPSB0aGlzLmludkluZXJ0aWEueTsKICAgICAgIHJvdFZlbG8ueiAqPSB0aGlzLmludkluZXJ0aWEuejsKICAgICAgICovCgogICAgICB0aGlzLmludkluZXJ0aWFXb3JsZC52bXVsdChyb3RWZWxvLCByb3RWZWxvKTsgLy8gQWRkIHJvdGF0aW9uYWwgSW1wdWxzZQoKICAgICAgdGhpcy5hbmd1bGFyVmVsb2NpdHkudmFkZChyb3RWZWxvLCB0aGlzLmFuZ3VsYXJWZWxvY2l0eSk7CiAgICB9CiAgICAvKioKICAgICAqIEFwcGx5IGxvY2FsbHktZGVmaW5lZCBpbXB1bHNlIHRvIGEgbG9jYWwgcG9pbnQgaW4gdGhlIGJvZHkuCiAgICAgKiBAcGFyYW0gZm9yY2UgVGhlIGZvcmNlIHZlY3RvciB0byBhcHBseSwgZGVmaW5lZCBsb2NhbGx5IGluIHRoZSBib2R5IGZyYW1lLgogICAgICogQHBhcmFtIGxvY2FsUG9pbnQgQSBsb2NhbCBwb2ludCBpbiB0aGUgYm9keSB0byBhcHBseSB0aGUgZm9yY2Ugb24uCiAgICAgKi8KCgogICAgYXBwbHlMb2NhbEltcHVsc2UobG9jYWxJbXB1bHNlLCBsb2NhbFBvaW50ID0gbmV3IFZlYzMoKSkgewogICAgICBpZiAodGhpcy50eXBlICE9PSBCb2R5LkRZTkFNSUMpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNvbnN0IHdvcmxkSW1wdWxzZSA9IEJvZHlfYXBwbHlMb2NhbEltcHVsc2Vfd29ybGRJbXB1bHNlOwogICAgICBjb25zdCByZWxhdGl2ZVBvaW50V29ybGQgPSBCb2R5X2FwcGx5TG9jYWxJbXB1bHNlX3JlbGF0aXZlUG9pbnQ7IC8vIFRyYW5zZm9ybSB0aGUgZm9yY2UgdmVjdG9yIHRvIHdvcmxkIHNwYWNlCgogICAgICB0aGlzLnZlY3RvclRvV29ybGRGcmFtZShsb2NhbEltcHVsc2UsIHdvcmxkSW1wdWxzZSk7CiAgICAgIHRoaXMudmVjdG9yVG9Xb3JsZEZyYW1lKGxvY2FsUG9pbnQsIHJlbGF0aXZlUG9pbnRXb3JsZCk7CiAgICAgIHRoaXMuYXBwbHlJbXB1bHNlKHdvcmxkSW1wdWxzZSwgcmVsYXRpdmVQb2ludFdvcmxkKTsKICAgIH0KICAgIC8qKgogICAgICogU2hvdWxkIGJlIGNhbGxlZCB3aGVuZXZlciB5b3UgY2hhbmdlIHRoZSBib2R5IHNoYXBlIG9yIG1hc3MuCiAgICAgKi8KCgogICAgdXBkYXRlTWFzc1Byb3BlcnRpZXMoKSB7CiAgICAgIGNvbnN0IGhhbGZFeHRlbnRzID0gQm9keV91cGRhdGVNYXNzUHJvcGVydGllc19oYWxmRXh0ZW50czsKICAgICAgdGhpcy5pbnZNYXNzID0gdGhpcy5tYXNzID4gMCA/IDEuMCAvIHRoaXMubWFzcyA6IDA7CiAgICAgIGNvbnN0IEkgPSB0aGlzLmluZXJ0aWE7CiAgICAgIGNvbnN0IGZpeGVkID0gdGhpcy5maXhlZFJvdGF0aW9uOyAvLyBBcHByb3hpbWF0ZSB3aXRoIEFBQkIgYm94CgogICAgICB0aGlzLnVwZGF0ZUFBQkIoKTsKICAgICAgaGFsZkV4dGVudHMuc2V0KCh0aGlzLmFhYmIudXBwZXJCb3VuZC54IC0gdGhpcy5hYWJiLmxvd2VyQm91bmQueCkgLyAyLCAodGhpcy5hYWJiLnVwcGVyQm91bmQueSAtIHRoaXMuYWFiYi5sb3dlckJvdW5kLnkpIC8gMiwgKHRoaXMuYWFiYi51cHBlckJvdW5kLnogLSB0aGlzLmFhYmIubG93ZXJCb3VuZC56KSAvIDIpOwogICAgICBCb3guY2FsY3VsYXRlSW5lcnRpYShoYWxmRXh0ZW50cywgdGhpcy5tYXNzLCBJKTsKICAgICAgdGhpcy5pbnZJbmVydGlhLnNldChJLnggPiAwICYmICFmaXhlZCA/IDEuMCAvIEkueCA6IDAsIEkueSA+IDAgJiYgIWZpeGVkID8gMS4wIC8gSS55IDogMCwgSS56ID4gMCAmJiAhZml4ZWQgPyAxLjAgLyBJLnogOiAwKTsKICAgICAgdGhpcy51cGRhdGVJbmVydGlhV29ybGQodHJ1ZSk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB3b3JsZCB2ZWxvY2l0eSBvZiBhIHBvaW50IGluIHRoZSBib2R5LgogICAgICogQHBhcmFtIHdvcmxkUG9pbnQKICAgICAqIEBwYXJhbSByZXN1bHQKICAgICAqIEByZXR1cm4gVGhlIHJlc3VsdCB2ZWN0b3IuCiAgICAgKi8KCgogICAgZ2V0VmVsb2NpdHlBdFdvcmxkUG9pbnQod29ybGRQb2ludCwgcmVzdWx0KSB7CiAgICAgIGNvbnN0IHIgPSBuZXcgVmVjMygpOwogICAgICB3b3JsZFBvaW50LnZzdWIodGhpcy5wb3NpdGlvbiwgcik7CiAgICAgIHRoaXMuYW5ndWxhclZlbG9jaXR5LmNyb3NzKHIsIHJlc3VsdCk7CiAgICAgIHRoaXMudmVsb2NpdHkudmFkZChyZXN1bHQsIHJlc3VsdCk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIE1vdmUgdGhlIGJvZHkgZm9yd2FyZCBpbiB0aW1lLgogICAgICogQHBhcmFtIGR0IFRpbWUgc3RlcAogICAgICogQHBhcmFtIHF1YXROb3JtYWxpemUgU2V0IHRvIHRydWUgdG8gbm9ybWFsaXplIHRoZSBib2R5IHF1YXRlcm5pb24KICAgICAqIEBwYXJhbSBxdWF0Tm9ybWFsaXplRmFzdCBJZiB0aGUgcXVhdGVybmlvbiBzaG91bGQgYmUgbm9ybWFsaXplZCB1c2luZyAiZmFzdCIgcXVhdGVybmlvbiBub3JtYWxpemF0aW9uCiAgICAgKi8KCgogICAgaW50ZWdyYXRlKGR0LCBxdWF0Tm9ybWFsaXplLCBxdWF0Tm9ybWFsaXplRmFzdCkgewogICAgICAvLyBTYXZlIHByZXZpb3VzIHBvc2l0aW9uCiAgICAgIHRoaXMucHJldmlvdXNQb3NpdGlvbi5jb3B5KHRoaXMucG9zaXRpb24pOwogICAgICB0aGlzLnByZXZpb3VzUXVhdGVybmlvbi5jb3B5KHRoaXMucXVhdGVybmlvbik7CgogICAgICBpZiAoISh0aGlzLnR5cGUgPT09IEJvZHkuRFlOQU1JQyB8fCB0aGlzLnR5cGUgPT09IEJvZHkuS0lORU1BVElDKSB8fCB0aGlzLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcpIHsKICAgICAgICAvLyBPbmx5IGZvciBkeW5hbWljCiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBjb25zdCB2ZWxvID0gdGhpcy52ZWxvY2l0eTsKICAgICAgY29uc3QgYW5ndWxhclZlbG8gPSB0aGlzLmFuZ3VsYXJWZWxvY2l0eTsKICAgICAgY29uc3QgcG9zID0gdGhpcy5wb3NpdGlvbjsKICAgICAgY29uc3QgZm9yY2UgPSB0aGlzLmZvcmNlOwogICAgICBjb25zdCB0b3JxdWUgPSB0aGlzLnRvcnF1ZTsKICAgICAgY29uc3QgcXVhdCA9IHRoaXMucXVhdGVybmlvbjsKICAgICAgY29uc3QgaW52TWFzcyA9IHRoaXMuaW52TWFzczsKICAgICAgY29uc3QgaW52SW5lcnRpYSA9IHRoaXMuaW52SW5lcnRpYVdvcmxkOwogICAgICBjb25zdCBsaW5lYXJGYWN0b3IgPSB0aGlzLmxpbmVhckZhY3RvcjsKICAgICAgY29uc3QgaU1kdCA9IGludk1hc3MgKiBkdDsKICAgICAgdmVsby54ICs9IGZvcmNlLnggKiBpTWR0ICogbGluZWFyRmFjdG9yLng7CiAgICAgIHZlbG8ueSArPSBmb3JjZS55ICogaU1kdCAqIGxpbmVhckZhY3Rvci55OwogICAgICB2ZWxvLnogKz0gZm9yY2UueiAqIGlNZHQgKiBsaW5lYXJGYWN0b3IuejsKICAgICAgY29uc3QgZSA9IGludkluZXJ0aWEuZWxlbWVudHM7CiAgICAgIGNvbnN0IGFuZ3VsYXJGYWN0b3IgPSB0aGlzLmFuZ3VsYXJGYWN0b3I7CiAgICAgIGNvbnN0IHR4ID0gdG9ycXVlLnggKiBhbmd1bGFyRmFjdG9yLng7CiAgICAgIGNvbnN0IHR5ID0gdG9ycXVlLnkgKiBhbmd1bGFyRmFjdG9yLnk7CiAgICAgIGNvbnN0IHR6ID0gdG9ycXVlLnogKiBhbmd1bGFyRmFjdG9yLno7CiAgICAgIGFuZ3VsYXJWZWxvLnggKz0gZHQgKiAoZVswXSAqIHR4ICsgZVsxXSAqIHR5ICsgZVsyXSAqIHR6KTsKICAgICAgYW5ndWxhclZlbG8ueSArPSBkdCAqIChlWzNdICogdHggKyBlWzRdICogdHkgKyBlWzVdICogdHopOwogICAgICBhbmd1bGFyVmVsby56ICs9IGR0ICogKGVbNl0gKiB0eCArIGVbN10gKiB0eSArIGVbOF0gKiB0eik7IC8vIFVzZSBuZXcgdmVsb2NpdHkgIC0gbGVhcCBmcm9nCgogICAgICBwb3MueCArPSB2ZWxvLnggKiBkdDsKICAgICAgcG9zLnkgKz0gdmVsby55ICogZHQ7CiAgICAgIHBvcy56ICs9IHZlbG8ueiAqIGR0OwogICAgICBxdWF0LmludGVncmF0ZSh0aGlzLmFuZ3VsYXJWZWxvY2l0eSwgZHQsIHRoaXMuYW5ndWxhckZhY3RvciwgcXVhdCk7CgogICAgICBpZiAocXVhdE5vcm1hbGl6ZSkgewogICAgICAgIGlmIChxdWF0Tm9ybWFsaXplRmFzdCkgewogICAgICAgICAgcXVhdC5ub3JtYWxpemVGYXN0KCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHF1YXQubm9ybWFsaXplKCk7CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLmFhYmJOZWVkc1VwZGF0ZSA9IHRydWU7IC8vIFVwZGF0ZSB3b3JsZCBpbmVydGlhCgogICAgICB0aGlzLnVwZGF0ZUluZXJ0aWFXb3JsZCgpOwogICAgfQoKICB9CgogIEJvZHkuaWRDb3VudGVyID0gMDsKICBCb2R5LkNPTExJREVfRVZFTlRfTkFNRSA9ICdjb2xsaWRlJzsKICBCb2R5LkRZTkFNSUMgPSBCT0RZX1RZUEVTLkRZTkFNSUM7CiAgQm9keS5TVEFUSUMgPSBCT0RZX1RZUEVTLlNUQVRJQzsKICBCb2R5LktJTkVNQVRJQyA9IEJPRFlfVFlQRVMuS0lORU1BVElDOwogIEJvZHkuQVdBS0UgPSBCT0RZX1NMRUVQX1NUQVRFUy5BV0FLRTsKICBCb2R5LlNMRUVQWSA9IEJPRFlfU0xFRVBfU1RBVEVTLlNMRUVQWTsKICBCb2R5LlNMRUVQSU5HID0gQk9EWV9TTEVFUF9TVEFURVMuU0xFRVBJTkc7CiAgQm9keS53YWtldXBFdmVudCA9IHsKICAgIHR5cGU6ICd3YWtldXAnCiAgfTsKICBCb2R5LnNsZWVweUV2ZW50ID0gewogICAgdHlwZTogJ3NsZWVweScKICB9OwogIEJvZHkuc2xlZXBFdmVudCA9IHsKICAgIHR5cGU6ICdzbGVlcCcKICB9OwogIGNvbnN0IHRtcFZlYyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgdG1wUXVhdCA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgY29uc3QgdXBkYXRlQUFCQl9zaGFwZUFBQkIgPSBuZXcgQUFCQigpOwogIGNvbnN0IHVpd19tMSA9IG5ldyBNYXQzKCk7CiAgY29uc3QgdWl3X20yID0gbmV3IE1hdDMoKTsKICBjb25zdCBCb2R5X2FwcGx5Rm9yY2Vfcm90Rm9yY2UgPSBuZXcgVmVjMygpOwogIGNvbnN0IEJvZHlfYXBwbHlMb2NhbEZvcmNlX3dvcmxkRm9yY2UgPSBuZXcgVmVjMygpOwogIGNvbnN0IEJvZHlfYXBwbHlMb2NhbEZvcmNlX3JlbGF0aXZlUG9pbnRXb3JsZCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgQm9keV9hcHBseUltcHVsc2VfdmVsbyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgQm9keV9hcHBseUltcHVsc2Vfcm90VmVsbyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgQm9keV9hcHBseUxvY2FsSW1wdWxzZV93b3JsZEltcHVsc2UgPSBuZXcgVmVjMygpOwogIGNvbnN0IEJvZHlfYXBwbHlMb2NhbEltcHVsc2VfcmVsYXRpdmVQb2ludCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgQm9keV91cGRhdGVNYXNzUHJvcGVydGllc19oYWxmRXh0ZW50cyA9IG5ldyBWZWMzKCk7CiAgLyoqCiAgICogQmFzZSBjbGFzcyBmb3IgYnJvYWRwaGFzZSBpbXBsZW1lbnRhdGlvbnMKICAgKiBAYXV0aG9yIHNjaHRlcHBlCiAgICovCgogIGNsYXNzIEJyb2FkcGhhc2UgewogICAgLyoqCiAgICAgKiBUaGUgd29ybGQgdG8gc2VhcmNoIGZvciBjb2xsaXNpb25zIGluLgogICAgICovCgogICAgLyoqCiAgICAgKiBJZiBzZXQgdG8gdHJ1ZSwgdGhlIGJyb2FkcGhhc2UgdXNlcyBib3VuZGluZyBib3hlcyBmb3IgaW50ZXJzZWN0aW9uIHRlc3RzLCBlbHNlIGl0IHVzZXMgYm91bmRpbmcgc3BoZXJlcy4KICAgICAqLwoKICAgIC8qKgogICAgICogU2V0IHRvIHRydWUgaWYgdGhlIG9iamVjdHMgaW4gdGhlIHdvcmxkIG1vdmVkLgogICAgICovCiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgdGhpcy53b3JsZCA9IHZvaWQgMDsKICAgICAgdGhpcy51c2VCb3VuZGluZ0JveGVzID0gdm9pZCAwOwogICAgICB0aGlzLmRpcnR5ID0gdm9pZCAwOwogICAgICB0aGlzLndvcmxkID0gbnVsbDsKICAgICAgdGhpcy51c2VCb3VuZGluZ0JveGVzID0gZmFsc2U7CiAgICAgIHRoaXMuZGlydHkgPSB0cnVlOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIGNvbGxpc2lvbiBwYWlycyBmcm9tIHRoZSB3b3JsZAogICAgICogQHBhcmFtIHdvcmxkIFRoZSB3b3JsZCB0byBzZWFyY2ggaW4KICAgICAqIEBwYXJhbSBwMSBFbXB0eSBhcnJheSB0byBiZSBmaWxsZWQgd2l0aCBib2R5IG9iamVjdHMKICAgICAqIEBwYXJhbSBwMiBFbXB0eSBhcnJheSB0byBiZSBmaWxsZWQgd2l0aCBib2R5IG9iamVjdHMKICAgICAqLwoKCiAgICBjb2xsaXNpb25QYWlycyh3b3JsZCwgcDEsIHAyKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignY29sbGlzaW9uUGFpcnMgbm90IGltcGxlbWVudGVkIGZvciB0aGlzIEJyb2FkUGhhc2UgY2xhc3MhJyk7CiAgICB9CiAgICAvKioKICAgICAqIENoZWNrIGlmIGEgYm9keSBwYWlyIG5lZWRzIHRvIGJlIGludGVyc2VjdGlvbiB0ZXN0ZWQgYXQgYWxsLgogICAgICovCgoKICAgIG5lZWRCcm9hZHBoYXNlQ29sbGlzaW9uKGJvZHlBLCBib2R5QikgewogICAgICAvLyBDaGVjayBjb2xsaXNpb24gZmlsdGVyIG1hc2tzCiAgICAgIGlmICgoYm9keUEuY29sbGlzaW9uRmlsdGVyR3JvdXAgJiBib2R5Qi5jb2xsaXNpb25GaWx0ZXJNYXNrKSA9PT0gMCB8fCAoYm9keUIuY29sbGlzaW9uRmlsdGVyR3JvdXAgJiBib2R5QS5jb2xsaXNpb25GaWx0ZXJNYXNrKSA9PT0gMCkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfSAvLyBDaGVjayB0eXBlcwoKCiAgICAgIGlmICgoKGJvZHlBLnR5cGUgJiBCb2R5LlNUQVRJQykgIT09IDAgfHwgYm9keUEuc2xlZXBTdGF0ZSA9PT0gQm9keS5TTEVFUElORykgJiYgKChib2R5Qi50eXBlICYgQm9keS5TVEFUSUMpICE9PSAwIHx8IGJvZHlCLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcpKSB7CiAgICAgICAgLy8gQm90aCBib2RpZXMgYXJlIHN0YXRpYyBvciBzbGVlcGluZy4gU2tpcC4KICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgLyoqCiAgICAgKiBDaGVjayBpZiB0aGUgYm91bmRpbmcgdm9sdW1lcyBvZiB0d28gYm9kaWVzIGludGVyc2VjdC4KICAgICAqLwoKCiAgICBpbnRlcnNlY3Rpb25UZXN0KGJvZHlBLCBib2R5QiwgcGFpcnMxLCBwYWlyczIpIHsKICAgICAgaWYgKHRoaXMudXNlQm91bmRpbmdCb3hlcykgewogICAgICAgIHRoaXMuZG9Cb3VuZGluZ0JveEJyb2FkcGhhc2UoYm9keUEsIGJvZHlCLCBwYWlyczEsIHBhaXJzMik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5kb0JvdW5kaW5nU3BoZXJlQnJvYWRwaGFzZShib2R5QSwgYm9keUIsIHBhaXJzMSwgcGFpcnMyKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBDaGVjayBpZiB0aGUgYm91bmRpbmcgc3BoZXJlcyBvZiB0d28gYm9kaWVzIGFyZSBpbnRlcnNlY3RpbmcuCiAgICAgKiBAcGFyYW0gcGFpcnMxIGJvZHlBIGlzIGFwcGVuZGVkIHRvIHRoaXMgYXJyYXkgaWYgaW50ZXJzZWN0aW9uCiAgICAgKiBAcGFyYW0gcGFpcnMyIGJvZHlCIGlzIGFwcGVuZGVkIHRvIHRoaXMgYXJyYXkgaWYgaW50ZXJzZWN0aW9uCiAgICAgKi8KCgogICAgZG9Cb3VuZGluZ1NwaGVyZUJyb2FkcGhhc2UoYm9keUEsIGJvZHlCLCBwYWlyczEsIHBhaXJzMikgewogICAgICBjb25zdCByID0gQnJvYWRwaGFzZV9jb2xsaXNpb25QYWlyc19yOwogICAgICBib2R5Qi5wb3NpdGlvbi52c3ViKGJvZHlBLnBvc2l0aW9uLCByKTsKICAgICAgY29uc3QgYm91bmRpbmdSYWRpdXNTdW0yID0gKGJvZHlBLmJvdW5kaW5nUmFkaXVzICsgYm9keUIuYm91bmRpbmdSYWRpdXMpICoqIDI7CiAgICAgIGNvbnN0IG5vcm0yID0gci5sZW5ndGhTcXVhcmVkKCk7CgogICAgICBpZiAobm9ybTIgPCBib3VuZGluZ1JhZGl1c1N1bTIpIHsKICAgICAgICBwYWlyczEucHVzaChib2R5QSk7CiAgICAgICAgcGFpcnMyLnB1c2goYm9keUIpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIENoZWNrIGlmIHRoZSBib3VuZGluZyBib3hlcyBvZiB0d28gYm9kaWVzIGFyZSBpbnRlcnNlY3RpbmcuCiAgICAgKi8KCgogICAgZG9Cb3VuZGluZ0JveEJyb2FkcGhhc2UoYm9keUEsIGJvZHlCLCBwYWlyczEsIHBhaXJzMikgewogICAgICBpZiAoYm9keUEuYWFiYk5lZWRzVXBkYXRlKSB7CiAgICAgICAgYm9keUEudXBkYXRlQUFCQigpOwogICAgICB9CgogICAgICBpZiAoYm9keUIuYWFiYk5lZWRzVXBkYXRlKSB7CiAgICAgICAgYm9keUIudXBkYXRlQUFCQigpOwogICAgICB9IC8vIENoZWNrIEFBQkIgLyBBQUJCCgoKICAgICAgaWYgKGJvZHlBLmFhYmIub3ZlcmxhcHMoYm9keUIuYWFiYikpIHsKICAgICAgICBwYWlyczEucHVzaChib2R5QSk7CiAgICAgICAgcGFpcnMyLnB1c2goYm9keUIpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIFJlbW92ZXMgZHVwbGljYXRlIHBhaXJzIGZyb20gdGhlIHBhaXIgYXJyYXlzLgogICAgICovCgoKICAgIG1ha2VQYWlyc1VuaXF1ZShwYWlyczEsIHBhaXJzMikgewogICAgICBjb25zdCB0ID0gQnJvYWRwaGFzZV9tYWtlUGFpcnNVbmlxdWVfdGVtcDsKICAgICAgY29uc3QgcDEgPSBCcm9hZHBoYXNlX21ha2VQYWlyc1VuaXF1ZV9wMTsKICAgICAgY29uc3QgcDIgPSBCcm9hZHBoYXNlX21ha2VQYWlyc1VuaXF1ZV9wMjsKICAgICAgY29uc3QgTiA9IHBhaXJzMS5sZW5ndGg7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTjsgaSsrKSB7CiAgICAgICAgcDFbaV0gPSBwYWlyczFbaV07CiAgICAgICAgcDJbaV0gPSBwYWlyczJbaV07CiAgICAgIH0KCiAgICAgIHBhaXJzMS5sZW5ndGggPSAwOwogICAgICBwYWlyczIubGVuZ3RoID0gMDsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBjb25zdCBpZDEgPSBwMVtpXS5pZDsKICAgICAgICBjb25zdCBpZDIgPSBwMltpXS5pZDsKICAgICAgICBjb25zdCBrZXkgPSBpZDEgPCBpZDIgPyBpZDEgKyAiLCIgKyBpZDIgOiBpZDIgKyAiLCIgKyBpZDE7CiAgICAgICAgdFtrZXldID0gaTsKICAgICAgICB0LmtleXMucHVzaChrZXkpOwogICAgICB9CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gdC5rZXlzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY29uc3Qga2V5ID0gdC5rZXlzLnBvcCgpOwogICAgICAgIGNvbnN0IHBhaXJJbmRleCA9IHRba2V5XTsKICAgICAgICBwYWlyczEucHVzaChwMVtwYWlySW5kZXhdKTsKICAgICAgICBwYWlyczIucHVzaChwMltwYWlySW5kZXhdKTsKICAgICAgICBkZWxldGUgdFtrZXldOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIFRvIGJlIGltcGxlbWVudGVkIGJ5IHN1YmNhc3NlcwogICAgICovCgoKICAgIHNldFdvcmxkKHdvcmxkKSB7fQogICAgLyoqCiAgICAgKiBDaGVjayBpZiB0aGUgYm91bmRpbmcgc3BoZXJlcyBvZiB0d28gYm9kaWVzIG92ZXJsYXAuCiAgICAgKi8KCgogICAgc3RhdGljIGJvdW5kaW5nU3BoZXJlQ2hlY2soYm9keUEsIGJvZHlCKSB7CiAgICAgIGNvbnN0IGRpc3QgPSBuZXcgVmVjMygpOyAvLyBic2NfZGlzdDsKCiAgICAgIGJvZHlBLnBvc2l0aW9uLnZzdWIoYm9keUIucG9zaXRpb24sIGRpc3QpOwogICAgICBjb25zdCBzYSA9IGJvZHlBLnNoYXBlc1swXTsKICAgICAgY29uc3Qgc2IgPSBib2R5Qi5zaGFwZXNbMF07CiAgICAgIHJldHVybiBNYXRoLnBvdyhzYS5ib3VuZGluZ1NwaGVyZVJhZGl1cyArIHNiLmJvdW5kaW5nU3BoZXJlUmFkaXVzLCAyKSA+IGRpc3QubGVuZ3RoU3F1YXJlZCgpOwogICAgfQogICAgLyoqCiAgICAgKiBSZXR1cm5zIGFsbCB0aGUgYm9kaWVzIHdpdGhpbiB0aGUgQUFCQi4KICAgICAqLwoKCiAgICBhYWJiUXVlcnkod29ybGQsIGFhYmIsIHJlc3VsdCkgewogICAgICBjb25zb2xlLndhcm4oJy5hYWJiUXVlcnkgaXMgbm90IGltcGxlbWVudGVkIGluIHRoaXMgQnJvYWRwaGFzZSBzdWJjbGFzcy4nKTsKICAgICAgcmV0dXJuIFtdOwogICAgfQoKICB9IC8vIFRlbXAgb2JqZWN0cwoKCiAgY29uc3QgQnJvYWRwaGFzZV9jb2xsaXNpb25QYWlyc19yID0gbmV3IFZlYzMoKTsKICBjb25zdCBCcm9hZHBoYXNlX21ha2VQYWlyc1VuaXF1ZV90ZW1wID0gewogICAga2V5czogW10KICB9OwogIGNvbnN0IEJyb2FkcGhhc2VfbWFrZVBhaXJzVW5pcXVlX3AxID0gW107CiAgY29uc3QgQnJvYWRwaGFzZV9tYWtlUGFpcnNVbmlxdWVfcDIgPSBbXTsKCiAgbmV3IFZlYzMoKTsKICAvKioKICAgKiBOYWl2ZSBicm9hZHBoYXNlIGltcGxlbWVudGF0aW9uLCB1c2VkIGluIGxhY2sgb2YgYmV0dGVyIG9uZXMuCiAgICoKICAgKiBUaGUgbmFpdmUgYnJvYWRwaGFzZSBsb29rcyBhdCBhbGwgcG9zc2libGUgcGFpcnMgd2l0aG91dCByZXN0cmljdGlvbiwgdGhlcmVmb3JlIGl0IGhhcyBjb21wbGV4aXR5IE5eMiBfKHdoaWNoIGlzIGJhZClfCiAgICovCgogIGNsYXNzIE5haXZlQnJvYWRwaGFzZSBleHRlbmRzIEJyb2FkcGhhc2UgewogICAgLyoqCiAgICAgKiBAdG9kbyBSZW1vdmUgdXNlbGVzcyBjb25zdHJ1Y3RvcgogICAgICovCiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgc3VwZXIoKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IGFsbCB0aGUgY29sbGlzaW9uIHBhaXJzIGluIHRoZSBwaHlzaWNzIHdvcmxkCiAgICAgKi8KCgogICAgY29sbGlzaW9uUGFpcnMod29ybGQsIHBhaXJzMSwgcGFpcnMyKSB7CiAgICAgIGNvbnN0IGJvZGllcyA9IHdvcmxkLmJvZGllczsKICAgICAgY29uc3QgbiA9IGJvZGllcy5sZW5ndGg7CiAgICAgIGxldCBiaTsKICAgICAgbGV0IGJqOyAvLyBOYWl2ZSBOXjIgZnR3IQoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IG47IGkrKykgewogICAgICAgIGZvciAobGV0IGogPSAwOyBqICE9PSBpOyBqKyspIHsKICAgICAgICAgIGJpID0gYm9kaWVzW2ldOwogICAgICAgICAgYmogPSBib2RpZXNbal07CgogICAgICAgICAgaWYgKCF0aGlzLm5lZWRCcm9hZHBoYXNlQ29sbGlzaW9uKGJpLCBiaikpIHsKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICB9CgogICAgICAgICAgdGhpcy5pbnRlcnNlY3Rpb25UZXN0KGJpLCBiaiwgcGFpcnMxLCBwYWlyczIpOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBSZXR1cm5zIGFsbCB0aGUgYm9kaWVzIHdpdGhpbiBhbiBBQUJCLgogICAgICogQHBhcmFtIHJlc3VsdCBBbiBhcnJheSB0byBzdG9yZSByZXN1bHRpbmcgYm9kaWVzIGluLgogICAgICovCgoKICAgIGFhYmJRdWVyeSh3b3JsZCwgYWFiYiwgcmVzdWx0ID0gW10pIHsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB3b3JsZC5ib2RpZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBiID0gd29ybGQuYm9kaWVzW2ldOwoKICAgICAgICBpZiAoYi5hYWJiTmVlZHNVcGRhdGUpIHsKICAgICAgICAgIGIudXBkYXRlQUFCQigpOwogICAgICAgIH0gLy8gVWdseSBoYWNrIHVudGlsIEJvZHkgZ2V0cyBhYWJiCgoKICAgICAgICBpZiAoYi5hYWJiLm92ZXJsYXBzKGFhYmIpKSB7CiAgICAgICAgICByZXN1bHQucHVzaChiKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CgogIH0KICAvKioKICAgKiBTdG9yYWdlIGZvciBSYXkgY2FzdGluZyBkYXRhCiAgICovCgoKICBjbGFzcyBSYXljYXN0UmVzdWx0IHsKICAgIC8qKgogICAgICogcmF5RnJvbVdvcmxkCiAgICAgKi8KCiAgICAvKioKICAgICAqIHJheVRvV29ybGQKICAgICAqLwoKICAgIC8qKgogICAgICogaGl0Tm9ybWFsV29ybGQKICAgICAqLwoKICAgIC8qKgogICAgICogaGl0UG9pbnRXb3JsZAogICAgICovCgogICAgLyoqCiAgICAgKiBoYXNIaXQKICAgICAqLwoKICAgIC8qKgogICAgICogc2hhcGUKICAgICAqLwoKICAgIC8qKgogICAgICogYm9keQogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgaW5kZXggb2YgdGhlIGhpdCB0cmlhbmdsZSwgaWYgdGhlIGhpdCBzaGFwZSB3YXMgYSB0cmltZXNoCiAgICAgKi8KCiAgICAvKioKICAgICAqIERpc3RhbmNlIHRvIHRoZSBoaXQuIFdpbGwgYmUgc2V0IHRvIC0xIGlmIHRoZXJlIHdhcyBubyBoaXQKICAgICAqLwoKICAgIC8qKgogICAgICogSWYgdGhlIHJheSBzaG91bGQgc3RvcCB0cmF2ZXJzaW5nIHRoZSBib2RpZXMKICAgICAqLwogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHRoaXMucmF5RnJvbVdvcmxkID0gdm9pZCAwOwogICAgICB0aGlzLnJheVRvV29ybGQgPSB2b2lkIDA7CiAgICAgIHRoaXMuaGl0Tm9ybWFsV29ybGQgPSB2b2lkIDA7CiAgICAgIHRoaXMuaGl0UG9pbnRXb3JsZCA9IHZvaWQgMDsKICAgICAgdGhpcy5oYXNIaXQgPSB2b2lkIDA7CiAgICAgIHRoaXMuc2hhcGUgPSB2b2lkIDA7CiAgICAgIHRoaXMuYm9keSA9IHZvaWQgMDsKICAgICAgdGhpcy5oaXRGYWNlSW5kZXggPSB2b2lkIDA7CiAgICAgIHRoaXMuZGlzdGFuY2UgPSB2b2lkIDA7CiAgICAgIHRoaXMuc2hvdWxkU3RvcCA9IHZvaWQgMDsKICAgICAgdGhpcy5yYXlGcm9tV29ybGQgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLnJheVRvV29ybGQgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmhpdE5vcm1hbFdvcmxkID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5oaXRQb2ludFdvcmxkID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5oYXNIaXQgPSBmYWxzZTsKICAgICAgdGhpcy5zaGFwZSA9IG51bGw7CiAgICAgIHRoaXMuYm9keSA9IG51bGw7CiAgICAgIHRoaXMuaGl0RmFjZUluZGV4ID0gLTE7CiAgICAgIHRoaXMuZGlzdGFuY2UgPSAtMTsKICAgICAgdGhpcy5zaG91bGRTdG9wID0gZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIFJlc2V0IGFsbCByZXN1bHQgZGF0YS4KICAgICAqLwoKCiAgICByZXNldCgpIHsKICAgICAgdGhpcy5yYXlGcm9tV29ybGQuc2V0WmVybygpOwogICAgICB0aGlzLnJheVRvV29ybGQuc2V0WmVybygpOwogICAgICB0aGlzLmhpdE5vcm1hbFdvcmxkLnNldFplcm8oKTsKICAgICAgdGhpcy5oaXRQb2ludFdvcmxkLnNldFplcm8oKTsKICAgICAgdGhpcy5oYXNIaXQgPSBmYWxzZTsKICAgICAgdGhpcy5zaGFwZSA9IG51bGw7CiAgICAgIHRoaXMuYm9keSA9IG51bGw7CiAgICAgIHRoaXMuaGl0RmFjZUluZGV4ID0gLTE7CiAgICAgIHRoaXMuZGlzdGFuY2UgPSAtMTsKICAgICAgdGhpcy5zaG91bGRTdG9wID0gZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIGFib3J0CiAgICAgKi8KCgogICAgYWJvcnQoKSB7CiAgICAgIHRoaXMuc2hvdWxkU3RvcCA9IHRydWU7CiAgICB9CiAgICAvKioKICAgICAqIFNldCByZXN1bHQgZGF0YS4KICAgICAqLwoKCiAgICBzZXQocmF5RnJvbVdvcmxkLCByYXlUb1dvcmxkLCBoaXROb3JtYWxXb3JsZCwgaGl0UG9pbnRXb3JsZCwgc2hhcGUsIGJvZHksIGRpc3RhbmNlKSB7CiAgICAgIHRoaXMucmF5RnJvbVdvcmxkLmNvcHkocmF5RnJvbVdvcmxkKTsKICAgICAgdGhpcy5yYXlUb1dvcmxkLmNvcHkocmF5VG9Xb3JsZCk7CiAgICAgIHRoaXMuaGl0Tm9ybWFsV29ybGQuY29weShoaXROb3JtYWxXb3JsZCk7CiAgICAgIHRoaXMuaGl0UG9pbnRXb3JsZC5jb3B5KGhpdFBvaW50V29ybGQpOwogICAgICB0aGlzLnNoYXBlID0gc2hhcGU7CiAgICAgIHRoaXMuYm9keSA9IGJvZHk7CiAgICAgIHRoaXMuZGlzdGFuY2UgPSBkaXN0YW5jZTsKICAgIH0KCiAgfQoKICBsZXQgX1NoYXBlJHR5cGVzJFNQSEVSRSwgX1NoYXBlJHR5cGVzJFBMQU5FLCBfU2hhcGUkdHlwZXMkQk9YLCBfU2hhcGUkdHlwZXMkQ1lMSU5ERVIsIF9TaGFwZSR0eXBlcyRDT05WRVhQTywgX1NoYXBlJHR5cGVzJEhFSUdIVEZJLCBfU2hhcGUkdHlwZXMkVFJJTUVTSDsKICAvKioKICAgKiBSQVlfTU9ERVMKICAgKi8KCgogIGNvbnN0IFJBWV9NT0RFUyA9IHsKICAgIC8qKiBDTE9TRVNUICovCiAgICBDTE9TRVNUOiAxLAoKICAgIC8qKiBBTlkgKi8KICAgIEFOWTogMiwKCiAgICAvKiogQUxMICovCiAgICBBTEw6IDQKICB9OwogIC8qKgogICAqIFJheU1vZGUKICAgKi8KCiAgX1NoYXBlJHR5cGVzJFNQSEVSRSA9IFNoYXBlLnR5cGVzLlNQSEVSRTsKICBfU2hhcGUkdHlwZXMkUExBTkUgPSBTaGFwZS50eXBlcy5QTEFORTsKICBfU2hhcGUkdHlwZXMkQk9YID0gU2hhcGUudHlwZXMuQk9YOwogIF9TaGFwZSR0eXBlcyRDWUxJTkRFUiA9IFNoYXBlLnR5cGVzLkNZTElOREVSOwogIF9TaGFwZSR0eXBlcyRDT05WRVhQTyA9IFNoYXBlLnR5cGVzLkNPTlZFWFBPTFlIRURST047CiAgX1NoYXBlJHR5cGVzJEhFSUdIVEZJID0gU2hhcGUudHlwZXMuSEVJR0hURklFTEQ7CiAgX1NoYXBlJHR5cGVzJFRSSU1FU0ggPSBTaGFwZS50eXBlcy5UUklNRVNIOwogIC8qKgogICAqIEEgbGluZSBpbiAzRCBzcGFjZSB0aGF0IGludGVyc2VjdHMgYm9kaWVzIGFuZCByZXR1cm4gcG9pbnRzLgogICAqLwoKICBjbGFzcyBSYXkgewogICAgLyoqCiAgICAgKiBmcm9tCiAgICAgKi8KCiAgICAvKioKICAgICAqIHRvCiAgICAgKi8KCiAgICAvKioKICAgICAqIGRpcmVjdGlvbgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgcHJlY2lzaW9uIG9mIHRoZSByYXkuIFVzZWQgd2hlbiBjaGVja2luZyBwYXJhbGxlbGl0eSBldGMuCiAgICAgKiBAZGVmYXVsdCAwLjAwMDEKICAgICAqLwoKICAgIC8qKgogICAgICogU2V0IHRvIGBmYWxzZWAgaWYgeW91IGRvbid0IHdhbnQgdGhlIFJheSB0byB0YWtlIGBjb2xsaXNpb25SZXNwb25zZWAgZmxhZ3MgaW50byBhY2NvdW50IG9uIGJvZGllcyBhbmQgc2hhcGVzLgogICAgICogQGRlZmF1bHQgdHJ1ZQogICAgICovCgogICAgLyoqCiAgICAgKiBJZiBzZXQgdG8gYHRydWVgLCB0aGUgcmF5IHNraXBzIGFueSBoaXRzIHdpdGggbm9ybWFsLmRvdChyYXlEaXJlY3Rpb24pIDwgMC4KICAgICAqIEBkZWZhdWx0IGZhbHNlCiAgICAgKi8KCiAgICAvKioKICAgICAqIGNvbGxpc2lvbkZpbHRlck1hc2sKICAgICAqIEBkZWZhdWx0IC0xCiAgICAgKi8KCiAgICAvKioKICAgICAqIGNvbGxpc2lvbkZpbHRlckdyb3VwCiAgICAgKiBAZGVmYXVsdCAtMQogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgaW50ZXJzZWN0aW9uIG1vZGUuIFNob3VsZCBiZSBSYXkuQU5ZLCBSYXkuQUxMIG9yIFJheS5DTE9TRVNULgogICAgICogQGRlZmF1bHQgUkFZLkFOWQogICAgICovCgogICAgLyoqCiAgICAgKiBDdXJyZW50IHJlc3VsdCBvYmplY3QuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFdpbGwgYmUgc2V0IHRvIGB0cnVlYCBkdXJpbmcgaW50ZXJzZWN0V29ybGQoKSBpZiB0aGUgcmF5IGhpdCBhbnl0aGluZy4KICAgICAqLwoKICAgIC8qKgogICAgICogVXNlci1wcm92aWRlZCByZXN1bHQgY2FsbGJhY2suIFdpbGwgYmUgdXNlZCBpZiBtb2RlIGlzIFJheS5BTEwuCiAgICAgKi8KCiAgICAvKioKICAgICAqIENMT1NFU1QKICAgICAqLwoKICAgIC8qKgogICAgICogQU5ZCiAgICAgKi8KCiAgICAvKioKICAgICAqIEFMTAogICAgICovCiAgICBnZXQgW19TaGFwZSR0eXBlcyRTUEhFUkVdKCkgewogICAgICByZXR1cm4gdGhpcy5faW50ZXJzZWN0U3BoZXJlOwogICAgfQoKICAgIGdldCBbX1NoYXBlJHR5cGVzJFBMQU5FXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2ludGVyc2VjdFBsYW5lOwogICAgfQoKICAgIGdldCBbX1NoYXBlJHR5cGVzJEJPWF0oKSB7CiAgICAgIHJldHVybiB0aGlzLl9pbnRlcnNlY3RCb3g7CiAgICB9CgogICAgZ2V0IFtfU2hhcGUkdHlwZXMkQ1lMSU5ERVJdKCkgewogICAgICByZXR1cm4gdGhpcy5faW50ZXJzZWN0Q29udmV4OwogICAgfQoKICAgIGdldCBbX1NoYXBlJHR5cGVzJENPTlZFWFBPXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2ludGVyc2VjdENvbnZleDsKICAgIH0KCiAgICBnZXQgW19TaGFwZSR0eXBlcyRIRUlHSFRGSV0oKSB7CiAgICAgIHJldHVybiB0aGlzLl9pbnRlcnNlY3RIZWlnaHRmaWVsZDsKICAgIH0KCiAgICBnZXQgW19TaGFwZSR0eXBlcyRUUklNRVNIXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2ludGVyc2VjdFRyaW1lc2g7CiAgICB9CgogICAgY29uc3RydWN0b3IoZnJvbSA9IG5ldyBWZWMzKCksIHRvID0gbmV3IFZlYzMoKSkgewogICAgICB0aGlzLmZyb20gPSB2b2lkIDA7CiAgICAgIHRoaXMudG8gPSB2b2lkIDA7CiAgICAgIHRoaXMuZGlyZWN0aW9uID0gdm9pZCAwOwogICAgICB0aGlzLnByZWNpc2lvbiA9IHZvaWQgMDsKICAgICAgdGhpcy5jaGVja0NvbGxpc2lvblJlc3BvbnNlID0gdm9pZCAwOwogICAgICB0aGlzLnNraXBCYWNrZmFjZXMgPSB2b2lkIDA7CiAgICAgIHRoaXMuY29sbGlzaW9uRmlsdGVyTWFzayA9IHZvaWQgMDsKICAgICAgdGhpcy5jb2xsaXNpb25GaWx0ZXJHcm91cCA9IHZvaWQgMDsKICAgICAgdGhpcy5tb2RlID0gdm9pZCAwOwogICAgICB0aGlzLnJlc3VsdCA9IHZvaWQgMDsKICAgICAgdGhpcy5oYXNIaXQgPSB2b2lkIDA7CiAgICAgIHRoaXMuY2FsbGJhY2sgPSB2b2lkIDA7CiAgICAgIHRoaXMuZnJvbSA9IGZyb20uY2xvbmUoKTsKICAgICAgdGhpcy50byA9IHRvLmNsb25lKCk7CiAgICAgIHRoaXMuZGlyZWN0aW9uID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5wcmVjaXNpb24gPSAwLjAwMDE7CiAgICAgIHRoaXMuY2hlY2tDb2xsaXNpb25SZXNwb25zZSA9IHRydWU7CiAgICAgIHRoaXMuc2tpcEJhY2tmYWNlcyA9IGZhbHNlOwogICAgICB0aGlzLmNvbGxpc2lvbkZpbHRlck1hc2sgPSAtMTsKICAgICAgdGhpcy5jb2xsaXNpb25GaWx0ZXJHcm91cCA9IC0xOwogICAgICB0aGlzLm1vZGUgPSBSYXkuQU5ZOwogICAgICB0aGlzLnJlc3VsdCA9IG5ldyBSYXljYXN0UmVzdWx0KCk7CiAgICAgIHRoaXMuaGFzSGl0ID0gZmFsc2U7CgogICAgICB0aGlzLmNhbGxiYWNrID0gcmVzdWx0ID0+IHt9OwogICAgfQogICAgLyoqCiAgICAgKiBEbyBpdGVyc2VjdGlvbiBhZ2FpbnN0IGFsbCBib2RpZXMgaW4gdGhlIGdpdmVuIFdvcmxkLgogICAgICogQHJldHVybiBUcnVlIGlmIHRoZSByYXkgaGl0IGFueXRoaW5nLCBvdGhlcndpc2UgZmFsc2UuCiAgICAgKi8KCgogICAgaW50ZXJzZWN0V29ybGQod29ybGQsIG9wdGlvbnMpIHsKICAgICAgdGhpcy5tb2RlID0gb3B0aW9ucy5tb2RlIHx8IFJheS5BTlk7CiAgICAgIHRoaXMucmVzdWx0ID0gb3B0aW9ucy5yZXN1bHQgfHwgbmV3IFJheWNhc3RSZXN1bHQoKTsKICAgICAgdGhpcy5za2lwQmFja2ZhY2VzID0gISFvcHRpb25zLnNraXBCYWNrZmFjZXM7CiAgICAgIHRoaXMuY29sbGlzaW9uRmlsdGVyTWFzayA9IHR5cGVvZiBvcHRpb25zLmNvbGxpc2lvbkZpbHRlck1hc2sgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5jb2xsaXNpb25GaWx0ZXJNYXNrIDogLTE7CiAgICAgIHRoaXMuY29sbGlzaW9uRmlsdGVyR3JvdXAgPSB0eXBlb2Ygb3B0aW9ucy5jb2xsaXNpb25GaWx0ZXJHcm91cCAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmNvbGxpc2lvbkZpbHRlckdyb3VwIDogLTE7CiAgICAgIHRoaXMuY2hlY2tDb2xsaXNpb25SZXNwb25zZSA9IHR5cGVvZiBvcHRpb25zLmNoZWNrQ29sbGlzaW9uUmVzcG9uc2UgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5jaGVja0NvbGxpc2lvblJlc3BvbnNlIDogdHJ1ZTsKCiAgICAgIGlmIChvcHRpb25zLmZyb20pIHsKICAgICAgICB0aGlzLmZyb20uY29weShvcHRpb25zLmZyb20pOwogICAgICB9CgogICAgICBpZiAob3B0aW9ucy50bykgewogICAgICAgIHRoaXMudG8uY29weShvcHRpb25zLnRvKTsKICAgICAgfQoKICAgICAgdGhpcy5jYWxsYmFjayA9IG9wdGlvbnMuY2FsbGJhY2sgfHwgKCgpID0+IHt9KTsKCiAgICAgIHRoaXMuaGFzSGl0ID0gZmFsc2U7CiAgICAgIHRoaXMucmVzdWx0LnJlc2V0KCk7CiAgICAgIHRoaXMudXBkYXRlRGlyZWN0aW9uKCk7CiAgICAgIHRoaXMuZ2V0QUFCQih0bXBBQUJCJDEpOwogICAgICB0bXBBcnJheS5sZW5ndGggPSAwOwogICAgICB3b3JsZC5icm9hZHBoYXNlLmFhYmJRdWVyeSh3b3JsZCwgdG1wQUFCQiQxLCB0bXBBcnJheSk7CiAgICAgIHRoaXMuaW50ZXJzZWN0Qm9kaWVzKHRtcEFycmF5KTsKICAgICAgcmV0dXJuIHRoaXMuaGFzSGl0OwogICAgfQogICAgLyoqCiAgICAgKiBTaG9vdCBhIHJheSBhdCBhIGJvZHksIGdldCBiYWNrIGluZm9ybWF0aW9uIGFib3V0IHRoZSBoaXQuCiAgICAgKiBAZGVwcmVjYXRlZCBAcGFyYW0gcmVzdWx0IHNldCB0aGUgcmVzdWx0IHByb3BlcnR5IG9mIHRoZSBSYXkgaW5zdGVhZC4KICAgICAqLwoKCiAgICBpbnRlcnNlY3RCb2R5KGJvZHksIHJlc3VsdCkgewogICAgICBpZiAocmVzdWx0KSB7CiAgICAgICAgdGhpcy5yZXN1bHQgPSByZXN1bHQ7CiAgICAgICAgdGhpcy51cGRhdGVEaXJlY3Rpb24oKTsKICAgICAgfQoKICAgICAgY29uc3QgY2hlY2tDb2xsaXNpb25SZXNwb25zZSA9IHRoaXMuY2hlY2tDb2xsaXNpb25SZXNwb25zZTsKCiAgICAgIGlmIChjaGVja0NvbGxpc2lvblJlc3BvbnNlICYmICFib2R5LmNvbGxpc2lvblJlc3BvbnNlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoKHRoaXMuY29sbGlzaW9uRmlsdGVyR3JvdXAgJiBib2R5LmNvbGxpc2lvbkZpbHRlck1hc2spID09PSAwIHx8IChib2R5LmNvbGxpc2lvbkZpbHRlckdyb3VwICYgdGhpcy5jb2xsaXNpb25GaWx0ZXJNYXNrKSA9PT0gMCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgY29uc3QgeGkgPSBpbnRlcnNlY3RCb2R5X3hpOwogICAgICBjb25zdCBxaSA9IGludGVyc2VjdEJvZHlfcWk7CgogICAgICBmb3IgKGxldCBpID0gMCwgTiA9IGJvZHkuc2hhcGVzLmxlbmd0aDsgaSA8IE47IGkrKykgewogICAgICAgIGNvbnN0IHNoYXBlID0gYm9keS5zaGFwZXNbaV07CgogICAgICAgIGlmIChjaGVja0NvbGxpc2lvblJlc3BvbnNlICYmICFzaGFwZS5jb2xsaXNpb25SZXNwb25zZSkgewogICAgICAgICAgY29udGludWU7IC8vIFNraXAKICAgICAgICB9CgogICAgICAgIGJvZHkucXVhdGVybmlvbi5tdWx0KGJvZHkuc2hhcGVPcmllbnRhdGlvbnNbaV0sIHFpKTsKICAgICAgICBib2R5LnF1YXRlcm5pb24udm11bHQoYm9keS5zaGFwZU9mZnNldHNbaV0sIHhpKTsKICAgICAgICB4aS52YWRkKGJvZHkucG9zaXRpb24sIHhpKTsKICAgICAgICB0aGlzLmludGVyc2VjdFNoYXBlKHNoYXBlLCBxaSwgeGksIGJvZHkpOwoKICAgICAgICBpZiAodGhpcy5yZXN1bHQuc2hvdWxkU3RvcCkgewogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIFNob290IGEgcmF5IGF0IGFuIGFycmF5IGJvZGllcywgZ2V0IGJhY2sgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGhpdC4KICAgICAqIEBwYXJhbSBib2RpZXMgQW4gYXJyYXkgb2YgQm9keSBvYmplY3RzLgogICAgICogQGRlcHJlY2F0ZWQgQHBhcmFtIHJlc3VsdCBzZXQgdGhlIHJlc3VsdCBwcm9wZXJ0eSBvZiB0aGUgUmF5IGluc3RlYWQuCiAgICAgKgogICAgICovCgoKICAgIGludGVyc2VjdEJvZGllcyhib2RpZXMsIHJlc3VsdCkgewogICAgICBpZiAocmVzdWx0KSB7CiAgICAgICAgdGhpcy5yZXN1bHQgPSByZXN1bHQ7CiAgICAgICAgdGhpcy51cGRhdGVEaXJlY3Rpb24oKTsKICAgICAgfQoKICAgICAgZm9yIChsZXQgaSA9IDAsIGwgPSBib2RpZXMubGVuZ3RoOyAhdGhpcy5yZXN1bHQuc2hvdWxkU3RvcCAmJiBpIDwgbDsgaSsrKSB7CiAgICAgICAgdGhpcy5pbnRlcnNlY3RCb2R5KGJvZGllc1tpXSk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlcyB0aGUgZGlyZWN0aW9uIHZlY3Rvci4KICAgICAqLwoKCiAgICB1cGRhdGVEaXJlY3Rpb24oKSB7CiAgICAgIHRoaXMudG8udnN1Yih0aGlzLmZyb20sIHRoaXMuZGlyZWN0aW9uKTsKICAgICAgdGhpcy5kaXJlY3Rpb24ubm9ybWFsaXplKCk7CiAgICB9CgogICAgaW50ZXJzZWN0U2hhcGUoc2hhcGUsIHF1YXQsIHBvc2l0aW9uLCBib2R5KSB7CiAgICAgIGNvbnN0IGZyb20gPSB0aGlzLmZyb207IC8vIENoZWNraW5nIGJvdW5kaW5nU3BoZXJlCgogICAgICBjb25zdCBkaXN0YW5jZSA9IGRpc3RhbmNlRnJvbUludGVyc2VjdGlvbihmcm9tLCB0aGlzLmRpcmVjdGlvbiwgcG9zaXRpb24pOwoKICAgICAgaWYgKGRpc3RhbmNlID4gc2hhcGUuYm91bmRpbmdTcGhlcmVSYWRpdXMpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNvbnN0IGludGVyc2VjdE1ldGhvZCA9IHRoaXNbc2hhcGUudHlwZV07CgogICAgICBpZiAoaW50ZXJzZWN0TWV0aG9kKSB7CiAgICAgICAgaW50ZXJzZWN0TWV0aG9kLmNhbGwodGhpcywgc2hhcGUsIHF1YXQsIHBvc2l0aW9uLCBib2R5LCBzaGFwZSk7CiAgICAgIH0KICAgIH0KCiAgICBfaW50ZXJzZWN0Qm94KGJveCwgcXVhdCwgcG9zaXRpb24sIGJvZHksIHJlcG9ydGVkU2hhcGUpIHsKICAgICAgcmV0dXJuIHRoaXMuX2ludGVyc2VjdENvbnZleChib3guY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLCBxdWF0LCBwb3NpdGlvbiwgYm9keSwgcmVwb3J0ZWRTaGFwZSk7CiAgICB9CgogICAgX2ludGVyc2VjdFBsYW5lKHNoYXBlLCBxdWF0LCBwb3NpdGlvbiwgYm9keSwgcmVwb3J0ZWRTaGFwZSkgewogICAgICBjb25zdCBmcm9tID0gdGhpcy5mcm9tOwogICAgICBjb25zdCB0byA9IHRoaXMudG87CiAgICAgIGNvbnN0IGRpcmVjdGlvbiA9IHRoaXMuZGlyZWN0aW9uOyAvLyBHZXQgcGxhbmUgbm9ybWFsCgogICAgICBjb25zdCB3b3JsZE5vcm1hbCA9IG5ldyBWZWMzKDAsIDAsIDEpOwogICAgICBxdWF0LnZtdWx0KHdvcmxkTm9ybWFsLCB3b3JsZE5vcm1hbCk7CiAgICAgIGNvbnN0IGxlbiA9IG5ldyBWZWMzKCk7CiAgICAgIGZyb20udnN1Yihwb3NpdGlvbiwgbGVuKTsKICAgICAgY29uc3QgcGxhbmVUb0Zyb20gPSBsZW4uZG90KHdvcmxkTm9ybWFsKTsKICAgICAgdG8udnN1Yihwb3NpdGlvbiwgbGVuKTsKICAgICAgY29uc3QgcGxhbmVUb1RvID0gbGVuLmRvdCh3b3JsZE5vcm1hbCk7CgogICAgICBpZiAocGxhbmVUb0Zyb20gKiBwbGFuZVRvVG8gPiAwKSB7CiAgICAgICAgLy8gImZyb20iIGFuZCAidG8iIGFyZSBvbiB0aGUgc2FtZSBzaWRlIG9mIHRoZSBwbGFuZS4uLiBiYWlsIG91dAogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKGZyb20uZGlzdGFuY2VUbyh0bykgPCBwbGFuZVRvRnJvbSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgY29uc3Qgbl9kb3RfZGlyID0gd29ybGROb3JtYWwuZG90KGRpcmVjdGlvbik7CgogICAgICBpZiAoTWF0aC5hYnMobl9kb3RfZGlyKSA8IHRoaXMucHJlY2lzaW9uKSB7CiAgICAgICAgLy8gTm8gaW50ZXJzZWN0aW9uCiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBjb25zdCBwbGFuZVBvaW50VG9Gcm9tID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgZGlyX3NjYWxlZF93aXRoX3QgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBoaXRQb2ludFdvcmxkID0gbmV3IFZlYzMoKTsKICAgICAgZnJvbS52c3ViKHBvc2l0aW9uLCBwbGFuZVBvaW50VG9Gcm9tKTsKICAgICAgY29uc3QgdCA9IC13b3JsZE5vcm1hbC5kb3QocGxhbmVQb2ludFRvRnJvbSkgLyBuX2RvdF9kaXI7CiAgICAgIGRpcmVjdGlvbi5zY2FsZSh0LCBkaXJfc2NhbGVkX3dpdGhfdCk7CiAgICAgIGZyb20udmFkZChkaXJfc2NhbGVkX3dpdGhfdCwgaGl0UG9pbnRXb3JsZCk7CiAgICAgIHRoaXMucmVwb3J0SW50ZXJzZWN0aW9uKHdvcmxkTm9ybWFsLCBoaXRQb2ludFdvcmxkLCByZXBvcnRlZFNoYXBlLCBib2R5LCAtMSk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgd29ybGQgQUFCQiBvZiB0aGUgcmF5LgogICAgICovCgoKICAgIGdldEFBQkIoYWFiYikgewogICAgICBjb25zdCB7CiAgICAgICAgbG93ZXJCb3VuZCwKICAgICAgICB1cHBlckJvdW5kCiAgICAgIH0gPSBhYWJiOwogICAgICBjb25zdCB0byA9IHRoaXMudG87CiAgICAgIGNvbnN0IGZyb20gPSB0aGlzLmZyb207CiAgICAgIGxvd2VyQm91bmQueCA9IE1hdGgubWluKHRvLngsIGZyb20ueCk7CiAgICAgIGxvd2VyQm91bmQueSA9IE1hdGgubWluKHRvLnksIGZyb20ueSk7CiAgICAgIGxvd2VyQm91bmQueiA9IE1hdGgubWluKHRvLnosIGZyb20ueik7CiAgICAgIHVwcGVyQm91bmQueCA9IE1hdGgubWF4KHRvLngsIGZyb20ueCk7CiAgICAgIHVwcGVyQm91bmQueSA9IE1hdGgubWF4KHRvLnksIGZyb20ueSk7CiAgICAgIHVwcGVyQm91bmQueiA9IE1hdGgubWF4KHRvLnosIGZyb20ueik7CiAgICB9CgogICAgX2ludGVyc2VjdEhlaWdodGZpZWxkKHNoYXBlLCBxdWF0LCBwb3NpdGlvbiwgYm9keSwgcmVwb3J0ZWRTaGFwZSkgewogICAgICBzaGFwZS5kYXRhOwogICAgICBzaGFwZS5lbGVtZW50U2l6ZTsgLy8gQ29udmVydCB0aGUgcmF5IHRvIGxvY2FsIGhlaWdodGZpZWxkIGNvb3JkaW5hdGVzCgogICAgICBjb25zdCBsb2NhbFJheSA9IGludGVyc2VjdEhlaWdodGZpZWxkX2xvY2FsUmF5OyAvL25ldyBSYXkodGhpcy5mcm9tLCB0aGlzLnRvKTsKCiAgICAgIGxvY2FsUmF5LmZyb20uY29weSh0aGlzLmZyb20pOwogICAgICBsb2NhbFJheS50by5jb3B5KHRoaXMudG8pOwogICAgICBUcmFuc2Zvcm0ucG9pbnRUb0xvY2FsRnJhbWUocG9zaXRpb24sIHF1YXQsIGxvY2FsUmF5LmZyb20sIGxvY2FsUmF5LmZyb20pOwogICAgICBUcmFuc2Zvcm0ucG9pbnRUb0xvY2FsRnJhbWUocG9zaXRpb24sIHF1YXQsIGxvY2FsUmF5LnRvLCBsb2NhbFJheS50byk7CiAgICAgIGxvY2FsUmF5LnVwZGF0ZURpcmVjdGlvbigpOyAvLyBHZXQgdGhlIGluZGV4IG9mIHRoZSBkYXRhIHBvaW50cyB0byB0ZXN0IGFnYWluc3QKCiAgICAgIGNvbnN0IGluZGV4ID0gaW50ZXJzZWN0SGVpZ2h0ZmllbGRfaW5kZXg7CiAgICAgIGxldCBpTWluWDsKICAgICAgbGV0IGlNaW5ZOwogICAgICBsZXQgaU1heFg7CiAgICAgIGxldCBpTWF4WTsgLy8gU2V0IHRvIG1heAoKICAgICAgaU1pblggPSBpTWluWSA9IDA7CiAgICAgIGlNYXhYID0gaU1heFkgPSBzaGFwZS5kYXRhLmxlbmd0aCAtIDE7CiAgICAgIGNvbnN0IGFhYmIgPSBuZXcgQUFCQigpOwogICAgICBsb2NhbFJheS5nZXRBQUJCKGFhYmIpOwogICAgICBzaGFwZS5nZXRJbmRleE9mUG9zaXRpb24oYWFiYi5sb3dlckJvdW5kLngsIGFhYmIubG93ZXJCb3VuZC55LCBpbmRleCwgdHJ1ZSk7CiAgICAgIGlNaW5YID0gTWF0aC5tYXgoaU1pblgsIGluZGV4WzBdKTsKICAgICAgaU1pblkgPSBNYXRoLm1heChpTWluWSwgaW5kZXhbMV0pOwogICAgICBzaGFwZS5nZXRJbmRleE9mUG9zaXRpb24oYWFiYi51cHBlckJvdW5kLngsIGFhYmIudXBwZXJCb3VuZC55LCBpbmRleCwgdHJ1ZSk7CiAgICAgIGlNYXhYID0gTWF0aC5taW4oaU1heFgsIGluZGV4WzBdICsgMSk7CiAgICAgIGlNYXhZID0gTWF0aC5taW4oaU1heFksIGluZGV4WzFdICsgMSk7CgogICAgICBmb3IgKGxldCBpID0gaU1pblg7IGkgPCBpTWF4WDsgaSsrKSB7CiAgICAgICAgZm9yIChsZXQgaiA9IGlNaW5ZOyBqIDwgaU1heFk7IGorKykgewogICAgICAgICAgaWYgKHRoaXMucmVzdWx0LnNob3VsZFN0b3ApIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIHNoYXBlLmdldEFhYmJBdEluZGV4KGksIGosIGFhYmIpOwoKICAgICAgICAgIGlmICghYWFiYi5vdmVybGFwc1JheShsb2NhbFJheSkpIHsKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICB9IC8vIExvd2VyIHRyaWFuZ2xlCgoKICAgICAgICAgIHNoYXBlLmdldENvbnZleFRyaWFuZ2xlUGlsbGFyKGksIGosIGZhbHNlKTsKICAgICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZShwb3NpdGlvbiwgcXVhdCwgc2hhcGUucGlsbGFyT2Zmc2V0LCB3b3JsZFBpbGxhck9mZnNldCk7CgogICAgICAgICAgdGhpcy5faW50ZXJzZWN0Q29udmV4KHNoYXBlLnBpbGxhckNvbnZleCwgcXVhdCwgd29ybGRQaWxsYXJPZmZzZXQsIGJvZHksIHJlcG9ydGVkU2hhcGUsIGludGVyc2VjdENvbnZleE9wdGlvbnMpOwoKICAgICAgICAgIGlmICh0aGlzLnJlc3VsdC5zaG91bGRTdG9wKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0gLy8gVXBwZXIgdHJpYW5nbGUKCgogICAgICAgICAgc2hhcGUuZ2V0Q29udmV4VHJpYW5nbGVQaWxsYXIoaSwgaiwgdHJ1ZSk7CiAgICAgICAgICBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUocG9zaXRpb24sIHF1YXQsIHNoYXBlLnBpbGxhck9mZnNldCwgd29ybGRQaWxsYXJPZmZzZXQpOwoKICAgICAgICAgIHRoaXMuX2ludGVyc2VjdENvbnZleChzaGFwZS5waWxsYXJDb252ZXgsIHF1YXQsIHdvcmxkUGlsbGFyT2Zmc2V0LCBib2R5LCByZXBvcnRlZFNoYXBlLCBpbnRlcnNlY3RDb252ZXhPcHRpb25zKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBfaW50ZXJzZWN0U3BoZXJlKHNwaGVyZSwgcXVhdCwgcG9zaXRpb24sIGJvZHksIHJlcG9ydGVkU2hhcGUpIHsKICAgICAgY29uc3QgZnJvbSA9IHRoaXMuZnJvbTsKICAgICAgY29uc3QgdG8gPSB0aGlzLnRvOwogICAgICBjb25zdCByID0gc3BoZXJlLnJhZGl1czsKICAgICAgY29uc3QgYSA9ICh0by54IC0gZnJvbS54KSAqKiAyICsgKHRvLnkgLSBmcm9tLnkpICoqIDIgKyAodG8ueiAtIGZyb20ueikgKiogMjsKICAgICAgY29uc3QgYiA9IDIgKiAoKHRvLnggLSBmcm9tLngpICogKGZyb20ueCAtIHBvc2l0aW9uLngpICsgKHRvLnkgLSBmcm9tLnkpICogKGZyb20ueSAtIHBvc2l0aW9uLnkpICsgKHRvLnogLSBmcm9tLnopICogKGZyb20ueiAtIHBvc2l0aW9uLnopKTsKICAgICAgY29uc3QgYyA9IChmcm9tLnggLSBwb3NpdGlvbi54KSAqKiAyICsgKGZyb20ueSAtIHBvc2l0aW9uLnkpICoqIDIgKyAoZnJvbS56IC0gcG9zaXRpb24ueikgKiogMiAtIHIgKiogMjsKICAgICAgY29uc3QgZGVsdGEgPSBiICoqIDIgLSA0ICogYSAqIGM7CiAgICAgIGNvbnN0IGludGVyc2VjdGlvblBvaW50ID0gUmF5X2ludGVyc2VjdFNwaGVyZV9pbnRlcnNlY3Rpb25Qb2ludDsKICAgICAgY29uc3Qgbm9ybWFsID0gUmF5X2ludGVyc2VjdFNwaGVyZV9ub3JtYWw7CgogICAgICBpZiAoZGVsdGEgPCAwKSB7CiAgICAgICAgLy8gTm8gaW50ZXJzZWN0aW9uCiAgICAgICAgcmV0dXJuOwogICAgICB9IGVsc2UgaWYgKGRlbHRhID09PSAwKSB7CiAgICAgICAgLy8gc2luZ2xlIGludGVyc2VjdGlvbiBwb2ludAogICAgICAgIGZyb20ubGVycCh0bywgZGVsdGEsIGludGVyc2VjdGlvblBvaW50KTsKICAgICAgICBpbnRlcnNlY3Rpb25Qb2ludC52c3ViKHBvc2l0aW9uLCBub3JtYWwpOwogICAgICAgIG5vcm1hbC5ub3JtYWxpemUoKTsKICAgICAgICB0aGlzLnJlcG9ydEludGVyc2VjdGlvbihub3JtYWwsIGludGVyc2VjdGlvblBvaW50LCByZXBvcnRlZFNoYXBlLCBib2R5LCAtMSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc3QgZDEgPSAoLWIgLSBNYXRoLnNxcnQoZGVsdGEpKSAvICgyICogYSk7CiAgICAgICAgY29uc3QgZDIgPSAoLWIgKyBNYXRoLnNxcnQoZGVsdGEpKSAvICgyICogYSk7CgogICAgICAgIGlmIChkMSA+PSAwICYmIGQxIDw9IDEpIHsKICAgICAgICAgIGZyb20ubGVycCh0bywgZDEsIGludGVyc2VjdGlvblBvaW50KTsKICAgICAgICAgIGludGVyc2VjdGlvblBvaW50LnZzdWIocG9zaXRpb24sIG5vcm1hbCk7CiAgICAgICAgICBub3JtYWwubm9ybWFsaXplKCk7CiAgICAgICAgICB0aGlzLnJlcG9ydEludGVyc2VjdGlvbihub3JtYWwsIGludGVyc2VjdGlvblBvaW50LCByZXBvcnRlZFNoYXBlLCBib2R5LCAtMSk7CiAgICAgICAgfQoKICAgICAgICBpZiAodGhpcy5yZXN1bHQuc2hvdWxkU3RvcCkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgaWYgKGQyID49IDAgJiYgZDIgPD0gMSkgewogICAgICAgICAgZnJvbS5sZXJwKHRvLCBkMiwgaW50ZXJzZWN0aW9uUG9pbnQpOwogICAgICAgICAgaW50ZXJzZWN0aW9uUG9pbnQudnN1Yihwb3NpdGlvbiwgbm9ybWFsKTsKICAgICAgICAgIG5vcm1hbC5ub3JtYWxpemUoKTsKICAgICAgICAgIHRoaXMucmVwb3J0SW50ZXJzZWN0aW9uKG5vcm1hbCwgaW50ZXJzZWN0aW9uUG9pbnQsIHJlcG9ydGVkU2hhcGUsIGJvZHksIC0xKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBfaW50ZXJzZWN0Q29udmV4KHNoYXBlLCBxdWF0LCBwb3NpdGlvbiwgYm9keSwgcmVwb3J0ZWRTaGFwZSwgb3B0aW9ucykgewogICAgICBjb25zdCBub3JtYWwgPSBpbnRlcnNlY3RDb252ZXhfbm9ybWFsOwogICAgICBjb25zdCB2ZWN0b3IgPSBpbnRlcnNlY3RDb252ZXhfdmVjdG9yOwogICAgICBjb25zdCBmYWNlTGlzdCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5mYWNlTGlzdCB8fCBudWxsOyAvLyBDaGVja2luZyBmYWNlcwoKICAgICAgY29uc3QgZmFjZXMgPSBzaGFwZS5mYWNlczsKICAgICAgY29uc3QgdmVydGljZXMgPSBzaGFwZS52ZXJ0aWNlczsKICAgICAgY29uc3Qgbm9ybWFscyA9IHNoYXBlLmZhY2VOb3JtYWxzOwogICAgICBjb25zdCBkaXJlY3Rpb24gPSB0aGlzLmRpcmVjdGlvbjsKICAgICAgY29uc3QgZnJvbSA9IHRoaXMuZnJvbTsKICAgICAgY29uc3QgdG8gPSB0aGlzLnRvOwogICAgICBjb25zdCBmcm9tVG9EaXN0YW5jZSA9IGZyb20uZGlzdGFuY2VUbyh0byk7CiAgICAgIGNvbnN0IE5mYWNlcyA9IGZhY2VMaXN0ID8gZmFjZUxpc3QubGVuZ3RoIDogZmFjZXMubGVuZ3RoOwogICAgICBjb25zdCByZXN1bHQgPSB0aGlzLnJlc3VsdDsKCiAgICAgIGZvciAobGV0IGogPSAwOyAhcmVzdWx0LnNob3VsZFN0b3AgJiYgaiA8IE5mYWNlczsgaisrKSB7CiAgICAgICAgY29uc3QgZmkgPSBmYWNlTGlzdCA/IGZhY2VMaXN0W2pdIDogajsKICAgICAgICBjb25zdCBmYWNlID0gZmFjZXNbZmldOwogICAgICAgIGNvbnN0IGZhY2VOb3JtYWwgPSBub3JtYWxzW2ZpXTsKICAgICAgICBjb25zdCBxID0gcXVhdDsKICAgICAgICBjb25zdCB4ID0gcG9zaXRpb247IC8vIGRldGVybWluZSBpZiByYXkgaW50ZXJzZWN0cyB0aGUgcGxhbmUgb2YgdGhlIGZhY2UKICAgICAgICAvLyBub3RlOiB0aGlzIHdvcmtzIHJlZ2FyZGxlc3Mgb2YgdGhlIGRpcmVjdGlvbiBvZiB0aGUgZmFjZSBub3JtYWwKICAgICAgICAvLyBHZXQgcGxhbmUgcG9pbnQgaW4gd29ybGQgY29vcmRpbmF0ZXMuLi4KCiAgICAgICAgdmVjdG9yLmNvcHkodmVydGljZXNbZmFjZVswXV0pOwogICAgICAgIHEudm11bHQodmVjdG9yLCB2ZWN0b3IpOwogICAgICAgIHZlY3Rvci52YWRkKHgsIHZlY3Rvcik7IC8vIC4uLmJ1dCBtYWtlIGl0IHJlbGF0aXZlIHRvIHRoZSByYXkgZnJvbS4gV2UnbGwgZml4IHRoaXMgbGF0ZXIuCgogICAgICAgIHZlY3Rvci52c3ViKGZyb20sIHZlY3Rvcik7IC8vIEdldCBwbGFuZSBub3JtYWwKCiAgICAgICAgcS52bXVsdChmYWNlTm9ybWFsLCBub3JtYWwpOyAvLyBJZiB0aGlzIGRvdCBwcm9kdWN0IGlzIG5lZ2F0aXZlLCB3ZSBoYXZlIHNvbWV0aGluZyBpbnRlcmVzdGluZwoKICAgICAgICBjb25zdCBkb3QgPSBkaXJlY3Rpb24uZG90KG5vcm1hbCk7IC8vIEJhaWwgb3V0IGlmIHJheSBhbmQgcGxhbmUgYXJlIHBhcmFsbGVsCgogICAgICAgIGlmIChNYXRoLmFicyhkb3QpIDwgdGhpcy5wcmVjaXNpb24pIHsKICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0gLy8gY2FsYyBkaXN0YW5jZSB0byBwbGFuZQoKCiAgICAgICAgY29uc3Qgc2NhbGFyID0gbm9ybWFsLmRvdCh2ZWN0b3IpIC8gZG90OyAvLyBpZiBuZWdhdGl2ZSBkaXN0YW5jZSwgdGhlbiBwbGFuZSBpcyBiZWhpbmQgcmF5CgogICAgICAgIGlmIChzY2FsYXIgPCAwKSB7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9IC8vIGlmIChkb3QgPCAwKSB7CiAgICAgICAgLy8gSW50ZXJzZWN0aW9uIHBvaW50IGlzIGZyb20gKyBkaXJlY3Rpb24gKiBzY2FsYXIKCgogICAgICAgIGRpcmVjdGlvbi5zY2FsZShzY2FsYXIsIGludGVyc2VjdFBvaW50KTsKICAgICAgICBpbnRlcnNlY3RQb2ludC52YWRkKGZyb20sIGludGVyc2VjdFBvaW50KTsgLy8gYSBpcyB0aGUgcG9pbnQgd2UgY29tcGFyZSBwb2ludHMgYiBhbmQgYyB3aXRoLgoKICAgICAgICBhLmNvcHkodmVydGljZXNbZmFjZVswXV0pOwogICAgICAgIHEudm11bHQoYSwgYSk7CiAgICAgICAgeC52YWRkKGEsIGEpOwoKICAgICAgICBmb3IgKGxldCBpID0gMTsgIXJlc3VsdC5zaG91bGRTdG9wICYmIGkgPCBmYWNlLmxlbmd0aCAtIDE7IGkrKykgewogICAgICAgICAgLy8gVHJhbnNmb3JtIDMgdmVydGljZXMgdG8gd29ybGQgY29vcmRzCiAgICAgICAgICBiLmNvcHkodmVydGljZXNbZmFjZVtpXV0pOwogICAgICAgICAgYy5jb3B5KHZlcnRpY2VzW2ZhY2VbaSArIDFdXSk7CiAgICAgICAgICBxLnZtdWx0KGIsIGIpOwogICAgICAgICAgcS52bXVsdChjLCBjKTsKICAgICAgICAgIHgudmFkZChiLCBiKTsKICAgICAgICAgIHgudmFkZChjLCBjKTsKICAgICAgICAgIGNvbnN0IGRpc3RhbmNlID0gaW50ZXJzZWN0UG9pbnQuZGlzdGFuY2VUbyhmcm9tKTsKCiAgICAgICAgICBpZiAoIShSYXkucG9pbnRJblRyaWFuZ2xlKGludGVyc2VjdFBvaW50LCBhLCBiLCBjKSB8fCBSYXkucG9pbnRJblRyaWFuZ2xlKGludGVyc2VjdFBvaW50LCBiLCBhLCBjKSkgfHwgZGlzdGFuY2UgPiBmcm9tVG9EaXN0YW5jZSkgewogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIH0KCiAgICAgICAgICB0aGlzLnJlcG9ydEludGVyc2VjdGlvbihub3JtYWwsIGludGVyc2VjdFBvaW50LCByZXBvcnRlZFNoYXBlLCBib2R5LCBmaSk7CiAgICAgICAgfSAvLyB9CgogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEB0b2RvIE9wdGltaXplIGJ5IHRyYW5zZm9ybWluZyB0aGUgd29ybGQgdG8gbG9jYWwgc3BhY2UgZmlyc3QuCiAgICAgKiBAdG9kbyBVc2UgT2N0cmVlIGxvb2t1cAogICAgICovCgoKICAgIF9pbnRlcnNlY3RUcmltZXNoKG1lc2gsIHF1YXQsIHBvc2l0aW9uLCBib2R5LCByZXBvcnRlZFNoYXBlLCBvcHRpb25zKSB7CiAgICAgIGNvbnN0IG5vcm1hbCA9IGludGVyc2VjdFRyaW1lc2hfbm9ybWFsOwogICAgICBjb25zdCB0cmlhbmdsZXMgPSBpbnRlcnNlY3RUcmltZXNoX3RyaWFuZ2xlczsKICAgICAgY29uc3QgdHJlZVRyYW5zZm9ybSA9IGludGVyc2VjdFRyaW1lc2hfdHJlZVRyYW5zZm9ybTsKICAgICAgY29uc3QgdmVjdG9yID0gaW50ZXJzZWN0Q29udmV4X3ZlY3RvcjsKICAgICAgY29uc3QgbG9jYWxEaXJlY3Rpb24gPSBpbnRlcnNlY3RUcmltZXNoX2xvY2FsRGlyZWN0aW9uOwogICAgICBjb25zdCBsb2NhbEZyb20gPSBpbnRlcnNlY3RUcmltZXNoX2xvY2FsRnJvbTsKICAgICAgY29uc3QgbG9jYWxUbyA9IGludGVyc2VjdFRyaW1lc2hfbG9jYWxUbzsKICAgICAgY29uc3Qgd29ybGRJbnRlcnNlY3RQb2ludCA9IGludGVyc2VjdFRyaW1lc2hfd29ybGRJbnRlcnNlY3RQb2ludDsKICAgICAgY29uc3Qgd29ybGROb3JtYWwgPSBpbnRlcnNlY3RUcmltZXNoX3dvcmxkTm9ybWFsOyAvLyBDaGVja2luZyBmYWNlcwoKICAgICAgY29uc3QgaW5kaWNlcyA9IG1lc2guaW5kaWNlczsKICAgICAgbWVzaC52ZXJ0aWNlczsgLy8gY29uc3Qgbm9ybWFscyA9IG1lc2guZmFjZU5vcm1hbHMKCiAgICAgIGNvbnN0IGZyb20gPSB0aGlzLmZyb207CiAgICAgIGNvbnN0IHRvID0gdGhpcy50bzsKICAgICAgY29uc3QgZGlyZWN0aW9uID0gdGhpcy5kaXJlY3Rpb247CiAgICAgIHRyZWVUcmFuc2Zvcm0ucG9zaXRpb24uY29weShwb3NpdGlvbik7CiAgICAgIHRyZWVUcmFuc2Zvcm0ucXVhdGVybmlvbi5jb3B5KHF1YXQpOyAvLyBUcmFuc2Zvcm0gcmF5IHRvIGxvY2FsIHNwYWNlIQoKICAgICAgVHJhbnNmb3JtLnZlY3RvclRvTG9jYWxGcmFtZShwb3NpdGlvbiwgcXVhdCwgZGlyZWN0aW9uLCBsb2NhbERpcmVjdGlvbik7CiAgICAgIFRyYW5zZm9ybS5wb2ludFRvTG9jYWxGcmFtZShwb3NpdGlvbiwgcXVhdCwgZnJvbSwgbG9jYWxGcm9tKTsKICAgICAgVHJhbnNmb3JtLnBvaW50VG9Mb2NhbEZyYW1lKHBvc2l0aW9uLCBxdWF0LCB0bywgbG9jYWxUbyk7CiAgICAgIGxvY2FsVG8ueCAqPSBtZXNoLnNjYWxlLng7CiAgICAgIGxvY2FsVG8ueSAqPSBtZXNoLnNjYWxlLnk7CiAgICAgIGxvY2FsVG8ueiAqPSBtZXNoLnNjYWxlLno7CiAgICAgIGxvY2FsRnJvbS54ICo9IG1lc2guc2NhbGUueDsKICAgICAgbG9jYWxGcm9tLnkgKj0gbWVzaC5zY2FsZS55OwogICAgICBsb2NhbEZyb20ueiAqPSBtZXNoLnNjYWxlLno7CiAgICAgIGxvY2FsVG8udnN1Yihsb2NhbEZyb20sIGxvY2FsRGlyZWN0aW9uKTsKICAgICAgbG9jYWxEaXJlY3Rpb24ubm9ybWFsaXplKCk7CiAgICAgIGNvbnN0IGZyb21Ub0Rpc3RhbmNlU3F1YXJlZCA9IGxvY2FsRnJvbS5kaXN0YW5jZVNxdWFyZWQobG9jYWxUbyk7CiAgICAgIG1lc2gudHJlZS5yYXlRdWVyeSh0aGlzLCB0cmVlVHJhbnNmb3JtLCB0cmlhbmdsZXMpOwoKICAgICAgZm9yIChsZXQgaSA9IDAsIE4gPSB0cmlhbmdsZXMubGVuZ3RoOyAhdGhpcy5yZXN1bHQuc2hvdWxkU3RvcCAmJiBpICE9PSBOOyBpKyspIHsKICAgICAgICBjb25zdCB0cmlhbmdsZXNJbmRleCA9IHRyaWFuZ2xlc1tpXTsKICAgICAgICBtZXNoLmdldE5vcm1hbCh0cmlhbmdsZXNJbmRleCwgbm9ybWFsKTsgLy8gZGV0ZXJtaW5lIGlmIHJheSBpbnRlcnNlY3RzIHRoZSBwbGFuZSBvZiB0aGUgZmFjZQogICAgICAgIC8vIG5vdGU6IHRoaXMgd29ya3MgcmVnYXJkbGVzcyBvZiB0aGUgZGlyZWN0aW9uIG9mIHRoZSBmYWNlIG5vcm1hbAogICAgICAgIC8vIEdldCBwbGFuZSBwb2ludCBpbiB3b3JsZCBjb29yZGluYXRlcy4uLgoKICAgICAgICBtZXNoLmdldFZlcnRleChpbmRpY2VzW3RyaWFuZ2xlc0luZGV4ICogM10sIGEpOyAvLyAuLi5idXQgbWFrZSBpdCByZWxhdGl2ZSB0byB0aGUgcmF5IGZyb20uIFdlJ2xsIGZpeCB0aGlzIGxhdGVyLgoKICAgICAgICBhLnZzdWIobG9jYWxGcm9tLCB2ZWN0b3IpOyAvLyBJZiB0aGlzIGRvdCBwcm9kdWN0IGlzIG5lZ2F0aXZlLCB3ZSBoYXZlIHNvbWV0aGluZyBpbnRlcmVzdGluZwoKICAgICAgICBjb25zdCBkb3QgPSBsb2NhbERpcmVjdGlvbi5kb3Qobm9ybWFsKTsgLy8gQmFpbCBvdXQgaWYgcmF5IGFuZCBwbGFuZSBhcmUgcGFyYWxsZWwKICAgICAgICAvLyBpZiAoTWF0aC5hYnMoIGRvdCApIDwgdGhpcy5wcmVjaXNpb24pewogICAgICAgIC8vICAgICBjb250aW51ZTsKICAgICAgICAvLyB9CiAgICAgICAgLy8gY2FsYyBkaXN0YW5jZSB0byBwbGFuZQoKICAgICAgICBjb25zdCBzY2FsYXIgPSBub3JtYWwuZG90KHZlY3RvcikgLyBkb3Q7IC8vIGlmIG5lZ2F0aXZlIGRpc3RhbmNlLCB0aGVuIHBsYW5lIGlzIGJlaGluZCByYXkKCiAgICAgICAgaWYgKHNjYWxhciA8IDApIHsKICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0gLy8gSW50ZXJzZWN0aW9uIHBvaW50IGlzIGZyb20gKyBkaXJlY3Rpb24gKiBzY2FsYXIKCgogICAgICAgIGxvY2FsRGlyZWN0aW9uLnNjYWxlKHNjYWxhciwgaW50ZXJzZWN0UG9pbnQpOwogICAgICAgIGludGVyc2VjdFBvaW50LnZhZGQobG9jYWxGcm9tLCBpbnRlcnNlY3RQb2ludCk7IC8vIEdldCB0cmlhbmdsZSB2ZXJ0aWNlcwoKICAgICAgICBtZXNoLmdldFZlcnRleChpbmRpY2VzW3RyaWFuZ2xlc0luZGV4ICogMyArIDFdLCBiKTsKICAgICAgICBtZXNoLmdldFZlcnRleChpbmRpY2VzW3RyaWFuZ2xlc0luZGV4ICogMyArIDJdLCBjKTsKICAgICAgICBjb25zdCBzcXVhcmVkRGlzdGFuY2UgPSBpbnRlcnNlY3RQb2ludC5kaXN0YW5jZVNxdWFyZWQobG9jYWxGcm9tKTsKCiAgICAgICAgaWYgKCEoUmF5LnBvaW50SW5UcmlhbmdsZShpbnRlcnNlY3RQb2ludCwgYiwgYSwgYykgfHwgUmF5LnBvaW50SW5UcmlhbmdsZShpbnRlcnNlY3RQb2ludCwgYSwgYiwgYykpIHx8IHNxdWFyZWREaXN0YW5jZSA+IGZyb21Ub0Rpc3RhbmNlU3F1YXJlZCkgewogICAgICAgICAgY29udGludWU7CiAgICAgICAgfSAvLyB0cmFuc2Zvcm0gaW50ZXJzZWN0cG9pbnQgYW5kIG5vcm1hbCB0byB3b3JsZAoKCiAgICAgICAgVHJhbnNmb3JtLnZlY3RvclRvV29ybGRGcmFtZShxdWF0LCBub3JtYWwsIHdvcmxkTm9ybWFsKTsKICAgICAgICBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUocG9zaXRpb24sIHF1YXQsIGludGVyc2VjdFBvaW50LCB3b3JsZEludGVyc2VjdFBvaW50KTsKICAgICAgICB0aGlzLnJlcG9ydEludGVyc2VjdGlvbih3b3JsZE5vcm1hbCwgd29ybGRJbnRlcnNlY3RQb2ludCwgcmVwb3J0ZWRTaGFwZSwgYm9keSwgdHJpYW5nbGVzSW5kZXgpOwogICAgICB9CgogICAgICB0cmlhbmdsZXMubGVuZ3RoID0gMDsKICAgIH0KICAgIC8qKgogICAgICogQHJldHVybiBUcnVlIGlmIHRoZSBpbnRlcnNlY3Rpb25zIHNob3VsZCBjb250aW51ZQogICAgICovCgoKICAgIHJlcG9ydEludGVyc2VjdGlvbihub3JtYWwsIGhpdFBvaW50V29ybGQsIHNoYXBlLCBib2R5LCBoaXRGYWNlSW5kZXgpIHsKICAgICAgY29uc3QgZnJvbSA9IHRoaXMuZnJvbTsKICAgICAgY29uc3QgdG8gPSB0aGlzLnRvOwogICAgICBjb25zdCBkaXN0YW5jZSA9IGZyb20uZGlzdGFuY2VUbyhoaXRQb2ludFdvcmxkKTsKICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5yZXN1bHQ7IC8vIFNraXAgYmFjayBmYWNlcz8KCiAgICAgIGlmICh0aGlzLnNraXBCYWNrZmFjZXMgJiYgbm9ybWFsLmRvdCh0aGlzLmRpcmVjdGlvbikgPiAwKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICByZXN1bHQuaGl0RmFjZUluZGV4ID0gdHlwZW9mIGhpdEZhY2VJbmRleCAhPT0gJ3VuZGVmaW5lZCcgPyBoaXRGYWNlSW5kZXggOiAtMTsKCiAgICAgIHN3aXRjaCAodGhpcy5tb2RlKSB7CiAgICAgICAgY2FzZSBSYXkuQUxMOgogICAgICAgICAgdGhpcy5oYXNIaXQgPSB0cnVlOwogICAgICAgICAgcmVzdWx0LnNldChmcm9tLCB0bywgbm9ybWFsLCBoaXRQb2ludFdvcmxkLCBzaGFwZSwgYm9keSwgZGlzdGFuY2UpOwogICAgICAgICAgcmVzdWx0Lmhhc0hpdCA9IHRydWU7CiAgICAgICAgICB0aGlzLmNhbGxiYWNrKHJlc3VsdCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSBSYXkuQ0xPU0VTVDoKICAgICAgICAgIC8vIFN0b3JlIGlmIGNsb3NlciB0aGFuIGN1cnJlbnQgY2xvc2VzdAogICAgICAgICAgaWYgKGRpc3RhbmNlIDwgcmVzdWx0LmRpc3RhbmNlIHx8ICFyZXN1bHQuaGFzSGl0KSB7CiAgICAgICAgICAgIHRoaXMuaGFzSGl0ID0gdHJ1ZTsKICAgICAgICAgICAgcmVzdWx0Lmhhc0hpdCA9IHRydWU7CiAgICAgICAgICAgIHJlc3VsdC5zZXQoZnJvbSwgdG8sIG5vcm1hbCwgaGl0UG9pbnRXb3JsZCwgc2hhcGUsIGJvZHksIGRpc3RhbmNlKTsKICAgICAgICAgIH0KCiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSBSYXkuQU5ZOgogICAgICAgICAgLy8gUmVwb3J0IGFuZCBzdG9wLgogICAgICAgICAgdGhpcy5oYXNIaXQgPSB0cnVlOwogICAgICAgICAgcmVzdWx0Lmhhc0hpdCA9IHRydWU7CiAgICAgICAgICByZXN1bHQuc2V0KGZyb20sIHRvLCBub3JtYWwsIGhpdFBvaW50V29ybGQsIHNoYXBlLCBib2R5LCBkaXN0YW5jZSk7CiAgICAgICAgICByZXN1bHQuc2hvdWxkU3RvcCA9IHRydWU7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBBcyBwZXIgIkJhcnljZW50cmljIFRlY2huaXF1ZSIgYXMgbmFtZWQKICAgICAqIHtAbGluayBodHRwczovL3d3dy5ibGFja3Bhd24uY29tL3RleHRzL3BvaW50aW5wb2x5L2RlZmF1bHQuaHRtbCBoZXJlfSBidXQgd2l0aG91dCB0aGUgZGl2aXNpb24KICAgICAqLwoKCiAgICBzdGF0aWMgcG9pbnRJblRyaWFuZ2xlKHAsIGEsIGIsIGMpIHsKICAgICAgYy52c3ViKGEsIHYwKTsKICAgICAgYi52c3ViKGEsIHYxKTsKICAgICAgcC52c3ViKGEsIHYyKTsKICAgICAgY29uc3QgZG90MDAgPSB2MC5kb3QodjApOwogICAgICBjb25zdCBkb3QwMSA9IHYwLmRvdCh2MSk7CiAgICAgIGNvbnN0IGRvdDAyID0gdjAuZG90KHYyKTsKICAgICAgY29uc3QgZG90MTEgPSB2MS5kb3QodjEpOwogICAgICBjb25zdCBkb3QxMiA9IHYxLmRvdCh2Mik7CiAgICAgIGxldCB1OwogICAgICBsZXQgdjsKICAgICAgcmV0dXJuICh1ID0gZG90MTEgKiBkb3QwMiAtIGRvdDAxICogZG90MTIpID49IDAgJiYgKHYgPSBkb3QwMCAqIGRvdDEyIC0gZG90MDEgKiBkb3QwMikgPj0gMCAmJiB1ICsgdiA8IGRvdDAwICogZG90MTEgLSBkb3QwMSAqIGRvdDAxOwogICAgfQoKICB9CgogIFJheS5DTE9TRVNUID0gUkFZX01PREVTLkNMT1NFU1Q7CiAgUmF5LkFOWSA9IFJBWV9NT0RFUy5BTlk7CiAgUmF5LkFMTCA9IFJBWV9NT0RFUy5BTEw7CiAgY29uc3QgdG1wQUFCQiQxID0gbmV3IEFBQkIoKTsKICBjb25zdCB0bXBBcnJheSA9IFtdOwogIGNvbnN0IHYxID0gbmV3IFZlYzMoKTsKICBjb25zdCB2MiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW50ZXJzZWN0Qm9keV94aSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW50ZXJzZWN0Qm9keV9xaSA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgY29uc3QgaW50ZXJzZWN0UG9pbnQgPSBuZXcgVmVjMygpOwogIGNvbnN0IGEgPSBuZXcgVmVjMygpOwogIGNvbnN0IGIgPSBuZXcgVmVjMygpOwogIGNvbnN0IGMgPSBuZXcgVmVjMygpOwogIGNvbnN0IGludGVyc2VjdENvbnZleE9wdGlvbnMgPSB7CiAgICBmYWNlTGlzdDogWzBdCiAgfTsKICBjb25zdCB3b3JsZFBpbGxhck9mZnNldCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW50ZXJzZWN0SGVpZ2h0ZmllbGRfbG9jYWxSYXkgPSBuZXcgUmF5KCk7CiAgY29uc3QgaW50ZXJzZWN0SGVpZ2h0ZmllbGRfaW5kZXggPSBbXTsKICBjb25zdCBSYXlfaW50ZXJzZWN0U3BoZXJlX2ludGVyc2VjdGlvblBvaW50ID0gbmV3IFZlYzMoKTsKICBjb25zdCBSYXlfaW50ZXJzZWN0U3BoZXJlX25vcm1hbCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW50ZXJzZWN0Q29udmV4X25vcm1hbCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW50ZXJzZWN0Q29udmV4X3ZlY3RvciA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW50ZXJzZWN0VHJpbWVzaF9ub3JtYWwgPSBuZXcgVmVjMygpOwogIGNvbnN0IGludGVyc2VjdFRyaW1lc2hfbG9jYWxEaXJlY3Rpb24gPSBuZXcgVmVjMygpOwogIGNvbnN0IGludGVyc2VjdFRyaW1lc2hfbG9jYWxGcm9tID0gbmV3IFZlYzMoKTsKICBjb25zdCBpbnRlcnNlY3RUcmltZXNoX2xvY2FsVG8gPSBuZXcgVmVjMygpOwogIGNvbnN0IGludGVyc2VjdFRyaW1lc2hfd29ybGROb3JtYWwgPSBuZXcgVmVjMygpOwogIGNvbnN0IGludGVyc2VjdFRyaW1lc2hfd29ybGRJbnRlcnNlY3RQb2ludCA9IG5ldyBWZWMzKCk7CiAgbmV3IEFBQkIoKTsKICBjb25zdCBpbnRlcnNlY3RUcmltZXNoX3RyaWFuZ2xlcyA9IFtdOwogIGNvbnN0IGludGVyc2VjdFRyaW1lc2hfdHJlZVRyYW5zZm9ybSA9IG5ldyBUcmFuc2Zvcm0oKTsKICBjb25zdCB2MCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW50ZXJzZWN0ID0gbmV3IFZlYzMoKTsKCiAgZnVuY3Rpb24gZGlzdGFuY2VGcm9tSW50ZXJzZWN0aW9uKGZyb20sIGRpcmVjdGlvbiwgcG9zaXRpb24pIHsKICAgIC8vIHYwIGlzIHZlY3RvciBmcm9tIGZyb20gdG8gcG9zaXRpb24KICAgIHBvc2l0aW9uLnZzdWIoZnJvbSwgdjApOwogICAgY29uc3QgZG90ID0gdjAuZG90KGRpcmVjdGlvbik7IC8vIGludGVyc2VjdCA9IGRpcmVjdGlvbipkb3QgKyBmcm9tCgogICAgZGlyZWN0aW9uLnNjYWxlKGRvdCwgaW50ZXJzZWN0KTsKICAgIGludGVyc2VjdC52YWRkKGZyb20sIGludGVyc2VjdCk7CiAgICBjb25zdCBkaXN0YW5jZSA9IHBvc2l0aW9uLmRpc3RhbmNlVG8oaW50ZXJzZWN0KTsKICAgIHJldHVybiBkaXN0YW5jZTsKICB9CiAgLyoqCiAgICogU3dlZXAgYW5kIHBydW5lIGJyb2FkcGhhc2UgYWxvbmcgb25lIGF4aXMuCiAgICovCgoKICBjbGFzcyBTQVBCcm9hZHBoYXNlIGV4dGVuZHMgQnJvYWRwaGFzZSB7CiAgICAvKioKICAgICAqIExpc3Qgb2YgYm9kaWVzIGN1cnJlbnRseSBpbiB0aGUgYnJvYWRwaGFzZS4KICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIHdvcmxkIHRvIHNlYXJjaCBpbi4KICAgICAqLwoKICAgIC8qKgogICAgICogQXhpcyB0byBzb3J0IHRoZSBib2RpZXMgYWxvbmcuCiAgICAgKiBTZXQgdG8gMCBmb3IgeCBheGlzLCBhbmQgMSBmb3IgeSBheGlzLgogICAgICogRm9yIGJlc3QgcGVyZm9ybWFuY2UsIHBpY2sgdGhlIGF4aXMgd2hlcmUgYm9kaWVzIGFyZSBtb3N0IGRpc3RyaWJ1dGVkLgogICAgICovCgogICAgLyoqCiAgICAgKiBDaGVjayBpZiB0aGUgYm91bmRzIG9mIHR3byBib2RpZXMgb3ZlcmxhcCwgYWxvbmcgdGhlIGdpdmVuIFNBUCBheGlzLgogICAgICovCiAgICBzdGF0aWMgY2hlY2tCb3VuZHMoYmksIGJqLCBheGlzSW5kZXgpIHsKICAgICAgbGV0IGJpUG9zOwogICAgICBsZXQgYmpQb3M7CgogICAgICBpZiAoYXhpc0luZGV4ID09PSAwKSB7CiAgICAgICAgYmlQb3MgPSBiaS5wb3NpdGlvbi54OwogICAgICAgIGJqUG9zID0gYmoucG9zaXRpb24ueDsKICAgICAgfSBlbHNlIGlmIChheGlzSW5kZXggPT09IDEpIHsKICAgICAgICBiaVBvcyA9IGJpLnBvc2l0aW9uLnk7CiAgICAgICAgYmpQb3MgPSBiai5wb3NpdGlvbi55OwogICAgICB9IGVsc2UgaWYgKGF4aXNJbmRleCA9PT0gMikgewogICAgICAgIGJpUG9zID0gYmkucG9zaXRpb24uejsKICAgICAgICBialBvcyA9IGJqLnBvc2l0aW9uLno7CiAgICAgIH0KCiAgICAgIGNvbnN0IHJpID0gYmkuYm91bmRpbmdSYWRpdXMsCiAgICAgICAgICAgIHJqID0gYmouYm91bmRpbmdSYWRpdXMsCiAgICAgICAgICAgIGJvdW5kQTIgPSBiaVBvcyArIHJpLAogICAgICAgICAgICBib3VuZEIxID0gYmpQb3MgLSByajsKICAgICAgcmV0dXJuIGJvdW5kQjEgPCBib3VuZEEyOwogICAgfSAvLyBOb3RlOiB0aGVzZSBhcmUgaWRlbnRpY2FsLCBzYXZlIGZvciB4L3kveiBsb3dlcmJvdW5kCgogICAgLyoqCiAgICAgKiBpbnNlcnRpb25Tb3J0WAogICAgICovCgoKICAgIHN0YXRpYyBpbnNlcnRpb25Tb3J0WChhKSB7CiAgICAgIGZvciAobGV0IGkgPSAxLCBsID0gYS5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgICBjb25zdCB2ID0gYVtpXTsKICAgICAgICBsZXQgajsKCiAgICAgICAgZm9yIChqID0gaSAtIDE7IGogPj0gMDsgai0tKSB7CiAgICAgICAgICBpZiAoYVtqXS5hYWJiLmxvd2VyQm91bmQueCA8PSB2LmFhYmIubG93ZXJCb3VuZC54KSB7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICAgIGFbaiArIDFdID0gYVtqXTsKICAgICAgICB9CgogICAgICAgIGFbaiArIDFdID0gdjsKICAgICAgfQoKICAgICAgcmV0dXJuIGE7CiAgICB9CiAgICAvKioKICAgICAqIGluc2VydGlvblNvcnRZCiAgICAgKi8KCgogICAgc3RhdGljIGluc2VydGlvblNvcnRZKGEpIHsKICAgICAgZm9yIChsZXQgaSA9IDEsIGwgPSBhLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICAgIGNvbnN0IHYgPSBhW2ldOwogICAgICAgIGxldCBqOwoKICAgICAgICBmb3IgKGogPSBpIC0gMTsgaiA+PSAwOyBqLS0pIHsKICAgICAgICAgIGlmIChhW2pdLmFhYmIubG93ZXJCb3VuZC55IDw9IHYuYWFiYi5sb3dlckJvdW5kLnkpIHsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CgogICAgICAgICAgYVtqICsgMV0gPSBhW2pdOwogICAgICAgIH0KCiAgICAgICAgYVtqICsgMV0gPSB2OwogICAgICB9CgogICAgICByZXR1cm4gYTsKICAgIH0KICAgIC8qKgogICAgICogaW5zZXJ0aW9uU29ydFoKICAgICAqLwoKCiAgICBzdGF0aWMgaW5zZXJ0aW9uU29ydFooYSkgewogICAgICBmb3IgKGxldCBpID0gMSwgbCA9IGEubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgICAgY29uc3QgdiA9IGFbaV07CiAgICAgICAgbGV0IGo7CgogICAgICAgIGZvciAoaiA9IGkgLSAxOyBqID49IDA7IGotLSkgewogICAgICAgICAgaWYgKGFbal0uYWFiYi5sb3dlckJvdW5kLnogPD0gdi5hYWJiLmxvd2VyQm91bmQueikgewogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgICBhW2ogKyAxXSA9IGFbal07CiAgICAgICAgfQoKICAgICAgICBhW2ogKyAxXSA9IHY7CiAgICAgIH0KCiAgICAgIHJldHVybiBhOwogICAgfQoKICAgIGNvbnN0cnVjdG9yKHdvcmxkKSB7CiAgICAgIHN1cGVyKCk7CiAgICAgIHRoaXMuYXhpc0xpc3QgPSB2b2lkIDA7CiAgICAgIHRoaXMud29ybGQgPSB2b2lkIDA7CiAgICAgIHRoaXMuYXhpc0luZGV4ID0gdm9pZCAwOwogICAgICB0aGlzLl9hZGRCb2R5SGFuZGxlciA9IHZvaWQgMDsKICAgICAgdGhpcy5fcmVtb3ZlQm9keUhhbmRsZXIgPSB2b2lkIDA7CiAgICAgIHRoaXMuYXhpc0xpc3QgPSBbXTsKICAgICAgdGhpcy53b3JsZCA9IG51bGw7CiAgICAgIHRoaXMuYXhpc0luZGV4ID0gMDsKICAgICAgY29uc3QgYXhpc0xpc3QgPSB0aGlzLmF4aXNMaXN0OwoKICAgICAgdGhpcy5fYWRkQm9keUhhbmRsZXIgPSBldmVudCA9PiB7CiAgICAgICAgYXhpc0xpc3QucHVzaChldmVudC5ib2R5KTsKICAgICAgfTsKCiAgICAgIHRoaXMuX3JlbW92ZUJvZHlIYW5kbGVyID0gZXZlbnQgPT4gewogICAgICAgIGNvbnN0IGlkeCA9IGF4aXNMaXN0LmluZGV4T2YoZXZlbnQuYm9keSk7CgogICAgICAgIGlmIChpZHggIT09IC0xKSB7CiAgICAgICAgICBheGlzTGlzdC5zcGxpY2UoaWR4LCAxKTsKICAgICAgICB9CiAgICAgIH07CgogICAgICBpZiAod29ybGQpIHsKICAgICAgICB0aGlzLnNldFdvcmxkKHdvcmxkKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBDaGFuZ2UgdGhlIHdvcmxkCiAgICAgKi8KCgogICAgc2V0V29ybGQod29ybGQpIHsKICAgICAgLy8gQ2xlYXIgdGhlIG9sZCBheGlzIGFycmF5CiAgICAgIHRoaXMuYXhpc0xpc3QubGVuZ3RoID0gMDsgLy8gQWRkIGFsbCBib2RpZXMgZnJvbSB0aGUgbmV3IHdvcmxkCgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHdvcmxkLmJvZGllcy5sZW5ndGg7IGkrKykgewogICAgICAgIHRoaXMuYXhpc0xpc3QucHVzaCh3b3JsZC5ib2RpZXNbaV0pOwogICAgICB9IC8vIFJlbW92ZSBvbGQgaGFuZGxlcnMsIGlmIGFueQoKCiAgICAgIHdvcmxkLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2FkZEJvZHknLCB0aGlzLl9hZGRCb2R5SGFuZGxlcik7CiAgICAgIHdvcmxkLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3JlbW92ZUJvZHknLCB0aGlzLl9yZW1vdmVCb2R5SGFuZGxlcik7IC8vIEFkZCBoYW5kbGVycyB0byB1cGRhdGUgdGhlIGxpc3Qgb2YgYm9kaWVzLgoKICAgICAgd29ybGQuYWRkRXZlbnRMaXN0ZW5lcignYWRkQm9keScsIHRoaXMuX2FkZEJvZHlIYW5kbGVyKTsKICAgICAgd29ybGQuYWRkRXZlbnRMaXN0ZW5lcigncmVtb3ZlQm9keScsIHRoaXMuX3JlbW92ZUJvZHlIYW5kbGVyKTsKICAgICAgdGhpcy53b3JsZCA9IHdvcmxkOwogICAgICB0aGlzLmRpcnR5ID0gdHJ1ZTsKICAgIH0KICAgIC8qKgogICAgICogQ29sbGVjdCBhbGwgY29sbGlzaW9uIHBhaXJzCiAgICAgKi8KCgogICAgY29sbGlzaW9uUGFpcnMod29ybGQsIHAxLCBwMikgewogICAgICBjb25zdCBib2RpZXMgPSB0aGlzLmF4aXNMaXN0OwogICAgICBjb25zdCBOID0gYm9kaWVzLmxlbmd0aDsKICAgICAgY29uc3QgYXhpc0luZGV4ID0gdGhpcy5heGlzSW5kZXg7CiAgICAgIGxldCBpOwogICAgICBsZXQgajsKCiAgICAgIGlmICh0aGlzLmRpcnR5KSB7CiAgICAgICAgdGhpcy5zb3J0TGlzdCgpOwogICAgICAgIHRoaXMuZGlydHkgPSBmYWxzZTsKICAgICAgfSAvLyBMb29rIHRocm91Z2ggdGhlIGxpc3QKCgogICAgICBmb3IgKGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBjb25zdCBiaSA9IGJvZGllc1tpXTsKCiAgICAgICAgZm9yIChqID0gaSArIDE7IGogPCBOOyBqKyspIHsKICAgICAgICAgIGNvbnN0IGJqID0gYm9kaWVzW2pdOwoKICAgICAgICAgIGlmICghdGhpcy5uZWVkQnJvYWRwaGFzZUNvbGxpc2lvbihiaSwgYmopKSB7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgfQoKICAgICAgICAgIGlmICghU0FQQnJvYWRwaGFzZS5jaGVja0JvdW5kcyhiaSwgYmosIGF4aXNJbmRleCkpIHsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CgogICAgICAgICAgdGhpcy5pbnRlcnNlY3Rpb25UZXN0KGJpLCBiaiwgcDEsIHAyKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBzb3J0TGlzdCgpIHsKICAgICAgY29uc3QgYXhpc0xpc3QgPSB0aGlzLmF4aXNMaXN0OwogICAgICBjb25zdCBheGlzSW5kZXggPSB0aGlzLmF4aXNJbmRleDsKICAgICAgY29uc3QgTiA9IGF4aXNMaXN0Lmxlbmd0aDsgLy8gVXBkYXRlIEFBQkJzCgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTjsgaSsrKSB7CiAgICAgICAgY29uc3QgYmkgPSBheGlzTGlzdFtpXTsKCiAgICAgICAgaWYgKGJpLmFhYmJOZWVkc1VwZGF0ZSkgewogICAgICAgICAgYmkudXBkYXRlQUFCQigpOwogICAgICAgIH0KICAgICAgfSAvLyBTb3J0IHRoZSBsaXN0CgoKICAgICAgaWYgKGF4aXNJbmRleCA9PT0gMCkgewogICAgICAgIFNBUEJyb2FkcGhhc2UuaW5zZXJ0aW9uU29ydFgoYXhpc0xpc3QpOwogICAgICB9IGVsc2UgaWYgKGF4aXNJbmRleCA9PT0gMSkgewogICAgICAgIFNBUEJyb2FkcGhhc2UuaW5zZXJ0aW9uU29ydFkoYXhpc0xpc3QpOwogICAgICB9IGVsc2UgaWYgKGF4aXNJbmRleCA9PT0gMikgewogICAgICAgIFNBUEJyb2FkcGhhc2UuaW5zZXJ0aW9uU29ydFooYXhpc0xpc3QpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIENvbXB1dGVzIHRoZSB2YXJpYW5jZSBvZiB0aGUgYm9keSBwb3NpdGlvbnMgYW5kIGVzdGltYXRlcyB0aGUgYmVzdCBheGlzIHRvIHVzZS4KICAgICAqIFdpbGwgYXV0b21hdGljYWxseSBzZXQgcHJvcGVydHkgYGF4aXNJbmRleGAuCiAgICAgKi8KCgogICAgYXV0b0RldGVjdEF4aXMoKSB7CiAgICAgIGxldCBzdW1YID0gMDsKICAgICAgbGV0IHN1bVgyID0gMDsKICAgICAgbGV0IHN1bVkgPSAwOwogICAgICBsZXQgc3VtWTIgPSAwOwogICAgICBsZXQgc3VtWiA9IDA7CiAgICAgIGxldCBzdW1aMiA9IDA7CiAgICAgIGNvbnN0IGJvZGllcyA9IHRoaXMuYXhpc0xpc3Q7CiAgICAgIGNvbnN0IE4gPSBib2RpZXMubGVuZ3RoOwogICAgICBjb25zdCBpbnZOID0gMSAvIE47CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTjsgaSsrKSB7CiAgICAgICAgY29uc3QgYiA9IGJvZGllc1tpXTsKICAgICAgICBjb25zdCBjZW50ZXJYID0gYi5wb3NpdGlvbi54OwogICAgICAgIHN1bVggKz0gY2VudGVyWDsKICAgICAgICBzdW1YMiArPSBjZW50ZXJYICogY2VudGVyWDsKICAgICAgICBjb25zdCBjZW50ZXJZID0gYi5wb3NpdGlvbi55OwogICAgICAgIHN1bVkgKz0gY2VudGVyWTsKICAgICAgICBzdW1ZMiArPSBjZW50ZXJZICogY2VudGVyWTsKICAgICAgICBjb25zdCBjZW50ZXJaID0gYi5wb3NpdGlvbi56OwogICAgICAgIHN1bVogKz0gY2VudGVyWjsKICAgICAgICBzdW1aMiArPSBjZW50ZXJaICogY2VudGVyWjsKICAgICAgfQoKICAgICAgY29uc3QgdmFyaWFuY2VYID0gc3VtWDIgLSBzdW1YICogc3VtWCAqIGludk47CiAgICAgIGNvbnN0IHZhcmlhbmNlWSA9IHN1bVkyIC0gc3VtWSAqIHN1bVkgKiBpbnZOOwogICAgICBjb25zdCB2YXJpYW5jZVogPSBzdW1aMiAtIHN1bVogKiBzdW1aICogaW52TjsKCiAgICAgIGlmICh2YXJpYW5jZVggPiB2YXJpYW5jZVkpIHsKICAgICAgICBpZiAodmFyaWFuY2VYID4gdmFyaWFuY2VaKSB7CiAgICAgICAgICB0aGlzLmF4aXNJbmRleCA9IDA7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuYXhpc0luZGV4ID0gMjsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAodmFyaWFuY2VZID4gdmFyaWFuY2VaKSB7CiAgICAgICAgdGhpcy5heGlzSW5kZXggPSAxOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuYXhpc0luZGV4ID0gMjsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBSZXR1cm5zIGFsbCB0aGUgYm9kaWVzIHdpdGhpbiBhbiBBQUJCLgogICAgICogQHBhcmFtIHJlc3VsdCBBbiBhcnJheSB0byBzdG9yZSByZXN1bHRpbmcgYm9kaWVzIGluLgogICAgICovCgoKICAgIGFhYmJRdWVyeSh3b3JsZCwgYWFiYiwgcmVzdWx0ID0gW10pIHsKICAgICAgaWYgKHRoaXMuZGlydHkpIHsKICAgICAgICB0aGlzLnNvcnRMaXN0KCk7CiAgICAgICAgdGhpcy5kaXJ0eSA9IGZhbHNlOwogICAgICB9CgogICAgICBjb25zdCBheGlzSW5kZXggPSB0aGlzLmF4aXNJbmRleDsKICAgICAgbGV0IGF4aXMgPSAneCc7CgogICAgICBpZiAoYXhpc0luZGV4ID09PSAxKSB7CiAgICAgICAgYXhpcyA9ICd5JzsKICAgICAgfQoKICAgICAgaWYgKGF4aXNJbmRleCA9PT0gMikgewogICAgICAgIGF4aXMgPSAneic7CiAgICAgIH0KCiAgICAgIGNvbnN0IGF4aXNMaXN0ID0gdGhpcy5heGlzTGlzdDsKICAgICAgYWFiYi5sb3dlckJvdW5kW2F4aXNdOwogICAgICBhYWJiLnVwcGVyQm91bmRbYXhpc107CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGF4aXNMaXN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY29uc3QgYiA9IGF4aXNMaXN0W2ldOwoKICAgICAgICBpZiAoYi5hYWJiTmVlZHNVcGRhdGUpIHsKICAgICAgICAgIGIudXBkYXRlQUFCQigpOwogICAgICAgIH0KCiAgICAgICAgaWYgKGIuYWFiYi5vdmVybGFwcyhhYWJiKSkgewogICAgICAgICAgcmVzdWx0LnB1c2goYik7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQoKICB9CgogIGNsYXNzIFV0aWxzIHsKICAgIC8qKgogICAgICogRXh0ZW5kIGFuIG9wdGlvbnMgb2JqZWN0IHdpdGggZGVmYXVsdCB2YWx1ZXMuCiAgICAgKiBAcGFyYW0gb3B0aW9ucyBUaGUgb3B0aW9ucyBvYmplY3QuIE1heSBiZSBmYWxzeTogaW4gdGhpcyBjYXNlLCBhIG5ldyBvYmplY3QgaXMgY3JlYXRlZCBhbmQgcmV0dXJuZWQuCiAgICAgKiBAcGFyYW0gZGVmYXVsdHMgQW4gb2JqZWN0IGNvbnRhaW5pbmcgZGVmYXVsdCB2YWx1ZXMuCiAgICAgKiBAcmV0dXJuIFRoZSBtb2RpZmllZCBvcHRpb25zIG9iamVjdC4KICAgICAqLwogICAgc3RhdGljIGRlZmF1bHRzKG9wdGlvbnMgPSB7fSwgZGVmYXVsdHMpIHsKICAgICAgZm9yIChsZXQga2V5IGluIGRlZmF1bHRzKSB7CiAgICAgICAgaWYgKCEoa2V5IGluIG9wdGlvbnMpKSB7CiAgICAgICAgICBvcHRpb25zW2tleV0gPSBkZWZhdWx0c1trZXldOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIG9wdGlvbnM7CiAgICB9CgogIH0KICAvKioKICAgKiBDb25zdHJhaW50IGJhc2UgY2xhc3MKICAgKi8KCgogIGNsYXNzIENvbnN0cmFpbnQgewogICAgLyoqCiAgICAgKiBFcXVhdGlvbnMgdG8gYmUgc29sdmVkIGluIHRoaXMgY29uc3RyYWludC4KICAgICAqLwoKICAgIC8qKgogICAgICogQm9keSBBLgogICAgICovCgogICAgLyoqCiAgICAgKiBCb2R5IEIuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFNldCB0byBmYWxzZSBpZiB5b3UgZG9uJ3Qgd2FudCB0aGUgYm9kaWVzIHRvIGNvbGxpZGUgd2hlbiB0aGV5IGFyZSBjb25uZWN0ZWQuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGJvZHlBLCBib2R5Qiwgb3B0aW9ucyA9IHt9KSB7CiAgICAgIHRoaXMuZXF1YXRpb25zID0gdm9pZCAwOwogICAgICB0aGlzLmJvZHlBID0gdm9pZCAwOwogICAgICB0aGlzLmJvZHlCID0gdm9pZCAwOwogICAgICB0aGlzLmlkID0gdm9pZCAwOwogICAgICB0aGlzLmNvbGxpZGVDb25uZWN0ZWQgPSB2b2lkIDA7CiAgICAgIG9wdGlvbnMgPSBVdGlscy5kZWZhdWx0cyhvcHRpb25zLCB7CiAgICAgICAgY29sbGlkZUNvbm5lY3RlZDogdHJ1ZSwKICAgICAgICB3YWtlVXBCb2RpZXM6IHRydWUKICAgICAgfSk7CiAgICAgIHRoaXMuZXF1YXRpb25zID0gW107CiAgICAgIHRoaXMuYm9keUEgPSBib2R5QTsKICAgICAgdGhpcy5ib2R5QiA9IGJvZHlCOwogICAgICB0aGlzLmlkID0gQ29uc3RyYWludC5pZENvdW50ZXIrKzsKICAgICAgdGhpcy5jb2xsaWRlQ29ubmVjdGVkID0gb3B0aW9ucy5jb2xsaWRlQ29ubmVjdGVkOwoKICAgICAgaWYgKG9wdGlvbnMud2FrZVVwQm9kaWVzKSB7CiAgICAgICAgaWYgKGJvZHlBKSB7CiAgICAgICAgICBib2R5QS53YWtlVXAoKTsKICAgICAgICB9CgogICAgICAgIGlmIChib2R5QikgewogICAgICAgICAgYm9keUIud2FrZVVwKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIFVwZGF0ZSBhbGwgdGhlIGVxdWF0aW9ucyB3aXRoIGRhdGEuCiAgICAgKi8KCgogICAgdXBkYXRlKCkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ21ldGhvZCB1cGRhdGUoKSBub3QgaW1wbG1lbWVudGVkIGluIHRoaXMgQ29uc3RyYWludCBzdWJjbGFzcyEnKTsKICAgIH0KICAgIC8qKgogICAgICogRW5hYmxlcyBhbGwgZXF1YXRpb25zIGluIHRoZSBjb25zdHJhaW50LgogICAgICovCgoKICAgIGVuYWJsZSgpIHsKICAgICAgY29uc3QgZXFzID0gdGhpcy5lcXVhdGlvbnM7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVxcy5sZW5ndGg7IGkrKykgewogICAgICAgIGVxc1tpXS5lbmFibGVkID0gdHJ1ZTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBEaXNhYmxlcyBhbGwgZXF1YXRpb25zIGluIHRoZSBjb25zdHJhaW50LgogICAgICovCgoKICAgIGRpc2FibGUoKSB7CiAgICAgIGNvbnN0IGVxcyA9IHRoaXMuZXF1YXRpb25zOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlcXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBlcXNbaV0uZW5hYmxlZCA9IGZhbHNlOwogICAgICB9CiAgICB9CgogIH0KCiAgQ29uc3RyYWludC5pZENvdW50ZXIgPSAwOwogIC8qKgogICAqIEFuIGVsZW1lbnQgY29udGFpbmluZyA2IGVudHJpZXMsIDMgc3BhdGlhbCBhbmQgMyByb3RhdGlvbmFsIGRlZ3JlZXMgb2YgZnJlZWRvbS4KICAgKi8KCiAgY2xhc3MgSmFjb2JpYW5FbGVtZW50IHsKICAgIC8qKgogICAgICogc3BhdGlhbAogICAgICovCgogICAgLyoqCiAgICAgKiByb3RhdGlvbmFsCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKCkgewogICAgICB0aGlzLnNwYXRpYWwgPSB2b2lkIDA7CiAgICAgIHRoaXMucm90YXRpb25hbCA9IHZvaWQgMDsKICAgICAgdGhpcy5zcGF0aWFsID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5yb3RhdGlvbmFsID0gbmV3IFZlYzMoKTsKICAgIH0KICAgIC8qKgogICAgICogTXVsdGlwbHkgd2l0aCBvdGhlciBKYWNvYmlhbkVsZW1lbnQKICAgICAqLwoKCiAgICBtdWx0aXBseUVsZW1lbnQoZWxlbWVudCkgewogICAgICByZXR1cm4gZWxlbWVudC5zcGF0aWFsLmRvdCh0aGlzLnNwYXRpYWwpICsgZWxlbWVudC5yb3RhdGlvbmFsLmRvdCh0aGlzLnJvdGF0aW9uYWwpOwogICAgfQogICAgLyoqCiAgICAgKiBNdWx0aXBseSB3aXRoIHR3byB2ZWN0b3JzCiAgICAgKi8KCgogICAgbXVsdGlwbHlWZWN0b3JzKHNwYXRpYWwsIHJvdGF0aW9uYWwpIHsKICAgICAgcmV0dXJuIHNwYXRpYWwuZG90KHRoaXMuc3BhdGlhbCkgKyByb3RhdGlvbmFsLmRvdCh0aGlzLnJvdGF0aW9uYWwpOwogICAgfQoKICB9CiAgLyoqCiAgICogRXF1YXRpb24gYmFzZSBjbGFzcy4KICAgKgogICAqIGBhYCwgYGJgIGFuZCBgZXBzYCBhcmUge0BsaW5rIGh0dHBzOi8vd3d3OC5jcy51bXUuc2Uva3Vyc2VyLzVEVjA1OC9WVDE1L2xlY3R1cmVzL1NQT09LbGFibm90ZXMucGRmIFNQT09LfSBwYXJhbWV0ZXJzIHRoYXQgZGVmYXVsdCB0byBgMC4wYC4gU2VlIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vc2NodGVwcGUvY2Fubm9uLmpzL2lzc3Vlcy8yMzgjaXNzdWVjb21tZW50LTE0NzE3MjMyNyB0aGlzIGV4Y2hhbmdlfSBmb3IgbW9yZSBkZXRhaWxzIG9uIENhbm5vbidzIHBoeXNpY3MgaW1wbGVtZW50YXRpb24uCiAgICovCgoKICBjbGFzcyBFcXVhdGlvbiB7CiAgICAvKioKICAgICAqIE1pbmltdW0gKHJlYWQ6IG5lZ2F0aXZlIG1heCkgZm9yY2UgdG8gYmUgYXBwbGllZCBieSB0aGUgY29uc3RyYWludC4KICAgICAqLwoKICAgIC8qKgogICAgICogTWF4aW11bSAocmVhZDogcG9zaXRpdmUgbWF4KSBmb3JjZSB0byBiZSBhcHBsaWVkIGJ5IHRoZSBjb25zdHJhaW50LgogICAgICovCgogICAgLyoqCiAgICAgKiBTUE9PSyBwYXJhbWV0ZXIKICAgICAqLwoKICAgIC8qKgogICAgICogU1BPT0sgcGFyYW1ldGVyCiAgICAgKi8KCiAgICAvKioKICAgICAqIFNQT09LIHBhcmFtZXRlcgogICAgICovCgogICAgLyoqCiAgICAgKiBBIG51bWJlciwgcHJvcG9ydGlvbmFsIHRvIHRoZSBmb3JjZSBhZGRlZCB0byB0aGUgYm9kaWVzLgogICAgICovCiAgICBjb25zdHJ1Y3RvcihiaSwgYmosIG1pbkZvcmNlID0gLTFlNiwgbWF4Rm9yY2UgPSAxZTYpIHsKICAgICAgdGhpcy5pZCA9IHZvaWQgMDsKICAgICAgdGhpcy5taW5Gb3JjZSA9IHZvaWQgMDsKICAgICAgdGhpcy5tYXhGb3JjZSA9IHZvaWQgMDsKICAgICAgdGhpcy5iaSA9IHZvaWQgMDsKICAgICAgdGhpcy5iaiA9IHZvaWQgMDsKICAgICAgdGhpcy5zaSA9IHZvaWQgMDsKICAgICAgdGhpcy5zaiA9IHZvaWQgMDsKICAgICAgdGhpcy5hID0gdm9pZCAwOwogICAgICB0aGlzLmIgPSB2b2lkIDA7CiAgICAgIHRoaXMuZXBzID0gdm9pZCAwOwogICAgICB0aGlzLmphY29iaWFuRWxlbWVudEEgPSB2b2lkIDA7CiAgICAgIHRoaXMuamFjb2JpYW5FbGVtZW50QiA9IHZvaWQgMDsKICAgICAgdGhpcy5lbmFibGVkID0gdm9pZCAwOwogICAgICB0aGlzLm11bHRpcGxpZXIgPSB2b2lkIDA7CiAgICAgIHRoaXMuaWQgPSBFcXVhdGlvbi5pZENvdW50ZXIrKzsKICAgICAgdGhpcy5taW5Gb3JjZSA9IG1pbkZvcmNlOwogICAgICB0aGlzLm1heEZvcmNlID0gbWF4Rm9yY2U7CiAgICAgIHRoaXMuYmkgPSBiaTsKICAgICAgdGhpcy5iaiA9IGJqOwogICAgICB0aGlzLmEgPSAwLjA7IC8vIFNQT09LIHBhcmFtZXRlcgoKICAgICAgdGhpcy5iID0gMC4wOyAvLyBTUE9PSyBwYXJhbWV0ZXIKCiAgICAgIHRoaXMuZXBzID0gMC4wOyAvLyBTUE9PSyBwYXJhbWV0ZXIKCiAgICAgIHRoaXMuamFjb2JpYW5FbGVtZW50QSA9IG5ldyBKYWNvYmlhbkVsZW1lbnQoKTsKICAgICAgdGhpcy5qYWNvYmlhbkVsZW1lbnRCID0gbmV3IEphY29iaWFuRWxlbWVudCgpOwogICAgICB0aGlzLmVuYWJsZWQgPSB0cnVlOwogICAgICB0aGlzLm11bHRpcGxpZXIgPSAwOwogICAgICB0aGlzLnNldFNwb29rUGFyYW1zKDFlNywgNCwgMSAvIDYwKTsgLy8gU2V0IHR5cGljYWwgc3Bvb2sgcGFyYW1zCiAgICB9CiAgICAvKioKICAgICAqIFJlY2FsY3VsYXRlcyBhLCBiLCBhbmQgZXBzLgogICAgICoKICAgICAqIFRoZSBFcXVhdGlvbiBjb25zdHJ1Y3RvciBzZXRzIHR5cGljYWwgU1BPT0sgcGFyYW1ldGVycyBhcyBzdWNoOgogICAgICogKiBgc3RpZmZuZXNzYCA9IDFlNwogICAgICogKiBgcmVsYXhhdGlvbmAgPSA0CiAgICAgKiAqIGB0aW1lU3RlcGA9IDEgLyA2MCwgX25vdGUgdGhlIGhhcmRjb2RlZCByZWZyZXNoIHJhdGUuXwogICAgICovCgoKICAgIHNldFNwb29rUGFyYW1zKHN0aWZmbmVzcywgcmVsYXhhdGlvbiwgdGltZVN0ZXApIHsKICAgICAgY29uc3QgZCA9IHJlbGF4YXRpb247CiAgICAgIGNvbnN0IGsgPSBzdGlmZm5lc3M7CiAgICAgIGNvbnN0IGggPSB0aW1lU3RlcDsKICAgICAgdGhpcy5hID0gNC4wIC8gKGggKiAoMSArIDQgKiBkKSk7CiAgICAgIHRoaXMuYiA9IDQuMCAqIGQgLyAoMSArIDQgKiBkKTsKICAgICAgdGhpcy5lcHMgPSA0LjAgLyAoaCAqIGggKiBrICogKDEgKyA0ICogZCkpOwogICAgfQogICAgLyoqCiAgICAgKiBDb21wdXRlcyB0aGUgcmlnaHQgaGFuZCBzaWRlIG9mIHRoZSBTUE9PSyBlcXVhdGlvbgogICAgICovCgoKICAgIGNvbXB1dGVCKGEsIGIsIGgpIHsKICAgICAgY29uc3QgR1cgPSB0aGlzLmNvbXB1dGVHVygpOwogICAgICBjb25zdCBHcSA9IHRoaXMuY29tcHV0ZUdxKCk7CiAgICAgIGNvbnN0IEdpTWYgPSB0aGlzLmNvbXB1dGVHaU1mKCk7CiAgICAgIHJldHVybiAtR3EgKiBhIC0gR1cgKiBiIC0gR2lNZiAqIGg7CiAgICB9CiAgICAvKioKICAgICAqIENvbXB1dGVzIEcqcSwgd2hlcmUgcSBhcmUgdGhlIGdlbmVyYWxpemVkIGJvZHkgY29vcmRpbmF0ZXMKICAgICAqLwoKCiAgICBjb21wdXRlR3EoKSB7CiAgICAgIGNvbnN0IEdBID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRBOwogICAgICBjb25zdCBHQiA9IHRoaXMuamFjb2JpYW5FbGVtZW50QjsKICAgICAgY29uc3QgYmkgPSB0aGlzLmJpOwogICAgICBjb25zdCBiaiA9IHRoaXMuYmo7CiAgICAgIGNvbnN0IHhpID0gYmkucG9zaXRpb247CiAgICAgIGNvbnN0IHhqID0gYmoucG9zaXRpb247CiAgICAgIHJldHVybiBHQS5zcGF0aWFsLmRvdCh4aSkgKyBHQi5zcGF0aWFsLmRvdCh4aik7CiAgICB9CiAgICAvKioKICAgICAqIENvbXB1dGVzIEcqVywgd2hlcmUgVyBhcmUgdGhlIGJvZHkgdmVsb2NpdGllcwogICAgICovCgoKICAgIGNvbXB1dGVHVygpIHsKICAgICAgY29uc3QgR0EgPSB0aGlzLmphY29iaWFuRWxlbWVudEE7CiAgICAgIGNvbnN0IEdCID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRCOwogICAgICBjb25zdCBiaSA9IHRoaXMuYmk7CiAgICAgIGNvbnN0IGJqID0gdGhpcy5iajsKICAgICAgY29uc3QgdmkgPSBiaS52ZWxvY2l0eTsKICAgICAgY29uc3QgdmogPSBiai52ZWxvY2l0eTsKICAgICAgY29uc3Qgd2kgPSBiaS5hbmd1bGFyVmVsb2NpdHk7CiAgICAgIGNvbnN0IHdqID0gYmouYW5ndWxhclZlbG9jaXR5OwogICAgICByZXR1cm4gR0EubXVsdGlwbHlWZWN0b3JzKHZpLCB3aSkgKyBHQi5tdWx0aXBseVZlY3RvcnModmosIHdqKTsKICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZXMgRypXbGFtYmRhLCB3aGVyZSBXIGFyZSB0aGUgYm9keSB2ZWxvY2l0aWVzCiAgICAgKi8KCgogICAgY29tcHV0ZUdXbGFtYmRhKCkgewogICAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTsKICAgICAgY29uc3QgR0IgPSB0aGlzLmphY29iaWFuRWxlbWVudEI7CiAgICAgIGNvbnN0IGJpID0gdGhpcy5iaTsKICAgICAgY29uc3QgYmogPSB0aGlzLmJqOwogICAgICBjb25zdCB2aSA9IGJpLnZsYW1iZGE7CiAgICAgIGNvbnN0IHZqID0gYmoudmxhbWJkYTsKICAgICAgY29uc3Qgd2kgPSBiaS53bGFtYmRhOwogICAgICBjb25zdCB3aiA9IGJqLndsYW1iZGE7CiAgICAgIHJldHVybiBHQS5tdWx0aXBseVZlY3RvcnModmksIHdpKSArIEdCLm11bHRpcGx5VmVjdG9ycyh2aiwgd2opOwogICAgfQogICAgLyoqCiAgICAgKiBDb21wdXRlcyBHKmludihNKSpmLCB3aGVyZSBNIGlzIHRoZSBtYXNzIG1hdHJpeCB3aXRoIGRpYWdvbmFsIGJsb2NrcyBmb3IgZWFjaCBib2R5LCBhbmQgZiBhcmUgdGhlIGZvcmNlcyBvbiB0aGUgYm9kaWVzLgogICAgICovCgoKICAgIGNvbXB1dGVHaU1mKCkgewogICAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTsKICAgICAgY29uc3QgR0IgPSB0aGlzLmphY29iaWFuRWxlbWVudEI7CiAgICAgIGNvbnN0IGJpID0gdGhpcy5iaTsKICAgICAgY29uc3QgYmogPSB0aGlzLmJqOwogICAgICBjb25zdCBmaSA9IGJpLmZvcmNlOwogICAgICBjb25zdCB0aSA9IGJpLnRvcnF1ZTsKICAgICAgY29uc3QgZmogPSBiai5mb3JjZTsKICAgICAgY29uc3QgdGogPSBiai50b3JxdWU7CiAgICAgIGNvbnN0IGludk1hc3NpID0gYmkuaW52TWFzc1NvbHZlOwogICAgICBjb25zdCBpbnZNYXNzaiA9IGJqLmludk1hc3NTb2x2ZTsKICAgICAgZmkuc2NhbGUoaW52TWFzc2ksIGlNZmkpOwogICAgICBmai5zY2FsZShpbnZNYXNzaiwgaU1maik7CiAgICAgIGJpLmludkluZXJ0aWFXb3JsZFNvbHZlLnZtdWx0KHRpLCBpbnZJaV92bXVsdF90YXVpKTsKICAgICAgYmouaW52SW5lcnRpYVdvcmxkU29sdmUudm11bHQodGosIGludklqX3ZtdWx0X3RhdWopOwogICAgICByZXR1cm4gR0EubXVsdGlwbHlWZWN0b3JzKGlNZmksIGludklpX3ZtdWx0X3RhdWkpICsgR0IubXVsdGlwbHlWZWN0b3JzKGlNZmosIGludklqX3ZtdWx0X3RhdWopOwogICAgfQogICAgLyoqCiAgICAgKiBDb21wdXRlcyBHKmludihNKSpHJwogICAgICovCgoKICAgIGNvbXB1dGVHaU1HdCgpIHsKICAgICAgY29uc3QgR0EgPSB0aGlzLmphY29iaWFuRWxlbWVudEE7CiAgICAgIGNvbnN0IEdCID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRCOwogICAgICBjb25zdCBiaSA9IHRoaXMuYmk7CiAgICAgIGNvbnN0IGJqID0gdGhpcy5iajsKICAgICAgY29uc3QgaW52TWFzc2kgPSBiaS5pbnZNYXNzU29sdmU7CiAgICAgIGNvbnN0IGludk1hc3NqID0gYmouaW52TWFzc1NvbHZlOwogICAgICBjb25zdCBpbnZJaSA9IGJpLmludkluZXJ0aWFXb3JsZFNvbHZlOwogICAgICBjb25zdCBpbnZJaiA9IGJqLmludkluZXJ0aWFXb3JsZFNvbHZlOwogICAgICBsZXQgcmVzdWx0ID0gaW52TWFzc2kgKyBpbnZNYXNzajsKICAgICAgaW52SWkudm11bHQoR0Eucm90YXRpb25hbCwgdG1wKTsKICAgICAgcmVzdWx0ICs9IHRtcC5kb3QoR0Eucm90YXRpb25hbCk7CiAgICAgIGludklqLnZtdWx0KEdCLnJvdGF0aW9uYWwsIHRtcCk7CiAgICAgIHJlc3VsdCArPSB0bXAuZG90KEdCLnJvdGF0aW9uYWwpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgLyoqCiAgICAgKiBBZGQgY29uc3RyYWludCB2ZWxvY2l0eSB0byB0aGUgYm9kaWVzLgogICAgICovCgoKICAgIGFkZFRvV2xhbWJkYShkZWx0YWxhbWJkYSkgewogICAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTsKICAgICAgY29uc3QgR0IgPSB0aGlzLmphY29iaWFuRWxlbWVudEI7CiAgICAgIGNvbnN0IGJpID0gdGhpcy5iaTsKICAgICAgY29uc3QgYmogPSB0aGlzLmJqOwogICAgICBjb25zdCB0ZW1wID0gYWRkVG9XbGFtYmRhX3RlbXA7IC8vIEFkZCB0byBsaW5lYXIgdmVsb2NpdHkKICAgICAgLy8gdl9sYW1iZGEgKz0gaW52KE0pICogZGVsdGFfbGFtYmEgKiBHCgogICAgICBiaS52bGFtYmRhLmFkZFNjYWxlZFZlY3RvcihiaS5pbnZNYXNzU29sdmUgKiBkZWx0YWxhbWJkYSwgR0Euc3BhdGlhbCwgYmkudmxhbWJkYSk7CiAgICAgIGJqLnZsYW1iZGEuYWRkU2NhbGVkVmVjdG9yKGJqLmludk1hc3NTb2x2ZSAqIGRlbHRhbGFtYmRhLCBHQi5zcGF0aWFsLCBiai52bGFtYmRhKTsgLy8gQWRkIHRvIGFuZ3VsYXIgdmVsb2NpdHkKCiAgICAgIGJpLmludkluZXJ0aWFXb3JsZFNvbHZlLnZtdWx0KEdBLnJvdGF0aW9uYWwsIHRlbXApOwogICAgICBiaS53bGFtYmRhLmFkZFNjYWxlZFZlY3RvcihkZWx0YWxhbWJkYSwgdGVtcCwgYmkud2xhbWJkYSk7CiAgICAgIGJqLmludkluZXJ0aWFXb3JsZFNvbHZlLnZtdWx0KEdCLnJvdGF0aW9uYWwsIHRlbXApOwogICAgICBiai53bGFtYmRhLmFkZFNjYWxlZFZlY3RvcihkZWx0YWxhbWJkYSwgdGVtcCwgYmoud2xhbWJkYSk7CiAgICB9CiAgICAvKioKICAgICAqIENvbXB1dGUgdGhlIGRlbm9taW5hdG9yIHBhcnQgb2YgdGhlIFNQT09LIGVxdWF0aW9uOiBDID0gRyppbnYoTSkqRycgKyBlcHMKICAgICAqLwoKCiAgICBjb21wdXRlQygpIHsKICAgICAgcmV0dXJuIHRoaXMuY29tcHV0ZUdpTUd0KCkgKyB0aGlzLmVwczsKICAgIH0KCiAgfQoKICBFcXVhdGlvbi5pZENvdW50ZXIgPSAwOwogIGNvbnN0IGlNZmkgPSBuZXcgVmVjMygpOwogIGNvbnN0IGlNZmogPSBuZXcgVmVjMygpOwogIGNvbnN0IGludklpX3ZtdWx0X3RhdWkgPSBuZXcgVmVjMygpOwogIGNvbnN0IGludklqX3ZtdWx0X3RhdWogPSBuZXcgVmVjMygpOwogIGNvbnN0IHRtcCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYWRkVG9XbGFtYmRhX3RlbXAgPSBuZXcgVmVjMygpOwogIC8qKgogICAqIENvbnRhY3Qvbm9uLXBlbmV0cmF0aW9uIGNvbnN0cmFpbnQgZXF1YXRpb24KICAgKi8KCiAgY2xhc3MgQ29udGFjdEVxdWF0aW9uIGV4dGVuZHMgRXF1YXRpb24gewogICAgLyoqCiAgICAgKiAiYm91bmNpbmVzcyI6IHUxID0gLWUqdTAKICAgICAqLwoKICAgIC8qKgogICAgICogV29ybGQtb3JpZW50ZWQgdmVjdG9yIHRoYXQgZ29lcyBmcm9tIHRoZSBjZW50ZXIgb2YgYmkgdG8gdGhlIGNvbnRhY3QgcG9pbnQuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFdvcmxkLW9yaWVudGVkIHZlY3RvciB0aGF0IHN0YXJ0cyBpbiBib2R5IGogcG9zaXRpb24gYW5kIGdvZXMgdG8gdGhlIGNvbnRhY3QgcG9pbnQuCiAgICAgKi8KCiAgICAvKioKICAgICAqIENvbnRhY3Qgbm9ybWFsLCBwb2ludGluZyBvdXQgb2YgYm9keSBpLgogICAgICovCiAgICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIG1heEZvcmNlID0gMWU2KSB7CiAgICAgIHN1cGVyKGJvZHlBLCBib2R5QiwgMCwgbWF4Rm9yY2UpOwogICAgICB0aGlzLnJlc3RpdHV0aW9uID0gdm9pZCAwOwogICAgICB0aGlzLnJpID0gdm9pZCAwOwogICAgICB0aGlzLnJqID0gdm9pZCAwOwogICAgICB0aGlzLm5pID0gdm9pZCAwOwogICAgICB0aGlzLnJlc3RpdHV0aW9uID0gMC4wOwogICAgICB0aGlzLnJpID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5yaiA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMubmkgPSBuZXcgVmVjMygpOwogICAgfQoKICAgIGNvbXB1dGVCKGgpIHsKICAgICAgY29uc3QgYSA9IHRoaXMuYTsKICAgICAgY29uc3QgYiA9IHRoaXMuYjsKICAgICAgY29uc3QgYmkgPSB0aGlzLmJpOwogICAgICBjb25zdCBiaiA9IHRoaXMuYmo7CiAgICAgIGNvbnN0IHJpID0gdGhpcy5yaTsKICAgICAgY29uc3QgcmogPSB0aGlzLnJqOwogICAgICBjb25zdCByaXhuID0gQ29udGFjdEVxdWF0aW9uX2NvbXB1dGVCX3RlbXAxOwogICAgICBjb25zdCByanhuID0gQ29udGFjdEVxdWF0aW9uX2NvbXB1dGVCX3RlbXAyOwogICAgICBjb25zdCB2aSA9IGJpLnZlbG9jaXR5OwogICAgICBjb25zdCB3aSA9IGJpLmFuZ3VsYXJWZWxvY2l0eTsKICAgICAgYmkuZm9yY2U7CiAgICAgIGJpLnRvcnF1ZTsKICAgICAgY29uc3QgdmogPSBiai52ZWxvY2l0eTsKICAgICAgY29uc3Qgd2ogPSBiai5hbmd1bGFyVmVsb2NpdHk7CiAgICAgIGJqLmZvcmNlOwogICAgICBiai50b3JxdWU7CiAgICAgIGNvbnN0IHBlbmV0cmF0aW9uVmVjID0gQ29udGFjdEVxdWF0aW9uX2NvbXB1dGVCX3RlbXAzOwogICAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTsKICAgICAgY29uc3QgR0IgPSB0aGlzLmphY29iaWFuRWxlbWVudEI7CiAgICAgIGNvbnN0IG4gPSB0aGlzLm5pOyAvLyBDYWx1Y2xhdGUgY3Jvc3MgcHJvZHVjdHMKCiAgICAgIHJpLmNyb3NzKG4sIHJpeG4pOwogICAgICByai5jcm9zcyhuLCByanhuKTsgLy8gZyA9IHhqK3JqIC0oeGkrcmkpCiAgICAgIC8vIEcgPSBbIC1uaSAgLXJpeG4gIG5pICByanhuIF0KCiAgICAgIG4ubmVnYXRlKEdBLnNwYXRpYWwpOwogICAgICByaXhuLm5lZ2F0ZShHQS5yb3RhdGlvbmFsKTsKICAgICAgR0Iuc3BhdGlhbC5jb3B5KG4pOwogICAgICBHQi5yb3RhdGlvbmFsLmNvcHkocmp4bik7IC8vIENhbGN1bGF0ZSB0aGUgcGVuZXRyYXRpb24gdmVjdG9yCgogICAgICBwZW5ldHJhdGlvblZlYy5jb3B5KGJqLnBvc2l0aW9uKTsKICAgICAgcGVuZXRyYXRpb25WZWMudmFkZChyaiwgcGVuZXRyYXRpb25WZWMpOwogICAgICBwZW5ldHJhdGlvblZlYy52c3ViKGJpLnBvc2l0aW9uLCBwZW5ldHJhdGlvblZlYyk7CiAgICAgIHBlbmV0cmF0aW9uVmVjLnZzdWIocmksIHBlbmV0cmF0aW9uVmVjKTsKICAgICAgY29uc3QgZyA9IG4uZG90KHBlbmV0cmF0aW9uVmVjKTsgLy8gQ29tcHV0ZSBpdGVyYXRpb24KCiAgICAgIGNvbnN0IGVQbHVzT25lID0gdGhpcy5yZXN0aXR1dGlvbiArIDE7CiAgICAgIGNvbnN0IEdXID0gZVBsdXNPbmUgKiB2ai5kb3QobikgLSBlUGx1c09uZSAqIHZpLmRvdChuKSArIHdqLmRvdChyanhuKSAtIHdpLmRvdChyaXhuKTsKICAgICAgY29uc3QgR2lNZiA9IHRoaXMuY29tcHV0ZUdpTWYoKTsKICAgICAgY29uc3QgQiA9IC1nICogYSAtIEdXICogYiAtIGggKiBHaU1mOwogICAgICByZXR1cm4gQjsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSBjdXJyZW50IHJlbGF0aXZlIHZlbG9jaXR5IGluIHRoZSBjb250YWN0IHBvaW50LgogICAgICovCgoKICAgIGdldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWwoKSB7CiAgICAgIGNvbnN0IHZpID0gQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfdmk7CiAgICAgIGNvbnN0IHZqID0gQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfdmo7CiAgICAgIGNvbnN0IHhpID0gQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfeGk7CiAgICAgIGNvbnN0IHhqID0gQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfeGo7CiAgICAgIGNvbnN0IHJlbFZlbCA9IENvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3JlbFZlbDsKICAgICAgdGhpcy5iaS5wb3NpdGlvbi52YWRkKHRoaXMucmksIHhpKTsKICAgICAgdGhpcy5iai5wb3NpdGlvbi52YWRkKHRoaXMucmosIHhqKTsKICAgICAgdGhpcy5iaS5nZXRWZWxvY2l0eUF0V29ybGRQb2ludCh4aSwgdmkpOwogICAgICB0aGlzLmJqLmdldFZlbG9jaXR5QXRXb3JsZFBvaW50KHhqLCB2aik7CiAgICAgIHZpLnZzdWIodmosIHJlbFZlbCk7CiAgICAgIHJldHVybiB0aGlzLm5pLmRvdChyZWxWZWwpOwogICAgfQoKICB9CgogIGNvbnN0IENvbnRhY3RFcXVhdGlvbl9jb21wdXRlQl90ZW1wMSA9IG5ldyBWZWMzKCk7IC8vIFRlbXAgdmVjdG9ycwoKICBjb25zdCBDb250YWN0RXF1YXRpb25fY29tcHV0ZUJfdGVtcDIgPSBuZXcgVmVjMygpOwogIGNvbnN0IENvbnRhY3RFcXVhdGlvbl9jb21wdXRlQl90ZW1wMyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfdmkgPSBuZXcgVmVjMygpOwogIGNvbnN0IENvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3ZqID0gbmV3IFZlYzMoKTsKICBjb25zdCBDb250YWN0RXF1YXRpb25fZ2V0SW1wYWN0VmVsb2NpdHlBbG9uZ05vcm1hbF94aSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfeGogPSBuZXcgVmVjMygpOwogIGNvbnN0IENvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3JlbFZlbCA9IG5ldyBWZWMzKCk7CiAgLyoqCiAgICogQ29ubmVjdHMgdHdvIGJvZGllcyBhdCBnaXZlbiBvZmZzZXQgcG9pbnRzLgogICAqIEBleGFtcGxlCiAgICogICAgIGNvbnN0IGJvZHlBID0gbmV3IEJvZHkoeyBtYXNzOiAxIH0pCiAgICogICAgIGNvbnN0IGJvZHlCID0gbmV3IEJvZHkoeyBtYXNzOiAxIH0pCiAgICogICAgIGJvZHlBLnBvc2l0aW9uLnNldCgtMSwgMCwgMCkKICAgKiAgICAgYm9keUIucG9zaXRpb24uc2V0KDEsIDAsIDApCiAgICogICAgIGJvZHlBLmFkZFNoYXBlKHNoYXBlQSkKICAgKiAgICAgYm9keUIuYWRkU2hhcGUoc2hhcGVCKQogICAqICAgICB3b3JsZC5hZGRCb2R5KGJvZHlBKQogICAqICAgICB3b3JsZC5hZGRCb2R5KGJvZHlCKQogICAqICAgICBjb25zdCBsb2NhbFBpdm90QSA9IG5ldyBWZWMzKDEsIDAsIDApCiAgICogICAgIGNvbnN0IGxvY2FsUGl2b3RCID0gbmV3IFZlYzMoLTEsIDAsIDApCiAgICogICAgIGNvbnN0IGNvbnN0cmFpbnQgPSBuZXcgUG9pbnRUb1BvaW50Q29uc3RyYWludChib2R5QSwgbG9jYWxQaXZvdEEsIGJvZHlCLCBsb2NhbFBpdm90QikKICAgKiAgICAgd29ybGQuYWRkQ29uc3RyYWludChjb25zdHJhaW50KQogICAqLwoKICBjbGFzcyBQb2ludFRvUG9pbnRDb25zdHJhaW50IGV4dGVuZHMgQ29uc3RyYWludCB7CiAgICAvKioKICAgICAqIFBpdm90LCBkZWZpbmVkIGxvY2FsbHkgaW4gYm9keUEuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFBpdm90LCBkZWZpbmVkIGxvY2FsbHkgaW4gYm9keUIuCiAgICAgKi8KCiAgICAvKioKICAgICAqIEBwYXJhbSBwaXZvdEEgVGhlIHBvaW50IHJlbGF0aXZlIHRvIHRoZSBjZW50ZXIgb2YgbWFzcyBvZiBib2R5QSB3aGljaCBib2R5QSBpcyBjb25zdHJhaW5lZCB0by4KICAgICAqIEBwYXJhbSBib2R5QiBCb2R5IHRoYXQgd2lsbCBiZSBjb25zdHJhaW5lZCBpbiBhIHNpbWlsYXIgd2F5IHRvIHRoZSBzYW1lIHBvaW50IGFzIGJvZHlBLiBXZSB3aWxsIHRoZXJlZm9yZSBnZXQgYSBsaW5rIGJldHdlZW4gYm9keUEgYW5kIGJvZHlCLiBJZiBub3Qgc3BlY2lmaWVkLCBib2R5QSB3aWxsIGJlIGNvbnN0cmFpbmVkIHRvIGEgc3RhdGljIHBvaW50LgogICAgICogQHBhcmFtIHBpdm90QiBUaGUgcG9pbnQgcmVsYXRpdmUgdG8gdGhlIGNlbnRlciBvZiBtYXNzIG9mIGJvZHlCIHdoaWNoIGJvZHlCIGlzIGNvbnN0cmFpbmVkIHRvLgogICAgICogQHBhcmFtIG1heEZvcmNlIFRoZSBtYXhpbXVtIGZvcmNlIHRoYXQgc2hvdWxkIGJlIGFwcGxpZWQgdG8gY29uc3RyYWluIHRoZSBib2RpZXMuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGJvZHlBLCBwaXZvdEEgPSBuZXcgVmVjMygpLCBib2R5QiwgcGl2b3RCID0gbmV3IFZlYzMoKSwgbWF4Rm9yY2UgPSAxZTYpIHsKICAgICAgc3VwZXIoYm9keUEsIGJvZHlCKTsKICAgICAgdGhpcy5waXZvdEEgPSB2b2lkIDA7CiAgICAgIHRoaXMucGl2b3RCID0gdm9pZCAwOwogICAgICB0aGlzLmVxdWF0aW9uWCA9IHZvaWQgMDsKICAgICAgdGhpcy5lcXVhdGlvblkgPSB2b2lkIDA7CiAgICAgIHRoaXMuZXF1YXRpb25aID0gdm9pZCAwOwogICAgICB0aGlzLnBpdm90QSA9IHBpdm90QS5jbG9uZSgpOwogICAgICB0aGlzLnBpdm90QiA9IHBpdm90Qi5jbG9uZSgpOwogICAgICBjb25zdCB4ID0gdGhpcy5lcXVhdGlvblggPSBuZXcgQ29udGFjdEVxdWF0aW9uKGJvZHlBLCBib2R5Qik7CiAgICAgIGNvbnN0IHkgPSB0aGlzLmVxdWF0aW9uWSA9IG5ldyBDb250YWN0RXF1YXRpb24oYm9keUEsIGJvZHlCKTsKICAgICAgY29uc3QgeiA9IHRoaXMuZXF1YXRpb25aID0gbmV3IENvbnRhY3RFcXVhdGlvbihib2R5QSwgYm9keUIpOyAvLyBFcXVhdGlvbnMgdG8gYmUgZmVkIHRvIHRoZSBzb2x2ZXIKCiAgICAgIHRoaXMuZXF1YXRpb25zLnB1c2goeCwgeSwgeik7IC8vIE1ha2UgdGhlIGVxdWF0aW9ucyBiaWRpcmVjdGlvbmFsCgogICAgICB4Lm1pbkZvcmNlID0geS5taW5Gb3JjZSA9IHoubWluRm9yY2UgPSAtbWF4Rm9yY2U7CiAgICAgIHgubWF4Rm9yY2UgPSB5Lm1heEZvcmNlID0gei5tYXhGb3JjZSA9IG1heEZvcmNlOwogICAgICB4Lm5pLnNldCgxLCAwLCAwKTsKICAgICAgeS5uaS5zZXQoMCwgMSwgMCk7CiAgICAgIHoubmkuc2V0KDAsIDAsIDEpOwogICAgfQoKICAgIHVwZGF0ZSgpIHsKICAgICAgY29uc3QgYm9keUEgPSB0aGlzLmJvZHlBOwogICAgICBjb25zdCBib2R5QiA9IHRoaXMuYm9keUI7CiAgICAgIGNvbnN0IHggPSB0aGlzLmVxdWF0aW9uWDsKICAgICAgY29uc3QgeSA9IHRoaXMuZXF1YXRpb25ZOwogICAgICBjb25zdCB6ID0gdGhpcy5lcXVhdGlvblo7IC8vIFJvdGF0ZSB0aGUgcGl2b3RzIHRvIHdvcmxkIHNwYWNlCgogICAgICBib2R5QS5xdWF0ZXJuaW9uLnZtdWx0KHRoaXMucGl2b3RBLCB4LnJpKTsKICAgICAgYm9keUIucXVhdGVybmlvbi52bXVsdCh0aGlzLnBpdm90QiwgeC5yaik7CiAgICAgIHkucmkuY29weSh4LnJpKTsKICAgICAgeS5yai5jb3B5KHgucmopOwogICAgICB6LnJpLmNvcHkoeC5yaSk7CiAgICAgIHoucmouY29weSh4LnJqKTsKICAgIH0KCiAgfQogIC8qKgogICAqIENvbmUgZXF1YXRpb24uIFdvcmtzIHRvIGtlZXAgdGhlIGdpdmVuIGJvZHkgd29ybGQgdmVjdG9ycyBhbGlnbmVkLCBvciB0aWx0ZWQgd2l0aGluIGEgZ2l2ZW4gYW5nbGUgZnJvbSBlYWNoIG90aGVyLgogICAqLwoKCiAgY2xhc3MgQ29uZUVxdWF0aW9uIGV4dGVuZHMgRXF1YXRpb24gewogICAgLyoqCiAgICAgKiBMb2NhbCBheGlzIGluIEEKICAgICAqLwoKICAgIC8qKgogICAgICogTG9jYWwgYXhpcyBpbiBCCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSAiY29uZSBhbmdsZSIgdG8ga2VlcAogICAgICovCiAgICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIG9wdGlvbnMgPSB7fSkgewogICAgICBjb25zdCBtYXhGb3JjZSA9IHR5cGVvZiBvcHRpb25zLm1heEZvcmNlICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMubWF4Rm9yY2UgOiAxZTY7CiAgICAgIHN1cGVyKGJvZHlBLCBib2R5QiwgLW1heEZvcmNlLCBtYXhGb3JjZSk7CiAgICAgIHRoaXMuYXhpc0EgPSB2b2lkIDA7CiAgICAgIHRoaXMuYXhpc0IgPSB2b2lkIDA7CiAgICAgIHRoaXMuYW5nbGUgPSB2b2lkIDA7CiAgICAgIHRoaXMuYXhpc0EgPSBvcHRpb25zLmF4aXNBID8gb3B0aW9ucy5heGlzQS5jbG9uZSgpIDogbmV3IFZlYzMoMSwgMCwgMCk7CiAgICAgIHRoaXMuYXhpc0IgPSBvcHRpb25zLmF4aXNCID8gb3B0aW9ucy5heGlzQi5jbG9uZSgpIDogbmV3IFZlYzMoMCwgMSwgMCk7CiAgICAgIHRoaXMuYW5nbGUgPSB0eXBlb2Ygb3B0aW9ucy5hbmdsZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmFuZ2xlIDogMDsKICAgIH0KCiAgICBjb21wdXRlQihoKSB7CiAgICAgIGNvbnN0IGEgPSB0aGlzLmE7CiAgICAgIGNvbnN0IGIgPSB0aGlzLmI7CiAgICAgIGNvbnN0IG5pID0gdGhpcy5heGlzQTsKICAgICAgY29uc3QgbmogPSB0aGlzLmF4aXNCOwogICAgICBjb25zdCBuaXhuaiA9IHRtcFZlYzEkMjsKICAgICAgY29uc3Qgbmp4bmkgPSB0bXBWZWMyJDI7CiAgICAgIGNvbnN0IEdBID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRBOwogICAgICBjb25zdCBHQiA9IHRoaXMuamFjb2JpYW5FbGVtZW50QjsgLy8gQ2FsdWNsYXRlIGNyb3NzIHByb2R1Y3RzCgogICAgICBuaS5jcm9zcyhuaiwgbml4bmopOwogICAgICBuai5jcm9zcyhuaSwgbmp4bmkpOyAvLyBUaGUgYW5nbGUgYmV0d2VlbiB0d28gdmVjdG9yIGlzOgogICAgICAvLyBjb3ModGhldGEpID0gYSAqIGIgLyAobGVuZ3RoKGEpICogbGVuZ3RoKGIpID0geyBsZW4oYSkgPSBsZW4oYikgPSAxIH0gPSBhICogYgogICAgICAvLyBnID0gYSAqIGIKICAgICAgLy8gZ2RvdCA9IChiIHggYSkgKiB3aSArIChhIHggYikgKiB3agogICAgICAvLyBHID0gWzAgYnhhIDAgYXhiXQogICAgICAvLyBXID0gW3ZpIHdpIHZqIHdqXQoKICAgICAgR0Eucm90YXRpb25hbC5jb3B5KG5qeG5pKTsKICAgICAgR0Iucm90YXRpb25hbC5jb3B5KG5peG5qKTsKICAgICAgY29uc3QgZyA9IE1hdGguY29zKHRoaXMuYW5nbGUpIC0gbmkuZG90KG5qKTsKICAgICAgY29uc3QgR1cgPSB0aGlzLmNvbXB1dGVHVygpOwogICAgICBjb25zdCBHaU1mID0gdGhpcy5jb21wdXRlR2lNZigpOwogICAgICBjb25zdCBCID0gLWcgKiBhIC0gR1cgKiBiIC0gaCAqIEdpTWY7CiAgICAgIHJldHVybiBCOwogICAgfQoKICB9CgogIGNvbnN0IHRtcFZlYzEkMiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgdG1wVmVjMiQyID0gbmV3IFZlYzMoKTsKICAvKioKICAgKiBSb3RhdGlvbmFsIGNvbnN0cmFpbnQuIFdvcmtzIHRvIGtlZXAgdGhlIGxvY2FsIHZlY3RvcnMgb3J0aG9nb25hbCB0byBlYWNoIG90aGVyIGluIHdvcmxkIHNwYWNlLgogICAqLwoKICBjbGFzcyBSb3RhdGlvbmFsRXF1YXRpb24gZXh0ZW5kcyBFcXVhdGlvbiB7CiAgICAvKioKICAgICAqIFdvcmxkIG9yaWVudGVkIHJvdGF0aW9uYWwgYXhpcy4KICAgICAqLwoKICAgIC8qKgogICAgICogV29ybGQgb3JpZW50ZWQgcm90YXRpb25hbCBheGlzLgogICAgICovCgogICAgLyoqCiAgICAgKiBtYXhBbmdsZQogICAgICovCiAgICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIG9wdGlvbnMgPSB7fSkgewogICAgICBjb25zdCBtYXhGb3JjZSA9IHR5cGVvZiBvcHRpb25zLm1heEZvcmNlICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMubWF4Rm9yY2UgOiAxZTY7CiAgICAgIHN1cGVyKGJvZHlBLCBib2R5QiwgLW1heEZvcmNlLCBtYXhGb3JjZSk7CiAgICAgIHRoaXMuYXhpc0EgPSB2b2lkIDA7CiAgICAgIHRoaXMuYXhpc0IgPSB2b2lkIDA7CiAgICAgIHRoaXMubWF4QW5nbGUgPSB2b2lkIDA7CiAgICAgIHRoaXMuYXhpc0EgPSBvcHRpb25zLmF4aXNBID8gb3B0aW9ucy5heGlzQS5jbG9uZSgpIDogbmV3IFZlYzMoMSwgMCwgMCk7CiAgICAgIHRoaXMuYXhpc0IgPSBvcHRpb25zLmF4aXNCID8gb3B0aW9ucy5heGlzQi5jbG9uZSgpIDogbmV3IFZlYzMoMCwgMSwgMCk7CiAgICAgIHRoaXMubWF4QW5nbGUgPSBNYXRoLlBJIC8gMjsKICAgIH0KCiAgICBjb21wdXRlQihoKSB7CiAgICAgIGNvbnN0IGEgPSB0aGlzLmE7CiAgICAgIGNvbnN0IGIgPSB0aGlzLmI7CiAgICAgIGNvbnN0IG5pID0gdGhpcy5heGlzQTsKICAgICAgY29uc3QgbmogPSB0aGlzLmF4aXNCOwogICAgICBjb25zdCBuaXhuaiA9IHRtcFZlYzEkMTsKICAgICAgY29uc3Qgbmp4bmkgPSB0bXBWZWMyJDE7CiAgICAgIGNvbnN0IEdBID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRBOwogICAgICBjb25zdCBHQiA9IHRoaXMuamFjb2JpYW5FbGVtZW50QjsgLy8gQ2FsdWNsYXRlIGNyb3NzIHByb2R1Y3RzCgogICAgICBuaS5jcm9zcyhuaiwgbml4bmopOwogICAgICBuai5jcm9zcyhuaSwgbmp4bmkpOyAvLyBnID0gbmkgKiBuagogICAgICAvLyBnZG90ID0gKG5qIHggbmkpICogd2kgKyAobmkgeCBuaikgKiB3agogICAgICAvLyBHID0gWzAgbmp4bmkgMCBuaXhual0KICAgICAgLy8gVyA9IFt2aSB3aSB2aiB3al0KCiAgICAgIEdBLnJvdGF0aW9uYWwuY29weShuanhuaSk7CiAgICAgIEdCLnJvdGF0aW9uYWwuY29weShuaXhuaik7CiAgICAgIGNvbnN0IGcgPSBNYXRoLmNvcyh0aGlzLm1heEFuZ2xlKSAtIG5pLmRvdChuaik7CiAgICAgIGNvbnN0IEdXID0gdGhpcy5jb21wdXRlR1coKTsKICAgICAgY29uc3QgR2lNZiA9IHRoaXMuY29tcHV0ZUdpTWYoKTsKICAgICAgY29uc3QgQiA9IC1nICogYSAtIEdXICogYiAtIGggKiBHaU1mOwogICAgICByZXR1cm4gQjsKICAgIH0KCiAgfQoKICBjb25zdCB0bXBWZWMxJDEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHRtcFZlYzIkMSA9IG5ldyBWZWMzKCk7CiAgLyoqCiAgICogQSBDb25lIFR3aXN0IGNvbnN0cmFpbnQsIHVzZWZ1bCBmb3IgcmFnZG9sbHMuCiAgICovCgogIGNsYXNzIENvbmVUd2lzdENvbnN0cmFpbnQgZXh0ZW5kcyBQb2ludFRvUG9pbnRDb25zdHJhaW50IHsKICAgIC8qKgogICAgICogVGhlIGF4aXMgZGlyZWN0aW9uIGZvciB0aGUgY29uc3RyYWludCBvZiB0aGUgYm9keSBBLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgYXhpcyBkaXJlY3Rpb24gZm9yIHRoZSBjb25zdHJhaW50IG9mIHRoZSBib2R5IEIuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBhcGVydHVyZSBhbmdsZSBvZiB0aGUgY29uZS4KICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIHR3aXN0IGFuZ2xlIG9mIHRoZSBqb2ludC4KICAgICAqLwogICAgY29uc3RydWN0b3IoYm9keUEsIGJvZHlCLCBvcHRpb25zID0ge30pIHsKICAgICAgY29uc3QgbWF4Rm9yY2UgPSB0eXBlb2Ygb3B0aW9ucy5tYXhGb3JjZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLm1heEZvcmNlIDogMWU2OyAvLyBTZXQgcGl2b3QgcG9pbnQgaW4gYmV0d2VlbgoKICAgICAgY29uc3QgcGl2b3RBID0gb3B0aW9ucy5waXZvdEEgPyBvcHRpb25zLnBpdm90QS5jbG9uZSgpIDogbmV3IFZlYzMoKTsKICAgICAgY29uc3QgcGl2b3RCID0gb3B0aW9ucy5waXZvdEIgPyBvcHRpb25zLnBpdm90Qi5jbG9uZSgpIDogbmV3IFZlYzMoKTsKICAgICAgc3VwZXIoYm9keUEsIHBpdm90QSwgYm9keUIsIHBpdm90QiwgbWF4Rm9yY2UpOwogICAgICB0aGlzLmF4aXNBID0gdm9pZCAwOwogICAgICB0aGlzLmF4aXNCID0gdm9pZCAwOwogICAgICB0aGlzLmFuZ2xlID0gdm9pZCAwOwogICAgICB0aGlzLnR3aXN0QW5nbGUgPSB2b2lkIDA7CiAgICAgIHRoaXMuY29uZUVxdWF0aW9uID0gdm9pZCAwOwogICAgICB0aGlzLnR3aXN0RXF1YXRpb24gPSB2b2lkIDA7CiAgICAgIHRoaXMuYXhpc0EgPSBvcHRpb25zLmF4aXNBID8gb3B0aW9ucy5heGlzQS5jbG9uZSgpIDogbmV3IFZlYzMoKTsKICAgICAgdGhpcy5heGlzQiA9IG9wdGlvbnMuYXhpc0IgPyBvcHRpb25zLmF4aXNCLmNsb25lKCkgOiBuZXcgVmVjMygpOwogICAgICB0aGlzLmNvbGxpZGVDb25uZWN0ZWQgPSAhIW9wdGlvbnMuY29sbGlkZUNvbm5lY3RlZDsKICAgICAgdGhpcy5hbmdsZSA9IHR5cGVvZiBvcHRpb25zLmFuZ2xlICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuYW5nbGUgOiAwOwogICAgICBjb25zdCBjID0gdGhpcy5jb25lRXF1YXRpb24gPSBuZXcgQ29uZUVxdWF0aW9uKGJvZHlBLCBib2R5Qiwgb3B0aW9ucyk7CiAgICAgIGNvbnN0IHQgPSB0aGlzLnR3aXN0RXF1YXRpb24gPSBuZXcgUm90YXRpb25hbEVxdWF0aW9uKGJvZHlBLCBib2R5Qiwgb3B0aW9ucyk7CiAgICAgIHRoaXMudHdpc3RBbmdsZSA9IHR5cGVvZiBvcHRpb25zLnR3aXN0QW5nbGUgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy50d2lzdEFuZ2xlIDogMDsgLy8gTWFrZSB0aGUgY29uZSBlcXVhdGlvbiBwdXNoIHRoZSBib2RpZXMgdG93YXJkIHRoZSBjb25lIGF4aXMsIG5vdCBvdXR3YXJkCgogICAgICBjLm1heEZvcmNlID0gMDsKICAgICAgYy5taW5Gb3JjZSA9IC1tYXhGb3JjZTsgLy8gTWFrZSB0aGUgdHdpc3QgZXF1YXRpb24gYWRkIHRvcnF1ZSB0b3dhcmQgdGhlIGluaXRpYWwgcG9zaXRpb24KCiAgICAgIHQubWF4Rm9yY2UgPSAwOwogICAgICB0Lm1pbkZvcmNlID0gLW1heEZvcmNlOwogICAgICB0aGlzLmVxdWF0aW9ucy5wdXNoKGMsIHQpOwogICAgfQoKICAgIHVwZGF0ZSgpIHsKICAgICAgY29uc3QgYm9keUEgPSB0aGlzLmJvZHlBOwogICAgICBjb25zdCBib2R5QiA9IHRoaXMuYm9keUI7CiAgICAgIGNvbnN0IGNvbmUgPSB0aGlzLmNvbmVFcXVhdGlvbjsKICAgICAgY29uc3QgdHdpc3QgPSB0aGlzLnR3aXN0RXF1YXRpb247CiAgICAgIHN1cGVyLnVwZGF0ZSgpOyAvLyBVcGRhdGUgdGhlIGF4ZXMgdG8gdGhlIGNvbmUgY29uc3RyYWludAoKICAgICAgYm9keUEudmVjdG9yVG9Xb3JsZEZyYW1lKHRoaXMuYXhpc0EsIGNvbmUuYXhpc0EpOwogICAgICBib2R5Qi52ZWN0b3JUb1dvcmxkRnJhbWUodGhpcy5heGlzQiwgY29uZS5heGlzQik7IC8vIFVwZGF0ZSB0aGUgd29ybGQgYXhlcyBpbiB0aGUgdHdpc3QgY29uc3RyYWludAoKICAgICAgdGhpcy5heGlzQS50YW5nZW50cyh0d2lzdC5heGlzQSwgdHdpc3QuYXhpc0EpOwogICAgICBib2R5QS52ZWN0b3JUb1dvcmxkRnJhbWUodHdpc3QuYXhpc0EsIHR3aXN0LmF4aXNBKTsKICAgICAgdGhpcy5heGlzQi50YW5nZW50cyh0d2lzdC5heGlzQiwgdHdpc3QuYXhpc0IpOwogICAgICBib2R5Qi52ZWN0b3JUb1dvcmxkRnJhbWUodHdpc3QuYXhpc0IsIHR3aXN0LmF4aXNCKTsKICAgICAgY29uZS5hbmdsZSA9IHRoaXMuYW5nbGU7CiAgICAgIHR3aXN0Lm1heEFuZ2xlID0gdGhpcy50d2lzdEFuZ2xlOwogICAgfQoKICB9CiAgLyoqCiAgICogQ29uc3RyYWlucyB0d28gYm9kaWVzIHRvIGJlIGF0IGEgY29uc3RhbnQgZGlzdGFuY2UgZnJvbSBlYWNoIG90aGVycyBjZW50ZXIgb2YgbWFzcy4KICAgKi8KCgogIGNsYXNzIERpc3RhbmNlQ29uc3RyYWludCBleHRlbmRzIENvbnN0cmFpbnQgewogICAgLyoqCiAgICAgKiBUaGUgZGlzdGFuY2UgdG8ga2VlcC4gSWYgdW5kZWZpbmVkLCBpdCB3aWxsIGJlIHNldCB0byB0aGUgY3VycmVudCBkaXN0YW5jZSBiZXR3ZWVuIGJvZHlBIGFuZCBib2R5QgogICAgICovCgogICAgLyoqCiAgICAgKiBAcGFyYW0gZGlzdGFuY2UgVGhlIGRpc3RhbmNlIHRvIGtlZXAuIElmIHVuZGVmaW5lZCwgaXQgd2lsbCBiZSBzZXQgdG8gdGhlIGN1cnJlbnQgZGlzdGFuY2UgYmV0d2VlbiBib2R5QSBhbmQgYm9keUIuCiAgICAgKiBAcGFyYW0gbWF4Rm9yY2UgVGhlIG1heGltdW0gZm9yY2UgdGhhdCBzaG91bGQgYmUgYXBwbGllZCB0byBjb25zdHJhaW4gdGhlIGJvZGllcy4KICAgICAqLwogICAgY29uc3RydWN0b3IoYm9keUEsIGJvZHlCLCBkaXN0YW5jZSwgbWF4Rm9yY2UgPSAxZTYpIHsKICAgICAgc3VwZXIoYm9keUEsIGJvZHlCKTsKICAgICAgdGhpcy5kaXN0YW5jZSA9IHZvaWQgMDsKICAgICAgdGhpcy5kaXN0YW5jZUVxdWF0aW9uID0gdm9pZCAwOwoKICAgICAgaWYgKHR5cGVvZiBkaXN0YW5jZSA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICBkaXN0YW5jZSA9IGJvZHlBLnBvc2l0aW9uLmRpc3RhbmNlVG8oYm9keUIucG9zaXRpb24pOwogICAgICB9CgogICAgICB0aGlzLmRpc3RhbmNlID0gZGlzdGFuY2U7CiAgICAgIGNvbnN0IGVxID0gdGhpcy5kaXN0YW5jZUVxdWF0aW9uID0gbmV3IENvbnRhY3RFcXVhdGlvbihib2R5QSwgYm9keUIpOwogICAgICB0aGlzLmVxdWF0aW9ucy5wdXNoKGVxKTsgLy8gTWFrZSBpdCBiaWRpcmVjdGlvbmFsCgogICAgICBlcS5taW5Gb3JjZSA9IC1tYXhGb3JjZTsKICAgICAgZXEubWF4Rm9yY2UgPSBtYXhGb3JjZTsKICAgIH0KICAgIC8qKgogICAgICogdXBkYXRlCiAgICAgKi8KCgogICAgdXBkYXRlKCkgewogICAgICBjb25zdCBib2R5QSA9IHRoaXMuYm9keUE7CiAgICAgIGNvbnN0IGJvZHlCID0gdGhpcy5ib2R5QjsKICAgICAgY29uc3QgZXEgPSB0aGlzLmRpc3RhbmNlRXF1YXRpb247CiAgICAgIGNvbnN0IGhhbGZEaXN0ID0gdGhpcy5kaXN0YW5jZSAqIDAuNTsKICAgICAgY29uc3Qgbm9ybWFsID0gZXEubmk7CiAgICAgIGJvZHlCLnBvc2l0aW9uLnZzdWIoYm9keUEucG9zaXRpb24sIG5vcm1hbCk7CiAgICAgIG5vcm1hbC5ub3JtYWxpemUoKTsKICAgICAgbm9ybWFsLnNjYWxlKGhhbGZEaXN0LCBlcS5yaSk7CiAgICAgIG5vcm1hbC5zY2FsZSgtaGFsZkRpc3QsIGVxLnJqKTsKICAgIH0KCiAgfQogIC8qKgogICAqIExvY2sgY29uc3RyYWludC4gV2lsbCByZW1vdmUgYWxsIGRlZ3JlZXMgb2YgZnJlZWRvbSBiZXR3ZWVuIHRoZSBib2RpZXMuCiAgICovCgoKICBjbGFzcyBMb2NrQ29uc3RyYWludCBleHRlbmRzIFBvaW50VG9Qb2ludENvbnN0cmFpbnQgewogICAgY29uc3RydWN0b3IoYm9keUEsIGJvZHlCLCBvcHRpb25zID0ge30pIHsKICAgICAgY29uc3QgbWF4Rm9yY2UgPSB0eXBlb2Ygb3B0aW9ucy5tYXhGb3JjZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLm1heEZvcmNlIDogMWU2OyAvLyBTZXQgcGl2b3QgcG9pbnQgaW4gYmV0d2VlbgoKICAgICAgY29uc3QgcGl2b3RBID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgcGl2b3RCID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgaGFsZldheSA9IG5ldyBWZWMzKCk7CiAgICAgIGJvZHlBLnBvc2l0aW9uLnZhZGQoYm9keUIucG9zaXRpb24sIGhhbGZXYXkpOwogICAgICBoYWxmV2F5LnNjYWxlKDAuNSwgaGFsZldheSk7CiAgICAgIGJvZHlCLnBvaW50VG9Mb2NhbEZyYW1lKGhhbGZXYXksIHBpdm90Qik7CiAgICAgIGJvZHlBLnBvaW50VG9Mb2NhbEZyYW1lKGhhbGZXYXksIHBpdm90QSk7IC8vIFRoZSBwb2ludC10by1wb2ludCBjb25zdHJhaW50IHdpbGwga2VlcCBhIHBvaW50IHNoYXJlZCBiZXR3ZWVuIHRoZSBib2RpZXMKCiAgICAgIHN1cGVyKGJvZHlBLCBwaXZvdEEsIGJvZHlCLCBwaXZvdEIsIG1heEZvcmNlKTsgLy8gU3RvcmUgaW5pdGlhbCByb3RhdGlvbiBvZiB0aGUgYm9kaWVzIGFzIHVuaXQgdmVjdG9ycyBpbiB0aGUgbG9jYWwgYm9keSBzcGFjZXMKCiAgICAgIHRoaXMueEEgPSB2b2lkIDA7CiAgICAgIHRoaXMueEIgPSB2b2lkIDA7CiAgICAgIHRoaXMueUEgPSB2b2lkIDA7CiAgICAgIHRoaXMueUIgPSB2b2lkIDA7CiAgICAgIHRoaXMuekEgPSB2b2lkIDA7CiAgICAgIHRoaXMuekIgPSB2b2lkIDA7CiAgICAgIHRoaXMucm90YXRpb25hbEVxdWF0aW9uMSA9IHZvaWQgMDsKICAgICAgdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24yID0gdm9pZCAwOwogICAgICB0aGlzLnJvdGF0aW9uYWxFcXVhdGlvbjMgPSB2b2lkIDA7CiAgICAgIHRoaXMubW90b3JFcXVhdGlvbiA9IHZvaWQgMDsKICAgICAgdGhpcy54QSA9IGJvZHlBLnZlY3RvclRvTG9jYWxGcmFtZShWZWMzLlVOSVRfWCk7CiAgICAgIHRoaXMueEIgPSBib2R5Qi52ZWN0b3JUb0xvY2FsRnJhbWUoVmVjMy5VTklUX1gpOwogICAgICB0aGlzLnlBID0gYm9keUEudmVjdG9yVG9Mb2NhbEZyYW1lKFZlYzMuVU5JVF9ZKTsKICAgICAgdGhpcy55QiA9IGJvZHlCLnZlY3RvclRvTG9jYWxGcmFtZShWZWMzLlVOSVRfWSk7CiAgICAgIHRoaXMuekEgPSBib2R5QS52ZWN0b3JUb0xvY2FsRnJhbWUoVmVjMy5VTklUX1opOwogICAgICB0aGlzLnpCID0gYm9keUIudmVjdG9yVG9Mb2NhbEZyYW1lKFZlYzMuVU5JVF9aKTsgLy8gLi4uYW5kIHRoZSBmb2xsb3dpbmcgcm90YXRpb25hbCBlcXVhdGlvbnMgd2lsbCBrZWVwIGFsbCByb3RhdGlvbmFsIERPRidzIGluIHBsYWNlCgogICAgICBjb25zdCByMSA9IHRoaXMucm90YXRpb25hbEVxdWF0aW9uMSA9IG5ldyBSb3RhdGlvbmFsRXF1YXRpb24oYm9keUEsIGJvZHlCLCBvcHRpb25zKTsKICAgICAgY29uc3QgcjIgPSB0aGlzLnJvdGF0aW9uYWxFcXVhdGlvbjIgPSBuZXcgUm90YXRpb25hbEVxdWF0aW9uKGJvZHlBLCBib2R5Qiwgb3B0aW9ucyk7CiAgICAgIGNvbnN0IHIzID0gdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24zID0gbmV3IFJvdGF0aW9uYWxFcXVhdGlvbihib2R5QSwgYm9keUIsIG9wdGlvbnMpOwogICAgICB0aGlzLmVxdWF0aW9ucy5wdXNoKHIxLCByMiwgcjMpOwogICAgfQogICAgLyoqCiAgICAgKiB1cGRhdGUKICAgICAqLwoKCiAgICB1cGRhdGUoKSB7CiAgICAgIGNvbnN0IGJvZHlBID0gdGhpcy5ib2R5QTsKICAgICAgY29uc3QgYm9keUIgPSB0aGlzLmJvZHlCOwogICAgICB0aGlzLm1vdG9yRXF1YXRpb247CiAgICAgIGNvbnN0IHIxID0gdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24xOwogICAgICBjb25zdCByMiA9IHRoaXMucm90YXRpb25hbEVxdWF0aW9uMjsKICAgICAgY29uc3QgcjMgPSB0aGlzLnJvdGF0aW9uYWxFcXVhdGlvbjM7CiAgICAgIHN1cGVyLnVwZGF0ZSgpOyAvLyBUaGVzZSB2ZWN0b3IgcGFpcnMgbXVzdCBiZSBvcnRob2dvbmFsCgogICAgICBib2R5QS52ZWN0b3JUb1dvcmxkRnJhbWUodGhpcy54QSwgcjEuYXhpc0EpOwogICAgICBib2R5Qi52ZWN0b3JUb1dvcmxkRnJhbWUodGhpcy55QiwgcjEuYXhpc0IpOwogICAgICBib2R5QS52ZWN0b3JUb1dvcmxkRnJhbWUodGhpcy55QSwgcjIuYXhpc0EpOwogICAgICBib2R5Qi52ZWN0b3JUb1dvcmxkRnJhbWUodGhpcy56QiwgcjIuYXhpc0IpOwogICAgICBib2R5QS52ZWN0b3JUb1dvcmxkRnJhbWUodGhpcy56QSwgcjMuYXhpc0EpOwogICAgICBib2R5Qi52ZWN0b3JUb1dvcmxkRnJhbWUodGhpcy54QiwgcjMuYXhpc0IpOwogICAgfQoKICB9CiAgLyoqCiAgICogUm90YXRpb25hbCBtb3RvciBjb25zdHJhaW50LiBUcmllcyB0byBrZWVwIHRoZSByZWxhdGl2ZSBhbmd1bGFyIHZlbG9jaXR5IG9mIHRoZSBib2RpZXMgdG8gYSBnaXZlbiB2YWx1ZS4KICAgKi8KCgogIGNsYXNzIFJvdGF0aW9uYWxNb3RvckVxdWF0aW9uIGV4dGVuZHMgRXF1YXRpb24gewogICAgLyoqCiAgICAgKiBXb3JsZCBvcmllbnRlZCByb3RhdGlvbmFsIGF4aXMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFdvcmxkIG9yaWVudGVkIHJvdGF0aW9uYWwgYXhpcy4KICAgICAqLwoKICAgIC8qKgogICAgICogTW90b3IgdmVsb2NpdHkuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGJvZHlBLCBib2R5QiwgbWF4Rm9yY2UgPSAxZTYpIHsKICAgICAgc3VwZXIoYm9keUEsIGJvZHlCLCAtbWF4Rm9yY2UsIG1heEZvcmNlKTsKICAgICAgdGhpcy5heGlzQSA9IHZvaWQgMDsKICAgICAgdGhpcy5heGlzQiA9IHZvaWQgMDsKICAgICAgdGhpcy50YXJnZXRWZWxvY2l0eSA9IHZvaWQgMDsKICAgICAgdGhpcy5heGlzQSA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuYXhpc0IgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLnRhcmdldFZlbG9jaXR5ID0gMDsKICAgIH0KCiAgICBjb21wdXRlQihoKSB7CiAgICAgIHRoaXMuYTsKICAgICAgY29uc3QgYiA9IHRoaXMuYjsKICAgICAgdGhpcy5iaTsKICAgICAgdGhpcy5iajsKICAgICAgY29uc3QgYXhpc0EgPSB0aGlzLmF4aXNBOwogICAgICBjb25zdCBheGlzQiA9IHRoaXMuYXhpc0I7CiAgICAgIGNvbnN0IEdBID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRBOwogICAgICBjb25zdCBHQiA9IHRoaXMuamFjb2JpYW5FbGVtZW50QjsgLy8gZyA9IDAKICAgICAgLy8gZ2RvdCA9IGF4aXNBICogd2kgLSBheGlzQiAqIHdqCiAgICAgIC8vIGdkb3QgPSBHICogVyA9IEcgKiBbdmkgd2kgdmogd2pdCiAgICAgIC8vID0+CiAgICAgIC8vIEcgPSBbMCBheGlzQSAwIC1heGlzQl0KCiAgICAgIEdBLnJvdGF0aW9uYWwuY29weShheGlzQSk7CiAgICAgIGF4aXNCLm5lZ2F0ZShHQi5yb3RhdGlvbmFsKTsKICAgICAgY29uc3QgR1cgPSB0aGlzLmNvbXB1dGVHVygpIC0gdGhpcy50YXJnZXRWZWxvY2l0eTsKICAgICAgY29uc3QgR2lNZiA9IHRoaXMuY29tcHV0ZUdpTWYoKTsKICAgICAgY29uc3QgQiA9IC1HVyAqIGIgLSBoICogR2lNZjsKICAgICAgcmV0dXJuIEI7CiAgICB9CgogIH0KICAvKioKICAgKiBIaW5nZSBjb25zdHJhaW50LiBUaGluayBvZiBpdCBhcyBhIGRvb3IgaGluZ2UuIEl0IHRyaWVzIHRvIGtlZXAgdGhlIGRvb3IgaW4gdGhlIGNvcnJlY3QgcGxhY2UgYW5kIHdpdGggdGhlIGNvcnJlY3Qgb3JpZW50YXRpb24uCiAgICovCgoKICBjbGFzcyBIaW5nZUNvbnN0cmFpbnQgZXh0ZW5kcyBQb2ludFRvUG9pbnRDb25zdHJhaW50IHsKICAgIC8qKgogICAgICogUm90YXRpb24gYXhpcywgZGVmaW5lZCBsb2NhbGx5IGluIGJvZHlBLgogICAgICovCgogICAgLyoqCiAgICAgKiBSb3RhdGlvbiBheGlzLCBkZWZpbmVkIGxvY2FsbHkgaW4gYm9keUIuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGJvZHlBLCBib2R5Qiwgb3B0aW9ucyA9IHt9KSB7CiAgICAgIGNvbnN0IG1heEZvcmNlID0gdHlwZW9mIG9wdGlvbnMubWF4Rm9yY2UgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5tYXhGb3JjZSA6IDFlNjsKICAgICAgY29uc3QgcGl2b3RBID0gb3B0aW9ucy5waXZvdEEgPyBvcHRpb25zLnBpdm90QS5jbG9uZSgpIDogbmV3IFZlYzMoKTsKICAgICAgY29uc3QgcGl2b3RCID0gb3B0aW9ucy5waXZvdEIgPyBvcHRpb25zLnBpdm90Qi5jbG9uZSgpIDogbmV3IFZlYzMoKTsKICAgICAgc3VwZXIoYm9keUEsIHBpdm90QSwgYm9keUIsIHBpdm90QiwgbWF4Rm9yY2UpOwogICAgICB0aGlzLmF4aXNBID0gdm9pZCAwOwogICAgICB0aGlzLmF4aXNCID0gdm9pZCAwOwogICAgICB0aGlzLnJvdGF0aW9uYWxFcXVhdGlvbjEgPSB2b2lkIDA7CiAgICAgIHRoaXMucm90YXRpb25hbEVxdWF0aW9uMiA9IHZvaWQgMDsKICAgICAgdGhpcy5tb3RvckVxdWF0aW9uID0gdm9pZCAwOwogICAgICBjb25zdCBheGlzQSA9IHRoaXMuYXhpc0EgPSBvcHRpb25zLmF4aXNBID8gb3B0aW9ucy5heGlzQS5jbG9uZSgpIDogbmV3IFZlYzMoMSwgMCwgMCk7CiAgICAgIGF4aXNBLm5vcm1hbGl6ZSgpOwogICAgICBjb25zdCBheGlzQiA9IHRoaXMuYXhpc0IgPSBvcHRpb25zLmF4aXNCID8gb3B0aW9ucy5heGlzQi5jbG9uZSgpIDogbmV3IFZlYzMoMSwgMCwgMCk7CiAgICAgIGF4aXNCLm5vcm1hbGl6ZSgpOwogICAgICB0aGlzLmNvbGxpZGVDb25uZWN0ZWQgPSAhIW9wdGlvbnMuY29sbGlkZUNvbm5lY3RlZDsKICAgICAgY29uc3Qgcm90YXRpb25hbDEgPSB0aGlzLnJvdGF0aW9uYWxFcXVhdGlvbjEgPSBuZXcgUm90YXRpb25hbEVxdWF0aW9uKGJvZHlBLCBib2R5Qiwgb3B0aW9ucyk7CiAgICAgIGNvbnN0IHJvdGF0aW9uYWwyID0gdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24yID0gbmV3IFJvdGF0aW9uYWxFcXVhdGlvbihib2R5QSwgYm9keUIsIG9wdGlvbnMpOwogICAgICBjb25zdCBtb3RvciA9IHRoaXMubW90b3JFcXVhdGlvbiA9IG5ldyBSb3RhdGlvbmFsTW90b3JFcXVhdGlvbihib2R5QSwgYm9keUIsIG1heEZvcmNlKTsKICAgICAgbW90b3IuZW5hYmxlZCA9IGZhbHNlOyAvLyBOb3QgZW5hYmxlZCBieSBkZWZhdWx0CiAgICAgIC8vIEVxdWF0aW9ucyB0byBiZSBmZWQgdG8gdGhlIHNvbHZlcgoKICAgICAgdGhpcy5lcXVhdGlvbnMucHVzaChyb3RhdGlvbmFsMSwgcm90YXRpb25hbDIsIG1vdG9yKTsKICAgIH0KICAgIC8qKgogICAgICogZW5hYmxlTW90b3IKICAgICAqLwoKCiAgICBlbmFibGVNb3RvcigpIHsKICAgICAgdGhpcy5tb3RvckVxdWF0aW9uLmVuYWJsZWQgPSB0cnVlOwogICAgfQogICAgLyoqCiAgICAgKiBkaXNhYmxlTW90b3IKICAgICAqLwoKCiAgICBkaXNhYmxlTW90b3IoKSB7CiAgICAgIHRoaXMubW90b3JFcXVhdGlvbi5lbmFibGVkID0gZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIHNldE1vdG9yU3BlZWQKICAgICAqLwoKCiAgICBzZXRNb3RvclNwZWVkKHNwZWVkKSB7CiAgICAgIHRoaXMubW90b3JFcXVhdGlvbi50YXJnZXRWZWxvY2l0eSA9IHNwZWVkOwogICAgfQogICAgLyoqCiAgICAgKiBzZXRNb3Rvck1heEZvcmNlCiAgICAgKi8KCgogICAgc2V0TW90b3JNYXhGb3JjZShtYXhGb3JjZSkgewogICAgICB0aGlzLm1vdG9yRXF1YXRpb24ubWF4Rm9yY2UgPSBtYXhGb3JjZTsKICAgICAgdGhpcy5tb3RvckVxdWF0aW9uLm1pbkZvcmNlID0gLW1heEZvcmNlOwogICAgfQogICAgLyoqCiAgICAgKiB1cGRhdGUKICAgICAqLwoKCiAgICB1cGRhdGUoKSB7CiAgICAgIGNvbnN0IGJvZHlBID0gdGhpcy5ib2R5QTsKICAgICAgY29uc3QgYm9keUIgPSB0aGlzLmJvZHlCOwogICAgICBjb25zdCBtb3RvciA9IHRoaXMubW90b3JFcXVhdGlvbjsKICAgICAgY29uc3QgcjEgPSB0aGlzLnJvdGF0aW9uYWxFcXVhdGlvbjE7CiAgICAgIGNvbnN0IHIyID0gdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24yOwogICAgICBjb25zdCB3b3JsZEF4aXNBID0gSGluZ2VDb25zdHJhaW50X3VwZGF0ZV90bXBWZWMxOwogICAgICBjb25zdCB3b3JsZEF4aXNCID0gSGluZ2VDb25zdHJhaW50X3VwZGF0ZV90bXBWZWMyOwogICAgICBjb25zdCBheGlzQSA9IHRoaXMuYXhpc0E7CiAgICAgIGNvbnN0IGF4aXNCID0gdGhpcy5heGlzQjsKICAgICAgc3VwZXIudXBkYXRlKCk7IC8vIEdldCB3b3JsZCBheGVzCgogICAgICBib2R5QS5xdWF0ZXJuaW9uLnZtdWx0KGF4aXNBLCB3b3JsZEF4aXNBKTsKICAgICAgYm9keUIucXVhdGVybmlvbi52bXVsdChheGlzQiwgd29ybGRBeGlzQik7CiAgICAgIHdvcmxkQXhpc0EudGFuZ2VudHMocjEuYXhpc0EsIHIyLmF4aXNBKTsKICAgICAgcjEuYXhpc0IuY29weSh3b3JsZEF4aXNCKTsKICAgICAgcjIuYXhpc0IuY29weSh3b3JsZEF4aXNCKTsKCiAgICAgIGlmICh0aGlzLm1vdG9yRXF1YXRpb24uZW5hYmxlZCkgewogICAgICAgIGJvZHlBLnF1YXRlcm5pb24udm11bHQodGhpcy5heGlzQSwgbW90b3IuYXhpc0EpOwogICAgICAgIGJvZHlCLnF1YXRlcm5pb24udm11bHQodGhpcy5heGlzQiwgbW90b3IuYXhpc0IpOwogICAgICB9CiAgICB9CgogIH0KCiAgY29uc3QgSGluZ2VDb25zdHJhaW50X3VwZGF0ZV90bXBWZWMxID0gbmV3IFZlYzMoKTsKICBjb25zdCBIaW5nZUNvbnN0cmFpbnRfdXBkYXRlX3RtcFZlYzIgPSBuZXcgVmVjMygpOwogIC8qKgogICAqIENvbnN0cmFpbnMgdGhlIHNsaXBwaW5nIGluIGEgY29udGFjdCBhbG9uZyBhIHRhbmdlbnQKICAgKi8KCiAgY2xhc3MgRnJpY3Rpb25FcXVhdGlvbiBleHRlbmRzIEVxdWF0aW9uIHsKICAgIC8vIFRhbmdlbnQKCiAgICAvKioKICAgICAqIEBwYXJhbSBzbGlwRm9yY2Ugc2hvdWxkIGJlICstRl9mcmljdGlvbiA9ICstbXUgKiBGX25vcm1hbCA9ICstbXUgKiBtICogZwogICAgICovCiAgICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIHNsaXBGb3JjZSkgewogICAgICBzdXBlcihib2R5QSwgYm9keUIsIC1zbGlwRm9yY2UsIHNsaXBGb3JjZSk7CiAgICAgIHRoaXMucmkgPSB2b2lkIDA7CiAgICAgIHRoaXMucmogPSB2b2lkIDA7CiAgICAgIHRoaXMudCA9IHZvaWQgMDsKICAgICAgdGhpcy5yaSA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMucmogPSBuZXcgVmVjMygpOwogICAgICB0aGlzLnQgPSBuZXcgVmVjMygpOwogICAgfQoKICAgIGNvbXB1dGVCKGgpIHsKICAgICAgdGhpcy5hOwogICAgICBjb25zdCBiID0gdGhpcy5iOwogICAgICB0aGlzLmJpOwogICAgICB0aGlzLmJqOwogICAgICBjb25zdCByaSA9IHRoaXMucmk7CiAgICAgIGNvbnN0IHJqID0gdGhpcy5yajsKICAgICAgY29uc3Qgcml4dCA9IEZyaWN0aW9uRXF1YXRpb25fY29tcHV0ZUJfdGVtcDE7CiAgICAgIGNvbnN0IHJqeHQgPSBGcmljdGlvbkVxdWF0aW9uX2NvbXB1dGVCX3RlbXAyOwogICAgICBjb25zdCB0ID0gdGhpcy50OyAvLyBDYWx1Y2xhdGUgY3Jvc3MgcHJvZHVjdHMKCiAgICAgIHJpLmNyb3NzKHQsIHJpeHQpOwogICAgICByai5jcm9zcyh0LCByanh0KTsgLy8gRyA9IFstdCAtcml4dCB0IHJqeHRdCiAgICAgIC8vIEFuZCByZW1lbWJlciwgdGhpcyBpcyBhIHB1cmUgdmVsb2NpdHkgY29uc3RyYWludCwgZyBpcyBhbHdheXMgemVybyEKCiAgICAgIGNvbnN0IEdBID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRBOwogICAgICBjb25zdCBHQiA9IHRoaXMuamFjb2JpYW5FbGVtZW50QjsKICAgICAgdC5uZWdhdGUoR0Euc3BhdGlhbCk7CiAgICAgIHJpeHQubmVnYXRlKEdBLnJvdGF0aW9uYWwpOwogICAgICBHQi5zcGF0aWFsLmNvcHkodCk7CiAgICAgIEdCLnJvdGF0aW9uYWwuY29weShyanh0KTsKICAgICAgY29uc3QgR1cgPSB0aGlzLmNvbXB1dGVHVygpOwogICAgICBjb25zdCBHaU1mID0gdGhpcy5jb21wdXRlR2lNZigpOwogICAgICBjb25zdCBCID0gLUdXICogYiAtIGggKiBHaU1mOwogICAgICByZXR1cm4gQjsKICAgIH0KCiAgfQoKICBjb25zdCBGcmljdGlvbkVxdWF0aW9uX2NvbXB1dGVCX3RlbXAxID0gbmV3IFZlYzMoKTsKICBjb25zdCBGcmljdGlvbkVxdWF0aW9uX2NvbXB1dGVCX3RlbXAyID0gbmV3IFZlYzMoKTsKICAvKioKICAgKiBEZWZpbmVzIHdoYXQgaGFwcGVucyB3aGVuIHR3byBtYXRlcmlhbHMgbWVldC4KICAgKiBAdG9kbyBSZWZhY3RvciBtYXRlcmlhbHMgdG8gbWF0ZXJpYWxBIGFuZCBtYXRlcmlhbEIKICAgKi8KCiAgY2xhc3MgQ29udGFjdE1hdGVyaWFsIHsKICAgIC8qKgogICAgICogSWRlbnRpZmllciBvZiB0aGlzIG1hdGVyaWFsLgogICAgICovCgogICAgLyoqCiAgICAgKiBQYXJ0aWNpcGF0aW5nIG1hdGVyaWFscy4KICAgICAqLwoKICAgIC8qKgogICAgICogRnJpY3Rpb24gY29lZmZpY2llbnQuCiAgICAgKiBAZGVmYXVsdCAwLjMKICAgICAqLwoKICAgIC8qKgogICAgICogUmVzdGl0dXRpb24gY29lZmZpY2llbnQuCiAgICAgKiBAZGVmYXVsdCAwLjMKICAgICAqLwoKICAgIC8qKgogICAgICogU3RpZmZuZXNzIG9mIHRoZSBwcm9kdWNlZCBjb250YWN0IGVxdWF0aW9ucy4KICAgICAqIEBkZWZhdWx0IDFlNwogICAgICovCgogICAgLyoqCiAgICAgKiBSZWxheGF0aW9uIHRpbWUgb2YgdGhlIHByb2R1Y2VkIGNvbnRhY3QgZXF1YXRpb25zLgogICAgICogQGRlZmF1bHQgMwogICAgICovCgogICAgLyoqCiAgICAgKiBTdGlmZm5lc3Mgb2YgdGhlIHByb2R1Y2VkIGZyaWN0aW9uIGVxdWF0aW9ucy4KICAgICAqIEBkZWZhdWx0IDFlNwogICAgICovCgogICAgLyoqCiAgICAgKiBSZWxheGF0aW9uIHRpbWUgb2YgdGhlIHByb2R1Y2VkIGZyaWN0aW9uIGVxdWF0aW9ucwogICAgICogQGRlZmF1bHQgMwogICAgICovCiAgICBjb25zdHJ1Y3RvcihtMSwgbTIsIG9wdGlvbnMpIHsKICAgICAgdGhpcy5pZCA9IHZvaWQgMDsKICAgICAgdGhpcy5tYXRlcmlhbHMgPSB2b2lkIDA7CiAgICAgIHRoaXMuZnJpY3Rpb24gPSB2b2lkIDA7CiAgICAgIHRoaXMucmVzdGl0dXRpb24gPSB2b2lkIDA7CiAgICAgIHRoaXMuY29udGFjdEVxdWF0aW9uU3RpZmZuZXNzID0gdm9pZCAwOwogICAgICB0aGlzLmNvbnRhY3RFcXVhdGlvblJlbGF4YXRpb24gPSB2b2lkIDA7CiAgICAgIHRoaXMuZnJpY3Rpb25FcXVhdGlvblN0aWZmbmVzcyA9IHZvaWQgMDsKICAgICAgdGhpcy5mcmljdGlvbkVxdWF0aW9uUmVsYXhhdGlvbiA9IHZvaWQgMDsKICAgICAgb3B0aW9ucyA9IFV0aWxzLmRlZmF1bHRzKG9wdGlvbnMsIHsKICAgICAgICBmcmljdGlvbjogMC4zLAogICAgICAgIHJlc3RpdHV0aW9uOiAwLjMsCiAgICAgICAgY29udGFjdEVxdWF0aW9uU3RpZmZuZXNzOiAxZTcsCiAgICAgICAgY29udGFjdEVxdWF0aW9uUmVsYXhhdGlvbjogMywKICAgICAgICBmcmljdGlvbkVxdWF0aW9uU3RpZmZuZXNzOiAxZTcsCiAgICAgICAgZnJpY3Rpb25FcXVhdGlvblJlbGF4YXRpb246IDMKICAgICAgfSk7CiAgICAgIHRoaXMuaWQgPSBDb250YWN0TWF0ZXJpYWwuaWRDb3VudGVyKys7CiAgICAgIHRoaXMubWF0ZXJpYWxzID0gW20xLCBtMl07CiAgICAgIHRoaXMuZnJpY3Rpb24gPSBvcHRpb25zLmZyaWN0aW9uOwogICAgICB0aGlzLnJlc3RpdHV0aW9uID0gb3B0aW9ucy5yZXN0aXR1dGlvbjsKICAgICAgdGhpcy5jb250YWN0RXF1YXRpb25TdGlmZm5lc3MgPSBvcHRpb25zLmNvbnRhY3RFcXVhdGlvblN0aWZmbmVzczsKICAgICAgdGhpcy5jb250YWN0RXF1YXRpb25SZWxheGF0aW9uID0gb3B0aW9ucy5jb250YWN0RXF1YXRpb25SZWxheGF0aW9uOwogICAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25TdGlmZm5lc3MgPSBvcHRpb25zLmZyaWN0aW9uRXF1YXRpb25TdGlmZm5lc3M7CiAgICAgIHRoaXMuZnJpY3Rpb25FcXVhdGlvblJlbGF4YXRpb24gPSBvcHRpb25zLmZyaWN0aW9uRXF1YXRpb25SZWxheGF0aW9uOwogICAgfQoKICB9CgogIENvbnRhY3RNYXRlcmlhbC5pZENvdW50ZXIgPSAwOwogIC8qKgogICAqIERlZmluZXMgYSBwaHlzaWNzIG1hdGVyaWFsLgogICAqLwoKICBjbGFzcyBNYXRlcmlhbCB7CiAgICAvKioKICAgICAqIE1hdGVyaWFsIG5hbWUuCiAgICAgKiBJZiBvcHRpb25zIGlzIGEgc3RyaW5nLCBuYW1lIHdpbGwgYmUgc2V0IHRvIHRoYXQgc3RyaW5nLgogICAgICogQHRvZG8gRGVwcmVjYXRlIHRoaXMKICAgICAqLwoKICAgIC8qKiBNYXRlcmlhbCBpZC4gKi8KCiAgICAvKioKICAgICAqIEZyaWN0aW9uIGZvciB0aGlzIG1hdGVyaWFsLgogICAgICogSWYgbm9uLW5lZ2F0aXZlLCBpdCB3aWxsIGJlIHVzZWQgaW5zdGVhZCBvZiB0aGUgZnJpY3Rpb24gZ2l2ZW4gYnkgQ29udGFjdE1hdGVyaWFscy4gSWYgdGhlcmUncyBubyBtYXRjaGluZyBDb250YWN0TWF0ZXJpYWwsIHRoZSB2YWx1ZSBmcm9tIGBkZWZhdWx0Q29udGFjdE1hdGVyaWFsYCBpbiB0aGUgV29ybGQgd2lsbCBiZSB1c2VkLgogICAgICovCgogICAgLyoqCiAgICAgKiBSZXN0aXR1dGlvbiBmb3IgdGhpcyBtYXRlcmlhbC4KICAgICAqIElmIG5vbi1uZWdhdGl2ZSwgaXQgd2lsbCBiZSB1c2VkIGluc3RlYWQgb2YgdGhlIHJlc3RpdHV0aW9uIGdpdmVuIGJ5IENvbnRhY3RNYXRlcmlhbHMuIElmIHRoZXJlJ3Mgbm8gbWF0Y2hpbmcgQ29udGFjdE1hdGVyaWFsLCB0aGUgdmFsdWUgZnJvbSBgZGVmYXVsdENvbnRhY3RNYXRlcmlhbGAgaW4gdGhlIFdvcmxkIHdpbGwgYmUgdXNlZC4KICAgICAqLwogICAgY29uc3RydWN0b3Iob3B0aW9ucyA9IHt9KSB7CiAgICAgIHRoaXMubmFtZSA9IHZvaWQgMDsKICAgICAgdGhpcy5pZCA9IHZvaWQgMDsKICAgICAgdGhpcy5mcmljdGlvbiA9IHZvaWQgMDsKICAgICAgdGhpcy5yZXN0aXR1dGlvbiA9IHZvaWQgMDsKICAgICAgbGV0IG5hbWUgPSAnJzsgLy8gQmFja3dhcmRzIGNvbXBhdGliaWxpdHkgZml4CgogICAgICBpZiAodHlwZW9mIG9wdGlvbnMgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgLy9jb25zb2xlLndhcm4oYFBhc3NpbmcgYSBzdHJpbmcgdG8gTWF0ZXJpYWxPcHRpb25zIGlzIGRlcHJlY2F0ZWQsIGFuZCBoYXMgbm8gZWZmZWN0YCkKICAgICAgICBuYW1lID0gb3B0aW9uczsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIHRoaXMubmFtZSA9IG5hbWU7CiAgICAgIHRoaXMuaWQgPSBNYXRlcmlhbC5pZENvdW50ZXIrKzsKICAgICAgdGhpcy5mcmljdGlvbiA9IHR5cGVvZiBvcHRpb25zLmZyaWN0aW9uICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuZnJpY3Rpb24gOiAtMTsKICAgICAgdGhpcy5yZXN0aXR1dGlvbiA9IHR5cGVvZiBvcHRpb25zLnJlc3RpdHV0aW9uICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMucmVzdGl0dXRpb24gOiAtMTsKICAgIH0KCiAgfQoKICBNYXRlcmlhbC5pZENvdW50ZXIgPSAwOwogIC8qKgogICAqIEEgc3ByaW5nLCBjb25uZWN0aW5nIHR3byBib2RpZXMuCiAgICogQGV4YW1wbGUKICAgKiAgICAgY29uc3Qgc3ByaW5nID0gbmV3IFNwcmluZyhib3hCb2R5LCBzcGhlcmVCb2R5LCB7CiAgICogICAgICAgcmVzdExlbmd0aDogMCwKICAgKiAgICAgICBzdGlmZm5lc3M6IDUwLAogICAqICAgICAgIGRhbXBpbmc6IDEsCiAgICogICAgIH0pCiAgICoKICAgKiAgICAgLy8gQ29tcHV0ZSB0aGUgZm9yY2UgYWZ0ZXIgZWFjaCBzdGVwCiAgICogICAgIHdvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ3Bvc3RTdGVwJywgKGV2ZW50KSA9PiB7CiAgICogICAgICAgc3ByaW5nLmFwcGx5Rm9yY2UoKQogICAqICAgICB9KQogICAqLwoKICBjbGFzcyBTcHJpbmcgewogICAgLyoqCiAgICAgKiBSZXN0IGxlbmd0aCBvZiB0aGUgc3ByaW5nLiBBIG51bWJlciA+IDAuCiAgICAgKiBAZGVmYXVsdCAxCiAgICAgKi8KCiAgICAvKioKICAgICAqIFN0aWZmbmVzcyBvZiB0aGUgc3ByaW5nLiBBIG51bWJlciA+PSAwLgogICAgICogQGRlZmF1bHQgMTAwCiAgICAgKi8KCiAgICAvKioKICAgICAqIERhbXBpbmcgb2YgdGhlIHNwcmluZy4gQSBudW1iZXIgPj0gMC4KICAgICAqIEBkZWZhdWx0IDEKICAgICAqLwoKICAgIC8qKgogICAgICogRmlyc3QgY29ubmVjdGVkIGJvZHkuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFNlY29uZCBjb25uZWN0ZWQgYm9keS4KICAgICAqLwoKICAgIC8qKgogICAgICogQW5jaG9yIGZvciBib2R5QSBpbiBsb2NhbCBib2R5QSBjb29yZGluYXRlcy4KICAgICAqIFdoZXJlIHRvIGhvb2sgdGhlIHNwcmluZyB0byBib2R5IEEsIGluIGxvY2FsIGJvZHkgY29vcmRpbmF0ZXMuCiAgICAgKiBAZGVmYXVsdCBuZXcgVmVjMygpCiAgICAgKi8KCiAgICAvKioKICAgICAqIEFuY2hvciBmb3IgYm9keUIgaW4gbG9jYWwgYm9keUIgY29vcmRpbmF0ZXMuCiAgICAgKiBXaGVyZSB0byBob29rIHRoZSBzcHJpbmcgdG8gYm9keSBCLCBpbiBsb2NhbCBib2R5IGNvb3JkaW5hdGVzLgogICAgICogQGRlZmF1bHQgbmV3IFZlYzMoKQogICAgICovCiAgICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIG9wdGlvbnMgPSB7fSkgewogICAgICB0aGlzLnJlc3RMZW5ndGggPSB2b2lkIDA7CiAgICAgIHRoaXMuc3RpZmZuZXNzID0gdm9pZCAwOwogICAgICB0aGlzLmRhbXBpbmcgPSB2b2lkIDA7CiAgICAgIHRoaXMuYm9keUEgPSB2b2lkIDA7CiAgICAgIHRoaXMuYm9keUIgPSB2b2lkIDA7CiAgICAgIHRoaXMubG9jYWxBbmNob3JBID0gdm9pZCAwOwogICAgICB0aGlzLmxvY2FsQW5jaG9yQiA9IHZvaWQgMDsKICAgICAgdGhpcy5yZXN0TGVuZ3RoID0gdHlwZW9mIG9wdGlvbnMucmVzdExlbmd0aCA9PT0gJ251bWJlcicgPyBvcHRpb25zLnJlc3RMZW5ndGggOiAxOwogICAgICB0aGlzLnN0aWZmbmVzcyA9IG9wdGlvbnMuc3RpZmZuZXNzIHx8IDEwMDsKICAgICAgdGhpcy5kYW1waW5nID0gb3B0aW9ucy5kYW1waW5nIHx8IDE7CiAgICAgIHRoaXMuYm9keUEgPSBib2R5QTsKICAgICAgdGhpcy5ib2R5QiA9IGJvZHlCOwogICAgICB0aGlzLmxvY2FsQW5jaG9yQSA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMubG9jYWxBbmNob3JCID0gbmV3IFZlYzMoKTsKCiAgICAgIGlmIChvcHRpb25zLmxvY2FsQW5jaG9yQSkgewogICAgICAgIHRoaXMubG9jYWxBbmNob3JBLmNvcHkob3B0aW9ucy5sb2NhbEFuY2hvckEpOwogICAgICB9CgogICAgICBpZiAob3B0aW9ucy5sb2NhbEFuY2hvckIpIHsKICAgICAgICB0aGlzLmxvY2FsQW5jaG9yQi5jb3B5KG9wdGlvbnMubG9jYWxBbmNob3JCKTsKICAgICAgfQoKICAgICAgaWYgKG9wdGlvbnMud29ybGRBbmNob3JBKSB7CiAgICAgICAgdGhpcy5zZXRXb3JsZEFuY2hvckEob3B0aW9ucy53b3JsZEFuY2hvckEpOwogICAgICB9CgogICAgICBpZiAob3B0aW9ucy53b3JsZEFuY2hvckIpIHsKICAgICAgICB0aGlzLnNldFdvcmxkQW5jaG9yQihvcHRpb25zLndvcmxkQW5jaG9yQik7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogU2V0IHRoZSBhbmNob3IgcG9pbnQgb24gYm9keSBBLCB1c2luZyB3b3JsZCBjb29yZGluYXRlcy4KICAgICAqLwoKCiAgICBzZXRXb3JsZEFuY2hvckEod29ybGRBbmNob3JBKSB7CiAgICAgIHRoaXMuYm9keUEucG9pbnRUb0xvY2FsRnJhbWUod29ybGRBbmNob3JBLCB0aGlzLmxvY2FsQW5jaG9yQSk7CiAgICB9CiAgICAvKioKICAgICAqIFNldCB0aGUgYW5jaG9yIHBvaW50IG9uIGJvZHkgQiwgdXNpbmcgd29ybGQgY29vcmRpbmF0ZXMuCiAgICAgKi8KCgogICAgc2V0V29ybGRBbmNob3JCKHdvcmxkQW5jaG9yQikgewogICAgICB0aGlzLmJvZHlCLnBvaW50VG9Mb2NhbEZyYW1lKHdvcmxkQW5jaG9yQiwgdGhpcy5sb2NhbEFuY2hvckIpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIGFuY2hvciBwb2ludCBvbiBib2R5IEEsIGluIHdvcmxkIGNvb3JkaW5hdGVzLgogICAgICogQHBhcmFtIHJlc3VsdCBUaGUgdmVjdG9yIHRvIHN0b3JlIHRoZSByZXN1bHQgaW4uCiAgICAgKi8KCgogICAgZ2V0V29ybGRBbmNob3JBKHJlc3VsdCkgewogICAgICB0aGlzLmJvZHlBLnBvaW50VG9Xb3JsZEZyYW1lKHRoaXMubG9jYWxBbmNob3JBLCByZXN1bHQpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIGFuY2hvciBwb2ludCBvbiBib2R5IEIsIGluIHdvcmxkIGNvb3JkaW5hdGVzLgogICAgICogQHBhcmFtIHJlc3VsdCBUaGUgdmVjdG9yIHRvIHN0b3JlIHRoZSByZXN1bHQgaW4uCiAgICAgKi8KCgogICAgZ2V0V29ybGRBbmNob3JCKHJlc3VsdCkgewogICAgICB0aGlzLmJvZHlCLnBvaW50VG9Xb3JsZEZyYW1lKHRoaXMubG9jYWxBbmNob3JCLCByZXN1bHQpOwogICAgfQogICAgLyoqCiAgICAgKiBBcHBseSB0aGUgc3ByaW5nIGZvcmNlIHRvIHRoZSBjb25uZWN0ZWQgYm9kaWVzLgogICAgICovCgoKICAgIGFwcGx5Rm9yY2UoKSB7CiAgICAgIGNvbnN0IGsgPSB0aGlzLnN0aWZmbmVzczsKICAgICAgY29uc3QgZCA9IHRoaXMuZGFtcGluZzsKICAgICAgY29uc3QgbCA9IHRoaXMucmVzdExlbmd0aDsKICAgICAgY29uc3QgYm9keUEgPSB0aGlzLmJvZHlBOwogICAgICBjb25zdCBib2R5QiA9IHRoaXMuYm9keUI7CiAgICAgIGNvbnN0IHIgPSBhcHBseUZvcmNlX3I7CiAgICAgIGNvbnN0IHJfdW5pdCA9IGFwcGx5Rm9yY2Vfcl91bml0OwogICAgICBjb25zdCB1ID0gYXBwbHlGb3JjZV91OwogICAgICBjb25zdCBmID0gYXBwbHlGb3JjZV9mOwogICAgICBjb25zdCB0bXAgPSBhcHBseUZvcmNlX3RtcDsKICAgICAgY29uc3Qgd29ybGRBbmNob3JBID0gYXBwbHlGb3JjZV93b3JsZEFuY2hvckE7CiAgICAgIGNvbnN0IHdvcmxkQW5jaG9yQiA9IGFwcGx5Rm9yY2Vfd29ybGRBbmNob3JCOwogICAgICBjb25zdCByaSA9IGFwcGx5Rm9yY2Vfcmk7CiAgICAgIGNvbnN0IHJqID0gYXBwbHlGb3JjZV9yajsKICAgICAgY29uc3QgcmlfeF9mID0gYXBwbHlGb3JjZV9yaV94X2Y7CiAgICAgIGNvbnN0IHJqX3hfZiA9IGFwcGx5Rm9yY2VfcmpfeF9mOyAvLyBHZXQgd29ybGQgYW5jaG9ycwoKICAgICAgdGhpcy5nZXRXb3JsZEFuY2hvckEod29ybGRBbmNob3JBKTsKICAgICAgdGhpcy5nZXRXb3JsZEFuY2hvckIod29ybGRBbmNob3JCKTsgLy8gR2V0IG9mZnNldCBwb2ludHMKCiAgICAgIHdvcmxkQW5jaG9yQS52c3ViKGJvZHlBLnBvc2l0aW9uLCByaSk7CiAgICAgIHdvcmxkQW5jaG9yQi52c3ViKGJvZHlCLnBvc2l0aW9uLCByaik7IC8vIENvbXB1dGUgZGlzdGFuY2UgdmVjdG9yIGJldHdlZW4gd29ybGQgYW5jaG9yIHBvaW50cwoKICAgICAgd29ybGRBbmNob3JCLnZzdWIod29ybGRBbmNob3JBLCByKTsKICAgICAgY29uc3QgcmxlbiA9IHIubGVuZ3RoKCk7CiAgICAgIHJfdW5pdC5jb3B5KHIpOwogICAgICByX3VuaXQubm9ybWFsaXplKCk7IC8vIENvbXB1dGUgcmVsYXRpdmUgdmVsb2NpdHkgb2YgdGhlIGFuY2hvciBwb2ludHMsIHUKCiAgICAgIGJvZHlCLnZlbG9jaXR5LnZzdWIoYm9keUEudmVsb2NpdHksIHUpOyAvLyBBZGQgcm90YXRpb25hbCB2ZWxvY2l0eQoKICAgICAgYm9keUIuYW5ndWxhclZlbG9jaXR5LmNyb3NzKHJqLCB0bXApOwogICAgICB1LnZhZGQodG1wLCB1KTsKICAgICAgYm9keUEuYW5ndWxhclZlbG9jaXR5LmNyb3NzKHJpLCB0bXApOwogICAgICB1LnZzdWIodG1wLCB1KTsgLy8gRiA9IC0gayAqICggeCAtIEwgKSAtIEQgKiAoIHUgKQoKICAgICAgcl91bml0LnNjYWxlKC1rICogKHJsZW4gLSBsKSAtIGQgKiB1LmRvdChyX3VuaXQpLCBmKTsgLy8gQWRkIGZvcmNlcyB0byBib2RpZXMKCiAgICAgIGJvZHlBLmZvcmNlLnZzdWIoZiwgYm9keUEuZm9yY2UpOwogICAgICBib2R5Qi5mb3JjZS52YWRkKGYsIGJvZHlCLmZvcmNlKTsgLy8gQW5ndWxhciBmb3JjZQoKICAgICAgcmkuY3Jvc3MoZiwgcmlfeF9mKTsKICAgICAgcmouY3Jvc3MoZiwgcmpfeF9mKTsKICAgICAgYm9keUEudG9ycXVlLnZzdWIocmlfeF9mLCBib2R5QS50b3JxdWUpOwogICAgICBib2R5Qi50b3JxdWUudmFkZChyal94X2YsIGJvZHlCLnRvcnF1ZSk7CiAgICB9CgogIH0KCiAgY29uc3QgYXBwbHlGb3JjZV9yID0gbmV3IFZlYzMoKTsKICBjb25zdCBhcHBseUZvcmNlX3JfdW5pdCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYXBwbHlGb3JjZV91ID0gbmV3IFZlYzMoKTsKICBjb25zdCBhcHBseUZvcmNlX2YgPSBuZXcgVmVjMygpOwogIGNvbnN0IGFwcGx5Rm9yY2Vfd29ybGRBbmNob3JBID0gbmV3IFZlYzMoKTsKICBjb25zdCBhcHBseUZvcmNlX3dvcmxkQW5jaG9yQiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYXBwbHlGb3JjZV9yaSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYXBwbHlGb3JjZV9yaiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYXBwbHlGb3JjZV9yaV94X2YgPSBuZXcgVmVjMygpOwogIGNvbnN0IGFwcGx5Rm9yY2VfcmpfeF9mID0gbmV3IFZlYzMoKTsKICBjb25zdCBhcHBseUZvcmNlX3RtcCA9IG5ldyBWZWMzKCk7CiAgLyoqCiAgICogV2hlZWxJbmZvCiAgICovCgogIGNsYXNzIFdoZWVsSW5mbyB7CiAgICAvKioKICAgICAqIE1heCB0cmF2ZWwgZGlzdGFuY2Ugb2YgdGhlIHN1c3BlbnNpb24sIGluIG1ldGVycy4KICAgICAqIEBkZWZhdWx0IDEKICAgICAqLwoKICAgIC8qKgogICAgICogU3BlZWQgdG8gYXBwbHkgdG8gdGhlIHdoZWVsIHJvdGF0aW9uIHdoZW4gdGhlIHdoZWVsIGlzIHNsaWRpbmcuCiAgICAgKiBAZGVmYXVsdCAtMC4xCiAgICAgKi8KCiAgICAvKioKICAgICAqIElmIHRoZSBjdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkIHNob3VsZCBiZSB1c2VkLgogICAgICogQGRlZmF1bHQgZmFsc2UKICAgICAqLwoKICAgIC8qKgogICAgICogc2xpZGluZwogICAgICovCgogICAgLyoqCiAgICAgKiBDb25uZWN0aW9uIHBvaW50LCBkZWZpbmVkIGxvY2FsbHkgaW4gdGhlIGNoYXNzaXMgYm9keSBmcmFtZS4KICAgICAqLwoKICAgIC8qKgogICAgICogY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludFdvcmxkCiAgICAgKi8KCiAgICAvKioKICAgICAqIGRpcmVjdGlvbkxvY2FsCiAgICAgKi8KCiAgICAvKioKICAgICAqIGRpcmVjdGlvbldvcmxkCiAgICAgKi8KCiAgICAvKioKICAgICAqIGF4bGVMb2NhbAogICAgICovCgogICAgLyoqCiAgICAgKiBheGxlV29ybGQKICAgICAqLwoKICAgIC8qKgogICAgICogc3VzcGVuc2lvblJlc3RMZW5ndGgKICAgICAqIEBkZWZhdWx0IDEKICAgICAqLwoKICAgIC8qKgogICAgICogc3VzcGVuc2lvbk1heExlbmd0aAogICAgICogQGRlZmF1bHQgMgogICAgICovCgogICAgLyoqCiAgICAgKiByYWRpdXMKICAgICAqIEBkZWZhdWx0IDEKICAgICAqLwoKICAgIC8qKgogICAgICogc3VzcGVuc2lvblN0aWZmbmVzcwogICAgICogQGRlZmF1bHQgMTAwCiAgICAgKi8KCiAgICAvKioKICAgICAqIGRhbXBpbmdDb21wcmVzc2lvbgogICAgICogQGRlZmF1bHQgMTAKICAgICAqLwoKICAgIC8qKgogICAgICogZGFtcGluZ1JlbGF4YXRpb24KICAgICAqIEBkZWZhdWx0IDEwCiAgICAgKi8KCiAgICAvKioKICAgICAqIGZyaWN0aW9uU2xpcAogICAgICogQGRlZmF1bHQgMTAuNQogICAgICovCgogICAgLyoqIGZvcndhcmRBY2NlbGVyYXRpb24gKi8KCiAgICAvKiogc2lkZUFjY2VsZXJhdGlvbiAqLwoKICAgIC8qKgogICAgICogc3RlZXJpbmcKICAgICAqIEBkZWZhdWx0IDAKICAgICAqLwoKICAgIC8qKgogICAgICogUm90YXRpb24gdmFsdWUsIGluIHJhZGlhbnMuCiAgICAgKiBAZGVmYXVsdCAwCiAgICAgKi8KCiAgICAvKioKICAgICAqIGRlbHRhUm90YXRpb24KICAgICAqIEBkZWZhdWx0IDAKICAgICAqLwoKICAgIC8qKgogICAgICogcm9sbEluZmx1ZW5jZQogICAgICogQGRlZmF1bHQgMC4wMQogICAgICovCgogICAgLyoqCiAgICAgKiBtYXhTdXNwZW5zaW9uRm9yY2UKICAgICAqLwoKICAgIC8qKgogICAgICogZW5naW5lRm9yY2UKICAgICAqLwoKICAgIC8qKgogICAgICogYnJha2UKICAgICAqLwoKICAgIC8qKgogICAgICogaXNGcm9udFdoZWVsCiAgICAgKiBAZGVmYXVsdCB0cnVlCiAgICAgKi8KCiAgICAvKioKICAgICAqIGNsaXBwZWRJbnZDb250YWN0RG90U3VzcGVuc2lvbgogICAgICogQGRlZmF1bHQgMQogICAgICovCgogICAgLyoqCiAgICAgKiBzdXNwZW5zaW9uUmVsYXRpdmVWZWxvY2l0eQogICAgICogQGRlZmF1bHQgMAogICAgICovCgogICAgLyoqCiAgICAgKiBzdXNwZW5zaW9uRm9yY2UKICAgICAqIEBkZWZhdWx0IDAKICAgICAqLwoKICAgIC8qKgogICAgICogc2xpcEluZm8KICAgICAqLwoKICAgIC8qKgogICAgICogc2tpZEluZm8KICAgICAqIEBkZWZhdWx0IDAKICAgICAqLwoKICAgIC8qKgogICAgICogc3VzcGVuc2lvbkxlbmd0aAogICAgICogQGRlZmF1bHQgMAogICAgICovCgogICAgLyoqCiAgICAgKiBzaWRlSW1wdWxzZQogICAgICovCgogICAgLyoqCiAgICAgKiBmb3J3YXJkSW1wdWxzZQogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgcmVzdWx0IGZyb20gcmF5Y2FzdGluZy4KICAgICAqLwoKICAgIC8qKgogICAgICogV2hlZWwgd29ybGQgdHJhbnNmb3JtLgogICAgICovCgogICAgLyoqCiAgICAgKiBpc0luQ29udGFjdAogICAgICovCiAgICBjb25zdHJ1Y3RvcihvcHRpb25zID0ge30pIHsKICAgICAgdGhpcy5tYXhTdXNwZW5zaW9uVHJhdmVsID0gdm9pZCAwOwogICAgICB0aGlzLmN1c3RvbVNsaWRpbmdSb3RhdGlvbmFsU3BlZWQgPSB2b2lkIDA7CiAgICAgIHRoaXMudXNlQ3VzdG9tU2xpZGluZ1JvdGF0aW9uYWxTcGVlZCA9IHZvaWQgMDsKICAgICAgdGhpcy5zbGlkaW5nID0gdm9pZCAwOwogICAgICB0aGlzLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRMb2NhbCA9IHZvaWQgMDsKICAgICAgdGhpcy5jaGFzc2lzQ29ubmVjdGlvblBvaW50V29ybGQgPSB2b2lkIDA7CiAgICAgIHRoaXMuZGlyZWN0aW9uTG9jYWwgPSB2b2lkIDA7CiAgICAgIHRoaXMuZGlyZWN0aW9uV29ybGQgPSB2b2lkIDA7CiAgICAgIHRoaXMuYXhsZUxvY2FsID0gdm9pZCAwOwogICAgICB0aGlzLmF4bGVXb3JsZCA9IHZvaWQgMDsKICAgICAgdGhpcy5zdXNwZW5zaW9uUmVzdExlbmd0aCA9IHZvaWQgMDsKICAgICAgdGhpcy5zdXNwZW5zaW9uTWF4TGVuZ3RoID0gdm9pZCAwOwogICAgICB0aGlzLnJhZGl1cyA9IHZvaWQgMDsKICAgICAgdGhpcy5zdXNwZW5zaW9uU3RpZmZuZXNzID0gdm9pZCAwOwogICAgICB0aGlzLmRhbXBpbmdDb21wcmVzc2lvbiA9IHZvaWQgMDsKICAgICAgdGhpcy5kYW1waW5nUmVsYXhhdGlvbiA9IHZvaWQgMDsKICAgICAgdGhpcy5mcmljdGlvblNsaXAgPSB2b2lkIDA7CiAgICAgIHRoaXMuZm9yd2FyZEFjY2VsZXJhdGlvbiA9IHZvaWQgMDsKICAgICAgdGhpcy5zaWRlQWNjZWxlcmF0aW9uID0gdm9pZCAwOwogICAgICB0aGlzLnN0ZWVyaW5nID0gdm9pZCAwOwogICAgICB0aGlzLnJvdGF0aW9uID0gdm9pZCAwOwogICAgICB0aGlzLmRlbHRhUm90YXRpb24gPSB2b2lkIDA7CiAgICAgIHRoaXMucm9sbEluZmx1ZW5jZSA9IHZvaWQgMDsKICAgICAgdGhpcy5tYXhTdXNwZW5zaW9uRm9yY2UgPSB2b2lkIDA7CiAgICAgIHRoaXMuZW5naW5lRm9yY2UgPSB2b2lkIDA7CiAgICAgIHRoaXMuYnJha2UgPSB2b2lkIDA7CiAgICAgIHRoaXMuaXNGcm9udFdoZWVsID0gdm9pZCAwOwogICAgICB0aGlzLmNsaXBwZWRJbnZDb250YWN0RG90U3VzcGVuc2lvbiA9IHZvaWQgMDsKICAgICAgdGhpcy5zdXNwZW5zaW9uUmVsYXRpdmVWZWxvY2l0eSA9IHZvaWQgMDsKICAgICAgdGhpcy5zdXNwZW5zaW9uRm9yY2UgPSB2b2lkIDA7CiAgICAgIHRoaXMuc2xpcEluZm8gPSB2b2lkIDA7CiAgICAgIHRoaXMuc2tpZEluZm8gPSB2b2lkIDA7CiAgICAgIHRoaXMuc3VzcGVuc2lvbkxlbmd0aCA9IHZvaWQgMDsKICAgICAgdGhpcy5zaWRlSW1wdWxzZSA9IHZvaWQgMDsKICAgICAgdGhpcy5mb3J3YXJkSW1wdWxzZSA9IHZvaWQgMDsKICAgICAgdGhpcy5yYXljYXN0UmVzdWx0ID0gdm9pZCAwOwogICAgICB0aGlzLndvcmxkVHJhbnNmb3JtID0gdm9pZCAwOwogICAgICB0aGlzLmlzSW5Db250YWN0ID0gdm9pZCAwOwogICAgICBvcHRpb25zID0gVXRpbHMuZGVmYXVsdHMob3B0aW9ucywgewogICAgICAgIGNoYXNzaXNDb25uZWN0aW9uUG9pbnRMb2NhbDogbmV3IFZlYzMoKSwKICAgICAgICBjaGFzc2lzQ29ubmVjdGlvblBvaW50V29ybGQ6IG5ldyBWZWMzKCksCiAgICAgICAgZGlyZWN0aW9uTG9jYWw6IG5ldyBWZWMzKCksCiAgICAgICAgZGlyZWN0aW9uV29ybGQ6IG5ldyBWZWMzKCksCiAgICAgICAgYXhsZUxvY2FsOiBuZXcgVmVjMygpLAogICAgICAgIGF4bGVXb3JsZDogbmV3IFZlYzMoKSwKICAgICAgICBzdXNwZW5zaW9uUmVzdExlbmd0aDogMSwKICAgICAgICBzdXNwZW5zaW9uTWF4TGVuZ3RoOiAyLAogICAgICAgIHJhZGl1czogMSwKICAgICAgICBzdXNwZW5zaW9uU3RpZmZuZXNzOiAxMDAsCiAgICAgICAgZGFtcGluZ0NvbXByZXNzaW9uOiAxMCwKICAgICAgICBkYW1waW5nUmVsYXhhdGlvbjogMTAsCiAgICAgICAgZnJpY3Rpb25TbGlwOiAxMC41LAogICAgICAgIGZvcndhcmRBY2NlbGVyYXRpb246IDEsCiAgICAgICAgc2lkZUFjY2VsZXJhdGlvbjogMSwKICAgICAgICBzdGVlcmluZzogMCwKICAgICAgICByb3RhdGlvbjogMCwKICAgICAgICBkZWx0YVJvdGF0aW9uOiAwLAogICAgICAgIHJvbGxJbmZsdWVuY2U6IDAuMDEsCiAgICAgICAgbWF4U3VzcGVuc2lvbkZvcmNlOiBOdW1iZXIuTUFYX1ZBTFVFLAogICAgICAgIGlzRnJvbnRXaGVlbDogdHJ1ZSwKICAgICAgICBjbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb246IDEsCiAgICAgICAgc3VzcGVuc2lvblJlbGF0aXZlVmVsb2NpdHk6IDAsCiAgICAgICAgc3VzcGVuc2lvbkZvcmNlOiAwLAogICAgICAgIHNsaXBJbmZvOiAwLAogICAgICAgIHNraWRJbmZvOiAwLAogICAgICAgIHN1c3BlbnNpb25MZW5ndGg6IDAsCiAgICAgICAgbWF4U3VzcGVuc2lvblRyYXZlbDogMSwKICAgICAgICB1c2VDdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkOiBmYWxzZSwKICAgICAgICBjdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkOiAtMC4xCiAgICAgIH0pOwogICAgICB0aGlzLm1heFN1c3BlbnNpb25UcmF2ZWwgPSBvcHRpb25zLm1heFN1c3BlbnNpb25UcmF2ZWw7CiAgICAgIHRoaXMuY3VzdG9tU2xpZGluZ1JvdGF0aW9uYWxTcGVlZCA9IG9wdGlvbnMuY3VzdG9tU2xpZGluZ1JvdGF0aW9uYWxTcGVlZDsKICAgICAgdGhpcy51c2VDdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkID0gb3B0aW9ucy51c2VDdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkOwogICAgICB0aGlzLnNsaWRpbmcgPSBmYWxzZTsKICAgICAgdGhpcy5jaGFzc2lzQ29ubmVjdGlvblBvaW50TG9jYWwgPSBvcHRpb25zLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRMb2NhbC5jbG9uZSgpOwogICAgICB0aGlzLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRXb3JsZCA9IG9wdGlvbnMuY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludFdvcmxkLmNsb25lKCk7CiAgICAgIHRoaXMuZGlyZWN0aW9uTG9jYWwgPSBvcHRpb25zLmRpcmVjdGlvbkxvY2FsLmNsb25lKCk7CiAgICAgIHRoaXMuZGlyZWN0aW9uV29ybGQgPSBvcHRpb25zLmRpcmVjdGlvbldvcmxkLmNsb25lKCk7CiAgICAgIHRoaXMuYXhsZUxvY2FsID0gb3B0aW9ucy5heGxlTG9jYWwuY2xvbmUoKTsKICAgICAgdGhpcy5heGxlV29ybGQgPSBvcHRpb25zLmF4bGVXb3JsZC5jbG9uZSgpOwogICAgICB0aGlzLnN1c3BlbnNpb25SZXN0TGVuZ3RoID0gb3B0aW9ucy5zdXNwZW5zaW9uUmVzdExlbmd0aDsKICAgICAgdGhpcy5zdXNwZW5zaW9uTWF4TGVuZ3RoID0gb3B0aW9ucy5zdXNwZW5zaW9uTWF4TGVuZ3RoOwogICAgICB0aGlzLnJhZGl1cyA9IG9wdGlvbnMucmFkaXVzOwogICAgICB0aGlzLnN1c3BlbnNpb25TdGlmZm5lc3MgPSBvcHRpb25zLnN1c3BlbnNpb25TdGlmZm5lc3M7CiAgICAgIHRoaXMuZGFtcGluZ0NvbXByZXNzaW9uID0gb3B0aW9ucy5kYW1waW5nQ29tcHJlc3Npb247CiAgICAgIHRoaXMuZGFtcGluZ1JlbGF4YXRpb24gPSBvcHRpb25zLmRhbXBpbmdSZWxheGF0aW9uOwogICAgICB0aGlzLmZyaWN0aW9uU2xpcCA9IG9wdGlvbnMuZnJpY3Rpb25TbGlwOwogICAgICB0aGlzLmZvcndhcmRBY2NlbGVyYXRpb24gPSBvcHRpb25zLmZvcndhcmRBY2NlbGVyYXRpb247CiAgICAgIHRoaXMuc2lkZUFjY2VsZXJhdGlvbiA9IG9wdGlvbnMuc2lkZUFjY2VsZXJhdGlvbjsKICAgICAgdGhpcy5zdGVlcmluZyA9IDA7CiAgICAgIHRoaXMucm90YXRpb24gPSAwOwogICAgICB0aGlzLmRlbHRhUm90YXRpb24gPSAwOwogICAgICB0aGlzLnJvbGxJbmZsdWVuY2UgPSBvcHRpb25zLnJvbGxJbmZsdWVuY2U7CiAgICAgIHRoaXMubWF4U3VzcGVuc2lvbkZvcmNlID0gb3B0aW9ucy5tYXhTdXNwZW5zaW9uRm9yY2U7CiAgICAgIHRoaXMuZW5naW5lRm9yY2UgPSAwOwogICAgICB0aGlzLmJyYWtlID0gMDsKICAgICAgdGhpcy5pc0Zyb250V2hlZWwgPSBvcHRpb25zLmlzRnJvbnRXaGVlbDsKICAgICAgdGhpcy5jbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb24gPSAxOwogICAgICB0aGlzLnN1c3BlbnNpb25SZWxhdGl2ZVZlbG9jaXR5ID0gMDsKICAgICAgdGhpcy5zdXNwZW5zaW9uRm9yY2UgPSAwOwogICAgICB0aGlzLnNsaXBJbmZvID0gMDsKICAgICAgdGhpcy5za2lkSW5mbyA9IDA7CiAgICAgIHRoaXMuc3VzcGVuc2lvbkxlbmd0aCA9IDA7CiAgICAgIHRoaXMuc2lkZUltcHVsc2UgPSAwOwogICAgICB0aGlzLmZvcndhcmRJbXB1bHNlID0gMDsKICAgICAgdGhpcy5yYXljYXN0UmVzdWx0ID0gbmV3IFJheWNhc3RSZXN1bHQoKTsKICAgICAgdGhpcy53b3JsZFRyYW5zZm9ybSA9IG5ldyBUcmFuc2Zvcm0oKTsKICAgICAgdGhpcy5pc0luQ29udGFjdCA9IGZhbHNlOwogICAgfQoKICAgIHVwZGF0ZVdoZWVsKGNoYXNzaXMpIHsKICAgICAgY29uc3QgcmF5Y2FzdFJlc3VsdCA9IHRoaXMucmF5Y2FzdFJlc3VsdDsKCiAgICAgIGlmICh0aGlzLmlzSW5Db250YWN0KSB7CiAgICAgICAgY29uc3QgcHJvamVjdCA9IHJheWNhc3RSZXN1bHQuaGl0Tm9ybWFsV29ybGQuZG90KHJheWNhc3RSZXN1bHQuZGlyZWN0aW9uV29ybGQpOwogICAgICAgIHJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZC52c3ViKGNoYXNzaXMucG9zaXRpb24sIHJlbHBvcyk7CiAgICAgICAgY2hhc3Npcy5nZXRWZWxvY2l0eUF0V29ybGRQb2ludChyZWxwb3MsIGNoYXNzaXNfdmVsb2NpdHlfYXRfY29udGFjdFBvaW50KTsKICAgICAgICBjb25zdCBwcm9qVmVsID0gcmF5Y2FzdFJlc3VsdC5oaXROb3JtYWxXb3JsZC5kb3QoY2hhc3Npc192ZWxvY2l0eV9hdF9jb250YWN0UG9pbnQpOwoKICAgICAgICBpZiAocHJvamVjdCA+PSAtMC4xKSB7CiAgICAgICAgICB0aGlzLnN1c3BlbnNpb25SZWxhdGl2ZVZlbG9jaXR5ID0gMC4wOwogICAgICAgICAgdGhpcy5jbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb24gPSAxLjAgLyAwLjE7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnN0IGludiA9IC0xIC8gcHJvamVjdDsKICAgICAgICAgIHRoaXMuc3VzcGVuc2lvblJlbGF0aXZlVmVsb2NpdHkgPSBwcm9qVmVsICogaW52OwogICAgICAgICAgdGhpcy5jbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb24gPSBpbnY7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIC8vIE5vdCBpbiBjb250YWN0IDogcG9zaXRpb24gd2hlZWwgaW4gYSBuaWNlIChyZXN0IGxlbmd0aCkgcG9zaXRpb24KICAgICAgICByYXljYXN0UmVzdWx0LnN1c3BlbnNpb25MZW5ndGggPSB0aGlzLnN1c3BlbnNpb25SZXN0TGVuZ3RoOwogICAgICAgIHRoaXMuc3VzcGVuc2lvblJlbGF0aXZlVmVsb2NpdHkgPSAwLjA7CiAgICAgICAgcmF5Y2FzdFJlc3VsdC5kaXJlY3Rpb25Xb3JsZC5zY2FsZSgtMSwgcmF5Y2FzdFJlc3VsdC5oaXROb3JtYWxXb3JsZCk7CiAgICAgICAgdGhpcy5jbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb24gPSAxLjA7CiAgICAgIH0KICAgIH0KCiAgfQoKICBjb25zdCBjaGFzc2lzX3ZlbG9jaXR5X2F0X2NvbnRhY3RQb2ludCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcmVscG9zID0gbmV3IFZlYzMoKTsKICAvKioKICAgKiBWZWhpY2xlIGhlbHBlciBjbGFzcyB0aGF0IGNhc3RzIHJheXMgZnJvbSB0aGUgd2hlZWwgcG9zaXRpb25zIHRvd2FyZHMgdGhlIGdyb3VuZCBhbmQgYXBwbGllcyBmb3JjZXMuCiAgICovCgogIGNsYXNzIFJheWNhc3RWZWhpY2xlIHsKICAgIC8qKiBUaGUgY2FyIGNoYXNzaXMgYm9keS4gKi8KCiAgICAvKiogVGhlIHdoZWVscy4gKi8KCiAgICAvKiogV2lsbCBiZSBzZXQgdG8gdHJ1ZSBpZiB0aGUgY2FyIGlzIHNsaWRpbmcuICovCgogICAgLyoqIEluZGV4IG9mIHRoZSByaWdodCBheGlzLiB4PTAsIHk9MSwgej0yICovCgogICAgLyoqIEluZGV4IG9mIHRoZSBmb3J3YXJkIGF4aXMuIHg9MCwgeT0xLCB6PTIgKi8KCiAgICAvKiogSW5kZXggb2YgdGhlIHVwIGF4aXMuIHg9MCwgeT0xLCB6PTIgKi8KCiAgICAvKiogVGhlIGNvbnN0cmFpbnRzLiAqLwoKICAgIC8qKiBPcHRpb25hbCBwcmUtc3RlcCBjYWxsYmFjay4gKi8KCiAgICAvKiogTnVtYmVyIG9mIHdoZWVscyBvbiB0aGUgZ3JvdW5kLiAqLwogICAgY29uc3RydWN0b3Iob3B0aW9ucykgewogICAgICB0aGlzLmNoYXNzaXNCb2R5ID0gdm9pZCAwOwogICAgICB0aGlzLndoZWVsSW5mb3MgPSB2b2lkIDA7CiAgICAgIHRoaXMuc2xpZGluZyA9IHZvaWQgMDsKICAgICAgdGhpcy53b3JsZCA9IHZvaWQgMDsKICAgICAgdGhpcy5pbmRleFJpZ2h0QXhpcyA9IHZvaWQgMDsKICAgICAgdGhpcy5pbmRleEZvcndhcmRBeGlzID0gdm9pZCAwOwogICAgICB0aGlzLmluZGV4VXBBeGlzID0gdm9pZCAwOwogICAgICB0aGlzLmNvbnN0cmFpbnRzID0gdm9pZCAwOwogICAgICB0aGlzLnByZVN0ZXBDYWxsYmFjayA9IHZvaWQgMDsKICAgICAgdGhpcy5jdXJyZW50VmVoaWNsZVNwZWVkS21Ib3VyID0gdm9pZCAwOwogICAgICB0aGlzLm51bVdoZWVsc09uR3JvdW5kID0gdm9pZCAwOwogICAgICB0aGlzLmNoYXNzaXNCb2R5ID0gb3B0aW9ucy5jaGFzc2lzQm9keTsKICAgICAgdGhpcy53aGVlbEluZm9zID0gW107CiAgICAgIHRoaXMuc2xpZGluZyA9IGZhbHNlOwogICAgICB0aGlzLndvcmxkID0gbnVsbDsKICAgICAgdGhpcy5pbmRleFJpZ2h0QXhpcyA9IHR5cGVvZiBvcHRpb25zLmluZGV4UmlnaHRBeGlzICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuaW5kZXhSaWdodEF4aXMgOiAyOwogICAgICB0aGlzLmluZGV4Rm9yd2FyZEF4aXMgPSB0eXBlb2Ygb3B0aW9ucy5pbmRleEZvcndhcmRBeGlzICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuaW5kZXhGb3J3YXJkQXhpcyA6IDA7CiAgICAgIHRoaXMuaW5kZXhVcEF4aXMgPSB0eXBlb2Ygb3B0aW9ucy5pbmRleFVwQXhpcyAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmluZGV4VXBBeGlzIDogMTsKICAgICAgdGhpcy5jb25zdHJhaW50cyA9IFtdOwoKICAgICAgdGhpcy5wcmVTdGVwQ2FsbGJhY2sgPSAoKSA9PiB7fTsKCiAgICAgIHRoaXMuY3VycmVudFZlaGljbGVTcGVlZEttSG91ciA9IDA7CiAgICAgIHRoaXMubnVtV2hlZWxzT25Hcm91bmQgPSAwOwogICAgfQogICAgLyoqCiAgICAgKiBBZGQgYSB3aGVlbC4gRm9yIGluZm9ybWF0aW9uIGFib3V0IHRoZSBvcHRpb25zLCBzZWUgYFdoZWVsSW5mb2AuCiAgICAgKi8KCgogICAgYWRkV2hlZWwob3B0aW9ucyA9IHt9KSB7CiAgICAgIGNvbnN0IGluZm8gPSBuZXcgV2hlZWxJbmZvKG9wdGlvbnMpOwogICAgICBjb25zdCBpbmRleCA9IHRoaXMud2hlZWxJbmZvcy5sZW5ndGg7CiAgICAgIHRoaXMud2hlZWxJbmZvcy5wdXNoKGluZm8pOwogICAgICByZXR1cm4gaW5kZXg7CiAgICB9CiAgICAvKioKICAgICAqIFNldCB0aGUgc3RlZXJpbmcgdmFsdWUgb2YgYSB3aGVlbC4KICAgICAqLwoKCiAgICBzZXRTdGVlcmluZ1ZhbHVlKHZhbHVlLCB3aGVlbEluZGV4KSB7CiAgICAgIGNvbnN0IHdoZWVsID0gdGhpcy53aGVlbEluZm9zW3doZWVsSW5kZXhdOwogICAgICB3aGVlbC5zdGVlcmluZyA9IHZhbHVlOwogICAgfQogICAgLyoqCiAgICAgKiBTZXQgdGhlIHdoZWVsIGZvcmNlIHRvIGFwcGx5IG9uIG9uZSBvZiB0aGUgd2hlZWxzIGVhY2ggdGltZSBzdGVwCiAgICAgKi8KCgogICAgYXBwbHlFbmdpbmVGb3JjZSh2YWx1ZSwgd2hlZWxJbmRleCkgewogICAgICB0aGlzLndoZWVsSW5mb3Nbd2hlZWxJbmRleF0uZW5naW5lRm9yY2UgPSB2YWx1ZTsKICAgIH0KICAgIC8qKgogICAgICogU2V0IHRoZSBicmFraW5nIGZvcmNlIG9mIGEgd2hlZWwKICAgICAqLwoKCiAgICBzZXRCcmFrZShicmFrZSwgd2hlZWxJbmRleCkgewogICAgICB0aGlzLndoZWVsSW5mb3Nbd2hlZWxJbmRleF0uYnJha2UgPSBicmFrZTsKICAgIH0KICAgIC8qKgogICAgICogQWRkIHRoZSB2ZWhpY2xlIGluY2x1ZGluZyBpdHMgY29uc3RyYWludHMgdG8gdGhlIHdvcmxkLgogICAgICovCgoKICAgIGFkZFRvV29ybGQod29ybGQpIHsKICAgICAgd29ybGQuYWRkQm9keSh0aGlzLmNoYXNzaXNCb2R5KTsKICAgICAgY29uc3QgdGhhdCA9IHRoaXM7CgogICAgICB0aGlzLnByZVN0ZXBDYWxsYmFjayA9ICgpID0+IHsKICAgICAgICB0aGF0LnVwZGF0ZVZlaGljbGUod29ybGQuZHQpOwogICAgICB9OwoKICAgICAgd29ybGQuYWRkRXZlbnRMaXN0ZW5lcigncHJlU3RlcCcsIHRoaXMucHJlU3RlcENhbGxiYWNrKTsKICAgICAgdGhpcy53b3JsZCA9IHdvcmxkOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgb25lIG9mIHRoZSB3aGVlbCBheGxlcywgd29ybGQtb3JpZW50ZWQuCiAgICAgKi8KCgogICAgZ2V0VmVoaWNsZUF4aXNXb3JsZChheGlzSW5kZXgsIHJlc3VsdCkgewogICAgICByZXN1bHQuc2V0KGF4aXNJbmRleCA9PT0gMCA/IDEgOiAwLCBheGlzSW5kZXggPT09IDEgPyAxIDogMCwgYXhpc0luZGV4ID09PSAyID8gMSA6IDApOwogICAgICB0aGlzLmNoYXNzaXNCb2R5LnZlY3RvclRvV29ybGRGcmFtZShyZXN1bHQsIHJlc3VsdCk7CiAgICB9CgogICAgdXBkYXRlVmVoaWNsZSh0aW1lU3RlcCkgewogICAgICBjb25zdCB3aGVlbEluZm9zID0gdGhpcy53aGVlbEluZm9zOwogICAgICBjb25zdCBudW1XaGVlbHMgPSB3aGVlbEluZm9zLmxlbmd0aDsKICAgICAgY29uc3QgY2hhc3Npc0JvZHkgPSB0aGlzLmNoYXNzaXNCb2R5OwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1XaGVlbHM7IGkrKykgewogICAgICAgIHRoaXMudXBkYXRlV2hlZWxUcmFuc2Zvcm0oaSk7CiAgICAgIH0KCiAgICAgIHRoaXMuY3VycmVudFZlaGljbGVTcGVlZEttSG91ciA9IDMuNiAqIGNoYXNzaXNCb2R5LnZlbG9jaXR5Lmxlbmd0aCgpOwogICAgICBjb25zdCBmb3J3YXJkV29ybGQgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmdldFZlaGljbGVBeGlzV29ybGQodGhpcy5pbmRleEZvcndhcmRBeGlzLCBmb3J3YXJkV29ybGQpOwoKICAgICAgaWYgKGZvcndhcmRXb3JsZC5kb3QoY2hhc3Npc0JvZHkudmVsb2NpdHkpIDwgMCkgewogICAgICAgIHRoaXMuY3VycmVudFZlaGljbGVTcGVlZEttSG91ciAqPSAtMTsKICAgICAgfSAvLyBzaW11bGF0ZSBzdXNwZW5zaW9uCgoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1XaGVlbHM7IGkrKykgewogICAgICAgIHRoaXMuY2FzdFJheSh3aGVlbEluZm9zW2ldKTsKICAgICAgfQoKICAgICAgdGhpcy51cGRhdGVTdXNwZW5zaW9uKHRpbWVTdGVwKTsKICAgICAgY29uc3QgaW1wdWxzZSA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IHJlbHBvcyA9IG5ldyBWZWMzKCk7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVdoZWVsczsgaSsrKSB7CiAgICAgICAgLy9hcHBseSBzdXNwZW5zaW9uIGZvcmNlCiAgICAgICAgY29uc3Qgd2hlZWwgPSB3aGVlbEluZm9zW2ldOwogICAgICAgIGxldCBzdXNwZW5zaW9uRm9yY2UgPSB3aGVlbC5zdXNwZW5zaW9uRm9yY2U7CgogICAgICAgIGlmIChzdXNwZW5zaW9uRm9yY2UgPiB3aGVlbC5tYXhTdXNwZW5zaW9uRm9yY2UpIHsKICAgICAgICAgIHN1c3BlbnNpb25Gb3JjZSA9IHdoZWVsLm1heFN1c3BlbnNpb25Gb3JjZTsKICAgICAgICB9CgogICAgICAgIHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0Tm9ybWFsV29ybGQuc2NhbGUoc3VzcGVuc2lvbkZvcmNlICogdGltZVN0ZXAsIGltcHVsc2UpOwogICAgICAgIHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZC52c3ViKGNoYXNzaXNCb2R5LnBvc2l0aW9uLCByZWxwb3MpOwogICAgICAgIGNoYXNzaXNCb2R5LmFwcGx5SW1wdWxzZShpbXB1bHNlLCByZWxwb3MpOwogICAgICB9CgogICAgICB0aGlzLnVwZGF0ZUZyaWN0aW9uKHRpbWVTdGVwKTsKICAgICAgY29uc3QgaGl0Tm9ybWFsV29ybGRTY2FsZWRXaXRoUHJvaiA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IGZ3ZCA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IHZlbCA9IG5ldyBWZWMzKCk7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVdoZWVsczsgaSsrKSB7CiAgICAgICAgY29uc3Qgd2hlZWwgPSB3aGVlbEluZm9zW2ldOyAvL2NvbnN0IHJlbHBvcyA9IG5ldyBWZWMzKCk7CiAgICAgICAgLy93aGVlbC5jaGFzc2lzQ29ubmVjdGlvblBvaW50V29ybGQudnN1YihjaGFzc2lzQm9keS5wb3NpdGlvbiwgcmVscG9zKTsKCiAgICAgICAgY2hhc3Npc0JvZHkuZ2V0VmVsb2NpdHlBdFdvcmxkUG9pbnQod2hlZWwuY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludFdvcmxkLCB2ZWwpOyAvLyBIYWNrIHRvIGdldCB0aGUgcm90YXRpb24gaW4gdGhlIGNvcnJlY3QgZGlyZWN0aW9uCgogICAgICAgIGxldCBtID0gMTsKCiAgICAgICAgc3dpdGNoICh0aGlzLmluZGV4VXBBeGlzKSB7CiAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgIG0gPSAtMTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgICBpZiAod2hlZWwuaXNJbkNvbnRhY3QpIHsKICAgICAgICAgIHRoaXMuZ2V0VmVoaWNsZUF4aXNXb3JsZCh0aGlzLmluZGV4Rm9yd2FyZEF4aXMsIGZ3ZCk7CiAgICAgICAgICBjb25zdCBwcm9qID0gZndkLmRvdCh3aGVlbC5yYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkKTsKICAgICAgICAgIHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0Tm9ybWFsV29ybGQuc2NhbGUocHJvaiwgaGl0Tm9ybWFsV29ybGRTY2FsZWRXaXRoUHJvaik7CiAgICAgICAgICBmd2QudnN1YihoaXROb3JtYWxXb3JsZFNjYWxlZFdpdGhQcm9qLCBmd2QpOwogICAgICAgICAgY29uc3QgcHJvajIgPSBmd2QuZG90KHZlbCk7CiAgICAgICAgICB3aGVlbC5kZWx0YVJvdGF0aW9uID0gbSAqIHByb2oyICogdGltZVN0ZXAgLyB3aGVlbC5yYWRpdXM7CiAgICAgICAgfQoKICAgICAgICBpZiAoKHdoZWVsLnNsaWRpbmcgfHwgIXdoZWVsLmlzSW5Db250YWN0KSAmJiB3aGVlbC5lbmdpbmVGb3JjZSAhPT0gMCAmJiB3aGVlbC51c2VDdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkKSB7CiAgICAgICAgICAvLyBBcHBseSBjdXN0b20gcm90YXRpb24gd2hlbiBhY2NlbGVyYXRpbmcgYW5kIHNsaWRpbmcKICAgICAgICAgIHdoZWVsLmRlbHRhUm90YXRpb24gPSAod2hlZWwuZW5naW5lRm9yY2UgPiAwID8gMSA6IC0xKSAqIHdoZWVsLmN1c3RvbVNsaWRpbmdSb3RhdGlvbmFsU3BlZWQgKiB0aW1lU3RlcDsKICAgICAgICB9IC8vIExvY2sgd2hlZWxzCgoKICAgICAgICBpZiAoTWF0aC5hYnMod2hlZWwuYnJha2UpID4gTWF0aC5hYnMod2hlZWwuZW5naW5lRm9yY2UpKSB7CiAgICAgICAgICB3aGVlbC5kZWx0YVJvdGF0aW9uID0gMDsKICAgICAgICB9CgogICAgICAgIHdoZWVsLnJvdGF0aW9uICs9IHdoZWVsLmRlbHRhUm90YXRpb247IC8vIFVzZSB0aGUgb2xkIHZhbHVlCgogICAgICAgIHdoZWVsLmRlbHRhUm90YXRpb24gKj0gMC45OTsgLy8gZGFtcGluZyBvZiByb3RhdGlvbiB3aGVuIG5vdCBpbiBjb250YWN0CiAgICAgIH0KICAgIH0KCiAgICB1cGRhdGVTdXNwZW5zaW9uKGRlbHRhVGltZSkgewogICAgICBjb25zdCBjaGFzc2lzQm9keSA9IHRoaXMuY2hhc3Npc0JvZHk7CiAgICAgIGNvbnN0IGNoYXNzaXNNYXNzID0gY2hhc3Npc0JvZHkubWFzczsKICAgICAgY29uc3Qgd2hlZWxJbmZvcyA9IHRoaXMud2hlZWxJbmZvczsKICAgICAgY29uc3QgbnVtV2hlZWxzID0gd2hlZWxJbmZvcy5sZW5ndGg7CgogICAgICBmb3IgKGxldCB3X2l0ID0gMDsgd19pdCA8IG51bVdoZWVsczsgd19pdCsrKSB7CiAgICAgICAgY29uc3Qgd2hlZWwgPSB3aGVlbEluZm9zW3dfaXRdOwoKICAgICAgICBpZiAod2hlZWwuaXNJbkNvbnRhY3QpIHsKICAgICAgICAgIGxldCBmb3JjZTsgLy8gU3ByaW5nCgogICAgICAgICAgY29uc3Qgc3VzcF9sZW5ndGggPSB3aGVlbC5zdXNwZW5zaW9uUmVzdExlbmd0aDsKICAgICAgICAgIGNvbnN0IGN1cnJlbnRfbGVuZ3RoID0gd2hlZWwuc3VzcGVuc2lvbkxlbmd0aDsKICAgICAgICAgIGNvbnN0IGxlbmd0aF9kaWZmID0gc3VzcF9sZW5ndGggLSBjdXJyZW50X2xlbmd0aDsKICAgICAgICAgIGZvcmNlID0gd2hlZWwuc3VzcGVuc2lvblN0aWZmbmVzcyAqIGxlbmd0aF9kaWZmICogd2hlZWwuY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uOyAvLyBEYW1wZXIKCiAgICAgICAgICBjb25zdCBwcm9qZWN0ZWRfcmVsX3ZlbCA9IHdoZWVsLnN1c3BlbnNpb25SZWxhdGl2ZVZlbG9jaXR5OwogICAgICAgICAgbGV0IHN1c3BfZGFtcGluZzsKCiAgICAgICAgICBpZiAocHJvamVjdGVkX3JlbF92ZWwgPCAwKSB7CiAgICAgICAgICAgIHN1c3BfZGFtcGluZyA9IHdoZWVsLmRhbXBpbmdDb21wcmVzc2lvbjsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHN1c3BfZGFtcGluZyA9IHdoZWVsLmRhbXBpbmdSZWxheGF0aW9uOwogICAgICAgICAgfQoKICAgICAgICAgIGZvcmNlIC09IHN1c3BfZGFtcGluZyAqIHByb2plY3RlZF9yZWxfdmVsOwogICAgICAgICAgd2hlZWwuc3VzcGVuc2lvbkZvcmNlID0gZm9yY2UgKiBjaGFzc2lzTWFzczsKCiAgICAgICAgICBpZiAod2hlZWwuc3VzcGVuc2lvbkZvcmNlIDwgMCkgewogICAgICAgICAgICB3aGVlbC5zdXNwZW5zaW9uRm9yY2UgPSAwOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB3aGVlbC5zdXNwZW5zaW9uRm9yY2UgPSAwOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBSZW1vdmUgdGhlIHZlaGljbGUgaW5jbHVkaW5nIGl0cyBjb25zdHJhaW50cyBmcm9tIHRoZSB3b3JsZC4KICAgICAqLwoKCiAgICByZW1vdmVGcm9tV29ybGQod29ybGQpIHsKICAgICAgdGhpcy5jb25zdHJhaW50czsKICAgICAgd29ybGQucmVtb3ZlQm9keSh0aGlzLmNoYXNzaXNCb2R5KTsKICAgICAgd29ybGQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncHJlU3RlcCcsIHRoaXMucHJlU3RlcENhbGxiYWNrKTsKICAgICAgdGhpcy53b3JsZCA9IG51bGw7CiAgICB9CgogICAgY2FzdFJheSh3aGVlbCkgewogICAgICBjb25zdCByYXl2ZWN0b3IgPSBjYXN0UmF5X3JheXZlY3RvcjsKICAgICAgY29uc3QgdGFyZ2V0ID0gY2FzdFJheV90YXJnZXQ7CiAgICAgIHRoaXMudXBkYXRlV2hlZWxUcmFuc2Zvcm1Xb3JsZCh3aGVlbCk7CiAgICAgIGNvbnN0IGNoYXNzaXNCb2R5ID0gdGhpcy5jaGFzc2lzQm9keTsKICAgICAgbGV0IGRlcHRoID0gLTE7CiAgICAgIGNvbnN0IHJheWxlbiA9IHdoZWVsLnN1c3BlbnNpb25SZXN0TGVuZ3RoICsgd2hlZWwucmFkaXVzOwogICAgICB3aGVlbC5kaXJlY3Rpb25Xb3JsZC5zY2FsZShyYXlsZW4sIHJheXZlY3Rvcik7CiAgICAgIGNvbnN0IHNvdXJjZSA9IHdoZWVsLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRXb3JsZDsKICAgICAgc291cmNlLnZhZGQocmF5dmVjdG9yLCB0YXJnZXQpOwogICAgICBjb25zdCByYXljYXN0UmVzdWx0ID0gd2hlZWwucmF5Y2FzdFJlc3VsdDsKICAgICAgcmF5Y2FzdFJlc3VsdC5yZXNldCgpOyAvLyBUdXJuIG9mZiByYXkgY29sbGlzaW9uIHdpdGggdGhlIGNoYXNzaXMgdGVtcG9yYXJpbHkKCiAgICAgIGNvbnN0IG9sZFN0YXRlID0gY2hhc3Npc0JvZHkuY29sbGlzaW9uUmVzcG9uc2U7CiAgICAgIGNoYXNzaXNCb2R5LmNvbGxpc2lvblJlc3BvbnNlID0gZmFsc2U7IC8vIENhc3QgcmF5IGFnYWluc3Qgd29ybGQKCiAgICAgIHRoaXMud29ybGQucmF5VGVzdChzb3VyY2UsIHRhcmdldCwgcmF5Y2FzdFJlc3VsdCk7CiAgICAgIGNoYXNzaXNCb2R5LmNvbGxpc2lvblJlc3BvbnNlID0gb2xkU3RhdGU7CiAgICAgIGNvbnN0IG9iamVjdCA9IHJheWNhc3RSZXN1bHQuYm9keTsKICAgICAgd2hlZWwucmF5Y2FzdFJlc3VsdC5ncm91bmRPYmplY3QgPSAwOwoKICAgICAgaWYgKG9iamVjdCkgewogICAgICAgIGRlcHRoID0gcmF5Y2FzdFJlc3VsdC5kaXN0YW5jZTsKICAgICAgICB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkID0gcmF5Y2FzdFJlc3VsdC5oaXROb3JtYWxXb3JsZDsKICAgICAgICB3aGVlbC5pc0luQ29udGFjdCA9IHRydWU7CiAgICAgICAgY29uc3QgaGl0RGlzdGFuY2UgPSByYXljYXN0UmVzdWx0LmRpc3RhbmNlOwogICAgICAgIHdoZWVsLnN1c3BlbnNpb25MZW5ndGggPSBoaXREaXN0YW5jZSAtIHdoZWVsLnJhZGl1czsgLy8gY2xhbXAgb24gbWF4IHN1c3BlbnNpb24gdHJhdmVsCgogICAgICAgIGNvbnN0IG1pblN1c3BlbnNpb25MZW5ndGggPSB3aGVlbC5zdXNwZW5zaW9uUmVzdExlbmd0aCAtIHdoZWVsLm1heFN1c3BlbnNpb25UcmF2ZWw7CiAgICAgICAgY29uc3QgbWF4U3VzcGVuc2lvbkxlbmd0aCA9IHdoZWVsLnN1c3BlbnNpb25SZXN0TGVuZ3RoICsgd2hlZWwubWF4U3VzcGVuc2lvblRyYXZlbDsKCiAgICAgICAgaWYgKHdoZWVsLnN1c3BlbnNpb25MZW5ndGggPCBtaW5TdXNwZW5zaW9uTGVuZ3RoKSB7CiAgICAgICAgICB3aGVlbC5zdXNwZW5zaW9uTGVuZ3RoID0gbWluU3VzcGVuc2lvbkxlbmd0aDsKICAgICAgICB9CgogICAgICAgIGlmICh3aGVlbC5zdXNwZW5zaW9uTGVuZ3RoID4gbWF4U3VzcGVuc2lvbkxlbmd0aCkgewogICAgICAgICAgd2hlZWwuc3VzcGVuc2lvbkxlbmd0aCA9IG1heFN1c3BlbnNpb25MZW5ndGg7CiAgICAgICAgICB3aGVlbC5yYXljYXN0UmVzdWx0LnJlc2V0KCk7CiAgICAgICAgfQoKICAgICAgICBjb25zdCBkZW5vbWluYXRvciA9IHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0Tm9ybWFsV29ybGQuZG90KHdoZWVsLmRpcmVjdGlvbldvcmxkKTsKICAgICAgICBjb25zdCBjaGFzc2lzX3ZlbG9jaXR5X2F0X2NvbnRhY3RQb2ludCA9IG5ldyBWZWMzKCk7CiAgICAgICAgY2hhc3Npc0JvZHkuZ2V0VmVsb2NpdHlBdFdvcmxkUG9pbnQod2hlZWwucmF5Y2FzdFJlc3VsdC5oaXRQb2ludFdvcmxkLCBjaGFzc2lzX3ZlbG9jaXR5X2F0X2NvbnRhY3RQb2ludCk7CiAgICAgICAgY29uc3QgcHJvalZlbCA9IHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0Tm9ybWFsV29ybGQuZG90KGNoYXNzaXNfdmVsb2NpdHlfYXRfY29udGFjdFBvaW50KTsKCiAgICAgICAgaWYgKGRlbm9taW5hdG9yID49IC0wLjEpIHsKICAgICAgICAgIHdoZWVsLnN1c3BlbnNpb25SZWxhdGl2ZVZlbG9jaXR5ID0gMDsKICAgICAgICAgIHdoZWVsLmNsaXBwZWRJbnZDb250YWN0RG90U3VzcGVuc2lvbiA9IDEgLyAwLjE7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnN0IGludiA9IC0xIC8gZGVub21pbmF0b3I7CiAgICAgICAgICB3aGVlbC5zdXNwZW5zaW9uUmVsYXRpdmVWZWxvY2l0eSA9IHByb2pWZWwgKiBpbnY7CiAgICAgICAgICB3aGVlbC5jbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb24gPSBpbnY7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIC8vcHV0IHdoZWVsIGluZm8gYXMgaW4gcmVzdCBwb3NpdGlvbgogICAgICAgIHdoZWVsLnN1c3BlbnNpb25MZW5ndGggPSB3aGVlbC5zdXNwZW5zaW9uUmVzdExlbmd0aCArIDAgKiB3aGVlbC5tYXhTdXNwZW5zaW9uVHJhdmVsOwogICAgICAgIHdoZWVsLnN1c3BlbnNpb25SZWxhdGl2ZVZlbG9jaXR5ID0gMC4wOwogICAgICAgIHdoZWVsLmRpcmVjdGlvbldvcmxkLnNjYWxlKC0xLCB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkKTsKICAgICAgICB3aGVlbC5jbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb24gPSAxLjA7CiAgICAgIH0KCiAgICAgIHJldHVybiBkZXB0aDsKICAgIH0KCiAgICB1cGRhdGVXaGVlbFRyYW5zZm9ybVdvcmxkKHdoZWVsKSB7CiAgICAgIHdoZWVsLmlzSW5Db250YWN0ID0gZmFsc2U7CiAgICAgIGNvbnN0IGNoYXNzaXNCb2R5ID0gdGhpcy5jaGFzc2lzQm9keTsKICAgICAgY2hhc3Npc0JvZHkucG9pbnRUb1dvcmxkRnJhbWUod2hlZWwuY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludExvY2FsLCB3aGVlbC5jaGFzc2lzQ29ubmVjdGlvblBvaW50V29ybGQpOwogICAgICBjaGFzc2lzQm9keS52ZWN0b3JUb1dvcmxkRnJhbWUod2hlZWwuZGlyZWN0aW9uTG9jYWwsIHdoZWVsLmRpcmVjdGlvbldvcmxkKTsKICAgICAgY2hhc3Npc0JvZHkudmVjdG9yVG9Xb3JsZEZyYW1lKHdoZWVsLmF4bGVMb2NhbCwgd2hlZWwuYXhsZVdvcmxkKTsKICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlIG9uZSBvZiB0aGUgd2hlZWwgdHJhbnNmb3JtLgogICAgICogTm90ZSB3aGVuIHJlbmRlcmluZyB3aGVlbHM6IGR1cmluZyBlYWNoIHN0ZXAsIHdoZWVsIHRyYW5zZm9ybXMgYXJlIHVwZGF0ZWQgQkVGT1JFIHRoZSBjaGFzc2lzOyBpZS4gdGhlaXIgcG9zaXRpb24gYmVjb21lcyBpbnZhbGlkIGFmdGVyIHRoZSBzdGVwLiBUaHVzIHdoZW4geW91IHJlbmRlciB3aGVlbHMsIHlvdSBtdXN0IHVwZGF0ZSB3aGVlbCB0cmFuc2Zvcm1zIGJlZm9yZSByZW5kZXJpbmcgdGhlbS4gU2VlIHJheWNhc3RWZWhpY2xlIGRlbW8gZm9yIGFuIGV4YW1wbGUuCiAgICAgKiBAcGFyYW0gd2hlZWxJbmRleCBUaGUgd2hlZWwgaW5kZXggdG8gdXBkYXRlLgogICAgICovCgoKICAgIHVwZGF0ZVdoZWVsVHJhbnNmb3JtKHdoZWVsSW5kZXgpIHsKICAgICAgY29uc3QgdXAgPSB0bXBWZWM0OwogICAgICBjb25zdCByaWdodCA9IHRtcFZlYzU7CiAgICAgIGNvbnN0IGZ3ZCA9IHRtcFZlYzY7CiAgICAgIGNvbnN0IHdoZWVsID0gdGhpcy53aGVlbEluZm9zW3doZWVsSW5kZXhdOwogICAgICB0aGlzLnVwZGF0ZVdoZWVsVHJhbnNmb3JtV29ybGQod2hlZWwpOwogICAgICB3aGVlbC5kaXJlY3Rpb25Mb2NhbC5zY2FsZSgtMSwgdXApOwogICAgICByaWdodC5jb3B5KHdoZWVsLmF4bGVMb2NhbCk7CiAgICAgIHVwLmNyb3NzKHJpZ2h0LCBmd2QpOwogICAgICBmd2Qubm9ybWFsaXplKCk7CiAgICAgIHJpZ2h0Lm5vcm1hbGl6ZSgpOyAvLyBSb3RhdGUgYXJvdW5kIHN0ZWVyaW5nIG92ZXIgdGhlIHdoZWVsQXhsZQoKICAgICAgY29uc3Qgc3RlZXJpbmcgPSB3aGVlbC5zdGVlcmluZzsKICAgICAgY29uc3Qgc3RlZXJpbmdPcm4gPSBuZXcgUXVhdGVybmlvbigpOwogICAgICBzdGVlcmluZ09ybi5zZXRGcm9tQXhpc0FuZ2xlKHVwLCBzdGVlcmluZyk7CiAgICAgIGNvbnN0IHJvdGF0aW5nT3JuID0gbmV3IFF1YXRlcm5pb24oKTsKICAgICAgcm90YXRpbmdPcm4uc2V0RnJvbUF4aXNBbmdsZShyaWdodCwgd2hlZWwucm90YXRpb24pOyAvLyBXb3JsZCByb3RhdGlvbiBvZiB0aGUgd2hlZWwKCiAgICAgIGNvbnN0IHEgPSB3aGVlbC53b3JsZFRyYW5zZm9ybS5xdWF0ZXJuaW9uOwogICAgICB0aGlzLmNoYXNzaXNCb2R5LnF1YXRlcm5pb24ubXVsdChzdGVlcmluZ09ybiwgcSk7CiAgICAgIHEubXVsdChyb3RhdGluZ09ybiwgcSk7CiAgICAgIHEubm9ybWFsaXplKCk7IC8vIHdvcmxkIHBvc2l0aW9uIG9mIHRoZSB3aGVlbAoKICAgICAgY29uc3QgcCA9IHdoZWVsLndvcmxkVHJhbnNmb3JtLnBvc2l0aW9uOwogICAgICBwLmNvcHkod2hlZWwuZGlyZWN0aW9uV29ybGQpOwogICAgICBwLnNjYWxlKHdoZWVsLnN1c3BlbnNpb25MZW5ndGgsIHApOwogICAgICBwLnZhZGQod2hlZWwuY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludFdvcmxkLCBwKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSB3b3JsZCB0cmFuc2Zvcm0gb2Ygb25lIG9mIHRoZSB3aGVlbHMKICAgICAqLwoKCiAgICBnZXRXaGVlbFRyYW5zZm9ybVdvcmxkKHdoZWVsSW5kZXgpIHsKICAgICAgcmV0dXJuIHRoaXMud2hlZWxJbmZvc1t3aGVlbEluZGV4XS53b3JsZFRyYW5zZm9ybTsKICAgIH0KCiAgICB1cGRhdGVGcmljdGlvbih0aW1lU3RlcCkgewogICAgICBjb25zdCBzdXJmTm9ybWFsV1Nfc2NhbGVkX3Byb2ogPSB1cGRhdGVGcmljdGlvbl9zdXJmTm9ybWFsV1Nfc2NhbGVkX3Byb2o7IC8vY2FsY3VsYXRlIHRoZSBpbXB1bHNlLCBzbyB0aGF0IHRoZSB3aGVlbHMgZG9uJ3QgbW92ZSBzaWRld2FyZHMKCiAgICAgIGNvbnN0IHdoZWVsSW5mb3MgPSB0aGlzLndoZWVsSW5mb3M7CiAgICAgIGNvbnN0IG51bVdoZWVscyA9IHdoZWVsSW5mb3MubGVuZ3RoOwogICAgICBjb25zdCBjaGFzc2lzQm9keSA9IHRoaXMuY2hhc3Npc0JvZHk7CiAgICAgIGNvbnN0IGZvcndhcmRXUyA9IHVwZGF0ZUZyaWN0aW9uX2ZvcndhcmRXUzsKICAgICAgY29uc3QgYXhsZSA9IHVwZGF0ZUZyaWN0aW9uX2F4bGU7CiAgICAgIHRoaXMubnVtV2hlZWxzT25Hcm91bmQgPSAwOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1XaGVlbHM7IGkrKykgewogICAgICAgIGNvbnN0IHdoZWVsID0gd2hlZWxJbmZvc1tpXTsKICAgICAgICBjb25zdCBncm91bmRPYmplY3QgPSB3aGVlbC5yYXljYXN0UmVzdWx0LmJvZHk7CgogICAgICAgIGlmIChncm91bmRPYmplY3QpIHsKICAgICAgICAgIHRoaXMubnVtV2hlZWxzT25Hcm91bmQrKzsKICAgICAgICB9CgogICAgICAgIHdoZWVsLnNpZGVJbXB1bHNlID0gMDsKICAgICAgICB3aGVlbC5mb3J3YXJkSW1wdWxzZSA9IDA7CgogICAgICAgIGlmICghZm9yd2FyZFdTW2ldKSB7CiAgICAgICAgICBmb3J3YXJkV1NbaV0gPSBuZXcgVmVjMygpOwogICAgICAgIH0KCiAgICAgICAgaWYgKCFheGxlW2ldKSB7CiAgICAgICAgICBheGxlW2ldID0gbmV3IFZlYzMoKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtV2hlZWxzOyBpKyspIHsKICAgICAgICBjb25zdCB3aGVlbCA9IHdoZWVsSW5mb3NbaV07CiAgICAgICAgY29uc3QgZ3JvdW5kT2JqZWN0ID0gd2hlZWwucmF5Y2FzdFJlc3VsdC5ib2R5OwoKICAgICAgICBpZiAoZ3JvdW5kT2JqZWN0KSB7CiAgICAgICAgICBjb25zdCBheGxlaSA9IGF4bGVbaV07CiAgICAgICAgICBjb25zdCB3aGVlbFRyYW5zID0gdGhpcy5nZXRXaGVlbFRyYW5zZm9ybVdvcmxkKGkpOyAvLyBHZXQgd29ybGQgYXhsZQoKICAgICAgICAgIHdoZWVsVHJhbnMudmVjdG9yVG9Xb3JsZEZyYW1lKGRpcmVjdGlvbnNbdGhpcy5pbmRleFJpZ2h0QXhpc10sIGF4bGVpKTsKICAgICAgICAgIGNvbnN0IHN1cmZOb3JtYWxXUyA9IHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0Tm9ybWFsV29ybGQ7CiAgICAgICAgICBjb25zdCBwcm9qID0gYXhsZWkuZG90KHN1cmZOb3JtYWxXUyk7CiAgICAgICAgICBzdXJmTm9ybWFsV1Muc2NhbGUocHJvaiwgc3VyZk5vcm1hbFdTX3NjYWxlZF9wcm9qKTsKICAgICAgICAgIGF4bGVpLnZzdWIoc3VyZk5vcm1hbFdTX3NjYWxlZF9wcm9qLCBheGxlaSk7CiAgICAgICAgICBheGxlaS5ub3JtYWxpemUoKTsKICAgICAgICAgIHN1cmZOb3JtYWxXUy5jcm9zcyhheGxlaSwgZm9yd2FyZFdTW2ldKTsKICAgICAgICAgIGZvcndhcmRXU1tpXS5ub3JtYWxpemUoKTsKICAgICAgICAgIHdoZWVsLnNpZGVJbXB1bHNlID0gcmVzb2x2ZVNpbmdsZUJpbGF0ZXJhbChjaGFzc2lzQm9keSwgd2hlZWwucmF5Y2FzdFJlc3VsdC5oaXRQb2ludFdvcmxkLCBncm91bmRPYmplY3QsIHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZCwgYXhsZWkpOwogICAgICAgICAgd2hlZWwuc2lkZUltcHVsc2UgKj0gc2lkZUZyaWN0aW9uU3RpZmZuZXNzMjsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGNvbnN0IHNpZGVGYWN0b3IgPSAxOwogICAgICBjb25zdCBmd2RGYWN0b3IgPSAwLjU7CiAgICAgIHRoaXMuc2xpZGluZyA9IGZhbHNlOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1XaGVlbHM7IGkrKykgewogICAgICAgIGNvbnN0IHdoZWVsID0gd2hlZWxJbmZvc1tpXTsKICAgICAgICBjb25zdCBncm91bmRPYmplY3QgPSB3aGVlbC5yYXljYXN0UmVzdWx0LmJvZHk7CiAgICAgICAgbGV0IHJvbGxpbmdGcmljdGlvbiA9IDA7CiAgICAgICAgd2hlZWwuc2xpcEluZm8gPSAxOwoKICAgICAgICBpZiAoZ3JvdW5kT2JqZWN0KSB7CiAgICAgICAgICBjb25zdCBkZWZhdWx0Um9sbGluZ0ZyaWN0aW9uSW1wdWxzZSA9IDA7CiAgICAgICAgICBjb25zdCBtYXhJbXB1bHNlID0gd2hlZWwuYnJha2UgPyB3aGVlbC5icmFrZSA6IGRlZmF1bHRSb2xsaW5nRnJpY3Rpb25JbXB1bHNlOyAvLyBidFdoZWVsQ29udGFjdFBvaW50IGNvbnRhY3RQdChjaGFzc2lzQm9keSxncm91bmRPYmplY3Qsd2hlZWxJbmZyYXljYXN0SW5mby5oaXRQb2ludFdvcmxkLGZvcndhcmRXU1t3aGVlbF0sbWF4SW1wdWxzZSk7CiAgICAgICAgICAvLyByb2xsaW5nRnJpY3Rpb24gPSBjYWxjUm9sbGluZ0ZyaWN0aW9uKGNvbnRhY3RQdCk7CgogICAgICAgICAgcm9sbGluZ0ZyaWN0aW9uID0gY2FsY1JvbGxpbmdGcmljdGlvbihjaGFzc2lzQm9keSwgZ3JvdW5kT2JqZWN0LCB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdFBvaW50V29ybGQsIGZvcndhcmRXU1tpXSwgbWF4SW1wdWxzZSk7CiAgICAgICAgICByb2xsaW5nRnJpY3Rpb24gKz0gd2hlZWwuZW5naW5lRm9yY2UgKiB0aW1lU3RlcDsgLy8gcm9sbGluZ0ZyaWN0aW9uID0gMDsKCiAgICAgICAgICBjb25zdCBmYWN0b3IgPSBtYXhJbXB1bHNlIC8gcm9sbGluZ0ZyaWN0aW9uOwogICAgICAgICAgd2hlZWwuc2xpcEluZm8gKj0gZmFjdG9yOwogICAgICAgIH0gLy9zd2l0Y2ggYmV0d2VlbiBhY3RpdmUgcm9sbGluZyAodGhyb3R0bGUpLCBicmFraW5nIGFuZCBub24tYWN0aXZlIHJvbGxpbmcgZnJpY3Rpb24gKG50aHJvdHRsZS9icmVhaykKCgogICAgICAgIHdoZWVsLmZvcndhcmRJbXB1bHNlID0gMDsKICAgICAgICB3aGVlbC5za2lkSW5mbyA9IDE7CgogICAgICAgIGlmIChncm91bmRPYmplY3QpIHsKICAgICAgICAgIHdoZWVsLnNraWRJbmZvID0gMTsKICAgICAgICAgIGNvbnN0IG1heGltcCA9IHdoZWVsLnN1c3BlbnNpb25Gb3JjZSAqIHRpbWVTdGVwICogd2hlZWwuZnJpY3Rpb25TbGlwOwogICAgICAgICAgY29uc3QgbWF4aW1wU2lkZSA9IG1heGltcDsKICAgICAgICAgIGNvbnN0IG1heGltcFNxdWFyZWQgPSBtYXhpbXAgKiBtYXhpbXBTaWRlOwogICAgICAgICAgd2hlZWwuZm9yd2FyZEltcHVsc2UgPSByb2xsaW5nRnJpY3Rpb247IC8vd2hlZWxJbmZvLmVuZ2luZUZvcmNlKiB0aW1lU3RlcDsKCiAgICAgICAgICBjb25zdCB4ID0gd2hlZWwuZm9yd2FyZEltcHVsc2UgKiBmd2RGYWN0b3IgLyB3aGVlbC5mb3J3YXJkQWNjZWxlcmF0aW9uOwogICAgICAgICAgY29uc3QgeSA9IHdoZWVsLnNpZGVJbXB1bHNlICogc2lkZUZhY3RvciAvIHdoZWVsLnNpZGVBY2NlbGVyYXRpb247CiAgICAgICAgICBjb25zdCBpbXB1bHNlU3F1YXJlZCA9IHggKiB4ICsgeSAqIHk7CiAgICAgICAgICB3aGVlbC5zbGlkaW5nID0gZmFsc2U7CgogICAgICAgICAgaWYgKGltcHVsc2VTcXVhcmVkID4gbWF4aW1wU3F1YXJlZCkgewogICAgICAgICAgICB0aGlzLnNsaWRpbmcgPSB0cnVlOwogICAgICAgICAgICB3aGVlbC5zbGlkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgY29uc3QgZmFjdG9yID0gbWF4aW1wIC8gTWF0aC5zcXJ0KGltcHVsc2VTcXVhcmVkKTsKICAgICAgICAgICAgd2hlZWwuc2tpZEluZm8gKj0gZmFjdG9yOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKHRoaXMuc2xpZGluZykgewogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtV2hlZWxzOyBpKyspIHsKICAgICAgICAgIGNvbnN0IHdoZWVsID0gd2hlZWxJbmZvc1tpXTsKCiAgICAgICAgICBpZiAod2hlZWwuc2lkZUltcHVsc2UgIT09IDApIHsKICAgICAgICAgICAgaWYgKHdoZWVsLnNraWRJbmZvIDwgMSkgewogICAgICAgICAgICAgIHdoZWVsLmZvcndhcmRJbXB1bHNlICo9IHdoZWVsLnNraWRJbmZvOwogICAgICAgICAgICAgIHdoZWVsLnNpZGVJbXB1bHNlICo9IHdoZWVsLnNraWRJbmZvOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IC8vIGFwcGx5IHRoZSBpbXB1bHNlcwoKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtV2hlZWxzOyBpKyspIHsKICAgICAgICBjb25zdCB3aGVlbCA9IHdoZWVsSW5mb3NbaV07CiAgICAgICAgY29uc3QgcmVsX3BvcyA9IG5ldyBWZWMzKCk7CiAgICAgICAgd2hlZWwucmF5Y2FzdFJlc3VsdC5oaXRQb2ludFdvcmxkLnZzdWIoY2hhc3Npc0JvZHkucG9zaXRpb24sIHJlbF9wb3MpOyAvLyBjYW5ub25zIGFwcGx5aW1wdWxzZSBpcyB1c2luZyB3b3JsZCBjb29yZCBmb3IgdGhlIHBvc2l0aW9uCiAgICAgICAgLy9yZWxfcG9zLmNvcHkod2hlZWwucmF5Y2FzdFJlc3VsdC5oaXRQb2ludFdvcmxkKTsKCiAgICAgICAgaWYgKHdoZWVsLmZvcndhcmRJbXB1bHNlICE9PSAwKSB7CiAgICAgICAgICBjb25zdCBpbXB1bHNlID0gbmV3IFZlYzMoKTsKICAgICAgICAgIGZvcndhcmRXU1tpXS5zY2FsZSh3aGVlbC5mb3J3YXJkSW1wdWxzZSwgaW1wdWxzZSk7CiAgICAgICAgICBjaGFzc2lzQm9keS5hcHBseUltcHVsc2UoaW1wdWxzZSwgcmVsX3Bvcyk7CiAgICAgICAgfQoKICAgICAgICBpZiAod2hlZWwuc2lkZUltcHVsc2UgIT09IDApIHsKICAgICAgICAgIGNvbnN0IGdyb3VuZE9iamVjdCA9IHdoZWVsLnJheWNhc3RSZXN1bHQuYm9keTsKICAgICAgICAgIGNvbnN0IHJlbF9wb3MyID0gbmV3IFZlYzMoKTsKICAgICAgICAgIHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZC52c3ViKGdyb3VuZE9iamVjdC5wb3NpdGlvbiwgcmVsX3BvczIpOyAvL3JlbF9wb3MyLmNvcHkod2hlZWwucmF5Y2FzdFJlc3VsdC5oaXRQb2ludFdvcmxkKTsKCiAgICAgICAgICBjb25zdCBzaWRlSW1wID0gbmV3IFZlYzMoKTsKICAgICAgICAgIGF4bGVbaV0uc2NhbGUod2hlZWwuc2lkZUltcHVsc2UsIHNpZGVJbXApOyAvLyBTY2FsZSB0aGUgcmVsYXRpdmUgcG9zaXRpb24gaW4gdGhlIHVwIGRpcmVjdGlvbiB3aXRoIHJvbGxJbmZsdWVuY2UuCiAgICAgICAgICAvLyBJZiByb2xsSW5mbHVlbmNlIGlzIDEsIHRoZSBpbXB1bHNlIHdpbGwgYmUgYXBwbGllZCBvbiB0aGUgaGl0UG9pbnQgKGVhc3kgdG8gcm9sbCBvdmVyKSwgaWYgaXQgaXMgemVybyBpdCB3aWxsIGJlIGFwcGxpZWQgaW4gdGhlIHNhbWUgcGxhbmUgYXMgdGhlIGNlbnRlciBvZiBtYXNzIChub3QgZWFzeSB0byByb2xsIG92ZXIpLgoKICAgICAgICAgIGNoYXNzaXNCb2R5LnZlY3RvclRvTG9jYWxGcmFtZShyZWxfcG9zLCByZWxfcG9zKTsKICAgICAgICAgIHJlbF9wb3NbJ3h5eidbdGhpcy5pbmRleFVwQXhpc11dICo9IHdoZWVsLnJvbGxJbmZsdWVuY2U7CiAgICAgICAgICBjaGFzc2lzQm9keS52ZWN0b3JUb1dvcmxkRnJhbWUocmVsX3BvcywgcmVsX3Bvcyk7CiAgICAgICAgICBjaGFzc2lzQm9keS5hcHBseUltcHVsc2Uoc2lkZUltcCwgcmVsX3Bvcyk7IC8vYXBwbHkgZnJpY3Rpb24gaW1wdWxzZSBvbiB0aGUgZ3JvdW5kCgogICAgICAgICAgc2lkZUltcC5zY2FsZSgtMSwgc2lkZUltcCk7CiAgICAgICAgICBncm91bmRPYmplY3QuYXBwbHlJbXB1bHNlKHNpZGVJbXAsIHJlbF9wb3MyKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgfQoKICBjb25zdCB0bXBWZWM0ID0gbmV3IFZlYzMoKTsKICBjb25zdCB0bXBWZWM1ID0gbmV3IFZlYzMoKTsKICBjb25zdCB0bXBWZWM2ID0gbmV3IFZlYzMoKTsKICBuZXcgUmF5KCk7CiAgY29uc3QgY2FzdFJheV9yYXl2ZWN0b3IgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNhc3RSYXlfdGFyZ2V0ID0gbmV3IFZlYzMoKTsKICBjb25zdCBkaXJlY3Rpb25zID0gW25ldyBWZWMzKDEsIDAsIDApLCBuZXcgVmVjMygwLCAxLCAwKSwgbmV3IFZlYzMoMCwgMCwgMSldOwogIGNvbnN0IHVwZGF0ZUZyaWN0aW9uX3N1cmZOb3JtYWxXU19zY2FsZWRfcHJvaiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgdXBkYXRlRnJpY3Rpb25fYXhsZSA9IFtdOwogIGNvbnN0IHVwZGF0ZUZyaWN0aW9uX2ZvcndhcmRXUyA9IFtdOwogIGNvbnN0IHNpZGVGcmljdGlvblN0aWZmbmVzczIgPSAxOwogIGNvbnN0IGNhbGNSb2xsaW5nRnJpY3Rpb25fdmVsMSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgY2FsY1JvbGxpbmdGcmljdGlvbl92ZWwyID0gbmV3IFZlYzMoKTsKICBjb25zdCBjYWxjUm9sbGluZ0ZyaWN0aW9uX3ZlbCA9IG5ldyBWZWMzKCk7CgogIGZ1bmN0aW9uIGNhbGNSb2xsaW5nRnJpY3Rpb24oYm9keTAsIGJvZHkxLCBmcmljdGlvblBvc1dvcmxkLCBmcmljdGlvbkRpcmVjdGlvbldvcmxkLCBtYXhJbXB1bHNlKSB7CiAgICBsZXQgajEgPSAwOwogICAgY29uc3QgY29udGFjdFBvc1dvcmxkID0gZnJpY3Rpb25Qb3NXb3JsZDsgLy8gY29uc3QgcmVsX3BvczEgPSBuZXcgVmVjMygpOwogICAgLy8gY29uc3QgcmVsX3BvczIgPSBuZXcgVmVjMygpOwoKICAgIGNvbnN0IHZlbDEgPSBjYWxjUm9sbGluZ0ZyaWN0aW9uX3ZlbDE7CiAgICBjb25zdCB2ZWwyID0gY2FsY1JvbGxpbmdGcmljdGlvbl92ZWwyOwogICAgY29uc3QgdmVsID0gY2FsY1JvbGxpbmdGcmljdGlvbl92ZWw7IC8vIGNvbnRhY3RQb3NXb3JsZC52c3ViKGJvZHkwLnBvc2l0aW9uLCByZWxfcG9zMSk7CiAgICAvLyBjb250YWN0UG9zV29ybGQudnN1Yihib2R5MS5wb3NpdGlvbiwgcmVsX3BvczIpOwoKICAgIGJvZHkwLmdldFZlbG9jaXR5QXRXb3JsZFBvaW50KGNvbnRhY3RQb3NXb3JsZCwgdmVsMSk7CiAgICBib2R5MS5nZXRWZWxvY2l0eUF0V29ybGRQb2ludChjb250YWN0UG9zV29ybGQsIHZlbDIpOwogICAgdmVsMS52c3ViKHZlbDIsIHZlbCk7CiAgICBjb25zdCB2cmVsID0gZnJpY3Rpb25EaXJlY3Rpb25Xb3JsZC5kb3QodmVsKTsKICAgIGNvbnN0IGRlbm9tMCA9IGNvbXB1dGVJbXB1bHNlRGVub21pbmF0b3IoYm9keTAsIGZyaWN0aW9uUG9zV29ybGQsIGZyaWN0aW9uRGlyZWN0aW9uV29ybGQpOwogICAgY29uc3QgZGVub20xID0gY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcihib2R5MSwgZnJpY3Rpb25Qb3NXb3JsZCwgZnJpY3Rpb25EaXJlY3Rpb25Xb3JsZCk7CiAgICBjb25zdCByZWxheGF0aW9uID0gMTsKICAgIGNvbnN0IGphY0RpYWdBQkludiA9IHJlbGF4YXRpb24gLyAoZGVub20wICsgZGVub20xKTsgLy8gY2FsY3VsYXRlIGogdGhhdCBtb3ZlcyB1cyB0byB6ZXJvIHJlbGF0aXZlIHZlbG9jaXR5CgogICAgajEgPSAtdnJlbCAqIGphY0RpYWdBQkludjsKCiAgICBpZiAobWF4SW1wdWxzZSA8IGoxKSB7CiAgICAgIGoxID0gbWF4SW1wdWxzZTsKICAgIH0KCiAgICBpZiAoajEgPCAtbWF4SW1wdWxzZSkgewogICAgICBqMSA9IC1tYXhJbXB1bHNlOwogICAgfQoKICAgIHJldHVybiBqMTsKICB9CgogIGNvbnN0IGNvbXB1dGVJbXB1bHNlRGVub21pbmF0b3JfcjAgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNvbXB1dGVJbXB1bHNlRGVub21pbmF0b3JfYzAgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNvbXB1dGVJbXB1bHNlRGVub21pbmF0b3JfdmVjID0gbmV3IFZlYzMoKTsKICBjb25zdCBjb21wdXRlSW1wdWxzZURlbm9taW5hdG9yX20gPSBuZXcgVmVjMygpOwoKICBmdW5jdGlvbiBjb21wdXRlSW1wdWxzZURlbm9taW5hdG9yKGJvZHksIHBvcywgbm9ybWFsKSB7CiAgICBjb25zdCByMCA9IGNvbXB1dGVJbXB1bHNlRGVub21pbmF0b3JfcjA7CiAgICBjb25zdCBjMCA9IGNvbXB1dGVJbXB1bHNlRGVub21pbmF0b3JfYzA7CiAgICBjb25zdCB2ZWMgPSBjb21wdXRlSW1wdWxzZURlbm9taW5hdG9yX3ZlYzsKICAgIGNvbnN0IG0gPSBjb21wdXRlSW1wdWxzZURlbm9taW5hdG9yX207CiAgICBwb3MudnN1Yihib2R5LnBvc2l0aW9uLCByMCk7CiAgICByMC5jcm9zcyhub3JtYWwsIGMwKTsKICAgIGJvZHkuaW52SW5lcnRpYVdvcmxkLnZtdWx0KGMwLCBtKTsKICAgIG0uY3Jvc3MocjAsIHZlYyk7CiAgICByZXR1cm4gYm9keS5pbnZNYXNzICsgbm9ybWFsLmRvdCh2ZWMpOwogIH0KCiAgY29uc3QgcmVzb2x2ZVNpbmdsZUJpbGF0ZXJhbF92ZWwxID0gbmV3IFZlYzMoKTsKICBjb25zdCByZXNvbHZlU2luZ2xlQmlsYXRlcmFsX3ZlbDIgPSBuZXcgVmVjMygpOwogIGNvbnN0IHJlc29sdmVTaW5nbGVCaWxhdGVyYWxfdmVsID0gbmV3IFZlYzMoKTsgLy8gYmlsYXRlcmFsIGNvbnN0cmFpbnQgYmV0d2VlbiB0d28gZHluYW1pYyBvYmplY3RzCgogIGZ1bmN0aW9uIHJlc29sdmVTaW5nbGVCaWxhdGVyYWwoYm9keTEsIHBvczEsIGJvZHkyLCBwb3MyLCBub3JtYWwpIHsKICAgIGNvbnN0IG5vcm1hbExlblNxciA9IG5vcm1hbC5sZW5ndGhTcXVhcmVkKCk7CgogICAgaWYgKG5vcm1hbExlblNxciA+IDEuMSkgewogICAgICByZXR1cm4gMDsgLy8gbm8gaW1wdWxzZQogICAgfSAvLyBjb25zdCByZWxfcG9zMSA9IG5ldyBWZWMzKCk7CiAgICAvLyBjb25zdCByZWxfcG9zMiA9IG5ldyBWZWMzKCk7CiAgICAvLyBwb3MxLnZzdWIoYm9keTEucG9zaXRpb24sIHJlbF9wb3MxKTsKICAgIC8vIHBvczIudnN1Yihib2R5Mi5wb3NpdGlvbiwgcmVsX3BvczIpOwoKCiAgICBjb25zdCB2ZWwxID0gcmVzb2x2ZVNpbmdsZUJpbGF0ZXJhbF92ZWwxOwogICAgY29uc3QgdmVsMiA9IHJlc29sdmVTaW5nbGVCaWxhdGVyYWxfdmVsMjsKICAgIGNvbnN0IHZlbCA9IHJlc29sdmVTaW5nbGVCaWxhdGVyYWxfdmVsOwogICAgYm9keTEuZ2V0VmVsb2NpdHlBdFdvcmxkUG9pbnQocG9zMSwgdmVsMSk7CiAgICBib2R5Mi5nZXRWZWxvY2l0eUF0V29ybGRQb2ludChwb3MyLCB2ZWwyKTsKICAgIHZlbDEudnN1Yih2ZWwyLCB2ZWwpOwogICAgY29uc3QgcmVsX3ZlbCA9IG5vcm1hbC5kb3QodmVsKTsKICAgIGNvbnN0IGNvbnRhY3REYW1waW5nID0gMC4yOwogICAgY29uc3QgbWFzc1Rlcm0gPSAxIC8gKGJvZHkxLmludk1hc3MgKyBib2R5Mi5pbnZNYXNzKTsKICAgIGNvbnN0IGltcHVsc2UgPSAtY29udGFjdERhbXBpbmcgKiByZWxfdmVsICogbWFzc1Rlcm07CiAgICByZXR1cm4gaW1wdWxzZTsKICB9CiAgLyoqCiAgICogU3BoZXJpY2FsIHNoYXBlCiAgICogQGV4YW1wbGUKICAgKiAgICAgY29uc3QgcmFkaXVzID0gMQogICAqICAgICBjb25zdCBzcGhlcmVTaGFwZSA9IG5ldyBDQU5OT04uU3BoZXJlKHJhZGl1cykKICAgKiAgICAgY29uc3Qgc3BoZXJlQm9keSA9IG5ldyBDQU5OT04uQm9keSh7IG1hc3M6IDEsIHNoYXBlOiBzcGhlcmVTaGFwZSB9KQogICAqICAgICB3b3JsZC5hZGRCb2R5KHNwaGVyZUJvZHkpCiAgICovCgoKICBjbGFzcyBTcGhlcmUgZXh0ZW5kcyBTaGFwZSB7CiAgICAvKioKICAgICAqIFRoZSByYWRpdXMgb2YgdGhlIHNwaGVyZS4KICAgICAqLwoKICAgIC8qKgogICAgICoKICAgICAqIEBwYXJhbSByYWRpdXMgVGhlIHJhZGl1cyBvZiB0aGUgc3BoZXJlLCBhIG5vbi1uZWdhdGl2ZSBudW1iZXIuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKHJhZGl1cykgewogICAgICBzdXBlcih7CiAgICAgICAgdHlwZTogU2hhcGUudHlwZXMuU1BIRVJFCiAgICAgIH0pOwogICAgICB0aGlzLnJhZGl1cyA9IHZvaWQgMDsKICAgICAgdGhpcy5yYWRpdXMgPSByYWRpdXMgIT09IHVuZGVmaW5lZCA/IHJhZGl1cyA6IDEuMDsKCiAgICAgIGlmICh0aGlzLnJhZGl1cyA8IDApIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBzcGhlcmUgcmFkaXVzIGNhbm5vdCBiZSBuZWdhdGl2ZS4nKTsKICAgICAgfQoKICAgICAgdGhpcy51cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpOwogICAgfQogICAgLyoqIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYSAqLwoKCiAgICBjYWxjdWxhdGVMb2NhbEluZXJ0aWEobWFzcywgdGFyZ2V0ID0gbmV3IFZlYzMoKSkgewogICAgICBjb25zdCBJID0gMi4wICogbWFzcyAqIHRoaXMucmFkaXVzICogdGhpcy5yYWRpdXMgLyA1LjA7CiAgICAgIHRhcmdldC54ID0gSTsKICAgICAgdGFyZ2V0LnkgPSBJOwogICAgICB0YXJnZXQueiA9IEk7CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKiogdm9sdW1lICovCgoKICAgIHZvbHVtZSgpIHsKICAgICAgcmV0dXJuIDQuMCAqIE1hdGguUEkgKiBNYXRoLnBvdyh0aGlzLnJhZGl1cywgMykgLyAzLjA7CiAgICB9CgogICAgdXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKSB7CiAgICAgIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgPSB0aGlzLnJhZGl1czsKICAgIH0KCiAgICBjYWxjdWxhdGVXb3JsZEFBQkIocG9zLCBxdWF0LCBtaW4sIG1heCkgewogICAgICBjb25zdCByID0gdGhpcy5yYWRpdXM7CiAgICAgIGNvbnN0IGF4ZXMgPSBbJ3gnLCAneScsICd6J107CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGF4ZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBheCA9IGF4ZXNbaV07CiAgICAgICAgbWluW2F4XSA9IHBvc1theF0gLSByOwogICAgICAgIG1heFtheF0gPSBwb3NbYXhdICsgcjsKICAgICAgfQogICAgfQoKICB9CgogIG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKCiAgbmV3IFZlYzMoKTsgLy8gVGVtcCB2ZWN0b3JzIGZvciBjYWxjdWxhdGlvbgoKICBuZXcgVmVjMygpOyAvLyBSZWxhdGl2ZSB2ZWxvY2l0eQoKICBuZXcgVmVjMygpOwogIG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKICBuZXcgVmVjMygpOwogIG5ldyBWZWMzKCk7CiAgLyoqCiAgICogQ3lsaW5kZXIgY2xhc3MuCiAgICogQGV4YW1wbGUKICAgKiAgICAgY29uc3QgcmFkaXVzVG9wID0gMC41CiAgICogICAgIGNvbnN0IHJhZGl1c0JvdHRvbSA9IDAuNQogICAqICAgICBjb25zdCBoZWlnaHQgPSAyCiAgICogICAgIGNvbnN0IG51bVNlZ21lbnRzID0gMTIKICAgKiAgICAgY29uc3QgY3lsaW5kZXJTaGFwZSA9IG5ldyBDQU5OT04uQ3lsaW5kZXIocmFkaXVzVG9wLCByYWRpdXNCb3R0b20sIGhlaWdodCwgbnVtU2VnbWVudHMpCiAgICogICAgIGNvbnN0IGN5bGluZGVyQm9keSA9IG5ldyBDQU5OT04uQm9keSh7IG1hc3M6IDEsIHNoYXBlOiBjeWxpbmRlclNoYXBlIH0pCiAgICogICAgIHdvcmxkLmFkZEJvZHkoY3lsaW5kZXJCb2R5KQogICAqLwoKICBjbGFzcyBDeWxpbmRlciBleHRlbmRzIENvbnZleFBvbHloZWRyb24gewogICAgLyoqIFRoZSByYWRpdXMgb2YgdGhlIHRvcCBvZiB0aGUgQ3lsaW5kZXIuICovCgogICAgLyoqIFRoZSByYWRpdXMgb2YgdGhlIGJvdHRvbSBvZiB0aGUgQ3lsaW5kZXIuICovCgogICAgLyoqIFRoZSBoZWlnaHQgb2YgdGhlIEN5bGluZGVyLiAqLwoKICAgIC8qKiBUaGUgbnVtYmVyIG9mIHNlZ21lbnRzIHRvIGJ1aWxkIHRoZSBjeWxpbmRlciBvdXQgb2YuICovCgogICAgLyoqCiAgICAgKiBAcGFyYW0gcmFkaXVzVG9wIFRoZSByYWRpdXMgb2YgdGhlIHRvcCBvZiB0aGUgQ3lsaW5kZXIuCiAgICAgKiBAcGFyYW0gcmFkaXVzQm90dG9tIFRoZSByYWRpdXMgb2YgdGhlIGJvdHRvbSBvZiB0aGUgQ3lsaW5kZXIuCiAgICAgKiBAcGFyYW0gaGVpZ2h0IFRoZSBoZWlnaHQgb2YgdGhlIEN5bGluZGVyLgogICAgICogQHBhcmFtIG51bVNlZ21lbnRzIFRoZSBudW1iZXIgb2Ygc2VnbWVudHMgdG8gYnVpbGQgdGhlIGN5bGluZGVyIG91dCBvZi4KICAgICAqLwogICAgY29uc3RydWN0b3IocmFkaXVzVG9wID0gMSwgcmFkaXVzQm90dG9tID0gMSwgaGVpZ2h0ID0gMSwgbnVtU2VnbWVudHMgPSA4KSB7CiAgICAgIGlmIChyYWRpdXNUb3AgPCAwKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgY3lsaW5kZXIgcmFkaXVzVG9wIGNhbm5vdCBiZSBuZWdhdGl2ZS4nKTsKICAgICAgfQoKICAgICAgaWYgKHJhZGl1c0JvdHRvbSA8IDApIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBjeWxpbmRlciByYWRpdXNCb3R0b20gY2Fubm90IGJlIG5lZ2F0aXZlLicpOwogICAgICB9CgogICAgICBjb25zdCBOID0gbnVtU2VnbWVudHM7CiAgICAgIGNvbnN0IHZlcnRpY2VzID0gW107CiAgICAgIGNvbnN0IGF4ZXMgPSBbXTsKICAgICAgY29uc3QgZmFjZXMgPSBbXTsKICAgICAgY29uc3QgYm90dG9tZmFjZSA9IFtdOwogICAgICBjb25zdCB0b3BmYWNlID0gW107CiAgICAgIGNvbnN0IGNvcyA9IE1hdGguY29zOwogICAgICBjb25zdCBzaW4gPSBNYXRoLnNpbjsgLy8gRmlyc3QgYm90dG9tIHBvaW50CgogICAgICB2ZXJ0aWNlcy5wdXNoKG5ldyBWZWMzKC1yYWRpdXNCb3R0b20gKiBzaW4oMCksIC1oZWlnaHQgKiAwLjUsIHJhZGl1c0JvdHRvbSAqIGNvcygwKSkpOwogICAgICBib3R0b21mYWNlLnB1c2goMCk7IC8vIEZpcnN0IHRvcCBwb2ludAoKICAgICAgdmVydGljZXMucHVzaChuZXcgVmVjMygtcmFkaXVzVG9wICogc2luKDApLCBoZWlnaHQgKiAwLjUsIHJhZGl1c1RvcCAqIGNvcygwKSkpOwogICAgICB0b3BmYWNlLnB1c2goMSk7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IE47IGkrKykgewogICAgICAgIGNvbnN0IHRoZXRhID0gMiAqIE1hdGguUEkgLyBOICogKGkgKyAxKTsKICAgICAgICBjb25zdCB0aGV0YU4gPSAyICogTWF0aC5QSSAvIE4gKiAoaSArIDAuNSk7CgogICAgICAgIGlmIChpIDwgTiAtIDEpIHsKICAgICAgICAgIC8vIEJvdHRvbQogICAgICAgICAgdmVydGljZXMucHVzaChuZXcgVmVjMygtcmFkaXVzQm90dG9tICogc2luKHRoZXRhKSwgLWhlaWdodCAqIDAuNSwgcmFkaXVzQm90dG9tICogY29zKHRoZXRhKSkpOwogICAgICAgICAgYm90dG9tZmFjZS5wdXNoKDIgKiBpICsgMik7IC8vIFRvcAoKICAgICAgICAgIHZlcnRpY2VzLnB1c2gobmV3IFZlYzMoLXJhZGl1c1RvcCAqIHNpbih0aGV0YSksIGhlaWdodCAqIDAuNSwgcmFkaXVzVG9wICogY29zKHRoZXRhKSkpOwogICAgICAgICAgdG9wZmFjZS5wdXNoKDIgKiBpICsgMyk7IC8vIEZhY2UKCiAgICAgICAgICBmYWNlcy5wdXNoKFsyICogaSwgMiAqIGkgKyAxLCAyICogaSArIDMsIDIgKiBpICsgMl0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBmYWNlcy5wdXNoKFsyICogaSwgMiAqIGkgKyAxLCAxLCAwXSk7IC8vIENvbm5lY3QKICAgICAgICB9IC8vIEF4aXM6IHdlIGNhbiBjdXQgb2ZmIGhhbGYgb2YgdGhlbSBpZiB3ZSBoYXZlIGV2ZW4gbnVtYmVyIG9mIHNlZ21lbnRzCgoKICAgICAgICBpZiAoTiAlIDIgPT09IDEgfHwgaSA8IE4gLyAyKSB7CiAgICAgICAgICBheGVzLnB1c2gobmV3IFZlYzMoLXNpbih0aGV0YU4pLCAwLCBjb3ModGhldGFOKSkpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgZmFjZXMucHVzaChib3R0b21mYWNlKTsKICAgICAgYXhlcy5wdXNoKG5ldyBWZWMzKDAsIDEsIDApKTsgLy8gUmVvcmRlciB0b3AgZmFjZQoKICAgICAgY29uc3QgdGVtcCA9IFtdOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0b3BmYWNlLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdGVtcC5wdXNoKHRvcGZhY2VbdG9wZmFjZS5sZW5ndGggLSBpIC0gMV0pOwogICAgICB9CgogICAgICBmYWNlcy5wdXNoKHRlbXApOwogICAgICBzdXBlcih7CiAgICAgICAgdmVydGljZXMsCiAgICAgICAgZmFjZXMsCiAgICAgICAgYXhlcwogICAgICB9KTsKICAgICAgdGhpcy5yYWRpdXNUb3AgPSB2b2lkIDA7CiAgICAgIHRoaXMucmFkaXVzQm90dG9tID0gdm9pZCAwOwogICAgICB0aGlzLmhlaWdodCA9IHZvaWQgMDsKICAgICAgdGhpcy5udW1TZWdtZW50cyA9IHZvaWQgMDsKICAgICAgdGhpcy50eXBlID0gU2hhcGUudHlwZXMuQ1lMSU5ERVI7CiAgICAgIHRoaXMucmFkaXVzVG9wID0gcmFkaXVzVG9wOwogICAgICB0aGlzLnJhZGl1c0JvdHRvbSA9IHJhZGl1c0JvdHRvbTsKICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7CiAgICAgIHRoaXMubnVtU2VnbWVudHMgPSBudW1TZWdtZW50czsKICAgIH0KCiAgfQogIC8qKgogICAqIFBhcnRpY2xlIHNoYXBlLgogICAqIEBleGFtcGxlCiAgICogICAgIGNvbnN0IHBhcnRpY2xlU2hhcGUgPSBuZXcgQ0FOTk9OLlBhcnRpY2xlKCkKICAgKiAgICAgY29uc3QgcGFydGljbGVCb2R5ID0gbmV3IENBTk5PTi5Cb2R5KHsgbWFzczogMSwgc2hhcGU6IHBhcnRpY2xlU2hhcGUgfSkKICAgKiAgICAgd29ybGQuYWRkQm9keShwYXJ0aWNsZUJvZHkpCiAgICovCgoKICBjbGFzcyBQYXJ0aWNsZSBleHRlbmRzIFNoYXBlIHsKICAgIGNvbnN0cnVjdG9yKCkgewogICAgICBzdXBlcih7CiAgICAgICAgdHlwZTogU2hhcGUudHlwZXMuUEFSVElDTEUKICAgICAgfSk7CiAgICB9CiAgICAvKioKICAgICAqIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYQogICAgICovCgoKICAgIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYShtYXNzLCB0YXJnZXQgPSBuZXcgVmVjMygpKSB7CiAgICAgIHRhcmdldC5zZXQoMCwgMCwgMCk7CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CgogICAgdm9sdW1lKCkgewogICAgICByZXR1cm4gMDsKICAgIH0KCiAgICB1cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpIHsKICAgICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IDA7CiAgICB9CgogICAgY2FsY3VsYXRlV29ybGRBQUJCKHBvcywgcXVhdCwgbWluLCBtYXgpIHsKICAgICAgLy8gR2V0IGVhY2ggYXhpcyBtYXgKICAgICAgbWluLmNvcHkocG9zKTsKICAgICAgbWF4LmNvcHkocG9zKTsKICAgIH0KCiAgfQogIC8qKgogICAqIEEgcGxhbmUsIGZhY2luZyBpbiB0aGUgWiBkaXJlY3Rpb24uIFRoZSBwbGFuZSBoYXMgaXRzIHN1cmZhY2UgYXQgej0wIGFuZCBldmVyeXRoaW5nIGJlbG93IHo9MCBpcyBhc3N1bWVkIHRvIGJlIHNvbGlkIHBsYW5lLiBUbyBtYWtlIHRoZSBwbGFuZSBmYWNlIGluIHNvbWUgb3RoZXIgZGlyZWN0aW9uIHRoYW4geiwgeW91IG11c3QgcHV0IGl0IGluc2lkZSBhIEJvZHkgYW5kIHJvdGF0ZSB0aGF0IGJvZHkuIFNlZSB0aGUgZGVtb3MuCiAgICogQGV4YW1wbGUKICAgKiAgICAgY29uc3QgcGxhbmVTaGFwZSA9IG5ldyBDQU5OT04uUGxhbmUoKQogICAqICAgICBjb25zdCBwbGFuZUJvZHkgPSBuZXcgQ0FOTk9OLkJvZHkoeyBtYXNzOiAwLCBzaGFwZTogIHBsYW5lU2hhcGUgfSkKICAgKiAgICAgcGxhbmVCb2R5LnF1YXRlcm5pb24uc2V0RnJvbUV1bGVyKC1NYXRoLlBJIC8gMiwgMCwgMCkgLy8gbWFrZSBpdCBmYWNlIHVwCiAgICogICAgIHdvcmxkLmFkZEJvZHkocGxhbmVCb2R5KQogICAqLwoKCiAgY2xhc3MgUGxhbmUgZXh0ZW5kcyBTaGFwZSB7CiAgICAvKiogd29ybGROb3JtYWwgKi8KCiAgICAvKiogd29ybGROb3JtYWxOZWVkc1VwZGF0ZSAqLwogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHN1cGVyKHsKICAgICAgICB0eXBlOiBTaGFwZS50eXBlcy5QTEFORQogICAgICB9KTsgLy8gV29ybGQgb3JpZW50ZWQgbm9ybWFsCgogICAgICB0aGlzLndvcmxkTm9ybWFsID0gdm9pZCAwOwogICAgICB0aGlzLndvcmxkTm9ybWFsTmVlZHNVcGRhdGUgPSB2b2lkIDA7CiAgICAgIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgPSB2b2lkIDA7CiAgICAgIHRoaXMud29ybGROb3JtYWwgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLndvcmxkTm9ybWFsTmVlZHNVcGRhdGUgPSB0cnVlOwogICAgICB0aGlzLmJvdW5kaW5nU3BoZXJlUmFkaXVzID0gTnVtYmVyLk1BWF9WQUxVRTsKICAgIH0KICAgIC8qKiBjb21wdXRlV29ybGROb3JtYWwgKi8KCgogICAgY29tcHV0ZVdvcmxkTm9ybWFsKHF1YXQpIHsKICAgICAgY29uc3QgbiA9IHRoaXMud29ybGROb3JtYWw7CiAgICAgIG4uc2V0KDAsIDAsIDEpOwogICAgICBxdWF0LnZtdWx0KG4sIG4pOwogICAgICB0aGlzLndvcmxkTm9ybWFsTmVlZHNVcGRhdGUgPSBmYWxzZTsKICAgIH0KCiAgICBjYWxjdWxhdGVMb2NhbEluZXJ0aWEobWFzcywgdGFyZ2V0ID0gbmV3IFZlYzMoKSkgewogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQoKICAgIHZvbHVtZSgpIHsKICAgICAgcmV0dXJuICgvLyBUaGUgcGxhbmUgaXMgaW5maW5pdGUuLi4KICAgICAgICBOdW1iZXIuTUFYX1ZBTFVFCiAgICAgICk7CiAgICB9CgogICAgY2FsY3VsYXRlV29ybGRBQUJCKHBvcywgcXVhdCwgbWluLCBtYXgpIHsKICAgICAgLy8gVGhlIHBsYW5lIEFBQkIgaXMgaW5maW5pdGUsIGV4Y2VwdCBpZiB0aGUgbm9ybWFsIGlzIHBvaW50aW5nIGFsb25nIGFueSBheGlzCiAgICAgIHRlbXBOb3JtYWwuc2V0KDAsIDAsIDEpOyAvLyBEZWZhdWx0IHBsYW5lIG5vcm1hbCBpcyB6CgogICAgICBxdWF0LnZtdWx0KHRlbXBOb3JtYWwsIHRlbXBOb3JtYWwpOwogICAgICBjb25zdCBtYXhWYWwgPSBOdW1iZXIuTUFYX1ZBTFVFOwogICAgICBtaW4uc2V0KC1tYXhWYWwsIC1tYXhWYWwsIC1tYXhWYWwpOwogICAgICBtYXguc2V0KG1heFZhbCwgbWF4VmFsLCBtYXhWYWwpOwoKICAgICAgaWYgKHRlbXBOb3JtYWwueCA9PT0gMSkgewogICAgICAgIG1heC54ID0gcG9zLng7CiAgICAgIH0gZWxzZSBpZiAodGVtcE5vcm1hbC54ID09PSAtMSkgewogICAgICAgIG1pbi54ID0gcG9zLng7CiAgICAgIH0KCiAgICAgIGlmICh0ZW1wTm9ybWFsLnkgPT09IDEpIHsKICAgICAgICBtYXgueSA9IHBvcy55OwogICAgICB9IGVsc2UgaWYgKHRlbXBOb3JtYWwueSA9PT0gLTEpIHsKICAgICAgICBtaW4ueSA9IHBvcy55OwogICAgICB9CgogICAgICBpZiAodGVtcE5vcm1hbC56ID09PSAxKSB7CiAgICAgICAgbWF4LnogPSBwb3MuejsKICAgICAgfSBlbHNlIGlmICh0ZW1wTm9ybWFsLnogPT09IC0xKSB7CiAgICAgICAgbWluLnogPSBwb3MuejsKICAgICAgfQogICAgfQoKICAgIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCkgewogICAgICB0aGlzLmJvdW5kaW5nU3BoZXJlUmFkaXVzID0gTnVtYmVyLk1BWF9WQUxVRTsKICAgIH0KCiAgfQoKICBjb25zdCB0ZW1wTm9ybWFsID0gbmV3IFZlYzMoKTsKICAvKioKICAgKiBIZWlnaHRmaWVsZCBzaGFwZSBjbGFzcy4gSGVpZ2h0IGRhdGEgaXMgZ2l2ZW4gYXMgYW4gYXJyYXkuIFRoZXNlIGRhdGEgcG9pbnRzIGFyZSBzcHJlYWQgb3V0IGV2ZW5seSB3aXRoIGEgZ2l2ZW4gZGlzdGFuY2UuCiAgICogQHRvZG8gU2hvdWxkIGJlIHBvc3NpYmxlIHRvIHVzZSBhbG9uZyBhbGwgYXhlcywgbm90IGp1c3QgeQogICAqIEB0b2RvIHNob3VsZCBiZSBwb3NzaWJsZSB0byBzY2FsZSBhbG9uZyBhbGwgYXhlcwogICAqIEB0b2RvIFJlZmFjdG9yIGVsZW1lbnRTaXplIHRvIGVsZW1lbnRTaXplWCBhbmQgZWxlbWVudFNpemVZCiAgICoKICAgKiBAZXhhbXBsZQogICAqICAgICAvLyBHZW5lcmF0ZSBzb21lIGhlaWdodCBkYXRhICh5LXZhbHVlcykuCiAgICogICAgIGNvbnN0IGRhdGEgPSBbXQogICAqICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwMDA7IGkrKykgewogICAqICAgICAgICAgY29uc3QgeSA9IDAuNSAqIE1hdGguY29zKDAuMiAqIGkpCiAgICogICAgICAgICBkYXRhLnB1c2goeSkKICAgKiAgICAgfQogICAqCiAgICogICAgIC8vIENyZWF0ZSB0aGUgaGVpZ2h0ZmllbGQgc2hhcGUKICAgKiAgICAgY29uc3QgaGVpZ2h0ZmllbGRTaGFwZSA9IG5ldyBDQU5OT04uSGVpZ2h0ZmllbGQoZGF0YSwgewogICAqICAgICAgICAgZWxlbWVudFNpemU6IDEgLy8gRGlzdGFuY2UgYmV0d2VlbiB0aGUgZGF0YSBwb2ludHMgaW4gWCBhbmQgWSBkaXJlY3Rpb25zCiAgICogICAgIH0pCiAgICogICAgIGNvbnN0IGhlaWdodGZpZWxkQm9keSA9IG5ldyBDQU5OT04uQm9keSh7IHNoYXBlOiBoZWlnaHRmaWVsZFNoYXBlIH0pCiAgICogICAgIHdvcmxkLmFkZEJvZHkoaGVpZ2h0ZmllbGRCb2R5KQogICAqLwoKICBjbGFzcyBIZWlnaHRmaWVsZCBleHRlbmRzIFNoYXBlIHsKICAgIC8qKgogICAgICogQW4gYXJyYXkgb2YgbnVtYmVycywgb3IgaGVpZ2h0IHZhbHVlcywgdGhhdCBhcmUgc3ByZWFkIG91dCBhbG9uZyB0aGUgeCBheGlzLgogICAgICovCgogICAgLyoqCiAgICAgKiBNYXggdmFsdWUgb2YgdGhlIGRhdGEgcG9pbnRzIGluIHRoZSBkYXRhIGFycmF5LgogICAgICovCgogICAgLyoqCiAgICAgKiBNaW5pbXVtIHZhbHVlIG9mIHRoZSBkYXRhIHBvaW50cyBpbiB0aGUgZGF0YSBhcnJheS4KICAgICAqLwoKICAgIC8qKgogICAgICogV29ybGQgc3BhY2luZyBiZXR3ZWVuIHRoZSBkYXRhIHBvaW50cyBpbiBYIGFuZCBZIGRpcmVjdGlvbi4KICAgICAqIEB0b2RvIGVsZW1lbnRTaXplWCBhbmQgWQogICAgICogQGRlZmF1bHQgMQogICAgICovCgogICAgLyoqCiAgICAgKiBAZGVmYXVsdCB0cnVlCiAgICAgKi8KCiAgICAvKioKICAgICAqIEBwYXJhbSBkYXRhIEFuIGFycmF5IG9mIG51bWJlcnMsIG9yIGhlaWdodCB2YWx1ZXMsIHRoYXQgYXJlIHNwcmVhZCBvdXQgYWxvbmcgdGhlIHggYXhpcy4KICAgICAqLwogICAgY29uc3RydWN0b3IoZGF0YSwgb3B0aW9ucyA9IHt9KSB7CiAgICAgIG9wdGlvbnMgPSBVdGlscy5kZWZhdWx0cyhvcHRpb25zLCB7CiAgICAgICAgbWF4VmFsdWU6IG51bGwsCiAgICAgICAgbWluVmFsdWU6IG51bGwsCiAgICAgICAgZWxlbWVudFNpemU6IDEKICAgICAgfSk7CiAgICAgIHN1cGVyKHsKICAgICAgICB0eXBlOiBTaGFwZS50eXBlcy5IRUlHSFRGSUVMRAogICAgICB9KTsKICAgICAgdGhpcy5kYXRhID0gdm9pZCAwOwogICAgICB0aGlzLm1heFZhbHVlID0gdm9pZCAwOwogICAgICB0aGlzLm1pblZhbHVlID0gdm9pZCAwOwogICAgICB0aGlzLmVsZW1lbnRTaXplID0gdm9pZCAwOwogICAgICB0aGlzLmNhY2hlRW5hYmxlZCA9IHZvaWQgMDsKICAgICAgdGhpcy5waWxsYXJDb252ZXggPSB2b2lkIDA7CiAgICAgIHRoaXMucGlsbGFyT2Zmc2V0ID0gdm9pZCAwOwogICAgICB0aGlzLl9jYWNoZWRQaWxsYXJzID0gdm9pZCAwOwogICAgICB0aGlzLmRhdGEgPSBkYXRhOwogICAgICB0aGlzLm1heFZhbHVlID0gb3B0aW9ucy5tYXhWYWx1ZTsKICAgICAgdGhpcy5taW5WYWx1ZSA9IG9wdGlvbnMubWluVmFsdWU7CiAgICAgIHRoaXMuZWxlbWVudFNpemUgPSBvcHRpb25zLmVsZW1lbnRTaXplOwoKICAgICAgaWYgKG9wdGlvbnMubWluVmFsdWUgPT09IG51bGwpIHsKICAgICAgICB0aGlzLnVwZGF0ZU1pblZhbHVlKCk7CiAgICAgIH0KCiAgICAgIGlmIChvcHRpb25zLm1heFZhbHVlID09PSBudWxsKSB7CiAgICAgICAgdGhpcy51cGRhdGVNYXhWYWx1ZSgpOwogICAgICB9CgogICAgICB0aGlzLmNhY2hlRW5hYmxlZCA9IHRydWU7CiAgICAgIHRoaXMucGlsbGFyQ29udmV4ID0gbmV3IENvbnZleFBvbHloZWRyb24oKTsKICAgICAgdGhpcy5waWxsYXJPZmZzZXQgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLnVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCk7IC8vICJpX2pfaXNVcHBlciIgPT4geyBjb252ZXg6IC4uLiwgb2Zmc2V0OiAuLi4gfQogICAgICAvLyBmb3IgZXhhbXBsZToKICAgICAgLy8gX2NhY2hlZFBpbGxhcnNbIjBfMl8xIl0KCiAgICAgIHRoaXMuX2NhY2hlZFBpbGxhcnMgPSB7fTsKICAgIH0KICAgIC8qKgogICAgICogQ2FsbCB3aGVuZXZlciB5b3UgY2hhbmdlIHRoZSBkYXRhIGFycmF5LgogICAgICovCgoKICAgIHVwZGF0ZSgpIHsKICAgICAgdGhpcy5fY2FjaGVkUGlsbGFycyA9IHt9OwogICAgfQogICAgLyoqCiAgICAgKiBVcGRhdGUgdGhlIGBtaW5WYWx1ZWAgcHJvcGVydHkKICAgICAqLwoKCiAgICB1cGRhdGVNaW5WYWx1ZSgpIHsKICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTsKICAgICAgbGV0IG1pblZhbHVlID0gZGF0YVswXVswXTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBkYXRhLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogIT09IGRhdGFbaV0ubGVuZ3RoOyBqKyspIHsKICAgICAgICAgIGNvbnN0IHYgPSBkYXRhW2ldW2pdOwoKICAgICAgICAgIGlmICh2IDwgbWluVmFsdWUpIHsKICAgICAgICAgICAgbWluVmFsdWUgPSB2OwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5taW5WYWx1ZSA9IG1pblZhbHVlOwogICAgfQogICAgLyoqCiAgICAgKiBVcGRhdGUgdGhlIGBtYXhWYWx1ZWAgcHJvcGVydHkKICAgICAqLwoKCiAgICB1cGRhdGVNYXhWYWx1ZSgpIHsKICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTsKICAgICAgbGV0IG1heFZhbHVlID0gZGF0YVswXVswXTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBkYXRhLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogIT09IGRhdGFbaV0ubGVuZ3RoOyBqKyspIHsKICAgICAgICAgIGNvbnN0IHYgPSBkYXRhW2ldW2pdOwoKICAgICAgICAgIGlmICh2ID4gbWF4VmFsdWUpIHsKICAgICAgICAgICAgbWF4VmFsdWUgPSB2OwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5tYXhWYWx1ZSA9IG1heFZhbHVlOwogICAgfQogICAgLyoqCiAgICAgKiBTZXQgdGhlIGhlaWdodCB2YWx1ZSBhdCBhbiBpbmRleC4gRG9uJ3QgZm9yZ2V0IHRvIHVwZGF0ZSBtYXhWYWx1ZSBhbmQgbWluVmFsdWUgYWZ0ZXIgeW91J3JlIGRvbmUuCiAgICAgKi8KCgogICAgc2V0SGVpZ2h0VmFsdWVBdEluZGV4KHhpLCB5aSwgdmFsdWUpIHsKICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTsKICAgICAgZGF0YVt4aV1beWldID0gdmFsdWU7IC8vIEludmFsaWRhdGUgY2FjaGUKCiAgICAgIHRoaXMuY2xlYXJDYWNoZWRDb252ZXhUcmlhbmdsZVBpbGxhcih4aSwgeWksIGZhbHNlKTsKCiAgICAgIGlmICh4aSA+IDApIHsKICAgICAgICB0aGlzLmNsZWFyQ2FjaGVkQ29udmV4VHJpYW5nbGVQaWxsYXIoeGkgLSAxLCB5aSwgdHJ1ZSk7CiAgICAgICAgdGhpcy5jbGVhckNhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpIC0gMSwgeWksIGZhbHNlKTsKICAgICAgfQoKICAgICAgaWYgKHlpID4gMCkgewogICAgICAgIHRoaXMuY2xlYXJDYWNoZWRDb252ZXhUcmlhbmdsZVBpbGxhcih4aSwgeWkgLSAxLCB0cnVlKTsKICAgICAgICB0aGlzLmNsZWFyQ2FjaGVkQ29udmV4VHJpYW5nbGVQaWxsYXIoeGksIHlpIC0gMSwgZmFsc2UpOwogICAgICB9CgogICAgICBpZiAoeWkgPiAwICYmIHhpID4gMCkgewogICAgICAgIHRoaXMuY2xlYXJDYWNoZWRDb252ZXhUcmlhbmdsZVBpbGxhcih4aSAtIDEsIHlpIC0gMSwgdHJ1ZSk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogR2V0IG1heC9taW4gaW4gYSByZWN0YW5nbGUgaW4gdGhlIG1hdHJpeCBkYXRhCiAgICAgKiBAcGFyYW0gcmVzdWx0IEFuIGFycmF5IHRvIHN0b3JlIHRoZSByZXN1bHRzIGluLgogICAgICogQHJldHVybiBUaGUgcmVzdWx0IGFycmF5LCBpZiBpdCB3YXMgcGFzc2VkIGluLiBNaW5pbXVtIHdpbGwgYmUgYXQgcG9zaXRpb24gMCBhbmQgbWF4IGF0IDEuCiAgICAgKi8KCgogICAgZ2V0UmVjdE1pbk1heChpTWluWCwgaU1pblksIGlNYXhYLCBpTWF4WSwgcmVzdWx0ID0gW10pIHsKICAgICAgLy8gR2V0IG1heCBhbmQgbWluIG9mIHRoZSBkYXRhCiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7IC8vIFNldCBmaXJzdCB2YWx1ZQoKICAgICAgbGV0IG1heCA9IHRoaXMubWluVmFsdWU7CgogICAgICBmb3IgKGxldCBpID0gaU1pblg7IGkgPD0gaU1heFg7IGkrKykgewogICAgICAgIGZvciAobGV0IGogPSBpTWluWTsgaiA8PSBpTWF4WTsgaisrKSB7CiAgICAgICAgICBjb25zdCBoZWlnaHQgPSBkYXRhW2ldW2pdOwoKICAgICAgICAgIGlmIChoZWlnaHQgPiBtYXgpIHsKICAgICAgICAgICAgbWF4ID0gaGVpZ2h0OwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgcmVzdWx0WzBdID0gdGhpcy5taW5WYWx1ZTsKICAgICAgcmVzdWx0WzFdID0gbWF4OwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIGluZGV4IG9mIGEgbG9jYWwgcG9zaXRpb24gb24gdGhlIGhlaWdodGZpZWxkLiBUaGUgaW5kZXhlcyBpbmRpY2F0ZSB0aGUgcmVjdGFuZ2xlcywgc28gaWYgeW91ciB0ZXJyYWluIGlzIG1hZGUgb2YgTiB4IE4gaGVpZ2h0IGRhdGEgcG9pbnRzLCB5b3Ugd2lsbCBoYXZlIHJlY3RhbmdsZSBpbmRleGVzIHJhbmdpbmcgZnJvbSAwIHRvIE4tMS4KICAgICAqIEBwYXJhbSByZXN1bHQgVHdvLWVsZW1lbnQgYXJyYXkKICAgICAqIEBwYXJhbSBjbGFtcCBJZiB0aGUgcG9zaXRpb24gc2hvdWxkIGJlIGNsYW1wZWQgdG8gdGhlIGhlaWdodGZpZWxkIGVkZ2UuCiAgICAgKi8KCgogICAgZ2V0SW5kZXhPZlBvc2l0aW9uKHgsIHksIHJlc3VsdCwgY2xhbXApIHsKICAgICAgLy8gR2V0IHRoZSBpbmRleCBvZiB0aGUgZGF0YSBwb2ludHMgdG8gdGVzdCBhZ2FpbnN0CiAgICAgIGNvbnN0IHcgPSB0aGlzLmVsZW1lbnRTaXplOwogICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhOwogICAgICBsZXQgeGkgPSBNYXRoLmZsb29yKHggLyB3KTsKICAgICAgbGV0IHlpID0gTWF0aC5mbG9vcih5IC8gdyk7CiAgICAgIHJlc3VsdFswXSA9IHhpOwogICAgICByZXN1bHRbMV0gPSB5aTsKCiAgICAgIGlmIChjbGFtcCkgewogICAgICAgIC8vIENsYW1wIGluZGV4IHRvIGVkZ2VzCiAgICAgICAgaWYgKHhpIDwgMCkgewogICAgICAgICAgeGkgPSAwOwogICAgICAgIH0KCiAgICAgICAgaWYgKHlpIDwgMCkgewogICAgICAgICAgeWkgPSAwOwogICAgICAgIH0KCiAgICAgICAgaWYgKHhpID49IGRhdGEubGVuZ3RoIC0gMSkgewogICAgICAgICAgeGkgPSBkYXRhLmxlbmd0aCAtIDE7CiAgICAgICAgfQoKICAgICAgICBpZiAoeWkgPj0gZGF0YVswXS5sZW5ndGggLSAxKSB7CiAgICAgICAgICB5aSA9IGRhdGFbMF0ubGVuZ3RoIC0gMTsKICAgICAgICB9CiAgICAgIH0gLy8gQmFpbCBvdXQgaWYgd2UgYXJlIG91dCBvZiB0aGUgdGVycmFpbgoKCiAgICAgIGlmICh4aSA8IDAgfHwgeWkgPCAwIHx8IHhpID49IGRhdGEubGVuZ3RoIC0gMSB8fCB5aSA+PSBkYXRhWzBdLmxlbmd0aCAtIDEpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGdldFRyaWFuZ2xlQXQoeCwgeSwgZWRnZUNsYW1wLCBhLCBiLCBjKSB7CiAgICAgIGNvbnN0IGlkeCA9IGdldEhlaWdodEF0X2lkeDsKICAgICAgdGhpcy5nZXRJbmRleE9mUG9zaXRpb24oeCwgeSwgaWR4LCBlZGdlQ2xhbXApOwogICAgICBsZXQgeGkgPSBpZHhbMF07CiAgICAgIGxldCB5aSA9IGlkeFsxXTsKICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTsKCiAgICAgIGlmIChlZGdlQ2xhbXApIHsKICAgICAgICB4aSA9IE1hdGgubWluKGRhdGEubGVuZ3RoIC0gMiwgTWF0aC5tYXgoMCwgeGkpKTsKICAgICAgICB5aSA9IE1hdGgubWluKGRhdGFbMF0ubGVuZ3RoIC0gMiwgTWF0aC5tYXgoMCwgeWkpKTsKICAgICAgfQoKICAgICAgY29uc3QgZWxlbWVudFNpemUgPSB0aGlzLmVsZW1lbnRTaXplOwogICAgICBjb25zdCBsb3dlckRpc3QyID0gKHggLyBlbGVtZW50U2l6ZSAtIHhpKSAqKiAyICsgKHkgLyBlbGVtZW50U2l6ZSAtIHlpKSAqKiAyOwogICAgICBjb25zdCB1cHBlckRpc3QyID0gKHggLyBlbGVtZW50U2l6ZSAtICh4aSArIDEpKSAqKiAyICsgKHkgLyBlbGVtZW50U2l6ZSAtICh5aSArIDEpKSAqKiAyOwogICAgICBjb25zdCB1cHBlciA9IGxvd2VyRGlzdDIgPiB1cHBlckRpc3QyOwogICAgICB0aGlzLmdldFRyaWFuZ2xlKHhpLCB5aSwgdXBwZXIsIGEsIGIsIGMpOwogICAgICByZXR1cm4gdXBwZXI7CiAgICB9CgogICAgZ2V0Tm9ybWFsQXQoeCwgeSwgZWRnZUNsYW1wLCByZXN1bHQpIHsKICAgICAgY29uc3QgYSA9IGdldE5vcm1hbEF0X2E7CiAgICAgIGNvbnN0IGIgPSBnZXROb3JtYWxBdF9iOwogICAgICBjb25zdCBjID0gZ2V0Tm9ybWFsQXRfYzsKICAgICAgY29uc3QgZTAgPSBnZXROb3JtYWxBdF9lMDsKICAgICAgY29uc3QgZTEgPSBnZXROb3JtYWxBdF9lMTsKICAgICAgdGhpcy5nZXRUcmlhbmdsZUF0KHgsIHksIGVkZ2VDbGFtcCwgYSwgYiwgYyk7CiAgICAgIGIudnN1YihhLCBlMCk7CiAgICAgIGMudnN1YihhLCBlMSk7CiAgICAgIGUwLmNyb3NzKGUxLCByZXN1bHQpOwogICAgICByZXN1bHQubm9ybWFsaXplKCk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhbiBBQUJCIG9mIGEgc3F1YXJlIGluIHRoZSBoZWlnaHRmaWVsZAogICAgICogQHBhcmFtIHhpCiAgICAgKiBAcGFyYW0geWkKICAgICAqIEBwYXJhbSByZXN1bHQKICAgICAqLwoKCiAgICBnZXRBYWJiQXRJbmRleCh4aSwgeWksIHsKICAgICAgbG93ZXJCb3VuZCwKICAgICAgdXBwZXJCb3VuZAogICAgfSkgewogICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhOwogICAgICBjb25zdCBlbGVtZW50U2l6ZSA9IHRoaXMuZWxlbWVudFNpemU7CiAgICAgIGxvd2VyQm91bmQuc2V0KHhpICogZWxlbWVudFNpemUsIHlpICogZWxlbWVudFNpemUsIGRhdGFbeGldW3lpXSk7CiAgICAgIHVwcGVyQm91bmQuc2V0KCh4aSArIDEpICogZWxlbWVudFNpemUsICh5aSArIDEpICogZWxlbWVudFNpemUsIGRhdGFbeGkgKyAxXVt5aSArIDFdKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSBoZWlnaHQgaW4gdGhlIGhlaWdodGZpZWxkIGF0IGEgZ2l2ZW4gcG9zaXRpb24KICAgICAqLwoKCiAgICBnZXRIZWlnaHRBdCh4LCB5LCBlZGdlQ2xhbXApIHsKICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTsKICAgICAgY29uc3QgYSA9IGdldEhlaWdodEF0X2E7CiAgICAgIGNvbnN0IGIgPSBnZXRIZWlnaHRBdF9iOwogICAgICBjb25zdCBjID0gZ2V0SGVpZ2h0QXRfYzsKICAgICAgY29uc3QgaWR4ID0gZ2V0SGVpZ2h0QXRfaWR4OwogICAgICB0aGlzLmdldEluZGV4T2ZQb3NpdGlvbih4LCB5LCBpZHgsIGVkZ2VDbGFtcCk7CiAgICAgIGxldCB4aSA9IGlkeFswXTsKICAgICAgbGV0IHlpID0gaWR4WzFdOwoKICAgICAgaWYgKGVkZ2VDbGFtcCkgewogICAgICAgIHhpID0gTWF0aC5taW4oZGF0YS5sZW5ndGggLSAyLCBNYXRoLm1heCgwLCB4aSkpOwogICAgICAgIHlpID0gTWF0aC5taW4oZGF0YVswXS5sZW5ndGggLSAyLCBNYXRoLm1heCgwLCB5aSkpOwogICAgICB9CgogICAgICBjb25zdCB1cHBlciA9IHRoaXMuZ2V0VHJpYW5nbGVBdCh4LCB5LCBlZGdlQ2xhbXAsIGEsIGIsIGMpOwogICAgICBiYXJ5Y2VudHJpY1dlaWdodHMoeCwgeSwgYS54LCBhLnksIGIueCwgYi55LCBjLngsIGMueSwgZ2V0SGVpZ2h0QXRfd2VpZ2h0cyk7CiAgICAgIGNvbnN0IHcgPSBnZXRIZWlnaHRBdF93ZWlnaHRzOwoKICAgICAgaWYgKHVwcGVyKSB7CiAgICAgICAgLy8gVG9wIHRyaWFuZ2xlIHZlcnRzCiAgICAgICAgcmV0dXJuIGRhdGFbeGkgKyAxXVt5aSArIDFdICogdy54ICsgZGF0YVt4aV1beWkgKyAxXSAqIHcueSArIGRhdGFbeGkgKyAxXVt5aV0gKiB3Lno7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gVG9wIHRyaWFuZ2xlIHZlcnRzCiAgICAgICAgcmV0dXJuIGRhdGFbeGldW3lpXSAqIHcueCArIGRhdGFbeGkgKyAxXVt5aV0gKiB3LnkgKyBkYXRhW3hpXVt5aSArIDFdICogdy56OwogICAgICB9CiAgICB9CgogICAgZ2V0Q2FjaGVDb252ZXhUcmlhbmdsZVBpbGxhcktleSh4aSwgeWksIGdldFVwcGVyVHJpYW5nbGUpIHsKICAgICAgcmV0dXJuIHhpICsgIl8iICsgeWkgKyAiXyIgKyAoZ2V0VXBwZXJUcmlhbmdsZSA/IDEgOiAwKTsKICAgIH0KCiAgICBnZXRDYWNoZWRDb252ZXhUcmlhbmdsZVBpbGxhcih4aSwgeWksIGdldFVwcGVyVHJpYW5nbGUpIHsKICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZFBpbGxhcnNbdGhpcy5nZXRDYWNoZUNvbnZleFRyaWFuZ2xlUGlsbGFyS2V5KHhpLCB5aSwgZ2V0VXBwZXJUcmlhbmdsZSldOwogICAgfQoKICAgIHNldENhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpLCB5aSwgZ2V0VXBwZXJUcmlhbmdsZSwgY29udmV4LCBvZmZzZXQpIHsKICAgICAgdGhpcy5fY2FjaGVkUGlsbGFyc1t0aGlzLmdldENhY2hlQ29udmV4VHJpYW5nbGVQaWxsYXJLZXkoeGksIHlpLCBnZXRVcHBlclRyaWFuZ2xlKV0gPSB7CiAgICAgICAgY29udmV4LAogICAgICAgIG9mZnNldAogICAgICB9OwogICAgfQoKICAgIGNsZWFyQ2FjaGVkQ29udmV4VHJpYW5nbGVQaWxsYXIoeGksIHlpLCBnZXRVcHBlclRyaWFuZ2xlKSB7CiAgICAgIGRlbGV0ZSB0aGlzLl9jYWNoZWRQaWxsYXJzW3RoaXMuZ2V0Q2FjaGVDb252ZXhUcmlhbmdsZVBpbGxhcktleSh4aSwgeWksIGdldFVwcGVyVHJpYW5nbGUpXTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IGEgdHJpYW5nbGUgZnJvbSB0aGUgaGVpZ2h0ZmllbGQKICAgICAqLwoKCiAgICBnZXRUcmlhbmdsZSh4aSwgeWksIHVwcGVyLCBhLCBiLCBjKSB7CiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7CiAgICAgIGNvbnN0IGVsZW1lbnRTaXplID0gdGhpcy5lbGVtZW50U2l6ZTsKCiAgICAgIGlmICh1cHBlcikgewogICAgICAgIC8vIFRvcCB0cmlhbmdsZSB2ZXJ0cwogICAgICAgIGEuc2V0KCh4aSArIDEpICogZWxlbWVudFNpemUsICh5aSArIDEpICogZWxlbWVudFNpemUsIGRhdGFbeGkgKyAxXVt5aSArIDFdKTsKICAgICAgICBiLnNldCh4aSAqIGVsZW1lbnRTaXplLCAoeWkgKyAxKSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpXVt5aSArIDFdKTsKICAgICAgICBjLnNldCgoeGkgKyAxKSAqIGVsZW1lbnRTaXplLCB5aSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpICsgMV1beWldKTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBUb3AgdHJpYW5nbGUgdmVydHMKICAgICAgICBhLnNldCh4aSAqIGVsZW1lbnRTaXplLCB5aSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpXVt5aV0pOwogICAgICAgIGIuc2V0KCh4aSArIDEpICogZWxlbWVudFNpemUsIHlpICogZWxlbWVudFNpemUsIGRhdGFbeGkgKyAxXVt5aV0pOwogICAgICAgIGMuc2V0KHhpICogZWxlbWVudFNpemUsICh5aSArIDEpICogZWxlbWVudFNpemUsIGRhdGFbeGldW3lpICsgMV0pOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhIHRyaWFuZ2xlIGluIHRoZSB0ZXJyYWluIGluIHRoZSBmb3JtIG9mIGEgdHJpYW5ndWxhciBjb252ZXggc2hhcGUuCiAgICAgKi8KCgogICAgZ2V0Q29udmV4VHJpYW5nbGVQaWxsYXIoeGksIHlpLCBnZXRVcHBlclRyaWFuZ2xlKSB7CiAgICAgIGxldCByZXN1bHQgPSB0aGlzLnBpbGxhckNvbnZleDsKICAgICAgbGV0IG9mZnNldFJlc3VsdCA9IHRoaXMucGlsbGFyT2Zmc2V0OwoKICAgICAgaWYgKHRoaXMuY2FjaGVFbmFibGVkKSB7CiAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZ2V0Q2FjaGVkQ29udmV4VHJpYW5nbGVQaWxsYXIoeGksIHlpLCBnZXRVcHBlclRyaWFuZ2xlKTsKCiAgICAgICAgaWYgKGRhdGEpIHsKICAgICAgICAgIHRoaXMucGlsbGFyQ29udmV4ID0gZGF0YS5jb252ZXg7CiAgICAgICAgICB0aGlzLnBpbGxhck9mZnNldCA9IGRhdGEub2Zmc2V0OwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgcmVzdWx0ID0gbmV3IENvbnZleFBvbHloZWRyb24oKTsKICAgICAgICBvZmZzZXRSZXN1bHQgPSBuZXcgVmVjMygpOwogICAgICAgIHRoaXMucGlsbGFyQ29udmV4ID0gcmVzdWx0OwogICAgICAgIHRoaXMucGlsbGFyT2Zmc2V0ID0gb2Zmc2V0UmVzdWx0OwogICAgICB9CgogICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhOwogICAgICBjb25zdCBlbGVtZW50U2l6ZSA9IHRoaXMuZWxlbWVudFNpemU7CiAgICAgIGNvbnN0IGZhY2VzID0gcmVzdWx0LmZhY2VzOyAvLyBSZXVzZSB2ZXJ0cyBpZiBwb3NzaWJsZQoKICAgICAgcmVzdWx0LnZlcnRpY2VzLmxlbmd0aCA9IDY7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDY7IGkrKykgewogICAgICAgIGlmICghcmVzdWx0LnZlcnRpY2VzW2ldKSB7CiAgICAgICAgICByZXN1bHQudmVydGljZXNbaV0gPSBuZXcgVmVjMygpOwogICAgICAgIH0KICAgICAgfSAvLyBSZXVzZSBmYWNlcyBpZiBwb3NzaWJsZQoKCiAgICAgIGZhY2VzLmxlbmd0aCA9IDU7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDU7IGkrKykgewogICAgICAgIGlmICghZmFjZXNbaV0pIHsKICAgICAgICAgIGZhY2VzW2ldID0gW107CiAgICAgICAgfQogICAgICB9CgogICAgICBjb25zdCB2ZXJ0cyA9IHJlc3VsdC52ZXJ0aWNlczsKICAgICAgY29uc3QgaCA9IChNYXRoLm1pbihkYXRhW3hpXVt5aV0sIGRhdGFbeGkgKyAxXVt5aV0sIGRhdGFbeGldW3lpICsgMV0sIGRhdGFbeGkgKyAxXVt5aSArIDFdKSAtIHRoaXMubWluVmFsdWUpIC8gMiArIHRoaXMubWluVmFsdWU7CgogICAgICBpZiAoIWdldFVwcGVyVHJpYW5nbGUpIHsKICAgICAgICAvLyBDZW50ZXIgb2YgdGhlIHRyaWFuZ2xlIHBpbGxhciAtIGFsbCBwb2x5Z29ucyBhcmUgZ2l2ZW4gcmVsYXRpdmUgdG8gdGhpcyBvbmUKICAgICAgICBvZmZzZXRSZXN1bHQuc2V0KCh4aSArIDAuMjUpICogZWxlbWVudFNpemUsIC8vIHNvcnQgb2YgY2VudGVyIG9mIGEgdHJpYW5nbGUKICAgICAgICAoeWkgKyAwLjI1KSAqIGVsZW1lbnRTaXplLCBoIC8vIHZlcnRpY2FsIGNlbnRlcgogICAgICAgICk7IC8vIFRvcCB0cmlhbmdsZSB2ZXJ0cwoKICAgICAgICB2ZXJ0c1swXS5zZXQoLTAuMjUgKiBlbGVtZW50U2l6ZSwgLTAuMjUgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aV1beWldIC0gaCk7CiAgICAgICAgdmVydHNbMV0uc2V0KDAuNzUgKiBlbGVtZW50U2l6ZSwgLTAuMjUgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aSArIDFdW3lpXSAtIGgpOwogICAgICAgIHZlcnRzWzJdLnNldCgtMC4yNSAqIGVsZW1lbnRTaXplLCAwLjc1ICogZWxlbWVudFNpemUsIGRhdGFbeGldW3lpICsgMV0gLSBoKTsgLy8gYm90dG9tIHRyaWFuZ2xlIHZlcnRzCgogICAgICAgIHZlcnRzWzNdLnNldCgtMC4yNSAqIGVsZW1lbnRTaXplLCAtMC4yNSAqIGVsZW1lbnRTaXplLCAtTWF0aC5hYnMoaCkgLSAxKTsKICAgICAgICB2ZXJ0c1s0XS5zZXQoMC43NSAqIGVsZW1lbnRTaXplLCAtMC4yNSAqIGVsZW1lbnRTaXplLCAtTWF0aC5hYnMoaCkgLSAxKTsKICAgICAgICB2ZXJ0c1s1XS5zZXQoLTAuMjUgKiBlbGVtZW50U2l6ZSwgMC43NSAqIGVsZW1lbnRTaXplLCAtTWF0aC5hYnMoaCkgLSAxKTsgLy8gdG9wIHRyaWFuZ2xlCgogICAgICAgIGZhY2VzWzBdWzBdID0gMDsKICAgICAgICBmYWNlc1swXVsxXSA9IDE7CiAgICAgICAgZmFjZXNbMF1bMl0gPSAyOyAvLyBib3R0b20gdHJpYW5nbGUKCiAgICAgICAgZmFjZXNbMV1bMF0gPSA1OwogICAgICAgIGZhY2VzWzFdWzFdID0gNDsKICAgICAgICBmYWNlc1sxXVsyXSA9IDM7IC8vIC14IGZhY2luZyBxdWFkCgogICAgICAgIGZhY2VzWzJdWzBdID0gMDsKICAgICAgICBmYWNlc1syXVsxXSA9IDI7CiAgICAgICAgZmFjZXNbMl1bMl0gPSA1OwogICAgICAgIGZhY2VzWzJdWzNdID0gMzsgLy8gLXkgZmFjaW5nIHF1YWQKCiAgICAgICAgZmFjZXNbM11bMF0gPSAxOwogICAgICAgIGZhY2VzWzNdWzFdID0gMDsKICAgICAgICBmYWNlc1szXVsyXSA9IDM7CiAgICAgICAgZmFjZXNbM11bM10gPSA0OyAvLyAreHkgZmFjaW5nIHF1YWQKCiAgICAgICAgZmFjZXNbNF1bMF0gPSA0OwogICAgICAgIGZhY2VzWzRdWzFdID0gNTsKICAgICAgICBmYWNlc1s0XVsyXSA9IDI7CiAgICAgICAgZmFjZXNbNF1bM10gPSAxOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIENlbnRlciBvZiB0aGUgdHJpYW5nbGUgcGlsbGFyIC0gYWxsIHBvbHlnb25zIGFyZSBnaXZlbiByZWxhdGl2ZSB0byB0aGlzIG9uZQogICAgICAgIG9mZnNldFJlc3VsdC5zZXQoKHhpICsgMC43NSkgKiBlbGVtZW50U2l6ZSwgLy8gc29ydCBvZiBjZW50ZXIgb2YgYSB0cmlhbmdsZQogICAgICAgICh5aSArIDAuNzUpICogZWxlbWVudFNpemUsIGggLy8gdmVydGljYWwgY2VudGVyCiAgICAgICAgKTsgLy8gVG9wIHRyaWFuZ2xlIHZlcnRzCgogICAgICAgIHZlcnRzWzBdLnNldCgwLjI1ICogZWxlbWVudFNpemUsIDAuMjUgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aSArIDFdW3lpICsgMV0gLSBoKTsKICAgICAgICB2ZXJ0c1sxXS5zZXQoLTAuNzUgKiBlbGVtZW50U2l6ZSwgMC4yNSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpXVt5aSArIDFdIC0gaCk7CiAgICAgICAgdmVydHNbMl0uc2V0KDAuMjUgKiBlbGVtZW50U2l6ZSwgLTAuNzUgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aSArIDFdW3lpXSAtIGgpOyAvLyBib3R0b20gdHJpYW5nbGUgdmVydHMKCiAgICAgICAgdmVydHNbM10uc2V0KDAuMjUgKiBlbGVtZW50U2l6ZSwgMC4yNSAqIGVsZW1lbnRTaXplLCAtTWF0aC5hYnMoaCkgLSAxKTsKICAgICAgICB2ZXJ0c1s0XS5zZXQoLTAuNzUgKiBlbGVtZW50U2l6ZSwgMC4yNSAqIGVsZW1lbnRTaXplLCAtTWF0aC5hYnMoaCkgLSAxKTsKICAgICAgICB2ZXJ0c1s1XS5zZXQoMC4yNSAqIGVsZW1lbnRTaXplLCAtMC43NSAqIGVsZW1lbnRTaXplLCAtTWF0aC5hYnMoaCkgLSAxKTsgLy8gVG9wIHRyaWFuZ2xlCgogICAgICAgIGZhY2VzWzBdWzBdID0gMDsKICAgICAgICBmYWNlc1swXVsxXSA9IDE7CiAgICAgICAgZmFjZXNbMF1bMl0gPSAyOyAvLyBib3R0b20gdHJpYW5nbGUKCiAgICAgICAgZmFjZXNbMV1bMF0gPSA1OwogICAgICAgIGZhY2VzWzFdWzFdID0gNDsKICAgICAgICBmYWNlc1sxXVsyXSA9IDM7IC8vICt4IGZhY2luZyBxdWFkCgogICAgICAgIGZhY2VzWzJdWzBdID0gMjsKICAgICAgICBmYWNlc1syXVsxXSA9IDU7CiAgICAgICAgZmFjZXNbMl1bMl0gPSAzOwogICAgICAgIGZhY2VzWzJdWzNdID0gMDsgLy8gK3kgZmFjaW5nIHF1YWQKCiAgICAgICAgZmFjZXNbM11bMF0gPSAzOwogICAgICAgIGZhY2VzWzNdWzFdID0gNDsKICAgICAgICBmYWNlc1szXVsyXSA9IDE7CiAgICAgICAgZmFjZXNbM11bM10gPSAwOyAvLyAteHkgZmFjaW5nIHF1YWQKCiAgICAgICAgZmFjZXNbNF1bMF0gPSAxOwogICAgICAgIGZhY2VzWzRdWzFdID0gNDsKICAgICAgICBmYWNlc1s0XVsyXSA9IDU7CiAgICAgICAgZmFjZXNbNF1bM10gPSAyOwogICAgICB9CgogICAgICByZXN1bHQuY29tcHV0ZU5vcm1hbHMoKTsKICAgICAgcmVzdWx0LmNvbXB1dGVFZGdlcygpOwogICAgICByZXN1bHQudXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKTsKICAgICAgdGhpcy5zZXRDYWNoZWRDb252ZXhUcmlhbmdsZVBpbGxhcih4aSwgeWksIGdldFVwcGVyVHJpYW5nbGUsIHJlc3VsdCwgb2Zmc2V0UmVzdWx0KTsKICAgIH0KCiAgICBjYWxjdWxhdGVMb2NhbEluZXJ0aWEobWFzcywgdGFyZ2V0ID0gbmV3IFZlYzMoKSkgewogICAgICB0YXJnZXQuc2V0KDAsIDAsIDApOwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQoKICAgIHZvbHVtZSgpIHsKICAgICAgcmV0dXJuICgvLyBUaGUgdGVycmFpbiBpcyBpbmZpbml0ZQogICAgICAgIE51bWJlci5NQVhfVkFMVUUKICAgICAgKTsKICAgIH0KCiAgICBjYWxjdWxhdGVXb3JsZEFBQkIocG9zLCBxdWF0LCBtaW4sIG1heCkgewogICAgICAvKiogQFRPRE8gZG8gaXQgcHJvcGVybHkgKi8KICAgICAgbWluLnNldCgtTnVtYmVyLk1BWF9WQUxVRSwgLU51bWJlci5NQVhfVkFMVUUsIC1OdW1iZXIuTUFYX1ZBTFVFKTsKICAgICAgbWF4LnNldChOdW1iZXIuTUFYX1ZBTFVFLCBOdW1iZXIuTUFYX1ZBTFVFLCBOdW1iZXIuTUFYX1ZBTFVFKTsKICAgIH0KCiAgICB1cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpIHsKICAgICAgLy8gVXNlIHRoZSBib3VuZGluZyBib3ggb2YgdGhlIG1pbi9tYXggdmFsdWVzCiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7CiAgICAgIGNvbnN0IHMgPSB0aGlzLmVsZW1lbnRTaXplOwogICAgICB0aGlzLmJvdW5kaW5nU3BoZXJlUmFkaXVzID0gbmV3IFZlYzMoZGF0YS5sZW5ndGggKiBzLCBkYXRhWzBdLmxlbmd0aCAqIHMsIE1hdGgubWF4KE1hdGguYWJzKHRoaXMubWF4VmFsdWUpLCBNYXRoLmFicyh0aGlzLm1pblZhbHVlKSkpLmxlbmd0aCgpOwogICAgfQogICAgLyoqCiAgICAgKiBTZXRzIHRoZSBoZWlnaHQgdmFsdWVzIGZyb20gYW4gaW1hZ2UuIEN1cnJlbnRseSBvbmx5IHN1cHBvcnRlZCBpbiBicm93c2VyLgogICAgICovCgoKICAgIHNldEhlaWdodHNGcm9tSW1hZ2UoaW1hZ2UsIHNjYWxlKSB7CiAgICAgIGNvbnN0IHsKICAgICAgICB4LAogICAgICAgIHosCiAgICAgICAgeQogICAgICB9ID0gc2NhbGU7CiAgICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpOwogICAgICBjYW52YXMud2lkdGggPSBpbWFnZS53aWR0aDsKICAgICAgY2FudmFzLmhlaWdodCA9IGltYWdlLmhlaWdodDsKICAgICAgY29uc3QgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpOwogICAgICBjb250ZXh0LmRyYXdJbWFnZShpbWFnZSwgMCwgMCk7CiAgICAgIGNvbnN0IGltYWdlRGF0YSA9IGNvbnRleHQuZ2V0SW1hZ2VEYXRhKDAsIDAsIGltYWdlLndpZHRoLCBpbWFnZS5oZWlnaHQpOwogICAgICBjb25zdCBtYXRyaXggPSB0aGlzLmRhdGE7CiAgICAgIG1hdHJpeC5sZW5ndGggPSAwOwogICAgICB0aGlzLmVsZW1lbnRTaXplID0gTWF0aC5hYnMoeCkgLyBpbWFnZURhdGEud2lkdGg7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGltYWdlRGF0YS5oZWlnaHQ7IGkrKykgewogICAgICAgIGNvbnN0IHJvdyA9IFtdOwoKICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGltYWdlRGF0YS53aWR0aDsgaisrKSB7CiAgICAgICAgICBjb25zdCBhID0gaW1hZ2VEYXRhLmRhdGFbKGkgKiBpbWFnZURhdGEuaGVpZ2h0ICsgaikgKiA0XTsKICAgICAgICAgIGNvbnN0IGIgPSBpbWFnZURhdGEuZGF0YVsoaSAqIGltYWdlRGF0YS5oZWlnaHQgKyBqKSAqIDQgKyAxXTsKICAgICAgICAgIGNvbnN0IGMgPSBpbWFnZURhdGEuZGF0YVsoaSAqIGltYWdlRGF0YS5oZWlnaHQgKyBqKSAqIDQgKyAyXTsKICAgICAgICAgIGNvbnN0IGhlaWdodCA9IChhICsgYiArIGMpIC8gNCAvIDI1NSAqIHo7CgogICAgICAgICAgaWYgKHggPCAwKSB7CiAgICAgICAgICAgIHJvdy5wdXNoKGhlaWdodCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByb3cudW5zaGlmdChoZWlnaHQpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKHkgPCAwKSB7CiAgICAgICAgICBtYXRyaXgudW5zaGlmdChyb3cpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBtYXRyaXgucHVzaChyb3cpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy51cGRhdGVNYXhWYWx1ZSgpOwogICAgICB0aGlzLnVwZGF0ZU1pblZhbHVlKCk7CiAgICAgIHRoaXMudXBkYXRlKCk7CiAgICB9CgogIH0KCiAgY29uc3QgZ2V0SGVpZ2h0QXRfaWR4ID0gW107CiAgY29uc3QgZ2V0SGVpZ2h0QXRfd2VpZ2h0cyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgZ2V0SGVpZ2h0QXRfYSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgZ2V0SGVpZ2h0QXRfYiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgZ2V0SGVpZ2h0QXRfYyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgZ2V0Tm9ybWFsQXRfYSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgZ2V0Tm9ybWFsQXRfYiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgZ2V0Tm9ybWFsQXRfYyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgZ2V0Tm9ybWFsQXRfZTAgPSBuZXcgVmVjMygpOwogIGNvbnN0IGdldE5vcm1hbEF0X2UxID0gbmV3IFZlYzMoKTsgLy8gZnJvbSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9CYXJ5Y2VudHJpY19jb29yZGluYXRlX3N5c3RlbQoKICBmdW5jdGlvbiBiYXJ5Y2VudHJpY1dlaWdodHMoeCwgeSwgYXgsIGF5LCBieCwgYnksIGN4LCBjeSwgcmVzdWx0KSB7CiAgICByZXN1bHQueCA9ICgoYnkgLSBjeSkgKiAoeCAtIGN4KSArIChjeCAtIGJ4KSAqICh5IC0gY3kpKSAvICgoYnkgLSBjeSkgKiAoYXggLSBjeCkgKyAoY3ggLSBieCkgKiAoYXkgLSBjeSkpOwogICAgcmVzdWx0LnkgPSAoKGN5IC0gYXkpICogKHggLSBjeCkgKyAoYXggLSBjeCkgKiAoeSAtIGN5KSkgLyAoKGJ5IC0gY3kpICogKGF4IC0gY3gpICsgKGN4IC0gYngpICogKGF5IC0gY3kpKTsKICAgIHJlc3VsdC56ID0gMSAtIHJlc3VsdC54IC0gcmVzdWx0Lnk7CiAgfQogIC8qKgogICAqIE9jdHJlZU5vZGUKICAgKi8KCgogIGNsYXNzIE9jdHJlZU5vZGUgewogICAgLyoqIFRoZSByb290IG5vZGUgKi8KCiAgICAvKiogQm91bmRhcnkgb2YgdGhpcyBub2RlICovCgogICAgLyoqIENvbnRhaW5lZCBkYXRhIGF0IHRoZSBjdXJyZW50IG5vZGUgbGV2ZWwgKi8KCiAgICAvKiogQ2hpbGRyZW4gdG8gdGhpcyBub2RlICovCiAgICBjb25zdHJ1Y3RvcihvcHRpb25zID0ge30pIHsKICAgICAgdGhpcy5yb290ID0gdm9pZCAwOwogICAgICB0aGlzLmFhYmIgPSB2b2lkIDA7CiAgICAgIHRoaXMuZGF0YSA9IHZvaWQgMDsKICAgICAgdGhpcy5jaGlsZHJlbiA9IHZvaWQgMDsKICAgICAgdGhpcy5yb290ID0gb3B0aW9ucy5yb290IHx8IG51bGw7CiAgICAgIHRoaXMuYWFiYiA9IG9wdGlvbnMuYWFiYiA/IG9wdGlvbnMuYWFiYi5jbG9uZSgpIDogbmV3IEFBQkIoKTsKICAgICAgdGhpcy5kYXRhID0gW107CiAgICAgIHRoaXMuY2hpbGRyZW4gPSBbXTsKICAgIH0KICAgIC8qKgogICAgICogcmVzZXQKICAgICAqLwoKCiAgICByZXNldCgpIHsKICAgICAgdGhpcy5jaGlsZHJlbi5sZW5ndGggPSB0aGlzLmRhdGEubGVuZ3RoID0gMDsKICAgIH0KICAgIC8qKgogICAgICogSW5zZXJ0IGRhdGEgaW50byB0aGlzIG5vZGUKICAgICAqIEByZXR1cm4gVHJ1ZSBpZiBzdWNjZXNzZnVsLCBvdGhlcndpc2UgZmFsc2UKICAgICAqLwoKCiAgICBpbnNlcnQoYWFiYiwgZWxlbWVudERhdGEsIGxldmVsID0gMCkgewogICAgICBjb25zdCBub2RlRGF0YSA9IHRoaXMuZGF0YTsgLy8gSWdub3JlIG9iamVjdHMgdGhhdCBkbyBub3QgYmVsb25nIGluIHRoaXMgbm9kZQoKICAgICAgaWYgKCF0aGlzLmFhYmIuY29udGFpbnMoYWFiYikpIHsKICAgICAgICByZXR1cm4gZmFsc2U7IC8vIG9iamVjdCBjYW5ub3QgYmUgYWRkZWQKICAgICAgfQoKICAgICAgY29uc3QgY2hpbGRyZW4gPSB0aGlzLmNoaWxkcmVuOwogICAgICBjb25zdCBtYXhEZXB0aCA9IHRoaXMubWF4RGVwdGggfHwgdGhpcy5yb290Lm1heERlcHRoOwoKICAgICAgaWYgKGxldmVsIDwgbWF4RGVwdGgpIHsKICAgICAgICAvLyBTdWJkaXZpZGUgaWYgdGhlcmUgYXJlIG5vIGNoaWxkcmVuIHlldAogICAgICAgIGxldCBzdWJkaXZpZGVkID0gZmFsc2U7CgogICAgICAgIGlmICghY2hpbGRyZW4ubGVuZ3RoKSB7CiAgICAgICAgICB0aGlzLnN1YmRpdmlkZSgpOwogICAgICAgICAgc3ViZGl2aWRlZCA9IHRydWU7CiAgICAgICAgfSAvLyBhZGQgdG8gd2hpY2hldmVyIG5vZGUgd2lsbCBhY2NlcHQgaXQKCgogICAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSA4OyBpKyspIHsKICAgICAgICAgIGlmIChjaGlsZHJlbltpXS5pbnNlcnQoYWFiYiwgZWxlbWVudERhdGEsIGxldmVsICsgMSkpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoc3ViZGl2aWRlZCkgewogICAgICAgICAgLy8gTm8gY2hpbGRyZW4gYWNjZXB0ZWQhIE1pZ2h0IGFzIHdlbGwganVzdCByZW1vdmUgZW0gc2luY2UgdGhleSBjb250YWluIG5vbmUKICAgICAgICAgIGNoaWxkcmVuLmxlbmd0aCA9IDA7CiAgICAgICAgfQogICAgICB9IC8vIFRvbyBkZWVwLCBvciBjaGlsZHJlbiBkaWRudCB3YW50IGl0LiBhZGQgaXQgaW4gY3VycmVudCBub2RlCgoKICAgICAgbm9kZURhdGEucHVzaChlbGVtZW50RGF0YSk7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgLyoqCiAgICAgKiBDcmVhdGUgOCBlcXVhbGx5IHNpemVkIGNoaWxkcmVuIG5vZGVzIGFuZCBwdXQgdGhlbSBpbiB0aGUgYGNoaWxkcmVuYCBhcnJheS4KICAgICAqLwoKCiAgICBzdWJkaXZpZGUoKSB7CiAgICAgIGNvbnN0IGFhYmIgPSB0aGlzLmFhYmI7CiAgICAgIGNvbnN0IGwgPSBhYWJiLmxvd2VyQm91bmQ7CiAgICAgIGNvbnN0IHUgPSBhYWJiLnVwcGVyQm91bmQ7CiAgICAgIGNvbnN0IGNoaWxkcmVuID0gdGhpcy5jaGlsZHJlbjsKICAgICAgY2hpbGRyZW4ucHVzaChuZXcgT2N0cmVlTm9kZSh7CiAgICAgICAgYWFiYjogbmV3IEFBQkIoewogICAgICAgICAgbG93ZXJCb3VuZDogbmV3IFZlYzMoMCwgMCwgMCkKICAgICAgICB9KQogICAgICB9KSwgbmV3IE9jdHJlZU5vZGUoewogICAgICAgIGFhYmI6IG5ldyBBQUJCKHsKICAgICAgICAgIGxvd2VyQm91bmQ6IG5ldyBWZWMzKDEsIDAsIDApCiAgICAgICAgfSkKICAgICAgfSksIG5ldyBPY3RyZWVOb2RlKHsKICAgICAgICBhYWJiOiBuZXcgQUFCQih7CiAgICAgICAgICBsb3dlckJvdW5kOiBuZXcgVmVjMygxLCAxLCAwKQogICAgICAgIH0pCiAgICAgIH0pLCBuZXcgT2N0cmVlTm9kZSh7CiAgICAgICAgYWFiYjogbmV3IEFBQkIoewogICAgICAgICAgbG93ZXJCb3VuZDogbmV3IFZlYzMoMSwgMSwgMSkKICAgICAgICB9KQogICAgICB9KSwgbmV3IE9jdHJlZU5vZGUoewogICAgICAgIGFhYmI6IG5ldyBBQUJCKHsKICAgICAgICAgIGxvd2VyQm91bmQ6IG5ldyBWZWMzKDAsIDEsIDEpCiAgICAgICAgfSkKICAgICAgfSksIG5ldyBPY3RyZWVOb2RlKHsKICAgICAgICBhYWJiOiBuZXcgQUFCQih7CiAgICAgICAgICBsb3dlckJvdW5kOiBuZXcgVmVjMygwLCAwLCAxKQogICAgICAgIH0pCiAgICAgIH0pLCBuZXcgT2N0cmVlTm9kZSh7CiAgICAgICAgYWFiYjogbmV3IEFBQkIoewogICAgICAgICAgbG93ZXJCb3VuZDogbmV3IFZlYzMoMSwgMCwgMSkKICAgICAgICB9KQogICAgICB9KSwgbmV3IE9jdHJlZU5vZGUoewogICAgICAgIGFhYmI6IG5ldyBBQUJCKHsKICAgICAgICAgIGxvd2VyQm91bmQ6IG5ldyBWZWMzKDAsIDEsIDApCiAgICAgICAgfSkKICAgICAgfSkpOwogICAgICB1LnZzdWIobCwgaGFsZkRpYWdvbmFsKTsKICAgICAgaGFsZkRpYWdvbmFsLnNjYWxlKDAuNSwgaGFsZkRpYWdvbmFsKTsKICAgICAgY29uc3Qgcm9vdCA9IHRoaXMucm9vdCB8fCB0aGlzOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IDg7IGkrKykgewogICAgICAgIGNvbnN0IGNoaWxkID0gY2hpbGRyZW5baV07IC8vIFNldCBjdXJyZW50IG5vZGUgYXMgcm9vdAoKICAgICAgICBjaGlsZC5yb290ID0gcm9vdDsgLy8gQ29tcHV0ZSBib3VuZHMKCiAgICAgICAgY29uc3QgbG93ZXJCb3VuZCA9IGNoaWxkLmFhYmIubG93ZXJCb3VuZDsKICAgICAgICBsb3dlckJvdW5kLnggKj0gaGFsZkRpYWdvbmFsLng7CiAgICAgICAgbG93ZXJCb3VuZC55ICo9IGhhbGZEaWFnb25hbC55OwogICAgICAgIGxvd2VyQm91bmQueiAqPSBoYWxmRGlhZ29uYWwuejsKICAgICAgICBsb3dlckJvdW5kLnZhZGQobCwgbG93ZXJCb3VuZCk7IC8vIFVwcGVyIGJvdW5kIGlzIGFsd2F5cyBsb3dlciBib3VuZCArIGhhbGZEaWFnb25hbAoKICAgICAgICBsb3dlckJvdW5kLnZhZGQoaGFsZkRpYWdvbmFsLCBjaGlsZC5hYWJiLnVwcGVyQm91bmQpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhbGwgZGF0YSwgcG90ZW50aWFsbHkgd2l0aGluIGFuIEFBQkIKICAgICAqIEByZXR1cm4gVGhlICJyZXN1bHQiIG9iamVjdAogICAgICovCgoKICAgIGFhYmJRdWVyeShhYWJiLCByZXN1bHQpIHsKICAgICAgdGhpcy5kYXRhOyAvLyBhYm9ydCBpZiB0aGUgcmFuZ2UgZG9lcyBub3QgaW50ZXJzZWN0IHRoaXMgbm9kZQogICAgICAvLyBpZiAoIXRoaXMuYWFiYi5vdmVybGFwcyhhYWJiKSl7CiAgICAgIC8vICAgICByZXR1cm4gcmVzdWx0OwogICAgICAvLyB9CiAgICAgIC8vIEFkZCBvYmplY3RzIGF0IHRoaXMgbGV2ZWwKICAgICAgLy8gQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkocmVzdWx0LCBub2RlRGF0YSk7CiAgICAgIC8vIEFkZCBjaGlsZCBkYXRhCiAgICAgIC8vIEB0b2RvIHVud3JhcCByZWN1cnNpb24gaW50byBhIHF1ZXVlIC8gbG9vcCwgdGhhdCdzIGZhc3RlciBpbiBKUwoKICAgICAgdGhpcy5jaGlsZHJlbjsgLy8gZm9yIChsZXQgaSA9IDAsIE4gPSB0aGlzLmNoaWxkcmVuLmxlbmd0aDsgaSAhPT0gTjsgaSsrKSB7CiAgICAgIC8vICAgICBjaGlsZHJlbltpXS5hYWJiUXVlcnkoYWFiYiwgcmVzdWx0KTsKICAgICAgLy8gfQoKICAgICAgY29uc3QgcXVldWUgPSBbdGhpc107CgogICAgICB3aGlsZSAocXVldWUubGVuZ3RoKSB7CiAgICAgICAgY29uc3Qgbm9kZSA9IHF1ZXVlLnBvcCgpOwoKICAgICAgICBpZiAobm9kZS5hYWJiLm92ZXJsYXBzKGFhYmIpKSB7CiAgICAgICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShyZXN1bHQsIG5vZGUuZGF0YSk7CiAgICAgICAgfQoKICAgICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShxdWV1ZSwgbm9kZS5jaGlsZHJlbik7CiAgICAgIH0KCiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhbGwgZGF0YSwgcG90ZW50aWFsbHkgaW50ZXJzZWN0ZWQgYnkgYSByYXkuCiAgICAgKiBAcmV0dXJuIFRoZSAicmVzdWx0IiBvYmplY3QKICAgICAqLwoKCiAgICByYXlRdWVyeShyYXksIHRyZWVUcmFuc2Zvcm0sIHJlc3VsdCkgewogICAgICAvLyBVc2UgYWFiYiBxdWVyeSBmb3Igbm93LgoKICAgICAgLyoqIEB0b2RvIGltcGxlbWVudCByZWFsIHJheSBxdWVyeSB3aGljaCBuZWVkcyBsZXNzIGxvb2t1cHMgKi8KICAgICAgcmF5LmdldEFBQkIodG1wQUFCQik7CiAgICAgIHRtcEFBQkIudG9Mb2NhbEZyYW1lKHRyZWVUcmFuc2Zvcm0sIHRtcEFBQkIpOwogICAgICB0aGlzLmFhYmJRdWVyeSh0bXBBQUJCLCByZXN1bHQpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgLyoqCiAgICAgKiByZW1vdmVFbXB0eU5vZGVzCiAgICAgKi8KCgogICAgcmVtb3ZlRW1wdHlOb2RlcygpIHsKICAgICAgZm9yIChsZXQgaSA9IHRoaXMuY2hpbGRyZW4ubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgICAgICB0aGlzLmNoaWxkcmVuW2ldLnJlbW92ZUVtcHR5Tm9kZXMoKTsKCiAgICAgICAgaWYgKCF0aGlzLmNoaWxkcmVuW2ldLmNoaWxkcmVuLmxlbmd0aCAmJiAhdGhpcy5jaGlsZHJlbltpXS5kYXRhLmxlbmd0aCkgewogICAgICAgICAgdGhpcy5jaGlsZHJlbi5zcGxpY2UoaSwgMSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogIH0KICAvKioKICAgKiBPY3RyZWUKICAgKi8KCgogIGNsYXNzIE9jdHJlZSBleHRlbmRzIE9jdHJlZU5vZGUgewogICAgLyoqCiAgICAgKiBNYXhpbXVtIHN1YmRpdmlzaW9uIGRlcHRoCiAgICAgKiBAZGVmYXVsdCA4CiAgICAgKi8KCiAgICAvKioKICAgICAqIEBwYXJhbSBhYWJiIFRoZSB0b3RhbCBBQUJCIG9mIHRoZSB0cmVlCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGFhYmIsIG9wdGlvbnMgPSB7fSkgewogICAgICBzdXBlcih7CiAgICAgICAgcm9vdDogbnVsbCwKICAgICAgICBhYWJiCiAgICAgIH0pOwogICAgICB0aGlzLm1heERlcHRoID0gdm9pZCAwOwogICAgICB0aGlzLm1heERlcHRoID0gdHlwZW9mIG9wdGlvbnMubWF4RGVwdGggIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5tYXhEZXB0aCA6IDg7CiAgICB9CgogIH0KCiAgY29uc3QgaGFsZkRpYWdvbmFsID0gbmV3IFZlYzMoKTsKICBjb25zdCB0bXBBQUJCID0gbmV3IEFBQkIoKTsKICAvKioKICAgKiBUcmltZXNoLgogICAqIEBleGFtcGxlCiAgICogICAgIC8vIEhvdyB0byBtYWtlIGEgbWVzaCB3aXRoIGEgc2luZ2xlIHRyaWFuZ2xlCiAgICogICAgIGNvbnN0IHZlcnRpY2VzID0gWwogICAqICAgICAgICAgMCwgMCwgMCwgLy8gdmVydGV4IDAKICAgKiAgICAgICAgIDEsIDAsIDAsIC8vIHZlcnRleCAxCiAgICogICAgICAgICAwLCAxLCAwICAvLyB2ZXJ0ZXggMgogICAqICAgICBdCiAgICogICAgIGNvbnN0IGluZGljZXMgPSBbCiAgICogICAgICAgICAwLCAxLCAyICAvLyB0cmlhbmdsZSAwCiAgICogICAgIF0KICAgKiAgICAgY29uc3QgdHJpbWVzaFNoYXBlID0gbmV3IENBTk5PTi5UcmltZXNoKHZlcnRpY2VzLCBpbmRpY2VzKQogICAqLwoKICBjbGFzcyBUcmltZXNoIGV4dGVuZHMgU2hhcGUgewogICAgLyoqCiAgICAgKiB2ZXJ0aWNlcwogICAgICovCgogICAgLyoqCiAgICAgKiBBcnJheSBvZiBpbnRlZ2VycywgaW5kaWNhdGluZyB3aGljaCB2ZXJ0aWNlcyBlYWNoIHRyaWFuZ2xlIGNvbnNpc3RzIG9mLiBUaGUgbGVuZ3RoIG9mIHRoaXMgYXJyYXkgaXMgdGh1cyAzIHRpbWVzIHRoZSBudW1iZXIgb2YgdHJpYW5nbGVzLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgbm9ybWFscyBkYXRhLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgbG9jYWwgQUFCQiBvZiB0aGUgbWVzaC4KICAgICAqLwoKICAgIC8qKgogICAgICogUmVmZXJlbmNlcyB0byB2ZXJ0ZXggcGFpcnMsIG1ha2luZyB1cCBhbGwgdW5pcXVlIGVkZ2VzIGluIHRoZSB0cmltZXNoLgogICAgICovCgogICAgLyoqCiAgICAgKiBMb2NhbCBzY2FsaW5nIG9mIHRoZSBtZXNoLiBVc2UgLnNldFNjYWxlKCkgdG8gc2V0IGl0LgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgaW5kZXhlZCB0cmlhbmdsZXMuIFVzZSAudXBkYXRlVHJlZSgpIHRvIHVwZGF0ZSBpdC4KICAgICAqLwogICAgY29uc3RydWN0b3IodmVydGljZXMsIGluZGljZXMpIHsKICAgICAgc3VwZXIoewogICAgICAgIHR5cGU6IFNoYXBlLnR5cGVzLlRSSU1FU0gKICAgICAgfSk7CiAgICAgIHRoaXMudmVydGljZXMgPSB2b2lkIDA7CiAgICAgIHRoaXMuaW5kaWNlcyA9IHZvaWQgMDsKICAgICAgdGhpcy5ub3JtYWxzID0gdm9pZCAwOwogICAgICB0aGlzLmFhYmIgPSB2b2lkIDA7CiAgICAgIHRoaXMuZWRnZXMgPSB2b2lkIDA7CiAgICAgIHRoaXMuc2NhbGUgPSB2b2lkIDA7CiAgICAgIHRoaXMudHJlZSA9IHZvaWQgMDsKICAgICAgdGhpcy52ZXJ0aWNlcyA9IG5ldyBGbG9hdDMyQXJyYXkodmVydGljZXMpOwogICAgICB0aGlzLmluZGljZXMgPSBuZXcgSW50MTZBcnJheShpbmRpY2VzKTsKICAgICAgdGhpcy5ub3JtYWxzID0gbmV3IEZsb2F0MzJBcnJheShpbmRpY2VzLmxlbmd0aCk7CiAgICAgIHRoaXMuYWFiYiA9IG5ldyBBQUJCKCk7CiAgICAgIHRoaXMuZWRnZXMgPSBudWxsOwogICAgICB0aGlzLnNjYWxlID0gbmV3IFZlYzMoMSwgMSwgMSk7CiAgICAgIHRoaXMudHJlZSA9IG5ldyBPY3RyZWUoKTsKICAgICAgdGhpcy51cGRhdGVFZGdlcygpOwogICAgICB0aGlzLnVwZGF0ZU5vcm1hbHMoKTsKICAgICAgdGhpcy51cGRhdGVBQUJCKCk7CiAgICAgIHRoaXMudXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKTsKICAgICAgdGhpcy51cGRhdGVUcmVlKCk7CiAgICB9CiAgICAvKioKICAgICAqIHVwZGF0ZVRyZWUKICAgICAqLwoKCiAgICB1cGRhdGVUcmVlKCkgewogICAgICBjb25zdCB0cmVlID0gdGhpcy50cmVlOwogICAgICB0cmVlLnJlc2V0KCk7CiAgICAgIHRyZWUuYWFiYi5jb3B5KHRoaXMuYWFiYik7CiAgICAgIGNvbnN0IHNjYWxlID0gdGhpcy5zY2FsZTsgLy8gVGhlIGxvY2FsIG1lc2ggQUFCQiBpcyBzY2FsZWQsIGJ1dCB0aGUgb2N0cmVlIEFBQkIgc2hvdWxkIGJlIHVuc2NhbGVkCgogICAgICB0cmVlLmFhYmIubG93ZXJCb3VuZC54ICo9IDEgLyBzY2FsZS54OwogICAgICB0cmVlLmFhYmIubG93ZXJCb3VuZC55ICo9IDEgLyBzY2FsZS55OwogICAgICB0cmVlLmFhYmIubG93ZXJCb3VuZC56ICo9IDEgLyBzY2FsZS56OwogICAgICB0cmVlLmFhYmIudXBwZXJCb3VuZC54ICo9IDEgLyBzY2FsZS54OwogICAgICB0cmVlLmFhYmIudXBwZXJCb3VuZC55ICo9IDEgLyBzY2FsZS55OwogICAgICB0cmVlLmFhYmIudXBwZXJCb3VuZC56ICo9IDEgLyBzY2FsZS56OyAvLyBJbnNlcnQgYWxsIHRyaWFuZ2xlcwoKICAgICAgY29uc3QgdHJpYW5nbGVBQUJCID0gbmV3IEFBQkIoKTsKICAgICAgY29uc3QgYSA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IGIgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBjID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgcG9pbnRzID0gW2EsIGIsIGNdOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmluZGljZXMubGVuZ3RoIC8gMzsgaSsrKSB7CiAgICAgICAgLy90aGlzLmdldFRyaWFuZ2xlVmVydGljZXMoaSwgYSwgYiwgYyk7CiAgICAgICAgLy8gR2V0IHVuc2NhbGVkIHRyaWFuZ2xlIHZlcnRzCiAgICAgICAgY29uc3QgaTMgPSBpICogMzsKCiAgICAgICAgdGhpcy5fZ2V0VW5zY2FsZWRWZXJ0ZXgodGhpcy5pbmRpY2VzW2kzXSwgYSk7CgogICAgICAgIHRoaXMuX2dldFVuc2NhbGVkVmVydGV4KHRoaXMuaW5kaWNlc1tpMyArIDFdLCBiKTsKCiAgICAgICAgdGhpcy5fZ2V0VW5zY2FsZWRWZXJ0ZXgodGhpcy5pbmRpY2VzW2kzICsgMl0sIGMpOwoKICAgICAgICB0cmlhbmdsZUFBQkIuc2V0RnJvbVBvaW50cyhwb2ludHMpOwogICAgICAgIHRyZWUuaW5zZXJ0KHRyaWFuZ2xlQUFCQiwgaSk7CiAgICAgIH0KCiAgICAgIHRyZWUucmVtb3ZlRW1wdHlOb2RlcygpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdHJpYW5nbGVzIGluIGEgbG9jYWwgQUFCQiBmcm9tIHRoZSB0cmltZXNoLgogICAgICogQHBhcmFtIHJlc3VsdCBBbiBhcnJheSBvZiBpbnRlZ2VycywgcmVmZXJlbmNpbmcgdGhlIHF1ZXJpZWQgdHJpYW5nbGVzLgogICAgICovCgoKICAgIGdldFRyaWFuZ2xlc0luQUFCQihhYWJiLCByZXN1bHQpIHsKICAgICAgdW5zY2FsZWRBQUJCLmNvcHkoYWFiYik7IC8vIFNjYWxlIGl0IHRvIGxvY2FsCgogICAgICBjb25zdCBzY2FsZSA9IHRoaXMuc2NhbGU7CiAgICAgIGNvbnN0IGlzeCA9IHNjYWxlLng7CiAgICAgIGNvbnN0IGlzeSA9IHNjYWxlLnk7CiAgICAgIGNvbnN0IGlzeiA9IHNjYWxlLno7CiAgICAgIGNvbnN0IGwgPSB1bnNjYWxlZEFBQkIubG93ZXJCb3VuZDsKICAgICAgY29uc3QgdSA9IHVuc2NhbGVkQUFCQi51cHBlckJvdW5kOwogICAgICBsLnggLz0gaXN4OwogICAgICBsLnkgLz0gaXN5OwogICAgICBsLnogLz0gaXN6OwogICAgICB1LnggLz0gaXN4OwogICAgICB1LnkgLz0gaXN5OwogICAgICB1LnogLz0gaXN6OwogICAgICByZXR1cm4gdGhpcy50cmVlLmFhYmJRdWVyeSh1bnNjYWxlZEFBQkIsIHJlc3VsdCk7CiAgICB9CiAgICAvKioKICAgICAqIHNldFNjYWxlCiAgICAgKi8KCgogICAgc2V0U2NhbGUoc2NhbGUpIHsKICAgICAgY29uc3Qgd2FzVW5pZm9ybSA9IHRoaXMuc2NhbGUueCA9PT0gdGhpcy5zY2FsZS55ICYmIHRoaXMuc2NhbGUueSA9PT0gdGhpcy5zY2FsZS56OwogICAgICBjb25zdCBpc1VuaWZvcm0gPSBzY2FsZS54ID09PSBzY2FsZS55ICYmIHNjYWxlLnkgPT09IHNjYWxlLno7CgogICAgICBpZiAoISh3YXNVbmlmb3JtICYmIGlzVW5pZm9ybSkpIHsKICAgICAgICAvLyBOb24tdW5pZm9ybSBzY2FsaW5nLiBOZWVkIHRvIHVwZGF0ZSBub3JtYWxzLgogICAgICAgIHRoaXMudXBkYXRlTm9ybWFscygpOwogICAgICB9CgogICAgICB0aGlzLnNjYWxlLmNvcHkoc2NhbGUpOwogICAgICB0aGlzLnVwZGF0ZUFBQkIoKTsKICAgICAgdGhpcy51cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpOwogICAgfQogICAgLyoqCiAgICAgKiBDb21wdXRlIHRoZSBub3JtYWxzIG9mIHRoZSBmYWNlcy4gV2lsbCBzYXZlIGluIHRoZSBgLm5vcm1hbHNgIGFycmF5LgogICAgICovCgoKICAgIHVwZGF0ZU5vcm1hbHMoKSB7CiAgICAgIGNvbnN0IG4gPSBjb21wdXRlTm9ybWFsc19uOyAvLyBHZW5lcmF0ZSBub3JtYWxzCgogICAgICBjb25zdCBub3JtYWxzID0gdGhpcy5ub3JtYWxzOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmluZGljZXMubGVuZ3RoIC8gMzsgaSsrKSB7CiAgICAgICAgY29uc3QgaTMgPSBpICogMzsKICAgICAgICBjb25zdCBhID0gdGhpcy5pbmRpY2VzW2kzXTsKICAgICAgICBjb25zdCBiID0gdGhpcy5pbmRpY2VzW2kzICsgMV07CiAgICAgICAgY29uc3QgYyA9IHRoaXMuaW5kaWNlc1tpMyArIDJdOwogICAgICAgIHRoaXMuZ2V0VmVydGV4KGEsIHZhKTsKICAgICAgICB0aGlzLmdldFZlcnRleChiLCB2Yik7CiAgICAgICAgdGhpcy5nZXRWZXJ0ZXgoYywgdmMpOwogICAgICAgIFRyaW1lc2guY29tcHV0ZU5vcm1hbCh2YiwgdmEsIHZjLCBuKTsKICAgICAgICBub3JtYWxzW2kzXSA9IG4ueDsKICAgICAgICBub3JtYWxzW2kzICsgMV0gPSBuLnk7CiAgICAgICAgbm9ybWFsc1tpMyArIDJdID0gbi56OwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIFVwZGF0ZSB0aGUgYC5lZGdlc2AgcHJvcGVydHkKICAgICAqLwoKCiAgICB1cGRhdGVFZGdlcygpIHsKICAgICAgY29uc3QgZWRnZXMgPSB7fTsKCiAgICAgIGNvbnN0IGFkZCA9IChhLCBiKSA9PiB7CiAgICAgICAgY29uc3Qga2V5ID0gYSA8IGIgPyBhICsgIl8iICsgYiA6IGIgKyAiXyIgKyBhOwogICAgICAgIGVkZ2VzW2tleV0gPSB0cnVlOwogICAgICB9OwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmluZGljZXMubGVuZ3RoIC8gMzsgaSsrKSB7CiAgICAgICAgY29uc3QgaTMgPSBpICogMzsKICAgICAgICBjb25zdCBhID0gdGhpcy5pbmRpY2VzW2kzXTsKICAgICAgICBjb25zdCBiID0gdGhpcy5pbmRpY2VzW2kzICsgMV07CiAgICAgICAgY29uc3QgYyA9IHRoaXMuaW5kaWNlc1tpMyArIDJdOwogICAgICAgIGFkZChhLCBiKTsKICAgICAgICBhZGQoYiwgYyk7CiAgICAgICAgYWRkKGMsIGEpOwogICAgICB9CgogICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoZWRnZXMpOwogICAgICB0aGlzLmVkZ2VzID0gbmV3IEludDE2QXJyYXkoa2V5cy5sZW5ndGggKiAyKTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykgewogICAgICAgIGNvbnN0IGluZGljZXMgPSBrZXlzW2ldLnNwbGl0KCdfJyk7CiAgICAgICAgdGhpcy5lZGdlc1syICogaV0gPSBwYXJzZUludChpbmRpY2VzWzBdLCAxMCk7CiAgICAgICAgdGhpcy5lZGdlc1syICogaSArIDFdID0gcGFyc2VJbnQoaW5kaWNlc1sxXSwgMTApOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhbiBlZGdlIHZlcnRleAogICAgICogQHBhcmFtIGZpcnN0T3JTZWNvbmQgMCBvciAxLCBkZXBlbmRpbmcgb24gd2hpY2ggb25lIG9mIHRoZSB2ZXJ0aWNlcyB5b3UgbmVlZC4KICAgICAqIEBwYXJhbSB2ZXJ0ZXhTdG9yZSBXaGVyZSB0byBzdG9yZSB0aGUgcmVzdWx0CiAgICAgKi8KCgogICAgZ2V0RWRnZVZlcnRleChlZGdlSW5kZXgsIGZpcnN0T3JTZWNvbmQsIHZlcnRleFN0b3JlKSB7CiAgICAgIGNvbnN0IHZlcnRleEluZGV4ID0gdGhpcy5lZGdlc1tlZGdlSW5kZXggKiAyICsgKGZpcnN0T3JTZWNvbmQgPyAxIDogMCldOwogICAgICB0aGlzLmdldFZlcnRleCh2ZXJ0ZXhJbmRleCwgdmVydGV4U3RvcmUpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgYSB2ZWN0b3IgYWxvbmcgYW4gZWRnZS4KICAgICAqLwoKCiAgICBnZXRFZGdlVmVjdG9yKGVkZ2VJbmRleCwgdmVjdG9yU3RvcmUpIHsKICAgICAgY29uc3QgdmEgPSBnZXRFZGdlVmVjdG9yX3ZhOwogICAgICBjb25zdCB2YiA9IGdldEVkZ2VWZWN0b3JfdmI7CiAgICAgIHRoaXMuZ2V0RWRnZVZlcnRleChlZGdlSW5kZXgsIDAsIHZhKTsKICAgICAgdGhpcy5nZXRFZGdlVmVydGV4KGVkZ2VJbmRleCwgMSwgdmIpOwogICAgICB2Yi52c3ViKHZhLCB2ZWN0b3JTdG9yZSk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBmYWNlIG5vcm1hbCBnaXZlbiAzIHZlcnRpY2VzCiAgICAgKi8KCgogICAgc3RhdGljIGNvbXB1dGVOb3JtYWwodmEsIHZiLCB2YywgdGFyZ2V0KSB7CiAgICAgIHZiLnZzdWIodmEsIGFiKTsKICAgICAgdmMudnN1Yih2YiwgY2IpOwogICAgICBjYi5jcm9zcyhhYiwgdGFyZ2V0KTsKCiAgICAgIGlmICghdGFyZ2V0LmlzWmVybygpKSB7CiAgICAgICAgdGFyZ2V0Lm5vcm1hbGl6ZSgpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEdldCB2ZXJ0ZXggaS4KICAgICAqIEByZXR1cm4gVGhlICJvdXQiIHZlY3RvciBvYmplY3QKICAgICAqLwoKCiAgICBnZXRWZXJ0ZXgoaSwgb3V0KSB7CiAgICAgIGNvbnN0IHNjYWxlID0gdGhpcy5zY2FsZTsKCiAgICAgIHRoaXMuX2dldFVuc2NhbGVkVmVydGV4KGksIG91dCk7CgogICAgICBvdXQueCAqPSBzY2FsZS54OwogICAgICBvdXQueSAqPSBzY2FsZS55OwogICAgICBvdXQueiAqPSBzY2FsZS56OwogICAgICByZXR1cm4gb3V0OwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgcmF3IHZlcnRleCBpCiAgICAgKiBAcmV0dXJuIFRoZSAib3V0IiB2ZWN0b3Igb2JqZWN0CiAgICAgKi8KCgogICAgX2dldFVuc2NhbGVkVmVydGV4KGksIG91dCkgewogICAgICBjb25zdCBpMyA9IGkgKiAzOwogICAgICBjb25zdCB2ZXJ0aWNlcyA9IHRoaXMudmVydGljZXM7CiAgICAgIHJldHVybiBvdXQuc2V0KHZlcnRpY2VzW2kzXSwgdmVydGljZXNbaTMgKyAxXSwgdmVydGljZXNbaTMgKyAyXSk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhIHZlcnRleCBmcm9tIHRoZSB0cmltZXNoLHRyYW5zZm9ybWVkIGJ5IHRoZSBnaXZlbiBwb3NpdGlvbiBhbmQgcXVhdGVybmlvbi4KICAgICAqIEByZXR1cm4gVGhlICJvdXQiIHZlY3RvciBvYmplY3QKICAgICAqLwoKCiAgICBnZXRXb3JsZFZlcnRleChpLCBwb3MsIHF1YXQsIG91dCkgewogICAgICB0aGlzLmdldFZlcnRleChpLCBvdXQpOwogICAgICBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUocG9zLCBxdWF0LCBvdXQsIG91dCk7CiAgICAgIHJldHVybiBvdXQ7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgdGhyZWUgdmVydGljZXMgZm9yIHRyaWFuZ2xlIGkuCiAgICAgKi8KCgogICAgZ2V0VHJpYW5nbGVWZXJ0aWNlcyhpLCBhLCBiLCBjKSB7CiAgICAgIGNvbnN0IGkzID0gaSAqIDM7CiAgICAgIHRoaXMuZ2V0VmVydGV4KHRoaXMuaW5kaWNlc1tpM10sIGEpOwogICAgICB0aGlzLmdldFZlcnRleCh0aGlzLmluZGljZXNbaTMgKyAxXSwgYik7CiAgICAgIHRoaXMuZ2V0VmVydGV4KHRoaXMuaW5kaWNlc1tpMyArIDJdLCBjKTsKICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZSB0aGUgbm9ybWFsIG9mIHRyaWFuZ2xlIGkuCiAgICAgKiBAcmV0dXJuIFRoZSAidGFyZ2V0IiB2ZWN0b3Igb2JqZWN0CiAgICAgKi8KCgogICAgZ2V0Tm9ybWFsKGksIHRhcmdldCkgewogICAgICBjb25zdCBpMyA9IGkgKiAzOwogICAgICByZXR1cm4gdGFyZ2V0LnNldCh0aGlzLm5vcm1hbHNbaTNdLCB0aGlzLm5vcm1hbHNbaTMgKyAxXSwgdGhpcy5ub3JtYWxzW2kzICsgMl0pOwogICAgfQogICAgLyoqCiAgICAgKiBAcmV0dXJuIFRoZSAidGFyZ2V0IiB2ZWN0b3Igb2JqZWN0CiAgICAgKi8KCgogICAgY2FsY3VsYXRlTG9jYWxJbmVydGlhKG1hc3MsIHRhcmdldCkgewogICAgICAvLyBBcHByb3hpbWF0ZSB3aXRoIGJveCBpbmVydGlhCiAgICAgIC8vIEV4YWN0IGluZXJ0aWEgY2FsY3VsYXRpb24gaXMgb3ZlcmtpbGwsIGJ1dCBzZWUgaHR0cDovL2dlb21ldHJpY3Rvb2xzLmNvbS9Eb2N1bWVudGF0aW9uL1BvbHloZWRyYWxNYXNzUHJvcGVydGllcy5wZGYgZm9yIHRoZSBjb3JyZWN0IHdheSB0byBkbyBpdAogICAgICB0aGlzLmNvbXB1dGVMb2NhbEFBQkIoY2xpX2FhYmIpOwogICAgICBjb25zdCB4ID0gY2xpX2FhYmIudXBwZXJCb3VuZC54IC0gY2xpX2FhYmIubG93ZXJCb3VuZC54OwogICAgICBjb25zdCB5ID0gY2xpX2FhYmIudXBwZXJCb3VuZC55IC0gY2xpX2FhYmIubG93ZXJCb3VuZC55OwogICAgICBjb25zdCB6ID0gY2xpX2FhYmIudXBwZXJCb3VuZC56IC0gY2xpX2FhYmIubG93ZXJCb3VuZC56OwogICAgICByZXR1cm4gdGFyZ2V0LnNldCgxLjAgLyAxMi4wICogbWFzcyAqICgyICogeSAqIDIgKiB5ICsgMiAqIHogKiAyICogeiksIDEuMCAvIDEyLjAgKiBtYXNzICogKDIgKiB4ICogMiAqIHggKyAyICogeiAqIDIgKiB6KSwgMS4wIC8gMTIuMCAqIG1hc3MgKiAoMiAqIHkgKiAyICogeSArIDIgKiB4ICogMiAqIHgpKTsKICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZSB0aGUgbG9jYWwgQUFCQiBmb3IgdGhlIHRyaW1lc2gKICAgICAqLwoKCiAgICBjb21wdXRlTG9jYWxBQUJCKGFhYmIpIHsKICAgICAgY29uc3QgbCA9IGFhYmIubG93ZXJCb3VuZDsKICAgICAgY29uc3QgdSA9IGFhYmIudXBwZXJCb3VuZDsKICAgICAgY29uc3QgbiA9IHRoaXMudmVydGljZXMubGVuZ3RoOwogICAgICB0aGlzLnZlcnRpY2VzOwogICAgICBjb25zdCB2ID0gY29tcHV0ZUxvY2FsQUFCQl93b3JsZFZlcnQ7CiAgICAgIHRoaXMuZ2V0VmVydGV4KDAsIHYpOwogICAgICBsLmNvcHkodik7CiAgICAgIHUuY29weSh2KTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBuOyBpKyspIHsKICAgICAgICB0aGlzLmdldFZlcnRleChpLCB2KTsKCiAgICAgICAgaWYgKHYueCA8IGwueCkgewogICAgICAgICAgbC54ID0gdi54OwogICAgICAgIH0gZWxzZSBpZiAodi54ID4gdS54KSB7CiAgICAgICAgICB1LnggPSB2Lng7CiAgICAgICAgfQoKICAgICAgICBpZiAodi55IDwgbC55KSB7CiAgICAgICAgICBsLnkgPSB2Lnk7CiAgICAgICAgfSBlbHNlIGlmICh2LnkgPiB1LnkpIHsKICAgICAgICAgIHUueSA9IHYueTsKICAgICAgICB9CgogICAgICAgIGlmICh2LnogPCBsLnopIHsKICAgICAgICAgIGwueiA9IHYuejsKICAgICAgICB9IGVsc2UgaWYgKHYueiA+IHUueikgewogICAgICAgICAgdS56ID0gdi56OwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBVcGRhdGUgdGhlIGAuYWFiYmAgcHJvcGVydHkKICAgICAqLwoKCiAgICB1cGRhdGVBQUJCKCkgewogICAgICB0aGlzLmNvbXB1dGVMb2NhbEFBQkIodGhpcy5hYWJiKTsKICAgIH0KICAgIC8qKgogICAgICogV2lsbCB1cGRhdGUgdGhlIGAuYm91bmRpbmdTcGhlcmVSYWRpdXNgIHByb3BlcnR5CiAgICAgKi8KCgogICAgdXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKSB7CiAgICAgIC8vIEFzc3VtZSBwb2ludHMgYXJlIGRpc3RyaWJ1dGVkIHdpdGggbG9jYWwgKDAsMCwwKSBhcyBjZW50ZXIKICAgICAgbGV0IG1heDIgPSAwOwogICAgICBjb25zdCB2ZXJ0aWNlcyA9IHRoaXMudmVydGljZXM7CiAgICAgIGNvbnN0IHYgPSBuZXcgVmVjMygpOwoKICAgICAgZm9yIChsZXQgaSA9IDAsIE4gPSB2ZXJ0aWNlcy5sZW5ndGggLyAzOyBpICE9PSBOOyBpKyspIHsKICAgICAgICB0aGlzLmdldFZlcnRleChpLCB2KTsKICAgICAgICBjb25zdCBub3JtMiA9IHYubGVuZ3RoU3F1YXJlZCgpOwoKICAgICAgICBpZiAobm9ybTIgPiBtYXgyKSB7CiAgICAgICAgICBtYXgyID0gbm9ybTI7CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLmJvdW5kaW5nU3BoZXJlUmFkaXVzID0gTWF0aC5zcXJ0KG1heDIpOwogICAgfQogICAgLyoqCiAgICAgKiBjYWxjdWxhdGVXb3JsZEFBQkIKICAgICAqLwoKCiAgICBjYWxjdWxhdGVXb3JsZEFBQkIocG9zLCBxdWF0LCBtaW4sIG1heCkgewogICAgICAvKgogICAgICAgICAgY29uc3QgbiA9IHRoaXMudmVydGljZXMubGVuZ3RoIC8gMywKICAgICAgICAgICAgICB2ZXJ0cyA9IHRoaXMudmVydGljZXM7CiAgICAgICAgICBjb25zdCBtaW54LG1pbnksbWlueixtYXh4LG1heHksbWF4ejsKICAgICAgICAgICBjb25zdCB2ID0gdGVtcFdvcmxkVmVydGV4OwogICAgICAgICAgZm9yKGxldCBpPTA7IGk8bjsgaSsrKXsKICAgICAgICAgICAgICB0aGlzLmdldFZlcnRleChpLCB2KTsKICAgICAgICAgICAgICBxdWF0LnZtdWx0KHYsIHYpOwogICAgICAgICAgICAgIHBvcy52YWRkKHYsIHYpOwogICAgICAgICAgICAgIGlmICh2LnggPCBtaW54IHx8IG1pbng9PT11bmRlZmluZWQpewogICAgICAgICAgICAgICAgICBtaW54ID0gdi54OwogICAgICAgICAgICAgIH0gZWxzZSBpZih2LnggPiBtYXh4IHx8IG1heHg9PT11bmRlZmluZWQpewogICAgICAgICAgICAgICAgICBtYXh4ID0gdi54OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgaWYgKHYueSA8IG1pbnkgfHwgbWlueT09PXVuZGVmaW5lZCl7CiAgICAgICAgICAgICAgICAgIG1pbnkgPSB2Lnk7CiAgICAgICAgICAgICAgfSBlbHNlIGlmKHYueSA+IG1heHkgfHwgbWF4eT09PXVuZGVmaW5lZCl7CiAgICAgICAgICAgICAgICAgIG1heHkgPSB2Lnk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICBpZiAodi56IDwgbWlueiB8fCBtaW56PT09dW5kZWZpbmVkKXsKICAgICAgICAgICAgICAgICAgbWlueiA9IHYuejsKICAgICAgICAgICAgICB9IGVsc2UgaWYodi56ID4gbWF4eiB8fCBtYXh6PT09dW5kZWZpbmVkKXsKICAgICAgICAgICAgICAgICAgbWF4eiA9IHYuejsKICAgICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBtaW4uc2V0KG1pbngsbWlueSxtaW56KTsKICAgICAgICAgIG1heC5zZXQobWF4eCxtYXh5LG1heHopOwogICAgICAgICAgKi8KICAgICAgLy8gRmFzdGVyIGFwcHJveGltYXRpb24gdXNpbmcgbG9jYWwgQUFCQgogICAgICBjb25zdCBmcmFtZSA9IGNhbGN1bGF0ZVdvcmxkQUFCQl9mcmFtZTsKICAgICAgY29uc3QgcmVzdWx0ID0gY2FsY3VsYXRlV29ybGRBQUJCX2FhYmI7CiAgICAgIGZyYW1lLnBvc2l0aW9uID0gcG9zOwogICAgICBmcmFtZS5xdWF0ZXJuaW9uID0gcXVhdDsKICAgICAgdGhpcy5hYWJiLnRvV29ybGRGcmFtZShmcmFtZSwgcmVzdWx0KTsKICAgICAgbWluLmNvcHkocmVzdWx0Lmxvd2VyQm91bmQpOwogICAgICBtYXguY29weShyZXN1bHQudXBwZXJCb3VuZCk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhcHByb3hpbWF0ZSB2b2x1bWUKICAgICAqLwoKCiAgICB2b2x1bWUoKSB7CiAgICAgIHJldHVybiA0LjAgKiBNYXRoLlBJICogdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyAvIDMuMDsKICAgIH0KICAgIC8qKgogICAgICogQ3JlYXRlIGEgVHJpbWVzaCBpbnN0YW5jZSwgc2hhcGVkIGFzIGEgdG9ydXMuCiAgICAgKi8KCgogICAgc3RhdGljIGNyZWF0ZVRvcnVzKHJhZGl1cyA9IDEsIHR1YmUgPSAwLjUsIHJhZGlhbFNlZ21lbnRzID0gOCwgdHVidWxhclNlZ21lbnRzID0gNiwgYXJjID0gTWF0aC5QSSAqIDIpIHsKICAgICAgY29uc3QgdmVydGljZXMgPSBbXTsKICAgICAgY29uc3QgaW5kaWNlcyA9IFtdOwoKICAgICAgZm9yIChsZXQgaiA9IDA7IGogPD0gcmFkaWFsU2VnbWVudHM7IGorKykgewogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IHR1YnVsYXJTZWdtZW50czsgaSsrKSB7CiAgICAgICAgICBjb25zdCB1ID0gaSAvIHR1YnVsYXJTZWdtZW50cyAqIGFyYzsKICAgICAgICAgIGNvbnN0IHYgPSBqIC8gcmFkaWFsU2VnbWVudHMgKiBNYXRoLlBJICogMjsKICAgICAgICAgIGNvbnN0IHggPSAocmFkaXVzICsgdHViZSAqIE1hdGguY29zKHYpKSAqIE1hdGguY29zKHUpOwogICAgICAgICAgY29uc3QgeSA9IChyYWRpdXMgKyB0dWJlICogTWF0aC5jb3ModikpICogTWF0aC5zaW4odSk7CiAgICAgICAgICBjb25zdCB6ID0gdHViZSAqIE1hdGguc2luKHYpOwogICAgICAgICAgdmVydGljZXMucHVzaCh4LCB5LCB6KTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGZvciAobGV0IGogPSAxOyBqIDw9IHJhZGlhbFNlZ21lbnRzOyBqKyspIHsKICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8PSB0dWJ1bGFyU2VnbWVudHM7IGkrKykgewogICAgICAgICAgY29uc3QgYSA9ICh0dWJ1bGFyU2VnbWVudHMgKyAxKSAqIGogKyBpIC0gMTsKICAgICAgICAgIGNvbnN0IGIgPSAodHVidWxhclNlZ21lbnRzICsgMSkgKiAoaiAtIDEpICsgaSAtIDE7CiAgICAgICAgICBjb25zdCBjID0gKHR1YnVsYXJTZWdtZW50cyArIDEpICogKGogLSAxKSArIGk7CiAgICAgICAgICBjb25zdCBkID0gKHR1YnVsYXJTZWdtZW50cyArIDEpICogaiArIGk7CiAgICAgICAgICBpbmRpY2VzLnB1c2goYSwgYiwgZCk7CiAgICAgICAgICBpbmRpY2VzLnB1c2goYiwgYywgZCk7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gbmV3IFRyaW1lc2godmVydGljZXMsIGluZGljZXMpOwogICAgfQoKICB9CgogIGNvbnN0IGNvbXB1dGVOb3JtYWxzX24gPSBuZXcgVmVjMygpOwogIGNvbnN0IHVuc2NhbGVkQUFCQiA9IG5ldyBBQUJCKCk7CiAgY29uc3QgZ2V0RWRnZVZlY3Rvcl92YSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgZ2V0RWRnZVZlY3Rvcl92YiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgY2IgPSBuZXcgVmVjMygpOwogIGNvbnN0IGFiID0gbmV3IFZlYzMoKTsKICBjb25zdCB2YSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgdmIgPSBuZXcgVmVjMygpOwogIGNvbnN0IHZjID0gbmV3IFZlYzMoKTsKICBjb25zdCBjbGlfYWFiYiA9IG5ldyBBQUJCKCk7CiAgY29uc3QgY29tcHV0ZUxvY2FsQUFCQl93b3JsZFZlcnQgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNhbGN1bGF0ZVdvcmxkQUFCQl9mcmFtZSA9IG5ldyBUcmFuc2Zvcm0oKTsKICBjb25zdCBjYWxjdWxhdGVXb3JsZEFBQkJfYWFiYiA9IG5ldyBBQUJCKCk7CiAgLyoqCiAgICogQ29uc3RyYWludCBlcXVhdGlvbiBzb2x2ZXIgYmFzZSBjbGFzcy4KICAgKi8KCiAgY2xhc3MgU29sdmVyIHsKICAgIC8qKgogICAgICogQWxsIGVxdWF0aW9ucyB0byBiZSBzb2x2ZWQKICAgICAqLwoKICAgIC8qKgogICAgICogQHRvZG8gcmVtb3ZlIHVzZWxlc3MgY29uc3RydWN0b3IKICAgICAqLwogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHRoaXMuZXF1YXRpb25zID0gdm9pZCAwOwogICAgICB0aGlzLmVxdWF0aW9ucyA9IFtdOwogICAgfQogICAgLyoqCiAgICAgKiBTaG91bGQgYmUgaW1wbGVtZW50ZWQgaW4gc3ViY2xhc3NlcyEKICAgICAqIEB0b2RvIHVzZSBhYnN0cmFjdAogICAgICogQHJldHVybiBudW1iZXIgb2YgaXRlcmF0aW9ucyBwZXJmb3JtZWQKICAgICAqLwoKCiAgICBzb2x2ZShkdCwgd29ybGQpIHsKICAgICAgcmV0dXJuICgvLyBTaG91bGQgcmV0dXJuIHRoZSBudW1iZXIgb2YgaXRlcmF0aW9ucyBkb25lIQogICAgICAgIDAKICAgICAgKTsKICAgIH0KICAgIC8qKgogICAgICogQWRkIGFuIGVxdWF0aW9uCiAgICAgKi8KCgogICAgYWRkRXF1YXRpb24oZXEpIHsKICAgICAgaWYgKGVxLmVuYWJsZWQgJiYgIWVxLmJpLmlzVHJpZ2dlciAmJiAhZXEuYmouaXNUcmlnZ2VyKSB7CiAgICAgICAgdGhpcy5lcXVhdGlvbnMucHVzaChlcSk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogUmVtb3ZlIGFuIGVxdWF0aW9uCiAgICAgKi8KCgogICAgcmVtb3ZlRXF1YXRpb24oZXEpIHsKICAgICAgY29uc3QgZXFzID0gdGhpcy5lcXVhdGlvbnM7CiAgICAgIGNvbnN0IGkgPSBlcXMuaW5kZXhPZihlcSk7CgogICAgICBpZiAoaSAhPT0gLTEpIHsKICAgICAgICBlcXMuc3BsaWNlKGksIDEpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEFkZCBhbGwgZXF1YXRpb25zCiAgICAgKi8KCgogICAgcmVtb3ZlQWxsRXF1YXRpb25zKCkgewogICAgICB0aGlzLmVxdWF0aW9ucy5sZW5ndGggPSAwOwogICAgfQoKICB9CiAgLyoqCiAgICogQ29uc3RyYWludCBlcXVhdGlvbiBHYXVzcy1TZWlkZWwgc29sdmVyLgogICAqIEB0b2RvIFRoZSBzcG9vayBwYXJhbWV0ZXJzIHNob3VsZCBiZSBzcGVjaWZpZWQgZm9yIGVhY2ggY29uc3RyYWludCwgbm90IGdsb2JhbGx5LgogICAqIEBzZWUgaHR0cHM6Ly93d3c4LmNzLnVtdS5zZS9rdXJzZXIvNURWMDU4L1ZUMDkvbGVjdHVyZXMvc3Bvb2tub3Rlcy5wZGYKICAgKi8KCgogIGNsYXNzIEdTU29sdmVyIGV4dGVuZHMgU29sdmVyIHsKICAgIC8qKgogICAgICogVGhlIG51bWJlciBvZiBzb2x2ZXIgaXRlcmF0aW9ucyBkZXRlcm1pbmVzIHF1YWxpdHkgb2YgdGhlIGNvbnN0cmFpbnRzIGluIHRoZSB3b3JsZC4KICAgICAqIFRoZSBtb3JlIGl0ZXJhdGlvbnMsIHRoZSBtb3JlIGNvcnJlY3Qgc2ltdWxhdGlvbi4gTW9yZSBpdGVyYXRpb25zIG5lZWQgbW9yZSBjb21wdXRhdGlvbnMgdGhvdWdoLiBJZiB5b3UgaGF2ZSBhIGxhcmdlIGdyYXZpdHkgZm9yY2UgaW4geW91ciB3b3JsZCwgeW91IHdpbGwgbmVlZCBtb3JlIGl0ZXJhdGlvbnMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFdoZW4gdG9sZXJhbmNlIGlzIHJlYWNoZWQsIHRoZSBzeXN0ZW0gaXMgYXNzdW1lZCB0byBiZSBjb252ZXJnZWQuCiAgICAgKi8KCiAgICAvKioKICAgICAqIEB0b2RvIHJlbW92ZSB1c2VsZXNzIGNvbnN0cnVjdG9yCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKCkgewogICAgICBzdXBlcigpOwogICAgICB0aGlzLml0ZXJhdGlvbnMgPSB2b2lkIDA7CiAgICAgIHRoaXMudG9sZXJhbmNlID0gdm9pZCAwOwogICAgICB0aGlzLml0ZXJhdGlvbnMgPSAxMDsKICAgICAgdGhpcy50b2xlcmFuY2UgPSAxZS03OwogICAgfQogICAgLyoqCiAgICAgKiBTb2x2ZQogICAgICogQHJldHVybiBudW1iZXIgb2YgaXRlcmF0aW9ucyBwZXJmb3JtZWQKICAgICAqLwoKCiAgICBzb2x2ZShkdCwgd29ybGQpIHsKICAgICAgbGV0IGl0ZXIgPSAwOwogICAgICBjb25zdCBtYXhJdGVyID0gdGhpcy5pdGVyYXRpb25zOwogICAgICBjb25zdCB0b2xTcXVhcmVkID0gdGhpcy50b2xlcmFuY2UgKiB0aGlzLnRvbGVyYW5jZTsKICAgICAgY29uc3QgZXF1YXRpb25zID0gdGhpcy5lcXVhdGlvbnM7CiAgICAgIGNvbnN0IE5lcSA9IGVxdWF0aW9ucy5sZW5ndGg7CiAgICAgIGNvbnN0IGJvZGllcyA9IHdvcmxkLmJvZGllczsKICAgICAgY29uc3QgTmJvZGllcyA9IGJvZGllcy5sZW5ndGg7CiAgICAgIGNvbnN0IGggPSBkdDsKICAgICAgbGV0IEI7CiAgICAgIGxldCBpbnZDOwogICAgICBsZXQgZGVsdGFsYW1iZGE7CiAgICAgIGxldCBkZWx0YWxhbWJkYVRvdDsKICAgICAgbGV0IEdXbGFtYmRhOwogICAgICBsZXQgbGFtYmRhajsgLy8gVXBkYXRlIHNvbHZlIG1hc3MKCiAgICAgIGlmIChOZXEgIT09IDApIHsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTmJvZGllczsgaSsrKSB7CiAgICAgICAgICBib2RpZXNbaV0udXBkYXRlU29sdmVNYXNzUHJvcGVydGllcygpOwogICAgICAgIH0KICAgICAgfSAvLyBUaGluZ3MgdGhhdCBkbyBub3QgY2hhbmdlIGR1cmluZyBpdGVyYXRpb24gY2FuIGJlIGNvbXB1dGVkIG9uY2UKCgogICAgICBjb25zdCBpbnZDcyA9IEdTU29sdmVyX3NvbHZlX2ludkNzOwogICAgICBjb25zdCBCcyA9IEdTU29sdmVyX3NvbHZlX0JzOwogICAgICBjb25zdCBsYW1iZGEgPSBHU1NvbHZlcl9zb2x2ZV9sYW1iZGE7CiAgICAgIGludkNzLmxlbmd0aCA9IE5lcTsKICAgICAgQnMubGVuZ3RoID0gTmVxOwogICAgICBsYW1iZGEubGVuZ3RoID0gTmVxOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE5lcTsgaSsrKSB7CiAgICAgICAgY29uc3QgYyA9IGVxdWF0aW9uc1tpXTsKICAgICAgICBsYW1iZGFbaV0gPSAwLjA7CiAgICAgICAgQnNbaV0gPSBjLmNvbXB1dGVCKGgpOwogICAgICAgIGludkNzW2ldID0gMS4wIC8gYy5jb21wdXRlQygpOwogICAgICB9CgogICAgICBpZiAoTmVxICE9PSAwKSB7CiAgICAgICAgLy8gUmVzZXQgdmxhbWJkYQogICAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOYm9kaWVzOyBpKyspIHsKICAgICAgICAgIGNvbnN0IGIgPSBib2RpZXNbaV07CiAgICAgICAgICBjb25zdCB2bGFtYmRhID0gYi52bGFtYmRhOwogICAgICAgICAgY29uc3Qgd2xhbWJkYSA9IGIud2xhbWJkYTsKICAgICAgICAgIHZsYW1iZGEuc2V0KDAsIDAsIDApOwogICAgICAgICAgd2xhbWJkYS5zZXQoMCwgMCwgMCk7CiAgICAgICAgfSAvLyBJdGVyYXRlIG92ZXIgZXF1YXRpb25zCgoKICAgICAgICBmb3IgKGl0ZXIgPSAwOyBpdGVyICE9PSBtYXhJdGVyOyBpdGVyKyspIHsKICAgICAgICAgIC8vIEFjY3VtdWxhdGUgdGhlIHRvdGFsIGVycm9yIGZvciBlYWNoIGl0ZXJhdGlvbi4KICAgICAgICAgIGRlbHRhbGFtYmRhVG90ID0gMC4wOwoKICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqICE9PSBOZXE7IGorKykgewogICAgICAgICAgICBjb25zdCBjID0gZXF1YXRpb25zW2pdOyAvLyBDb21wdXRlIGl0ZXJhdGlvbgoKICAgICAgICAgICAgQiA9IEJzW2pdOwogICAgICAgICAgICBpbnZDID0gaW52Q3Nbal07CiAgICAgICAgICAgIGxhbWJkYWogPSBsYW1iZGFbal07CiAgICAgICAgICAgIEdXbGFtYmRhID0gYy5jb21wdXRlR1dsYW1iZGEoKTsKICAgICAgICAgICAgZGVsdGFsYW1iZGEgPSBpbnZDICogKEIgLSBHV2xhbWJkYSAtIGMuZXBzICogbGFtYmRhaik7IC8vIENsYW1wIGlmIHdlIGFyZSBub3Qgd2l0aGluIHRoZSBtaW4vbWF4IGludGVydmFsCgogICAgICAgICAgICBpZiAobGFtYmRhaiArIGRlbHRhbGFtYmRhIDwgYy5taW5Gb3JjZSkgewogICAgICAgICAgICAgIGRlbHRhbGFtYmRhID0gYy5taW5Gb3JjZSAtIGxhbWJkYWo7CiAgICAgICAgICAgIH0gZWxzZSBpZiAobGFtYmRhaiArIGRlbHRhbGFtYmRhID4gYy5tYXhGb3JjZSkgewogICAgICAgICAgICAgIGRlbHRhbGFtYmRhID0gYy5tYXhGb3JjZSAtIGxhbWJkYWo7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGxhbWJkYVtqXSArPSBkZWx0YWxhbWJkYTsKICAgICAgICAgICAgZGVsdGFsYW1iZGFUb3QgKz0gZGVsdGFsYW1iZGEgPiAwLjAgPyBkZWx0YWxhbWJkYSA6IC1kZWx0YWxhbWJkYTsgLy8gYWJzKGRlbHRhbGFtYmRhKQoKICAgICAgICAgICAgYy5hZGRUb1dsYW1iZGEoZGVsdGFsYW1iZGEpOwogICAgICAgICAgfSAvLyBJZiB0aGUgdG90YWwgZXJyb3IgaXMgc21hbGwgZW5vdWdoIC0gc3RvcCBpdGVyYXRlCgoKICAgICAgICAgIGlmIChkZWx0YWxhbWJkYVRvdCAqIGRlbHRhbGFtYmRhVG90IDwgdG9sU3F1YXJlZCkgewogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICB9IC8vIEFkZCByZXN1bHQgdG8gdmVsb2NpdHkKCgogICAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOYm9kaWVzOyBpKyspIHsKICAgICAgICAgIGNvbnN0IGIgPSBib2RpZXNbaV07CiAgICAgICAgICBjb25zdCB2ID0gYi52ZWxvY2l0eTsKICAgICAgICAgIGNvbnN0IHcgPSBiLmFuZ3VsYXJWZWxvY2l0eTsKICAgICAgICAgIGIudmxhbWJkYS52bXVsKGIubGluZWFyRmFjdG9yLCBiLnZsYW1iZGEpOwogICAgICAgICAgdi52YWRkKGIudmxhbWJkYSwgdik7CiAgICAgICAgICBiLndsYW1iZGEudm11bChiLmFuZ3VsYXJGYWN0b3IsIGIud2xhbWJkYSk7CiAgICAgICAgICB3LnZhZGQoYi53bGFtYmRhLCB3KTsKICAgICAgICB9IC8vIFNldCB0aGUgYC5tdWx0aXBsaWVyYCBwcm9wZXJ0eSBvZiBlYWNoIGVxdWF0aW9uCgoKICAgICAgICBsZXQgbCA9IGVxdWF0aW9ucy5sZW5ndGg7CiAgICAgICAgY29uc3QgaW52RHQgPSAxIC8gaDsKCiAgICAgICAgd2hpbGUgKGwtLSkgewogICAgICAgICAgZXF1YXRpb25zW2xdLm11bHRpcGxpZXIgPSBsYW1iZGFbbF0gKiBpbnZEdDsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBpdGVyOwogICAgfQoKICB9IC8vIEp1c3QgdGVtcG9yYXJ5IG51bWJlciBob2xkZXJzIHRoYXQgd2Ugd2FudCB0byByZXVzZSBlYWNoIGl0ZXJhdGlvbi4KCgogIGNvbnN0IEdTU29sdmVyX3NvbHZlX2xhbWJkYSA9IFtdOwogIGNvbnN0IEdTU29sdmVyX3NvbHZlX2ludkNzID0gW107CiAgY29uc3QgR1NTb2x2ZXJfc29sdmVfQnMgPSBbXTsKICAvKioKICAgKiBGb3IgcG9vbGluZyBvYmplY3RzIHRoYXQgY2FuIGJlIHJldXNlZC4KICAgKi8KCgogIGNsYXNzIFBvb2wgewogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHRoaXMub2JqZWN0cyA9IFtdOwogICAgICB0aGlzLnR5cGUgPSBPYmplY3Q7CiAgICB9CiAgICAvKioKICAgICAqIFJlbGVhc2UgYW4gb2JqZWN0IGFmdGVyIHVzZQogICAgICovCgoKICAgIHJlbGVhc2UoLi4uYXJncykgewogICAgICBjb25zdCBOYXJncyA9IGFyZ3MubGVuZ3RoOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE5hcmdzOyBpKyspIHsKICAgICAgICB0aGlzLm9iamVjdHMucHVzaChhcmdzW2ldKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhbiBvYmplY3QKICAgICAqLwoKCiAgICBnZXQoKSB7CiAgICAgIGlmICh0aGlzLm9iamVjdHMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0T2JqZWN0KCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHRoaXMub2JqZWN0cy5wb3AoKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBDb25zdHJ1Y3QgYW4gb2JqZWN0LiBTaG91bGQgYmUgaW1wbGVtZW50ZWQgaW4gZWFjaCBzdWJjbGFzcy4KICAgICAqLwoKCiAgICBjb25zdHJ1Y3RPYmplY3QoKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignY29uc3RydWN0T2JqZWN0KCkgbm90IGltcGxlbWVudGVkIGluIHRoaXMgUG9vbCBzdWJjbGFzcyB5ZXQhJyk7CiAgICB9CiAgICAvKioKICAgICAqIEByZXR1cm4gU2VsZiwgZm9yIGNoYWluaW5nCiAgICAgKi8KCgogICAgcmVzaXplKHNpemUpIHsKICAgICAgY29uc3Qgb2JqZWN0cyA9IHRoaXMub2JqZWN0czsKCiAgICAgIHdoaWxlIChvYmplY3RzLmxlbmd0aCA+IHNpemUpIHsKICAgICAgICBvYmplY3RzLnBvcCgpOwogICAgICB9CgogICAgICB3aGlsZSAob2JqZWN0cy5sZW5ndGggPCBzaXplKSB7CiAgICAgICAgb2JqZWN0cy5wdXNoKHRoaXMuY29uc3RydWN0T2JqZWN0KCkpOwogICAgICB9CgogICAgICByZXR1cm4gdGhpczsKICAgIH0KCiAgfQogIC8qKgogICAqIFZlYzNQb29sCiAgICovCgoKICBjbGFzcyBWZWMzUG9vbCBleHRlbmRzIFBvb2wgewogICAgY29uc3RydWN0b3IoLi4uYXJncykgewogICAgICBzdXBlciguLi5hcmdzKTsKICAgICAgdGhpcy50eXBlID0gVmVjMzsKICAgIH0KICAgIC8qKgogICAgICogQ29uc3RydWN0IGEgdmVjdG9yCiAgICAgKi8KCgogICAgY29uc3RydWN0T2JqZWN0KCkgewogICAgICByZXR1cm4gbmV3IFZlYzMoKTsKICAgIH0KCiAgfQoKICBsZXQgX0NPTExJU0lPTl9UWVBFUyRzcGhlLCBfQ09MTElTSU9OX1RZUEVTJHNwaGUyLCBfQ09MTElTSU9OX1RZUEVTJGJveEIsIF9DT0xMSVNJT05fVFlQRVMkc3BoZTMsIF9DT0xMSVNJT05fVFlQRVMkcGxhbiwgX0NPTExJU0lPTl9UWVBFUyRjb252LCBfQ09MTElTSU9OX1RZUEVTJHNwaGU0LCBfQ09MTElTSU9OX1RZUEVTJHBsYW4yLCBfQ09MTElTSU9OX1RZUEVTJGJveEMsIF9DT0xMSVNJT05fVFlQRVMkc3BoZTUsIF9DT0xMSVNJT05fVFlQRVMkYm94SCwgX0NPTExJU0lPTl9UWVBFUyRjb252MiwgX0NPTExJU0lPTl9UWVBFUyRzcGhlNiwgX0NPTExJU0lPTl9UWVBFUyRwbGFuMywgX0NPTExJU0lPTl9UWVBFUyRib3hQLCBfQ09MTElTSU9OX1RZUEVTJGNvbnYzLCBfQ09MTElTSU9OX1RZUEVTJGN5bGksIF9DT0xMSVNJT05fVFlQRVMkc3BoZTcsIF9DT0xMSVNJT05fVFlQRVMkcGxhbjQsIF9DT0xMSVNJT05fVFlQRVMkYm94QzIsIF9DT0xMSVNJT05fVFlQRVMkY29udjQsIF9DT0xMSVNJT05fVFlQRVMkaGVpZywgX0NPTExJU0lPTl9UWVBFUyRwYXJ0LCBfQ09MTElTSU9OX1RZUEVTJHNwaGU4LCBfQ09MTElTSU9OX1RZUEVTJHBsYW41OyAvLyBOYW1pbmcgcnVsZTogYmFzZWQgb2YgdGhlIG9yZGVyIGluIFNIQVBFX1RZUEVTLAogIC8vIHRoZSBmaXJzdCBwYXJ0IG9mIHRoZSBtZXRob2QgaXMgZm9ybWVkIGJ5IHRoZQogIC8vIHNoYXBlIHR5cGUgdGhhdCBjb21lcyBiZWZvcmUsIGluIHRoZSBzZWNvbmQgcGFydAogIC8vIHRoZXJlIGlzIHRoZSBzaGFwZSB0eXBlIHRoYXQgY29tZXMgYWZ0ZXIgaW4gdGhlIFNIQVBFX1RZUEVTIGxpc3QKCgogIGNvbnN0IENPTExJU0lPTl9UWVBFUyA9IHsKICAgIHNwaGVyZVNwaGVyZTogU2hhcGUudHlwZXMuU1BIRVJFLAogICAgc3BoZXJlUGxhbmU6IFNoYXBlLnR5cGVzLlNQSEVSRSB8IFNoYXBlLnR5cGVzLlBMQU5FLAogICAgYm94Qm94OiBTaGFwZS50eXBlcy5CT1ggfCBTaGFwZS50eXBlcy5CT1gsCiAgICBzcGhlcmVCb3g6IFNoYXBlLnR5cGVzLlNQSEVSRSB8IFNoYXBlLnR5cGVzLkJPWCwKICAgIHBsYW5lQm94OiBTaGFwZS50eXBlcy5QTEFORSB8IFNoYXBlLnR5cGVzLkJPWCwKICAgIGNvbnZleENvbnZleDogU2hhcGUudHlwZXMuQ09OVkVYUE9MWUhFRFJPTiwKICAgIHNwaGVyZUNvbnZleDogU2hhcGUudHlwZXMuU1BIRVJFIHwgU2hhcGUudHlwZXMuQ09OVkVYUE9MWUhFRFJPTiwKICAgIHBsYW5lQ29udmV4OiBTaGFwZS50eXBlcy5QTEFORSB8IFNoYXBlLnR5cGVzLkNPTlZFWFBPTFlIRURST04sCiAgICBib3hDb252ZXg6IFNoYXBlLnR5cGVzLkJPWCB8IFNoYXBlLnR5cGVzLkNPTlZFWFBPTFlIRURST04sCiAgICBzcGhlcmVIZWlnaHRmaWVsZDogU2hhcGUudHlwZXMuU1BIRVJFIHwgU2hhcGUudHlwZXMuSEVJR0hURklFTEQsCiAgICBib3hIZWlnaHRmaWVsZDogU2hhcGUudHlwZXMuQk9YIHwgU2hhcGUudHlwZXMuSEVJR0hURklFTEQsCiAgICBjb252ZXhIZWlnaHRmaWVsZDogU2hhcGUudHlwZXMuQ09OVkVYUE9MWUhFRFJPTiB8IFNoYXBlLnR5cGVzLkhFSUdIVEZJRUxELAogICAgc3BoZXJlUGFydGljbGU6IFNoYXBlLnR5cGVzLlBBUlRJQ0xFIHwgU2hhcGUudHlwZXMuU1BIRVJFLAogICAgcGxhbmVQYXJ0aWNsZTogU2hhcGUudHlwZXMuUExBTkUgfCBTaGFwZS50eXBlcy5QQVJUSUNMRSwKICAgIGJveFBhcnRpY2xlOiBTaGFwZS50eXBlcy5CT1ggfCBTaGFwZS50eXBlcy5QQVJUSUNMRSwKICAgIGNvbnZleFBhcnRpY2xlOiBTaGFwZS50eXBlcy5QQVJUSUNMRSB8IFNoYXBlLnR5cGVzLkNPTlZFWFBPTFlIRURST04sCiAgICBjeWxpbmRlckN5bGluZGVyOiBTaGFwZS50eXBlcy5DWUxJTkRFUiwKICAgIHNwaGVyZUN5bGluZGVyOiBTaGFwZS50eXBlcy5TUEhFUkUgfCBTaGFwZS50eXBlcy5DWUxJTkRFUiwKICAgIHBsYW5lQ3lsaW5kZXI6IFNoYXBlLnR5cGVzLlBMQU5FIHwgU2hhcGUudHlwZXMuQ1lMSU5ERVIsCiAgICBib3hDeWxpbmRlcjogU2hhcGUudHlwZXMuQk9YIHwgU2hhcGUudHlwZXMuQ1lMSU5ERVIsCiAgICBjb252ZXhDeWxpbmRlcjogU2hhcGUudHlwZXMuQ09OVkVYUE9MWUhFRFJPTiB8IFNoYXBlLnR5cGVzLkNZTElOREVSLAogICAgaGVpZ2h0ZmllbGRDeWxpbmRlcjogU2hhcGUudHlwZXMuSEVJR0hURklFTEQgfCBTaGFwZS50eXBlcy5DWUxJTkRFUiwKICAgIHBhcnRpY2xlQ3lsaW5kZXI6IFNoYXBlLnR5cGVzLlBBUlRJQ0xFIHwgU2hhcGUudHlwZXMuQ1lMSU5ERVIsCiAgICBzcGhlcmVUcmltZXNoOiBTaGFwZS50eXBlcy5TUEhFUkUgfCBTaGFwZS50eXBlcy5UUklNRVNILAogICAgcGxhbmVUcmltZXNoOiBTaGFwZS50eXBlcy5QTEFORSB8IFNoYXBlLnR5cGVzLlRSSU1FU0gKICB9OwogIF9DT0xMSVNJT05fVFlQRVMkc3BoZSA9IENPTExJU0lPTl9UWVBFUy5zcGhlcmVTcGhlcmU7CiAgX0NPTExJU0lPTl9UWVBFUyRzcGhlMiA9IENPTExJU0lPTl9UWVBFUy5zcGhlcmVQbGFuZTsKICBfQ09MTElTSU9OX1RZUEVTJGJveEIgPSBDT0xMSVNJT05fVFlQRVMuYm94Qm94OwogIF9DT0xMSVNJT05fVFlQRVMkc3BoZTMgPSBDT0xMSVNJT05fVFlQRVMuc3BoZXJlQm94OwogIF9DT0xMSVNJT05fVFlQRVMkcGxhbiA9IENPTExJU0lPTl9UWVBFUy5wbGFuZUJveDsKICBfQ09MTElTSU9OX1RZUEVTJGNvbnYgPSBDT0xMSVNJT05fVFlQRVMuY29udmV4Q29udmV4OwogIF9DT0xMSVNJT05fVFlQRVMkc3BoZTQgPSBDT0xMSVNJT05fVFlQRVMuc3BoZXJlQ29udmV4OwogIF9DT0xMSVNJT05fVFlQRVMkcGxhbjIgPSBDT0xMSVNJT05fVFlQRVMucGxhbmVDb252ZXg7CiAgX0NPTExJU0lPTl9UWVBFUyRib3hDID0gQ09MTElTSU9OX1RZUEVTLmJveENvbnZleDsKICBfQ09MTElTSU9OX1RZUEVTJHNwaGU1ID0gQ09MTElTSU9OX1RZUEVTLnNwaGVyZUhlaWdodGZpZWxkOwogIF9DT0xMSVNJT05fVFlQRVMkYm94SCA9IENPTExJU0lPTl9UWVBFUy5ib3hIZWlnaHRmaWVsZDsKICBfQ09MTElTSU9OX1RZUEVTJGNvbnYyID0gQ09MTElTSU9OX1RZUEVTLmNvbnZleEhlaWdodGZpZWxkOwogIF9DT0xMSVNJT05fVFlQRVMkc3BoZTYgPSBDT0xMSVNJT05fVFlQRVMuc3BoZXJlUGFydGljbGU7CiAgX0NPTExJU0lPTl9UWVBFUyRwbGFuMyA9IENPTExJU0lPTl9UWVBFUy5wbGFuZVBhcnRpY2xlOwogIF9DT0xMSVNJT05fVFlQRVMkYm94UCA9IENPTExJU0lPTl9UWVBFUy5ib3hQYXJ0aWNsZTsKICBfQ09MTElTSU9OX1RZUEVTJGNvbnYzID0gQ09MTElTSU9OX1RZUEVTLmNvbnZleFBhcnRpY2xlOwogIF9DT0xMSVNJT05fVFlQRVMkY3lsaSA9IENPTExJU0lPTl9UWVBFUy5jeWxpbmRlckN5bGluZGVyOwogIF9DT0xMSVNJT05fVFlQRVMkc3BoZTcgPSBDT0xMSVNJT05fVFlQRVMuc3BoZXJlQ3lsaW5kZXI7CiAgX0NPTExJU0lPTl9UWVBFUyRwbGFuNCA9IENPTExJU0lPTl9UWVBFUy5wbGFuZUN5bGluZGVyOwogIF9DT0xMSVNJT05fVFlQRVMkYm94QzIgPSBDT0xMSVNJT05fVFlQRVMuYm94Q3lsaW5kZXI7CiAgX0NPTExJU0lPTl9UWVBFUyRjb252NCA9IENPTExJU0lPTl9UWVBFUy5jb252ZXhDeWxpbmRlcjsKICBfQ09MTElTSU9OX1RZUEVTJGhlaWcgPSBDT0xMSVNJT05fVFlQRVMuaGVpZ2h0ZmllbGRDeWxpbmRlcjsKICBfQ09MTElTSU9OX1RZUEVTJHBhcnQgPSBDT0xMSVNJT05fVFlQRVMucGFydGljbGVDeWxpbmRlcjsKICBfQ09MTElTSU9OX1RZUEVTJHNwaGU4ID0gQ09MTElTSU9OX1RZUEVTLnNwaGVyZVRyaW1lc2g7CiAgX0NPTExJU0lPTl9UWVBFUyRwbGFuNSA9IENPTExJU0lPTl9UWVBFUy5wbGFuZVRyaW1lc2g7CiAgLyoqCiAgICogSGVscGVyIGNsYXNzIGZvciB0aGUgV29ybGQuIEdlbmVyYXRlcyBDb250YWN0RXF1YXRpb25zLgogICAqIEB0b2RvIFNwaGVyZS1Db252ZXhQb2x5aGVkcm9uIGNvbnRhY3RzCiAgICogQHRvZG8gQ29udGFjdCByZWR1Y3Rpb24KICAgKiBAdG9kbyBzaG91bGQgbW92ZSBtZXRob2RzIHRvIHByb3RvdHlwZQogICAqLwoKICBjbGFzcyBOYXJyb3dwaGFzZSB7CiAgICAvKioKICAgICAqIEludGVybmFsIHN0b3JhZ2Ugb2YgcG9vbGVkIGNvbnRhY3QgcG9pbnRzLgogICAgICovCgogICAgLyoqCiAgICAgKiBQb29sZWQgdmVjdG9ycy4KICAgICAqLwogICAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJHNwaGVdKCkgewogICAgICByZXR1cm4gdGhpcy5zcGhlcmVTcGhlcmU7CiAgICB9CgogICAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJHNwaGUyXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuc3BoZXJlUGxhbmU7CiAgICB9CgogICAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJGJveEJdKCkgewogICAgICByZXR1cm4gdGhpcy5ib3hCb3g7CiAgICB9CgogICAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJHNwaGUzXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuc3BoZXJlQm94OwogICAgfQoKICAgIGdldCBbX0NPTExJU0lPTl9UWVBFUyRwbGFuXSgpIHsKICAgICAgcmV0dXJuIHRoaXMucGxhbmVCb3g7CiAgICB9CgogICAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJGNvbnZdKCkgewogICAgICByZXR1cm4gdGhpcy5jb252ZXhDb252ZXg7CiAgICB9CgogICAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJHNwaGU0XSgpIHsKICAgICAgcmV0dXJuIHRoaXMuc3BoZXJlQ29udmV4OwogICAgfQoKICAgIGdldCBbX0NPTExJU0lPTl9UWVBFUyRwbGFuMl0oKSB7CiAgICAgIHJldHVybiB0aGlzLnBsYW5lQ29udmV4OwogICAgfQoKICAgIGdldCBbX0NPTExJU0lPTl9UWVBFUyRib3hDXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuYm94Q29udmV4OwogICAgfQoKICAgIGdldCBbX0NPTExJU0lPTl9UWVBFUyRzcGhlNV0oKSB7CiAgICAgIHJldHVybiB0aGlzLnNwaGVyZUhlaWdodGZpZWxkOwogICAgfQoKICAgIGdldCBbX0NPTExJU0lPTl9UWVBFUyRib3hIXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuYm94SGVpZ2h0ZmllbGQ7CiAgICB9CgogICAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJGNvbnYyXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuY29udmV4SGVpZ2h0ZmllbGQ7CiAgICB9CgogICAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJHNwaGU2XSgpIHsKICAgICAgcmV0dXJuIHRoaXMuc3BoZXJlUGFydGljbGU7CiAgICB9CgogICAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJHBsYW4zXSgpIHsKICAgICAgcmV0dXJuIHRoaXMucGxhbmVQYXJ0aWNsZTsKICAgIH0KCiAgICBnZXQgW19DT0xMSVNJT05fVFlQRVMkYm94UF0oKSB7CiAgICAgIHJldHVybiB0aGlzLmJveFBhcnRpY2xlOwogICAgfQoKICAgIGdldCBbX0NPTExJU0lPTl9UWVBFUyRjb252M10oKSB7CiAgICAgIHJldHVybiB0aGlzLmNvbnZleFBhcnRpY2xlOwogICAgfQoKICAgIGdldCBbX0NPTExJU0lPTl9UWVBFUyRjeWxpXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuY29udmV4Q29udmV4OwogICAgfQoKICAgIGdldCBbX0NPTExJU0lPTl9UWVBFUyRzcGhlN10oKSB7CiAgICAgIHJldHVybiB0aGlzLnNwaGVyZUNvbnZleDsKICAgIH0KCiAgICBnZXQgW19DT0xMSVNJT05fVFlQRVMkcGxhbjRdKCkgewogICAgICByZXR1cm4gdGhpcy5wbGFuZUNvbnZleDsKICAgIH0KCiAgICBnZXQgW19DT0xMSVNJT05fVFlQRVMkYm94QzJdKCkgewogICAgICByZXR1cm4gdGhpcy5ib3hDb252ZXg7CiAgICB9CgogICAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJGNvbnY0XSgpIHsKICAgICAgcmV0dXJuIHRoaXMuY29udmV4Q29udmV4OwogICAgfQoKICAgIGdldCBbX0NPTExJU0lPTl9UWVBFUyRoZWlnXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuaGVpZ2h0ZmllbGRDeWxpbmRlcjsKICAgIH0KCiAgICBnZXQgW19DT0xMSVNJT05fVFlQRVMkcGFydF0oKSB7CiAgICAgIHJldHVybiB0aGlzLnBhcnRpY2xlQ3lsaW5kZXI7CiAgICB9CgogICAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJHNwaGU4XSgpIHsKICAgICAgcmV0dXJuIHRoaXMuc3BoZXJlVHJpbWVzaDsKICAgIH0KCiAgICBnZXQgW19DT0xMSVNJT05fVFlQRVMkcGxhbjVdKCkgewogICAgICByZXR1cm4gdGhpcy5wbGFuZVRyaW1lc2g7CiAgICB9IC8vIGdldCBbQ09MTElTSU9OX1RZUEVTLmNvbnZleFRyaW1lc2hdKCkgewogICAgLy8gICByZXR1cm4gdGhpcy5jb252ZXhUcmltZXNoCiAgICAvLyB9CgoKICAgIGNvbnN0cnVjdG9yKHdvcmxkKSB7CiAgICAgIHRoaXMuY29udGFjdFBvaW50UG9vbCA9IHZvaWQgMDsKICAgICAgdGhpcy5mcmljdGlvbkVxdWF0aW9uUG9vbCA9IHZvaWQgMDsKICAgICAgdGhpcy5yZXN1bHQgPSB2b2lkIDA7CiAgICAgIHRoaXMuZnJpY3Rpb25SZXN1bHQgPSB2b2lkIDA7CiAgICAgIHRoaXMudjNwb29sID0gdm9pZCAwOwogICAgICB0aGlzLndvcmxkID0gdm9pZCAwOwogICAgICB0aGlzLmN1cnJlbnRDb250YWN0TWF0ZXJpYWwgPSB2b2lkIDA7CiAgICAgIHRoaXMuZW5hYmxlRnJpY3Rpb25SZWR1Y3Rpb24gPSB2b2lkIDA7CiAgICAgIHRoaXMuY29udGFjdFBvaW50UG9vbCA9IFtdOwogICAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25Qb29sID0gW107CiAgICAgIHRoaXMucmVzdWx0ID0gW107CiAgICAgIHRoaXMuZnJpY3Rpb25SZXN1bHQgPSBbXTsKICAgICAgdGhpcy52M3Bvb2wgPSBuZXcgVmVjM1Bvb2woKTsKICAgICAgdGhpcy53b3JsZCA9IHdvcmxkOwogICAgICB0aGlzLmN1cnJlbnRDb250YWN0TWF0ZXJpYWwgPSB3b3JsZC5kZWZhdWx0Q29udGFjdE1hdGVyaWFsOwogICAgICB0aGlzLmVuYWJsZUZyaWN0aW9uUmVkdWN0aW9uID0gZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIE1ha2UgYSBjb250YWN0IG9iamVjdCwgYnkgdXNpbmcgdGhlIGludGVybmFsIHBvb2wgb3IgY3JlYXRpbmcgYSBuZXcgb25lLgogICAgICovCgoKICAgIGNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgb3ZlcnJpZGVTaGFwZUEsIG92ZXJyaWRlU2hhcGVCKSB7CiAgICAgIGxldCBjOwoKICAgICAgaWYgKHRoaXMuY29udGFjdFBvaW50UG9vbC5sZW5ndGgpIHsKICAgICAgICBjID0gdGhpcy5jb250YWN0UG9pbnRQb29sLnBvcCgpOwogICAgICAgIGMuYmkgPSBiaTsKICAgICAgICBjLmJqID0gYmo7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYyA9IG5ldyBDb250YWN0RXF1YXRpb24oYmksIGJqKTsKICAgICAgfQoKICAgICAgYy5lbmFibGVkID0gYmkuY29sbGlzaW9uUmVzcG9uc2UgJiYgYmouY29sbGlzaW9uUmVzcG9uc2UgJiYgc2kuY29sbGlzaW9uUmVzcG9uc2UgJiYgc2ouY29sbGlzaW9uUmVzcG9uc2U7CiAgICAgIGNvbnN0IGNtID0gdGhpcy5jdXJyZW50Q29udGFjdE1hdGVyaWFsOwogICAgICBjLnJlc3RpdHV0aW9uID0gY20ucmVzdGl0dXRpb247CiAgICAgIGMuc2V0U3Bvb2tQYXJhbXMoY20uY29udGFjdEVxdWF0aW9uU3RpZmZuZXNzLCBjbS5jb250YWN0RXF1YXRpb25SZWxheGF0aW9uLCB0aGlzLndvcmxkLmR0KTsKICAgICAgY29uc3QgbWF0QSA9IHNpLm1hdGVyaWFsIHx8IGJpLm1hdGVyaWFsOwogICAgICBjb25zdCBtYXRCID0gc2oubWF0ZXJpYWwgfHwgYmoubWF0ZXJpYWw7CgogICAgICBpZiAobWF0QSAmJiBtYXRCICYmIG1hdEEucmVzdGl0dXRpb24gPj0gMCAmJiBtYXRCLnJlc3RpdHV0aW9uID49IDApIHsKICAgICAgICBjLnJlc3RpdHV0aW9uID0gbWF0QS5yZXN0aXR1dGlvbiAqIG1hdEIucmVzdGl0dXRpb247CiAgICAgIH0KCiAgICAgIGMuc2kgPSBvdmVycmlkZVNoYXBlQSB8fCBzaTsKICAgICAgYy5zaiA9IG92ZXJyaWRlU2hhcGVCIHx8IHNqOwogICAgICByZXR1cm4gYzsKICAgIH0KCiAgICBjcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KGNvbnRhY3RFcXVhdGlvbiwgb3V0QXJyYXkpIHsKICAgICAgY29uc3QgYm9keUEgPSBjb250YWN0RXF1YXRpb24uYmk7CiAgICAgIGNvbnN0IGJvZHlCID0gY29udGFjdEVxdWF0aW9uLmJqOwogICAgICBjb25zdCBzaGFwZUEgPSBjb250YWN0RXF1YXRpb24uc2k7CiAgICAgIGNvbnN0IHNoYXBlQiA9IGNvbnRhY3RFcXVhdGlvbi5zajsKICAgICAgY29uc3Qgd29ybGQgPSB0aGlzLndvcmxkOwogICAgICBjb25zdCBjbSA9IHRoaXMuY3VycmVudENvbnRhY3RNYXRlcmlhbDsgLy8gSWYgZnJpY3Rpb24gb3IgcmVzdGl0dXRpb24gd2VyZSBzcGVjaWZpZWQgaW4gdGhlIG1hdGVyaWFsLCB1c2UgdGhlbQoKICAgICAgbGV0IGZyaWN0aW9uID0gY20uZnJpY3Rpb247CiAgICAgIGNvbnN0IG1hdEEgPSBzaGFwZUEubWF0ZXJpYWwgfHwgYm9keUEubWF0ZXJpYWw7CiAgICAgIGNvbnN0IG1hdEIgPSBzaGFwZUIubWF0ZXJpYWwgfHwgYm9keUIubWF0ZXJpYWw7CgogICAgICBpZiAobWF0QSAmJiBtYXRCICYmIG1hdEEuZnJpY3Rpb24gPj0gMCAmJiBtYXRCLmZyaWN0aW9uID49IDApIHsKICAgICAgICBmcmljdGlvbiA9IG1hdEEuZnJpY3Rpb24gKiBtYXRCLmZyaWN0aW9uOwogICAgICB9CgogICAgICBpZiAoZnJpY3Rpb24gPiAwKSB7CiAgICAgICAgLy8gQ3JlYXRlIDIgdGFuZ2VudCBlcXVhdGlvbnMKICAgICAgICBjb25zdCBtdWcgPSBmcmljdGlvbiAqIHdvcmxkLmdyYXZpdHkubGVuZ3RoKCk7CiAgICAgICAgbGV0IHJlZHVjZWRNYXNzID0gYm9keUEuaW52TWFzcyArIGJvZHlCLmludk1hc3M7CgogICAgICAgIGlmIChyZWR1Y2VkTWFzcyA+IDApIHsKICAgICAgICAgIHJlZHVjZWRNYXNzID0gMSAvIHJlZHVjZWRNYXNzOwogICAgICAgIH0KCiAgICAgICAgY29uc3QgcG9vbCA9IHRoaXMuZnJpY3Rpb25FcXVhdGlvblBvb2w7CiAgICAgICAgY29uc3QgYzEgPSBwb29sLmxlbmd0aCA/IHBvb2wucG9wKCkgOiBuZXcgRnJpY3Rpb25FcXVhdGlvbihib2R5QSwgYm9keUIsIG11ZyAqIHJlZHVjZWRNYXNzKTsKICAgICAgICBjb25zdCBjMiA9IHBvb2wubGVuZ3RoID8gcG9vbC5wb3AoKSA6IG5ldyBGcmljdGlvbkVxdWF0aW9uKGJvZHlBLCBib2R5QiwgbXVnICogcmVkdWNlZE1hc3MpOwogICAgICAgIGMxLmJpID0gYzIuYmkgPSBib2R5QTsKICAgICAgICBjMS5iaiA9IGMyLmJqID0gYm9keUI7CiAgICAgICAgYzEubWluRm9yY2UgPSBjMi5taW5Gb3JjZSA9IC1tdWcgKiByZWR1Y2VkTWFzczsKICAgICAgICBjMS5tYXhGb3JjZSA9IGMyLm1heEZvcmNlID0gbXVnICogcmVkdWNlZE1hc3M7IC8vIENvcHkgb3ZlciB0aGUgcmVsYXRpdmUgdmVjdG9ycwoKICAgICAgICBjMS5yaS5jb3B5KGNvbnRhY3RFcXVhdGlvbi5yaSk7CiAgICAgICAgYzEucmouY29weShjb250YWN0RXF1YXRpb24ucmopOwogICAgICAgIGMyLnJpLmNvcHkoY29udGFjdEVxdWF0aW9uLnJpKTsKICAgICAgICBjMi5yai5jb3B5KGNvbnRhY3RFcXVhdGlvbi5yaik7IC8vIENvbnN0cnVjdCB0YW5nZW50cwoKICAgICAgICBjb250YWN0RXF1YXRpb24ubmkudGFuZ2VudHMoYzEudCwgYzIudCk7IC8vIFNldCBzcG9vayBwYXJhbXMKCiAgICAgICAgYzEuc2V0U3Bvb2tQYXJhbXMoY20uZnJpY3Rpb25FcXVhdGlvblN0aWZmbmVzcywgY20uZnJpY3Rpb25FcXVhdGlvblJlbGF4YXRpb24sIHdvcmxkLmR0KTsKICAgICAgICBjMi5zZXRTcG9va1BhcmFtcyhjbS5mcmljdGlvbkVxdWF0aW9uU3RpZmZuZXNzLCBjbS5mcmljdGlvbkVxdWF0aW9uUmVsYXhhdGlvbiwgd29ybGQuZHQpOwogICAgICAgIGMxLmVuYWJsZWQgPSBjMi5lbmFibGVkID0gY29udGFjdEVxdWF0aW9uLmVuYWJsZWQ7CiAgICAgICAgb3V0QXJyYXkucHVzaChjMSwgYzIpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CgogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIFRha2UgdGhlIGF2ZXJhZ2UgTiBsYXRlc3QgY29udGFjdCBwb2ludCBvbiB0aGUgcGxhbmUuCiAgICAgKi8KCgogICAgY3JlYXRlRnJpY3Rpb25Gcm9tQXZlcmFnZShudW1Db250YWN0cykgewogICAgICAvLyBUaGUgbGFzdCBjb250YWN0RXF1YXRpb24KICAgICAgbGV0IGMgPSB0aGlzLnJlc3VsdFt0aGlzLnJlc3VsdC5sZW5ndGggLSAxXTsgLy8gQ3JlYXRlIHRoZSByZXN1bHQ6IHR3byAiYXZlcmFnZSIgZnJpY3Rpb24gZXF1YXRpb25zCgogICAgICBpZiAoIXRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChjLCB0aGlzLmZyaWN0aW9uUmVzdWx0KSB8fCBudW1Db250YWN0cyA9PT0gMSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgY29uc3QgZjEgPSB0aGlzLmZyaWN0aW9uUmVzdWx0W3RoaXMuZnJpY3Rpb25SZXN1bHQubGVuZ3RoIC0gMl07CiAgICAgIGNvbnN0IGYyID0gdGhpcy5mcmljdGlvblJlc3VsdFt0aGlzLmZyaWN0aW9uUmVzdWx0Lmxlbmd0aCAtIDFdOwogICAgICBhdmVyYWdlTm9ybWFsLnNldFplcm8oKTsKICAgICAgYXZlcmFnZUNvbnRhY3RQb2ludEEuc2V0WmVybygpOwogICAgICBhdmVyYWdlQ29udGFjdFBvaW50Qi5zZXRaZXJvKCk7CiAgICAgIGNvbnN0IGJvZHlBID0gYy5iaTsKICAgICAgYy5iajsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBudW1Db250YWN0czsgaSsrKSB7CiAgICAgICAgYyA9IHRoaXMucmVzdWx0W3RoaXMucmVzdWx0Lmxlbmd0aCAtIDEgLSBpXTsKCiAgICAgICAgaWYgKGMuYmkgIT09IGJvZHlBKSB7CiAgICAgICAgICBhdmVyYWdlTm9ybWFsLnZhZGQoYy5uaSwgYXZlcmFnZU5vcm1hbCk7CiAgICAgICAgICBhdmVyYWdlQ29udGFjdFBvaW50QS52YWRkKGMucmksIGF2ZXJhZ2VDb250YWN0UG9pbnRBKTsKICAgICAgICAgIGF2ZXJhZ2VDb250YWN0UG9pbnRCLnZhZGQoYy5yaiwgYXZlcmFnZUNvbnRhY3RQb2ludEIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBhdmVyYWdlTm9ybWFsLnZzdWIoYy5uaSwgYXZlcmFnZU5vcm1hbCk7CiAgICAgICAgICBhdmVyYWdlQ29udGFjdFBvaW50QS52YWRkKGMucmosIGF2ZXJhZ2VDb250YWN0UG9pbnRBKTsKICAgICAgICAgIGF2ZXJhZ2VDb250YWN0UG9pbnRCLnZhZGQoYy5yaSwgYXZlcmFnZUNvbnRhY3RQb2ludEIpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgY29uc3QgaW52TnVtQ29udGFjdHMgPSAxIC8gbnVtQ29udGFjdHM7CiAgICAgIGF2ZXJhZ2VDb250YWN0UG9pbnRBLnNjYWxlKGludk51bUNvbnRhY3RzLCBmMS5yaSk7CiAgICAgIGF2ZXJhZ2VDb250YWN0UG9pbnRCLnNjYWxlKGludk51bUNvbnRhY3RzLCBmMS5yaik7CiAgICAgIGYyLnJpLmNvcHkoZjEucmkpOyAvLyBTaG91bGQgYmUgdGhlIHNhbWUKCiAgICAgIGYyLnJqLmNvcHkoZjEucmopOwogICAgICBhdmVyYWdlTm9ybWFsLm5vcm1hbGl6ZSgpOwogICAgICBhdmVyYWdlTm9ybWFsLnRhbmdlbnRzKGYxLnQsIGYyLnQpOyAvLyByZXR1cm4gZXE7CiAgICB9CiAgICAvKioKICAgICAqIEdlbmVyYXRlIGFsbCBjb250YWN0cyBiZXR3ZWVuIGEgbGlzdCBvZiBib2R5IHBhaXJzCiAgICAgKiBAcGFyYW0gcDEgQXJyYXkgb2YgYm9keSBpbmRpY2VzCiAgICAgKiBAcGFyYW0gcDIgQXJyYXkgb2YgYm9keSBpbmRpY2VzCiAgICAgKiBAcGFyYW0gcmVzdWx0IEFycmF5IHRvIHN0b3JlIGdlbmVyYXRlZCBjb250YWN0cwogICAgICogQHBhcmFtIG9sZGNvbnRhY3RzIE9wdGlvbmFsLiBBcnJheSBvZiByZXVzYWJsZSBjb250YWN0IG9iamVjdHMKICAgICAqLwoKCiAgICBnZXRDb250YWN0cyhwMSwgcDIsIHdvcmxkLCByZXN1bHQsIG9sZGNvbnRhY3RzLCBmcmljdGlvblJlc3VsdCwgZnJpY3Rpb25Qb29sKSB7CiAgICAgIC8vIFNhdmUgb2xkIGNvbnRhY3Qgb2JqZWN0cwogICAgICB0aGlzLmNvbnRhY3RQb2ludFBvb2wgPSBvbGRjb250YWN0czsKICAgICAgdGhpcy5mcmljdGlvbkVxdWF0aW9uUG9vbCA9IGZyaWN0aW9uUG9vbDsKICAgICAgdGhpcy5yZXN1bHQgPSByZXN1bHQ7CiAgICAgIHRoaXMuZnJpY3Rpb25SZXN1bHQgPSBmcmljdGlvblJlc3VsdDsKICAgICAgY29uc3QgcWkgPSB0bXBRdWF0MTsKICAgICAgY29uc3QgcWogPSB0bXBRdWF0MjsKICAgICAgY29uc3QgeGkgPSB0bXBWZWMxOwogICAgICBjb25zdCB4aiA9IHRtcFZlYzI7CgogICAgICBmb3IgKGxldCBrID0gMCwgTiA9IHAxLmxlbmd0aDsgayAhPT0gTjsgaysrKSB7CiAgICAgICAgLy8gR2V0IGN1cnJlbnQgY29sbGlzaW9uIGJvZGllcwogICAgICAgIGNvbnN0IGJpID0gcDFba107CiAgICAgICAgY29uc3QgYmogPSBwMltrXTsgLy8gR2V0IGNvbnRhY3QgbWF0ZXJpYWwKCiAgICAgICAgbGV0IGJvZHlDb250YWN0TWF0ZXJpYWwgPSBudWxsOwoKICAgICAgICBpZiAoYmkubWF0ZXJpYWwgJiYgYmoubWF0ZXJpYWwpIHsKICAgICAgICAgIGJvZHlDb250YWN0TWF0ZXJpYWwgPSB3b3JsZC5nZXRDb250YWN0TWF0ZXJpYWwoYmkubWF0ZXJpYWwsIGJqLm1hdGVyaWFsKSB8fCBudWxsOwogICAgICAgIH0KCiAgICAgICAgY29uc3QganVzdFRlc3QgPSBiaS50eXBlICYgQm9keS5LSU5FTUFUSUMgJiYgYmoudHlwZSAmIEJvZHkuU1RBVElDIHx8IGJpLnR5cGUgJiBCb2R5LlNUQVRJQyAmJiBiai50eXBlICYgQm9keS5LSU5FTUFUSUMgfHwgYmkudHlwZSAmIEJvZHkuS0lORU1BVElDICYmIGJqLnR5cGUgJiBCb2R5LktJTkVNQVRJQzsKCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBiaS5zaGFwZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGJpLnF1YXRlcm5pb24ubXVsdChiaS5zaGFwZU9yaWVudGF0aW9uc1tpXSwgcWkpOwogICAgICAgICAgYmkucXVhdGVybmlvbi52bXVsdChiaS5zaGFwZU9mZnNldHNbaV0sIHhpKTsKICAgICAgICAgIHhpLnZhZGQoYmkucG9zaXRpb24sIHhpKTsKICAgICAgICAgIGNvbnN0IHNpID0gYmkuc2hhcGVzW2ldOwoKICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgYmouc2hhcGVzLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgIC8vIENvbXB1dGUgd29ybGQgdHJhbnNmb3JtIG9mIHNoYXBlcwogICAgICAgICAgICBiai5xdWF0ZXJuaW9uLm11bHQoYmouc2hhcGVPcmllbnRhdGlvbnNbal0sIHFqKTsKICAgICAgICAgICAgYmoucXVhdGVybmlvbi52bXVsdChiai5zaGFwZU9mZnNldHNbal0sIHhqKTsKICAgICAgICAgICAgeGoudmFkZChiai5wb3NpdGlvbiwgeGopOwogICAgICAgICAgICBjb25zdCBzaiA9IGJqLnNoYXBlc1tqXTsKCiAgICAgICAgICAgIGlmICghKHNpLmNvbGxpc2lvbkZpbHRlck1hc2sgJiBzai5jb2xsaXNpb25GaWx0ZXJHcm91cCAmJiBzai5jb2xsaXNpb25GaWx0ZXJNYXNrICYgc2kuY29sbGlzaW9uRmlsdGVyR3JvdXApKSB7CiAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICh4aS5kaXN0YW5jZVRvKHhqKSA+IHNpLmJvdW5kaW5nU3BoZXJlUmFkaXVzICsgc2ouYm91bmRpbmdTcGhlcmVSYWRpdXMpIHsKICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfSAvLyBHZXQgY29sbGlzaW9uIG1hdGVyaWFsCgoKICAgICAgICAgICAgbGV0IHNoYXBlQ29udGFjdE1hdGVyaWFsID0gbnVsbDsKCiAgICAgICAgICAgIGlmIChzaS5tYXRlcmlhbCAmJiBzai5tYXRlcmlhbCkgewogICAgICAgICAgICAgIHNoYXBlQ29udGFjdE1hdGVyaWFsID0gd29ybGQuZ2V0Q29udGFjdE1hdGVyaWFsKHNpLm1hdGVyaWFsLCBzai5tYXRlcmlhbCkgfHwgbnVsbDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdGhpcy5jdXJyZW50Q29udGFjdE1hdGVyaWFsID0gc2hhcGVDb250YWN0TWF0ZXJpYWwgfHwgYm9keUNvbnRhY3RNYXRlcmlhbCB8fCB3b3JsZC5kZWZhdWx0Q29udGFjdE1hdGVyaWFsOyAvLyBHZXQgY29udGFjdHMKCiAgICAgICAgICAgIGNvbnN0IHJlc29sdmVySW5kZXggPSBzaS50eXBlIHwgc2oudHlwZTsKICAgICAgICAgICAgY29uc3QgcmVzb2x2ZXIgPSB0aGlzW3Jlc29sdmVySW5kZXhdOwoKICAgICAgICAgICAgaWYgKHJlc29sdmVyKSB7CiAgICAgICAgICAgICAgbGV0IHJldHZhbCA9IGZhbHNlOyAvLyBUTyBETzogaW52ZXN0aWdhdGUgd2h5IHNwaGVyZVBhcnRpY2xlIGFuZCBjb252ZXhQYXJ0aWNsZQogICAgICAgICAgICAgIC8vIHJlc29sdmVycyBleHBlY3Qgc2kgYW5kIHNqIHNoYXBlcyB0byBiZSBpbiByZXZlcnNlIG9yZGVyCiAgICAgICAgICAgICAgLy8gKGkuZS4gbGFyZ2VyIGludGVnZXIgdmFsdWUgdHlwZSBmaXJzdCBpbnN0ZWFkIG9mIHNtYWxsZXIgZmlyc3QpCgogICAgICAgICAgICAgIGlmIChzaS50eXBlIDwgc2oudHlwZSkgewogICAgICAgICAgICAgICAgcmV0dmFsID0gcmVzb2x2ZXIuY2FsbCh0aGlzLCBzaSwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHNpLCBzaiwganVzdFRlc3QpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXR2YWwgPSByZXNvbHZlci5jYWxsKHRoaXMsIHNqLCBzaSwgeGosIHhpLCBxaiwgcWksIGJqLCBiaSwgc2ksIHNqLCBqdXN0VGVzdCk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBpZiAocmV0dmFsICYmIGp1c3RUZXN0KSB7CiAgICAgICAgICAgICAgICAvLyBSZWdpc3RlciBvdmVybGFwCiAgICAgICAgICAgICAgICB3b3JsZC5zaGFwZU92ZXJsYXBLZWVwZXIuc2V0KHNpLmlkLCBzai5pZCk7CiAgICAgICAgICAgICAgICB3b3JsZC5ib2R5T3ZlcmxhcEtlZXBlci5zZXQoYmkuaWQsIGJqLmlkKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBzcGhlcmVTcGhlcmUoc2ksIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgcmV0dXJuIHhpLmRpc3RhbmNlU3F1YXJlZCh4aikgPCAoc2kucmFkaXVzICsgc2oucmFkaXVzKSAqKiAyOwogICAgICB9IC8vIFdlIHdpbGwgaGF2ZSBvbmx5IG9uZSBjb250YWN0IGluIHRoaXMgY2FzZQoKCiAgICAgIGNvbnN0IGNvbnRhY3RFcSA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLCBiaiwgc2ksIHNqLCByc2ksIHJzaik7IC8vIENvbnRhY3Qgbm9ybWFsCgogICAgICB4ai52c3ViKHhpLCBjb250YWN0RXEubmkpOwogICAgICBjb250YWN0RXEubmkubm9ybWFsaXplKCk7IC8vIENvbnRhY3QgcG9pbnQgbG9jYXRpb25zCgogICAgICBjb250YWN0RXEucmkuY29weShjb250YWN0RXEubmkpOwogICAgICBjb250YWN0RXEucmouY29weShjb250YWN0RXEubmkpOwogICAgICBjb250YWN0RXEucmkuc2NhbGUoc2kucmFkaXVzLCBjb250YWN0RXEucmkpOwogICAgICBjb250YWN0RXEucmouc2NhbGUoLXNqLnJhZGl1cywgY29udGFjdEVxLnJqKTsKICAgICAgY29udGFjdEVxLnJpLnZhZGQoeGksIGNvbnRhY3RFcS5yaSk7CiAgICAgIGNvbnRhY3RFcS5yaS52c3ViKGJpLnBvc2l0aW9uLCBjb250YWN0RXEucmkpOwogICAgICBjb250YWN0RXEucmoudmFkZCh4aiwgY29udGFjdEVxLnJqKTsKICAgICAgY29udGFjdEVxLnJqLnZzdWIoYmoucG9zaXRpb24sIGNvbnRhY3RFcS5yaik7CiAgICAgIHRoaXMucmVzdWx0LnB1c2goY29udGFjdEVxKTsKICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KGNvbnRhY3RFcSwgdGhpcy5mcmljdGlvblJlc3VsdCk7CiAgICB9CgogICAgc3BoZXJlUGxhbmUoc2ksIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgLy8gV2Ugd2lsbCBoYXZlIG9uZSBjb250YWN0IGluIHRoaXMgY2FzZQogICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksIGJqLCBzaSwgc2osIHJzaSwgcnNqKTsgLy8gQ29udGFjdCBub3JtYWwKCiAgICAgIHIubmkuc2V0KDAsIDAsIDEpOwogICAgICBxai52bXVsdChyLm5pLCByLm5pKTsKICAgICAgci5uaS5uZWdhdGUoci5uaSk7IC8vIGJvZHkgaSBpcyB0aGUgc3BoZXJlLCBmbGlwIG5vcm1hbAoKICAgICAgci5uaS5ub3JtYWxpemUoKTsgLy8gTmVlZGVkPwogICAgICAvLyBWZWN0b3IgZnJvbSBzcGhlcmUgY2VudGVyIHRvIGNvbnRhY3QgcG9pbnQKCiAgICAgIHIubmkuc2NhbGUoc2kucmFkaXVzLCByLnJpKTsgLy8gUHJvamVjdCBkb3duIHNwaGVyZSBvbiBwbGFuZQoKICAgICAgeGkudnN1Yih4aiwgcG9pbnRfb25fcGxhbmVfdG9fc3BoZXJlKTsKICAgICAgci5uaS5zY2FsZShyLm5pLmRvdChwb2ludF9vbl9wbGFuZV90b19zcGhlcmUpLCBwbGFuZV90b19zcGhlcmVfb3J0aG8pOwogICAgICBwb2ludF9vbl9wbGFuZV90b19zcGhlcmUudnN1YihwbGFuZV90b19zcGhlcmVfb3J0aG8sIHIucmopOyAvLyBUaGUgc3BoZXJlIHBvc2l0aW9uIHByb2plY3RlZCB0byBwbGFuZQoKICAgICAgaWYgKC1wb2ludF9vbl9wbGFuZV90b19zcGhlcmUuZG90KHIubmkpIDw9IHNpLnJhZGl1cykgewogICAgICAgIGlmIChqdXN0VGVzdCkgewogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSAvLyBNYWtlIGl0IHJlbGF0aXZlIHRvIHRoZSBib2R5CgoKICAgICAgICBjb25zdCByaSA9IHIucmk7CiAgICAgICAgY29uc3QgcmogPSByLnJqOwogICAgICAgIHJpLnZhZGQoeGksIHJpKTsKICAgICAgICByaS52c3ViKGJpLnBvc2l0aW9uLCByaSk7CiAgICAgICAgcmoudmFkZCh4aiwgcmopOwogICAgICAgIHJqLnZzdWIoYmoucG9zaXRpb24sIHJqKTsKICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgfQogICAgfQoKICAgIGJveEJveChzaSwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHJzaSwgcnNqLCBqdXN0VGVzdCkgewogICAgICBzaS5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24ubWF0ZXJpYWwgPSBzaS5tYXRlcmlhbDsKICAgICAgc2ouY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLm1hdGVyaWFsID0gc2oubWF0ZXJpYWw7CiAgICAgIHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5jb2xsaXNpb25SZXNwb25zZSA9IHNpLmNvbGxpc2lvblJlc3BvbnNlOwogICAgICBzai5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24uY29sbGlzaW9uUmVzcG9uc2UgPSBzai5jb2xsaXNpb25SZXNwb25zZTsKICAgICAgcmV0dXJuIHRoaXMuY29udmV4Q29udmV4KHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbiwgc2ouY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCBzaSwgc2osIGp1c3RUZXN0KTsKICAgIH0KCiAgICBzcGhlcmVCb3goc2ksIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgY29uc3QgdjNwb29sID0gdGhpcy52M3Bvb2w7IC8vIHdlIHJlZmVyIHRvIHRoZSBib3ggYXMgYm9keSBqCgogICAgICBjb25zdCBzaWRlcyA9IHNwaGVyZUJveF9zaWRlczsKICAgICAgeGkudnN1Yih4aiwgYm94X3RvX3NwaGVyZSk7CiAgICAgIHNqLmdldFNpZGVOb3JtYWxzKHNpZGVzLCBxaik7CiAgICAgIGNvbnN0IFIgPSBzaS5yYWRpdXM7CiAgICAgIGxldCBmb3VuZCA9IGZhbHNlOyAvLyBTdG9yZSB0aGUgcmVzdWx0aW5nIHNpZGUgcGVuZXRyYXRpb24gaW5mbwoKICAgICAgY29uc3Qgc2lkZV9ucyA9IHNwaGVyZUJveF9zaWRlX25zOwogICAgICBjb25zdCBzaWRlX25zMSA9IHNwaGVyZUJveF9zaWRlX25zMTsKICAgICAgY29uc3Qgc2lkZV9uczIgPSBzcGhlcmVCb3hfc2lkZV9uczI7CiAgICAgIGxldCBzaWRlX2ggPSBudWxsOwogICAgICBsZXQgc2lkZV9wZW5ldHJhdGlvbnMgPSAwOwogICAgICBsZXQgc2lkZV9kb3QxID0gMDsKICAgICAgbGV0IHNpZGVfZG90MiA9IDA7CiAgICAgIGxldCBzaWRlX2Rpc3RhbmNlID0gbnVsbDsKCiAgICAgIGZvciAobGV0IGlkeCA9IDAsIG5zaWRlcyA9IHNpZGVzLmxlbmd0aDsgaWR4ICE9PSBuc2lkZXMgJiYgZm91bmQgPT09IGZhbHNlOyBpZHgrKykgewogICAgICAgIC8vIEdldCB0aGUgcGxhbmUgc2lkZSBub3JtYWwgKG5zKQogICAgICAgIGNvbnN0IG5zID0gc3BoZXJlQm94X25zOwogICAgICAgIG5zLmNvcHkoc2lkZXNbaWR4XSk7CiAgICAgICAgY29uc3QgaCA9IG5zLmxlbmd0aCgpOwogICAgICAgIG5zLm5vcm1hbGl6ZSgpOyAvLyBUaGUgbm9ybWFsL2Rpc3RhbmNlIGRvdCBwcm9kdWN0IHRlbGxzIHdoaWNoIHNpZGUgb2YgdGhlIHBsYW5lIHdlIGFyZQoKICAgICAgICBjb25zdCBkb3QgPSBib3hfdG9fc3BoZXJlLmRvdChucyk7CgogICAgICAgIGlmIChkb3QgPCBoICsgUiAmJiBkb3QgPiAwKSB7CiAgICAgICAgICAvLyBJbnRlcnNlY3RzIHBsYW5lLiBOb3cgY2hlY2sgdGhlIG90aGVyIHR3byBkaW1lbnNpb25zCiAgICAgICAgICBjb25zdCBuczEgPSBzcGhlcmVCb3hfbnMxOwogICAgICAgICAgY29uc3QgbnMyID0gc3BoZXJlQm94X25zMjsKICAgICAgICAgIG5zMS5jb3B5KHNpZGVzWyhpZHggKyAxKSAlIDNdKTsKICAgICAgICAgIG5zMi5jb3B5KHNpZGVzWyhpZHggKyAyKSAlIDNdKTsKICAgICAgICAgIGNvbnN0IGgxID0gbnMxLmxlbmd0aCgpOwogICAgICAgICAgY29uc3QgaDIgPSBuczIubGVuZ3RoKCk7CiAgICAgICAgICBuczEubm9ybWFsaXplKCk7CiAgICAgICAgICBuczIubm9ybWFsaXplKCk7CiAgICAgICAgICBjb25zdCBkb3QxID0gYm94X3RvX3NwaGVyZS5kb3QobnMxKTsKICAgICAgICAgIGNvbnN0IGRvdDIgPSBib3hfdG9fc3BoZXJlLmRvdChuczIpOwoKICAgICAgICAgIGlmIChkb3QxIDwgaDEgJiYgZG90MSA+IC1oMSAmJiBkb3QyIDwgaDIgJiYgZG90MiA+IC1oMikgewogICAgICAgICAgICBjb25zdCBkaXN0ID0gTWF0aC5hYnMoZG90IC0gaCAtIFIpOwoKICAgICAgICAgICAgaWYgKHNpZGVfZGlzdGFuY2UgPT09IG51bGwgfHwgZGlzdCA8IHNpZGVfZGlzdGFuY2UpIHsKICAgICAgICAgICAgICBzaWRlX2Rpc3RhbmNlID0gZGlzdDsKICAgICAgICAgICAgICBzaWRlX2RvdDEgPSBkb3QxOwogICAgICAgICAgICAgIHNpZGVfZG90MiA9IGRvdDI7CiAgICAgICAgICAgICAgc2lkZV9oID0gaDsKICAgICAgICAgICAgICBzaWRlX25zLmNvcHkobnMpOwogICAgICAgICAgICAgIHNpZGVfbnMxLmNvcHkobnMxKTsKICAgICAgICAgICAgICBzaWRlX25zMi5jb3B5KG5zMik7CiAgICAgICAgICAgICAgc2lkZV9wZW5ldHJhdGlvbnMrKzsKCiAgICAgICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmIChzaWRlX3BlbmV0cmF0aW9ucykgewogICAgICAgIGZvdW5kID0gdHJ1ZTsKICAgICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksIGJqLCBzaSwgc2osIHJzaSwgcnNqKTsKICAgICAgICBzaWRlX25zLnNjYWxlKC1SLCByLnJpKTsgLy8gU3BoZXJlIHIKCiAgICAgICAgci5uaS5jb3B5KHNpZGVfbnMpOwogICAgICAgIHIubmkubmVnYXRlKHIubmkpOyAvLyBOb3JtYWwgc2hvdWxkIGJlIG91dCBvZiBzcGhlcmUKCiAgICAgICAgc2lkZV9ucy5zY2FsZShzaWRlX2gsIHNpZGVfbnMpOwogICAgICAgIHNpZGVfbnMxLnNjYWxlKHNpZGVfZG90MSwgc2lkZV9uczEpOwogICAgICAgIHNpZGVfbnMudmFkZChzaWRlX25zMSwgc2lkZV9ucyk7CiAgICAgICAgc2lkZV9uczIuc2NhbGUoc2lkZV9kb3QyLCBzaWRlX25zMik7CiAgICAgICAgc2lkZV9ucy52YWRkKHNpZGVfbnMyLCByLnJqKTsgLy8gTWFrZSByZWxhdGl2ZSB0byBib2RpZXMKCiAgICAgICAgci5yaS52YWRkKHhpLCByLnJpKTsKICAgICAgICByLnJpLnZzdWIoYmkucG9zaXRpb24sIHIucmkpOwogICAgICAgIHIucmoudmFkZCh4aiwgci5yaik7CiAgICAgICAgci5yai52c3ViKGJqLnBvc2l0aW9uLCByLnJqKTsKICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgfSAvLyBDaGVjayBjb3JuZXJzCgoKICAgICAgbGV0IHJqID0gdjNwb29sLmdldCgpOwogICAgICBjb25zdCBzcGhlcmVfdG9fY29ybmVyID0gc3BoZXJlQm94X3NwaGVyZV90b19jb3JuZXI7CgogICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gMiAmJiAhZm91bmQ7IGorKykgewogICAgICAgIGZvciAobGV0IGsgPSAwOyBrICE9PSAyICYmICFmb3VuZDsgaysrKSB7CiAgICAgICAgICBmb3IgKGxldCBsID0gMDsgbCAhPT0gMiAmJiAhZm91bmQ7IGwrKykgewogICAgICAgICAgICByai5zZXQoMCwgMCwgMCk7CgogICAgICAgICAgICBpZiAoaikgewogICAgICAgICAgICAgIHJqLnZhZGQoc2lkZXNbMF0sIHJqKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByai52c3ViKHNpZGVzWzBdLCByaik7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChrKSB7CiAgICAgICAgICAgICAgcmoudmFkZChzaWRlc1sxXSwgcmopOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHJqLnZzdWIoc2lkZXNbMV0sIHJqKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKGwpIHsKICAgICAgICAgICAgICByai52YWRkKHNpZGVzWzJdLCByaik7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcmoudnN1YihzaWRlc1syXSwgcmopOwogICAgICAgICAgICB9IC8vIFdvcmxkIHBvc2l0aW9uIG9mIGNvcm5lcgoKCiAgICAgICAgICAgIHhqLnZhZGQocmosIHNwaGVyZV90b19jb3JuZXIpOwogICAgICAgICAgICBzcGhlcmVfdG9fY29ybmVyLnZzdWIoeGksIHNwaGVyZV90b19jb3JuZXIpOwoKICAgICAgICAgICAgaWYgKHNwaGVyZV90b19jb3JuZXIubGVuZ3RoU3F1YXJlZCgpIDwgUiAqIFIpIHsKICAgICAgICAgICAgICBpZiAoanVzdFRlc3QpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOwogICAgICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opOwogICAgICAgICAgICAgIHIucmkuY29weShzcGhlcmVfdG9fY29ybmVyKTsKICAgICAgICAgICAgICByLnJpLm5vcm1hbGl6ZSgpOwogICAgICAgICAgICAgIHIubmkuY29weShyLnJpKTsKICAgICAgICAgICAgICByLnJpLnNjYWxlKFIsIHIucmkpOwogICAgICAgICAgICAgIHIucmouY29weShyaik7IC8vIE1ha2UgcmVsYXRpdmUgdG8gYm9kaWVzCgogICAgICAgICAgICAgIHIucmkudmFkZCh4aSwgci5yaSk7CiAgICAgICAgICAgICAgci5yaS52c3ViKGJpLnBvc2l0aW9uLCByLnJpKTsKICAgICAgICAgICAgICByLnJqLnZhZGQoeGosIHIucmopOwogICAgICAgICAgICAgIHIucmoudnN1Yihiai5wb3NpdGlvbiwgci5yaik7CiAgICAgICAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTsKICAgICAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHYzcG9vbC5yZWxlYXNlKHJqKTsKICAgICAgcmogPSBudWxsOyAvLyBDaGVjayBlZGdlcwoKICAgICAgY29uc3QgZWRnZVRhbmdlbnQgPSB2M3Bvb2wuZ2V0KCk7CiAgICAgIGNvbnN0IGVkZ2VDZW50ZXIgPSB2M3Bvb2wuZ2V0KCk7CiAgICAgIGNvbnN0IHIgPSB2M3Bvb2wuZ2V0KCk7IC8vIHIgPSBlZGdlIGNlbnRlciB0byBzcGhlcmUgY2VudGVyCgogICAgICBjb25zdCBvcnRob2dvbmFsID0gdjNwb29sLmdldCgpOwogICAgICBjb25zdCBkaXN0ID0gdjNwb29sLmdldCgpOwogICAgICBjb25zdCBOc2lkZXMgPSBzaWRlcy5sZW5ndGg7CgogICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gTnNpZGVzICYmICFmb3VuZDsgaisrKSB7CiAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgIT09IE5zaWRlcyAmJiAhZm91bmQ7IGsrKykgewogICAgICAgICAgaWYgKGogJSAzICE9PSBrICUgMykgewogICAgICAgICAgICAvLyBHZXQgZWRnZSB0YW5nZW50CiAgICAgICAgICAgIHNpZGVzW2tdLmNyb3NzKHNpZGVzW2pdLCBlZGdlVGFuZ2VudCk7CiAgICAgICAgICAgIGVkZ2VUYW5nZW50Lm5vcm1hbGl6ZSgpOwogICAgICAgICAgICBzaWRlc1tqXS52YWRkKHNpZGVzW2tdLCBlZGdlQ2VudGVyKTsKICAgICAgICAgICAgci5jb3B5KHhpKTsKICAgICAgICAgICAgci52c3ViKGVkZ2VDZW50ZXIsIHIpOwogICAgICAgICAgICByLnZzdWIoeGosIHIpOwogICAgICAgICAgICBjb25zdCBvcnRob25vcm0gPSByLmRvdChlZGdlVGFuZ2VudCk7IC8vIGRpc3RhbmNlIGZyb20gZWRnZSBjZW50ZXIgdG8gc3BoZXJlIGNlbnRlciBpbiB0aGUgdGFuZ2VudCBkaXJlY3Rpb24KCiAgICAgICAgICAgIGVkZ2VUYW5nZW50LnNjYWxlKG9ydGhvbm9ybSwgb3J0aG9nb25hbCk7IC8vIFZlY3RvciBmcm9tIGVkZ2UgY2VudGVyIHRvIHNwaGVyZSBjZW50ZXIgaW4gdGhlIHRhbmdlbnQgZGlyZWN0aW9uCiAgICAgICAgICAgIC8vIEZpbmQgdGhlIHRoaXJkIHNpZGUgb3J0aG9nb25hbCB0byB0aGlzIG9uZQoKICAgICAgICAgICAgbGV0IGwgPSAwOwoKICAgICAgICAgICAgd2hpbGUgKGwgPT09IGogJSAzIHx8IGwgPT09IGsgJSAzKSB7CiAgICAgICAgICAgICAgbCsrOwogICAgICAgICAgICB9IC8vIHZlYyBmcm9tIGVkZ2UgY2VudGVyIHRvIHNwaGVyZSBwcm9qZWN0ZWQgdG8gdGhlIHBsYW5lIG9ydGhvZ29uYWwgdG8gdGhlIGVkZ2UgdGFuZ2VudAoKCiAgICAgICAgICAgIGRpc3QuY29weSh4aSk7CiAgICAgICAgICAgIGRpc3QudnN1YihvcnRob2dvbmFsLCBkaXN0KTsKICAgICAgICAgICAgZGlzdC52c3ViKGVkZ2VDZW50ZXIsIGRpc3QpOwogICAgICAgICAgICBkaXN0LnZzdWIoeGosIGRpc3QpOyAvLyBEaXN0YW5jZXMgaW4gdGFuZ2VudCBkaXJlY3Rpb24gYW5kIGRpc3RhbmNlIGluIHRoZSBwbGFuZSBvcnRob2dvbmFsIHRvIGl0CgogICAgICAgICAgICBjb25zdCB0ZGlzdCA9IE1hdGguYWJzKG9ydGhvbm9ybSk7CiAgICAgICAgICAgIGNvbnN0IG5kaXN0ID0gZGlzdC5sZW5ndGgoKTsKCiAgICAgICAgICAgIGlmICh0ZGlzdCA8IHNpZGVzW2xdLmxlbmd0aCgpICYmIG5kaXN0IDwgUikgewogICAgICAgICAgICAgIGlmIChqdXN0VGVzdCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7CiAgICAgICAgICAgICAgY29uc3QgcmVzID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksIGJqLCBzaSwgc2osIHJzaSwgcnNqKTsKICAgICAgICAgICAgICBlZGdlQ2VudGVyLnZhZGQob3J0aG9nb25hbCwgcmVzLnJqKTsgLy8gYm94IHJqCgogICAgICAgICAgICAgIHJlcy5yai5jb3B5KHJlcy5yaik7CiAgICAgICAgICAgICAgZGlzdC5uZWdhdGUocmVzLm5pKTsKICAgICAgICAgICAgICByZXMubmkubm9ybWFsaXplKCk7CiAgICAgICAgICAgICAgcmVzLnJpLmNvcHkocmVzLnJqKTsKICAgICAgICAgICAgICByZXMucmkudmFkZCh4aiwgcmVzLnJpKTsKICAgICAgICAgICAgICByZXMucmkudnN1Yih4aSwgcmVzLnJpKTsKICAgICAgICAgICAgICByZXMucmkubm9ybWFsaXplKCk7CiAgICAgICAgICAgICAgcmVzLnJpLnNjYWxlKFIsIHJlcy5yaSk7IC8vIE1ha2UgcmVsYXRpdmUgdG8gYm9kaWVzCgogICAgICAgICAgICAgIHJlcy5yaS52YWRkKHhpLCByZXMucmkpOwogICAgICAgICAgICAgIHJlcy5yaS52c3ViKGJpLnBvc2l0aW9uLCByZXMucmkpOwogICAgICAgICAgICAgIHJlcy5yai52YWRkKHhqLCByZXMucmopOwogICAgICAgICAgICAgIHJlcy5yai52c3ViKGJqLnBvc2l0aW9uLCByZXMucmopOwogICAgICAgICAgICAgIHRoaXMucmVzdWx0LnB1c2gocmVzKTsKICAgICAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QocmVzLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgdjNwb29sLnJlbGVhc2UoZWRnZVRhbmdlbnQsIGVkZ2VDZW50ZXIsIHIsIG9ydGhvZ29uYWwsIGRpc3QpOwogICAgfQoKICAgIHBsYW5lQm94KHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIHNqLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5tYXRlcmlhbCA9IHNqLm1hdGVyaWFsOwogICAgICBzai5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24uY29sbGlzaW9uUmVzcG9uc2UgPSBzai5jb2xsaXNpb25SZXNwb25zZTsKICAgICAgc2ouY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLmlkID0gc2ouaWQ7CiAgICAgIHJldHVybiB0aGlzLnBsYW5lQ29udmV4KHNpLCBzai5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24sIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHNpLCBzaiwganVzdFRlc3QpOwogICAgfQoKICAgIGNvbnZleENvbnZleChzaSwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHJzaSwgcnNqLCBqdXN0VGVzdCwgZmFjZUxpc3RBLCBmYWNlTGlzdEIpIHsKICAgICAgY29uc3Qgc2VwQXhpcyA9IGNvbnZleENvbnZleF9zZXBBeGlzOwoKICAgICAgaWYgKHhpLmRpc3RhbmNlVG8oeGopID4gc2kuYm91bmRpbmdTcGhlcmVSYWRpdXMgKyBzai5ib3VuZGluZ1NwaGVyZVJhZGl1cykgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKHNpLmZpbmRTZXBhcmF0aW5nQXhpcyhzaiwgeGksIHFpLCB4aiwgcWosIHNlcEF4aXMsIGZhY2VMaXN0QSwgZmFjZUxpc3RCKSkgewogICAgICAgIGNvbnN0IHJlcyA9IFtdOwogICAgICAgIGNvbnN0IHEgPSBjb252ZXhDb252ZXhfcTsKICAgICAgICBzaS5jbGlwQWdhaW5zdEh1bGwoeGksIHFpLCBzaiwgeGosIHFqLCBzZXBBeGlzLCAtMTAwLCAxMDAsIHJlcyk7CiAgICAgICAgbGV0IG51bUNvbnRhY3RzID0gMDsKCiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogIT09IHJlcy5sZW5ndGg7IGorKykgewogICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfQoKICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opOwogICAgICAgICAgY29uc3QgcmkgPSByLnJpOwogICAgICAgICAgY29uc3QgcmogPSByLnJqOwogICAgICAgICAgc2VwQXhpcy5uZWdhdGUoci5uaSk7CiAgICAgICAgICByZXNbal0ubm9ybWFsLm5lZ2F0ZShxKTsKICAgICAgICAgIHEuc2NhbGUocmVzW2pdLmRlcHRoLCBxKTsKICAgICAgICAgIHJlc1tqXS5wb2ludC52YWRkKHEsIHJpKTsKICAgICAgICAgIHJqLmNvcHkocmVzW2pdLnBvaW50KTsgLy8gQ29udGFjdCBwb2ludHMgYXJlIGluIHdvcmxkIGNvb3JkaW5hdGVzLiBUcmFuc2Zvcm0gYmFjayB0byByZWxhdGl2ZQoKICAgICAgICAgIHJpLnZzdWIoeGksIHJpKTsKICAgICAgICAgIHJqLnZzdWIoeGosIHJqKTsgLy8gTWFrZSByZWxhdGl2ZSB0byBib2RpZXMKCiAgICAgICAgICByaS52YWRkKHhpLCByaSk7CiAgICAgICAgICByaS52c3ViKGJpLnBvc2l0aW9uLCByaSk7CiAgICAgICAgICByai52YWRkKHhqLCByaik7CiAgICAgICAgICByai52c3ViKGJqLnBvc2l0aW9uLCByaik7CiAgICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgICAgbnVtQ29udGFjdHMrKzsKCiAgICAgICAgICBpZiAoIXRoaXMuZW5hYmxlRnJpY3Rpb25SZWR1Y3Rpb24pIHsKICAgICAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKHRoaXMuZW5hYmxlRnJpY3Rpb25SZWR1Y3Rpb24gJiYgbnVtQ29udGFjdHMpIHsKICAgICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25Gcm9tQXZlcmFnZShudW1Db250YWN0cyk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgc3BoZXJlQ29udmV4KHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIGNvbnN0IHYzcG9vbCA9IHRoaXMudjNwb29sOwogICAgICB4aS52c3ViKHhqLCBjb252ZXhfdG9fc3BoZXJlKTsKICAgICAgY29uc3Qgbm9ybWFscyA9IHNqLmZhY2VOb3JtYWxzOwogICAgICBjb25zdCBmYWNlcyA9IHNqLmZhY2VzOwogICAgICBjb25zdCB2ZXJ0cyA9IHNqLnZlcnRpY2VzOwogICAgICBjb25zdCBSID0gc2kucmFkaXVzOyAvLyAgICAgcmV0dXJuOwogICAgICAvLyB9CgogICAgICBsZXQgZm91bmQgPSBmYWxzZTsgLy8gQ2hlY2sgY29ybmVycwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IHZlcnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY29uc3QgdiA9IHZlcnRzW2ldOyAvLyBXb3JsZCBwb3NpdGlvbiBvZiBjb3JuZXIKCiAgICAgICAgY29uc3Qgd29ybGRDb3JuZXIgPSBzcGhlcmVDb252ZXhfd29ybGRDb3JuZXI7CiAgICAgICAgcWoudm11bHQodiwgd29ybGRDb3JuZXIpOwogICAgICAgIHhqLnZhZGQod29ybGRDb3JuZXIsIHdvcmxkQ29ybmVyKTsKICAgICAgICBjb25zdCBzcGhlcmVfdG9fY29ybmVyID0gc3BoZXJlQ29udmV4X3NwaGVyZVRvQ29ybmVyOwogICAgICAgIHdvcmxkQ29ybmVyLnZzdWIoeGksIHNwaGVyZV90b19jb3JuZXIpOwoKICAgICAgICBpZiAoc3BoZXJlX3RvX2Nvcm5lci5sZW5ndGhTcXVhcmVkKCkgPCBSICogUikgewogICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfQoKICAgICAgICAgIGZvdW5kID0gdHJ1ZTsKICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opOwogICAgICAgICAgci5yaS5jb3B5KHNwaGVyZV90b19jb3JuZXIpOwogICAgICAgICAgci5yaS5ub3JtYWxpemUoKTsKICAgICAgICAgIHIubmkuY29weShyLnJpKTsKICAgICAgICAgIHIucmkuc2NhbGUoUiwgci5yaSk7CiAgICAgICAgICB3b3JsZENvcm5lci52c3ViKHhqLCByLnJqKTsgLy8gU2hvdWxkIGJlIHJlbGF0aXZlIHRvIHRoZSBib2R5LgoKICAgICAgICAgIHIucmkudmFkZCh4aSwgci5yaSk7CiAgICAgICAgICByLnJpLnZzdWIoYmkucG9zaXRpb24sIHIucmkpOyAvLyBTaG91bGQgYmUgcmVsYXRpdmUgdG8gdGhlIGJvZHkuCgogICAgICAgICAgci5yai52YWRkKHhqLCByLnJqKTsKICAgICAgICAgIHIucmoudnN1Yihiai5wb3NpdGlvbiwgci5yaik7CiAgICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgfSAvLyBDaGVjayBzaWRlIChwbGFuZSkgaW50ZXJzZWN0aW9ucwoKCiAgICAgIGZvciAobGV0IGkgPSAwLCBuZmFjZXMgPSBmYWNlcy5sZW5ndGg7IGkgIT09IG5mYWNlcyAmJiBmb3VuZCA9PT0gZmFsc2U7IGkrKykgewogICAgICAgIGNvbnN0IG5vcm1hbCA9IG5vcm1hbHNbaV07CiAgICAgICAgY29uc3QgZmFjZSA9IGZhY2VzW2ldOyAvLyBHZXQgd29ybGQtdHJhbnNmb3JtZWQgbm9ybWFsIG9mIHRoZSBmYWNlCgogICAgICAgIGNvbnN0IHdvcmxkTm9ybWFsID0gc3BoZXJlQ29udmV4X3dvcmxkTm9ybWFsOwogICAgICAgIHFqLnZtdWx0KG5vcm1hbCwgd29ybGROb3JtYWwpOyAvLyBHZXQgYSB3b3JsZCB2ZXJ0ZXggZnJvbSB0aGUgZmFjZQoKICAgICAgICBjb25zdCB3b3JsZFBvaW50ID0gc3BoZXJlQ29udmV4X3dvcmxkUG9pbnQ7CiAgICAgICAgcWoudm11bHQodmVydHNbZmFjZVswXV0sIHdvcmxkUG9pbnQpOwogICAgICAgIHdvcmxkUG9pbnQudmFkZCh4aiwgd29ybGRQb2ludCk7IC8vIEdldCBhIHBvaW50IG9uIHRoZSBzcGhlcmUsIGNsb3Nlc3QgdG8gdGhlIGZhY2Ugbm9ybWFsCgogICAgICAgIGNvbnN0IHdvcmxkU3BoZXJlUG9pbnRDbG9zZXN0VG9QbGFuZSA9IHNwaGVyZUNvbnZleF93b3JsZFNwaGVyZVBvaW50Q2xvc2VzdFRvUGxhbmU7CiAgICAgICAgd29ybGROb3JtYWwuc2NhbGUoLVIsIHdvcmxkU3BoZXJlUG9pbnRDbG9zZXN0VG9QbGFuZSk7CiAgICAgICAgeGkudmFkZCh3b3JsZFNwaGVyZVBvaW50Q2xvc2VzdFRvUGxhbmUsIHdvcmxkU3BoZXJlUG9pbnRDbG9zZXN0VG9QbGFuZSk7IC8vIFZlY3RvciBmcm9tIGEgZmFjZSBwb2ludCB0byB0aGUgY2xvc2VzdCBwb2ludCBvbiB0aGUgc3BoZXJlCgogICAgICAgIGNvbnN0IHBlbmV0cmF0aW9uVmVjID0gc3BoZXJlQ29udmV4X3BlbmV0cmF0aW9uVmVjOwogICAgICAgIHdvcmxkU3BoZXJlUG9pbnRDbG9zZXN0VG9QbGFuZS52c3ViKHdvcmxkUG9pbnQsIHBlbmV0cmF0aW9uVmVjKTsgLy8gVGhlIHBlbmV0cmF0aW9uLiBOZWdhdGl2ZSB2YWx1ZSBtZWFucyBvdmVybGFwLgoKICAgICAgICBjb25zdCBwZW5ldHJhdGlvbiA9IHBlbmV0cmF0aW9uVmVjLmRvdCh3b3JsZE5vcm1hbCk7CiAgICAgICAgY29uc3Qgd29ybGRQb2ludFRvU3BoZXJlID0gc3BoZXJlQ29udmV4X3NwaGVyZVRvV29ybGRQb2ludDsKICAgICAgICB4aS52c3ViKHdvcmxkUG9pbnQsIHdvcmxkUG9pbnRUb1NwaGVyZSk7CgogICAgICAgIGlmIChwZW5ldHJhdGlvbiA8IDAgJiYgd29ybGRQb2ludFRvU3BoZXJlLmRvdCh3b3JsZE5vcm1hbCkgPiAwKSB7CiAgICAgICAgICAvLyBJbnRlcnNlY3RzIHBsYW5lLiBOb3cgY2hlY2sgaWYgdGhlIHNwaGVyZSBpcyBpbnNpZGUgdGhlIGZhY2UgcG9seWdvbgogICAgICAgICAgY29uc3QgZmFjZVZlcnRzID0gW107IC8vIEZhY2UgdmVydGljZXMsIGluIHdvcmxkIGNvb3JkcwoKICAgICAgICAgIGZvciAobGV0IGogPSAwLCBOdmVydHMgPSBmYWNlLmxlbmd0aDsgaiAhPT0gTnZlcnRzOyBqKyspIHsKICAgICAgICAgICAgY29uc3Qgd29ybGRWZXJ0ZXggPSB2M3Bvb2wuZ2V0KCk7CiAgICAgICAgICAgIHFqLnZtdWx0KHZlcnRzW2ZhY2Vbal1dLCB3b3JsZFZlcnRleCk7CiAgICAgICAgICAgIHhqLnZhZGQod29ybGRWZXJ0ZXgsIHdvcmxkVmVydGV4KTsKICAgICAgICAgICAgZmFjZVZlcnRzLnB1c2god29ybGRWZXJ0ZXgpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChwb2ludEluUG9seWdvbihmYWNlVmVydHMsIHdvcmxkTm9ybWFsLCB4aSkpIHsKICAgICAgICAgICAgLy8gSXMgdGhlIHNwaGVyZSBjZW50ZXIgaW4gdGhlIGZhY2UgcG9seWdvbj8KICAgICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTsKICAgICAgICAgICAgY29uc3QgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLCBiaiwgc2ksIHNqLCByc2ksIHJzaik7CiAgICAgICAgICAgIHdvcmxkTm9ybWFsLnNjYWxlKC1SLCByLnJpKTsgLy8gQ29udGFjdCBvZmZzZXQsIGZyb20gc3BoZXJlIGNlbnRlciB0byBjb250YWN0CgogICAgICAgICAgICB3b3JsZE5vcm1hbC5uZWdhdGUoci5uaSk7IC8vIE5vcm1hbCBwb2ludGluZyBvdXQgb2Ygc3BoZXJlCgogICAgICAgICAgICBjb25zdCBwZW5ldHJhdGlvblZlYzIgPSB2M3Bvb2wuZ2V0KCk7CiAgICAgICAgICAgIHdvcmxkTm9ybWFsLnNjYWxlKC1wZW5ldHJhdGlvbiwgcGVuZXRyYXRpb25WZWMyKTsKICAgICAgICAgICAgY29uc3QgcGVuZXRyYXRpb25TcGhlcmVQb2ludCA9IHYzcG9vbC5nZXQoKTsKICAgICAgICAgICAgd29ybGROb3JtYWwuc2NhbGUoLVIsIHBlbmV0cmF0aW9uU3BoZXJlUG9pbnQpOyAvL3hpLnZzdWIoeGopLnZhZGQocGVuZXRyYXRpb25TcGhlcmVQb2ludCkudmFkZChwZW5ldHJhdGlvblZlYzIgLCByLnJqKTsKCiAgICAgICAgICAgIHhpLnZzdWIoeGosIHIucmopOwogICAgICAgICAgICByLnJqLnZhZGQocGVuZXRyYXRpb25TcGhlcmVQb2ludCwgci5yaik7CiAgICAgICAgICAgIHIucmoudmFkZChwZW5ldHJhdGlvblZlYzIsIHIucmopOyAvLyBTaG91bGQgYmUgcmVsYXRpdmUgdG8gdGhlIGJvZHkuCgogICAgICAgICAgICByLnJqLnZhZGQoeGosIHIucmopOwogICAgICAgICAgICByLnJqLnZzdWIoYmoucG9zaXRpb24sIHIucmopOyAvLyBTaG91bGQgYmUgcmVsYXRpdmUgdG8gdGhlIGJvZHkuCgogICAgICAgICAgICByLnJpLnZhZGQoeGksIHIucmkpOwogICAgICAgICAgICByLnJpLnZzdWIoYmkucG9zaXRpb24sIHIucmkpOwogICAgICAgICAgICB2M3Bvb2wucmVsZWFzZShwZW5ldHJhdGlvblZlYzIpOwogICAgICAgICAgICB2M3Bvb2wucmVsZWFzZShwZW5ldHJhdGlvblNwaGVyZVBvaW50KTsKICAgICAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTsKICAgICAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpOyAvLyBSZWxlYXNlIHdvcmxkIHZlcnRpY2VzCgogICAgICAgICAgICBmb3IgKGxldCBqID0gMCwgTmZhY2V2ZXJ0cyA9IGZhY2VWZXJ0cy5sZW5ndGg7IGogIT09IE5mYWNldmVydHM7IGorKykgewogICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKGZhY2VWZXJ0c1tqXSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybjsgLy8gV2Ugb25seSBleHBlY3QgKm9uZSogZmFjZSBjb250YWN0CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBFZGdlPwogICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gZmFjZS5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgIC8vIEdldCB0d28gd29ybGQgdHJhbnNmb3JtZWQgdmVydGljZXMKICAgICAgICAgICAgICBjb25zdCB2MSA9IHYzcG9vbC5nZXQoKTsKICAgICAgICAgICAgICBjb25zdCB2MiA9IHYzcG9vbC5nZXQoKTsKICAgICAgICAgICAgICBxai52bXVsdCh2ZXJ0c1tmYWNlWyhqICsgMSkgJSBmYWNlLmxlbmd0aF1dLCB2MSk7CiAgICAgICAgICAgICAgcWoudm11bHQodmVydHNbZmFjZVsoaiArIDIpICUgZmFjZS5sZW5ndGhdXSwgdjIpOwogICAgICAgICAgICAgIHhqLnZhZGQodjEsIHYxKTsKICAgICAgICAgICAgICB4ai52YWRkKHYyLCB2Mik7IC8vIENvbnN0cnVjdCBlZGdlIHZlY3RvcgoKICAgICAgICAgICAgICBjb25zdCBlZGdlID0gc3BoZXJlQ29udmV4X2VkZ2U7CiAgICAgICAgICAgICAgdjIudnN1Yih2MSwgZWRnZSk7IC8vIENvbnN0cnVjdCB0aGUgc2FtZSB2ZWN0b3IsIGJ1dCBub3JtYWxpemVkCgogICAgICAgICAgICAgIGNvbnN0IGVkZ2VVbml0ID0gc3BoZXJlQ29udmV4X2VkZ2VVbml0OwogICAgICAgICAgICAgIGVkZ2UudW5pdChlZGdlVW5pdCk7IC8vIHAgaXMgeGkgcHJvamVjdGVkIG9udG8gdGhlIGVkZ2UKCiAgICAgICAgICAgICAgY29uc3QgcCA9IHYzcG9vbC5nZXQoKTsKICAgICAgICAgICAgICBjb25zdCB2MV90b194aSA9IHYzcG9vbC5nZXQoKTsKICAgICAgICAgICAgICB4aS52c3ViKHYxLCB2MV90b194aSk7CiAgICAgICAgICAgICAgY29uc3QgZG90ID0gdjFfdG9feGkuZG90KGVkZ2VVbml0KTsKICAgICAgICAgICAgICBlZGdlVW5pdC5zY2FsZShkb3QsIHApOwogICAgICAgICAgICAgIHAudmFkZCh2MSwgcCk7IC8vIENvbXB1dGUgYSB2ZWN0b3IgZnJvbSBwIHRvIHRoZSBjZW50ZXIgb2YgdGhlIHNwaGVyZQoKICAgICAgICAgICAgICBjb25zdCB4aV90b19wID0gdjNwb29sLmdldCgpOwogICAgICAgICAgICAgIHAudnN1Yih4aSwgeGlfdG9fcCk7IC8vIENvbGxpc2lvbiBpZiB0aGUgZWRnZS1zcGhlcmUgZGlzdGFuY2UgaXMgbGVzcyB0aGFuIHRoZSByYWRpdXMKICAgICAgICAgICAgICAvLyBBTkQgaWYgcCBpcyBpbiBiZXR3ZWVuIHYxIGFuZCB2MgoKICAgICAgICAgICAgICBpZiAoZG90ID4gMCAmJiBkb3QgKiBkb3QgPCBlZGdlLmxlbmd0aFNxdWFyZWQoKSAmJiB4aV90b19wLmxlbmd0aFNxdWFyZWQoKSA8IFIgKiBSKSB7CiAgICAgICAgICAgICAgICAvLyBDb2xsaXNpb24gaWYgdGhlIGVkZ2Utc3BoZXJlIGRpc3RhbmNlIGlzIGxlc3MgdGhhbiB0aGUgcmFkaXVzCiAgICAgICAgICAgICAgICAvLyBFZGdlIGNvbnRhY3QhCiAgICAgICAgICAgICAgICBpZiAoanVzdFRlc3QpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgY29uc3QgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLCBiaiwgc2ksIHNqLCByc2ksIHJzaik7CiAgICAgICAgICAgICAgICBwLnZzdWIoeGosIHIucmopOwogICAgICAgICAgICAgICAgcC52c3ViKHhpLCByLm5pKTsKICAgICAgICAgICAgICAgIHIubmkubm9ybWFsaXplKCk7CiAgICAgICAgICAgICAgICByLm5pLnNjYWxlKFIsIHIucmkpOyAvLyBTaG91bGQgYmUgcmVsYXRpdmUgdG8gdGhlIGJvZHkuCgogICAgICAgICAgICAgICAgci5yai52YWRkKHhqLCByLnJqKTsKICAgICAgICAgICAgICAgIHIucmoudnN1Yihiai5wb3NpdGlvbiwgci5yaik7IC8vIFNob3VsZCBiZSByZWxhdGl2ZSB0byB0aGUgYm9keS4KCiAgICAgICAgICAgICAgICByLnJpLnZhZGQoeGksIHIucmkpOwogICAgICAgICAgICAgICAgci5yaS52c3ViKGJpLnBvc2l0aW9uLCByLnJpKTsKICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7CiAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7IC8vIFJlbGVhc2Ugd29ybGQgdmVydGljZXMKCiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMCwgTmZhY2V2ZXJ0cyA9IGZhY2VWZXJ0cy5sZW5ndGg7IGogIT09IE5mYWNldmVydHM7IGorKykgewogICAgICAgICAgICAgICAgICB2M3Bvb2wucmVsZWFzZShmYWNlVmVydHNbal0pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHYxKTsKICAgICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHYyKTsKICAgICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHApOwogICAgICAgICAgICAgICAgdjNwb29sLnJlbGVhc2UoeGlfdG9fcCk7CiAgICAgICAgICAgICAgICB2M3Bvb2wucmVsZWFzZSh2MV90b194aSk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICB2M3Bvb2wucmVsZWFzZSh2MSk7CiAgICAgICAgICAgICAgdjNwb29sLnJlbGVhc2UodjIpOwogICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHApOwogICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHhpX3RvX3ApOwogICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHYxX3RvX3hpKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSAvLyBSZWxlYXNlIHdvcmxkIHZlcnRpY2VzCgoKICAgICAgICAgIGZvciAobGV0IGogPSAwLCBOZmFjZXZlcnRzID0gZmFjZVZlcnRzLmxlbmd0aDsgaiAhPT0gTmZhY2V2ZXJ0czsgaisrKSB7CiAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKGZhY2VWZXJ0c1tqXSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgcGxhbmVDb252ZXgocGxhbmVTaGFwZSwgY29udmV4U2hhcGUsIHBsYW5lUG9zaXRpb24sIGNvbnZleFBvc2l0aW9uLCBwbGFuZVF1YXQsIGNvbnZleFF1YXQsIHBsYW5lQm9keSwgY29udmV4Qm9keSwgc2ksIHNqLCBqdXN0VGVzdCkgewogICAgICAvLyBTaW1wbHkgcmV0dXJuIHRoZSBwb2ludHMgYmVoaW5kIHRoZSBwbGFuZS4KICAgICAgY29uc3Qgd29ybGRWZXJ0ZXggPSBwbGFuZUNvbnZleF92OwogICAgICBjb25zdCB3b3JsZE5vcm1hbCA9IHBsYW5lQ29udmV4X25vcm1hbDsKICAgICAgd29ybGROb3JtYWwuc2V0KDAsIDAsIDEpOwogICAgICBwbGFuZVF1YXQudm11bHQod29ybGROb3JtYWwsIHdvcmxkTm9ybWFsKTsgLy8gVHVybiBub3JtYWwgYWNjb3JkaW5nIHRvIHBsYW5lIG9yaWVudGF0aW9uCgogICAgICBsZXQgbnVtQ29udGFjdHMgPSAwOwogICAgICBjb25zdCByZWxwb3MgPSBwbGFuZUNvbnZleF9yZWxwb3M7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gY29udmV4U2hhcGUudmVydGljZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAvLyBHZXQgd29ybGQgY29udmV4IHZlcnRleAogICAgICAgIHdvcmxkVmVydGV4LmNvcHkoY29udmV4U2hhcGUudmVydGljZXNbaV0pOwogICAgICAgIGNvbnZleFF1YXQudm11bHQod29ybGRWZXJ0ZXgsIHdvcmxkVmVydGV4KTsKICAgICAgICBjb252ZXhQb3NpdGlvbi52YWRkKHdvcmxkVmVydGV4LCB3b3JsZFZlcnRleCk7CiAgICAgICAgd29ybGRWZXJ0ZXgudnN1YihwbGFuZVBvc2l0aW9uLCByZWxwb3MpOwogICAgICAgIGNvbnN0IGRvdCA9IHdvcmxkTm9ybWFsLmRvdChyZWxwb3MpOwoKICAgICAgICBpZiAoZG90IDw9IDAuMCkgewogICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfQoKICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihwbGFuZUJvZHksIGNvbnZleEJvZHksIHBsYW5lU2hhcGUsIGNvbnZleFNoYXBlLCBzaSwgc2opOyAvLyBHZXQgdmVydGV4IHBvc2l0aW9uIHByb2plY3RlZCBvbiBwbGFuZQoKICAgICAgICAgIGNvbnN0IHByb2plY3RlZCA9IHBsYW5lQ29udmV4X3Byb2plY3RlZDsKICAgICAgICAgIHdvcmxkTm9ybWFsLnNjYWxlKHdvcmxkTm9ybWFsLmRvdChyZWxwb3MpLCBwcm9qZWN0ZWQpOwogICAgICAgICAgd29ybGRWZXJ0ZXgudnN1Yihwcm9qZWN0ZWQsIHByb2plY3RlZCk7CiAgICAgICAgICBwcm9qZWN0ZWQudnN1YihwbGFuZVBvc2l0aW9uLCByLnJpKTsgLy8gRnJvbSBwbGFuZSB0byB2ZXJ0ZXggcHJvamVjdGVkIG9uIHBsYW5lCgogICAgICAgICAgci5uaS5jb3B5KHdvcmxkTm9ybWFsKTsgLy8gQ29udGFjdCBub3JtYWwgaXMgdGhlIHBsYW5lIG5vcm1hbCBvdXQgZnJvbSBwbGFuZQogICAgICAgICAgLy8gcmogaXMgbm93IGp1c3QgdGhlIHZlY3RvciBmcm9tIHRoZSBjb252ZXggY2VudGVyIHRvIHRoZSB2ZXJ0ZXgKCiAgICAgICAgICB3b3JsZFZlcnRleC52c3ViKGNvbnZleFBvc2l0aW9uLCByLnJqKTsgLy8gTWFrZSBpdCByZWxhdGl2ZSB0byB0aGUgYm9keQoKICAgICAgICAgIHIucmkudmFkZChwbGFuZVBvc2l0aW9uLCByLnJpKTsKICAgICAgICAgIHIucmkudnN1YihwbGFuZUJvZHkucG9zaXRpb24sIHIucmkpOwogICAgICAgICAgci5yai52YWRkKGNvbnZleFBvc2l0aW9uLCByLnJqKTsKICAgICAgICAgIHIucmoudnN1Yihjb252ZXhCb2R5LnBvc2l0aW9uLCByLnJqKTsKICAgICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7CiAgICAgICAgICBudW1Db250YWN0cysrOwoKICAgICAgICAgIGlmICghdGhpcy5lbmFibGVGcmljdGlvblJlZHVjdGlvbikgewogICAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAodGhpcy5lbmFibGVGcmljdGlvblJlZHVjdGlvbiAmJiBudW1Db250YWN0cykgewogICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25Gcm9tQXZlcmFnZShudW1Db250YWN0cyk7CiAgICAgIH0KICAgIH0KCiAgICBib3hDb252ZXgoc2ksIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLm1hdGVyaWFsID0gc2kubWF0ZXJpYWw7CiAgICAgIHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5jb2xsaXNpb25SZXNwb25zZSA9IHNpLmNvbGxpc2lvblJlc3BvbnNlOwogICAgICByZXR1cm4gdGhpcy5jb252ZXhDb252ZXgoc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgc2ksIHNqLCBqdXN0VGVzdCk7CiAgICB9CgogICAgc3BoZXJlSGVpZ2h0ZmllbGQoc3BoZXJlU2hhcGUsIGhmU2hhcGUsIHNwaGVyZVBvcywgaGZQb3MsIHNwaGVyZVF1YXQsIGhmUXVhdCwgc3BoZXJlQm9keSwgaGZCb2R5LCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgY29uc3QgZGF0YSA9IGhmU2hhcGUuZGF0YTsKICAgICAgY29uc3QgcmFkaXVzID0gc3BoZXJlU2hhcGUucmFkaXVzOwogICAgICBjb25zdCB3ID0gaGZTaGFwZS5lbGVtZW50U2l6ZTsKICAgICAgY29uc3Qgd29ybGRQaWxsYXJPZmZzZXQgPSBzcGhlcmVIZWlnaHRmaWVsZF90bXAyOyAvLyBHZXQgc3BoZXJlIHBvc2l0aW9uIHRvIGhlaWdodGZpZWxkIGxvY2FsIQoKICAgICAgY29uc3QgbG9jYWxTcGhlcmVQb3MgPSBzcGhlcmVIZWlnaHRmaWVsZF90bXAxOwogICAgICBUcmFuc2Zvcm0ucG9pbnRUb0xvY2FsRnJhbWUoaGZQb3MsIGhmUXVhdCwgc3BoZXJlUG9zLCBsb2NhbFNwaGVyZVBvcyk7IC8vIEdldCB0aGUgaW5kZXggb2YgdGhlIGRhdGEgcG9pbnRzIHRvIHRlc3QgYWdhaW5zdAoKICAgICAgbGV0IGlNaW5YID0gTWF0aC5mbG9vcigobG9jYWxTcGhlcmVQb3MueCAtIHJhZGl1cykgLyB3KSAtIDE7CiAgICAgIGxldCBpTWF4WCA9IE1hdGguY2VpbCgobG9jYWxTcGhlcmVQb3MueCArIHJhZGl1cykgLyB3KSArIDE7CiAgICAgIGxldCBpTWluWSA9IE1hdGguZmxvb3IoKGxvY2FsU3BoZXJlUG9zLnkgLSByYWRpdXMpIC8gdykgLSAxOwogICAgICBsZXQgaU1heFkgPSBNYXRoLmNlaWwoKGxvY2FsU3BoZXJlUG9zLnkgKyByYWRpdXMpIC8gdykgKyAxOyAvLyBCYWlsIG91dCBpZiB3ZSBhcmUgb3V0IG9mIHRoZSB0ZXJyYWluCgogICAgICBpZiAoaU1heFggPCAwIHx8IGlNYXhZIDwgMCB8fCBpTWluWCA+IGRhdGEubGVuZ3RoIHx8IGlNaW5ZID4gZGF0YVswXS5sZW5ndGgpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0gLy8gQ2xhbXAgaW5kZXggdG8gZWRnZXMKCgogICAgICBpZiAoaU1pblggPCAwKSB7CiAgICAgICAgaU1pblggPSAwOwogICAgICB9CgogICAgICBpZiAoaU1heFggPCAwKSB7CiAgICAgICAgaU1heFggPSAwOwogICAgICB9CgogICAgICBpZiAoaU1pblkgPCAwKSB7CiAgICAgICAgaU1pblkgPSAwOwogICAgICB9CgogICAgICBpZiAoaU1heFkgPCAwKSB7CiAgICAgICAgaU1heFkgPSAwOwogICAgICB9CgogICAgICBpZiAoaU1pblggPj0gZGF0YS5sZW5ndGgpIHsKICAgICAgICBpTWluWCA9IGRhdGEubGVuZ3RoIC0gMTsKICAgICAgfQoKICAgICAgaWYgKGlNYXhYID49IGRhdGEubGVuZ3RoKSB7CiAgICAgICAgaU1heFggPSBkYXRhLmxlbmd0aCAtIDE7CiAgICAgIH0KCiAgICAgIGlmIChpTWF4WSA+PSBkYXRhWzBdLmxlbmd0aCkgewogICAgICAgIGlNYXhZID0gZGF0YVswXS5sZW5ndGggLSAxOwogICAgICB9CgogICAgICBpZiAoaU1pblkgPj0gZGF0YVswXS5sZW5ndGgpIHsKICAgICAgICBpTWluWSA9IGRhdGFbMF0ubGVuZ3RoIC0gMTsKICAgICAgfQoKICAgICAgY29uc3QgbWluTWF4ID0gW107CiAgICAgIGhmU2hhcGUuZ2V0UmVjdE1pbk1heChpTWluWCwgaU1pblksIGlNYXhYLCBpTWF4WSwgbWluTWF4KTsKICAgICAgY29uc3QgbWluID0gbWluTWF4WzBdOwogICAgICBjb25zdCBtYXggPSBtaW5NYXhbMV07IC8vIEJhaWwgb3V0IGlmIHdlIGNhbid0IHRvdWNoIHRoZSBib3VuZGluZyBoZWlnaHQgYm94CgogICAgICBpZiAobG9jYWxTcGhlcmVQb3MueiAtIHJhZGl1cyA+IG1heCB8fCBsb2NhbFNwaGVyZVBvcy56ICsgcmFkaXVzIDwgbWluKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBjb25zdCByZXN1bHQgPSB0aGlzLnJlc3VsdDsKCiAgICAgIGZvciAobGV0IGkgPSBpTWluWDsgaSA8IGlNYXhYOyBpKyspIHsKICAgICAgICBmb3IgKGxldCBqID0gaU1pblk7IGogPCBpTWF4WTsgaisrKSB7CiAgICAgICAgICBjb25zdCBudW1Db250YWN0c0JlZm9yZSA9IHJlc3VsdC5sZW5ndGg7CiAgICAgICAgICBsZXQgaW50ZXJzZWN0aW5nID0gZmFsc2U7IC8vIExvd2VyIHRyaWFuZ2xlCgogICAgICAgICAgaGZTaGFwZS5nZXRDb252ZXhUcmlhbmdsZVBpbGxhcihpLCBqLCBmYWxzZSk7CiAgICAgICAgICBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUoaGZQb3MsIGhmUXVhdCwgaGZTaGFwZS5waWxsYXJPZmZzZXQsIHdvcmxkUGlsbGFyT2Zmc2V0KTsKCiAgICAgICAgICBpZiAoc3BoZXJlUG9zLmRpc3RhbmNlVG8od29ybGRQaWxsYXJPZmZzZXQpIDwgaGZTaGFwZS5waWxsYXJDb252ZXguYm91bmRpbmdTcGhlcmVSYWRpdXMgKyBzcGhlcmVTaGFwZS5ib3VuZGluZ1NwaGVyZVJhZGl1cykgewogICAgICAgICAgICBpbnRlcnNlY3RpbmcgPSB0aGlzLnNwaGVyZUNvbnZleChzcGhlcmVTaGFwZSwgaGZTaGFwZS5waWxsYXJDb252ZXgsIHNwaGVyZVBvcywgd29ybGRQaWxsYXJPZmZzZXQsIHNwaGVyZVF1YXQsIGhmUXVhdCwgc3BoZXJlQm9keSwgaGZCb2R5LCBzcGhlcmVTaGFwZSwgaGZTaGFwZSwganVzdFRlc3QpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChqdXN0VGVzdCAmJiBpbnRlcnNlY3RpbmcpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9IC8vIFVwcGVyIHRyaWFuZ2xlCgoKICAgICAgICAgIGhmU2hhcGUuZ2V0Q29udmV4VHJpYW5nbGVQaWxsYXIoaSwgaiwgdHJ1ZSk7CiAgICAgICAgICBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUoaGZQb3MsIGhmUXVhdCwgaGZTaGFwZS5waWxsYXJPZmZzZXQsIHdvcmxkUGlsbGFyT2Zmc2V0KTsKCiAgICAgICAgICBpZiAoc3BoZXJlUG9zLmRpc3RhbmNlVG8od29ybGRQaWxsYXJPZmZzZXQpIDwgaGZTaGFwZS5waWxsYXJDb252ZXguYm91bmRpbmdTcGhlcmVSYWRpdXMgKyBzcGhlcmVTaGFwZS5ib3VuZGluZ1NwaGVyZVJhZGl1cykgewogICAgICAgICAgICBpbnRlcnNlY3RpbmcgPSB0aGlzLnNwaGVyZUNvbnZleChzcGhlcmVTaGFwZSwgaGZTaGFwZS5waWxsYXJDb252ZXgsIHNwaGVyZVBvcywgd29ybGRQaWxsYXJPZmZzZXQsIHNwaGVyZVF1YXQsIGhmUXVhdCwgc3BoZXJlQm9keSwgaGZCb2R5LCBzcGhlcmVTaGFwZSwgaGZTaGFwZSwganVzdFRlc3QpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChqdXN0VGVzdCAmJiBpbnRlcnNlY3RpbmcpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9CgogICAgICAgICAgY29uc3QgbnVtQ29udGFjdHMgPSByZXN1bHQubGVuZ3RoIC0gbnVtQ29udGFjdHNCZWZvcmU7CgogICAgICAgICAgaWYgKG51bUNvbnRhY3RzID4gMikgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICAvKgogICAgICAgICAgICAvLyBTa2lwIGFsbCBidXQgMQogICAgICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IG51bUNvbnRhY3RzIC0gMTsgaysrKSB7CiAgICAgICAgICAgICAgICByZXN1bHQucG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICovCgogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIGJveEhlaWdodGZpZWxkKHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5tYXRlcmlhbCA9IHNpLm1hdGVyaWFsOwogICAgICBzaS5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24uY29sbGlzaW9uUmVzcG9uc2UgPSBzaS5jb2xsaXNpb25SZXNwb25zZTsKICAgICAgcmV0dXJuIHRoaXMuY29udmV4SGVpZ2h0ZmllbGQoc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgc2ksIHNqLCBqdXN0VGVzdCk7CiAgICB9CgogICAgY29udmV4SGVpZ2h0ZmllbGQoY29udmV4U2hhcGUsIGhmU2hhcGUsIGNvbnZleFBvcywgaGZQb3MsIGNvbnZleFF1YXQsIGhmUXVhdCwgY29udmV4Qm9keSwgaGZCb2R5LCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgY29uc3QgZGF0YSA9IGhmU2hhcGUuZGF0YTsKICAgICAgY29uc3QgdyA9IGhmU2hhcGUuZWxlbWVudFNpemU7CiAgICAgIGNvbnN0IHJhZGl1cyA9IGNvbnZleFNoYXBlLmJvdW5kaW5nU3BoZXJlUmFkaXVzOwogICAgICBjb25zdCB3b3JsZFBpbGxhck9mZnNldCA9IGNvbnZleEhlaWdodGZpZWxkX3RtcDI7CiAgICAgIGNvbnN0IGZhY2VMaXN0ID0gY29udmV4SGVpZ2h0ZmllbGRfZmFjZUxpc3Q7IC8vIEdldCBzcGhlcmUgcG9zaXRpb24gdG8gaGVpZ2h0ZmllbGQgbG9jYWwhCgogICAgICBjb25zdCBsb2NhbENvbnZleFBvcyA9IGNvbnZleEhlaWdodGZpZWxkX3RtcDE7CiAgICAgIFRyYW5zZm9ybS5wb2ludFRvTG9jYWxGcmFtZShoZlBvcywgaGZRdWF0LCBjb252ZXhQb3MsIGxvY2FsQ29udmV4UG9zKTsgLy8gR2V0IHRoZSBpbmRleCBvZiB0aGUgZGF0YSBwb2ludHMgdG8gdGVzdCBhZ2FpbnN0CgogICAgICBsZXQgaU1pblggPSBNYXRoLmZsb29yKChsb2NhbENvbnZleFBvcy54IC0gcmFkaXVzKSAvIHcpIC0gMTsKICAgICAgbGV0IGlNYXhYID0gTWF0aC5jZWlsKChsb2NhbENvbnZleFBvcy54ICsgcmFkaXVzKSAvIHcpICsgMTsKICAgICAgbGV0IGlNaW5ZID0gTWF0aC5mbG9vcigobG9jYWxDb252ZXhQb3MueSAtIHJhZGl1cykgLyB3KSAtIDE7CiAgICAgIGxldCBpTWF4WSA9IE1hdGguY2VpbCgobG9jYWxDb252ZXhQb3MueSArIHJhZGl1cykgLyB3KSArIDE7IC8vIEJhaWwgb3V0IGlmIHdlIGFyZSBvdXQgb2YgdGhlIHRlcnJhaW4KCiAgICAgIGlmIChpTWF4WCA8IDAgfHwgaU1heFkgPCAwIHx8IGlNaW5YID4gZGF0YS5sZW5ndGggfHwgaU1pblkgPiBkYXRhWzBdLmxlbmd0aCkgewogICAgICAgIHJldHVybjsKICAgICAgfSAvLyBDbGFtcCBpbmRleCB0byBlZGdlcwoKCiAgICAgIGlmIChpTWluWCA8IDApIHsKICAgICAgICBpTWluWCA9IDA7CiAgICAgIH0KCiAgICAgIGlmIChpTWF4WCA8IDApIHsKICAgICAgICBpTWF4WCA9IDA7CiAgICAgIH0KCiAgICAgIGlmIChpTWluWSA8IDApIHsKICAgICAgICBpTWluWSA9IDA7CiAgICAgIH0KCiAgICAgIGlmIChpTWF4WSA8IDApIHsKICAgICAgICBpTWF4WSA9IDA7CiAgICAgIH0KCiAgICAgIGlmIChpTWluWCA+PSBkYXRhLmxlbmd0aCkgewogICAgICAgIGlNaW5YID0gZGF0YS5sZW5ndGggLSAxOwogICAgICB9CgogICAgICBpZiAoaU1heFggPj0gZGF0YS5sZW5ndGgpIHsKICAgICAgICBpTWF4WCA9IGRhdGEubGVuZ3RoIC0gMTsKICAgICAgfQoKICAgICAgaWYgKGlNYXhZID49IGRhdGFbMF0ubGVuZ3RoKSB7CiAgICAgICAgaU1heFkgPSBkYXRhWzBdLmxlbmd0aCAtIDE7CiAgICAgIH0KCiAgICAgIGlmIChpTWluWSA+PSBkYXRhWzBdLmxlbmd0aCkgewogICAgICAgIGlNaW5ZID0gZGF0YVswXS5sZW5ndGggLSAxOwogICAgICB9CgogICAgICBjb25zdCBtaW5NYXggPSBbXTsKICAgICAgaGZTaGFwZS5nZXRSZWN0TWluTWF4KGlNaW5YLCBpTWluWSwgaU1heFgsIGlNYXhZLCBtaW5NYXgpOwogICAgICBjb25zdCBtaW4gPSBtaW5NYXhbMF07CiAgICAgIGNvbnN0IG1heCA9IG1pbk1heFsxXTsgLy8gQmFpbCBvdXQgaWYgd2UncmUgY2FudCB0b3VjaCB0aGUgYm91bmRpbmcgaGVpZ2h0IGJveAoKICAgICAgaWYgKGxvY2FsQ29udmV4UG9zLnogLSByYWRpdXMgPiBtYXggfHwgbG9jYWxDb252ZXhQb3MueiArIHJhZGl1cyA8IG1pbikgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgZm9yIChsZXQgaSA9IGlNaW5YOyBpIDwgaU1heFg7IGkrKykgewogICAgICAgIGZvciAobGV0IGogPSBpTWluWTsgaiA8IGlNYXhZOyBqKyspIHsKICAgICAgICAgIGxldCBpbnRlcnNlY3RpbmcgPSBmYWxzZTsgLy8gTG93ZXIgdHJpYW5nbGUKCiAgICAgICAgICBoZlNoYXBlLmdldENvbnZleFRyaWFuZ2xlUGlsbGFyKGksIGosIGZhbHNlKTsKICAgICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZShoZlBvcywgaGZRdWF0LCBoZlNoYXBlLnBpbGxhck9mZnNldCwgd29ybGRQaWxsYXJPZmZzZXQpOwoKICAgICAgICAgIGlmIChjb252ZXhQb3MuZGlzdGFuY2VUbyh3b3JsZFBpbGxhck9mZnNldCkgPCBoZlNoYXBlLnBpbGxhckNvbnZleC5ib3VuZGluZ1NwaGVyZVJhZGl1cyArIGNvbnZleFNoYXBlLmJvdW5kaW5nU3BoZXJlUmFkaXVzKSB7CiAgICAgICAgICAgIGludGVyc2VjdGluZyA9IHRoaXMuY29udmV4Q29udmV4KGNvbnZleFNoYXBlLCBoZlNoYXBlLnBpbGxhckNvbnZleCwgY29udmV4UG9zLCB3b3JsZFBpbGxhck9mZnNldCwgY29udmV4UXVhdCwgaGZRdWF0LCBjb252ZXhCb2R5LCBoZkJvZHksIG51bGwsIG51bGwsIGp1c3RUZXN0LCBmYWNlTGlzdCwgbnVsbCk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGp1c3RUZXN0ICYmIGludGVyc2VjdGluZykgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0gLy8gVXBwZXIgdHJpYW5nbGUKCgogICAgICAgICAgaGZTaGFwZS5nZXRDb252ZXhUcmlhbmdsZVBpbGxhcihpLCBqLCB0cnVlKTsKICAgICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZShoZlBvcywgaGZRdWF0LCBoZlNoYXBlLnBpbGxhck9mZnNldCwgd29ybGRQaWxsYXJPZmZzZXQpOwoKICAgICAgICAgIGlmIChjb252ZXhQb3MuZGlzdGFuY2VUbyh3b3JsZFBpbGxhck9mZnNldCkgPCBoZlNoYXBlLnBpbGxhckNvbnZleC5ib3VuZGluZ1NwaGVyZVJhZGl1cyArIGNvbnZleFNoYXBlLmJvdW5kaW5nU3BoZXJlUmFkaXVzKSB7CiAgICAgICAgICAgIGludGVyc2VjdGluZyA9IHRoaXMuY29udmV4Q29udmV4KGNvbnZleFNoYXBlLCBoZlNoYXBlLnBpbGxhckNvbnZleCwgY29udmV4UG9zLCB3b3JsZFBpbGxhck9mZnNldCwgY29udmV4UXVhdCwgaGZRdWF0LCBjb252ZXhCb2R5LCBoZkJvZHksIG51bGwsIG51bGwsIGp1c3RUZXN0LCBmYWNlTGlzdCwgbnVsbCk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGp1c3RUZXN0ICYmIGludGVyc2VjdGluZykgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBzcGhlcmVQYXJ0aWNsZShzaiwgc2ksIHhqLCB4aSwgcWosIHFpLCBiaiwgYmksIHJzaSwgcnNqLCBqdXN0VGVzdCkgewogICAgICAvLyBUaGUgbm9ybWFsIGlzIHRoZSB1bml0IHZlY3RvciBmcm9tIHNwaGVyZSBjZW50ZXIgdG8gcGFydGljbGUgY2VudGVyCiAgICAgIGNvbnN0IG5vcm1hbCA9IHBhcnRpY2xlU3BoZXJlX25vcm1hbDsKICAgICAgbm9ybWFsLnNldCgwLCAwLCAxKTsKICAgICAgeGkudnN1Yih4aiwgbm9ybWFsKTsKICAgICAgY29uc3QgbGVuZ3RoU3F1YXJlZCA9IG5vcm1hbC5sZW5ndGhTcXVhcmVkKCk7CgogICAgICBpZiAobGVuZ3RoU3F1YXJlZCA8PSBzai5yYWRpdXMgKiBzai5yYWRpdXMpIHsKICAgICAgICBpZiAoanVzdFRlc3QpIHsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KCiAgICAgICAgY29uc3QgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLCBiaiwgc2ksIHNqLCByc2ksIHJzaik7CiAgICAgICAgbm9ybWFsLm5vcm1hbGl6ZSgpOwogICAgICAgIHIucmouY29weShub3JtYWwpOwogICAgICAgIHIucmouc2NhbGUoc2oucmFkaXVzLCByLnJqKTsKICAgICAgICByLm5pLmNvcHkobm9ybWFsKTsgLy8gQ29udGFjdCBub3JtYWwKCiAgICAgICAgci5uaS5uZWdhdGUoci5uaSk7CiAgICAgICAgci5yaS5zZXQoMCwgMCwgMCk7IC8vIENlbnRlciBvZiBwYXJ0aWNsZQoKICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgfQogICAgfQoKICAgIHBsYW5lUGFydGljbGUoc2osIHNpLCB4aiwgeGksIHFqLCBxaSwgYmosIGJpLCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgY29uc3Qgbm9ybWFsID0gcGFydGljbGVQbGFuZV9ub3JtYWw7CiAgICAgIG5vcm1hbC5zZXQoMCwgMCwgMSk7CiAgICAgIGJqLnF1YXRlcm5pb24udm11bHQobm9ybWFsLCBub3JtYWwpOyAvLyBUdXJuIG5vcm1hbCBhY2NvcmRpbmcgdG8gcGxhbmUgb3JpZW50YXRpb24KCiAgICAgIGNvbnN0IHJlbHBvcyA9IHBhcnRpY2xlUGxhbmVfcmVscG9zOwogICAgICB4aS52c3ViKGJqLnBvc2l0aW9uLCByZWxwb3MpOwogICAgICBjb25zdCBkb3QgPSBub3JtYWwuZG90KHJlbHBvcyk7CgogICAgICBpZiAoZG90IDw9IDAuMCkgewogICAgICAgIGlmIChqdXN0VGVzdCkgewogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQoKICAgICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksIGJqLCBzaSwgc2osIHJzaSwgcnNqKTsKICAgICAgICByLm5pLmNvcHkobm9ybWFsKTsgLy8gQ29udGFjdCBub3JtYWwgaXMgdGhlIHBsYW5lIG5vcm1hbAoKICAgICAgICByLm5pLm5lZ2F0ZShyLm5pKTsKICAgICAgICByLnJpLnNldCgwLCAwLCAwKTsgLy8gQ2VudGVyIG9mIHBhcnRpY2xlCiAgICAgICAgLy8gR2V0IHBhcnRpY2xlIHBvc2l0aW9uIHByb2plY3RlZCBvbiBwbGFuZQoKICAgICAgICBjb25zdCBwcm9qZWN0ZWQgPSBwYXJ0aWNsZVBsYW5lX3Byb2plY3RlZDsKICAgICAgICBub3JtYWwuc2NhbGUobm9ybWFsLmRvdCh4aSksIHByb2plY3RlZCk7CiAgICAgICAgeGkudnN1Yihwcm9qZWN0ZWQsIHByb2plY3RlZCk7IC8vcHJvamVjdGVkLnZhZGQoYmoucG9zaXRpb24scHJvamVjdGVkKTsKICAgICAgICAvLyByaiBpcyBub3cgdGhlIHByb2plY3RlZCB3b3JsZCBwb3NpdGlvbiBtaW51cyBwbGFuZSBwb3NpdGlvbgoKICAgICAgICByLnJqLmNvcHkocHJvamVjdGVkKTsKICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgfQogICAgfQoKICAgIGJveFBhcnRpY2xlKHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5tYXRlcmlhbCA9IHNpLm1hdGVyaWFsOwogICAgICBzaS5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24uY29sbGlzaW9uUmVzcG9uc2UgPSBzaS5jb2xsaXNpb25SZXNwb25zZTsKICAgICAgcmV0dXJuIHRoaXMuY29udmV4UGFydGljbGUoc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgc2ksIHNqLCBqdXN0VGVzdCk7CiAgICB9CgogICAgY29udmV4UGFydGljbGUoc2osIHNpLCB4aiwgeGksIHFqLCBxaSwgYmosIGJpLCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgbGV0IHBlbmV0cmF0ZWRGYWNlSW5kZXggPSAtMTsKICAgICAgY29uc3QgcGVuZXRyYXRlZEZhY2VOb3JtYWwgPSBjb252ZXhQYXJ0aWNsZV9wZW5ldHJhdGVkRmFjZU5vcm1hbDsKICAgICAgY29uc3Qgd29ybGRQZW5ldHJhdGlvblZlYyA9IGNvbnZleFBhcnRpY2xlX3dvcmxkUGVuZXRyYXRpb25WZWM7CiAgICAgIGxldCBtaW5QZW5ldHJhdGlvbiA9IG51bGw7CiAgICAgIGNvbnN0IGxvY2FsID0gY29udmV4UGFydGljbGVfbG9jYWw7CiAgICAgIGxvY2FsLmNvcHkoeGkpOwogICAgICBsb2NhbC52c3ViKHhqLCBsb2NhbCk7IC8vIENvbnZlcnQgcG9zaXRpb24gdG8gcmVsYXRpdmUgdGhlIGNvbnZleCBvcmlnaW4KCiAgICAgIHFqLmNvbmp1Z2F0ZShjcWopOwogICAgICBjcWoudm11bHQobG9jYWwsIGxvY2FsKTsKCiAgICAgIGlmIChzai5wb2ludElzSW5zaWRlKGxvY2FsKSkgewogICAgICAgIGlmIChzai53b3JsZFZlcnRpY2VzTmVlZHNVcGRhdGUpIHsKICAgICAgICAgIHNqLmNvbXB1dGVXb3JsZFZlcnRpY2VzKHhqLCBxaik7CiAgICAgICAgfQoKICAgICAgICBpZiAoc2oud29ybGRGYWNlTm9ybWFsc05lZWRzVXBkYXRlKSB7CiAgICAgICAgICBzai5jb21wdXRlV29ybGRGYWNlTm9ybWFscyhxaik7CiAgICAgICAgfSAvLyBGb3IgZWFjaCB3b3JsZCBwb2x5Z29uIGluIHRoZSBwb2x5aGVkcmEKCgogICAgICAgIGZvciAobGV0IGkgPSAwLCBuZmFjZXMgPSBzai5mYWNlcy5sZW5ndGg7IGkgIT09IG5mYWNlczsgaSsrKSB7CiAgICAgICAgICAvLyBDb25zdHJ1Y3Qgd29ybGQgZmFjZSB2ZXJ0aWNlcwogICAgICAgICAgY29uc3QgdmVydHMgPSBbc2oud29ybGRWZXJ0aWNlc1tzai5mYWNlc1tpXVswXV1dOwogICAgICAgICAgY29uc3Qgbm9ybWFsID0gc2oud29ybGRGYWNlTm9ybWFsc1tpXTsgLy8gQ2hlY2sgaG93IG11Y2ggdGhlIHBhcnRpY2xlIHBlbmV0cmF0ZXMgdGhlIHBvbHlnb24gcGxhbmUuCgogICAgICAgICAgeGkudnN1Yih2ZXJ0c1swXSwgY29udmV4UGFydGljbGVfdmVydGV4VG9QYXJ0aWNsZSk7CiAgICAgICAgICBjb25zdCBwZW5ldHJhdGlvbiA9IC1ub3JtYWwuZG90KGNvbnZleFBhcnRpY2xlX3ZlcnRleFRvUGFydGljbGUpOwoKICAgICAgICAgIGlmIChtaW5QZW5ldHJhdGlvbiA9PT0gbnVsbCB8fCBNYXRoLmFicyhwZW5ldHJhdGlvbikgPCBNYXRoLmFicyhtaW5QZW5ldHJhdGlvbikpIHsKICAgICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIG1pblBlbmV0cmF0aW9uID0gcGVuZXRyYXRpb247CiAgICAgICAgICAgIHBlbmV0cmF0ZWRGYWNlSW5kZXggPSBpOwogICAgICAgICAgICBwZW5ldHJhdGVkRmFjZU5vcm1hbC5jb3B5KG5vcm1hbCk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAocGVuZXRyYXRlZEZhY2VJbmRleCAhPT0gLTEpIHsKICAgICAgICAgIC8vIFNldHVwIGNvbnRhY3QKICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opOwogICAgICAgICAgcGVuZXRyYXRlZEZhY2VOb3JtYWwuc2NhbGUobWluUGVuZXRyYXRpb24sIHdvcmxkUGVuZXRyYXRpb25WZWMpOyAvLyByaiBpcyB0aGUgcGFydGljbGUgcG9zaXRpb24gcHJvamVjdGVkIHRvIHRoZSBmYWNlCgogICAgICAgICAgd29ybGRQZW5ldHJhdGlvblZlYy52YWRkKHhpLCB3b3JsZFBlbmV0cmF0aW9uVmVjKTsKICAgICAgICAgIHdvcmxkUGVuZXRyYXRpb25WZWMudnN1Yih4aiwgd29ybGRQZW5ldHJhdGlvblZlYyk7CiAgICAgICAgICByLnJqLmNvcHkod29ybGRQZW5ldHJhdGlvblZlYyk7IC8vY29uc3QgcHJvamVjdGVkVG9GYWNlID0geGkudnN1Yih4aikudmFkZCh3b3JsZFBlbmV0cmF0aW9uVmVjKTsKICAgICAgICAgIC8vcHJvamVjdGVkVG9GYWNlLmNvcHkoci5yaik7CiAgICAgICAgICAvL3FqLnZtdWx0KHIucmosci5yaik7CgogICAgICAgICAgcGVuZXRyYXRlZEZhY2VOb3JtYWwubmVnYXRlKHIubmkpOyAvLyBDb250YWN0IG5vcm1hbAoKICAgICAgICAgIHIucmkuc2V0KDAsIDAsIDApOyAvLyBDZW50ZXIgb2YgcGFydGljbGUKCiAgICAgICAgICBjb25zdCByaSA9IHIucmk7CiAgICAgICAgICBjb25zdCByaiA9IHIucmo7IC8vIE1ha2UgcmVsYXRpdmUgdG8gYm9kaWVzCgogICAgICAgICAgcmkudmFkZCh4aSwgcmkpOwogICAgICAgICAgcmkudnN1YihiaS5wb3NpdGlvbiwgcmkpOwogICAgICAgICAgcmoudmFkZCh4aiwgcmopOwogICAgICAgICAgcmoudnN1Yihiai5wb3NpdGlvbiwgcmopOwogICAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTsKICAgICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc29sZS53YXJuKCdQb2ludCBmb3VuZCBpbnNpZGUgY29udmV4LCBidXQgZGlkIG5vdCBmaW5kIHBlbmV0cmF0aW5nIGZhY2UhJyk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgaGVpZ2h0ZmllbGRDeWxpbmRlcihoZlNoYXBlLCBjb252ZXhTaGFwZSwgaGZQb3MsIGNvbnZleFBvcywgaGZRdWF0LCBjb252ZXhRdWF0LCBoZkJvZHksIGNvbnZleEJvZHksIHJzaSwgcnNqLCBqdXN0VGVzdCkgewogICAgICByZXR1cm4gdGhpcy5jb252ZXhIZWlnaHRmaWVsZChjb252ZXhTaGFwZSwgaGZTaGFwZSwgY29udmV4UG9zLCBoZlBvcywgY29udmV4UXVhdCwgaGZRdWF0LCBjb252ZXhCb2R5LCBoZkJvZHksIHJzaSwgcnNqLCBqdXN0VGVzdCk7CiAgICB9CgogICAgcGFydGljbGVDeWxpbmRlcihzaSwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHJzaSwgcnNqLCBqdXN0VGVzdCkgewogICAgICByZXR1cm4gdGhpcy5jb252ZXhQYXJ0aWNsZShzaiwgc2ksIHhqLCB4aSwgcWosIHFpLCBiaiwgYmksIHJzaSwgcnNqLCBqdXN0VGVzdCk7CiAgICB9CgogICAgc3BoZXJlVHJpbWVzaChzcGhlcmVTaGFwZSwgdHJpbWVzaFNoYXBlLCBzcGhlcmVQb3MsIHRyaW1lc2hQb3MsIHNwaGVyZVF1YXQsIHRyaW1lc2hRdWF0LCBzcGhlcmVCb2R5LCB0cmltZXNoQm9keSwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIGNvbnN0IGVkZ2VWZXJ0ZXhBID0gc3BoZXJlVHJpbWVzaF9lZGdlVmVydGV4QTsKICAgICAgY29uc3QgZWRnZVZlcnRleEIgPSBzcGhlcmVUcmltZXNoX2VkZ2VWZXJ0ZXhCOwogICAgICBjb25zdCBlZGdlVmVjdG9yID0gc3BoZXJlVHJpbWVzaF9lZGdlVmVjdG9yOwogICAgICBjb25zdCBlZGdlVmVjdG9yVW5pdCA9IHNwaGVyZVRyaW1lc2hfZWRnZVZlY3RvclVuaXQ7CiAgICAgIGNvbnN0IGxvY2FsU3BoZXJlUG9zID0gc3BoZXJlVHJpbWVzaF9sb2NhbFNwaGVyZVBvczsKICAgICAgY29uc3QgdG1wID0gc3BoZXJlVHJpbWVzaF90bXA7CiAgICAgIGNvbnN0IGxvY2FsU3BoZXJlQUFCQiA9IHNwaGVyZVRyaW1lc2hfbG9jYWxTcGhlcmVBQUJCOwogICAgICBjb25zdCB2MiA9IHNwaGVyZVRyaW1lc2hfdjI7CiAgICAgIGNvbnN0IHJlbHBvcyA9IHNwaGVyZVRyaW1lc2hfcmVscG9zOwogICAgICBjb25zdCB0cmlhbmdsZXMgPSBzcGhlcmVUcmltZXNoX3RyaWFuZ2xlczsgLy8gQ29udmVydCBzcGhlcmUgcG9zaXRpb24gdG8gbG9jYWwgaW4gdGhlIHRyaW1lc2gKCiAgICAgIFRyYW5zZm9ybS5wb2ludFRvTG9jYWxGcmFtZSh0cmltZXNoUG9zLCB0cmltZXNoUXVhdCwgc3BoZXJlUG9zLCBsb2NhbFNwaGVyZVBvcyk7IC8vIEdldCB0aGUgYWFiYiBvZiB0aGUgc3BoZXJlIGxvY2FsbHkgaW4gdGhlIHRyaW1lc2gKCiAgICAgIGNvbnN0IHNwaGVyZVJhZGl1cyA9IHNwaGVyZVNoYXBlLnJhZGl1czsKICAgICAgbG9jYWxTcGhlcmVBQUJCLmxvd2VyQm91bmQuc2V0KGxvY2FsU3BoZXJlUG9zLnggLSBzcGhlcmVSYWRpdXMsIGxvY2FsU3BoZXJlUG9zLnkgLSBzcGhlcmVSYWRpdXMsIGxvY2FsU3BoZXJlUG9zLnogLSBzcGhlcmVSYWRpdXMpOwogICAgICBsb2NhbFNwaGVyZUFBQkIudXBwZXJCb3VuZC5zZXQobG9jYWxTcGhlcmVQb3MueCArIHNwaGVyZVJhZGl1cywgbG9jYWxTcGhlcmVQb3MueSArIHNwaGVyZVJhZGl1cywgbG9jYWxTcGhlcmVQb3MueiArIHNwaGVyZVJhZGl1cyk7CiAgICAgIHRyaW1lc2hTaGFwZS5nZXRUcmlhbmdsZXNJbkFBQkIobG9jYWxTcGhlcmVBQUJCLCB0cmlhbmdsZXMpOyAvL2ZvciAobGV0IGkgPSAwOyBpIDwgdHJpbWVzaFNoYXBlLmluZGljZXMubGVuZ3RoIC8gMzsgaSsrKSB0cmlhbmdsZXMucHVzaChpKTsgLy8gQWxsCiAgICAgIC8vIFZlcnRpY2VzCgogICAgICBjb25zdCB2ID0gc3BoZXJlVHJpbWVzaF92OwogICAgICBjb25zdCByYWRpdXNTcXVhcmVkID0gc3BoZXJlU2hhcGUucmFkaXVzICogc3BoZXJlU2hhcGUucmFkaXVzOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0cmlhbmdsZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IDM7IGorKykgewogICAgICAgICAgdHJpbWVzaFNoYXBlLmdldFZlcnRleCh0cmltZXNoU2hhcGUuaW5kaWNlc1t0cmlhbmdsZXNbaV0gKiAzICsgal0sIHYpOyAvLyBDaGVjayB2ZXJ0ZXggb3ZlcmxhcCBpbiBzcGhlcmUKCiAgICAgICAgICB2LnZzdWIobG9jYWxTcGhlcmVQb3MsIHJlbHBvcyk7CgogICAgICAgICAgaWYgKHJlbHBvcy5sZW5ndGhTcXVhcmVkKCkgPD0gcmFkaXVzU3F1YXJlZCkgewogICAgICAgICAgICAvLyBTYWZlIHVwCiAgICAgICAgICAgIHYyLmNvcHkodik7CiAgICAgICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZSh0cmltZXNoUG9zLCB0cmltZXNoUXVhdCwgdjIsIHYpOwogICAgICAgICAgICB2LnZzdWIoc3BoZXJlUG9zLCByZWxwb3MpOwoKICAgICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGxldCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oc3BoZXJlQm9keSwgdHJpbWVzaEJvZHksIHNwaGVyZVNoYXBlLCB0cmltZXNoU2hhcGUsIHJzaSwgcnNqKTsKICAgICAgICAgICAgci5uaS5jb3B5KHJlbHBvcyk7CiAgICAgICAgICAgIHIubmkubm9ybWFsaXplKCk7IC8vIHJpIGlzIHRoZSB2ZWN0b3IgZnJvbSBzcGhlcmUgY2VudGVyIHRvIHRoZSBzcGhlcmUgc3VyZmFjZQoKICAgICAgICAgICAgci5yaS5jb3B5KHIubmkpOwogICAgICAgICAgICByLnJpLnNjYWxlKHNwaGVyZVNoYXBlLnJhZGl1cywgci5yaSk7CiAgICAgICAgICAgIHIucmkudmFkZChzcGhlcmVQb3MsIHIucmkpOwogICAgICAgICAgICByLnJpLnZzdWIoc3BoZXJlQm9keS5wb3NpdGlvbiwgci5yaSk7CiAgICAgICAgICAgIHIucmouY29weSh2KTsKICAgICAgICAgICAgci5yai52c3ViKHRyaW1lc2hCb2R5LnBvc2l0aW9uLCByLnJqKTsgLy8gU3RvcmUgcmVzdWx0CgogICAgICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IC8vIENoZWNrIGFsbCBlZGdlcwoKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdHJpYW5nbGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCAzOyBqKyspIHsKICAgICAgICAgIHRyaW1lc2hTaGFwZS5nZXRWZXJ0ZXgodHJpbWVzaFNoYXBlLmluZGljZXNbdHJpYW5nbGVzW2ldICogMyArIGpdLCBlZGdlVmVydGV4QSk7CiAgICAgICAgICB0cmltZXNoU2hhcGUuZ2V0VmVydGV4KHRyaW1lc2hTaGFwZS5pbmRpY2VzW3RyaWFuZ2xlc1tpXSAqIDMgKyAoaiArIDEpICUgM10sIGVkZ2VWZXJ0ZXhCKTsKICAgICAgICAgIGVkZ2VWZXJ0ZXhCLnZzdWIoZWRnZVZlcnRleEEsIGVkZ2VWZWN0b3IpOyAvLyBQcm9qZWN0IHNwaGVyZSBwb3NpdGlvbiB0byB0aGUgZWRnZQoKICAgICAgICAgIGxvY2FsU3BoZXJlUG9zLnZzdWIoZWRnZVZlcnRleEIsIHRtcCk7CiAgICAgICAgICBjb25zdCBwb3NpdGlvbkFsb25nRWRnZUIgPSB0bXAuZG90KGVkZ2VWZWN0b3IpOwogICAgICAgICAgbG9jYWxTcGhlcmVQb3MudnN1YihlZGdlVmVydGV4QSwgdG1wKTsKICAgICAgICAgIGxldCBwb3NpdGlvbkFsb25nRWRnZUEgPSB0bXAuZG90KGVkZ2VWZWN0b3IpOwoKICAgICAgICAgIGlmIChwb3NpdGlvbkFsb25nRWRnZUEgPiAwICYmIHBvc2l0aW9uQWxvbmdFZGdlQiA8IDApIHsKICAgICAgICAgICAgLy8gTm93IGNoZWNrIHRoZSBvcnRob2dvbmFsIGRpc3RhbmNlIGZyb20gZWRnZSB0byBzcGhlcmUgY2VudGVyCiAgICAgICAgICAgIGxvY2FsU3BoZXJlUG9zLnZzdWIoZWRnZVZlcnRleEEsIHRtcCk7CiAgICAgICAgICAgIGVkZ2VWZWN0b3JVbml0LmNvcHkoZWRnZVZlY3Rvcik7CiAgICAgICAgICAgIGVkZ2VWZWN0b3JVbml0Lm5vcm1hbGl6ZSgpOwogICAgICAgICAgICBwb3NpdGlvbkFsb25nRWRnZUEgPSB0bXAuZG90KGVkZ2VWZWN0b3JVbml0KTsKICAgICAgICAgICAgZWRnZVZlY3RvclVuaXQuc2NhbGUocG9zaXRpb25BbG9uZ0VkZ2VBLCB0bXApOwogICAgICAgICAgICB0bXAudmFkZChlZGdlVmVydGV4QSwgdG1wKTsgLy8gdG1wIGlzIG5vdyB0aGUgc3BoZXJlIGNlbnRlciBwb3NpdGlvbiBwcm9qZWN0ZWQgdG8gdGhlIGVkZ2UsIGRlZmluZWQgbG9jYWxseSBpbiB0aGUgdHJpbWVzaCBmcmFtZQoKICAgICAgICAgICAgY29uc3QgZGlzdCA9IHRtcC5kaXN0YW5jZVRvKGxvY2FsU3BoZXJlUG9zKTsKCiAgICAgICAgICAgIGlmIChkaXN0IDwgc3BoZXJlU2hhcGUucmFkaXVzKSB7CiAgICAgICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihzcGhlcmVCb2R5LCB0cmltZXNoQm9keSwgc3BoZXJlU2hhcGUsIHRyaW1lc2hTaGFwZSwgcnNpLCByc2opOwogICAgICAgICAgICAgIHRtcC52c3ViKGxvY2FsU3BoZXJlUG9zLCByLm5pKTsKICAgICAgICAgICAgICByLm5pLm5vcm1hbGl6ZSgpOwogICAgICAgICAgICAgIHIubmkuc2NhbGUoc3BoZXJlU2hhcGUucmFkaXVzLCByLnJpKTsKICAgICAgICAgICAgICByLnJpLnZhZGQoc3BoZXJlUG9zLCByLnJpKTsKICAgICAgICAgICAgICByLnJpLnZzdWIoc3BoZXJlQm9keS5wb3NpdGlvbiwgci5yaSk7CiAgICAgICAgICAgICAgVHJhbnNmb3JtLnBvaW50VG9Xb3JsZEZyYW1lKHRyaW1lc2hQb3MsIHRyaW1lc2hRdWF0LCB0bXAsIHRtcCk7CiAgICAgICAgICAgICAgdG1wLnZzdWIodHJpbWVzaEJvZHkucG9zaXRpb24sIHIucmopOwogICAgICAgICAgICAgIFRyYW5zZm9ybS52ZWN0b3JUb1dvcmxkRnJhbWUodHJpbWVzaFF1YXQsIHIubmksIHIubmkpOwogICAgICAgICAgICAgIFRyYW5zZm9ybS52ZWN0b3JUb1dvcmxkRnJhbWUodHJpbWVzaFF1YXQsIHIucmksIHIucmkpOwogICAgICAgICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7CiAgICAgICAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IC8vIFRyaWFuZ2xlIGZhY2VzCgoKICAgICAgY29uc3QgdmEgPSBzcGhlcmVUcmltZXNoX3ZhOwogICAgICBjb25zdCB2YiA9IHNwaGVyZVRyaW1lc2hfdmI7CiAgICAgIGNvbnN0IHZjID0gc3BoZXJlVHJpbWVzaF92YzsKICAgICAgY29uc3Qgbm9ybWFsID0gc3BoZXJlVHJpbWVzaF9ub3JtYWw7CgogICAgICBmb3IgKGxldCBpID0gMCwgTiA9IHRyaWFuZ2xlcy5sZW5ndGg7IGkgIT09IE47IGkrKykgewogICAgICAgIHRyaW1lc2hTaGFwZS5nZXRUcmlhbmdsZVZlcnRpY2VzKHRyaWFuZ2xlc1tpXSwgdmEsIHZiLCB2Yyk7CiAgICAgICAgdHJpbWVzaFNoYXBlLmdldE5vcm1hbCh0cmlhbmdsZXNbaV0sIG5vcm1hbCk7CiAgICAgICAgbG9jYWxTcGhlcmVQb3MudnN1Yih2YSwgdG1wKTsKICAgICAgICBsZXQgZGlzdCA9IHRtcC5kb3Qobm9ybWFsKTsKICAgICAgICBub3JtYWwuc2NhbGUoZGlzdCwgdG1wKTsKICAgICAgICBsb2NhbFNwaGVyZVBvcy52c3ViKHRtcCwgdG1wKTsgLy8gdG1wIGlzIG5vdyB0aGUgc3BoZXJlIHBvc2l0aW9uIHByb2plY3RlZCB0byB0aGUgdHJpYW5nbGUgcGxhbmUKCiAgICAgICAgZGlzdCA9IHRtcC5kaXN0YW5jZVRvKGxvY2FsU3BoZXJlUG9zKTsKCiAgICAgICAgaWYgKFJheS5wb2ludEluVHJpYW5nbGUodG1wLCB2YSwgdmIsIHZjKSAmJiBkaXN0IDwgc3BoZXJlU2hhcGUucmFkaXVzKSB7CiAgICAgICAgICBpZiAoanVzdFRlc3QpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9CgogICAgICAgICAgbGV0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihzcGhlcmVCb2R5LCB0cmltZXNoQm9keSwgc3BoZXJlU2hhcGUsIHRyaW1lc2hTaGFwZSwgcnNpLCByc2opOwogICAgICAgICAgdG1wLnZzdWIobG9jYWxTcGhlcmVQb3MsIHIubmkpOwogICAgICAgICAgci5uaS5ub3JtYWxpemUoKTsKICAgICAgICAgIHIubmkuc2NhbGUoc3BoZXJlU2hhcGUucmFkaXVzLCByLnJpKTsKICAgICAgICAgIHIucmkudmFkZChzcGhlcmVQb3MsIHIucmkpOwogICAgICAgICAgci5yaS52c3ViKHNwaGVyZUJvZHkucG9zaXRpb24sIHIucmkpOwogICAgICAgICAgVHJhbnNmb3JtLnBvaW50VG9Xb3JsZEZyYW1lKHRyaW1lc2hQb3MsIHRyaW1lc2hRdWF0LCB0bXAsIHRtcCk7CiAgICAgICAgICB0bXAudnN1Yih0cmltZXNoQm9keS5wb3NpdGlvbiwgci5yaik7CiAgICAgICAgICBUcmFuc2Zvcm0udmVjdG9yVG9Xb3JsZEZyYW1lKHRyaW1lc2hRdWF0LCByLm5pLCByLm5pKTsKICAgICAgICAgIFRyYW5zZm9ybS52ZWN0b3JUb1dvcmxkRnJhbWUodHJpbWVzaFF1YXQsIHIucmksIHIucmkpOwogICAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTsKICAgICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRyaWFuZ2xlcy5sZW5ndGggPSAwOwogICAgfQoKICAgIHBsYW5lVHJpbWVzaChwbGFuZVNoYXBlLCB0cmltZXNoU2hhcGUsIHBsYW5lUG9zLCB0cmltZXNoUG9zLCBwbGFuZVF1YXQsIHRyaW1lc2hRdWF0LCBwbGFuZUJvZHksIHRyaW1lc2hCb2R5LCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgLy8gTWFrZSBjb250YWN0cyEKICAgICAgY29uc3QgdiA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IG5vcm1hbCA9IHBsYW5lVHJpbWVzaF9ub3JtYWw7CiAgICAgIG5vcm1hbC5zZXQoMCwgMCwgMSk7CiAgICAgIHBsYW5lUXVhdC52bXVsdChub3JtYWwsIG5vcm1hbCk7IC8vIFR1cm4gbm9ybWFsIGFjY29yZGluZyB0byBwbGFuZQoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0cmltZXNoU2hhcGUudmVydGljZXMubGVuZ3RoIC8gMzsgaSsrKSB7CiAgICAgICAgLy8gR2V0IHdvcmxkIHZlcnRleCBmcm9tIHRyaW1lc2gKICAgICAgICB0cmltZXNoU2hhcGUuZ2V0VmVydGV4KGksIHYpOyAvLyBTYWZlIHVwCgogICAgICAgIGNvbnN0IHYyID0gbmV3IFZlYzMoKTsKICAgICAgICB2Mi5jb3B5KHYpOwogICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZSh0cmltZXNoUG9zLCB0cmltZXNoUXVhdCwgdjIsIHYpOyAvLyBDaGVjayBwbGFuZSBzaWRlCgogICAgICAgIGNvbnN0IHJlbHBvcyA9IHBsYW5lVHJpbWVzaF9yZWxwb3M7CiAgICAgICAgdi52c3ViKHBsYW5lUG9zLCByZWxwb3MpOwogICAgICAgIGNvbnN0IGRvdCA9IG5vcm1hbC5kb3QocmVscG9zKTsKCiAgICAgICAgaWYgKGRvdCA8PSAwLjApIHsKICAgICAgICAgIGlmIChqdXN0VGVzdCkgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0KCiAgICAgICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24ocGxhbmVCb2R5LCB0cmltZXNoQm9keSwgcGxhbmVTaGFwZSwgdHJpbWVzaFNoYXBlLCByc2ksIHJzaik7CiAgICAgICAgICByLm5pLmNvcHkobm9ybWFsKTsgLy8gQ29udGFjdCBub3JtYWwgaXMgdGhlIHBsYW5lIG5vcm1hbAogICAgICAgICAgLy8gR2V0IHZlcnRleCBwb3NpdGlvbiBwcm9qZWN0ZWQgb24gcGxhbmUKCiAgICAgICAgICBjb25zdCBwcm9qZWN0ZWQgPSBwbGFuZVRyaW1lc2hfcHJvamVjdGVkOwogICAgICAgICAgbm9ybWFsLnNjYWxlKHJlbHBvcy5kb3Qobm9ybWFsKSwgcHJvamVjdGVkKTsKICAgICAgICAgIHYudnN1Yihwcm9qZWN0ZWQsIHByb2plY3RlZCk7IC8vIHJpIGlzIHRoZSBwcm9qZWN0ZWQgd29ybGQgcG9zaXRpb24gbWludXMgcGxhbmUgcG9zaXRpb24KCiAgICAgICAgICByLnJpLmNvcHkocHJvamVjdGVkKTsKICAgICAgICAgIHIucmkudnN1YihwbGFuZUJvZHkucG9zaXRpb24sIHIucmkpOwogICAgICAgICAgci5yai5jb3B5KHYpOwogICAgICAgICAgci5yai52c3ViKHRyaW1lc2hCb2R5LnBvc2l0aW9uLCByLnJqKTsgLy8gU3RvcmUgcmVzdWx0CgogICAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTsKICAgICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0gLy8gY29udmV4VHJpbWVzaCgKICAgIC8vICAgc2k6IENvbnZleFBvbHloZWRyb24sIHNqOiBUcmltZXNoLCB4aTogVmVjMywgeGo6IFZlYzMsIHFpOiBRdWF0ZXJuaW9uLCBxajogUXVhdGVybmlvbiwKICAgIC8vICAgYmk6IEJvZHksIGJqOiBCb2R5LCByc2k/OiBTaGFwZSB8IG51bGwsIHJzaj86IFNoYXBlIHwgbnVsbCwKICAgIC8vICAgZmFjZUxpc3RBPzogbnVtYmVyW10gfCBudWxsLCBmYWNlTGlzdEI/OiBudW1iZXJbXSB8IG51bGwsCiAgICAvLyApIHsKICAgIC8vICAgY29uc3Qgc2VwQXhpcyA9IGNvbnZleENvbnZleF9zZXBBeGlzOwogICAgLy8gICBpZih4aS5kaXN0YW5jZVRvKHhqKSA+IHNpLmJvdW5kaW5nU3BoZXJlUmFkaXVzICsgc2ouYm91bmRpbmdTcGhlcmVSYWRpdXMpewogICAgLy8gICAgICAgcmV0dXJuOwogICAgLy8gICB9CiAgICAvLyAgIC8vIENvbnN0cnVjdCBhIHRlbXAgaHVsbCBmb3IgZWFjaCB0cmlhbmdsZQogICAgLy8gICBjb25zdCBodWxsQiA9IG5ldyBDb252ZXhQb2x5aGVkcm9uKCk7CiAgICAvLyAgIGh1bGxCLmZhY2VzID0gW1swLDEsMl1dOwogICAgLy8gICBjb25zdCB2YSA9IG5ldyBWZWMzKCk7CiAgICAvLyAgIGNvbnN0IHZiID0gbmV3IFZlYzMoKTsKICAgIC8vICAgY29uc3QgdmMgPSBuZXcgVmVjMygpOwogICAgLy8gICBodWxsQi52ZXJ0aWNlcyA9IFsKICAgIC8vICAgICAgIHZhLAogICAgLy8gICAgICAgdmIsCiAgICAvLyAgICAgICB2YwogICAgLy8gICBdOwogICAgLy8gICBmb3IgKGxldCBpID0gMDsgaSA8IHNqLmluZGljZXMubGVuZ3RoIC8gMzsgaSsrKSB7CiAgICAvLyAgICAgICBjb25zdCB0cmlhbmdsZU5vcm1hbCA9IG5ldyBWZWMzKCk7CiAgICAvLyAgICAgICBzai5nZXROb3JtYWwoaSwgdHJpYW5nbGVOb3JtYWwpOwogICAgLy8gICAgICAgaHVsbEIuZmFjZU5vcm1hbHMgPSBbdHJpYW5nbGVOb3JtYWxdOwogICAgLy8gICAgICAgc2ouZ2V0VHJpYW5nbGVWZXJ0aWNlcyhpLCB2YSwgdmIsIHZjKTsKICAgIC8vICAgICAgIGxldCBkID0gc2kudGVzdFNlcEF4aXModHJpYW5nbGVOb3JtYWwsIGh1bGxCLCB4aSwgcWksIHhqLCBxaik7CiAgICAvLyAgICAgICBpZighZCl7CiAgICAvLyAgICAgICAgICAgdHJpYW5nbGVOb3JtYWwuc2NhbGUoLTEsIHRyaWFuZ2xlTm9ybWFsKTsKICAgIC8vICAgICAgICAgICBkID0gc2kudGVzdFNlcEF4aXModHJpYW5nbGVOb3JtYWwsIGh1bGxCLCB4aSwgcWksIHhqLCBxaik7CiAgICAvLyAgICAgICAgICAgaWYoIWQpewogICAgLy8gICAgICAgICAgICAgICBjb250aW51ZTsKICAgIC8vICAgICAgICAgICB9CiAgICAvLyAgICAgICB9CiAgICAvLyAgICAgICBjb25zdCByZXM6IENvbnZleFBvbHloZWRyb25Db250YWN0UG9pbnRbXSA9IFtdOwogICAgLy8gICAgICAgY29uc3QgcSA9IGNvbnZleENvbnZleF9xOwogICAgLy8gICAgICAgc2kuY2xpcEFnYWluc3RIdWxsKHhpLHFpLGh1bGxCLHhqLHFqLHRyaWFuZ2xlTm9ybWFsLC0xMDAsMTAwLHJlcyk7CiAgICAvLyAgICAgICBmb3IobGV0IGogPSAwOyBqICE9PSByZXMubGVuZ3RoOyBqKyspewogICAgLy8gICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSxiaixzaSxzaixyc2kscnNqKSwKICAgIC8vICAgICAgICAgICAgICAgcmkgPSByLnJpLAogICAgLy8gICAgICAgICAgICAgICByaiA9IHIucmo7CiAgICAvLyAgICAgICAgICAgci5uaS5jb3B5KHRyaWFuZ2xlTm9ybWFsKTsKICAgIC8vICAgICAgICAgICByLm5pLm5lZ2F0ZShyLm5pKTsKICAgIC8vICAgICAgICAgICByZXNbal0ubm9ybWFsLm5lZ2F0ZShxKTsKICAgIC8vICAgICAgICAgICBxLm11bHQocmVzW2pdLmRlcHRoLCBxKTsKICAgIC8vICAgICAgICAgICByZXNbal0ucG9pbnQudmFkZChxLCByaSk7CiAgICAvLyAgICAgICAgICAgcmouY29weShyZXNbal0ucG9pbnQpOwogICAgLy8gICAgICAgICAgIC8vIENvbnRhY3QgcG9pbnRzIGFyZSBpbiB3b3JsZCBjb29yZGluYXRlcy4gVHJhbnNmb3JtIGJhY2sgdG8gcmVsYXRpdmUKICAgIC8vICAgICAgICAgICByaS52c3ViKHhpLHJpKTsKICAgIC8vICAgICAgICAgICByai52c3ViKHhqLHJqKTsKICAgIC8vICAgICAgICAgICAvLyBNYWtlIHJlbGF0aXZlIHRvIGJvZGllcwogICAgLy8gICAgICAgICAgIHJpLnZhZGQoeGksIHJpKTsKICAgIC8vICAgICAgICAgICByaS52c3ViKGJpLnBvc2l0aW9uLCByaSk7CiAgICAvLyAgICAgICAgICAgcmoudmFkZCh4aiwgcmopOwogICAgLy8gICAgICAgICAgIHJqLnZzdWIoYmoucG9zaXRpb24sIHJqKTsKICAgIC8vICAgICAgICAgICByZXN1bHQucHVzaChyKTsKICAgIC8vICAgICAgIH0KICAgIC8vICAgfQogICAgLy8gfQoKCiAgfQoKICBjb25zdCBhdmVyYWdlTm9ybWFsID0gbmV3IFZlYzMoKTsKICBjb25zdCBhdmVyYWdlQ29udGFjdFBvaW50QSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYXZlcmFnZUNvbnRhY3RQb2ludEIgPSBuZXcgVmVjMygpOwogIGNvbnN0IHRtcFZlYzEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHRtcFZlYzIgPSBuZXcgVmVjMygpOwogIGNvbnN0IHRtcFF1YXQxID0gbmV3IFF1YXRlcm5pb24oKTsKICBjb25zdCB0bXBRdWF0MiA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgY29uc3QgcGxhbmVUcmltZXNoX25vcm1hbCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcGxhbmVUcmltZXNoX3JlbHBvcyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcGxhbmVUcmltZXNoX3Byb2plY3RlZCA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlVHJpbWVzaF9ub3JtYWwgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfcmVscG9zID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVUcmltZXNoX3YgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfdjIgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfZWRnZVZlcnRleEEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfZWRnZVZlcnRleEIgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfZWRnZVZlY3RvciA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlVHJpbWVzaF9lZGdlVmVjdG9yVW5pdCA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlVHJpbWVzaF9sb2NhbFNwaGVyZVBvcyA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlVHJpbWVzaF90bXAgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfdmEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfdmIgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfdmMgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfbG9jYWxTcGhlcmVBQUJCID0gbmV3IEFBQkIoKTsKICBjb25zdCBzcGhlcmVUcmltZXNoX3RyaWFuZ2xlcyA9IFtdOwogIGNvbnN0IHBvaW50X29uX3BsYW5lX3RvX3NwaGVyZSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcGxhbmVfdG9fc3BoZXJlX29ydGhvID0gbmV3IFZlYzMoKTsgLy8gU2VlIGh0dHA6Ly9idWxsZXRwaHlzaWNzLmNvbS9CdWxsZXQvQnVsbGV0RnVsbC9TcGhlcmVUcmlhbmdsZURldGVjdG9yXzhjcHBfc291cmNlLmh0bWwKCiAgY29uc3QgcG9pbnRJblBvbHlnb25fZWRnZSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcG9pbnRJblBvbHlnb25fZWRnZV94X25vcm1hbCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcG9pbnRJblBvbHlnb25fdnRwID0gbmV3IFZlYzMoKTsKCiAgZnVuY3Rpb24gcG9pbnRJblBvbHlnb24odmVydHMsIG5vcm1hbCwgcCkgewogICAgbGV0IHBvc2l0aXZlUmVzdWx0ID0gbnVsbDsKICAgIGNvbnN0IE4gPSB2ZXJ0cy5sZW5ndGg7CgogICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE47IGkrKykgewogICAgICBjb25zdCB2ID0gdmVydHNbaV07IC8vIEdldCBlZGdlIHRvIHRoZSBuZXh0IHZlcnRleAoKICAgICAgY29uc3QgZWRnZSA9IHBvaW50SW5Qb2x5Z29uX2VkZ2U7CiAgICAgIHZlcnRzWyhpICsgMSkgJSBOXS52c3ViKHYsIGVkZ2UpOyAvLyBHZXQgY3Jvc3MgcHJvZHVjdCBiZXR3ZWVuIHBvbHlnb24gbm9ybWFsIGFuZCB0aGUgZWRnZQoKICAgICAgY29uc3QgZWRnZV94X25vcm1hbCA9IHBvaW50SW5Qb2x5Z29uX2VkZ2VfeF9ub3JtYWw7IC8vY29uc3QgZWRnZV94X25vcm1hbCA9IG5ldyBWZWMzKCk7CgogICAgICBlZGdlLmNyb3NzKG5vcm1hbCwgZWRnZV94X25vcm1hbCk7IC8vIEdldCB2ZWN0b3IgYmV0d2VlbiBwb2ludCBhbmQgY3VycmVudCB2ZXJ0ZXgKCiAgICAgIGNvbnN0IHZlcnRleF90b19wID0gcG9pbnRJblBvbHlnb25fdnRwOwogICAgICBwLnZzdWIodiwgdmVydGV4X3RvX3ApOyAvLyBUaGlzIGRvdCBwcm9kdWN0IGRldGVybWluZXMgd2hpY2ggc2lkZSBvZiB0aGUgZWRnZSB0aGUgcG9pbnQgaXMKCiAgICAgIGNvbnN0IHIgPSBlZGdlX3hfbm9ybWFsLmRvdCh2ZXJ0ZXhfdG9fcCk7IC8vIElmIGFsbCBzdWNoIGRvdCBwcm9kdWN0cyBoYXZlIHNhbWUgc2lnbiwgd2UgYXJlIGluc2lkZSB0aGUgcG9seWdvbi4KCiAgICAgIGlmIChwb3NpdGl2ZVJlc3VsdCA9PT0gbnVsbCB8fCByID4gMCAmJiBwb3NpdGl2ZVJlc3VsdCA9PT0gdHJ1ZSB8fCByIDw9IDAgJiYgcG9zaXRpdmVSZXN1bHQgPT09IGZhbHNlKSB7CiAgICAgICAgaWYgKHBvc2l0aXZlUmVzdWx0ID09PSBudWxsKSB7CiAgICAgICAgICBwb3NpdGl2ZVJlc3VsdCA9IHIgPiAwOwogICAgICAgIH0KCiAgICAgICAgY29udGludWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOyAvLyBFbmNvdW50ZXJlZCBzb21lIG90aGVyIHNpZ24uIEV4aXQuCiAgICAgIH0KICAgIH0gLy8gSWYgd2UgZ290IGhlcmUsIGFsbCBkb3QgcHJvZHVjdHMgd2VyZSBvZiB0aGUgc2FtZSBzaWduLgoKCiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIGNvbnN0IGJveF90b19zcGhlcmUgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUJveF9ucyA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlQm94X25zMSA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlQm94X25zMiA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlQm94X3NpZGVzID0gW25ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCldOwogIGNvbnN0IHNwaGVyZUJveF9zcGhlcmVfdG9fY29ybmVyID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVCb3hfc2lkZV9ucyA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlQm94X3NpZGVfbnMxID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVCb3hfc2lkZV9uczIgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNvbnZleF90b19zcGhlcmUgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUNvbnZleF9lZGdlID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVDb252ZXhfZWRnZVVuaXQgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUNvbnZleF9zcGhlcmVUb0Nvcm5lciA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlQ29udmV4X3dvcmxkQ29ybmVyID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVDb252ZXhfd29ybGROb3JtYWwgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUNvbnZleF93b3JsZFBvaW50ID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVDb252ZXhfd29ybGRTcGhlcmVQb2ludENsb3Nlc3RUb1BsYW5lID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVDb252ZXhfcGVuZXRyYXRpb25WZWMgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUNvbnZleF9zcGhlcmVUb1dvcmxkUG9pbnQgPSBuZXcgVmVjMygpOwogIGNvbnN0IHBsYW5lQ29udmV4X3YgPSBuZXcgVmVjMygpOwogIGNvbnN0IHBsYW5lQ29udmV4X25vcm1hbCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcGxhbmVDb252ZXhfcmVscG9zID0gbmV3IFZlYzMoKTsKICBjb25zdCBwbGFuZUNvbnZleF9wcm9qZWN0ZWQgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNvbnZleENvbnZleF9zZXBBeGlzID0gbmV3IFZlYzMoKTsKICBjb25zdCBjb252ZXhDb252ZXhfcSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcGFydGljbGVQbGFuZV9ub3JtYWwgPSBuZXcgVmVjMygpOwogIGNvbnN0IHBhcnRpY2xlUGxhbmVfcmVscG9zID0gbmV3IFZlYzMoKTsKICBjb25zdCBwYXJ0aWNsZVBsYW5lX3Byb2plY3RlZCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcGFydGljbGVTcGhlcmVfbm9ybWFsID0gbmV3IFZlYzMoKTsgLy8gV0lQCgogIGNvbnN0IGNxaiA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgY29uc3QgY29udmV4UGFydGljbGVfbG9jYWwgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNvbnZleFBhcnRpY2xlX3BlbmV0cmF0ZWRGYWNlTm9ybWFsID0gbmV3IFZlYzMoKTsKICBjb25zdCBjb252ZXhQYXJ0aWNsZV92ZXJ0ZXhUb1BhcnRpY2xlID0gbmV3IFZlYzMoKTsKICBjb25zdCBjb252ZXhQYXJ0aWNsZV93b3JsZFBlbmV0cmF0aW9uVmVjID0gbmV3IFZlYzMoKTsKICBjb25zdCBjb252ZXhIZWlnaHRmaWVsZF90bXAxID0gbmV3IFZlYzMoKTsKICBjb25zdCBjb252ZXhIZWlnaHRmaWVsZF90bXAyID0gbmV3IFZlYzMoKTsKICBjb25zdCBjb252ZXhIZWlnaHRmaWVsZF9mYWNlTGlzdCA9IFswXTsKICBjb25zdCBzcGhlcmVIZWlnaHRmaWVsZF90bXAxID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVIZWlnaHRmaWVsZF90bXAyID0gbmV3IFZlYzMoKTsKCiAgY2xhc3MgT3ZlcmxhcEtlZXBlciB7CiAgICAvKioKICAgICAqIEB0b2RvIFJlbW92ZSB1c2VsZXNzIGNvbnN0cnVjdG9yCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKCkgewogICAgICB0aGlzLmN1cnJlbnQgPSB2b2lkIDA7CiAgICAgIHRoaXMucHJldmlvdXMgPSB2b2lkIDA7CiAgICAgIHRoaXMuY3VycmVudCA9IFtdOwogICAgICB0aGlzLnByZXZpb3VzID0gW107CiAgICB9CiAgICAvKioKICAgICAqIGdldEtleQogICAgICovCgoKICAgIGdldEtleShpLCBqKSB7CiAgICAgIGlmIChqIDwgaSkgewogICAgICAgIGNvbnN0IHRlbXAgPSBqOwogICAgICAgIGogPSBpOwogICAgICAgIGkgPSB0ZW1wOwogICAgICB9CgogICAgICByZXR1cm4gaSA8PCAxNiB8IGo7CiAgICB9CiAgICAvKioKICAgICAqIHNldAogICAgICovCgoKICAgIHNldChpLCBqKSB7CiAgICAgIC8vIEluc2VydGlvbiBzb3J0LiBUaGlzIHdheSB0aGUgZGlmZiB3aWxsIGhhdmUgbGluZWFyIGNvbXBsZXhpdHkuCiAgICAgIGNvbnN0IGtleSA9IHRoaXMuZ2V0S2V5KGksIGopOwogICAgICBjb25zdCBjdXJyZW50ID0gdGhpcy5jdXJyZW50OwogICAgICBsZXQgaW5kZXggPSAwOwoKICAgICAgd2hpbGUgKGtleSA+IGN1cnJlbnRbaW5kZXhdKSB7CiAgICAgICAgaW5kZXgrKzsKICAgICAgfQoKICAgICAgaWYgKGtleSA9PT0gY3VycmVudFtpbmRleF0pIHsKICAgICAgICByZXR1cm47IC8vIFBhaXIgd2FzIGFscmVhZHkgYWRkZWQKICAgICAgfQoKICAgICAgZm9yIChsZXQgaiA9IGN1cnJlbnQubGVuZ3RoIC0gMTsgaiA+PSBpbmRleDsgai0tKSB7CiAgICAgICAgY3VycmVudFtqICsgMV0gPSBjdXJyZW50W2pdOwogICAgICB9CgogICAgICBjdXJyZW50W2luZGV4XSA9IGtleTsKICAgIH0KICAgIC8qKgogICAgICogdGljawogICAgICovCgoKICAgIHRpY2soKSB7CiAgICAgIGNvbnN0IHRtcCA9IHRoaXMuY3VycmVudDsKICAgICAgdGhpcy5jdXJyZW50ID0gdGhpcy5wcmV2aW91czsKICAgICAgdGhpcy5wcmV2aW91cyA9IHRtcDsKICAgICAgdGhpcy5jdXJyZW50Lmxlbmd0aCA9IDA7CiAgICB9CiAgICAvKioKICAgICAqIGdldERpZmYKICAgICAqLwoKCiAgICBnZXREaWZmKGFkZGl0aW9ucywgcmVtb3ZhbHMpIHsKICAgICAgY29uc3QgYSA9IHRoaXMuY3VycmVudDsKICAgICAgY29uc3QgYiA9IHRoaXMucHJldmlvdXM7CiAgICAgIGNvbnN0IGFsID0gYS5sZW5ndGg7CiAgICAgIGNvbnN0IGJsID0gYi5sZW5ndGg7CiAgICAgIGxldCBqID0gMDsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYWw7IGkrKykgewogICAgICAgIGxldCBmb3VuZCA9IGZhbHNlOwogICAgICAgIGNvbnN0IGtleUEgPSBhW2ldOwoKICAgICAgICB3aGlsZSAoa2V5QSA+IGJbal0pIHsKICAgICAgICAgIGorKzsKICAgICAgICB9CgogICAgICAgIGZvdW5kID0ga2V5QSA9PT0gYltqXTsKCiAgICAgICAgaWYgKCFmb3VuZCkgewogICAgICAgICAgdW5wYWNrQW5kUHVzaChhZGRpdGlvbnMsIGtleUEpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgaiA9IDA7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJsOyBpKyspIHsKICAgICAgICBsZXQgZm91bmQgPSBmYWxzZTsKICAgICAgICBjb25zdCBrZXlCID0gYltpXTsKCiAgICAgICAgd2hpbGUgKGtleUIgPiBhW2pdKSB7CiAgICAgICAgICBqKys7CiAgICAgICAgfQoKICAgICAgICBmb3VuZCA9IGFbal0gPT09IGtleUI7CgogICAgICAgIGlmICghZm91bmQpIHsKICAgICAgICAgIHVucGFja0FuZFB1c2gocmVtb3ZhbHMsIGtleUIpOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICB9CgogIGZ1bmN0aW9uIHVucGFja0FuZFB1c2goYXJyYXksIGtleSkgewogICAgYXJyYXkucHVzaCgoa2V5ICYgMHhmZmZmMDAwMCkgPj4gMTYsIGtleSAmIDB4MDAwMGZmZmYpOwogIH0KICAvKioKICAgKiBUdXBsZURpY3Rpb25hcnkKICAgKi8KCgogIGNsYXNzIFR1cGxlRGljdGlvbmFyeSB7CiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgdGhpcy5kYXRhID0gewogICAgICAgIGtleXM6IFtdCiAgICAgIH07CiAgICB9CiAgICAvKiogZ2V0ICovCgoKICAgIGdldChpLCBqKSB7CiAgICAgIGlmIChpID4gaikgewogICAgICAgIC8vIHN3YXAKICAgICAgICBjb25zdCB0ZW1wID0gajsKICAgICAgICBqID0gaTsKICAgICAgICBpID0gdGVtcDsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMuZGF0YVtpICsgIi0iICsgal07CiAgICB9CiAgICAvKiogc2V0ICovCgoKICAgIHNldChpLCBqLCB2YWx1ZSkgewogICAgICBpZiAoaSA+IGopIHsKICAgICAgICBjb25zdCB0ZW1wID0gajsKICAgICAgICBqID0gaTsKICAgICAgICBpID0gdGVtcDsKICAgICAgfQoKICAgICAgY29uc3Qga2V5ID0gaSArICItIiArIGo7IC8vIENoZWNrIGlmIGtleSBhbHJlYWR5IGV4aXN0cwoKICAgICAgaWYgKCF0aGlzLmdldChpLCBqKSkgewogICAgICAgIHRoaXMuZGF0YS5rZXlzLnB1c2goa2V5KTsKICAgICAgfQoKICAgICAgdGhpcy5kYXRhW2tleV0gPSB2YWx1ZTsKICAgIH0KICAgIC8qKiByZXNldCAqLwoKCiAgICByZXNldCgpIHsKICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTsKICAgICAgY29uc3Qga2V5cyA9IGRhdGEua2V5czsKCiAgICAgIHdoaWxlIChrZXlzLmxlbmd0aCA+IDApIHsKICAgICAgICBjb25zdCBrZXkgPSBrZXlzLnBvcCgpOwogICAgICAgIGRlbGV0ZSBkYXRhW2tleV07CiAgICAgIH0KICAgIH0KCiAgfQogIC8qKgogICAqIFRoZSBwaHlzaWNzIHdvcmxkCiAgICovCgoKICBjbGFzcyBXb3JsZCBleHRlbmRzIEV2ZW50VGFyZ2V0IHsKICAgIC8qKgogICAgICogQ3VycmVudGx5IC8gbGFzdCB1c2VkIHRpbWVzdGVwLiBJcyBzZXQgdG8gLTEgaWYgbm90IGF2YWlsYWJsZS4gVGhpcyB2YWx1ZSBpcyB1cGRhdGVkIGJlZm9yZSBlYWNoIGludGVybmFsIHN0ZXAsIHdoaWNoIG1lYW5zIHRoYXQgaXQgaXMgImZyZXNoIiBpbnNpZGUgZXZlbnQgY2FsbGJhY2tzLgogICAgICovCgogICAgLyoqCiAgICAgKiBNYWtlcyBib2RpZXMgZ28gdG8gc2xlZXAgd2hlbiB0aGV5J3ZlIGJlZW4gaW5hY3RpdmUuCiAgICAgKiBAZGVmYXVsdCBmYWxzZQogICAgICovCgogICAgLyoqCiAgICAgKiBBbGwgdGhlIGN1cnJlbnQgY29udGFjdHMgKGluc3RhbmNlcyBvZiBDb250YWN0RXF1YXRpb24pIGluIHRoZSB3b3JsZC4KICAgICAqLwoKICAgIC8qKgogICAgICogSG93IG9mdGVuIHRvIG5vcm1hbGl6ZSBxdWF0ZXJuaW9ucy4gU2V0IHRvIDAgZm9yIGV2ZXJ5IHN0ZXAsIDEgZm9yIGV2ZXJ5IHNlY29uZCBldGMuLiBBIGxhcmdlciB2YWx1ZSBpbmNyZWFzZXMgcGVyZm9ybWFuY2UuIElmIGJvZGllcyB0ZW5kIHRvIGV4cGxvZGUsIHNldCB0byBhIHNtYWxsZXIgdmFsdWUgKHplcm8gdG8gYmUgc3VyZSBub3RoaW5nIGNhbiBnbyB3cm9uZykuCiAgICAgKiBAZGVmYXVsdCAwCiAgICAgKi8KCiAgICAvKioKICAgICAqIFNldCB0byB0cnVlIHRvIHVzZSBmYXN0IHF1YXRlcm5pb24gbm9ybWFsaXphdGlvbi4gSXQgaXMgb2Z0ZW4gZW5vdWdoIGFjY3VyYXRlIHRvIHVzZS4KICAgICAqIElmIGJvZGllcyB0ZW5kIHRvIGV4cGxvZGUsIHNldCB0byBmYWxzZS4KICAgICAqIEBkZWZhdWx0IGZhbHNlCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSB3YWxsLWNsb2NrIHRpbWUgc2luY2Ugc2ltdWxhdGlvbiBzdGFydC4KICAgICAqLwoKICAgIC8qKgogICAgICogTnVtYmVyIG9mIHRpbWVzdGVwcyB0YWtlbiBzaW5jZSBzdGFydC4KICAgICAqLwoKICAgIC8qKgogICAgICogRGVmYXVsdCBhbmQgbGFzdCB0aW1lc3RlcCBzaXplcy4KICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIGdyYXZpdHkgb2YgdGhlIHdvcmxkLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgYnJvYWRwaGFzZSBhbGdvcml0aG0gdG8gdXNlLgogICAgICogQGRlZmF1bHQgTmFpdmVCcm9hZHBoYXNlCiAgICAgKi8KCiAgICAvKioKICAgICAqIEFsbCBib2RpZXMgaW4gdGhpcyB3b3JsZAogICAgICovCgogICAgLyoqCiAgICAgKiBUcnVlIGlmIGFueSBib2RpZXMgYXJlIG5vdCBzbGVlcGluZywgZmFsc2UgaWYgZXZlcnkgYm9keSBpcyBzbGVlcGluZy4KICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIHNvbHZlciBhbGdvcml0aG0gdG8gdXNlLgogICAgICogQGRlZmF1bHQgR1NTb2x2ZXIKICAgICAqLwoKICAgIC8qKgogICAgICogY29sbGlzaW9uTWF0cml4CiAgICAgKi8KCiAgICAvKioKICAgICAqIENvbGxpc2lvbk1hdHJpeCBmcm9tIHRoZSBwcmV2aW91cyBzdGVwLgogICAgICovCgogICAgLyoqCiAgICAgKiBBbGwgYWRkZWQgbWF0ZXJpYWxzLgogICAgICogQGRlcHJlY2F0ZWQKICAgICAqIEB0b2RvIFJlbW92ZQogICAgICovCgogICAgLyoqCiAgICAgKiBBbGwgYWRkZWQgY29udGFjdG1hdGVyaWFscy4KICAgICAqLwoKICAgIC8qKgogICAgICogVXNlZCB0byBsb29rIHVwIGEgQ29udGFjdE1hdGVyaWFsIGdpdmVuIHR3byBpbnN0YW5jZXMgb2YgTWF0ZXJpYWwuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBkZWZhdWx0IG1hdGVyaWFsIG9mIHRoZSBib2RpZXMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoaXMgY29udGFjdCBtYXRlcmlhbCBpcyB1c2VkIGlmIG5vIHN1aXRhYmxlIGNvbnRhY3RtYXRlcmlhbCBpcyBmb3VuZCBmb3IgYSBjb250YWN0LgogICAgICovCgogICAgLyoqCiAgICAgKiBUaW1lIGFjY3VtdWxhdG9yIGZvciBpbnRlcnBvbGF0aW9uLgogICAgICogQHNlZSBodHRwczovL2dhZmZlcm9uZ2FtZXMuY29tL2dhbWUtcGh5c2ljcy9maXgteW91ci10aW1lc3RlcC8KICAgICAqLwoKICAgIC8qKgogICAgICogRGlzcGF0Y2hlZCBhZnRlciBhIGJvZHkgaGFzIGJlZW4gYWRkZWQgdG8gdGhlIHdvcmxkLgogICAgICovCgogICAgLyoqCiAgICAgKiBEaXNwYXRjaGVkIGFmdGVyIGEgYm9keSBoYXMgYmVlbiByZW1vdmVkIGZyb20gdGhlIHdvcmxkLgogICAgICovCiAgICBjb25zdHJ1Y3RvcihvcHRpb25zID0ge30pIHsKICAgICAgc3VwZXIoKTsKICAgICAgdGhpcy5kdCA9IHZvaWQgMDsKICAgICAgdGhpcy5hbGxvd1NsZWVwID0gdm9pZCAwOwogICAgICB0aGlzLmNvbnRhY3RzID0gdm9pZCAwOwogICAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25zID0gdm9pZCAwOwogICAgICB0aGlzLnF1YXROb3JtYWxpemVTa2lwID0gdm9pZCAwOwogICAgICB0aGlzLnF1YXROb3JtYWxpemVGYXN0ID0gdm9pZCAwOwogICAgICB0aGlzLnRpbWUgPSB2b2lkIDA7CiAgICAgIHRoaXMuc3RlcG51bWJlciA9IHZvaWQgMDsKICAgICAgdGhpcy5kZWZhdWx0X2R0ID0gdm9pZCAwOwogICAgICB0aGlzLm5leHRJZCA9IHZvaWQgMDsKICAgICAgdGhpcy5ncmF2aXR5ID0gdm9pZCAwOwogICAgICB0aGlzLmJyb2FkcGhhc2UgPSB2b2lkIDA7CiAgICAgIHRoaXMuYm9kaWVzID0gdm9pZCAwOwogICAgICB0aGlzLmhhc0FjdGl2ZUJvZGllcyA9IHZvaWQgMDsKICAgICAgdGhpcy5zb2x2ZXIgPSB2b2lkIDA7CiAgICAgIHRoaXMuY29uc3RyYWludHMgPSB2b2lkIDA7CiAgICAgIHRoaXMubmFycm93cGhhc2UgPSB2b2lkIDA7CiAgICAgIHRoaXMuY29sbGlzaW9uTWF0cml4ID0gdm9pZCAwOwogICAgICB0aGlzLmNvbGxpc2lvbk1hdHJpeFByZXZpb3VzID0gdm9pZCAwOwogICAgICB0aGlzLmJvZHlPdmVybGFwS2VlcGVyID0gdm9pZCAwOwogICAgICB0aGlzLnNoYXBlT3ZlcmxhcEtlZXBlciA9IHZvaWQgMDsKICAgICAgdGhpcy5tYXRlcmlhbHMgPSB2b2lkIDA7CiAgICAgIHRoaXMuY29udGFjdG1hdGVyaWFscyA9IHZvaWQgMDsKICAgICAgdGhpcy5jb250YWN0TWF0ZXJpYWxUYWJsZSA9IHZvaWQgMDsKICAgICAgdGhpcy5kZWZhdWx0TWF0ZXJpYWwgPSB2b2lkIDA7CiAgICAgIHRoaXMuZGVmYXVsdENvbnRhY3RNYXRlcmlhbCA9IHZvaWQgMDsKICAgICAgdGhpcy5kb1Byb2ZpbGluZyA9IHZvaWQgMDsKICAgICAgdGhpcy5wcm9maWxlID0gdm9pZCAwOwogICAgICB0aGlzLmFjY3VtdWxhdG9yID0gdm9pZCAwOwogICAgICB0aGlzLnN1YnN5c3RlbXMgPSB2b2lkIDA7CiAgICAgIHRoaXMuYWRkQm9keUV2ZW50ID0gdm9pZCAwOwogICAgICB0aGlzLnJlbW92ZUJvZHlFdmVudCA9IHZvaWQgMDsKICAgICAgdGhpcy5pZFRvQm9keU1hcCA9IHZvaWQgMDsKICAgICAgdGhpcy5kdCA9IC0xOwogICAgICB0aGlzLmFsbG93U2xlZXAgPSAhIW9wdGlvbnMuYWxsb3dTbGVlcDsKICAgICAgdGhpcy5jb250YWN0cyA9IFtdOwogICAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25zID0gW107CiAgICAgIHRoaXMucXVhdE5vcm1hbGl6ZVNraXAgPSBvcHRpb25zLnF1YXROb3JtYWxpemVTa2lwICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnF1YXROb3JtYWxpemVTa2lwIDogMDsKICAgICAgdGhpcy5xdWF0Tm9ybWFsaXplRmFzdCA9IG9wdGlvbnMucXVhdE5vcm1hbGl6ZUZhc3QgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMucXVhdE5vcm1hbGl6ZUZhc3QgOiBmYWxzZTsKICAgICAgdGhpcy50aW1lID0gMC4wOwogICAgICB0aGlzLnN0ZXBudW1iZXIgPSAwOwogICAgICB0aGlzLmRlZmF1bHRfZHQgPSAxIC8gNjA7CiAgICAgIHRoaXMubmV4dElkID0gMDsKICAgICAgdGhpcy5ncmF2aXR5ID0gbmV3IFZlYzMoKTsKCiAgICAgIGlmIChvcHRpb25zLmdyYXZpdHkpIHsKICAgICAgICB0aGlzLmdyYXZpdHkuY29weShvcHRpb25zLmdyYXZpdHkpOwogICAgICB9CgogICAgICB0aGlzLmJyb2FkcGhhc2UgPSBvcHRpb25zLmJyb2FkcGhhc2UgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuYnJvYWRwaGFzZSA6IG5ldyBOYWl2ZUJyb2FkcGhhc2UoKTsKICAgICAgdGhpcy5ib2RpZXMgPSBbXTsKICAgICAgdGhpcy5oYXNBY3RpdmVCb2RpZXMgPSBmYWxzZTsKICAgICAgdGhpcy5zb2x2ZXIgPSBvcHRpb25zLnNvbHZlciAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5zb2x2ZXIgOiBuZXcgR1NTb2x2ZXIoKTsKICAgICAgdGhpcy5jb25zdHJhaW50cyA9IFtdOwogICAgICB0aGlzLm5hcnJvd3BoYXNlID0gbmV3IE5hcnJvd3BoYXNlKHRoaXMpOwogICAgICB0aGlzLmNvbGxpc2lvbk1hdHJpeCA9IG5ldyBBcnJheUNvbGxpc2lvbk1hdHJpeCgpOwogICAgICB0aGlzLmNvbGxpc2lvbk1hdHJpeFByZXZpb3VzID0gbmV3IEFycmF5Q29sbGlzaW9uTWF0cml4KCk7CiAgICAgIHRoaXMuYm9keU92ZXJsYXBLZWVwZXIgPSBuZXcgT3ZlcmxhcEtlZXBlcigpOwogICAgICB0aGlzLnNoYXBlT3ZlcmxhcEtlZXBlciA9IG5ldyBPdmVybGFwS2VlcGVyKCk7CiAgICAgIHRoaXMubWF0ZXJpYWxzID0gW107CiAgICAgIHRoaXMuY29udGFjdG1hdGVyaWFscyA9IFtdOwogICAgICB0aGlzLmNvbnRhY3RNYXRlcmlhbFRhYmxlID0gbmV3IFR1cGxlRGljdGlvbmFyeSgpOwogICAgICB0aGlzLmRlZmF1bHRNYXRlcmlhbCA9IG5ldyBNYXRlcmlhbCgnZGVmYXVsdCcpOwogICAgICB0aGlzLmRlZmF1bHRDb250YWN0TWF0ZXJpYWwgPSBuZXcgQ29udGFjdE1hdGVyaWFsKHRoaXMuZGVmYXVsdE1hdGVyaWFsLCB0aGlzLmRlZmF1bHRNYXRlcmlhbCwgewogICAgICAgIGZyaWN0aW9uOiAwLjMsCiAgICAgICAgcmVzdGl0dXRpb246IDAuMAogICAgICB9KTsKICAgICAgdGhpcy5kb1Byb2ZpbGluZyA9IGZhbHNlOwogICAgICB0aGlzLnByb2ZpbGUgPSB7CiAgICAgICAgc29sdmU6IDAsCiAgICAgICAgbWFrZUNvbnRhY3RDb25zdHJhaW50czogMCwKICAgICAgICBicm9hZHBoYXNlOiAwLAogICAgICAgIGludGVncmF0ZTogMCwKICAgICAgICBuYXJyb3dwaGFzZTogMAogICAgICB9OwogICAgICB0aGlzLmFjY3VtdWxhdG9yID0gMDsKICAgICAgdGhpcy5zdWJzeXN0ZW1zID0gW107CiAgICAgIHRoaXMuYWRkQm9keUV2ZW50ID0gewogICAgICAgIHR5cGU6ICdhZGRCb2R5JywKICAgICAgICBib2R5OiBudWxsCiAgICAgIH07CiAgICAgIHRoaXMucmVtb3ZlQm9keUV2ZW50ID0gewogICAgICAgIHR5cGU6ICdyZW1vdmVCb2R5JywKICAgICAgICBib2R5OiBudWxsCiAgICAgIH07CiAgICAgIHRoaXMuaWRUb0JvZHlNYXAgPSB7fTsKICAgICAgdGhpcy5icm9hZHBoYXNlLnNldFdvcmxkKHRoaXMpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIGNvbnRhY3QgbWF0ZXJpYWwgYmV0d2VlbiBtYXRlcmlhbHMgbTEgYW5kIG0yCiAgICAgKiBAcmV0dXJuIFRoZSBjb250YWN0IG1hdGVyaWFsIGlmIGl0IHdhcyBmb3VuZC4KICAgICAqLwoKCiAgICBnZXRDb250YWN0TWF0ZXJpYWwobTEsIG0yKSB7CiAgICAgIHJldHVybiB0aGlzLmNvbnRhY3RNYXRlcmlhbFRhYmxlLmdldChtMS5pZCwgbTIuaWQpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgbnVtYmVyIG9mIG9iamVjdHMgaW4gdGhlIHdvcmxkLgogICAgICogQGRlcHJlY2F0ZWQKICAgICAqLwoKCiAgICBudW1PYmplY3RzKCkgewogICAgICByZXR1cm4gdGhpcy5ib2RpZXMubGVuZ3RoOwogICAgfQogICAgLyoqCiAgICAgKiBTdG9yZSBvbGQgY29sbGlzaW9uIHN0YXRlIGluZm8KICAgICAqLwoKCiAgICBjb2xsaXNpb25NYXRyaXhUaWNrKCkgewogICAgICBjb25zdCB0ZW1wID0gdGhpcy5jb2xsaXNpb25NYXRyaXhQcmV2aW91czsKICAgICAgdGhpcy5jb2xsaXNpb25NYXRyaXhQcmV2aW91cyA9IHRoaXMuY29sbGlzaW9uTWF0cml4OwogICAgICB0aGlzLmNvbGxpc2lvbk1hdHJpeCA9IHRlbXA7CiAgICAgIHRoaXMuY29sbGlzaW9uTWF0cml4LnJlc2V0KCk7CiAgICAgIHRoaXMuYm9keU92ZXJsYXBLZWVwZXIudGljaygpOwogICAgICB0aGlzLnNoYXBlT3ZlcmxhcEtlZXBlci50aWNrKCk7CiAgICB9CiAgICAvKioKICAgICAqIEFkZCBhIGNvbnN0cmFpbnQgdG8gdGhlIHNpbXVsYXRpb24uCiAgICAgKi8KCgogICAgYWRkQ29uc3RyYWludChjKSB7CiAgICAgIHRoaXMuY29uc3RyYWludHMucHVzaChjKTsKICAgIH0KICAgIC8qKgogICAgICogUmVtb3ZlcyBhIGNvbnN0cmFpbnQKICAgICAqLwoKCiAgICByZW1vdmVDb25zdHJhaW50KGMpIHsKICAgICAgY29uc3QgaWR4ID0gdGhpcy5jb25zdHJhaW50cy5pbmRleE9mKGMpOwoKICAgICAgaWYgKGlkeCAhPT0gLTEpIHsKICAgICAgICB0aGlzLmNvbnN0cmFpbnRzLnNwbGljZShpZHgsIDEpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIFJheWNhc3QgdGVzdAogICAgICogQGRlcHJlY2F0ZWQgVXNlIC5yYXljYXN0QWxsLCAucmF5Y2FzdENsb3Nlc3Qgb3IgLnJheWNhc3RBbnkgaW5zdGVhZC4KICAgICAqLwoKCiAgICByYXlUZXN0KGZyb20sIHRvLCByZXN1bHQpIHsKICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIFJheWNhc3RSZXN1bHQpIHsKICAgICAgICAvLyBEbyByYXljYXN0Q2xvc2VzdAogICAgICAgIHRoaXMucmF5Y2FzdENsb3Nlc3QoZnJvbSwgdG8sIHsKICAgICAgICAgIHNraXBCYWNrZmFjZXM6IHRydWUKICAgICAgICB9LCByZXN1bHQpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIERvIHJheWNhc3RBbGwKICAgICAgICB0aGlzLnJheWNhc3RBbGwoZnJvbSwgdG8sIHsKICAgICAgICAgIHNraXBCYWNrZmFjZXM6IHRydWUKICAgICAgICB9LCByZXN1bHQpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIFJheSBjYXN0IGFnYWluc3QgYWxsIGJvZGllcy4gVGhlIHByb3ZpZGVkIGNhbGxiYWNrIHdpbGwgYmUgZXhlY3V0ZWQgZm9yIGVhY2ggaGl0IHdpdGggYSBSYXljYXN0UmVzdWx0IGFzIHNpbmdsZSBhcmd1bWVudC4KICAgICAqIEByZXR1cm4gVHJ1ZSBpZiBhbnkgYm9keSB3YXMgaGl0LgogICAgICovCgoKICAgIHJheWNhc3RBbGwoZnJvbSwgdG8sIG9wdGlvbnMgPSB7fSwgY2FsbGJhY2spIHsKICAgICAgb3B0aW9ucy5tb2RlID0gUmF5LkFMTDsKICAgICAgb3B0aW9ucy5mcm9tID0gZnJvbTsKICAgICAgb3B0aW9ucy50byA9IHRvOwogICAgICBvcHRpb25zLmNhbGxiYWNrID0gY2FsbGJhY2s7CiAgICAgIHJldHVybiB0bXBSYXkuaW50ZXJzZWN0V29ybGQodGhpcywgb3B0aW9ucyk7CiAgICB9CiAgICAvKioKICAgICAqIFJheSBjYXN0LCBhbmQgc3RvcCBhdCB0aGUgZmlyc3QgcmVzdWx0LiBOb3RlIHRoYXQgdGhlIG9yZGVyIGlzIHJhbmRvbSAtIGJ1dCB0aGUgbWV0aG9kIGlzIGZhc3QuCiAgICAgKiBAcmV0dXJuIFRydWUgaWYgYW55IGJvZHkgd2FzIGhpdC4KICAgICAqLwoKCiAgICByYXljYXN0QW55KGZyb20sIHRvLCBvcHRpb25zID0ge30sIHJlc3VsdCkgewogICAgICBvcHRpb25zLm1vZGUgPSBSYXkuQU5ZOwogICAgICBvcHRpb25zLmZyb20gPSBmcm9tOwogICAgICBvcHRpb25zLnRvID0gdG87CiAgICAgIG9wdGlvbnMucmVzdWx0ID0gcmVzdWx0OwogICAgICByZXR1cm4gdG1wUmF5LmludGVyc2VjdFdvcmxkKHRoaXMsIG9wdGlvbnMpOwogICAgfQogICAgLyoqCiAgICAgKiBSYXkgY2FzdCwgYW5kIHJldHVybiBpbmZvcm1hdGlvbiBvZiB0aGUgY2xvc2VzdCBoaXQuCiAgICAgKiBAcmV0dXJuIFRydWUgaWYgYW55IGJvZHkgd2FzIGhpdC4KICAgICAqLwoKCiAgICByYXljYXN0Q2xvc2VzdChmcm9tLCB0bywgb3B0aW9ucyA9IHt9LCByZXN1bHQpIHsKICAgICAgb3B0aW9ucy5tb2RlID0gUmF5LkNMT1NFU1Q7CiAgICAgIG9wdGlvbnMuZnJvbSA9IGZyb207CiAgICAgIG9wdGlvbnMudG8gPSB0bzsKICAgICAgb3B0aW9ucy5yZXN1bHQgPSByZXN1bHQ7CiAgICAgIHJldHVybiB0bXBSYXkuaW50ZXJzZWN0V29ybGQodGhpcywgb3B0aW9ucyk7CiAgICB9CiAgICAvKioKICAgICAqIEFkZCBhIHJpZ2lkIGJvZHkgdG8gdGhlIHNpbXVsYXRpb24uCiAgICAgKiBAdG9kbyBJZiB0aGUgc2ltdWxhdGlvbiBoYXMgbm90IHlldCBzdGFydGVkLCB3aHkgcmVjcmV0ZSBhbmQgY29weSBhcnJheXMgZm9yIGVhY2ggYm9keT8gQWNjdW11bGF0ZSBpbiBkeW5hbWljIGFycmF5cyBpbiB0aGlzIGNhc2UuCiAgICAgKiBAdG9kbyBBZGRpbmcgYW4gYXJyYXkgb2YgYm9kaWVzIHNob3VsZCBiZSBwb3NzaWJsZS4gVGhpcyB3b3VsZCBzYXZlIHNvbWUgbG9vcHMgdG9vCiAgICAgKi8KCgogICAgYWRkQm9keShib2R5KSB7CiAgICAgIGlmICh0aGlzLmJvZGllcy5pbmNsdWRlcyhib2R5KSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgYm9keS5pbmRleCA9IHRoaXMuYm9kaWVzLmxlbmd0aDsKICAgICAgdGhpcy5ib2RpZXMucHVzaChib2R5KTsKICAgICAgYm9keS53b3JsZCA9IHRoaXM7CiAgICAgIGJvZHkuaW5pdFBvc2l0aW9uLmNvcHkoYm9keS5wb3NpdGlvbik7CiAgICAgIGJvZHkuaW5pdFZlbG9jaXR5LmNvcHkoYm9keS52ZWxvY2l0eSk7CiAgICAgIGJvZHkudGltZUxhc3RTbGVlcHkgPSB0aGlzLnRpbWU7CgogICAgICBpZiAoYm9keSBpbnN0YW5jZW9mIEJvZHkpIHsKICAgICAgICBib2R5LmluaXRBbmd1bGFyVmVsb2NpdHkuY29weShib2R5LmFuZ3VsYXJWZWxvY2l0eSk7CiAgICAgICAgYm9keS5pbml0UXVhdGVybmlvbi5jb3B5KGJvZHkucXVhdGVybmlvbik7CiAgICAgIH0KCiAgICAgIHRoaXMuY29sbGlzaW9uTWF0cml4LnNldE51bU9iamVjdHModGhpcy5ib2RpZXMubGVuZ3RoKTsKICAgICAgdGhpcy5hZGRCb2R5RXZlbnQuYm9keSA9IGJvZHk7CiAgICAgIHRoaXMuaWRUb0JvZHlNYXBbYm9keS5pZF0gPSBib2R5OwogICAgICB0aGlzLmRpc3BhdGNoRXZlbnQodGhpcy5hZGRCb2R5RXZlbnQpOwogICAgfQogICAgLyoqCiAgICAgKiBSZW1vdmUgYSByaWdpZCBib2R5IGZyb20gdGhlIHNpbXVsYXRpb24uCiAgICAgKi8KCgogICAgcmVtb3ZlQm9keShib2R5KSB7CiAgICAgIGJvZHkud29ybGQgPSBudWxsOwogICAgICBjb25zdCBuID0gdGhpcy5ib2RpZXMubGVuZ3RoIC0gMTsKICAgICAgY29uc3QgYm9kaWVzID0gdGhpcy5ib2RpZXM7CiAgICAgIGNvbnN0IGlkeCA9IGJvZGllcy5pbmRleE9mKGJvZHkpOwoKICAgICAgaWYgKGlkeCAhPT0gLTEpIHsKICAgICAgICBib2RpZXMuc3BsaWNlKGlkeCwgMSk7IC8vIFRvZG86IHNob3VsZCB1c2UgYSBnYXJiYWdlIGZyZWUgbWV0aG9kCiAgICAgICAgLy8gUmVjb21wdXRlIGluZGV4CgogICAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBib2RpZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGJvZGllc1tpXS5pbmRleCA9IGk7CiAgICAgICAgfQoKICAgICAgICB0aGlzLmNvbGxpc2lvbk1hdHJpeC5zZXROdW1PYmplY3RzKG4pOwogICAgICAgIHRoaXMucmVtb3ZlQm9keUV2ZW50LmJvZHkgPSBib2R5OwogICAgICAgIGRlbGV0ZSB0aGlzLmlkVG9Cb2R5TWFwW2JvZHkuaWRdOwogICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudCh0aGlzLnJlbW92ZUJvZHlFdmVudCk7CiAgICAgIH0KICAgIH0KCiAgICBnZXRCb2R5QnlJZChpZCkgewogICAgICByZXR1cm4gdGhpcy5pZFRvQm9keU1hcFtpZF07CiAgICB9CiAgICAvKioKICAgICAqIEB0b2RvIE1ha2UgYSBmYXN0ZXIgbWFwCiAgICAgKi8KCgogICAgZ2V0U2hhcGVCeUlkKGlkKSB7CiAgICAgIGNvbnN0IGJvZGllcyA9IHRoaXMuYm9kaWVzOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBib2RpZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBzaGFwZXMgPSBib2RpZXNbaV0uc2hhcGVzOwoKICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHNoYXBlcy5sZW5ndGg7IGorKykgewogICAgICAgICAgY29uc3Qgc2hhcGUgPSBzaGFwZXNbal07CgogICAgICAgICAgaWYgKHNoYXBlLmlkID09PSBpZCkgewogICAgICAgICAgICByZXR1cm4gc2hhcGU7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gbnVsbDsKICAgIH0KICAgIC8qKgogICAgICogQWRkcyBhIG1hdGVyaWFsIHRvIHRoZSBXb3JsZC4KICAgICAqIEBkZXByZWNhdGVkCiAgICAgKiBAdG9kbyBSZW1vdmUKICAgICAqLwoKCiAgICBhZGRNYXRlcmlhbChtKSB7CiAgICAgIHRoaXMubWF0ZXJpYWxzLnB1c2gobSk7CiAgICB9CiAgICAvKioKICAgICAqIEFkZHMgYSBjb250YWN0IG1hdGVyaWFsIHRvIHRoZSBXb3JsZAogICAgICovCgoKICAgIGFkZENvbnRhY3RNYXRlcmlhbChjbWF0KSB7CiAgICAgIC8vIEFkZCBjb250YWN0IG1hdGVyaWFsCiAgICAgIHRoaXMuY29udGFjdG1hdGVyaWFscy5wdXNoKGNtYXQpOyAvLyBBZGQgY3VycmVudCBjb250YWN0IG1hdGVyaWFsIHRvIHRoZSBtYXRlcmlhbCB0YWJsZQoKICAgICAgdGhpcy5jb250YWN0TWF0ZXJpYWxUYWJsZS5zZXQoY21hdC5tYXRlcmlhbHNbMF0uaWQsIGNtYXQubWF0ZXJpYWxzWzFdLmlkLCBjbWF0KTsKICAgIH0KICAgIC8qKgogICAgICogU3RlcCB0aGUgcGh5c2ljcyB3b3JsZCBmb3J3YXJkIGluIHRpbWUuCiAgICAgKgogICAgICogVGhlcmUgYXJlIHR3byBtb2Rlcy4gVGhlIHNpbXBsZSBtb2RlIGlzIGZpeGVkIHRpbWVzdGVwcGluZyB3aXRob3V0IGludGVycG9sYXRpb24uIEluIHRoaXMgY2FzZSB5b3Ugb25seSB1c2UgdGhlIGZpcnN0IGFyZ3VtZW50LiBUaGUgc2Vjb25kIGNhc2UgdXNlcyBpbnRlcnBvbGF0aW9uLiBJbiB0aGF0IHlvdSBhbHNvIHByb3ZpZGUgdGhlIHRpbWUgc2luY2UgdGhlIGZ1bmN0aW9uIHdhcyBsYXN0IHVzZWQsIGFzIHdlbGwgYXMgdGhlIG1heGltdW0gZml4ZWQgdGltZXN0ZXBzIHRvIHRha2UuCiAgICAgKgogICAgICogQHBhcmFtIGR0IFRoZSBmaXhlZCB0aW1lIHN0ZXAgc2l6ZSB0byB1c2UuCiAgICAgKiBAcGFyYW0gdGltZVNpbmNlTGFzdENhbGxlZCBUaGUgdGltZSBlbGFwc2VkIHNpbmNlIHRoZSBmdW5jdGlvbiB3YXMgbGFzdCBjYWxsZWQuCiAgICAgKiBAcGFyYW0gbWF4U3ViU3RlcHMgTWF4aW11bSBudW1iZXIgb2YgZml4ZWQgc3RlcHMgdG8gdGFrZSBwZXIgZnVuY3Rpb24gY2FsbC4KICAgICAqIEBzZWUgaHR0cHM6Ly93ZWIuYXJjaGl2ZS5vcmcvd2ViLzIwMTgwNDI2MTU0NTMxL2h0dHA6Ly9idWxsZXRwaHlzaWNzLm9yZy9tZWRpYXdpa2ktMS41LjgvaW5kZXgucGhwL1N0ZXBwaW5nX1RoZV9Xb3JsZCNXaGF0X2RvX3RoZV9wYXJhbWV0ZXJzX3RvX2J0RHluYW1pY3NXb3JsZDo6c3RlcFNpbXVsYXRpb25fbWVhbi4zRgogICAgICogQGV4YW1wbGUKICAgICAqICAgICAvLyBmaXhlZCB0aW1lc3RlcHBpbmcgd2l0aG91dCBpbnRlcnBvbGF0aW9uCiAgICAgKiAgICAgd29ybGQuc3RlcCgxIC8gNjApCiAgICAgKi8KCgogICAgc3RlcChkdCwgdGltZVNpbmNlTGFzdENhbGxlZCwgbWF4U3ViU3RlcHMgPSAxMCkgewogICAgICBpZiAodGltZVNpbmNlTGFzdENhbGxlZCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgLy8gRml4ZWQsIHNpbXBsZSBzdGVwcGluZwogICAgICAgIHRoaXMuaW50ZXJuYWxTdGVwKGR0KTsgLy8gSW5jcmVtZW50IHRpbWUKCiAgICAgICAgdGhpcy50aW1lICs9IGR0OwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuYWNjdW11bGF0b3IgKz0gdGltZVNpbmNlTGFzdENhbGxlZDsKICAgICAgICBjb25zdCB0MCA9IHBlcmZvcm1hbmNlJDEubm93KCk7CiAgICAgICAgbGV0IHN1YnN0ZXBzID0gMDsKCiAgICAgICAgd2hpbGUgKHRoaXMuYWNjdW11bGF0b3IgPj0gZHQgJiYgc3Vic3RlcHMgPCBtYXhTdWJTdGVwcykgewogICAgICAgICAgLy8gRG8gZml4ZWQgc3RlcHMgdG8gY2F0Y2ggdXAKICAgICAgICAgIHRoaXMuaW50ZXJuYWxTdGVwKGR0KTsKICAgICAgICAgIHRoaXMuYWNjdW11bGF0b3IgLT0gZHQ7CiAgICAgICAgICBzdWJzdGVwcysrOwoKICAgICAgICAgIGlmIChwZXJmb3JtYW5jZSQxLm5vdygpIC0gdDAgPiBkdCAqIDEwMDApIHsKICAgICAgICAgICAgLy8gVGhlIGZyYW1lcmF0ZSBpcyBub3QgaW50ZXJhY3RpdmUgYW55bW9yZS4KICAgICAgICAgICAgLy8gV2UgYXJlIGJlbG93IHRoZSB0YXJnZXQgZnJhbWVyYXRlLgogICAgICAgICAgICAvLyBCZXR0ZXIgYmFpbCBvdXQuCiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIH0gLy8gUmVtb3ZlIHRoZSBleGNlc3MgYWNjdW11bGF0b3IsIHNpbmNlIHdlIG1heSBub3QKICAgICAgICAvLyBoYXZlIGhhZCBlbm91Z2ggc3Vic3RlcHMgYXZhaWxhYmxlIHRvIGNhdGNoIHVwCgoKICAgICAgICB0aGlzLmFjY3VtdWxhdG9yID0gdGhpcy5hY2N1bXVsYXRvciAlIGR0OwogICAgICAgIGNvbnN0IHQgPSB0aGlzLmFjY3VtdWxhdG9yIC8gZHQ7CgogICAgICAgIGZvciAobGV0IGogPSAwOyBqICE9PSB0aGlzLmJvZGllcy5sZW5ndGg7IGorKykgewogICAgICAgICAgY29uc3QgYiA9IHRoaXMuYm9kaWVzW2pdOwogICAgICAgICAgYi5wcmV2aW91c1Bvc2l0aW9uLmxlcnAoYi5wb3NpdGlvbiwgdCwgYi5pbnRlcnBvbGF0ZWRQb3NpdGlvbik7CiAgICAgICAgICBiLnByZXZpb3VzUXVhdGVybmlvbi5zbGVycChiLnF1YXRlcm5pb24sIHQsIGIuaW50ZXJwb2xhdGVkUXVhdGVybmlvbik7CiAgICAgICAgICBiLnByZXZpb3VzUXVhdGVybmlvbi5ub3JtYWxpemUoKTsKICAgICAgICB9CgogICAgICAgIHRoaXMudGltZSArPSB0aW1lU2luY2VMYXN0Q2FsbGVkOwogICAgICB9CiAgICB9CgogICAgaW50ZXJuYWxTdGVwKGR0KSB7CiAgICAgIHRoaXMuZHQgPSBkdDsKICAgICAgY29uc3QgY29udGFjdHMgPSB0aGlzLmNvbnRhY3RzOwogICAgICBjb25zdCBwMSA9IFdvcmxkX3N0ZXBfcDE7CiAgICAgIGNvbnN0IHAyID0gV29ybGRfc3RlcF9wMjsKICAgICAgY29uc3QgTiA9IHRoaXMubnVtT2JqZWN0cygpOwogICAgICBjb25zdCBib2RpZXMgPSB0aGlzLmJvZGllczsKICAgICAgY29uc3Qgc29sdmVyID0gdGhpcy5zb2x2ZXI7CiAgICAgIGNvbnN0IGdyYXZpdHkgPSB0aGlzLmdyYXZpdHk7CiAgICAgIGNvbnN0IGRvUHJvZmlsaW5nID0gdGhpcy5kb1Byb2ZpbGluZzsKICAgICAgY29uc3QgcHJvZmlsZSA9IHRoaXMucHJvZmlsZTsKICAgICAgY29uc3QgRFlOQU1JQyA9IEJvZHkuRFlOQU1JQzsKICAgICAgbGV0IHByb2ZpbGluZ1N0YXJ0ID0gLUluZmluaXR5OwogICAgICBjb25zdCBjb25zdHJhaW50cyA9IHRoaXMuY29uc3RyYWludHM7CiAgICAgIGNvbnN0IGZyaWN0aW9uRXF1YXRpb25Qb29sID0gV29ybGRfc3RlcF9mcmljdGlvbkVxdWF0aW9uUG9vbDsKICAgICAgZ3Jhdml0eS5sZW5ndGgoKTsKICAgICAgY29uc3QgZ3ggPSBncmF2aXR5Lng7CiAgICAgIGNvbnN0IGd5ID0gZ3Jhdml0eS55OwogICAgICBjb25zdCBneiA9IGdyYXZpdHkuejsKICAgICAgbGV0IGkgPSAwOwoKICAgICAgaWYgKGRvUHJvZmlsaW5nKSB7CiAgICAgICAgcHJvZmlsaW5nU3RhcnQgPSBwZXJmb3JtYW5jZSQxLm5vdygpOwogICAgICB9IC8vIEFkZCBncmF2aXR5IHRvIGFsbCBvYmplY3RzCgoKICAgICAgZm9yIChpID0gMDsgaSAhPT0gTjsgaSsrKSB7CiAgICAgICAgY29uc3QgYmkgPSBib2RpZXNbaV07CgogICAgICAgIGlmIChiaS50eXBlID09PSBEWU5BTUlDKSB7CiAgICAgICAgICAvLyBPbmx5IGZvciBkeW5hbWljIGJvZGllcwogICAgICAgICAgY29uc3QgZiA9IGJpLmZvcmNlOwogICAgICAgICAgY29uc3QgbSA9IGJpLm1hc3M7CiAgICAgICAgICBmLnggKz0gbSAqIGd4OwogICAgICAgICAgZi55ICs9IG0gKiBneTsKICAgICAgICAgIGYueiArPSBtICogZ3o7CiAgICAgICAgfQogICAgICB9IC8vIFVwZGF0ZSBzdWJzeXN0ZW1zCgoKICAgICAgZm9yIChsZXQgaSA9IDAsIE5zdWJzeXN0ZW1zID0gdGhpcy5zdWJzeXN0ZW1zLmxlbmd0aDsgaSAhPT0gTnN1YnN5c3RlbXM7IGkrKykgewogICAgICAgIHRoaXMuc3Vic3lzdGVtc1tpXS51cGRhdGUoKTsKICAgICAgfSAvLyBDb2xsaXNpb24gZGV0ZWN0aW9uCgoKICAgICAgaWYgKGRvUHJvZmlsaW5nKSB7CiAgICAgICAgcHJvZmlsaW5nU3RhcnQgPSBwZXJmb3JtYW5jZSQxLm5vdygpOwogICAgICB9CgogICAgICBwMS5sZW5ndGggPSAwOyAvLyBDbGVhbiB1cCBwYWlyIGFycmF5cyBmcm9tIGxhc3Qgc3RlcAoKICAgICAgcDIubGVuZ3RoID0gMDsKICAgICAgdGhpcy5icm9hZHBoYXNlLmNvbGxpc2lvblBhaXJzKHRoaXMsIHAxLCBwMik7CgogICAgICBpZiAoZG9Qcm9maWxpbmcpIHsKICAgICAgICBwcm9maWxlLmJyb2FkcGhhc2UgPSBwZXJmb3JtYW5jZSQxLm5vdygpIC0gcHJvZmlsaW5nU3RhcnQ7CiAgICAgIH0gLy8gUmVtb3ZlIGNvbnN0cmFpbmVkIHBhaXJzIHdpdGggY29sbGlkZUNvbm5lY3RlZCA9PSBmYWxzZQoKCiAgICAgIGxldCBOY29uc3RyYWludHMgPSBjb25zdHJhaW50cy5sZW5ndGg7CgogICAgICBmb3IgKGkgPSAwOyBpICE9PSBOY29uc3RyYWludHM7IGkrKykgewogICAgICAgIGNvbnN0IGMgPSBjb25zdHJhaW50c1tpXTsKCiAgICAgICAgaWYgKCFjLmNvbGxpZGVDb25uZWN0ZWQpIHsKICAgICAgICAgIGZvciAobGV0IGogPSBwMS5sZW5ndGggLSAxOyBqID49IDA7IGogLT0gMSkgewogICAgICAgICAgICBpZiAoYy5ib2R5QSA9PT0gcDFbal0gJiYgYy5ib2R5QiA9PT0gcDJbal0gfHwgYy5ib2R5QiA9PT0gcDFbal0gJiYgYy5ib2R5QSA9PT0gcDJbal0pIHsKICAgICAgICAgICAgICBwMS5zcGxpY2UoaiwgMSk7CiAgICAgICAgICAgICAgcDIuc3BsaWNlKGosIDEpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLmNvbGxpc2lvbk1hdHJpeFRpY2soKTsgLy8gR2VuZXJhdGUgY29udGFjdHMKCiAgICAgIGlmIChkb1Byb2ZpbGluZykgewogICAgICAgIHByb2ZpbGluZ1N0YXJ0ID0gcGVyZm9ybWFuY2UkMS5ub3coKTsKICAgICAgfQoKICAgICAgY29uc3Qgb2xkY29udGFjdHMgPSBXb3JsZF9zdGVwX29sZENvbnRhY3RzOwogICAgICBjb25zdCBOb2xkQ29udGFjdHMgPSBjb250YWN0cy5sZW5ndGg7CgogICAgICBmb3IgKGkgPSAwOyBpICE9PSBOb2xkQ29udGFjdHM7IGkrKykgewogICAgICAgIG9sZGNvbnRhY3RzLnB1c2goY29udGFjdHNbaV0pOwogICAgICB9CgogICAgICBjb250YWN0cy5sZW5ndGggPSAwOyAvLyBUcmFuc2ZlciBGcmljdGlvbkVxdWF0aW9uIGZyb20gY3VycmVudCBsaXN0IHRvIHRoZSBwb29sIGZvciByZXVzZQoKICAgICAgY29uc3QgTm9sZEZyaWN0aW9uRXF1YXRpb25zID0gdGhpcy5mcmljdGlvbkVxdWF0aW9ucy5sZW5ndGg7CgogICAgICBmb3IgKGkgPSAwOyBpICE9PSBOb2xkRnJpY3Rpb25FcXVhdGlvbnM7IGkrKykgewogICAgICAgIGZyaWN0aW9uRXF1YXRpb25Qb29sLnB1c2godGhpcy5mcmljdGlvbkVxdWF0aW9uc1tpXSk7CiAgICAgIH0KCiAgICAgIHRoaXMuZnJpY3Rpb25FcXVhdGlvbnMubGVuZ3RoID0gMDsKICAgICAgdGhpcy5uYXJyb3dwaGFzZS5nZXRDb250YWN0cyhwMSwgcDIsIHRoaXMsIGNvbnRhY3RzLCBvbGRjb250YWN0cywgLy8gVG8gYmUgcmV1c2VkCiAgICAgIHRoaXMuZnJpY3Rpb25FcXVhdGlvbnMsIGZyaWN0aW9uRXF1YXRpb25Qb29sKTsKCiAgICAgIGlmIChkb1Byb2ZpbGluZykgewogICAgICAgIHByb2ZpbGUubmFycm93cGhhc2UgPSBwZXJmb3JtYW5jZSQxLm5vdygpIC0gcHJvZmlsaW5nU3RhcnQ7CiAgICAgIH0gLy8gTG9vcCBvdmVyIGFsbCBjb2xsaXNpb25zCgoKICAgICAgaWYgKGRvUHJvZmlsaW5nKSB7CiAgICAgICAgcHJvZmlsaW5nU3RhcnQgPSBwZXJmb3JtYW5jZSQxLm5vdygpOwogICAgICB9IC8vIEFkZCBhbGwgZnJpY3Rpb24gZXFzCgoKICAgICAgZm9yIChpID0gMDsgaSA8IHRoaXMuZnJpY3Rpb25FcXVhdGlvbnMubGVuZ3RoOyBpKyspIHsKICAgICAgICBzb2x2ZXIuYWRkRXF1YXRpb24odGhpcy5mcmljdGlvbkVxdWF0aW9uc1tpXSk7CiAgICAgIH0KCiAgICAgIGNvbnN0IG5jb250YWN0cyA9IGNvbnRhY3RzLmxlbmd0aDsKCiAgICAgIGZvciAobGV0IGsgPSAwOyBrICE9PSBuY29udGFjdHM7IGsrKykgewogICAgICAgIC8vIEN1cnJlbnQgY29udGFjdAogICAgICAgIGNvbnN0IGMgPSBjb250YWN0c1trXTsgLy8gR2V0IGN1cnJlbnQgY29sbGlzaW9uIGluZGVjZXMKCiAgICAgICAgY29uc3QgYmkgPSBjLmJpOwogICAgICAgIGNvbnN0IGJqID0gYy5iajsKICAgICAgICBjb25zdCBzaSA9IGMuc2k7CiAgICAgICAgY29uc3Qgc2ogPSBjLnNqOyAvLyBHZXQgY29sbGlzaW9uIHByb3BlcnRpZXMKCiAgICAgICAgbGV0IGNtOwoKICAgICAgICBpZiAoYmkubWF0ZXJpYWwgJiYgYmoubWF0ZXJpYWwpIHsKICAgICAgICAgIGNtID0gdGhpcy5nZXRDb250YWN0TWF0ZXJpYWwoYmkubWF0ZXJpYWwsIGJqLm1hdGVyaWFsKSB8fCB0aGlzLmRlZmF1bHRDb250YWN0TWF0ZXJpYWw7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNtID0gdGhpcy5kZWZhdWx0Q29udGFjdE1hdGVyaWFsOwogICAgICAgIH0gLy8gYy5lbmFibGVkID0gYmkuY29sbGlzaW9uUmVzcG9uc2UgJiYgYmouY29sbGlzaW9uUmVzcG9uc2UgJiYgc2kuY29sbGlzaW9uUmVzcG9uc2UgJiYgc2ouY29sbGlzaW9uUmVzcG9uc2U7CgoKICAgICAgICBjbS5mcmljdGlvbjsgLy8gYy5yZXN0aXR1dGlvbiA9IGNtLnJlc3RpdHV0aW9uOwogICAgICAgIC8vIElmIGZyaWN0aW9uIG9yIHJlc3RpdHV0aW9uIHdlcmUgc3BlY2lmaWVkIGluIHRoZSBtYXRlcmlhbCwgdXNlIHRoZW0KCiAgICAgICAgaWYgKGJpLm1hdGVyaWFsICYmIGJqLm1hdGVyaWFsKSB7CiAgICAgICAgICBpZiAoYmkubWF0ZXJpYWwuZnJpY3Rpb24gPj0gMCAmJiBiai5tYXRlcmlhbC5mcmljdGlvbiA+PSAwKSB7CiAgICAgICAgICAgIGJpLm1hdGVyaWFsLmZyaWN0aW9uICogYmoubWF0ZXJpYWwuZnJpY3Rpb247CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGJpLm1hdGVyaWFsLnJlc3RpdHV0aW9uID49IDAgJiYgYmoubWF0ZXJpYWwucmVzdGl0dXRpb24gPj0gMCkgewogICAgICAgICAgICBjLnJlc3RpdHV0aW9uID0gYmkubWF0ZXJpYWwucmVzdGl0dXRpb24gKiBiai5tYXRlcmlhbC5yZXN0aXR1dGlvbjsKICAgICAgICAgIH0KICAgICAgICB9IC8vIGMuc2V0U3Bvb2tQYXJhbXMoCiAgICAgICAgLy8gICAgICAgICAgIGNtLmNvbnRhY3RFcXVhdGlvblN0aWZmbmVzcywKICAgICAgICAvLyAgICAgICAgICAgY20uY29udGFjdEVxdWF0aW9uUmVsYXhhdGlvbiwKICAgICAgICAvLyAgICAgICAgICAgZHQKICAgICAgICAvLyAgICAgICApOwoKCiAgICAgICAgc29sdmVyLmFkZEVxdWF0aW9uKGMpOyAvLyAvLyBBZGQgZnJpY3Rpb24gY29uc3RyYWludCBlcXVhdGlvbgogICAgICAgIC8vIGlmKG11ID4gMCl7CiAgICAgICAgLy8gCS8vIENyZWF0ZSAyIHRhbmdlbnQgZXF1YXRpb25zCiAgICAgICAgLy8gCWNvbnN0IG11ZyA9IG11ICogZ25vcm07CiAgICAgICAgLy8gCWNvbnN0IHJlZHVjZWRNYXNzID0gKGJpLmludk1hc3MgKyBiai5pbnZNYXNzKTsKICAgICAgICAvLyAJaWYocmVkdWNlZE1hc3MgPiAwKXsKICAgICAgICAvLyAJCXJlZHVjZWRNYXNzID0gMS9yZWR1Y2VkTWFzczsKICAgICAgICAvLyAJfQogICAgICAgIC8vIAljb25zdCBwb29sID0gZnJpY3Rpb25FcXVhdGlvblBvb2w7CiAgICAgICAgLy8gCWNvbnN0IGMxID0gcG9vbC5sZW5ndGggPyBwb29sLnBvcCgpIDogbmV3IEZyaWN0aW9uRXF1YXRpb24oYmksYmosbXVnKnJlZHVjZWRNYXNzKTsKICAgICAgICAvLyAJY29uc3QgYzIgPSBwb29sLmxlbmd0aCA/IHBvb2wucG9wKCkgOiBuZXcgRnJpY3Rpb25FcXVhdGlvbihiaSxiaixtdWcqcmVkdWNlZE1hc3MpOwogICAgICAgIC8vIAl0aGlzLmZyaWN0aW9uRXF1YXRpb25zLnB1c2goYzEsIGMyKTsKICAgICAgICAvLyAJYzEuYmkgPSBjMi5iaSA9IGJpOwogICAgICAgIC8vIAljMS5iaiA9IGMyLmJqID0gYmo7CiAgICAgICAgLy8gCWMxLm1pbkZvcmNlID0gYzIubWluRm9yY2UgPSAtbXVnKnJlZHVjZWRNYXNzOwogICAgICAgIC8vIAljMS5tYXhGb3JjZSA9IGMyLm1heEZvcmNlID0gbXVnKnJlZHVjZWRNYXNzOwogICAgICAgIC8vIAkvLyBDb3B5IG92ZXIgdGhlIHJlbGF0aXZlIHZlY3RvcnMKICAgICAgICAvLyAJYzEucmkuY29weShjLnJpKTsKICAgICAgICAvLyAJYzEucmouY29weShjLnJqKTsKICAgICAgICAvLyAJYzIucmkuY29weShjLnJpKTsKICAgICAgICAvLyAJYzIucmouY29weShjLnJqKTsKICAgICAgICAvLyAJLy8gQ29uc3RydWN0IHRhbmdlbnRzCiAgICAgICAgLy8gCWMubmkudGFuZ2VudHMoYzEudCwgYzIudCk7CiAgICAgICAgLy8gICAgICAgICAgIC8vIFNldCBzcG9vayBwYXJhbXMKICAgICAgICAvLyAgICAgICAgICAgYzEuc2V0U3Bvb2tQYXJhbXMoY20uZnJpY3Rpb25FcXVhdGlvblN0aWZmbmVzcywgY20uZnJpY3Rpb25FcXVhdGlvblJlbGF4YXRpb24sIGR0KTsKICAgICAgICAvLyAgICAgICAgICAgYzIuc2V0U3Bvb2tQYXJhbXMoY20uZnJpY3Rpb25FcXVhdGlvblN0aWZmbmVzcywgY20uZnJpY3Rpb25FcXVhdGlvblJlbGF4YXRpb24sIGR0KTsKICAgICAgICAvLyAgICAgICAgICAgYzEuZW5hYmxlZCA9IGMyLmVuYWJsZWQgPSBjLmVuYWJsZWQ7CiAgICAgICAgLy8gCS8vIEFkZCBlcXVhdGlvbnMgdG8gc29sdmVyCiAgICAgICAgLy8gCXNvbHZlci5hZGRFcXVhdGlvbihjMSk7CiAgICAgICAgLy8gCXNvbHZlci5hZGRFcXVhdGlvbihjMik7CiAgICAgICAgLy8gfQoKICAgICAgICBpZiAoYmkuYWxsb3dTbGVlcCAmJiBiaS50eXBlID09PSBCb2R5LkRZTkFNSUMgJiYgYmkuc2xlZXBTdGF0ZSA9PT0gQm9keS5TTEVFUElORyAmJiBiai5zbGVlcFN0YXRlID09PSBCb2R5LkFXQUtFICYmIGJqLnR5cGUgIT09IEJvZHkuU1RBVElDKSB7CiAgICAgICAgICBjb25zdCBzcGVlZFNxdWFyZWRCID0gYmoudmVsb2NpdHkubGVuZ3RoU3F1YXJlZCgpICsgYmouYW5ndWxhclZlbG9jaXR5Lmxlbmd0aFNxdWFyZWQoKTsKICAgICAgICAgIGNvbnN0IHNwZWVkTGltaXRTcXVhcmVkQiA9IGJqLnNsZWVwU3BlZWRMaW1pdCAqKiAyOwoKICAgICAgICAgIGlmIChzcGVlZFNxdWFyZWRCID49IHNwZWVkTGltaXRTcXVhcmVkQiAqIDIpIHsKICAgICAgICAgICAgYmkud2FrZVVwQWZ0ZXJOYXJyb3dwaGFzZSA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoYmouYWxsb3dTbGVlcCAmJiBiai50eXBlID09PSBCb2R5LkRZTkFNSUMgJiYgYmouc2xlZXBTdGF0ZSA9PT0gQm9keS5TTEVFUElORyAmJiBiaS5zbGVlcFN0YXRlID09PSBCb2R5LkFXQUtFICYmIGJpLnR5cGUgIT09IEJvZHkuU1RBVElDKSB7CiAgICAgICAgICBjb25zdCBzcGVlZFNxdWFyZWRBID0gYmkudmVsb2NpdHkubGVuZ3RoU3F1YXJlZCgpICsgYmkuYW5ndWxhclZlbG9jaXR5Lmxlbmd0aFNxdWFyZWQoKTsKICAgICAgICAgIGNvbnN0IHNwZWVkTGltaXRTcXVhcmVkQSA9IGJpLnNsZWVwU3BlZWRMaW1pdCAqKiAyOwoKICAgICAgICAgIGlmIChzcGVlZFNxdWFyZWRBID49IHNwZWVkTGltaXRTcXVhcmVkQSAqIDIpIHsKICAgICAgICAgICAgYmoud2FrZVVwQWZ0ZXJOYXJyb3dwaGFzZSA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfSAvLyBOb3cgd2Uga25vdyB0aGF0IGkgYW5kIGogYXJlIGluIGNvbnRhY3QuIFNldCBjb2xsaXNpb24gbWF0cml4IHN0YXRlCgoKICAgICAgICB0aGlzLmNvbGxpc2lvbk1hdHJpeC5zZXQoYmksIGJqLCB0cnVlKTsKCiAgICAgICAgaWYgKCF0aGlzLmNvbGxpc2lvbk1hdHJpeFByZXZpb3VzLmdldChiaSwgYmopKSB7CiAgICAgICAgICAvLyBGaXJzdCBjb250YWN0IQogICAgICAgICAgLy8gV2UgcmV1c2UgdGhlIGNvbGxpZGVFdmVudCBvYmplY3QsIG90aGVyd2lzZSB3ZSB3aWxsIGVuZCB1cCBjcmVhdGluZyBuZXcgb2JqZWN0cyBmb3IgZWFjaCBuZXcgY29udGFjdCwgZXZlbiBpZiB0aGVyZSdzIG5vIGV2ZW50IGxpc3RlbmVyIGF0dGFjaGVkLgogICAgICAgICAgV29ybGRfc3RlcF9jb2xsaWRlRXZlbnQuYm9keSA9IGJqOwogICAgICAgICAgV29ybGRfc3RlcF9jb2xsaWRlRXZlbnQuY29udGFjdCA9IGM7CiAgICAgICAgICBiaS5kaXNwYXRjaEV2ZW50KFdvcmxkX3N0ZXBfY29sbGlkZUV2ZW50KTsKICAgICAgICAgIFdvcmxkX3N0ZXBfY29sbGlkZUV2ZW50LmJvZHkgPSBiaTsKICAgICAgICAgIGJqLmRpc3BhdGNoRXZlbnQoV29ybGRfc3RlcF9jb2xsaWRlRXZlbnQpOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5ib2R5T3ZlcmxhcEtlZXBlci5zZXQoYmkuaWQsIGJqLmlkKTsKICAgICAgICB0aGlzLnNoYXBlT3ZlcmxhcEtlZXBlci5zZXQoc2kuaWQsIHNqLmlkKTsKICAgICAgfQoKICAgICAgdGhpcy5lbWl0Q29udGFjdEV2ZW50cygpOwoKICAgICAgaWYgKGRvUHJvZmlsaW5nKSB7CiAgICAgICAgcHJvZmlsZS5tYWtlQ29udGFjdENvbnN0cmFpbnRzID0gcGVyZm9ybWFuY2UkMS5ub3coKSAtIHByb2ZpbGluZ1N0YXJ0OwogICAgICAgIHByb2ZpbGluZ1N0YXJ0ID0gcGVyZm9ybWFuY2UkMS5ub3coKTsKICAgICAgfSAvLyBXYWtlIHVwIGJvZGllcwoKCiAgICAgIGZvciAoaSA9IDA7IGkgIT09IE47IGkrKykgewogICAgICAgIGNvbnN0IGJpID0gYm9kaWVzW2ldOwoKICAgICAgICBpZiAoYmkud2FrZVVwQWZ0ZXJOYXJyb3dwaGFzZSkgewogICAgICAgICAgYmkud2FrZVVwKCk7CiAgICAgICAgICBiaS53YWtlVXBBZnRlck5hcnJvd3BoYXNlID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9IC8vIEFkZCB1c2VyLWFkZGVkIGNvbnN0cmFpbnRzCgoKICAgICAgTmNvbnN0cmFpbnRzID0gY29uc3RyYWludHMubGVuZ3RoOwoKICAgICAgZm9yIChpID0gMDsgaSAhPT0gTmNvbnN0cmFpbnRzOyBpKyspIHsKICAgICAgICBjb25zdCBjID0gY29uc3RyYWludHNbaV07CiAgICAgICAgYy51cGRhdGUoKTsKCiAgICAgICAgZm9yIChsZXQgaiA9IDAsIE5lcSA9IGMuZXF1YXRpb25zLmxlbmd0aDsgaiAhPT0gTmVxOyBqKyspIHsKICAgICAgICAgIGNvbnN0IGVxID0gYy5lcXVhdGlvbnNbal07CiAgICAgICAgICBzb2x2ZXIuYWRkRXF1YXRpb24oZXEpOwogICAgICAgIH0KICAgICAgfSAvLyBTb2x2ZSB0aGUgY29uc3RyYWluZWQgc3lzdGVtCgoKICAgICAgc29sdmVyLnNvbHZlKGR0LCB0aGlzKTsKCiAgICAgIGlmIChkb1Byb2ZpbGluZykgewogICAgICAgIHByb2ZpbGUuc29sdmUgPSBwZXJmb3JtYW5jZSQxLm5vdygpIC0gcHJvZmlsaW5nU3RhcnQ7CiAgICAgIH0gLy8gUmVtb3ZlIGFsbCBjb250YWN0cyBmcm9tIHNvbHZlcgoKCiAgICAgIHNvbHZlci5yZW1vdmVBbGxFcXVhdGlvbnMoKTsgLy8gQXBwbHkgZGFtcGluZywgc2VlIGh0dHA6Ly9jb2RlLmdvb2dsZS5jb20vcC9idWxsZXQvaXNzdWVzL2RldGFpbD9pZD03NCBmb3IgZGV0YWlscwoKICAgICAgY29uc3QgcG93ID0gTWF0aC5wb3c7CgogICAgICBmb3IgKGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBjb25zdCBiaSA9IGJvZGllc1tpXTsKCiAgICAgICAgaWYgKGJpLnR5cGUgJiBEWU5BTUlDKSB7CiAgICAgICAgICAvLyBPbmx5IGZvciBkeW5hbWljIGJvZGllcwogICAgICAgICAgY29uc3QgbGQgPSBwb3coMS4wIC0gYmkubGluZWFyRGFtcGluZywgZHQpOwogICAgICAgICAgY29uc3QgdiA9IGJpLnZlbG9jaXR5OwogICAgICAgICAgdi5zY2FsZShsZCwgdik7CiAgICAgICAgICBjb25zdCBhdiA9IGJpLmFuZ3VsYXJWZWxvY2l0eTsKCiAgICAgICAgICBpZiAoYXYpIHsKICAgICAgICAgICAgY29uc3QgYWQgPSBwb3coMS4wIC0gYmkuYW5ndWxhckRhbXBpbmcsIGR0KTsKICAgICAgICAgICAgYXYuc2NhbGUoYWQsIGF2KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChXb3JsZF9zdGVwX3ByZVN0ZXBFdmVudCk7IC8vIEludm9rZSBwcmUtc3RlcCBjYWxsYmFja3MKCiAgICAgIGZvciAoaSA9IDA7IGkgIT09IE47IGkrKykgewogICAgICAgIGNvbnN0IGJpID0gYm9kaWVzW2ldOwoKICAgICAgICBpZiAoYmkucHJlU3RlcCkgewogICAgICAgICAgYmkucHJlU3RlcC5jYWxsKGJpKTsKICAgICAgICB9CiAgICAgIH0gLy8gTGVhcCBmcm9nCiAgICAgIC8vIHZuZXcgPSB2ICsgaCpmL20KICAgICAgLy8geG5ldyA9IHggKyBoKnZuZXcKCgogICAgICBpZiAoZG9Qcm9maWxpbmcpIHsKICAgICAgICBwcm9maWxpbmdTdGFydCA9IHBlcmZvcm1hbmNlJDEubm93KCk7CiAgICAgIH0KCiAgICAgIGNvbnN0IHN0ZXBudW1iZXIgPSB0aGlzLnN0ZXBudW1iZXI7CiAgICAgIGNvbnN0IHF1YXROb3JtYWxpemUgPSBzdGVwbnVtYmVyICUgKHRoaXMucXVhdE5vcm1hbGl6ZVNraXAgKyAxKSA9PT0gMDsKICAgICAgY29uc3QgcXVhdE5vcm1hbGl6ZUZhc3QgPSB0aGlzLnF1YXROb3JtYWxpemVGYXN0OwoKICAgICAgZm9yIChpID0gMDsgaSAhPT0gTjsgaSsrKSB7CiAgICAgICAgYm9kaWVzW2ldLmludGVncmF0ZShkdCwgcXVhdE5vcm1hbGl6ZSwgcXVhdE5vcm1hbGl6ZUZhc3QpOwogICAgICB9CgogICAgICB0aGlzLmNsZWFyRm9yY2VzKCk7CiAgICAgIHRoaXMuYnJvYWRwaGFzZS5kaXJ0eSA9IHRydWU7CgogICAgICBpZiAoZG9Qcm9maWxpbmcpIHsKICAgICAgICBwcm9maWxlLmludGVncmF0ZSA9IHBlcmZvcm1hbmNlJDEubm93KCkgLSBwcm9maWxpbmdTdGFydDsKICAgICAgfSAvLyBVcGRhdGUgc3RlcCBudW1iZXIKCgogICAgICB0aGlzLnN0ZXBudW1iZXIgKz0gMTsKICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KFdvcmxkX3N0ZXBfcG9zdFN0ZXBFdmVudCk7IC8vIEludm9rZSBwb3N0LXN0ZXAgY2FsbGJhY2tzCgogICAgICBmb3IgKGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBjb25zdCBiaSA9IGJvZGllc1tpXTsKICAgICAgICBjb25zdCBwb3N0U3RlcCA9IGJpLnBvc3RTdGVwOwoKICAgICAgICBpZiAocG9zdFN0ZXApIHsKICAgICAgICAgIHBvc3RTdGVwLmNhbGwoYmkpOwogICAgICAgIH0KICAgICAgfSAvLyBTbGVlcGluZyB1cGRhdGUKCgogICAgICBsZXQgaGFzQWN0aXZlQm9kaWVzID0gdHJ1ZTsKCiAgICAgIGlmICh0aGlzLmFsbG93U2xlZXApIHsKICAgICAgICBoYXNBY3RpdmVCb2RpZXMgPSBmYWxzZTsKCiAgICAgICAgZm9yIChpID0gMDsgaSAhPT0gTjsgaSsrKSB7CiAgICAgICAgICBjb25zdCBiaSA9IGJvZGllc1tpXTsKICAgICAgICAgIGJpLnNsZWVwVGljayh0aGlzLnRpbWUpOwoKICAgICAgICAgIGlmIChiaS5zbGVlcFN0YXRlICE9PSBCb2R5LlNMRUVQSU5HKSB7CiAgICAgICAgICAgIGhhc0FjdGl2ZUJvZGllcyA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLmhhc0FjdGl2ZUJvZGllcyA9IGhhc0FjdGl2ZUJvZGllczsKICAgIH0KCiAgICBlbWl0Q29udGFjdEV2ZW50cygpIHsKICAgICAgY29uc3QgaGFzQmVnaW5Db250YWN0ID0gdGhpcy5oYXNBbnlFdmVudExpc3RlbmVyKCdiZWdpbkNvbnRhY3QnKTsKICAgICAgY29uc3QgaGFzRW5kQ29udGFjdCA9IHRoaXMuaGFzQW55RXZlbnRMaXN0ZW5lcignZW5kQ29udGFjdCcpOwoKICAgICAgaWYgKGhhc0JlZ2luQ29udGFjdCB8fCBoYXNFbmRDb250YWN0KSB7CiAgICAgICAgdGhpcy5ib2R5T3ZlcmxhcEtlZXBlci5nZXREaWZmKGFkZGl0aW9ucywgcmVtb3ZhbHMpOwogICAgICB9CgogICAgICBpZiAoaGFzQmVnaW5Db250YWN0KSB7CiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGwgPSBhZGRpdGlvbnMubGVuZ3RoOyBpIDwgbDsgaSArPSAyKSB7CiAgICAgICAgICBiZWdpbkNvbnRhY3RFdmVudC5ib2R5QSA9IHRoaXMuZ2V0Qm9keUJ5SWQoYWRkaXRpb25zW2ldKTsKICAgICAgICAgIGJlZ2luQ29udGFjdEV2ZW50LmJvZHlCID0gdGhpcy5nZXRCb2R5QnlJZChhZGRpdGlvbnNbaSArIDFdKTsKICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChiZWdpbkNvbnRhY3RFdmVudCk7CiAgICAgICAgfQoKICAgICAgICBiZWdpbkNvbnRhY3RFdmVudC5ib2R5QSA9IGJlZ2luQ29udGFjdEV2ZW50LmJvZHlCID0gbnVsbDsKICAgICAgfQoKICAgICAgaWYgKGhhc0VuZENvbnRhY3QpIHsKICAgICAgICBmb3IgKGxldCBpID0gMCwgbCA9IHJlbW92YWxzLmxlbmd0aDsgaSA8IGw7IGkgKz0gMikgewogICAgICAgICAgZW5kQ29udGFjdEV2ZW50LmJvZHlBID0gdGhpcy5nZXRCb2R5QnlJZChyZW1vdmFsc1tpXSk7CiAgICAgICAgICBlbmRDb250YWN0RXZlbnQuYm9keUIgPSB0aGlzLmdldEJvZHlCeUlkKHJlbW92YWxzW2kgKyAxXSk7CiAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZW5kQ29udGFjdEV2ZW50KTsKICAgICAgICB9CgogICAgICAgIGVuZENvbnRhY3RFdmVudC5ib2R5QSA9IGVuZENvbnRhY3RFdmVudC5ib2R5QiA9IG51bGw7CiAgICAgIH0KCiAgICAgIGFkZGl0aW9ucy5sZW5ndGggPSByZW1vdmFscy5sZW5ndGggPSAwOwogICAgICBjb25zdCBoYXNCZWdpblNoYXBlQ29udGFjdCA9IHRoaXMuaGFzQW55RXZlbnRMaXN0ZW5lcignYmVnaW5TaGFwZUNvbnRhY3QnKTsKICAgICAgY29uc3QgaGFzRW5kU2hhcGVDb250YWN0ID0gdGhpcy5oYXNBbnlFdmVudExpc3RlbmVyKCdlbmRTaGFwZUNvbnRhY3QnKTsKCiAgICAgIGlmIChoYXNCZWdpblNoYXBlQ29udGFjdCB8fCBoYXNFbmRTaGFwZUNvbnRhY3QpIHsKICAgICAgICB0aGlzLnNoYXBlT3ZlcmxhcEtlZXBlci5nZXREaWZmKGFkZGl0aW9ucywgcmVtb3ZhbHMpOwogICAgICB9CgogICAgICBpZiAoaGFzQmVnaW5TaGFwZUNvbnRhY3QpIHsKICAgICAgICBmb3IgKGxldCBpID0gMCwgbCA9IGFkZGl0aW9ucy5sZW5ndGg7IGkgPCBsOyBpICs9IDIpIHsKICAgICAgICAgIGNvbnN0IHNoYXBlQSA9IHRoaXMuZ2V0U2hhcGVCeUlkKGFkZGl0aW9uc1tpXSk7CiAgICAgICAgICBjb25zdCBzaGFwZUIgPSB0aGlzLmdldFNoYXBlQnlJZChhZGRpdGlvbnNbaSArIDFdKTsKICAgICAgICAgIGJlZ2luU2hhcGVDb250YWN0RXZlbnQuc2hhcGVBID0gc2hhcGVBOwogICAgICAgICAgYmVnaW5TaGFwZUNvbnRhY3RFdmVudC5zaGFwZUIgPSBzaGFwZUI7CiAgICAgICAgICBpZiAoc2hhcGVBKSBiZWdpblNoYXBlQ29udGFjdEV2ZW50LmJvZHlBID0gc2hhcGVBLmJvZHk7CiAgICAgICAgICBpZiAoc2hhcGVCKSBiZWdpblNoYXBlQ29udGFjdEV2ZW50LmJvZHlCID0gc2hhcGVCLmJvZHk7CiAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoYmVnaW5TaGFwZUNvbnRhY3RFdmVudCk7CiAgICAgICAgfQoKICAgICAgICBiZWdpblNoYXBlQ29udGFjdEV2ZW50LmJvZHlBID0gYmVnaW5TaGFwZUNvbnRhY3RFdmVudC5ib2R5QiA9IGJlZ2luU2hhcGVDb250YWN0RXZlbnQuc2hhcGVBID0gYmVnaW5TaGFwZUNvbnRhY3RFdmVudC5zaGFwZUIgPSBudWxsOwogICAgICB9CgogICAgICBpZiAoaGFzRW5kU2hhcGVDb250YWN0KSB7CiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGwgPSByZW1vdmFscy5sZW5ndGg7IGkgPCBsOyBpICs9IDIpIHsKICAgICAgICAgIGNvbnN0IHNoYXBlQSA9IHRoaXMuZ2V0U2hhcGVCeUlkKHJlbW92YWxzW2ldKTsKICAgICAgICAgIGNvbnN0IHNoYXBlQiA9IHRoaXMuZ2V0U2hhcGVCeUlkKHJlbW92YWxzW2kgKyAxXSk7CiAgICAgICAgICBlbmRTaGFwZUNvbnRhY3RFdmVudC5zaGFwZUEgPSBzaGFwZUE7CiAgICAgICAgICBlbmRTaGFwZUNvbnRhY3RFdmVudC5zaGFwZUIgPSBzaGFwZUI7CiAgICAgICAgICBpZiAoc2hhcGVBKSBlbmRTaGFwZUNvbnRhY3RFdmVudC5ib2R5QSA9IHNoYXBlQS5ib2R5OwogICAgICAgICAgaWYgKHNoYXBlQikgZW5kU2hhcGVDb250YWN0RXZlbnQuYm9keUIgPSBzaGFwZUIuYm9keTsKICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChlbmRTaGFwZUNvbnRhY3RFdmVudCk7CiAgICAgICAgfQoKICAgICAgICBlbmRTaGFwZUNvbnRhY3RFdmVudC5ib2R5QSA9IGVuZFNoYXBlQ29udGFjdEV2ZW50LmJvZHlCID0gZW5kU2hhcGVDb250YWN0RXZlbnQuc2hhcGVBID0gZW5kU2hhcGVDb250YWN0RXZlbnQuc2hhcGVCID0gbnVsbDsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBTZXRzIGFsbCBib2R5IGZvcmNlcyBpbiB0aGUgd29ybGQgdG8gemVyby4KICAgICAqLwoKCiAgICBjbGVhckZvcmNlcygpIHsKICAgICAgY29uc3QgYm9kaWVzID0gdGhpcy5ib2RpZXM7CiAgICAgIGNvbnN0IE4gPSBib2RpZXMubGVuZ3RoOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE47IGkrKykgewogICAgICAgIGNvbnN0IGIgPSBib2RpZXNbaV07CiAgICAgICAgYi5mb3JjZTsKICAgICAgICBiLnRvcnF1ZTsKICAgICAgICBiLmZvcmNlLnNldCgwLCAwLCAwKTsKICAgICAgICBiLnRvcnF1ZS5zZXQoMCwgMCwgMCk7CiAgICAgIH0KICAgIH0KCiAgfSAvLyBUZW1wIHN0dWZmCgoKICBuZXcgQUFCQigpOwogIGNvbnN0IHRtcFJheSA9IG5ldyBSYXkoKTsgLy8gcGVyZm9ybWFuY2Uubm93KCkgZmFsbGJhY2sgb24gRGF0ZS5ub3coKQoKICBjb25zdCBwZXJmb3JtYW5jZSQxID0gZ2xvYmFsVGhpcy5wZXJmb3JtYW5jZSB8fCB7fTsKCiAgaWYgKCFwZXJmb3JtYW5jZSQxLm5vdykgewogICAgbGV0IG5vd09mZnNldCA9IERhdGUubm93KCk7CgogICAgaWYgKHBlcmZvcm1hbmNlJDEudGltaW5nICYmIHBlcmZvcm1hbmNlJDEudGltaW5nLm5hdmlnYXRpb25TdGFydCkgewogICAgICBub3dPZmZzZXQgPSBwZXJmb3JtYW5jZSQxLnRpbWluZy5uYXZpZ2F0aW9uU3RhcnQ7CiAgICB9CgogICAgcGVyZm9ybWFuY2UkMS5ub3cgPSAoKSA9PiBEYXRlLm5vdygpIC0gbm93T2Zmc2V0OwogIH0gLy8gUmV1c2FibGUgZXZlbnQgb2JqZWN0cyB0byBzYXZlIG1lbW9yeS4KCgogIGNvbnN0IFdvcmxkX3N0ZXBfcG9zdFN0ZXBFdmVudCA9IHsKICAgIHR5cGU6ICdwb3N0U3RlcCcKICB9OyAvLyBEaXNwYXRjaGVkIGJlZm9yZSB0aGUgd29ybGQgc3RlcHMgZm9yd2FyZCBpbiB0aW1lLgoKICBjb25zdCBXb3JsZF9zdGVwX3ByZVN0ZXBFdmVudCA9IHsKICAgIHR5cGU6ICdwcmVTdGVwJwogIH07CiAgY29uc3QgV29ybGRfc3RlcF9jb2xsaWRlRXZlbnQgPSB7CiAgICB0eXBlOiBCb2R5LkNPTExJREVfRVZFTlRfTkFNRSwKICAgIGJvZHk6IG51bGwsCiAgICBjb250YWN0OiBudWxsCiAgfTsgLy8gUG9vbHMgZm9yIHVudXNlZCBvYmplY3RzCgogIGNvbnN0IFdvcmxkX3N0ZXBfb2xkQ29udGFjdHMgPSBbXTsKICBjb25zdCBXb3JsZF9zdGVwX2ZyaWN0aW9uRXF1YXRpb25Qb29sID0gW107IC8vIFJldXNhYmxlIGFycmF5cyBmb3IgY29sbGlzaW9uIHBhaXJzCgogIGNvbnN0IFdvcmxkX3N0ZXBfcDEgPSBbXTsKICBjb25zdCBXb3JsZF9zdGVwX3AyID0gW107IC8vIFN0dWZmIGZvciBlbWl0Q29udGFjdEV2ZW50cwoKICBjb25zdCBhZGRpdGlvbnMgPSBbXTsKICBjb25zdCByZW1vdmFscyA9IFtdOwogIGNvbnN0IGJlZ2luQ29udGFjdEV2ZW50ID0gewogICAgdHlwZTogJ2JlZ2luQ29udGFjdCcsCiAgICBib2R5QTogbnVsbCwKICAgIGJvZHlCOiBudWxsCiAgfTsKICBjb25zdCBlbmRDb250YWN0RXZlbnQgPSB7CiAgICB0eXBlOiAnZW5kQ29udGFjdCcsCiAgICBib2R5QTogbnVsbCwKICAgIGJvZHlCOiBudWxsCiAgfTsKICBjb25zdCBiZWdpblNoYXBlQ29udGFjdEV2ZW50ID0gewogICAgdHlwZTogJ2JlZ2luU2hhcGVDb250YWN0JywKICAgIGJvZHlBOiBudWxsLAogICAgYm9keUI6IG51bGwsCiAgICBzaGFwZUE6IG51bGwsCiAgICBzaGFwZUI6IG51bGwKICB9OwogIGNvbnN0IGVuZFNoYXBlQ29udGFjdEV2ZW50ID0gewogICAgdHlwZTogJ2VuZFNoYXBlQ29udGFjdCcsCiAgICBib2R5QTogbnVsbCwKICAgIGJvZHlCOiBudWxsLAogICAgc2hhcGVBOiBudWxsLAogICAgc2hhcGVCOiBudWxsCiAgfTsKCiAgY29uc3QgbWFrZVZlYzMgPSAoW3gsIHksIHpdKSA9PiBuZXcgVmVjMyh4LCB5LCB6KTsKCiAgY29uc3QgcHJlcGFyZVNwaGVyZSA9IGFyZ3MgPT4gQXJyYXkuaXNBcnJheShhcmdzKSA/IGFyZ3MgOiBbYXJnc107CgogIGNvbnN0IHByZXBhcmVDb252ZXhQb2x5aGVkcm9uID0gKFt2LCBmYWNlcywgbiwgYSwgYm91bmRpbmdTcGhlcmVSYWRpdXNdKSA9PiBbewogICAgdmVydGljZXM6IHYgPyB2Lm1hcChtYWtlVmVjMykgOiB1bmRlZmluZWQsCiAgICBmYWNlcywKICAgIG5vcm1hbHM6IG4gPyBuLm1hcChtYWtlVmVjMykgOiB1bmRlZmluZWQsCiAgICBheGVzOiBhID8gYS5tYXAobWFrZVZlYzMpIDogdW5kZWZpbmVkLAogICAgYm91bmRpbmdTcGhlcmVSYWRpdXMKICB9XTsKCiAgZnVuY3Rpb24gY3JlYXRlU2hhcGUodHlwZSwgYXJncykgewogICAgc3dpdGNoICh0eXBlKSB7CiAgICAgIGNhc2UgJ0JveCc6CiAgICAgICAgcmV0dXJuIG5ldyBCb3gobmV3IFZlYzMoLi4uYXJncy5tYXAodiA9PiB2IC8gMikpKTsKICAgICAgLy8gZXh0ZW50cyA9PiBoYWxmRXh0ZW50cwoKICAgICAgY2FzZSAnQ29udmV4UG9seWhlZHJvbic6CiAgICAgICAgcmV0dXJuIG5ldyBDb252ZXhQb2x5aGVkcm9uKC4uLnByZXBhcmVDb252ZXhQb2x5aGVkcm9uKGFyZ3MpKTsKCiAgICAgIGNhc2UgJ0N5bGluZGVyJzoKICAgICAgICByZXR1cm4gbmV3IEN5bGluZGVyKC4uLmFyZ3MpOwogICAgICAvLyBbIHJhZGl1c1RvcCwgcmFkaXVzQm90dG9tLCBoZWlnaHQsIG51bVNlZ21lbnRzIF0gPSBhcmdzCgogICAgICBjYXNlICdIZWlnaHRmaWVsZCc6CiAgICAgICAgcmV0dXJuIG5ldyBIZWlnaHRmaWVsZCguLi5hcmdzKTsKICAgICAgLy8gWyBBcnJheSBkYXRhLCBvcHRpb25zOiB7bWluVmFsdWUsIG1heFZhbHVlLCBlbGVtZW50U2l6ZX0gIF0gPSBhcmdzCgogICAgICBjYXNlICdQYXJ0aWNsZSc6CiAgICAgICAgcmV0dXJuIG5ldyBQYXJ0aWNsZSgpOwogICAgICAvLyBubyBhcmdzCgogICAgICBjYXNlICdQbGFuZSc6CiAgICAgICAgcmV0dXJuIG5ldyBQbGFuZSgpOwogICAgICAvLyBubyBhcmdzLCBpbmZpbml0ZSB4IGFuZCB5CgogICAgICBjYXNlICdTcGhlcmUnOgogICAgICAgIHJldHVybiBuZXcgU3BoZXJlKC4uLnByZXBhcmVTcGhlcmUoYXJncykpOwogICAgICAvLyByYWRpdXMgPSBhcmdzCgogICAgICBjYXNlICdUcmltZXNoJzoKICAgICAgICByZXR1cm4gbmV3IFRyaW1lc2goLi4uYXJncyk7CiAgICAgIC8vIFt2ZXJ0aWNlcywgaW5kaWNlc10gPSBhcmdzCiAgICB9CiAgfQogIC8qKgogICAqCiAgICogQHBhcmFtIHV1aWQge3N0cmluZ30KICAgKiBAcGFyYW0gcHJvcHMge0JvZHlQcm9wc30KICAgKiBAcGFyYW0gdHlwZSB7Qm9keVNoYXBlVHlwZX0KICAgKiBAcmV0dXJuIHttb2R1bGU6b2JqZWN0cy9Cb2R5LkJvZHl9CiAgICovCgoKICBjb25zdCBwcm9wc1RvQm9keSA9ICh1dWlkLCBwcm9wcywgdHlwZSkgPT4gewogICAgY29uc3QgewogICAgICBhcmdzID0gW10sCiAgICAgIHBvc2l0aW9uID0gWzAsIDAsIDBdLAogICAgICByb3RhdGlvbiA9IFswLCAwLCAwXSwKICAgICAgdmVsb2NpdHkgPSBbMCwgMCwgMF0sCiAgICAgIGFuZ3VsYXJWZWxvY2l0eSA9IFswLCAwLCAwXSwKICAgICAgbGluZWFyRmFjdG9yID0gWzEsIDEsIDFdLAogICAgICBhbmd1bGFyRmFjdG9yID0gWzEsIDEsIDFdLAogICAgICB0eXBlOiBib2R5VHlwZSwKICAgICAgbWFzcywKICAgICAgbWF0ZXJpYWwsCiAgICAgIHNoYXBlcywKICAgICAgb25Db2xsaWRlLAogICAgICBjb2xsaXNpb25SZXNwb25zZSwKICAgICAgLi4uZXh0cmEKICAgIH0gPSBwcm9wczsKICAgIGNvbnN0IGJvZHkgPSBuZXcgQm9keSh7IC4uLmV4dHJhLAogICAgICBtYXNzOiBib2R5VHlwZSA9PT0gJ1N0YXRpYycgPyAwIDogbWFzcywKICAgICAgdHlwZTogYm9keVR5cGUgPyBCb2R5W2JvZHlUeXBlLnRvVXBwZXJDYXNlKCldIDogdW5kZWZpbmVkLAogICAgICBtYXRlcmlhbDogbWF0ZXJpYWwgPyBuZXcgTWF0ZXJpYWwobWF0ZXJpYWwpIDogdW5kZWZpbmVkCiAgICB9KTsKICAgIGJvZHkudXVpZCA9IHV1aWQ7CgogICAgaWYgKGNvbGxpc2lvblJlc3BvbnNlICE9PSB1bmRlZmluZWQpIHsKICAgICAgYm9keS5jb2xsaXNpb25SZXNwb25zZSA9IGNvbGxpc2lvblJlc3BvbnNlOwogICAgfQoKICAgIGlmICh0eXBlID09PSAnQ29tcG91bmQnKSB7CiAgICAgIHNoYXBlcy5mb3JFYWNoKCh7CiAgICAgICAgdHlwZSwKICAgICAgICBhcmdzLAogICAgICAgIHBvc2l0aW9uLAogICAgICAgIHJvdGF0aW9uLAogICAgICAgIG1hdGVyaWFsLAogICAgICAgIC4uLmV4dHJhCiAgICAgIH0pID0+IHsKICAgICAgICBjb25zdCBzaGFwZUJvZHkgPSBib2R5LmFkZFNoYXBlKGNyZWF0ZVNoYXBlKHR5cGUsIGFyZ3MpLCBwb3NpdGlvbiA/IG5ldyBWZWMzKC4uLnBvc2l0aW9uKSA6IHVuZGVmaW5lZCwgcm90YXRpb24gPyBuZXcgUXVhdGVybmlvbigpLnNldEZyb21FdWxlciguLi5yb3RhdGlvbikgOiB1bmRlZmluZWQpOwogICAgICAgIGlmIChtYXRlcmlhbCkgc2hhcGVCb2R5Lm1hdGVyaWFsID0gbmV3IE1hdGVyaWFsKG1hdGVyaWFsKTsKICAgICAgICBPYmplY3QuYXNzaWduKHNoYXBlQm9keSwgZXh0cmEpOwogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIGJvZHkuYWRkU2hhcGUoY3JlYXRlU2hhcGUodHlwZSwgYXJncykpOwogICAgfQoKICAgIGJvZHkucG9zaXRpb24uc2V0KHBvc2l0aW9uWzBdLCBwb3NpdGlvblsxXSwgcG9zaXRpb25bMl0pOwogICAgYm9keS5xdWF0ZXJuaW9uLnNldEZyb21FdWxlcihyb3RhdGlvblswXSwgcm90YXRpb25bMV0sIHJvdGF0aW9uWzJdKTsKICAgIGJvZHkudmVsb2NpdHkuc2V0KHZlbG9jaXR5WzBdLCB2ZWxvY2l0eVsxXSwgdmVsb2NpdHlbMl0pOwogICAgYm9keS5hbmd1bGFyVmVsb2NpdHkuc2V0KGFuZ3VsYXJWZWxvY2l0eVswXSwgYW5ndWxhclZlbG9jaXR5WzFdLCBhbmd1bGFyVmVsb2NpdHlbMl0pOwogICAgYm9keS5saW5lYXJGYWN0b3Iuc2V0KGxpbmVhckZhY3RvclswXSwgbGluZWFyRmFjdG9yWzFdLCBsaW5lYXJGYWN0b3JbMl0pOwogICAgYm9keS5hbmd1bGFyRmFjdG9yLnNldChhbmd1bGFyRmFjdG9yWzBdLCBhbmd1bGFyRmFjdG9yWzFdLCBhbmd1bGFyRmFjdG9yWzJdKTsKICAgIHJldHVybiBib2R5OwogIH07CgogIGNvbnN0IHN0YXRlID0gewogICAgYm9kaWVzOiB7fSwKICAgIHZlaGljbGVzOiB7fSwKICAgIHNwcmluZ3M6IHt9LAogICAgc3ByaW5nSW5zdGFuY2VzOiB7fSwKICAgIHJheXM6IHt9LAogICAgd29ybGQ6IG5ldyBXb3JsZCgpLAogICAgY29uZmlnOiB7CiAgICAgIHN0ZXA6IDEgLyA2MAogICAgfSwKICAgIHN1YnNjcmlwdGlvbnM6IHt9LAogICAgdGVtcFZlY3RvcjogbmV3IFZlYzMoKSwKICAgIGJvZGllc05lZWRTeW5jaW5nOiBmYWxzZSwKICAgIGxhc3RDYWxsVGltZTogdW5kZWZpbmVkCiAgfTsKCiAgZnVuY3Rpb24gc3luY0JvZGllcygpIHsKICAgIHN0YXRlLmJvZGllc05lZWRTeW5jaW5nID0gdHJ1ZTsKICAgIHN0YXRlLmJvZGllcyA9IHN0YXRlLndvcmxkLmJvZGllcy5yZWR1Y2UoKGFjYywgYm9keSkgPT4gKHsgLi4uYWNjLAogICAgICBbYm9keS51dWlkXTogYm9keQogICAgfSksIHt9KTsKICB9CgogIGZ1bmN0aW9uIGVtaXRCZWdpbkNvbnRhY3QoewogICAgYm9keUEsCiAgICBib2R5QgogIH0pIHsKICAgIGlmICghYm9keUEgfHwgIWJvZHlCKSByZXR1cm47CiAgICBzZWxmLnBvc3RNZXNzYWdlKHsKICAgICAgb3A6ICdldmVudCcsCiAgICAgIHR5cGU6ICdjb2xsaWRlQmVnaW4nLAogICAgICBib2R5QTogYm9keUEudXVpZCwKICAgICAgYm9keUI6IGJvZHlCLnV1aWQKICAgIH0pOwogIH0KCiAgZnVuY3Rpb24gZW1pdEVuZENvbnRhY3QoewogICAgYm9keUEsCiAgICBib2R5QgogIH0pIHsKICAgIGlmICghYm9keUEgfHwgIWJvZHlCKSByZXR1cm47CiAgICBzZWxmLnBvc3RNZXNzYWdlKHsKICAgICAgb3A6ICdldmVudCcsCiAgICAgIHR5cGU6ICdjb2xsaWRlRW5kJywKICAgICAgYm9keUE6IGJvZHlBLnV1aWQsCiAgICAgIGJvZHlCOiBib2R5Qi51dWlkCiAgICB9KTsKICB9CgogIHNlbGYub25tZXNzYWdlID0gZSA9PiB7CiAgICBjb25zdCB7CiAgICAgIG9wLAogICAgICB1dWlkLAogICAgICB0eXBlLAogICAgICBwb3NpdGlvbnMsCiAgICAgIHF1YXRlcm5pb25zLAogICAgICBwcm9wcwogICAgfSA9IGUuZGF0YTsKICAgIGNvbnN0IGJyb2FkcGhhc2VzID0gewogICAgICBOYWl2ZUJyb2FkcGhhc2UsCiAgICAgIFNBUEJyb2FkcGhhc2UKICAgIH07CgogICAgc3dpdGNoIChvcCkgewogICAgICBjYXNlICdpbml0JzoKICAgICAgICB7CiAgICAgICAgICBjb25zdCB7CiAgICAgICAgICAgIGdyYXZpdHksCiAgICAgICAgICAgIHRvbGVyYW5jZSwKICAgICAgICAgICAgc3RlcCwKICAgICAgICAgICAgaXRlcmF0aW9ucywKICAgICAgICAgICAgYWxsb3dTbGVlcCwKICAgICAgICAgICAgYnJvYWRwaGFzZSwKICAgICAgICAgICAgYXhpc0luZGV4LAogICAgICAgICAgICBkZWZhdWx0Q29udGFjdE1hdGVyaWFsCiAgICAgICAgICB9ID0gcHJvcHM7CiAgICAgICAgICBzdGF0ZS53b3JsZC5hbGxvd1NsZWVwID0gYWxsb3dTbGVlcDsKICAgICAgICAgIHN0YXRlLndvcmxkLmdyYXZpdHkuc2V0KGdyYXZpdHlbMF0sIGdyYXZpdHlbMV0sIGdyYXZpdHlbMl0pOwogICAgICAgICAgc3RhdGUud29ybGQuc29sdmVyLnRvbGVyYW5jZSA9IHRvbGVyYW5jZTsKICAgICAgICAgIHN0YXRlLndvcmxkLnNvbHZlci5pdGVyYXRpb25zID0gaXRlcmF0aW9uczsKICAgICAgICAgIHN0YXRlLndvcmxkLmJyb2FkcGhhc2UgPSBuZXcgKGJyb2FkcGhhc2VzW2Jyb2FkcGhhc2UgKyAnQnJvYWRwaGFzZSddIHx8IE5haXZlQnJvYWRwaGFzZSkoc3RhdGUud29ybGQpOwogICAgICAgICAgc3RhdGUud29ybGQuYnJvYWRwaGFzZS5heGlzSW5kZXggPSBheGlzSW5kZXggPT09IHVuZGVmaW5lZCB8fCBheGlzSW5kZXggPT09IG51bGwgPyAwIDogYXhpc0luZGV4OwogICAgICAgICAgc3RhdGUud29ybGQuYWRkRXZlbnRMaXN0ZW5lcignYmVnaW5Db250YWN0JywgZW1pdEJlZ2luQ29udGFjdCk7CiAgICAgICAgICBzdGF0ZS53b3JsZC5hZGRFdmVudExpc3RlbmVyKCdlbmRDb250YWN0JywgZW1pdEVuZENvbnRhY3QpOwogICAgICAgICAgT2JqZWN0LmFzc2lnbihzdGF0ZS53b3JsZC5kZWZhdWx0Q29udGFjdE1hdGVyaWFsLCBkZWZhdWx0Q29udGFjdE1hdGVyaWFsKTsKICAgICAgICAgIHN0YXRlLmNvbmZpZy5zdGVwID0gc3RlcDsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgIGNhc2UgJ3N0ZXAnOgogICAgICAgIHsKICAgICAgICAgIGNvbnN0IG5vdyA9IHBlcmZvcm1hbmNlLm5vdygpIC8gMTAwMDsKCiAgICAgICAgICBpZiAoIXN0YXRlLmxhc3RDYWxsVGltZSkgewogICAgICAgICAgICBzdGF0ZS53b3JsZC5zdGVwKHN0YXRlLmNvbmZpZy5zdGVwKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNvbnN0IHRpbWVTaW5jZUxhc3RDYWxsID0gbm93IC0gc3RhdGUubGFzdENhbGxUaW1lOwogICAgICAgICAgICBzdGF0ZS53b3JsZC5zdGVwKHN0YXRlLmNvbmZpZy5zdGVwLCB0aW1lU2luY2VMYXN0Q2FsbCk7CiAgICAgICAgICB9CgogICAgICAgICAgc3RhdGUubGFzdENhbGxUaW1lID0gbm93OwogICAgICAgICAgY29uc3QgbnVtYmVyT2ZCb2RpZXMgPSBzdGF0ZS53b3JsZC5ib2RpZXMubGVuZ3RoOwoKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtYmVyT2ZCb2RpZXM7IGkrKykgewogICAgICAgICAgICBsZXQgYiA9IHN0YXRlLndvcmxkLmJvZGllc1tpXSwKICAgICAgICAgICAgICAgIHAgPSBiLnBvc2l0aW9uLAogICAgICAgICAgICAgICAgcSA9IGIucXVhdGVybmlvbjsKICAgICAgICAgICAgcG9zaXRpb25zWzMgKiBpICsgMF0gPSBwLng7CiAgICAgICAgICAgIHBvc2l0aW9uc1szICogaSArIDFdID0gcC55OwogICAgICAgICAgICBwb3NpdGlvbnNbMyAqIGkgKyAyXSA9IHAuejsKICAgICAgICAgICAgcXVhdGVybmlvbnNbNCAqIGkgKyAwXSA9IHEueDsKICAgICAgICAgICAgcXVhdGVybmlvbnNbNCAqIGkgKyAxXSA9IHEueTsKICAgICAgICAgICAgcXVhdGVybmlvbnNbNCAqIGkgKyAyXSA9IHEuejsKICAgICAgICAgICAgcXVhdGVybmlvbnNbNCAqIGkgKyAzXSA9IHEudzsKICAgICAgICAgIH0KCiAgICAgICAgICBjb25zdCBvYnNlcnZhdGlvbnMgPSBbXTsKCiAgICAgICAgICBmb3IgKGNvbnN0IGlkIG9mIE9iamVjdC5rZXlzKHN0YXRlLnN1YnNjcmlwdGlvbnMpKSB7CiAgICAgICAgICAgIGxldCBbdXVpZCwgdHlwZSwgdGFyZ2V0ID0gJ2JvZGllcyddID0gc3RhdGUuc3Vic2NyaXB0aW9uc1tpZF07CiAgICAgICAgICAgIGxldCBvYmplY3QgPSBzdGF0ZVt0YXJnZXRdOwogICAgICAgICAgICBpZiAoIW9iamVjdCB8fCAhb2JqZWN0W3V1aWRdKSBjb250aW51ZTsKICAgICAgICAgICAgbGV0IHZhbHVlID0gb2JqZWN0W3V1aWRdW3R5cGVdOwogICAgICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBWZWMzKSB2YWx1ZSA9IHZhbHVlLnRvQXJyYXkoKTtlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIFF1YXRlcm5pb24pIHsKICAgICAgICAgICAgICB2YWx1ZS50b0V1bGVyKHN0YXRlLnRlbXBWZWN0b3IpOwogICAgICAgICAgICAgIHZhbHVlID0gc3RhdGUudGVtcFZlY3Rvci50b0FycmF5KCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgb2JzZXJ2YXRpb25zLnB1c2goW2lkLCB2YWx1ZV0pOwogICAgICAgICAgfQoKICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSB7CiAgICAgICAgICAgIG9wOiAnZnJhbWUnLAogICAgICAgICAgICBwb3NpdGlvbnMsCiAgICAgICAgICAgIHF1YXRlcm5pb25zLAogICAgICAgICAgICBvYnNlcnZhdGlvbnMsCiAgICAgICAgICAgIGFjdGl2ZTogc3RhdGUud29ybGQuaGFzQWN0aXZlQm9kaWVzCiAgICAgICAgICB9OwoKICAgICAgICAgIGlmIChzdGF0ZS5ib2RpZXNOZWVkU3luY2luZykgewogICAgICAgICAgICBtZXNzYWdlLmJvZGllcyA9IHN0YXRlLndvcmxkLmJvZGllcy5tYXAoYm9keSA9PiBib2R5LnV1aWQpOwogICAgICAgICAgICBzdGF0ZS5ib2RpZXNOZWVkU3luY2luZyA9IGZhbHNlOwogICAgICAgICAgfQoKICAgICAgICAgIHNlbGYucG9zdE1lc3NhZ2UobWVzc2FnZSwgW3Bvc2l0aW9ucy5idWZmZXIsIHF1YXRlcm5pb25zLmJ1ZmZlcl0pOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAnYWRkQm9kaWVzJzoKICAgICAgICB7CiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHV1aWQubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgY29uc3QgYm9keSA9IHByb3BzVG9Cb2R5KHV1aWRbaV0sIHByb3BzW2ldLCB0eXBlKTsKICAgICAgICAgICAgc3RhdGUud29ybGQuYWRkQm9keShib2R5KTsKICAgICAgICAgICAgaWYgKHByb3BzW2ldLm9uQ29sbGlkZSkgYm9keS5hZGRFdmVudExpc3RlbmVyKCdjb2xsaWRlJywgKHsKICAgICAgICAgICAgICB0eXBlLAogICAgICAgICAgICAgIGJvZHksCiAgICAgICAgICAgICAgdGFyZ2V0LAogICAgICAgICAgICAgIGNvbnRhY3QKICAgICAgICAgICAgfSkgPT4gewogICAgICAgICAgICAgIGNvbnN0IHsKICAgICAgICAgICAgICAgIG5pLAogICAgICAgICAgICAgICAgcmksCiAgICAgICAgICAgICAgICByaiwKICAgICAgICAgICAgICAgIGJpLAogICAgICAgICAgICAgICAgYmosCiAgICAgICAgICAgICAgICBpZAogICAgICAgICAgICAgIH0gPSBjb250YWN0OwogICAgICAgICAgICAgIGNvbnN0IGNvbnRhY3RQb2ludCA9IGJpLnBvc2l0aW9uLnZhZGQocmkpOwogICAgICAgICAgICAgIGNvbnN0IGNvbnRhY3ROb3JtYWwgPSBiaSA9PT0gYm9keSA/IG5pIDogbmkuc2NhbGUoLTEpOwogICAgICAgICAgICAgIHNlbGYucG9zdE1lc3NhZ2UoewogICAgICAgICAgICAgICAgb3A6ICdldmVudCcsCiAgICAgICAgICAgICAgICB0eXBlLAogICAgICAgICAgICAgICAgYm9keTogYm9keS51dWlkLAogICAgICAgICAgICAgICAgdGFyZ2V0OiB0YXJnZXQudXVpZCwKICAgICAgICAgICAgICAgIGNvbnRhY3Q6IHsKICAgICAgICAgICAgICAgICAgbmk6IG5pLnRvQXJyYXkoKSwKICAgICAgICAgICAgICAgICAgcmk6IHJpLnRvQXJyYXkoKSwKICAgICAgICAgICAgICAgICAgcmo6IHJqLnRvQXJyYXkoKSwKICAgICAgICAgICAgICAgICAgYmk6IGJpLnV1aWQsCiAgICAgICAgICAgICAgICAgIGJqOiBiai51dWlkLAogICAgICAgICAgICAgICAgICBpbXBhY3RWZWxvY2l0eTogY29udGFjdC5nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsKCksCiAgICAgICAgICAgICAgICAgIC8vIFdvcmxkIHBvc2l0aW9uIG9mIHRoZSBjb250YWN0CiAgICAgICAgICAgICAgICAgIGNvbnRhY3RQb2ludDogY29udGFjdFBvaW50LnRvQXJyYXkoKSwKICAgICAgICAgICAgICAgICAgLy8gTm9ybWFsIG9mIHRoZSBjb250YWN0LCByZWxhdGl2ZSB0byB0aGUgY29sbGlkaW5nIGJvZHkKICAgICAgICAgICAgICAgICAgY29udGFjdE5vcm1hbDogY29udGFjdE5vcm1hbC50b0FycmF5KCksCiAgICAgICAgICAgICAgICAgIGlkCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgY29sbGlzaW9uRmlsdGVyczogewogICAgICAgICAgICAgICAgICBib2R5RmlsdGVyR3JvdXA6IGJvZHkuY29sbGlzaW9uRmlsdGVyR3JvdXAsCiAgICAgICAgICAgICAgICAgIGJvZHlGaWx0ZXJNYXNrOiBib2R5LmNvbGxpc2lvbkZpbHRlck1hc2ssCiAgICAgICAgICAgICAgICAgIHRhcmdldEZpbHRlckdyb3VwOiB0YXJnZXQuY29sbGlzaW9uRmlsdGVyR3JvdXAsCiAgICAgICAgICAgICAgICAgIHRhcmdldEZpbHRlck1hc2s6IHRhcmdldC5jb2xsaXNpb25GaWx0ZXJNYXNrCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIHN5bmNCb2RpZXMoKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgIGNhc2UgJ3JlbW92ZUJvZGllcyc6CiAgICAgICAgewogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB1dWlkLmxlbmd0aDsgaSsrKSBzdGF0ZS53b3JsZC5yZW1vdmVCb2R5KHN0YXRlLmJvZGllc1t1dWlkW2ldXSk7CgogICAgICAgICAgc3luY0JvZGllcygpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAnc3Vic2NyaWJlJzoKICAgICAgICB7CiAgICAgICAgICBjb25zdCB7CiAgICAgICAgICAgIGlkLAogICAgICAgICAgICB0eXBlLAogICAgICAgICAgICB0YXJnZXQKICAgICAgICAgIH0gPSBwcm9wczsKICAgICAgICAgIHN0YXRlLnN1YnNjcmlwdGlvbnNbaWRdID0gW3V1aWQsIHR5cGUsIHRhcmdldF07CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICBjYXNlICd1bnN1YnNjcmliZSc6CiAgICAgICAgewogICAgICAgICAgZGVsZXRlIHN0YXRlLnN1YnNjcmlwdGlvbnNbcHJvcHNdOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAnc2V0UG9zaXRpb24nOgogICAgICAgIHN0YXRlLmJvZGllc1t1dWlkXS5wb3NpdGlvbi5zZXQocHJvcHNbMF0sIHByb3BzWzFdLCBwcm9wc1syXSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRRdWF0ZXJuaW9uJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbdXVpZF0ucXVhdGVybmlvbi5zZXRGcm9tRXVsZXIocHJvcHNbMF0sIHByb3BzWzFdLCBwcm9wc1syXSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRWZWxvY2l0eSc6CiAgICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLnZlbG9jaXR5LnNldChwcm9wc1swXSwgcHJvcHNbMV0sIHByb3BzWzJdKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldEFuZ3VsYXJWZWxvY2l0eSc6CiAgICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLmFuZ3VsYXJWZWxvY2l0eS5zZXQocHJvcHNbMF0sIHByb3BzWzFdLCBwcm9wc1syXSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRMaW5lYXJGYWN0b3InOgogICAgICAgIHN0YXRlLmJvZGllc1t1dWlkXS5saW5lYXJGYWN0b3Iuc2V0KHByb3BzWzBdLCBwcm9wc1sxXSwgcHJvcHNbMl0pOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0QW5ndWxhckZhY3Rvcic6CiAgICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLmFuZ3VsYXJGYWN0b3Iuc2V0KHByb3BzWzBdLCBwcm9wc1sxXSwgcHJvcHNbMl0pOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0TWFzcyc6CiAgICAgICAgLy8gYXNzdW1lIHRoYXQgYW4gdXBkYXRlIGZyb20gemVyby1tYXNzIGltcGxpZXMgYSBuZWVkIGZvciBkeW5hbWljcyBvbiBzdGF0aWMgb2JqLgogICAgICAgIGlmIChwcm9wcyAhPT0gMCAmJiBzdGF0ZS5ib2RpZXNbdXVpZF0udHlwZSA9PT0gMCkgc3RhdGUuYm9kaWVzW3V1aWRdLnR5cGUgPSAxOwogICAgICAgIHN0YXRlLmJvZGllc1t1dWlkXS5tYXNzID0gcHJvcHM7CiAgICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLnVwZGF0ZU1hc3NQcm9wZXJ0aWVzKCk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRMaW5lYXJEYW1waW5nJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbdXVpZF0ubGluZWFyRGFtcGluZyA9IHByb3BzOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0QW5ndWxhckRhbXBpbmcnOgogICAgICAgIHN0YXRlLmJvZGllc1t1dWlkXS5hbmd1bGFyRGFtcGluZyA9IHByb3BzOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0QWxsb3dTbGVlcCc6CiAgICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLmFsbG93U2xlZXAgPSBwcm9wczsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldFNsZWVwU3BlZWRMaW1pdCc6CiAgICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLnNsZWVwU3BlZWRMaW1pdCA9IHByb3BzOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0U2xlZXBUaW1lTGltaXQnOgogICAgICAgIHN0YXRlLmJvZGllc1t1dWlkXS5zbGVlcFRpbWVMaW1pdCA9IHByb3BzOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0Q29sbGlzaW9uRmlsdGVyR3JvdXAnOgogICAgICAgIHN0YXRlLmJvZGllc1t1dWlkXS5jb2xsaXNpb25GaWx0ZXJHcm91cCA9IHByb3BzOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0Q29sbGlzaW9uRmlsdGVyTWFzayc6CiAgICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLmNvbGxpc2lvbkZpbHRlck1hc2sgPSBwcm9wczsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldENvbGxpc2lvblJlc3BvbnNlJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbdXVpZF0uY29sbGlzaW9uUmVzcG9uc2UgPSBwcm9wczsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldEZpeGVkUm90YXRpb24nOgogICAgICAgIHN0YXRlLmJvZGllc1t1dWlkXS5maXhlZFJvdGF0aW9uID0gcHJvcHM7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRJc1RyaWdnZXInOgogICAgICAgIHN0YXRlLmJvZGllc1t1dWlkXS5pc1RyaWdnZXIgPSBwcm9wczsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldEdyYXZpdHknOgogICAgICAgIHN0YXRlLndvcmxkLmdyYXZpdHkuc2V0KHByb3BzWzBdLCBwcm9wc1sxXSwgcHJvcHNbMl0pOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0VG9sZXJhbmNlJzoKICAgICAgICBzdGF0ZS53b3JsZC5zb2x2ZXIudG9sZXJhbmNlID0gcHJvcHM7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRTdGVwJzoKICAgICAgICBzdGF0ZS5jb25maWcuc3RlcCA9IHByb3BzOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0SXRlcmF0aW9ucyc6CiAgICAgICAgc3RhdGUud29ybGQuc29sdmVyLml0ZXJhdGlvbnMgPSBwcm9wczsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldEJyb2FkcGhhc2UnOgogICAgICAgIHN0YXRlLndvcmxkLmJyb2FkcGhhc2UgPSBuZXcgKGJyb2FkcGhhc2VzW3Byb3BzICsgJ0Jyb2FkcGhhc2UnXSB8fCBOYWl2ZUJyb2FkcGhhc2UpKHN0YXRlLndvcmxkKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldEF4aXNJbmRleCc6CiAgICAgICAgc3RhdGUud29ybGQuYnJvYWRwaGFzZS5heGlzSW5kZXggPSBwcm9wcyA9PT0gdW5kZWZpbmVkIHx8IHByb3BzID09PSBudWxsID8gMCA6IHByb3BzOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnYXBwbHlGb3JjZSc6CiAgICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLmFwcGx5Rm9yY2UobmV3IFZlYzMoLi4ucHJvcHNbMF0pLCBuZXcgVmVjMyguLi5wcm9wc1sxXSkpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnYXBwbHlJbXB1bHNlJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbdXVpZF0uYXBwbHlJbXB1bHNlKG5ldyBWZWMzKC4uLnByb3BzWzBdKSwgbmV3IFZlYzMoLi4ucHJvcHNbMV0pKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ2FwcGx5TG9jYWxGb3JjZSc6CiAgICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLmFwcGx5TG9jYWxGb3JjZShuZXcgVmVjMyguLi5wcm9wc1swXSksIG5ldyBWZWMzKC4uLnByb3BzWzFdKSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdhcHBseUxvY2FsSW1wdWxzZSc6CiAgICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLmFwcGx5TG9jYWxJbXB1bHNlKG5ldyBWZWMzKC4uLnByb3BzWzBdKSwgbmV3IFZlYzMoLi4ucHJvcHNbMV0pKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ2FkZENvbnN0cmFpbnQnOgogICAgICAgIHsKICAgICAgICAgIGNvbnN0IFtib2R5QSwgYm9keUIsIG9wdG5zXSA9IHByb3BzOwogICAgICAgICAgbGV0IHsKICAgICAgICAgICAgcGl2b3RBLAogICAgICAgICAgICBwaXZvdEIsCiAgICAgICAgICAgIGF4aXNBLAogICAgICAgICAgICBheGlzQiwKICAgICAgICAgICAgLi4ub3B0aW9ucwogICAgICAgICAgfSA9IG9wdG5zOyAvLyBpcyB0aGVyZSBhIGJldHRlciB3YXkgdG8gZW5mb3JjZSBkZWZhdWx0cz8KCiAgICAgICAgICBwaXZvdEEgPSBBcnJheS5pc0FycmF5KHBpdm90QSkgPyBuZXcgVmVjMyguLi5waXZvdEEpIDogdW5kZWZpbmVkOwogICAgICAgICAgcGl2b3RCID0gQXJyYXkuaXNBcnJheShwaXZvdEIpID8gbmV3IFZlYzMoLi4ucGl2b3RCKSA6IHVuZGVmaW5lZDsKICAgICAgICAgIGF4aXNBID0gQXJyYXkuaXNBcnJheShheGlzQSkgPyBuZXcgVmVjMyguLi5heGlzQSkgOiB1bmRlZmluZWQ7CiAgICAgICAgICBheGlzQiA9IEFycmF5LmlzQXJyYXkoYXhpc0IpID8gbmV3IFZlYzMoLi4uYXhpc0IpIDogdW5kZWZpbmVkOwogICAgICAgICAgbGV0IGNvbnN0cmFpbnQ7CgogICAgICAgICAgc3dpdGNoICh0eXBlKSB7CiAgICAgICAgICAgIGNhc2UgJ1BvaW50VG9Qb2ludCc6CiAgICAgICAgICAgICAgY29uc3RyYWludCA9IG5ldyBQb2ludFRvUG9pbnRDb25zdHJhaW50KHN0YXRlLmJvZGllc1tib2R5QV0sIHBpdm90QSwgc3RhdGUuYm9kaWVzW2JvZHlCXSwgcGl2b3RCLCBvcHRucy5tYXhGb3JjZSk7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlICdDb25lVHdpc3QnOgogICAgICAgICAgICAgIGNvbnN0cmFpbnQgPSBuZXcgQ29uZVR3aXN0Q29uc3RyYWludChzdGF0ZS5ib2RpZXNbYm9keUFdLCBzdGF0ZS5ib2RpZXNbYm9keUJdLCB7CiAgICAgICAgICAgICAgICBwaXZvdEEsCiAgICAgICAgICAgICAgICBwaXZvdEIsCiAgICAgICAgICAgICAgICBheGlzQSwKICAgICAgICAgICAgICAgIGF4aXNCLAogICAgICAgICAgICAgICAgLi4ub3B0aW9ucwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAnSGluZ2UnOgogICAgICAgICAgICAgIGNvbnN0cmFpbnQgPSBuZXcgSGluZ2VDb25zdHJhaW50KHN0YXRlLmJvZGllc1tib2R5QV0sIHN0YXRlLmJvZGllc1tib2R5Ql0sIHsKICAgICAgICAgICAgICAgIHBpdm90QSwKICAgICAgICAgICAgICAgIHBpdm90QiwKICAgICAgICAgICAgICAgIGF4aXNBLAogICAgICAgICAgICAgICAgYXhpc0IsCiAgICAgICAgICAgICAgICAuLi5vcHRpb25zCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlICdEaXN0YW5jZSc6CiAgICAgICAgICAgICAgY29uc3RyYWludCA9IG5ldyBEaXN0YW5jZUNvbnN0cmFpbnQoc3RhdGUuYm9kaWVzW2JvZHlBXSwgc3RhdGUuYm9kaWVzW2JvZHlCXSwgb3B0bnMuZGlzdGFuY2UsIG9wdG5zLm1heEZvcmNlKTsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgJ0xvY2snOgogICAgICAgICAgICAgIGNvbnN0cmFpbnQgPSBuZXcgTG9ja0NvbnN0cmFpbnQoc3RhdGUuYm9kaWVzW2JvZHlBXSwgc3RhdGUuYm9kaWVzW2JvZHlCXSwgb3B0bnMpOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICBjb25zdHJhaW50ID0gbmV3IENvbnN0cmFpbnQoc3RhdGUuYm9kaWVzW2JvZHlBXSwgc3RhdGUuYm9kaWVzW2JvZHlCXSwgb3B0bnMpOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICAgIGNvbnN0cmFpbnQudXVpZCA9IHV1aWQ7CiAgICAgICAgICBzdGF0ZS53b3JsZC5hZGRDb25zdHJhaW50KGNvbnN0cmFpbnQpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAncmVtb3ZlQ29uc3RyYWludCc6CiAgICAgICAgc3RhdGUud29ybGQuY29uc3RyYWludHMuZmlsdGVyKCh7CiAgICAgICAgICB1dWlkOiB0aGlzSWQKICAgICAgICB9KSA9PiB0aGlzSWQgPT09IHV1aWQpLm1hcChjID0+IHN0YXRlLndvcmxkLnJlbW92ZUNvbnN0cmFpbnQoYykpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnZW5hYmxlQ29uc3RyYWludCc6CiAgICAgICAgc3RhdGUud29ybGQuY29uc3RyYWludHMuZmlsdGVyKCh7CiAgICAgICAgICB1dWlkOiB0aGlzSWQKICAgICAgICB9KSA9PiB0aGlzSWQgPT09IHV1aWQpLm1hcChjID0+IGMuZW5hYmxlKCkpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnZGlzYWJsZUNvbnN0cmFpbnQnOgogICAgICAgIHN0YXRlLndvcmxkLmNvbnN0cmFpbnRzLmZpbHRlcigoewogICAgICAgICAgdXVpZDogdGhpc0lkCiAgICAgICAgfSkgPT4gdGhpc0lkID09PSB1dWlkKS5tYXAoYyA9PiBjLmRpc2FibGUoKSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdlbmFibGVDb25zdHJhaW50TW90b3InOgogICAgICAgIHN0YXRlLndvcmxkLmNvbnN0cmFpbnRzLmZpbHRlcigoewogICAgICAgICAgdXVpZDogdGhpc0lkCiAgICAgICAgfSkgPT4gdGhpc0lkID09PSB1dWlkKS5tYXAoYyA9PiBjLmVuYWJsZU1vdG9yKCkpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnZGlzYWJsZUNvbnN0cmFpbnRNb3Rvcic6CiAgICAgICAgc3RhdGUud29ybGQuY29uc3RyYWludHMuZmlsdGVyKCh7CiAgICAgICAgICB1dWlkOiB0aGlzSWQKICAgICAgICB9KSA9PiB0aGlzSWQgPT09IHV1aWQpLm1hcChjID0+IGMuZGlzYWJsZU1vdG9yKCkpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0Q29uc3RyYWludE1vdG9yU3BlZWQnOgogICAgICAgIHN0YXRlLndvcmxkLmNvbnN0cmFpbnRzLmZpbHRlcigoewogICAgICAgICAgdXVpZDogdGhpc0lkCiAgICAgICAgfSkgPT4gdGhpc0lkID09PSB1dWlkKS5tYXAoYyA9PiBjLnNldE1vdG9yU3BlZWQocHJvcHMpKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldENvbnN0cmFpbnRNb3Rvck1heEZvcmNlJzoKICAgICAgICBzdGF0ZS53b3JsZC5jb25zdHJhaW50cy5maWx0ZXIoKHsKICAgICAgICAgIHV1aWQ6IHRoaXNJZAogICAgICAgIH0pID0+IHRoaXNJZCA9PT0gdXVpZCkubWFwKGMgPT4gYy5zZXRNb3Rvck1heEZvcmNlKHByb3BzKSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdhZGRTcHJpbmcnOgogICAgICAgIHsKICAgICAgICAgIGNvbnN0IFtib2R5QSwgYm9keUIsIG9wdG5zXSA9IHByb3BzOwogICAgICAgICAgbGV0IHsKICAgICAgICAgICAgd29ybGRBbmNob3JBLAogICAgICAgICAgICB3b3JsZEFuY2hvckIsCiAgICAgICAgICAgIGxvY2FsQW5jaG9yQSwKICAgICAgICAgICAgbG9jYWxBbmNob3JCLAogICAgICAgICAgICByZXN0TGVuZ3RoLAogICAgICAgICAgICBzdGlmZm5lc3MsCiAgICAgICAgICAgIGRhbXBpbmcKICAgICAgICAgIH0gPSBvcHRuczsKICAgICAgICAgIHdvcmxkQW5jaG9yQSA9IEFycmF5LmlzQXJyYXkod29ybGRBbmNob3JBKSA/IG5ldyBWZWMzKC4uLndvcmxkQW5jaG9yQSkgOiB1bmRlZmluZWQ7CiAgICAgICAgICB3b3JsZEFuY2hvckIgPSBBcnJheS5pc0FycmF5KHdvcmxkQW5jaG9yQikgPyBuZXcgVmVjMyguLi53b3JsZEFuY2hvckIpIDogdW5kZWZpbmVkOwogICAgICAgICAgbG9jYWxBbmNob3JBID0gQXJyYXkuaXNBcnJheShsb2NhbEFuY2hvckEpID8gbmV3IFZlYzMoLi4ubG9jYWxBbmNob3JBKSA6IHVuZGVmaW5lZDsKICAgICAgICAgIGxvY2FsQW5jaG9yQiA9IEFycmF5LmlzQXJyYXkobG9jYWxBbmNob3JCKSA/IG5ldyBWZWMzKC4uLmxvY2FsQW5jaG9yQikgOiB1bmRlZmluZWQ7CiAgICAgICAgICBsZXQgc3ByaW5nID0gbmV3IFNwcmluZyhzdGF0ZS5ib2RpZXNbYm9keUFdLCBzdGF0ZS5ib2RpZXNbYm9keUJdLCB7CiAgICAgICAgICAgIHdvcmxkQW5jaG9yQSwKICAgICAgICAgICAgd29ybGRBbmNob3JCLAogICAgICAgICAgICBsb2NhbEFuY2hvckEsCiAgICAgICAgICAgIGxvY2FsQW5jaG9yQiwKICAgICAgICAgICAgcmVzdExlbmd0aCwKICAgICAgICAgICAgc3RpZmZuZXNzLAogICAgICAgICAgICBkYW1waW5nCiAgICAgICAgICB9KTsKICAgICAgICAgIHNwcmluZy51dWlkID0gdXVpZDsKCiAgICAgICAgICBsZXQgcG9zdFN0ZXBTcHJpbmcgPSAoKSA9PiBzcHJpbmcuYXBwbHlGb3JjZSgpOwoKICAgICAgICAgIHN0YXRlLnNwcmluZ3NbdXVpZF0gPSBwb3N0U3RlcFNwcmluZzsKICAgICAgICAgIHN0YXRlLnNwcmluZ0luc3RhbmNlc1t1dWlkXSA9IHNwcmluZzsgLy8gQ29tcHV0ZSB0aGUgZm9yY2UgYWZ0ZXIgZWFjaCBzdGVwCgogICAgICAgICAgc3RhdGUud29ybGQuYWRkRXZlbnRMaXN0ZW5lcigncG9zdFN0ZXAnLCBzdGF0ZS5zcHJpbmdzW3V1aWRdKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgIGNhc2UgJ3NldFNwcmluZ1N0aWZmbmVzcyc6CiAgICAgICAgewogICAgICAgICAgc3RhdGUuc3ByaW5nSW5zdGFuY2VzW3V1aWRdLnN0aWZmbmVzcyA9IHByb3BzOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAnc2V0U3ByaW5nUmVzdExlbmd0aCc6CiAgICAgICAgewogICAgICAgICAgc3RhdGUuc3ByaW5nSW5zdGFuY2VzW3V1aWRdLnJlc3RMZW5ndGggPSBwcm9wczsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgIGNhc2UgJ3NldFNwcmluZ0RhbXBpbmcnOgogICAgICAgIHsKICAgICAgICAgIHN0YXRlLnNwcmluZ0luc3RhbmNlc1t1dWlkXS5kYW1waW5nID0gcHJvcHM7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICBjYXNlICdyZW1vdmVTcHJpbmcnOgogICAgICAgIHsKICAgICAgICAgIHN0YXRlLndvcmxkLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Bvc3RTdGVwJywgc3RhdGUuc3ByaW5nc1t1dWlkXSk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICBjYXNlICdhZGRSYXknOgogICAgICAgIHsKICAgICAgICAgIGNvbnN0IHsKICAgICAgICAgICAgZnJvbSwKICAgICAgICAgICAgdG8sCiAgICAgICAgICAgIC4uLm9wdGlvbnMKICAgICAgICAgIH0gPSBwcm9wczsKICAgICAgICAgIGNvbnN0IHJheSA9IG5ldyBSYXkoZnJvbSA/IG5ldyBWZWMzKC4uLmZyb20pIDogdW5kZWZpbmVkLCB0byA/IG5ldyBWZWMzKC4uLnRvKSA6IHVuZGVmaW5lZCk7CiAgICAgICAgICBvcHRpb25zLm1vZGUgPSBSYXlbb3B0aW9ucy5tb2RlLnRvVXBwZXJDYXNlKCldOwogICAgICAgICAgb3B0aW9ucy5yZXN1bHQgPSBuZXcgUmF5Y2FzdFJlc3VsdCgpOwoKICAgICAgICAgIHN0YXRlLnJheXNbdXVpZF0gPSAoKSA9PiB7CiAgICAgICAgICAgIHJheS5pbnRlcnNlY3RXb3JsZChzdGF0ZS53b3JsZCwgb3B0aW9ucyk7CiAgICAgICAgICAgIGNvbnN0IHsKICAgICAgICAgICAgICBib2R5LAogICAgICAgICAgICAgIHNoYXBlLAogICAgICAgICAgICAgIHJheUZyb21Xb3JsZCwKICAgICAgICAgICAgICByYXlUb1dvcmxkLAogICAgICAgICAgICAgIGhpdE5vcm1hbFdvcmxkLAogICAgICAgICAgICAgIGhpdFBvaW50V29ybGQsCiAgICAgICAgICAgICAgLi4ucmVzdAogICAgICAgICAgICB9ID0gb3B0aW9ucy5yZXN1bHQ7CiAgICAgICAgICAgIHNlbGYucG9zdE1lc3NhZ2UoewogICAgICAgICAgICAgIG9wOiAnZXZlbnQnLAogICAgICAgICAgICAgIHR5cGU6ICdyYXloaXQnLAogICAgICAgICAgICAgIHJheTogewogICAgICAgICAgICAgICAgZnJvbSwKICAgICAgICAgICAgICAgIHRvLAogICAgICAgICAgICAgICAgZGlyZWN0aW9uOiByYXkuZGlyZWN0aW9uLnRvQXJyYXkoKSwKICAgICAgICAgICAgICAgIGNvbGxpc2lvbkZpbHRlckdyb3VwOiByYXkuY29sbGlzaW9uRmlsdGVyR3JvdXAsCiAgICAgICAgICAgICAgICBjb2xsaXNpb25GaWx0ZXJNYXNrOiByYXkuY29sbGlzaW9uRmlsdGVyTWFzaywKICAgICAgICAgICAgICAgIHV1aWQKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIGJvZHk6IGJvZHkgPyBib2R5LnV1aWQgOiBudWxsLAogICAgICAgICAgICAgIHNoYXBlOiBzaGFwZSA/IHsgLi4uc2hhcGUsCiAgICAgICAgICAgICAgICBib2R5OiBib2R5LnV1aWQKICAgICAgICAgICAgICB9IDogbnVsbCwKICAgICAgICAgICAgICByYXlGcm9tV29ybGQ6IHJheUZyb21Xb3JsZC50b0FycmF5KCksCiAgICAgICAgICAgICAgcmF5VG9Xb3JsZDogcmF5VG9Xb3JsZC50b0FycmF5KCksCiAgICAgICAgICAgICAgaGl0Tm9ybWFsV29ybGQ6IGhpdE5vcm1hbFdvcmxkLnRvQXJyYXkoKSwKICAgICAgICAgICAgICBoaXRQb2ludFdvcmxkOiBoaXRQb2ludFdvcmxkLnRvQXJyYXkoKSwKICAgICAgICAgICAgICAuLi5yZXN0CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfTsKCiAgICAgICAgICBzdGF0ZS53b3JsZC5hZGRFdmVudExpc3RlbmVyKCdwcmVTdGVwJywgc3RhdGUucmF5c1t1dWlkXSk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICBjYXNlICdyZW1vdmVSYXknOgogICAgICAgIHsKICAgICAgICAgIHN0YXRlLndvcmxkLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3ByZVN0ZXAnLCBzdGF0ZS5yYXlzW3V1aWRdKTsKICAgICAgICAgIGRlbGV0ZSBzdGF0ZS5yYXlzW3V1aWRdOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAnYWRkUmF5Y2FzdFZlaGljbGUnOgogICAgICAgIHsKICAgICAgICAgIGNvbnN0IFtjaGFzc2lzQm9keSwgd2hlZWxzLCB3aGVlbEluZm9zLCBpbmRleEZvcndhcmRBeGlzLCBpbmRleFJpZ2h0QXhpcywgaW5kZXhVcEF4aXNdID0gcHJvcHM7CiAgICAgICAgICBjb25zdCB2ZWhpY2xlID0gbmV3IFJheWNhc3RWZWhpY2xlKHsKICAgICAgICAgICAgY2hhc3Npc0JvZHk6IHN0YXRlLmJvZGllc1tjaGFzc2lzQm9keV0sCiAgICAgICAgICAgIGluZGV4Rm9yd2FyZEF4aXM6IGluZGV4Rm9yd2FyZEF4aXMsCiAgICAgICAgICAgIGluZGV4UmlnaHRBeGlzOiBpbmRleFJpZ2h0QXhpcywKICAgICAgICAgICAgaW5kZXhVcEF4aXM6IGluZGV4VXBBeGlzCiAgICAgICAgICB9KTsKICAgICAgICAgIHZlaGljbGUud29ybGQgPSBzdGF0ZS53b3JsZDsKCiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHdoZWVsSW5mb3MubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgY29uc3Qgd2hlZWxJbmZvID0gd2hlZWxJbmZvc1tpXTsKICAgICAgICAgICAgd2hlZWxJbmZvLmRpcmVjdGlvbkxvY2FsID0gbmV3IFZlYzMoLi4ud2hlZWxJbmZvLmRpcmVjdGlvbkxvY2FsKTsKICAgICAgICAgICAgd2hlZWxJbmZvLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRMb2NhbCA9IG5ldyBWZWMzKC4uLndoZWVsSW5mby5jaGFzc2lzQ29ubmVjdGlvblBvaW50TG9jYWwpOwogICAgICAgICAgICB3aGVlbEluZm8uYXhsZUxvY2FsID0gbmV3IFZlYzMoLi4ud2hlZWxJbmZvLmF4bGVMb2NhbCk7CiAgICAgICAgICAgIHZlaGljbGUuYWRkV2hlZWwod2hlZWxJbmZvKTsKICAgICAgICAgIH0KCiAgICAgICAgICB2ZWhpY2xlLnByZVN0ZXAgPSAoKSA9PiB7CiAgICAgICAgICAgIHN0YXRlLnZlaGljbGVzW3V1aWRdLnVwZGF0ZVZlaGljbGUoc3RhdGUud29ybGQuZHQpOwogICAgICAgICAgfTsKCiAgICAgICAgICB2ZWhpY2xlLnBvc3RTdGVwID0gKCkgPT4gewogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0YXRlLnZlaGljbGVzW3V1aWRdLndoZWVsSW5mb3MubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICBzdGF0ZS52ZWhpY2xlc1t1dWlkXS51cGRhdGVXaGVlbFRyYW5zZm9ybShpKTsKICAgICAgICAgICAgICBjb25zdCB0ID0gc3RhdGUudmVoaWNsZXNbdXVpZF0ud2hlZWxJbmZvc1tpXS53b3JsZFRyYW5zZm9ybTsKICAgICAgICAgICAgICBjb25zdCB3aGVlbEJvZHkgPSBzdGF0ZS5ib2RpZXNbd2hlZWxzW2ldXTsKICAgICAgICAgICAgICB3aGVlbEJvZHkucG9zaXRpb24uY29weSh0LnBvc2l0aW9uKTsKICAgICAgICAgICAgICB3aGVlbEJvZHkucXVhdGVybmlvbi5jb3B5KHQucXVhdGVybmlvbik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIHN0YXRlLnZlaGljbGVzW3V1aWRdID0gdmVoaWNsZTsKICAgICAgICAgIHN0YXRlLndvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ3ByZVN0ZXAnLCBzdGF0ZS52ZWhpY2xlc1t1dWlkXS5wcmVTdGVwKTsKICAgICAgICAgIHN0YXRlLndvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ3Bvc3RTdGVwJywgc3RhdGUudmVoaWNsZXNbdXVpZF0ucG9zdFN0ZXApOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAncmVtb3ZlUmF5Y2FzdFZlaGljbGUnOgogICAgICAgIHsKICAgICAgICAgIHN0YXRlLndvcmxkLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3ByZVN0ZXAnLCBzdGF0ZS52ZWhpY2xlc1t1dWlkXS5wcmVTdGVwKTsKICAgICAgICAgIHN0YXRlLndvcmxkLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Bvc3RTdGVwJywgc3RhdGUudmVoaWNsZXNbdXVpZF0ucG9zdFN0ZXApOwogICAgICAgICAgc3RhdGUudmVoaWNsZXNbdXVpZF0ud29ybGQgPSBudWxsOwogICAgICAgICAgZGVsZXRlIHN0YXRlLnZlaGljbGVzW3V1aWRdOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAnc2V0UmF5Y2FzdFZlaGljbGVTdGVlcmluZ1ZhbHVlJzoKICAgICAgICB7CiAgICAgICAgICBjb25zdCBbdmFsdWUsIHdoZWVsSW5kZXhdID0gcHJvcHM7CiAgICAgICAgICBzdGF0ZS52ZWhpY2xlc1t1dWlkXS5zZXRTdGVlcmluZ1ZhbHVlKHZhbHVlLCB3aGVlbEluZGV4KTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgIGNhc2UgJ2FwcGx5UmF5Y2FzdFZlaGljbGVFbmdpbmVGb3JjZSc6CiAgICAgICAgewogICAgICAgICAgY29uc3QgW3ZhbHVlLCB3aGVlbEluZGV4XSA9IHByb3BzOwogICAgICAgICAgc3RhdGUudmVoaWNsZXNbdXVpZF0uYXBwbHlFbmdpbmVGb3JjZSh2YWx1ZSwgd2hlZWxJbmRleCk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICBjYXNlICdzZXRSYXljYXN0VmVoaWNsZUJyYWtlJzoKICAgICAgICB7CiAgICAgICAgICBjb25zdCBbYnJha2UsIHdoZWVsSW5kZXhdID0gcHJvcHM7CiAgICAgICAgICBzdGF0ZS52ZWhpY2xlc1t1dWlkXS5zZXRCcmFrZShicmFrZSwgd2hlZWxJbmRleCk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICB9CiAgfTsKCn0oKSk7Cgo=', 'data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid29ya2VyLmpzIiwic291cmNlcyI6WyJ3b3JrZXI6Ly93ZWItd29ya2VyL3NyYy9ub2RlX21vZHVsZXMvY2Fubm9uLWVzL2Rpc3QvY2Fubm9uLWVzLmpzIiwid29ya2VyOi8vd2ViLXdvcmtlci9zcmMvcHJvcHNUb0JvZHkuanMiLCJ3b3JrZXI6Ly93ZWItd29ya2VyL3NyYy93b3JrZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBSZWNvcmRzIHdoYXQgb2JqZWN0cyBhcmUgY29sbGlkaW5nIHdpdGggZWFjaCBvdGhlclxuICovXG5jbGFzcyBPYmplY3RDb2xsaXNpb25NYXRyaXgge1xuICAvKipcbiAgICogVGhlIG1hdHJpeCBzdG9yYWdlLlxuICAgKi9cblxuICAvKipcbiAgICogQHRvZG8gUmVtb3ZlIHVzZWxlc3MgY29uc3RydWN0b3JcbiAgICovXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMubWF0cml4ID0gdm9pZCAwO1xuICAgIHRoaXMubWF0cml4ID0ge307XG4gIH1cbiAgLyoqXG4gICAqIGdldFxuICAgKi9cblxuXG4gIGdldChiaSwgYmopIHtcbiAgICBsZXQge1xuICAgICAgaWQ6IGlcbiAgICB9ID0gYmk7XG4gICAgbGV0IHtcbiAgICAgIGlkOiBqXG4gICAgfSA9IGJqO1xuXG4gICAgaWYgKGogPiBpKSB7XG4gICAgICBjb25zdCB0ZW1wID0gajtcbiAgICAgIGogPSBpO1xuICAgICAgaSA9IHRlbXA7XG4gICAgfVxuXG4gICAgcmV0dXJuIGkgKyBcIi1cIiArIGogaW4gdGhpcy5tYXRyaXg7XG4gIH1cbiAgLyoqXG4gICAqIHNldFxuICAgKi9cblxuXG4gIHNldChiaSwgYmosIHZhbHVlKSB7XG4gICAgbGV0IHtcbiAgICAgIGlkOiBpXG4gICAgfSA9IGJpO1xuICAgIGxldCB7XG4gICAgICBpZDogalxuICAgIH0gPSBiajtcblxuICAgIGlmIChqID4gaSkge1xuICAgICAgY29uc3QgdGVtcCA9IGo7XG4gICAgICBqID0gaTtcbiAgICAgIGkgPSB0ZW1wO1xuICAgIH1cblxuICAgIGlmICh2YWx1ZSkge1xuICAgICAgdGhpcy5tYXRyaXhbaSArIFwiLVwiICsgal0gPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBkZWxldGUgdGhpcy5tYXRyaXhbaSArIFwiLVwiICsgal07XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBFbXB0eSB0aGUgbWF0cml4XG4gICAqL1xuXG5cbiAgcmVzZXQoKSB7XG4gICAgdGhpcy5tYXRyaXggPSB7fTtcbiAgfVxuICAvKipcbiAgICogU2V0IG1heCBudW1iZXIgb2Ygb2JqZWN0c1xuICAgKi9cblxuXG4gIHNldE51bU9iamVjdHMobikge31cblxufVxuXG4vKipcbiAqIEEgM3gzIG1hdHJpeC5cbiAqIEF1dGhvcmVkIGJ5IHtAbGluayBodHRwOi8vZ2l0aHViLmNvbS9zY2h0ZXBwZS8gc2NodGVwcGV9XG4gKi9cbmNsYXNzIE1hdDMge1xuICAvKipcbiAgICogQSB2ZWN0b3Igb2YgbGVuZ3RoIDksIGNvbnRhaW5pbmcgYWxsIG1hdHJpeCBlbGVtZW50cy5cbiAgICovXG5cbiAgLyoqXG4gICAqIEBwYXJhbSBlbGVtZW50cyBBIHZlY3RvciBvZiBsZW5ndGggOSwgY29udGFpbmluZyBhbGwgbWF0cml4IGVsZW1lbnRzLlxuICAgKi9cbiAgY29uc3RydWN0b3IoZWxlbWVudHMgPSBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF0pIHtcbiAgICB0aGlzLmVsZW1lbnRzID0gdm9pZCAwO1xuICAgIHRoaXMuZWxlbWVudHMgPSBlbGVtZW50cztcbiAgfVxuICAvKipcbiAgICogU2V0cyB0aGUgbWF0cml4IHRvIGlkZW50aXR5XG4gICAqIEB0b2RvIFNob3VsZCBwZXJoYXBzIGJlIHJlbmFtZWQgdG8gYHNldElkZW50aXR5KClgIHRvIGJlIG1vcmUgY2xlYXIuXG4gICAqIEB0b2RvIENyZWF0ZSBhbm90aGVyIGZ1bmN0aW9uIHRoYXQgaW1tZWRpYXRlbHkgY3JlYXRlcyBhbiBpZGVudGl0eSBtYXRyaXggZWcuIGBleWUoKWBcbiAgICovXG5cblxuICBpZGVudGl0eSgpIHtcbiAgICBjb25zdCBlID0gdGhpcy5lbGVtZW50cztcbiAgICBlWzBdID0gMTtcbiAgICBlWzFdID0gMDtcbiAgICBlWzJdID0gMDtcbiAgICBlWzNdID0gMDtcbiAgICBlWzRdID0gMTtcbiAgICBlWzVdID0gMDtcbiAgICBlWzZdID0gMDtcbiAgICBlWzddID0gMDtcbiAgICBlWzhdID0gMTtcbiAgfVxuICAvKipcbiAgICogU2V0IGFsbCBlbGVtZW50cyB0byB6ZXJvXG4gICAqL1xuXG5cbiAgc2V0WmVybygpIHtcbiAgICBjb25zdCBlID0gdGhpcy5lbGVtZW50cztcbiAgICBlWzBdID0gMDtcbiAgICBlWzFdID0gMDtcbiAgICBlWzJdID0gMDtcbiAgICBlWzNdID0gMDtcbiAgICBlWzRdID0gMDtcbiAgICBlWzVdID0gMDtcbiAgICBlWzZdID0gMDtcbiAgICBlWzddID0gMDtcbiAgICBlWzhdID0gMDtcbiAgfVxuICAvKipcbiAgICogU2V0cyB0aGUgbWF0cml4IGRpYWdvbmFsIGVsZW1lbnRzIGZyb20gYSBWZWMzXG4gICAqL1xuXG5cbiAgc2V0VHJhY2UodmVjdG9yKSB7XG4gICAgY29uc3QgZSA9IHRoaXMuZWxlbWVudHM7XG4gICAgZVswXSA9IHZlY3Rvci54O1xuICAgIGVbNF0gPSB2ZWN0b3IueTtcbiAgICBlWzhdID0gdmVjdG9yLno7XG4gIH1cbiAgLyoqXG4gICAqIEdldHMgdGhlIG1hdHJpeCBkaWFnb25hbCBlbGVtZW50c1xuICAgKi9cblxuXG4gIGdldFRyYWNlKHRhcmdldCA9IG5ldyBWZWMzKCkpIHtcbiAgICBjb25zdCBlID0gdGhpcy5lbGVtZW50cztcbiAgICB0YXJnZXQueCA9IGVbMF07XG4gICAgdGFyZ2V0LnkgPSBlWzRdO1xuICAgIHRhcmdldC56ID0gZVs4XTtcbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9XG4gIC8qKlxuICAgKiBNYXRyaXgtVmVjdG9yIG11bHRpcGxpY2F0aW9uXG4gICAqIEBwYXJhbSB2IFRoZSB2ZWN0b3IgdG8gbXVsdGlwbHkgd2l0aFxuICAgKiBAcGFyYW0gdGFyZ2V0IE9wdGlvbmFsLCB0YXJnZXQgdG8gc2F2ZSB0aGUgcmVzdWx0IGluLlxuICAgKi9cblxuXG4gIHZtdWx0KHYsIHRhcmdldCA9IG5ldyBWZWMzKCkpIHtcbiAgICBjb25zdCBlID0gdGhpcy5lbGVtZW50cztcbiAgICBjb25zdCB4ID0gdi54O1xuICAgIGNvbnN0IHkgPSB2Lnk7XG4gICAgY29uc3QgeiA9IHYuejtcbiAgICB0YXJnZXQueCA9IGVbMF0gKiB4ICsgZVsxXSAqIHkgKyBlWzJdICogejtcbiAgICB0YXJnZXQueSA9IGVbM10gKiB4ICsgZVs0XSAqIHkgKyBlWzVdICogejtcbiAgICB0YXJnZXQueiA9IGVbNl0gKiB4ICsgZVs3XSAqIHkgKyBlWzhdICogejtcbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9XG4gIC8qKlxuICAgKiBNYXRyaXgtc2NhbGFyIG11bHRpcGxpY2F0aW9uXG4gICAqL1xuXG5cbiAgc211bHQocykge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5lbGVtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5lbGVtZW50c1tpXSAqPSBzO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogTWF0cml4IG11bHRpcGxpY2F0aW9uXG4gICAqIEBwYXJhbSBtYXRyaXggTWF0cml4IHRvIG11bHRpcGx5IHdpdGggZnJvbSBsZWZ0IHNpZGUuXG4gICAqL1xuXG5cbiAgbW11bHQobWF0cml4LCB0YXJnZXQgPSBuZXcgTWF0MygpKSB7XG4gICAgY29uc3QgQSA9IHRoaXMuZWxlbWVudHM7XG4gICAgY29uc3QgQiA9IG1hdHJpeC5lbGVtZW50cztcbiAgICBjb25zdCBUID0gdGFyZ2V0LmVsZW1lbnRzO1xuICAgIGNvbnN0IGExMSA9IEFbMF0sXG4gICAgICAgICAgYTEyID0gQVsxXSxcbiAgICAgICAgICBhMTMgPSBBWzJdLFxuICAgICAgICAgIGEyMSA9IEFbM10sXG4gICAgICAgICAgYTIyID0gQVs0XSxcbiAgICAgICAgICBhMjMgPSBBWzVdLFxuICAgICAgICAgIGEzMSA9IEFbNl0sXG4gICAgICAgICAgYTMyID0gQVs3XSxcbiAgICAgICAgICBhMzMgPSBBWzhdO1xuICAgIGNvbnN0IGIxMSA9IEJbMF0sXG4gICAgICAgICAgYjEyID0gQlsxXSxcbiAgICAgICAgICBiMTMgPSBCWzJdLFxuICAgICAgICAgIGIyMSA9IEJbM10sXG4gICAgICAgICAgYjIyID0gQls0XSxcbiAgICAgICAgICBiMjMgPSBCWzVdLFxuICAgICAgICAgIGIzMSA9IEJbNl0sXG4gICAgICAgICAgYjMyID0gQls3XSxcbiAgICAgICAgICBiMzMgPSBCWzhdO1xuICAgIFRbMF0gPSBhMTEgKiBiMTEgKyBhMTIgKiBiMjEgKyBhMTMgKiBiMzE7XG4gICAgVFsxXSA9IGExMSAqIGIxMiArIGExMiAqIGIyMiArIGExMyAqIGIzMjtcbiAgICBUWzJdID0gYTExICogYjEzICsgYTEyICogYjIzICsgYTEzICogYjMzO1xuICAgIFRbM10gPSBhMjEgKiBiMTEgKyBhMjIgKiBiMjEgKyBhMjMgKiBiMzE7XG4gICAgVFs0XSA9IGEyMSAqIGIxMiArIGEyMiAqIGIyMiArIGEyMyAqIGIzMjtcbiAgICBUWzVdID0gYTIxICogYjEzICsgYTIyICogYjIzICsgYTIzICogYjMzO1xuICAgIFRbNl0gPSBhMzEgKiBiMTEgKyBhMzIgKiBiMjEgKyBhMzMgKiBiMzE7XG4gICAgVFs3XSA9IGEzMSAqIGIxMiArIGEzMiAqIGIyMiArIGEzMyAqIGIzMjtcbiAgICBUWzhdID0gYTMxICogYjEzICsgYTMyICogYjIzICsgYTMzICogYjMzO1xuICAgIHJldHVybiB0YXJnZXQ7XG4gIH1cbiAgLyoqXG4gICAqIFNjYWxlIGVhY2ggY29sdW1uIG9mIHRoZSBtYXRyaXhcbiAgICovXG5cblxuICBzY2FsZSh2ZWN0b3IsIHRhcmdldCA9IG5ldyBNYXQzKCkpIHtcbiAgICBjb25zdCBlID0gdGhpcy5lbGVtZW50cztcbiAgICBjb25zdCB0ID0gdGFyZ2V0LmVsZW1lbnRzO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IDM7IGkrKykge1xuICAgICAgdFszICogaSArIDBdID0gdmVjdG9yLnggKiBlWzMgKiBpICsgMF07XG4gICAgICB0WzMgKiBpICsgMV0gPSB2ZWN0b3IueSAqIGVbMyAqIGkgKyAxXTtcbiAgICAgIHRbMyAqIGkgKyAyXSA9IHZlY3Rvci56ICogZVszICogaSArIDJdO1xuICAgIH1cblxuICAgIHJldHVybiB0YXJnZXQ7XG4gIH1cbiAgLyoqXG4gICAqIFNvbHZlIEF4PWJcbiAgICogQHBhcmFtIGIgVGhlIHJpZ2h0IGhhbmQgc2lkZVxuICAgKiBAcGFyYW0gdGFyZ2V0IE9wdGlvbmFsLiBUYXJnZXQgdmVjdG9yIHRvIHNhdmUgaW4uXG4gICAqIEByZXR1cm4gVGhlIHNvbHV0aW9uIHhcbiAgICogQHRvZG8gc2hvdWxkIHJldXNlIGFycmF5c1xuICAgKi9cblxuXG4gIHNvbHZlKGIsIHRhcmdldCA9IG5ldyBWZWMzKCkpIHtcbiAgICAvLyBDb25zdHJ1Y3QgZXF1YXRpb25zXG4gICAgY29uc3QgbnIgPSAzOyAvLyBudW0gcm93c1xuXG4gICAgY29uc3QgbmMgPSA0OyAvLyBudW0gY29sc1xuXG4gICAgY29uc3QgZXFucyA9IFtdO1xuICAgIGxldCBpO1xuICAgIGxldCBqO1xuXG4gICAgZm9yIChpID0gMDsgaSA8IG5yICogbmM7IGkrKykge1xuICAgICAgZXFucy5wdXNoKDApO1xuICAgIH1cblxuICAgIGZvciAoaSA9IDA7IGkgPCAzOyBpKyspIHtcbiAgICAgIGZvciAoaiA9IDA7IGogPCAzOyBqKyspIHtcbiAgICAgICAgZXFuc1tpICsgbmMgKiBqXSA9IHRoaXMuZWxlbWVudHNbaSArIDMgKiBqXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBlcW5zWzMgKyA0ICogMF0gPSBiLng7XG4gICAgZXFuc1szICsgNCAqIDFdID0gYi55O1xuICAgIGVxbnNbMyArIDQgKiAyXSA9IGIuejsgLy8gQ29tcHV0ZSByaWdodCB1cHBlciB0cmlhbmd1bGFyIHZlcnNpb24gb2YgdGhlIG1hdHJpeCAtIEdhdXNzIGVsaW1pbmF0aW9uXG5cbiAgICBsZXQgbiA9IDM7XG4gICAgY29uc3QgayA9IG47XG4gICAgbGV0IG5wO1xuICAgIGNvbnN0IGtwID0gNDsgLy8gbnVtIHJvd3NcblxuICAgIGxldCBwO1xuXG4gICAgZG8ge1xuICAgICAgaSA9IGsgLSBuO1xuXG4gICAgICBpZiAoZXFuc1tpICsgbmMgKiBpXSA9PT0gMCkge1xuICAgICAgICAvLyB0aGUgcGl2b3QgaXMgbnVsbCwgc3dhcCBsaW5lc1xuICAgICAgICBmb3IgKGogPSBpICsgMTsgaiA8IGs7IGorKykge1xuICAgICAgICAgIGlmIChlcW5zW2kgKyBuYyAqIGpdICE9PSAwKSB7XG4gICAgICAgICAgICBucCA9IGtwO1xuXG4gICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgIC8vIGRvIGxpZ25lKCBpICkgPSBsaWduZSggaSApICsgbGlnbmUoIGsgKVxuICAgICAgICAgICAgICBwID0ga3AgLSBucDtcbiAgICAgICAgICAgICAgZXFuc1twICsgbmMgKiBpXSArPSBlcW5zW3AgKyBuYyAqIGpdO1xuICAgICAgICAgICAgfSB3aGlsZSAoLS1ucCk7XG5cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoZXFuc1tpICsgbmMgKiBpXSAhPT0gMCkge1xuICAgICAgICBmb3IgKGogPSBpICsgMTsgaiA8IGs7IGorKykge1xuICAgICAgICAgIGNvbnN0IG11bHRpcGxpZXIgPSBlcW5zW2kgKyBuYyAqIGpdIC8gZXFuc1tpICsgbmMgKiBpXTtcbiAgICAgICAgICBucCA9IGtwO1xuXG4gICAgICAgICAgZG8ge1xuICAgICAgICAgICAgLy8gZG8gbGlnbmUoIGsgKSA9IGxpZ25lKCBrICkgLSBtdWx0aXBsaWVyICogbGlnbmUoIGkgKVxuICAgICAgICAgICAgcCA9IGtwIC0gbnA7XG4gICAgICAgICAgICBlcW5zW3AgKyBuYyAqIGpdID0gcCA8PSBpID8gMCA6IGVxbnNbcCArIG5jICogal0gLSBlcW5zW3AgKyBuYyAqIGldICogbXVsdGlwbGllcjtcbiAgICAgICAgICB9IHdoaWxlICgtLW5wKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gd2hpbGUgKC0tbik7IC8vIEdldCB0aGUgc29sdXRpb25cblxuXG4gICAgdGFyZ2V0LnogPSBlcW5zWzIgKiBuYyArIDNdIC8gZXFuc1syICogbmMgKyAyXTtcbiAgICB0YXJnZXQueSA9IChlcW5zWzEgKiBuYyArIDNdIC0gZXFuc1sxICogbmMgKyAyXSAqIHRhcmdldC56KSAvIGVxbnNbMSAqIG5jICsgMV07XG4gICAgdGFyZ2V0LnggPSAoZXFuc1swICogbmMgKyAzXSAtIGVxbnNbMCAqIG5jICsgMl0gKiB0YXJnZXQueiAtIGVxbnNbMCAqIG5jICsgMV0gKiB0YXJnZXQueSkgLyBlcW5zWzAgKiBuYyArIDBdO1xuXG4gICAgaWYgKGlzTmFOKHRhcmdldC54KSB8fCBpc05hTih0YXJnZXQueSkgfHwgaXNOYU4odGFyZ2V0LnopIHx8IHRhcmdldC54ID09PSBJbmZpbml0eSB8fCB0YXJnZXQueSA9PT0gSW5maW5pdHkgfHwgdGFyZ2V0LnogPT09IEluZmluaXR5KSB7XG4gICAgICB0aHJvdyBcIkNvdWxkIG5vdCBzb2x2ZSBlcXVhdGlvbiEgR290IHg9W1wiICsgdGFyZ2V0LnRvU3RyaW5nKCkgKyBcIl0sIGI9W1wiICsgYi50b1N0cmluZygpICsgXCJdLCBBPVtcIiArIHRoaXMudG9TdHJpbmcoKSArIFwiXVwiO1xuICAgIH1cblxuICAgIHJldHVybiB0YXJnZXQ7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBhbiBlbGVtZW50IGluIHRoZSBtYXRyaXggYnkgaW5kZXguIEluZGV4IHN0YXJ0cyBhdCAwLCBub3QgMSEhIVxuICAgKiBAcGFyYW0gdmFsdWUgSWYgcHJvdmlkZWQsIHRoZSBtYXRyaXggZWxlbWVudCB3aWxsIGJlIHNldCB0byB0aGlzIHZhbHVlLlxuICAgKi9cblxuXG4gIGUocm93LCBjb2x1bW4sIHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiB0aGlzLmVsZW1lbnRzW2NvbHVtbiArIDMgKiByb3ddO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBTZXQgdmFsdWVcbiAgICAgIHRoaXMuZWxlbWVudHNbY29sdW1uICsgMyAqIHJvd10gPSB2YWx1ZTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIENvcHkgYW5vdGhlciBtYXRyaXggaW50byB0aGlzIG1hdHJpeCBvYmplY3QuXG4gICAqL1xuXG5cbiAgY29weShtYXRyaXgpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1hdHJpeC5lbGVtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5lbGVtZW50c1tpXSA9IG1hdHJpeC5lbGVtZW50c1tpXTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgbWF0cml4LlxuICAgKi9cblxuXG4gIHRvU3RyaW5nKCkge1xuICAgIGxldCByID0gJyc7XG4gICAgY29uc3Qgc2VwID0gJywnO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCA5OyBpKyspIHtcbiAgICAgIHIgKz0gdGhpcy5lbGVtZW50c1tpXSArIHNlcDtcbiAgICB9XG5cbiAgICByZXR1cm4gcjtcbiAgfVxuICAvKipcbiAgICogcmV2ZXJzZSB0aGUgbWF0cml4XG4gICAqIEBwYXJhbSB0YXJnZXQgVGFyZ2V0IG1hdHJpeCB0byBzYXZlIGluLlxuICAgKiBAcmV0dXJuIFRoZSBzb2x1dGlvbiB4XG4gICAqL1xuXG5cbiAgcmV2ZXJzZSh0YXJnZXQgPSBuZXcgTWF0MygpKSB7XG4gICAgLy8gQ29uc3RydWN0IGVxdWF0aW9uc1xuICAgIGNvbnN0IG5yID0gMzsgLy8gbnVtIHJvd3NcblxuICAgIGNvbnN0IG5jID0gNjsgLy8gbnVtIGNvbHNcblxuICAgIGNvbnN0IGVxbnMgPSByZXZlcnNlX2VxbnM7XG4gICAgbGV0IGk7XG4gICAgbGV0IGo7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgMzsgaSsrKSB7XG4gICAgICBmb3IgKGogPSAwOyBqIDwgMzsgaisrKSB7XG4gICAgICAgIGVxbnNbaSArIG5jICogal0gPSB0aGlzLmVsZW1lbnRzW2kgKyAzICogal07XG4gICAgICB9XG4gICAgfVxuXG4gICAgZXFuc1szICsgNiAqIDBdID0gMTtcbiAgICBlcW5zWzMgKyA2ICogMV0gPSAwO1xuICAgIGVxbnNbMyArIDYgKiAyXSA9IDA7XG4gICAgZXFuc1s0ICsgNiAqIDBdID0gMDtcbiAgICBlcW5zWzQgKyA2ICogMV0gPSAxO1xuICAgIGVxbnNbNCArIDYgKiAyXSA9IDA7XG4gICAgZXFuc1s1ICsgNiAqIDBdID0gMDtcbiAgICBlcW5zWzUgKyA2ICogMV0gPSAwO1xuICAgIGVxbnNbNSArIDYgKiAyXSA9IDE7IC8vIENvbXB1dGUgcmlnaHQgdXBwZXIgdHJpYW5ndWxhciB2ZXJzaW9uIG9mIHRoZSBtYXRyaXggLSBHYXVzcyBlbGltaW5hdGlvblxuXG4gICAgbGV0IG4gPSAzO1xuICAgIGNvbnN0IGsgPSBuO1xuICAgIGxldCBucDtcbiAgICBjb25zdCBrcCA9IG5jOyAvLyBudW0gcm93c1xuXG4gICAgbGV0IHA7XG5cbiAgICBkbyB7XG4gICAgICBpID0gayAtIG47XG5cbiAgICAgIGlmIChlcW5zW2kgKyBuYyAqIGldID09PSAwKSB7XG4gICAgICAgIC8vIHRoZSBwaXZvdCBpcyBudWxsLCBzd2FwIGxpbmVzXG4gICAgICAgIGZvciAoaiA9IGkgKyAxOyBqIDwgazsgaisrKSB7XG4gICAgICAgICAgaWYgKGVxbnNbaSArIG5jICogal0gIT09IDApIHtcbiAgICAgICAgICAgIG5wID0ga3A7XG5cbiAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgLy8gZG8gbGluZSggaSApID0gbGluZSggaSApICsgbGluZSggayApXG4gICAgICAgICAgICAgIHAgPSBrcCAtIG5wO1xuICAgICAgICAgICAgICBlcW5zW3AgKyBuYyAqIGldICs9IGVxbnNbcCArIG5jICogal07XG4gICAgICAgICAgICB9IHdoaWxlICgtLW5wKTtcblxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChlcW5zW2kgKyBuYyAqIGldICE9PSAwKSB7XG4gICAgICAgIGZvciAoaiA9IGkgKyAxOyBqIDwgazsgaisrKSB7XG4gICAgICAgICAgY29uc3QgbXVsdGlwbGllciA9IGVxbnNbaSArIG5jICogal0gLyBlcW5zW2kgKyBuYyAqIGldO1xuICAgICAgICAgIG5wID0ga3A7XG5cbiAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAvLyBkbyBsaW5lKCBrICkgPSBsaW5lKCBrICkgLSBtdWx0aXBsaWVyICogbGluZSggaSApXG4gICAgICAgICAgICBwID0ga3AgLSBucDtcbiAgICAgICAgICAgIGVxbnNbcCArIG5jICogal0gPSBwIDw9IGkgPyAwIDogZXFuc1twICsgbmMgKiBqXSAtIGVxbnNbcCArIG5jICogaV0gKiBtdWx0aXBsaWVyO1xuICAgICAgICAgIH0gd2hpbGUgKC0tbnApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSB3aGlsZSAoLS1uKTsgLy8gZWxpbWluYXRlIHRoZSB1cHBlciBsZWZ0IHRyaWFuZ2xlIG9mIHRoZSBtYXRyaXhcblxuXG4gICAgaSA9IDI7XG5cbiAgICBkbyB7XG4gICAgICBqID0gaSAtIDE7XG5cbiAgICAgIGRvIHtcbiAgICAgICAgY29uc3QgbXVsdGlwbGllciA9IGVxbnNbaSArIG5jICogal0gLyBlcW5zW2kgKyBuYyAqIGldO1xuICAgICAgICBucCA9IG5jO1xuXG4gICAgICAgIGRvIHtcbiAgICAgICAgICBwID0gbmMgLSBucDtcbiAgICAgICAgICBlcW5zW3AgKyBuYyAqIGpdID0gZXFuc1twICsgbmMgKiBqXSAtIGVxbnNbcCArIG5jICogaV0gKiBtdWx0aXBsaWVyO1xuICAgICAgICB9IHdoaWxlICgtLW5wKTtcbiAgICAgIH0gd2hpbGUgKGotLSk7XG4gICAgfSB3aGlsZSAoLS1pKTsgLy8gb3BlcmF0aW9ucyBvbiB0aGUgZGlhZ29uYWxcblxuXG4gICAgaSA9IDI7XG5cbiAgICBkbyB7XG4gICAgICBjb25zdCBtdWx0aXBsaWVyID0gMSAvIGVxbnNbaSArIG5jICogaV07XG4gICAgICBucCA9IG5jO1xuXG4gICAgICBkbyB7XG4gICAgICAgIHAgPSBuYyAtIG5wO1xuICAgICAgICBlcW5zW3AgKyBuYyAqIGldID0gZXFuc1twICsgbmMgKiBpXSAqIG11bHRpcGxpZXI7XG4gICAgICB9IHdoaWxlICgtLW5wKTtcbiAgICB9IHdoaWxlIChpLS0pO1xuXG4gICAgaSA9IDI7XG5cbiAgICBkbyB7XG4gICAgICBqID0gMjtcblxuICAgICAgZG8ge1xuICAgICAgICBwID0gZXFuc1tuciArIGogKyBuYyAqIGldO1xuXG4gICAgICAgIGlmIChpc05hTihwKSB8fCBwID09PSBJbmZpbml0eSkge1xuICAgICAgICAgIHRocm93IFwiQ291bGQgbm90IHJldmVyc2UhIEE9W1wiICsgdGhpcy50b1N0cmluZygpICsgXCJdXCI7XG4gICAgICAgIH1cblxuICAgICAgICB0YXJnZXQuZShpLCBqLCBwKTtcbiAgICAgIH0gd2hpbGUgKGotLSk7XG4gICAgfSB3aGlsZSAoaS0tKTtcblxuICAgIHJldHVybiB0YXJnZXQ7XG4gIH1cbiAgLyoqXG4gICAqIFNldCB0aGUgbWF0cml4IGZyb20gYSBxdWF0ZXJpb25cbiAgICovXG5cblxuICBzZXRSb3RhdGlvbkZyb21RdWF0ZXJuaW9uKHEpIHtcbiAgICBjb25zdCB4ID0gcS54O1xuICAgIGNvbnN0IHkgPSBxLnk7XG4gICAgY29uc3QgeiA9IHEuejtcbiAgICBjb25zdCB3ID0gcS53O1xuICAgIGNvbnN0IHgyID0geCArIHg7XG4gICAgY29uc3QgeTIgPSB5ICsgeTtcbiAgICBjb25zdCB6MiA9IHogKyB6O1xuICAgIGNvbnN0IHh4ID0geCAqIHgyO1xuICAgIGNvbnN0IHh5ID0geCAqIHkyO1xuICAgIGNvbnN0IHh6ID0geCAqIHoyO1xuICAgIGNvbnN0IHl5ID0geSAqIHkyO1xuICAgIGNvbnN0IHl6ID0geSAqIHoyO1xuICAgIGNvbnN0IHp6ID0geiAqIHoyO1xuICAgIGNvbnN0IHd4ID0gdyAqIHgyO1xuICAgIGNvbnN0IHd5ID0gdyAqIHkyO1xuICAgIGNvbnN0IHd6ID0gdyAqIHoyO1xuICAgIGNvbnN0IGUgPSB0aGlzLmVsZW1lbnRzO1xuICAgIGVbMyAqIDAgKyAwXSA9IDEgLSAoeXkgKyB6eik7XG4gICAgZVszICogMCArIDFdID0geHkgLSB3ejtcbiAgICBlWzMgKiAwICsgMl0gPSB4eiArIHd5O1xuICAgIGVbMyAqIDEgKyAwXSA9IHh5ICsgd3o7XG4gICAgZVszICogMSArIDFdID0gMSAtICh4eCArIHp6KTtcbiAgICBlWzMgKiAxICsgMl0gPSB5eiAtIHd4O1xuICAgIGVbMyAqIDIgKyAwXSA9IHh6IC0gd3k7XG4gICAgZVszICogMiArIDFdID0geXogKyB3eDtcbiAgICBlWzMgKiAyICsgMl0gPSAxIC0gKHh4ICsgeXkpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBUcmFuc3Bvc2UgdGhlIG1hdHJpeFxuICAgKiBAcGFyYW0gdGFyZ2V0IE9wdGlvbmFsLiBXaGVyZSB0byBzdG9yZSB0aGUgcmVzdWx0LlxuICAgKiBAcmV0dXJuIFRoZSB0YXJnZXQgTWF0Mywgb3IgYSBuZXcgTWF0MyBpZiB0YXJnZXQgd2FzIG9taXR0ZWQuXG4gICAqL1xuXG5cbiAgdHJhbnNwb3NlKHRhcmdldCA9IG5ldyBNYXQzKCkpIHtcbiAgICBjb25zdCBNID0gdGhpcy5lbGVtZW50cztcbiAgICBjb25zdCBUID0gdGFyZ2V0LmVsZW1lbnRzO1xuICAgIGxldCB0bXA7IC8vU2V0IGRpYWdvbmFsc1xuXG4gICAgVFswXSA9IE1bMF07XG4gICAgVFs0XSA9IE1bNF07XG4gICAgVFs4XSA9IE1bOF07XG4gICAgdG1wID0gTVsxXTtcbiAgICBUWzFdID0gTVszXTtcbiAgICBUWzNdID0gdG1wO1xuICAgIHRtcCA9IE1bMl07XG4gICAgVFsyXSA9IE1bNl07XG4gICAgVFs2XSA9IHRtcDtcbiAgICB0bXAgPSBNWzVdO1xuICAgIFRbNV0gPSBNWzddO1xuICAgIFRbN10gPSB0bXA7XG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfVxuXG59XG5jb25zdCByZXZlcnNlX2VxbnMgPSBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF07XG5cbi8qKlxuICogMy1kaW1lbnNpb25hbCB2ZWN0b3JcbiAqIEBleGFtcGxlXG4gKiAgICAgY29uc3QgdiA9IG5ldyBWZWMzKDEsIDIsIDMpXG4gKiAgICAgY29uc29sZS5sb2coJ3g9JyArIHYueCkgLy8geD0xXG4gKi9cblxuY2xhc3MgVmVjMyB7XG4gIGNvbnN0cnVjdG9yKHggPSAwLjAsIHkgPSAwLjAsIHogPSAwLjApIHtcbiAgICB0aGlzLnggPSB2b2lkIDA7XG4gICAgdGhpcy55ID0gdm9pZCAwO1xuICAgIHRoaXMueiA9IHZvaWQgMDtcbiAgICB0aGlzLnggPSB4O1xuICAgIHRoaXMueSA9IHk7XG4gICAgdGhpcy56ID0gejtcbiAgfVxuICAvKipcbiAgICogVmVjdG9yIGNyb3NzIHByb2R1Y3RcbiAgICogQHBhcmFtIHRhcmdldCBPcHRpb25hbCB0YXJnZXQgdG8gc2F2ZSBpbi5cbiAgICovXG5cblxuICBjcm9zcyh2ZWN0b3IsIHRhcmdldCA9IG5ldyBWZWMzKCkpIHtcbiAgICBjb25zdCB2eCA9IHZlY3Rvci54O1xuICAgIGNvbnN0IHZ5ID0gdmVjdG9yLnk7XG4gICAgY29uc3QgdnogPSB2ZWN0b3IuejtcbiAgICBjb25zdCB4ID0gdGhpcy54O1xuICAgIGNvbnN0IHkgPSB0aGlzLnk7XG4gICAgY29uc3QgeiA9IHRoaXMuejtcbiAgICB0YXJnZXQueCA9IHkgKiB2eiAtIHogKiB2eTtcbiAgICB0YXJnZXQueSA9IHogKiB2eCAtIHggKiB2ejtcbiAgICB0YXJnZXQueiA9IHggKiB2eSAtIHkgKiB2eDtcbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9XG4gIC8qKlxuICAgKiBTZXQgdGhlIHZlY3RvcnMnIDMgZWxlbWVudHNcbiAgICovXG5cblxuICBzZXQoeCwgeSwgeikge1xuICAgIHRoaXMueCA9IHg7XG4gICAgdGhpcy55ID0geTtcbiAgICB0aGlzLnogPSB6O1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBTZXQgYWxsIGNvbXBvbmVudHMgb2YgdGhlIHZlY3RvciB0byB6ZXJvLlxuICAgKi9cblxuXG4gIHNldFplcm8oKSB7XG4gICAgdGhpcy54ID0gdGhpcy55ID0gdGhpcy56ID0gMDtcbiAgfVxuICAvKipcbiAgICogVmVjdG9yIGFkZGl0aW9uXG4gICAqL1xuXG5cbiAgdmFkZCh2ZWN0b3IsIHRhcmdldCkge1xuICAgIGlmICh0YXJnZXQpIHtcbiAgICAgIHRhcmdldC54ID0gdmVjdG9yLnggKyB0aGlzLng7XG4gICAgICB0YXJnZXQueSA9IHZlY3Rvci55ICsgdGhpcy55O1xuICAgICAgdGFyZ2V0LnogPSB2ZWN0b3IueiArIHRoaXMuejtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG5ldyBWZWMzKHRoaXMueCArIHZlY3Rvci54LCB0aGlzLnkgKyB2ZWN0b3IueSwgdGhpcy56ICsgdmVjdG9yLnopO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogVmVjdG9yIHN1YnRyYWN0aW9uXG4gICAqIEBwYXJhbSB0YXJnZXQgT3B0aW9uYWwgdGFyZ2V0IHRvIHNhdmUgaW4uXG4gICAqL1xuXG5cbiAgdnN1Yih2ZWN0b3IsIHRhcmdldCkge1xuICAgIGlmICh0YXJnZXQpIHtcbiAgICAgIHRhcmdldC54ID0gdGhpcy54IC0gdmVjdG9yLng7XG4gICAgICB0YXJnZXQueSA9IHRoaXMueSAtIHZlY3Rvci55O1xuICAgICAgdGFyZ2V0LnogPSB0aGlzLnogLSB2ZWN0b3IuejtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG5ldyBWZWMzKHRoaXMueCAtIHZlY3Rvci54LCB0aGlzLnkgLSB2ZWN0b3IueSwgdGhpcy56IC0gdmVjdG9yLnopO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSBjcm9zcyBwcm9kdWN0IG1hdHJpeCBhX2Nyb3NzIGZyb20gYSB2ZWN0b3IsIHN1Y2ggdGhhdCBhIHggYiA9IGFfY3Jvc3MgKiBiID0gY1xuICAgKlxuICAgKiBTZWUge0BsaW5rIGh0dHBzOi8vd3d3OC5jcy51bXUuc2Uva3Vyc2VyL1REQkQyNC9WVDA2L2xlY3R1cmVzL0xlY3R1cmU2LnBkZiBVbWXDpSBVbml2ZXJzaXR5IExlY3R1cmV9XG4gICAqL1xuXG5cbiAgY3Jvc3NtYXQoKSB7XG4gICAgcmV0dXJuIG5ldyBNYXQzKFswLCAtdGhpcy56LCB0aGlzLnksIHRoaXMueiwgMCwgLXRoaXMueCwgLXRoaXMueSwgdGhpcy54LCAwXSk7XG4gIH1cbiAgLyoqXG4gICAqIE5vcm1hbGl6ZSB0aGUgdmVjdG9yLiBOb3RlIHRoYXQgdGhpcyBjaGFuZ2VzIHRoZSB2YWx1ZXMgaW4gdGhlIHZlY3Rvci5cbiAgICAqIEByZXR1cm4gUmV0dXJucyB0aGUgbm9ybSBvZiB0aGUgdmVjdG9yXG4gICAqL1xuXG5cbiAgbm9ybWFsaXplKCkge1xuICAgIGNvbnN0IHggPSB0aGlzLng7XG4gICAgY29uc3QgeSA9IHRoaXMueTtcbiAgICBjb25zdCB6ID0gdGhpcy56O1xuICAgIGNvbnN0IG4gPSBNYXRoLnNxcnQoeCAqIHggKyB5ICogeSArIHogKiB6KTtcblxuICAgIGlmIChuID4gMC4wKSB7XG4gICAgICBjb25zdCBpbnZOID0gMSAvIG47XG4gICAgICB0aGlzLnggKj0gaW52TjtcbiAgICAgIHRoaXMueSAqPSBpbnZOO1xuICAgICAgdGhpcy56ICo9IGludk47XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIE1ha2Ugc29tZXRoaW5nIHVwXG4gICAgICB0aGlzLnggPSAwO1xuICAgICAgdGhpcy55ID0gMDtcbiAgICAgIHRoaXMueiA9IDA7XG4gICAgfVxuXG4gICAgcmV0dXJuIG47XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgdmVyc2lvbiBvZiB0aGlzIHZlY3RvciB0aGF0IGlzIG9mIGxlbmd0aCAxLlxuICAgKiBAcGFyYW0gdGFyZ2V0IE9wdGlvbmFsIHRhcmdldCB0byBzYXZlIGluXG4gICAqIEByZXR1cm4gUmV0dXJucyB0aGUgdW5pdCB2ZWN0b3JcbiAgICovXG5cblxuICB1bml0KHRhcmdldCA9IG5ldyBWZWMzKCkpIHtcbiAgICBjb25zdCB4ID0gdGhpcy54O1xuICAgIGNvbnN0IHkgPSB0aGlzLnk7XG4gICAgY29uc3QgeiA9IHRoaXMuejtcbiAgICBsZXQgbmludiA9IE1hdGguc3FydCh4ICogeCArIHkgKiB5ICsgeiAqIHopO1xuXG4gICAgaWYgKG5pbnYgPiAwLjApIHtcbiAgICAgIG5pbnYgPSAxLjAgLyBuaW52O1xuICAgICAgdGFyZ2V0LnggPSB4ICogbmludjtcbiAgICAgIHRhcmdldC55ID0geSAqIG5pbnY7XG4gICAgICB0YXJnZXQueiA9IHogKiBuaW52O1xuICAgIH0gZWxzZSB7XG4gICAgICB0YXJnZXQueCA9IDE7XG4gICAgICB0YXJnZXQueSA9IDA7XG4gICAgICB0YXJnZXQueiA9IDA7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSBsZW5ndGggb2YgdGhlIHZlY3RvclxuICAgKi9cblxuXG4gIGxlbmd0aCgpIHtcbiAgICBjb25zdCB4ID0gdGhpcy54O1xuICAgIGNvbnN0IHkgPSB0aGlzLnk7XG4gICAgY29uc3QgeiA9IHRoaXMuejtcbiAgICByZXR1cm4gTWF0aC5zcXJ0KHggKiB4ICsgeSAqIHkgKyB6ICogeik7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgc3F1YXJlZCBsZW5ndGggb2YgdGhlIHZlY3Rvci5cbiAgICovXG5cblxuICBsZW5ndGhTcXVhcmVkKCkge1xuICAgIHJldHVybiB0aGlzLmRvdCh0aGlzKTtcbiAgfVxuICAvKipcbiAgICogR2V0IGRpc3RhbmNlIGZyb20gdGhpcyBwb2ludCB0byBhbm90aGVyIHBvaW50XG4gICAqL1xuXG5cbiAgZGlzdGFuY2VUbyhwKSB7XG4gICAgY29uc3QgeCA9IHRoaXMueDtcbiAgICBjb25zdCB5ID0gdGhpcy55O1xuICAgIGNvbnN0IHogPSB0aGlzLno7XG4gICAgY29uc3QgcHggPSBwLng7XG4gICAgY29uc3QgcHkgPSBwLnk7XG4gICAgY29uc3QgcHogPSBwLno7XG4gICAgcmV0dXJuIE1hdGguc3FydCgocHggLSB4KSAqIChweCAtIHgpICsgKHB5IC0geSkgKiAocHkgLSB5KSArIChweiAtIHopICogKHB6IC0geikpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgc3F1YXJlZCBkaXN0YW5jZSBmcm9tIHRoaXMgcG9pbnQgdG8gYW5vdGhlciBwb2ludFxuICAgKi9cblxuXG4gIGRpc3RhbmNlU3F1YXJlZChwKSB7XG4gICAgY29uc3QgeCA9IHRoaXMueDtcbiAgICBjb25zdCB5ID0gdGhpcy55O1xuICAgIGNvbnN0IHogPSB0aGlzLno7XG4gICAgY29uc3QgcHggPSBwLng7XG4gICAgY29uc3QgcHkgPSBwLnk7XG4gICAgY29uc3QgcHogPSBwLno7XG4gICAgcmV0dXJuIChweCAtIHgpICogKHB4IC0geCkgKyAocHkgLSB5KSAqIChweSAtIHkpICsgKHB6IC0geikgKiAocHogLSB6KTtcbiAgfVxuICAvKipcbiAgICogTXVsdGlwbHkgYWxsIHRoZSBjb21wb25lbnRzIG9mIHRoZSB2ZWN0b3Igd2l0aCBhIHNjYWxhci5cbiAgICogQHBhcmFtIHRhcmdldCBUaGUgdmVjdG9yIHRvIHNhdmUgdGhlIHJlc3VsdCBpbi5cbiAgICovXG5cblxuICBzY2FsZShzY2FsYXIsIHRhcmdldCA9IG5ldyBWZWMzKCkpIHtcbiAgICBjb25zdCB4ID0gdGhpcy54O1xuICAgIGNvbnN0IHkgPSB0aGlzLnk7XG4gICAgY29uc3QgeiA9IHRoaXMuejtcbiAgICB0YXJnZXQueCA9IHNjYWxhciAqIHg7XG4gICAgdGFyZ2V0LnkgPSBzY2FsYXIgKiB5O1xuICAgIHRhcmdldC56ID0gc2NhbGFyICogejtcbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9XG4gIC8qKlxuICAgKiBNdWx0aXBseSB0aGUgdmVjdG9yIHdpdGggYW4gb3RoZXIgdmVjdG9yLCBjb21wb25lbnQtd2lzZS5cbiAgICogQHBhcmFtIHRhcmdldCBUaGUgdmVjdG9yIHRvIHNhdmUgdGhlIHJlc3VsdCBpbi5cbiAgICovXG5cblxuICB2bXVsKHZlY3RvciwgdGFyZ2V0ID0gbmV3IFZlYzMoKSkge1xuICAgIHRhcmdldC54ID0gdmVjdG9yLnggKiB0aGlzLng7XG4gICAgdGFyZ2V0LnkgPSB2ZWN0b3IueSAqIHRoaXMueTtcbiAgICB0YXJnZXQueiA9IHZlY3Rvci56ICogdGhpcy56O1xuICAgIHJldHVybiB0YXJnZXQ7XG4gIH1cbiAgLyoqXG4gICAqIFNjYWxlIGEgdmVjdG9yIGFuZCBhZGQgaXQgdG8gdGhpcyB2ZWN0b3IuIFNhdmUgdGhlIHJlc3VsdCBpbiBcInRhcmdldFwiLiAodGFyZ2V0ID0gdGhpcyArIHZlY3RvciAqIHNjYWxhcilcbiAgICogQHBhcmFtIHRhcmdldCBUaGUgdmVjdG9yIHRvIHNhdmUgdGhlIHJlc3VsdCBpbi5cbiAgICovXG5cblxuICBhZGRTY2FsZWRWZWN0b3Ioc2NhbGFyLCB2ZWN0b3IsIHRhcmdldCA9IG5ldyBWZWMzKCkpIHtcbiAgICB0YXJnZXQueCA9IHRoaXMueCArIHNjYWxhciAqIHZlY3Rvci54O1xuICAgIHRhcmdldC55ID0gdGhpcy55ICsgc2NhbGFyICogdmVjdG9yLnk7XG4gICAgdGFyZ2V0LnogPSB0aGlzLnogKyBzY2FsYXIgKiB2ZWN0b3IuejtcbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9XG4gIC8qKlxuICAgKiBDYWxjdWxhdGUgZG90IHByb2R1Y3RcbiAgICogQHBhcmFtIHZlY3RvclxuICAgKi9cblxuXG4gIGRvdCh2ZWN0b3IpIHtcbiAgICByZXR1cm4gdGhpcy54ICogdmVjdG9yLnggKyB0aGlzLnkgKiB2ZWN0b3IueSArIHRoaXMueiAqIHZlY3Rvci56O1xuICB9XG5cbiAgaXNaZXJvKCkge1xuICAgIHJldHVybiB0aGlzLnggPT09IDAgJiYgdGhpcy55ID09PSAwICYmIHRoaXMueiA9PT0gMDtcbiAgfVxuICAvKipcbiAgICogTWFrZSB0aGUgdmVjdG9yIHBvaW50IGluIHRoZSBvcHBvc2l0ZSBkaXJlY3Rpb24uXG4gICAqIEBwYXJhbSB0YXJnZXQgT3B0aW9uYWwgdGFyZ2V0IHRvIHNhdmUgaW5cbiAgICovXG5cblxuICBuZWdhdGUodGFyZ2V0ID0gbmV3IFZlYzMoKSkge1xuICAgIHRhcmdldC54ID0gLXRoaXMueDtcbiAgICB0YXJnZXQueSA9IC10aGlzLnk7XG4gICAgdGFyZ2V0LnogPSAtdGhpcy56O1xuICAgIHJldHVybiB0YXJnZXQ7XG4gIH1cbiAgLyoqXG4gICAqIENvbXB1dGUgdHdvIGFydGlmaWNpYWwgdGFuZ2VudHMgdG8gdGhlIHZlY3RvclxuICAgKiBAcGFyYW0gdDEgVmVjdG9yIG9iamVjdCB0byBzYXZlIHRoZSBmaXJzdCB0YW5nZW50IGluXG4gICAqIEBwYXJhbSB0MiBWZWN0b3Igb2JqZWN0IHRvIHNhdmUgdGhlIHNlY29uZCB0YW5nZW50IGluXG4gICAqL1xuXG5cbiAgdGFuZ2VudHModDEsIHQyKSB7XG4gICAgY29uc3Qgbm9ybSA9IHRoaXMubGVuZ3RoKCk7XG5cbiAgICBpZiAobm9ybSA+IDAuMCkge1xuICAgICAgY29uc3QgbiA9IFZlYzNfdGFuZ2VudHNfbjtcbiAgICAgIGNvbnN0IGlub3JtID0gMSAvIG5vcm07XG4gICAgICBuLnNldCh0aGlzLnggKiBpbm9ybSwgdGhpcy55ICogaW5vcm0sIHRoaXMueiAqIGlub3JtKTtcbiAgICAgIGNvbnN0IHJhbmRWZWMgPSBWZWMzX3RhbmdlbnRzX3JhbmRWZWM7XG5cbiAgICAgIGlmIChNYXRoLmFicyhuLngpIDwgMC45KSB7XG4gICAgICAgIHJhbmRWZWMuc2V0KDEsIDAsIDApO1xuICAgICAgICBuLmNyb3NzKHJhbmRWZWMsIHQxKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJhbmRWZWMuc2V0KDAsIDEsIDApO1xuICAgICAgICBuLmNyb3NzKHJhbmRWZWMsIHQxKTtcbiAgICAgIH1cblxuICAgICAgbi5jcm9zcyh0MSwgdDIpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBUaGUgbm9ybWFsIGxlbmd0aCBpcyB6ZXJvLCBtYWtlIHNvbWV0aGluZyB1cFxuICAgICAgdDEuc2V0KDEsIDAsIDApO1xuICAgICAgdDIuc2V0KDAsIDEsIDApO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQ29udmVydHMgdG8gYSBtb3JlIHJlYWRhYmxlIGZvcm1hdFxuICAgKi9cblxuXG4gIHRvU3RyaW5nKCkge1xuICAgIHJldHVybiB0aGlzLnggKyBcIixcIiArIHRoaXMueSArIFwiLFwiICsgdGhpcy56O1xuICB9XG4gIC8qKlxuICAgKiBDb252ZXJ0cyB0byBhbiBhcnJheVxuICAgKi9cblxuXG4gIHRvQXJyYXkoKSB7XG4gICAgcmV0dXJuIFt0aGlzLngsIHRoaXMueSwgdGhpcy56XTtcbiAgfVxuICAvKipcbiAgICogQ29waWVzIHZhbHVlIG9mIHNvdXJjZSB0byB0aGlzIHZlY3Rvci5cbiAgICovXG5cblxuICBjb3B5KHZlY3Rvcikge1xuICAgIHRoaXMueCA9IHZlY3Rvci54O1xuICAgIHRoaXMueSA9IHZlY3Rvci55O1xuICAgIHRoaXMueiA9IHZlY3Rvci56O1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBEbyBhIGxpbmVhciBpbnRlcnBvbGF0aW9uIGJldHdlZW4gdHdvIHZlY3RvcnNcbiAgICogQHBhcmFtIHQgQSBudW1iZXIgYmV0d2VlbiAwIGFuZCAxLiAwIHdpbGwgbWFrZSB0aGlzIGZ1bmN0aW9uIHJldHVybiB1LCBhbmQgMSB3aWxsIG1ha2UgaXQgcmV0dXJuIHYuIE51bWJlcnMgaW4gYmV0d2VlbiB3aWxsIGdlbmVyYXRlIGEgdmVjdG9yIGluIGJldHdlZW4gdGhlbS5cbiAgICovXG5cblxuICBsZXJwKHZlY3RvciwgdCwgdGFyZ2V0KSB7XG4gICAgY29uc3QgeCA9IHRoaXMueDtcbiAgICBjb25zdCB5ID0gdGhpcy55O1xuICAgIGNvbnN0IHogPSB0aGlzLno7XG4gICAgdGFyZ2V0LnggPSB4ICsgKHZlY3Rvci54IC0geCkgKiB0O1xuICAgIHRhcmdldC55ID0geSArICh2ZWN0b3IueSAtIHkpICogdDtcbiAgICB0YXJnZXQueiA9IHogKyAodmVjdG9yLnogLSB6KSAqIHQ7XG4gIH1cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgdmVjdG9yIGVxdWFscyBpcyBhbG1vc3QgZXF1YWwgdG8gYW5vdGhlciBvbmUuXG4gICAqL1xuXG5cbiAgYWxtb3N0RXF1YWxzKHZlY3RvciwgcHJlY2lzaW9uID0gMWUtNikge1xuICAgIGlmIChNYXRoLmFicyh0aGlzLnggLSB2ZWN0b3IueCkgPiBwcmVjaXNpb24gfHwgTWF0aC5hYnModGhpcy55IC0gdmVjdG9yLnkpID4gcHJlY2lzaW9uIHx8IE1hdGguYWJzKHRoaXMueiAtIHZlY3Rvci56KSA+IHByZWNpc2lvbikge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIHZlY3RvciBpcyBhbG1vc3QgemVyb1xuICAgKi9cblxuXG4gIGFsbW9zdFplcm8ocHJlY2lzaW9uID0gMWUtNikge1xuICAgIGlmIChNYXRoLmFicyh0aGlzLngpID4gcHJlY2lzaW9uIHx8IE1hdGguYWJzKHRoaXMueSkgPiBwcmVjaXNpb24gfHwgTWF0aC5hYnModGhpcy56KSA+IHByZWNpc2lvbikge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIC8qKlxuICAgKiBDaGVjayBpZiB0aGUgdmVjdG9yIGlzIGFudGktcGFyYWxsZWwgdG8gYW5vdGhlciB2ZWN0b3IuXG4gICAqIEBwYXJhbSBwcmVjaXNpb24gU2V0IHRvIHplcm8gZm9yIGV4YWN0IGNvbXBhcmlzb25zXG4gICAqL1xuXG5cbiAgaXNBbnRpcGFyYWxsZWxUbyh2ZWN0b3IsIHByZWNpc2lvbikge1xuICAgIHRoaXMubmVnYXRlKGFudGlwX25lZyk7XG4gICAgcmV0dXJuIGFudGlwX25lZy5hbG1vc3RFcXVhbHModmVjdG9yLCBwcmVjaXNpb24pO1xuICB9XG4gIC8qKlxuICAgKiBDbG9uZSB0aGUgdmVjdG9yXG4gICAqL1xuXG5cbiAgY2xvbmUoKSB7XG4gICAgcmV0dXJuIG5ldyBWZWMzKHRoaXMueCwgdGhpcy55LCB0aGlzLnopO1xuICB9XG5cbn1cblZlYzMuWkVSTyA9IHZvaWQgMDtcblZlYzMuVU5JVF9YID0gdm9pZCAwO1xuVmVjMy5VTklUX1kgPSB2b2lkIDA7XG5WZWMzLlVOSVRfWiA9IHZvaWQgMDtcblZlYzMuWkVSTyA9IG5ldyBWZWMzKDAsIDAsIDApO1xuVmVjMy5VTklUX1ggPSBuZXcgVmVjMygxLCAwLCAwKTtcblZlYzMuVU5JVF9ZID0gbmV3IFZlYzMoMCwgMSwgMCk7XG5WZWMzLlVOSVRfWiA9IG5ldyBWZWMzKDAsIDAsIDEpO1xuY29uc3QgVmVjM190YW5nZW50c19uID0gbmV3IFZlYzMoKTtcbmNvbnN0IFZlYzNfdGFuZ2VudHNfcmFuZFZlYyA9IG5ldyBWZWMzKCk7XG5jb25zdCBhbnRpcF9uZWcgPSBuZXcgVmVjMygpO1xuXG4vKipcbiAqIEF4aXMgYWxpZ25lZCBib3VuZGluZyBib3ggY2xhc3MuXG4gKi9cbmNsYXNzIEFBQkIge1xuICAvKipcbiAgICogVGhlIGxvd2VyIGJvdW5kIG9mIHRoZSBib3VuZGluZyBib3hcbiAgICovXG5cbiAgLyoqXG4gICAqIFRoZSB1cHBlciBib3VuZCBvZiB0aGUgYm91bmRpbmcgYm94XG4gICAqL1xuICBjb25zdHJ1Y3RvcihvcHRpb25zID0ge30pIHtcbiAgICB0aGlzLmxvd2VyQm91bmQgPSB2b2lkIDA7XG4gICAgdGhpcy51cHBlckJvdW5kID0gdm9pZCAwO1xuICAgIHRoaXMubG93ZXJCb3VuZCA9IG5ldyBWZWMzKCk7XG4gICAgdGhpcy51cHBlckJvdW5kID0gbmV3IFZlYzMoKTtcblxuICAgIGlmIChvcHRpb25zLmxvd2VyQm91bmQpIHtcbiAgICAgIHRoaXMubG93ZXJCb3VuZC5jb3B5KG9wdGlvbnMubG93ZXJCb3VuZCk7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMudXBwZXJCb3VuZCkge1xuICAgICAgdGhpcy51cHBlckJvdW5kLmNvcHkob3B0aW9ucy51cHBlckJvdW5kKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFNldCB0aGUgQUFCQiBib3VuZHMgZnJvbSBhIHNldCBvZiBwb2ludHMuXG4gICAqIEBwYXJhbSBwb2ludHMgQW4gYXJyYXkgb2YgVmVjMydzLlxuICAgKiBAcmV0dXJuIFRoZSBzZWxmIG9iamVjdFxuICAgKi9cblxuXG4gIHNldEZyb21Qb2ludHMocG9pbnRzLCBwb3NpdGlvbiwgcXVhdGVybmlvbiwgc2tpblNpemUpIHtcbiAgICBjb25zdCBsID0gdGhpcy5sb3dlckJvdW5kO1xuICAgIGNvbnN0IHUgPSB0aGlzLnVwcGVyQm91bmQ7XG4gICAgY29uc3QgcSA9IHF1YXRlcm5pb247IC8vIFNldCB0byB0aGUgZmlyc3QgcG9pbnRcblxuICAgIGwuY29weShwb2ludHNbMF0pO1xuXG4gICAgaWYgKHEpIHtcbiAgICAgIHEudm11bHQobCwgbCk7XG4gICAgfVxuXG4gICAgdS5jb3B5KGwpO1xuXG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCBwb2ludHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCBwID0gcG9pbnRzW2ldO1xuXG4gICAgICBpZiAocSkge1xuICAgICAgICBxLnZtdWx0KHAsIHRtcCQxKTtcbiAgICAgICAgcCA9IHRtcCQxO1xuICAgICAgfVxuXG4gICAgICBpZiAocC54ID4gdS54KSB7XG4gICAgICAgIHUueCA9IHAueDtcbiAgICAgIH1cblxuICAgICAgaWYgKHAueCA8IGwueCkge1xuICAgICAgICBsLnggPSBwLng7XG4gICAgICB9XG5cbiAgICAgIGlmIChwLnkgPiB1LnkpIHtcbiAgICAgICAgdS55ID0gcC55O1xuICAgICAgfVxuXG4gICAgICBpZiAocC55IDwgbC55KSB7XG4gICAgICAgIGwueSA9IHAueTtcbiAgICAgIH1cblxuICAgICAgaWYgKHAueiA+IHUueikge1xuICAgICAgICB1LnogPSBwLno7XG4gICAgICB9XG5cbiAgICAgIGlmIChwLnogPCBsLnopIHtcbiAgICAgICAgbC56ID0gcC56O1xuICAgICAgfVxuICAgIH0gLy8gQWRkIG9mZnNldFxuXG5cbiAgICBpZiAocG9zaXRpb24pIHtcbiAgICAgIHBvc2l0aW9uLnZhZGQobCwgbCk7XG4gICAgICBwb3NpdGlvbi52YWRkKHUsIHUpO1xuICAgIH1cblxuICAgIGlmIChza2luU2l6ZSkge1xuICAgICAgbC54IC09IHNraW5TaXplO1xuICAgICAgbC55IC09IHNraW5TaXplO1xuICAgICAgbC56IC09IHNraW5TaXplO1xuICAgICAgdS54ICs9IHNraW5TaXplO1xuICAgICAgdS55ICs9IHNraW5TaXplO1xuICAgICAgdS56ICs9IHNraW5TaXplO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBDb3B5IGJvdW5kcyBmcm9tIGFuIEFBQkIgdG8gdGhpcyBBQUJCXG4gICAqIEBwYXJhbSBhYWJiIFNvdXJjZSB0byBjb3B5IGZyb21cbiAgICogQHJldHVybiBUaGUgdGhpcyBvYmplY3QsIGZvciBjaGFpbmFiaWxpdHlcbiAgICovXG5cblxuICBjb3B5KGFhYmIpIHtcbiAgICB0aGlzLmxvd2VyQm91bmQuY29weShhYWJiLmxvd2VyQm91bmQpO1xuICAgIHRoaXMudXBwZXJCb3VuZC5jb3B5KGFhYmIudXBwZXJCb3VuZCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIENsb25lIGFuIEFBQkJcbiAgICovXG5cblxuICBjbG9uZSgpIHtcbiAgICByZXR1cm4gbmV3IEFBQkIoKS5jb3B5KHRoaXMpO1xuICB9XG4gIC8qKlxuICAgKiBFeHRlbmQgdGhpcyBBQUJCIHNvIHRoYXQgaXQgY292ZXJzIHRoZSBnaXZlbiBBQUJCIHRvby5cbiAgICovXG5cblxuICBleHRlbmQoYWFiYikge1xuICAgIHRoaXMubG93ZXJCb3VuZC54ID0gTWF0aC5taW4odGhpcy5sb3dlckJvdW5kLngsIGFhYmIubG93ZXJCb3VuZC54KTtcbiAgICB0aGlzLnVwcGVyQm91bmQueCA9IE1hdGgubWF4KHRoaXMudXBwZXJCb3VuZC54LCBhYWJiLnVwcGVyQm91bmQueCk7XG4gICAgdGhpcy5sb3dlckJvdW5kLnkgPSBNYXRoLm1pbih0aGlzLmxvd2VyQm91bmQueSwgYWFiYi5sb3dlckJvdW5kLnkpO1xuICAgIHRoaXMudXBwZXJCb3VuZC55ID0gTWF0aC5tYXgodGhpcy51cHBlckJvdW5kLnksIGFhYmIudXBwZXJCb3VuZC55KTtcbiAgICB0aGlzLmxvd2VyQm91bmQueiA9IE1hdGgubWluKHRoaXMubG93ZXJCb3VuZC56LCBhYWJiLmxvd2VyQm91bmQueik7XG4gICAgdGhpcy51cHBlckJvdW5kLnogPSBNYXRoLm1heCh0aGlzLnVwcGVyQm91bmQueiwgYWFiYi51cHBlckJvdW5kLnopO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIEFBQkIgb3ZlcmxhcHMgdGhpcyBBQUJCLlxuICAgKi9cblxuXG4gIG92ZXJsYXBzKGFhYmIpIHtcbiAgICBjb25zdCBsMSA9IHRoaXMubG93ZXJCb3VuZDtcbiAgICBjb25zdCB1MSA9IHRoaXMudXBwZXJCb3VuZDtcbiAgICBjb25zdCBsMiA9IGFhYmIubG93ZXJCb3VuZDtcbiAgICBjb25zdCB1MiA9IGFhYmIudXBwZXJCb3VuZDsgLy8gICAgICBsMiAgICAgICAgdTJcbiAgICAvLyAgICAgIHwtLS0tLS0tLS18XG4gICAgLy8gfC0tLS0tLS0tfFxuICAgIC8vIGwxICAgICAgIHUxXG5cbiAgICBjb25zdCBvdmVybGFwc1ggPSBsMi54IDw9IHUxLnggJiYgdTEueCA8PSB1Mi54IHx8IGwxLnggPD0gdTIueCAmJiB1Mi54IDw9IHUxLng7XG4gICAgY29uc3Qgb3ZlcmxhcHNZID0gbDIueSA8PSB1MS55ICYmIHUxLnkgPD0gdTIueSB8fCBsMS55IDw9IHUyLnkgJiYgdTIueSA8PSB1MS55O1xuICAgIGNvbnN0IG92ZXJsYXBzWiA9IGwyLnogPD0gdTEueiAmJiB1MS56IDw9IHUyLnogfHwgbDEueiA8PSB1Mi56ICYmIHUyLnogPD0gdTEuejtcbiAgICByZXR1cm4gb3ZlcmxhcHNYICYmIG92ZXJsYXBzWSAmJiBvdmVybGFwc1o7XG4gIH0gLy8gTW9zdGx5IGZvciBkZWJ1Z2dpbmdcblxuXG4gIHZvbHVtZSgpIHtcbiAgICBjb25zdCBsID0gdGhpcy5sb3dlckJvdW5kO1xuICAgIGNvbnN0IHUgPSB0aGlzLnVwcGVyQm91bmQ7XG4gICAgcmV0dXJuICh1LnggLSBsLngpICogKHUueSAtIGwueSkgKiAodS56IC0gbC56KTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiBBQUJCIGlzIGZ1bGx5IGNvbnRhaW5lZCBpbiB0aGlzIEFBQkIuXG4gICAqL1xuXG5cbiAgY29udGFpbnMoYWFiYikge1xuICAgIGNvbnN0IGwxID0gdGhpcy5sb3dlckJvdW5kO1xuICAgIGNvbnN0IHUxID0gdGhpcy51cHBlckJvdW5kO1xuICAgIGNvbnN0IGwyID0gYWFiYi5sb3dlckJvdW5kO1xuICAgIGNvbnN0IHUyID0gYWFiYi51cHBlckJvdW5kOyAvLyAgICAgIGwyICAgICAgICB1MlxuICAgIC8vICAgICAgfC0tLS0tLS0tLXxcbiAgICAvLyB8LS0tLS0tLS0tLS0tLS0tfFxuICAgIC8vIGwxICAgICAgICAgICAgICB1MVxuXG4gICAgcmV0dXJuIGwxLnggPD0gbDIueCAmJiB1MS54ID49IHUyLnggJiYgbDEueSA8PSBsMi55ICYmIHUxLnkgPj0gdTIueSAmJiBsMS56IDw9IGwyLnogJiYgdTEueiA+PSB1Mi56O1xuICB9XG5cbiAgZ2V0Q29ybmVycyhhLCBiLCBjLCBkLCBlLCBmLCBnLCBoKSB7XG4gICAgY29uc3QgbCA9IHRoaXMubG93ZXJCb3VuZDtcbiAgICBjb25zdCB1ID0gdGhpcy51cHBlckJvdW5kO1xuICAgIGEuY29weShsKTtcbiAgICBiLnNldCh1LngsIGwueSwgbC56KTtcbiAgICBjLnNldCh1LngsIHUueSwgbC56KTtcbiAgICBkLnNldChsLngsIHUueSwgdS56KTtcbiAgICBlLnNldCh1LngsIGwueSwgdS56KTtcbiAgICBmLnNldChsLngsIHUueSwgbC56KTtcbiAgICBnLnNldChsLngsIGwueSwgdS56KTtcbiAgICBoLmNvcHkodSk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgcmVwcmVzZW50YXRpb24gb2YgYW4gQUFCQiBpbiBhbm90aGVyIGZyYW1lLlxuICAgKiBAcmV0dXJuIFRoZSBcInRhcmdldFwiIEFBQkIgb2JqZWN0LlxuICAgKi9cblxuXG4gIHRvTG9jYWxGcmFtZShmcmFtZSwgdGFyZ2V0KSB7XG4gICAgY29uc3QgY29ybmVycyA9IHRyYW5zZm9ybUludG9GcmFtZV9jb3JuZXJzO1xuICAgIGNvbnN0IGEgPSBjb3JuZXJzWzBdO1xuICAgIGNvbnN0IGIgPSBjb3JuZXJzWzFdO1xuICAgIGNvbnN0IGMgPSBjb3JuZXJzWzJdO1xuICAgIGNvbnN0IGQgPSBjb3JuZXJzWzNdO1xuICAgIGNvbnN0IGUgPSBjb3JuZXJzWzRdO1xuICAgIGNvbnN0IGYgPSBjb3JuZXJzWzVdO1xuICAgIGNvbnN0IGcgPSBjb3JuZXJzWzZdO1xuICAgIGNvbnN0IGggPSBjb3JuZXJzWzddOyAvLyBHZXQgY29ybmVycyBpbiBjdXJyZW50IGZyYW1lXG5cbiAgICB0aGlzLmdldENvcm5lcnMoYSwgYiwgYywgZCwgZSwgZiwgZywgaCk7IC8vIFRyYW5zZm9ybSB0aGVtIHRvIG5ldyBsb2NhbCBmcmFtZVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IDg7IGkrKykge1xuICAgICAgY29uc3QgY29ybmVyID0gY29ybmVyc1tpXTtcbiAgICAgIGZyYW1lLnBvaW50VG9Mb2NhbChjb3JuZXIsIGNvcm5lcik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRhcmdldC5zZXRGcm9tUG9pbnRzKGNvcm5lcnMpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIHJlcHJlc2VudGF0aW9uIG9mIGFuIEFBQkIgaW4gdGhlIGdsb2JhbCBmcmFtZS5cbiAgICogQHJldHVybiBUaGUgXCJ0YXJnZXRcIiBBQUJCIG9iamVjdC5cbiAgICovXG5cblxuICB0b1dvcmxkRnJhbWUoZnJhbWUsIHRhcmdldCkge1xuICAgIGNvbnN0IGNvcm5lcnMgPSB0cmFuc2Zvcm1JbnRvRnJhbWVfY29ybmVycztcbiAgICBjb25zdCBhID0gY29ybmVyc1swXTtcbiAgICBjb25zdCBiID0gY29ybmVyc1sxXTtcbiAgICBjb25zdCBjID0gY29ybmVyc1syXTtcbiAgICBjb25zdCBkID0gY29ybmVyc1szXTtcbiAgICBjb25zdCBlID0gY29ybmVyc1s0XTtcbiAgICBjb25zdCBmID0gY29ybmVyc1s1XTtcbiAgICBjb25zdCBnID0gY29ybmVyc1s2XTtcbiAgICBjb25zdCBoID0gY29ybmVyc1s3XTsgLy8gR2V0IGNvcm5lcnMgaW4gY3VycmVudCBmcmFtZVxuXG4gICAgdGhpcy5nZXRDb3JuZXJzKGEsIGIsIGMsIGQsIGUsIGYsIGcsIGgpOyAvLyBUcmFuc2Zvcm0gdGhlbSB0byBuZXcgbG9jYWwgZnJhbWVcblxuICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSA4OyBpKyspIHtcbiAgICAgIGNvbnN0IGNvcm5lciA9IGNvcm5lcnNbaV07XG4gICAgICBmcmFtZS5wb2ludFRvV29ybGQoY29ybmVyLCBjb3JuZXIpO1xuICAgIH1cblxuICAgIHJldHVybiB0YXJnZXQuc2V0RnJvbVBvaW50cyhjb3JuZXJzKTtcbiAgfVxuICAvKipcbiAgICogQ2hlY2sgaWYgdGhlIEFBQkIgaXMgaGl0IGJ5IGEgcmF5LlxuICAgKi9cblxuXG4gIG92ZXJsYXBzUmF5KHJheSkge1xuICAgIGNvbnN0IHtcbiAgICAgIGRpcmVjdGlvbixcbiAgICAgIGZyb21cbiAgICB9ID0gcmF5OyAvLyBjb25zdCB0ID0gMFxuICAgIC8vIHJheS5kaXJlY3Rpb24gaXMgdW5pdCBkaXJlY3Rpb24gdmVjdG9yIG9mIHJheVxuXG4gICAgY29uc3QgZGlyRnJhY1ggPSAxIC8gZGlyZWN0aW9uLng7XG4gICAgY29uc3QgZGlyRnJhY1kgPSAxIC8gZGlyZWN0aW9uLnk7XG4gICAgY29uc3QgZGlyRnJhY1ogPSAxIC8gZGlyZWN0aW9uLno7IC8vIHRoaXMubG93ZXJCb3VuZCBpcyB0aGUgY29ybmVyIG9mIEFBQkIgd2l0aCBtaW5pbWFsIGNvb3JkaW5hdGVzIC0gbGVmdCBib3R0b20sIHJ0IGlzIG1heGltYWwgY29ybmVyXG5cbiAgICBjb25zdCB0MSA9ICh0aGlzLmxvd2VyQm91bmQueCAtIGZyb20ueCkgKiBkaXJGcmFjWDtcbiAgICBjb25zdCB0MiA9ICh0aGlzLnVwcGVyQm91bmQueCAtIGZyb20ueCkgKiBkaXJGcmFjWDtcbiAgICBjb25zdCB0MyA9ICh0aGlzLmxvd2VyQm91bmQueSAtIGZyb20ueSkgKiBkaXJGcmFjWTtcbiAgICBjb25zdCB0NCA9ICh0aGlzLnVwcGVyQm91bmQueSAtIGZyb20ueSkgKiBkaXJGcmFjWTtcbiAgICBjb25zdCB0NSA9ICh0aGlzLmxvd2VyQm91bmQueiAtIGZyb20ueikgKiBkaXJGcmFjWjtcbiAgICBjb25zdCB0NiA9ICh0aGlzLnVwcGVyQm91bmQueiAtIGZyb20ueikgKiBkaXJGcmFjWjsgLy8gY29uc3QgdG1pbiA9IE1hdGgubWF4KE1hdGgubWF4KE1hdGgubWluKHQxLCB0MiksIE1hdGgubWluKHQzLCB0NCkpKTtcbiAgICAvLyBjb25zdCB0bWF4ID0gTWF0aC5taW4oTWF0aC5taW4oTWF0aC5tYXgodDEsIHQyKSwgTWF0aC5tYXgodDMsIHQ0KSkpO1xuXG4gICAgY29uc3QgdG1pbiA9IE1hdGgubWF4KE1hdGgubWF4KE1hdGgubWluKHQxLCB0MiksIE1hdGgubWluKHQzLCB0NCkpLCBNYXRoLm1pbih0NSwgdDYpKTtcbiAgICBjb25zdCB0bWF4ID0gTWF0aC5taW4oTWF0aC5taW4oTWF0aC5tYXgodDEsIHQyKSwgTWF0aC5tYXgodDMsIHQ0KSksIE1hdGgubWF4KHQ1LCB0NikpOyAvLyBpZiB0bWF4IDwgMCwgcmF5IChsaW5lKSBpcyBpbnRlcnNlY3RpbmcgQUFCQiwgYnV0IHdob2xlIEFBQkIgaXMgYmVoaW5nIHVzXG5cbiAgICBpZiAodG1heCA8IDApIHtcbiAgICAgIC8vdCA9IHRtYXg7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSAvLyBpZiB0bWluID4gdG1heCwgcmF5IGRvZXNuJ3QgaW50ZXJzZWN0IEFBQkJcblxuXG4gICAgaWYgKHRtaW4gPiB0bWF4KSB7XG4gICAgICAvL3QgPSB0bWF4O1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbn1cbmNvbnN0IHRtcCQxID0gbmV3IFZlYzMoKTtcbmNvbnN0IHRyYW5zZm9ybUludG9GcmFtZV9jb3JuZXJzID0gW25ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCldO1xuXG4vKipcbiAqIENvbGxpc2lvbiBcIm1hdHJpeFwiLlxuICogSXQncyBhY3R1YWxseSBhIHRyaWFuZ3VsYXItc2hhcGVkIGFycmF5IG9mIHdoZXRoZXIgdHdvIGJvZGllcyBhcmUgdG91Y2hpbmcgdGhpcyBzdGVwLCBmb3IgcmVmZXJlbmNlIG5leHQgc3RlcFxuICovXG5jbGFzcyBBcnJheUNvbGxpc2lvbk1hdHJpeCB7XG4gIC8qKlxuICAgKiBUaGUgbWF0cml4IHN0b3JhZ2UuXG4gICAqL1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLm1hdHJpeCA9IHZvaWQgMDtcbiAgICB0aGlzLm1hdHJpeCA9IFtdO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgYW4gZWxlbWVudFxuICAgKi9cblxuXG4gIGdldChiaSwgYmopIHtcbiAgICBsZXQge1xuICAgICAgaW5kZXg6IGlcbiAgICB9ID0gYmk7XG4gICAgbGV0IHtcbiAgICAgIGluZGV4OiBqXG4gICAgfSA9IGJqO1xuXG4gICAgaWYgKGogPiBpKSB7XG4gICAgICBjb25zdCB0ZW1wID0gajtcbiAgICAgIGogPSBpO1xuICAgICAgaSA9IHRlbXA7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMubWF0cml4WyhpICogKGkgKyAxKSA+PiAxKSArIGogLSAxXTtcbiAgfVxuICAvKipcbiAgICogU2V0IGFuIGVsZW1lbnRcbiAgICovXG5cblxuICBzZXQoYmksIGJqLCB2YWx1ZSkge1xuICAgIGxldCB7XG4gICAgICBpbmRleDogaVxuICAgIH0gPSBiaTtcbiAgICBsZXQge1xuICAgICAgaW5kZXg6IGpcbiAgICB9ID0gYmo7XG5cbiAgICBpZiAoaiA+IGkpIHtcbiAgICAgIGNvbnN0IHRlbXAgPSBqO1xuICAgICAgaiA9IGk7XG4gICAgICBpID0gdGVtcDtcbiAgICB9XG5cbiAgICB0aGlzLm1hdHJpeFsoaSAqIChpICsgMSkgPj4gMSkgKyBqIC0gMV0gPSB2YWx1ZSA/IDEgOiAwO1xuICB9XG4gIC8qKlxuICAgKiBTZXRzIGFsbCBlbGVtZW50cyB0byB6ZXJvXG4gICAqL1xuXG5cbiAgcmVzZXQoKSB7XG4gICAgZm9yIChsZXQgaSA9IDAsIGwgPSB0aGlzLm1hdHJpeC5sZW5ndGg7IGkgIT09IGw7IGkrKykge1xuICAgICAgdGhpcy5tYXRyaXhbaV0gPSAwO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogU2V0cyB0aGUgbWF4IG51bWJlciBvZiBvYmplY3RzXG4gICAqL1xuXG5cbiAgc2V0TnVtT2JqZWN0cyhuKSB7XG4gICAgdGhpcy5tYXRyaXgubGVuZ3RoID0gbiAqIChuIC0gMSkgPj4gMTtcbiAgfVxuXG59XG5cbi8qKlxuICogQmFzZSBjbGFzcyBmb3Igb2JqZWN0cyB0aGF0IGRpc3BhdGNoZXMgZXZlbnRzLlxuICovXG5jbGFzcyBFdmVudFRhcmdldCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuX2xpc3RlbmVycyA9IHZvaWQgMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgYW4gZXZlbnQgbGlzdGVuZXJcbiAgICogQHJldHVybiBUaGUgc2VsZiBvYmplY3QsIGZvciBjaGFpbmFiaWxpdHkuXG4gICAqL1xuICBhZGRFdmVudExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgaWYgKHRoaXMuX2xpc3RlbmVycyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLl9saXN0ZW5lcnMgPSB7fTtcbiAgICB9XG5cbiAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnM7XG5cbiAgICBpZiAobGlzdGVuZXJzW3R5cGVdID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGxpc3RlbmVyc1t0eXBlXSA9IFtdO1xuICAgIH1cblxuICAgIGlmICghbGlzdGVuZXJzW3R5cGVdLmluY2x1ZGVzKGxpc3RlbmVyKSkge1xuICAgICAgbGlzdGVuZXJzW3R5cGVdLnB1c2gobGlzdGVuZXIpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBDaGVjayBpZiBhbiBldmVudCBsaXN0ZW5lciBpcyBhZGRlZFxuICAgKi9cblxuXG4gIGhhc0V2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHtcbiAgICBpZiAodGhpcy5fbGlzdGVuZXJzID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnM7XG5cbiAgICBpZiAobGlzdGVuZXJzW3R5cGVdICE9PSB1bmRlZmluZWQgJiYgbGlzdGVuZXJzW3R5cGVdLmluY2x1ZGVzKGxpc3RlbmVyKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIC8qKlxuICAgKiBDaGVjayBpZiBhbnkgZXZlbnQgbGlzdGVuZXIgb2YgdGhlIGdpdmVuIHR5cGUgaXMgYWRkZWRcbiAgICovXG5cblxuICBoYXNBbnlFdmVudExpc3RlbmVyKHR5cGUpIHtcbiAgICBpZiAodGhpcy5fbGlzdGVuZXJzID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnM7XG4gICAgcmV0dXJuIGxpc3RlbmVyc1t0eXBlXSAhPT0gdW5kZWZpbmVkO1xuICB9XG4gIC8qKlxuICAgKiBSZW1vdmUgYW4gZXZlbnQgbGlzdGVuZXJcbiAgICogQHJldHVybiBUaGUgc2VsZiBvYmplY3QsIGZvciBjaGFpbmFiaWxpdHkuXG4gICAqL1xuXG5cbiAgcmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikge1xuICAgIGlmICh0aGlzLl9saXN0ZW5lcnMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzO1xuXG4gICAgaWYgKGxpc3RlbmVyc1t0eXBlXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBjb25zdCBpbmRleCA9IGxpc3RlbmVyc1t0eXBlXS5pbmRleE9mKGxpc3RlbmVyKTtcblxuICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgIGxpc3RlbmVyc1t0eXBlXS5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBFbWl0IGFuIGV2ZW50LlxuICAgKiBAcmV0dXJuIFRoZSBzZWxmIG9iamVjdCwgZm9yIGNoYWluYWJpbGl0eS5cbiAgICovXG5cblxuICBkaXNwYXRjaEV2ZW50KGV2ZW50KSB7XG4gICAgaWYgKHRoaXMuX2xpc3RlbmVycyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnM7XG4gICAgY29uc3QgbGlzdGVuZXJBcnJheSA9IGxpc3RlbmVyc1tldmVudC50eXBlXTtcblxuICAgIGlmIChsaXN0ZW5lckFycmF5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGV2ZW50LnRhcmdldCA9IHRoaXM7XG5cbiAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gbGlzdGVuZXJBcnJheS5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgbGlzdGVuZXJBcnJheVtpXS5jYWxsKHRoaXMsIGV2ZW50KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG59XG5cbi8qKlxuICogQSBRdWF0ZXJuaW9uIGRlc2NyaWJlcyBhIHJvdGF0aW9uIGluIDNEIHNwYWNlLiBUaGUgUXVhdGVybmlvbiBpcyBtYXRoZW1hdGljYWxseSBkZWZpbmVkIGFzIFEgPSB4KmkgKyB5KmogKyB6KmsgKyB3LCB3aGVyZSAoaSxqLGspIGFyZSBpbWFnaW5hcnkgYmFzaXMgdmVjdG9ycy4gKHgseSx6KSBjYW4gYmUgc2VlbiBhcyBhIHZlY3RvciByZWxhdGVkIHRvIHRoZSBheGlzIG9mIHJvdGF0aW9uLCB3aGlsZSB0aGUgcmVhbCBtdWx0aXBsaWVyLCB3LCBpcyByZWxhdGVkIHRvIHRoZSBhbW91bnQgb2Ygcm90YXRpb24uXG4gKiBAcGFyYW0geCBNdWx0aXBsaWVyIG9mIHRoZSBpbWFnaW5hcnkgYmFzaXMgdmVjdG9yIGkuXG4gKiBAcGFyYW0geSBNdWx0aXBsaWVyIG9mIHRoZSBpbWFnaW5hcnkgYmFzaXMgdmVjdG9yIGouXG4gKiBAcGFyYW0geiBNdWx0aXBsaWVyIG9mIHRoZSBpbWFnaW5hcnkgYmFzaXMgdmVjdG9yIGsuXG4gKiBAcGFyYW0gdyBNdWx0aXBsaWVyIG9mIHRoZSByZWFsIHBhcnQuXG4gKiBAc2VlIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvUXVhdGVybmlvblxuICovXG5cbmNsYXNzIFF1YXRlcm5pb24ge1xuICBjb25zdHJ1Y3Rvcih4ID0gMCwgeSA9IDAsIHogPSAwLCB3ID0gMSkge1xuICAgIHRoaXMueCA9IHZvaWQgMDtcbiAgICB0aGlzLnkgPSB2b2lkIDA7XG4gICAgdGhpcy56ID0gdm9pZCAwO1xuICAgIHRoaXMudyA9IHZvaWQgMDtcbiAgICB0aGlzLnggPSB4O1xuICAgIHRoaXMueSA9IHk7XG4gICAgdGhpcy56ID0gejtcbiAgICB0aGlzLncgPSB3O1xuICB9XG4gIC8qKlxuICAgKiBTZXQgdGhlIHZhbHVlIG9mIHRoZSBxdWF0ZXJuaW9uLlxuICAgKi9cblxuXG4gIHNldCh4LCB5LCB6LCB3KSB7XG4gICAgdGhpcy54ID0geDtcbiAgICB0aGlzLnkgPSB5O1xuICAgIHRoaXMueiA9IHo7XG4gICAgdGhpcy53ID0gdztcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogQ29udmVydCB0byBhIHJlYWRhYmxlIGZvcm1hdFxuICAgKiBAcmV0dXJuIFwieCx5LHosd1wiXG4gICAqL1xuXG5cbiAgdG9TdHJpbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMueCArIFwiLFwiICsgdGhpcy55ICsgXCIsXCIgKyB0aGlzLnogKyBcIixcIiArIHRoaXMudztcbiAgfVxuICAvKipcbiAgICogQ29udmVydCB0byBhbiBBcnJheVxuICAgKiBAcmV0dXJuIFt4LCB5LCB6LCB3XVxuICAgKi9cblxuXG4gIHRvQXJyYXkoKSB7XG4gICAgcmV0dXJuIFt0aGlzLngsIHRoaXMueSwgdGhpcy56LCB0aGlzLnddO1xuICB9XG4gIC8qKlxuICAgKiBTZXQgdGhlIHF1YXRlcm5pb24gY29tcG9uZW50cyBnaXZlbiBhbiBheGlzIGFuZCBhbiBhbmdsZSBpbiByYWRpYW5zLlxuICAgKi9cblxuXG4gIHNldEZyb21BeGlzQW5nbGUodmVjdG9yLCBhbmdsZSkge1xuICAgIGNvbnN0IHMgPSBNYXRoLnNpbihhbmdsZSAqIDAuNSk7XG4gICAgdGhpcy54ID0gdmVjdG9yLnggKiBzO1xuICAgIHRoaXMueSA9IHZlY3Rvci55ICogcztcbiAgICB0aGlzLnogPSB2ZWN0b3IueiAqIHM7XG4gICAgdGhpcy53ID0gTWF0aC5jb3MoYW5nbGUgKiAwLjUpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBDb252ZXJ0cyB0aGUgcXVhdGVybmlvbiB0byBbIGF4aXMsIGFuZ2xlIF0gcmVwcmVzZW50YXRpb24uXG4gICAqIEBwYXJhbSB0YXJnZXRBeGlzIEEgdmVjdG9yIG9iamVjdCB0byByZXVzZSBmb3Igc3RvcmluZyB0aGUgYXhpcy5cbiAgICogQHJldHVybiBBbiBhcnJheSwgZmlyc3QgZWxlbWVudCBpcyB0aGUgYXhpcyBhbmQgdGhlIHNlY29uZCBpcyB0aGUgYW5nbGUgaW4gcmFkaWFucy5cbiAgICovXG5cblxuICB0b0F4aXNBbmdsZSh0YXJnZXRBeGlzID0gbmV3IFZlYzMoKSkge1xuICAgIHRoaXMubm9ybWFsaXplKCk7IC8vIGlmIHc+MSBhY29zIGFuZCBzcXJ0IHdpbGwgcHJvZHVjZSBlcnJvcnMsIHRoaXMgY2FudCBoYXBwZW4gaWYgcXVhdGVybmlvbiBpcyBub3JtYWxpc2VkXG5cbiAgICBjb25zdCBhbmdsZSA9IDIgKiBNYXRoLmFjb3ModGhpcy53KTtcbiAgICBjb25zdCBzID0gTWF0aC5zcXJ0KDEgLSB0aGlzLncgKiB0aGlzLncpOyAvLyBhc3N1bWluZyBxdWF0ZXJuaW9uIG5vcm1hbGlzZWQgdGhlbiB3IGlzIGxlc3MgdGhhbiAxLCBzbyB0ZXJtIGFsd2F5cyBwb3NpdGl2ZS5cblxuICAgIGlmIChzIDwgMC4wMDEpIHtcbiAgICAgIC8vIHRlc3QgdG8gYXZvaWQgZGl2aWRlIGJ5IHplcm8sIHMgaXMgYWx3YXlzIHBvc2l0aXZlIGR1ZSB0byBzcXJ0XG4gICAgICAvLyBpZiBzIGNsb3NlIHRvIHplcm8gdGhlbiBkaXJlY3Rpb24gb2YgYXhpcyBub3QgaW1wb3J0YW50XG4gICAgICB0YXJnZXRBeGlzLnggPSB0aGlzLng7IC8vIGlmIGl0IGlzIGltcG9ydGFudCB0aGF0IGF4aXMgaXMgbm9ybWFsaXNlZCB0aGVuIHJlcGxhY2Ugd2l0aCB4PTE7IHk9ej0wO1xuXG4gICAgICB0YXJnZXRBeGlzLnkgPSB0aGlzLnk7XG4gICAgICB0YXJnZXRBeGlzLnogPSB0aGlzLno7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRhcmdldEF4aXMueCA9IHRoaXMueCAvIHM7IC8vIG5vcm1hbGlzZSBheGlzXG5cbiAgICAgIHRhcmdldEF4aXMueSA9IHRoaXMueSAvIHM7XG4gICAgICB0YXJnZXRBeGlzLnogPSB0aGlzLnogLyBzO1xuICAgIH1cblxuICAgIHJldHVybiBbdGFyZ2V0QXhpcywgYW5nbGVdO1xuICB9XG4gIC8qKlxuICAgKiBTZXQgdGhlIHF1YXRlcm5pb24gdmFsdWUgZ2l2ZW4gdHdvIHZlY3RvcnMuIFRoZSByZXN1bHRpbmcgcm90YXRpb24gd2lsbCBiZSB0aGUgbmVlZGVkIHJvdGF0aW9uIHRvIHJvdGF0ZSB1IHRvIHYuXG4gICAqL1xuXG5cbiAgc2V0RnJvbVZlY3RvcnModSwgdikge1xuICAgIGlmICh1LmlzQW50aXBhcmFsbGVsVG8odikpIHtcbiAgICAgIGNvbnN0IHQxID0gc2Z2X3QxO1xuICAgICAgY29uc3QgdDIgPSBzZnZfdDI7XG4gICAgICB1LnRhbmdlbnRzKHQxLCB0Mik7XG4gICAgICB0aGlzLnNldEZyb21BeGlzQW5nbGUodDEsIE1hdGguUEkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBhID0gdS5jcm9zcyh2KTtcbiAgICAgIHRoaXMueCA9IGEueDtcbiAgICAgIHRoaXMueSA9IGEueTtcbiAgICAgIHRoaXMueiA9IGEuejtcbiAgICAgIHRoaXMudyA9IE1hdGguc3FydCh1Lmxlbmd0aCgpICoqIDIgKiB2Lmxlbmd0aCgpICoqIDIpICsgdS5kb3Qodik7XG4gICAgICB0aGlzLm5vcm1hbGl6ZSgpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBNdWx0aXBseSB0aGUgcXVhdGVybmlvbiB3aXRoIGFuIG90aGVyIHF1YXRlcm5pb24uXG4gICAqL1xuXG5cbiAgbXVsdChxdWF0LCB0YXJnZXQgPSBuZXcgUXVhdGVybmlvbigpKSB7XG4gICAgY29uc3QgYXggPSB0aGlzLng7XG4gICAgY29uc3QgYXkgPSB0aGlzLnk7XG4gICAgY29uc3QgYXogPSB0aGlzLno7XG4gICAgY29uc3QgYXcgPSB0aGlzLnc7XG4gICAgY29uc3QgYnggPSBxdWF0Lng7XG4gICAgY29uc3QgYnkgPSBxdWF0Lnk7XG4gICAgY29uc3QgYnogPSBxdWF0Lno7XG4gICAgY29uc3QgYncgPSBxdWF0Lnc7XG4gICAgdGFyZ2V0LnggPSBheCAqIGJ3ICsgYXcgKiBieCArIGF5ICogYnogLSBheiAqIGJ5O1xuICAgIHRhcmdldC55ID0gYXkgKiBidyArIGF3ICogYnkgKyBheiAqIGJ4IC0gYXggKiBiejtcbiAgICB0YXJnZXQueiA9IGF6ICogYncgKyBhdyAqIGJ6ICsgYXggKiBieSAtIGF5ICogYng7XG4gICAgdGFyZ2V0LncgPSBhdyAqIGJ3IC0gYXggKiBieCAtIGF5ICogYnkgLSBheiAqIGJ6O1xuICAgIHJldHVybiB0YXJnZXQ7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgaW52ZXJzZSBxdWF0ZXJuaW9uIHJvdGF0aW9uLlxuICAgKi9cblxuXG4gIGludmVyc2UodGFyZ2V0ID0gbmV3IFF1YXRlcm5pb24oKSkge1xuICAgIGNvbnN0IHggPSB0aGlzLng7XG4gICAgY29uc3QgeSA9IHRoaXMueTtcbiAgICBjb25zdCB6ID0gdGhpcy56O1xuICAgIGNvbnN0IHcgPSB0aGlzLnc7XG4gICAgdGhpcy5jb25qdWdhdGUodGFyZ2V0KTtcbiAgICBjb25zdCBpbm9ybTIgPSAxIC8gKHggKiB4ICsgeSAqIHkgKyB6ICogeiArIHcgKiB3KTtcbiAgICB0YXJnZXQueCAqPSBpbm9ybTI7XG4gICAgdGFyZ2V0LnkgKj0gaW5vcm0yO1xuICAgIHRhcmdldC56ICo9IGlub3JtMjtcbiAgICB0YXJnZXQudyAqPSBpbm9ybTI7XG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSBxdWF0ZXJuaW9uIGNvbmp1Z2F0ZVxuICAgKi9cblxuXG4gIGNvbmp1Z2F0ZSh0YXJnZXQgPSBuZXcgUXVhdGVybmlvbigpKSB7XG4gICAgdGFyZ2V0LnggPSAtdGhpcy54O1xuICAgIHRhcmdldC55ID0gLXRoaXMueTtcbiAgICB0YXJnZXQueiA9IC10aGlzLno7XG4gICAgdGFyZ2V0LncgPSB0aGlzLnc7XG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfVxuICAvKipcbiAgICogTm9ybWFsaXplIHRoZSBxdWF0ZXJuaW9uLiBOb3RlIHRoYXQgdGhpcyBjaGFuZ2VzIHRoZSB2YWx1ZXMgb2YgdGhlIHF1YXRlcm5pb24uXG4gICAqL1xuXG5cbiAgbm9ybWFsaXplKCkge1xuICAgIGxldCBsID0gTWF0aC5zcXJ0KHRoaXMueCAqIHRoaXMueCArIHRoaXMueSAqIHRoaXMueSArIHRoaXMueiAqIHRoaXMueiArIHRoaXMudyAqIHRoaXMudyk7XG5cbiAgICBpZiAobCA9PT0gMCkge1xuICAgICAgdGhpcy54ID0gMDtcbiAgICAgIHRoaXMueSA9IDA7XG4gICAgICB0aGlzLnogPSAwO1xuICAgICAgdGhpcy53ID0gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgbCA9IDEgLyBsO1xuICAgICAgdGhpcy54ICo9IGw7XG4gICAgICB0aGlzLnkgKj0gbDtcbiAgICAgIHRoaXMueiAqPSBsO1xuICAgICAgdGhpcy53ICo9IGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIEFwcHJveGltYXRpb24gb2YgcXVhdGVybmlvbiBub3JtYWxpemF0aW9uLiBXb3JrcyBiZXN0IHdoZW4gcXVhdCBpcyBhbHJlYWR5IGFsbW9zdC1ub3JtYWxpemVkLlxuICAgKiBAYXV0aG9yIHVucGhhc2VkLCBodHRwczovL2dpdGh1Yi5jb20vdW5waGFzZWRcbiAgICovXG5cblxuICBub3JtYWxpemVGYXN0KCkge1xuICAgIGNvbnN0IGYgPSAoMy4wIC0gKHRoaXMueCAqIHRoaXMueCArIHRoaXMueSAqIHRoaXMueSArIHRoaXMueiAqIHRoaXMueiArIHRoaXMudyAqIHRoaXMudykpIC8gMi4wO1xuXG4gICAgaWYgKGYgPT09IDApIHtcbiAgICAgIHRoaXMueCA9IDA7XG4gICAgICB0aGlzLnkgPSAwO1xuICAgICAgdGhpcy56ID0gMDtcbiAgICAgIHRoaXMudyA9IDA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMueCAqPSBmO1xuICAgICAgdGhpcy55ICo9IGY7XG4gICAgICB0aGlzLnogKj0gZjtcbiAgICAgIHRoaXMudyAqPSBmO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBNdWx0aXBseSB0aGUgcXVhdGVybmlvbiBieSBhIHZlY3RvclxuICAgKi9cblxuXG4gIHZtdWx0KHYsIHRhcmdldCA9IG5ldyBWZWMzKCkpIHtcbiAgICBjb25zdCB4ID0gdi54O1xuICAgIGNvbnN0IHkgPSB2Lnk7XG4gICAgY29uc3QgeiA9IHYuejtcbiAgICBjb25zdCBxeCA9IHRoaXMueDtcbiAgICBjb25zdCBxeSA9IHRoaXMueTtcbiAgICBjb25zdCBxeiA9IHRoaXMuejtcbiAgICBjb25zdCBxdyA9IHRoaXMudzsgLy8gcSp2XG5cbiAgICBjb25zdCBpeCA9IHF3ICogeCArIHF5ICogeiAtIHF6ICogeTtcbiAgICBjb25zdCBpeSA9IHF3ICogeSArIHF6ICogeCAtIHF4ICogejtcbiAgICBjb25zdCBpeiA9IHF3ICogeiArIHF4ICogeSAtIHF5ICogeDtcbiAgICBjb25zdCBpdyA9IC1xeCAqIHggLSBxeSAqIHkgLSBxeiAqIHo7XG4gICAgdGFyZ2V0LnggPSBpeCAqIHF3ICsgaXcgKiAtcXggKyBpeSAqIC1xeiAtIGl6ICogLXF5O1xuICAgIHRhcmdldC55ID0gaXkgKiBxdyArIGl3ICogLXF5ICsgaXogKiAtcXggLSBpeCAqIC1xejtcbiAgICB0YXJnZXQueiA9IGl6ICogcXcgKyBpdyAqIC1xeiArIGl4ICogLXF5IC0gaXkgKiAtcXg7XG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfVxuICAvKipcbiAgICogQ29waWVzIHZhbHVlIG9mIHNvdXJjZSB0byB0aGlzIHF1YXRlcm5pb24uXG4gICAqIEByZXR1cm4gdGhpc1xuICAgKi9cblxuXG4gIGNvcHkocXVhdCkge1xuICAgIHRoaXMueCA9IHF1YXQueDtcbiAgICB0aGlzLnkgPSBxdWF0Lnk7XG4gICAgdGhpcy56ID0gcXVhdC56O1xuICAgIHRoaXMudyA9IHF1YXQudztcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogQ29udmVydCB0aGUgcXVhdGVybmlvbiB0byBldWxlciBhbmdsZSByZXByZXNlbnRhdGlvbi4gT3JkZXI6IFlaWCwgYXMgdGhpcyBwYWdlIGRlc2NyaWJlczogaHR0cHM6Ly93d3cuZXVjbGlkZWFuc3BhY2UuY29tL21hdGhzL3N0YW5kYXJkcy9pbmRleC5odG1cbiAgICogQHBhcmFtIG9yZGVyIFRocmVlLWNoYXJhY3RlciBzdHJpbmcsIGRlZmF1bHRzIHRvIFwiWVpYXCJcbiAgICovXG5cblxuICB0b0V1bGVyKHRhcmdldCwgb3JkZXIgPSAnWVpYJykge1xuICAgIGxldCBoZWFkaW5nO1xuICAgIGxldCBhdHRpdHVkZTtcbiAgICBsZXQgYmFuaztcbiAgICBjb25zdCB4ID0gdGhpcy54O1xuICAgIGNvbnN0IHkgPSB0aGlzLnk7XG4gICAgY29uc3QgeiA9IHRoaXMuejtcbiAgICBjb25zdCB3ID0gdGhpcy53O1xuXG4gICAgc3dpdGNoIChvcmRlcikge1xuICAgICAgY2FzZSAnWVpYJzpcbiAgICAgICAgY29uc3QgdGVzdCA9IHggKiB5ICsgeiAqIHc7XG5cbiAgICAgICAgaWYgKHRlc3QgPiAwLjQ5OSkge1xuICAgICAgICAgIC8vIHNpbmd1bGFyaXR5IGF0IG5vcnRoIHBvbGVcbiAgICAgICAgICBoZWFkaW5nID0gMiAqIE1hdGguYXRhbjIoeCwgdyk7XG4gICAgICAgICAgYXR0aXR1ZGUgPSBNYXRoLlBJIC8gMjtcbiAgICAgICAgICBiYW5rID0gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0ZXN0IDwgLTAuNDk5KSB7XG4gICAgICAgICAgLy8gc2luZ3VsYXJpdHkgYXQgc291dGggcG9sZVxuICAgICAgICAgIGhlYWRpbmcgPSAtMiAqIE1hdGguYXRhbjIoeCwgdyk7XG4gICAgICAgICAgYXR0aXR1ZGUgPSAtTWF0aC5QSSAvIDI7XG4gICAgICAgICAgYmFuayA9IDA7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaGVhZGluZyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgY29uc3Qgc3F4ID0geCAqIHg7XG4gICAgICAgICAgY29uc3Qgc3F5ID0geSAqIHk7XG4gICAgICAgICAgY29uc3Qgc3F6ID0geiAqIHo7XG4gICAgICAgICAgaGVhZGluZyA9IE1hdGguYXRhbjIoMiAqIHkgKiB3IC0gMiAqIHggKiB6LCAxIC0gMiAqIHNxeSAtIDIgKiBzcXopOyAvLyBIZWFkaW5nXG5cbiAgICAgICAgICBhdHRpdHVkZSA9IE1hdGguYXNpbigyICogdGVzdCk7IC8vIGF0dGl0dWRlXG5cbiAgICAgICAgICBiYW5rID0gTWF0aC5hdGFuMigyICogeCAqIHcgLSAyICogeSAqIHosIDEgLSAyICogc3F4IC0gMiAqIHNxeik7IC8vIGJhbmtcbiAgICAgICAgfVxuXG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJFdWxlciBvcmRlciBcIiArIG9yZGVyICsgXCIgbm90IHN1cHBvcnRlZCB5ZXQuXCIpO1xuICAgIH1cblxuICAgIHRhcmdldC55ID0gaGVhZGluZztcbiAgICB0YXJnZXQueiA9IGF0dGl0dWRlO1xuICAgIHRhcmdldC54ID0gYmFuaztcbiAgfVxuICAvKipcbiAgICogQHBhcmFtIG9yZGVyIFRoZSBvcmRlciB0byBhcHBseSBhbmdsZXM6ICdYWVonIG9yICdZWFonIG9yIGFueSBvdGhlciBjb21iaW5hdGlvbi5cbiAgICpcbiAgICogU2VlIHtAbGluayBodHRwczovL3d3dy5tYXRod29ya3MuY29tL21hdGxhYmNlbnRyYWwvZmlsZWV4Y2hhbmdlLzIwNjk2LWZ1bmN0aW9uLXRvLWNvbnZlcnQtYmV0d2Vlbi1kY20tZXVsZXItYW5nbGVzLXF1YXRlcm5pb25zLWFuZC1ldWxlci12ZWN0b3JzIE1hdGhXb3Jrc30gcmVmZXJlbmNlXG4gICAqL1xuXG5cbiAgc2V0RnJvbUV1bGVyKHgsIHksIHosIG9yZGVyID0gJ1hZWicpIHtcbiAgICBjb25zdCBjMSA9IE1hdGguY29zKHggLyAyKTtcbiAgICBjb25zdCBjMiA9IE1hdGguY29zKHkgLyAyKTtcbiAgICBjb25zdCBjMyA9IE1hdGguY29zKHogLyAyKTtcbiAgICBjb25zdCBzMSA9IE1hdGguc2luKHggLyAyKTtcbiAgICBjb25zdCBzMiA9IE1hdGguc2luKHkgLyAyKTtcbiAgICBjb25zdCBzMyA9IE1hdGguc2luKHogLyAyKTtcblxuICAgIGlmIChvcmRlciA9PT0gJ1hZWicpIHtcbiAgICAgIHRoaXMueCA9IHMxICogYzIgKiBjMyArIGMxICogczIgKiBzMztcbiAgICAgIHRoaXMueSA9IGMxICogczIgKiBjMyAtIHMxICogYzIgKiBzMztcbiAgICAgIHRoaXMueiA9IGMxICogYzIgKiBzMyArIHMxICogczIgKiBjMztcbiAgICAgIHRoaXMudyA9IGMxICogYzIgKiBjMyAtIHMxICogczIgKiBzMztcbiAgICB9IGVsc2UgaWYgKG9yZGVyID09PSAnWVhaJykge1xuICAgICAgdGhpcy54ID0gczEgKiBjMiAqIGMzICsgYzEgKiBzMiAqIHMzO1xuICAgICAgdGhpcy55ID0gYzEgKiBzMiAqIGMzIC0gczEgKiBjMiAqIHMzO1xuICAgICAgdGhpcy56ID0gYzEgKiBjMiAqIHMzIC0gczEgKiBzMiAqIGMzO1xuICAgICAgdGhpcy53ID0gYzEgKiBjMiAqIGMzICsgczEgKiBzMiAqIHMzO1xuICAgIH0gZWxzZSBpZiAob3JkZXIgPT09ICdaWFknKSB7XG4gICAgICB0aGlzLnggPSBzMSAqIGMyICogYzMgLSBjMSAqIHMyICogczM7XG4gICAgICB0aGlzLnkgPSBjMSAqIHMyICogYzMgKyBzMSAqIGMyICogczM7XG4gICAgICB0aGlzLnogPSBjMSAqIGMyICogczMgKyBzMSAqIHMyICogYzM7XG4gICAgICB0aGlzLncgPSBjMSAqIGMyICogYzMgLSBzMSAqIHMyICogczM7XG4gICAgfSBlbHNlIGlmIChvcmRlciA9PT0gJ1pZWCcpIHtcbiAgICAgIHRoaXMueCA9IHMxICogYzIgKiBjMyAtIGMxICogczIgKiBzMztcbiAgICAgIHRoaXMueSA9IGMxICogczIgKiBjMyArIHMxICogYzIgKiBzMztcbiAgICAgIHRoaXMueiA9IGMxICogYzIgKiBzMyAtIHMxICogczIgKiBjMztcbiAgICAgIHRoaXMudyA9IGMxICogYzIgKiBjMyArIHMxICogczIgKiBzMztcbiAgICB9IGVsc2UgaWYgKG9yZGVyID09PSAnWVpYJykge1xuICAgICAgdGhpcy54ID0gczEgKiBjMiAqIGMzICsgYzEgKiBzMiAqIHMzO1xuICAgICAgdGhpcy55ID0gYzEgKiBzMiAqIGMzICsgczEgKiBjMiAqIHMzO1xuICAgICAgdGhpcy56ID0gYzEgKiBjMiAqIHMzIC0gczEgKiBzMiAqIGMzO1xuICAgICAgdGhpcy53ID0gYzEgKiBjMiAqIGMzIC0gczEgKiBzMiAqIHMzO1xuICAgIH0gZWxzZSBpZiAob3JkZXIgPT09ICdYWlknKSB7XG4gICAgICB0aGlzLnggPSBzMSAqIGMyICogYzMgLSBjMSAqIHMyICogczM7XG4gICAgICB0aGlzLnkgPSBjMSAqIHMyICogYzMgLSBzMSAqIGMyICogczM7XG4gICAgICB0aGlzLnogPSBjMSAqIGMyICogczMgKyBzMSAqIHMyICogYzM7XG4gICAgICB0aGlzLncgPSBjMSAqIGMyICogYzMgKyBzMSAqIHMyICogczM7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBjbG9uZSgpIHtcbiAgICByZXR1cm4gbmV3IFF1YXRlcm5pb24odGhpcy54LCB0aGlzLnksIHRoaXMueiwgdGhpcy53KTtcbiAgfVxuICAvKipcbiAgICogUGVyZm9ybXMgYSBzcGhlcmljYWwgbGluZWFyIGludGVycG9sYXRpb24gYmV0d2VlbiB0d28gcXVhdFxuICAgKlxuICAgKiBAcGFyYW0gdG9RdWF0IHNlY29uZCBvcGVyYW5kXG4gICAqIEBwYXJhbSB0IGludGVycG9sYXRpb24gYW1vdW50IGJldHdlZW4gdGhlIHNlbGYgcXVhdGVybmlvbiBhbmQgdG9RdWF0XG4gICAqIEBwYXJhbSB0YXJnZXQgQSBxdWF0ZXJuaW9uIHRvIHN0b3JlIHRoZSByZXN1bHQgaW4uIElmIG5vdCBwcm92aWRlZCwgYSBuZXcgb25lIHdpbGwgYmUgY3JlYXRlZC5cbiAgICogQHJldHVybnMge1F1YXRlcm5pb259IFRoZSBcInRhcmdldFwiIG9iamVjdFxuICAgKi9cblxuXG4gIHNsZXJwKHRvUXVhdCwgdCwgdGFyZ2V0ID0gbmV3IFF1YXRlcm5pb24oKSkge1xuICAgIGNvbnN0IGF4ID0gdGhpcy54O1xuICAgIGNvbnN0IGF5ID0gdGhpcy55O1xuICAgIGNvbnN0IGF6ID0gdGhpcy56O1xuICAgIGNvbnN0IGF3ID0gdGhpcy53O1xuICAgIGxldCBieCA9IHRvUXVhdC54O1xuICAgIGxldCBieSA9IHRvUXVhdC55O1xuICAgIGxldCBieiA9IHRvUXVhdC56O1xuICAgIGxldCBidyA9IHRvUXVhdC53O1xuICAgIGxldCBvbWVnYTtcbiAgICBsZXQgY29zb207XG4gICAgbGV0IHNpbm9tO1xuICAgIGxldCBzY2FsZTA7XG4gICAgbGV0IHNjYWxlMTsgLy8gY2FsYyBjb3NpbmVcblxuICAgIGNvc29tID0gYXggKiBieCArIGF5ICogYnkgKyBheiAqIGJ6ICsgYXcgKiBidzsgLy8gYWRqdXN0IHNpZ25zIChpZiBuZWNlc3NhcnkpXG5cbiAgICBpZiAoY29zb20gPCAwLjApIHtcbiAgICAgIGNvc29tID0gLWNvc29tO1xuICAgICAgYnggPSAtYng7XG4gICAgICBieSA9IC1ieTtcbiAgICAgIGJ6ID0gLWJ6O1xuICAgICAgYncgPSAtYnc7XG4gICAgfSAvLyBjYWxjdWxhdGUgY29lZmZpY2llbnRzXG5cblxuICAgIGlmICgxLjAgLSBjb3NvbSA+IDAuMDAwMDAxKSB7XG4gICAgICAvLyBzdGFuZGFyZCBjYXNlIChzbGVycClcbiAgICAgIG9tZWdhID0gTWF0aC5hY29zKGNvc29tKTtcbiAgICAgIHNpbm9tID0gTWF0aC5zaW4ob21lZ2EpO1xuICAgICAgc2NhbGUwID0gTWF0aC5zaW4oKDEuMCAtIHQpICogb21lZ2EpIC8gc2lub207XG4gICAgICBzY2FsZTEgPSBNYXRoLnNpbih0ICogb21lZ2EpIC8gc2lub207XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFwiZnJvbVwiIGFuZCBcInRvXCIgcXVhdGVybmlvbnMgYXJlIHZlcnkgY2xvc2VcbiAgICAgIC8vICAuLi4gc28gd2UgY2FuIGRvIGEgbGluZWFyIGludGVycG9sYXRpb25cbiAgICAgIHNjYWxlMCA9IDEuMCAtIHQ7XG4gICAgICBzY2FsZTEgPSB0O1xuICAgIH0gLy8gY2FsY3VsYXRlIGZpbmFsIHZhbHVlc1xuXG5cbiAgICB0YXJnZXQueCA9IHNjYWxlMCAqIGF4ICsgc2NhbGUxICogYng7XG4gICAgdGFyZ2V0LnkgPSBzY2FsZTAgKiBheSArIHNjYWxlMSAqIGJ5O1xuICAgIHRhcmdldC56ID0gc2NhbGUwICogYXogKyBzY2FsZTEgKiBiejtcbiAgICB0YXJnZXQudyA9IHNjYWxlMCAqIGF3ICsgc2NhbGUxICogYnc7XG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfVxuICAvKipcbiAgICogUm90YXRlIGFuIGFic29sdXRlIG9yaWVudGF0aW9uIHF1YXRlcm5pb24gZ2l2ZW4gYW4gYW5ndWxhciB2ZWxvY2l0eSBhbmQgYSB0aW1lIHN0ZXAuXG4gICAqL1xuXG5cbiAgaW50ZWdyYXRlKGFuZ3VsYXJWZWxvY2l0eSwgZHQsIGFuZ3VsYXJGYWN0b3IsIHRhcmdldCA9IG5ldyBRdWF0ZXJuaW9uKCkpIHtcbiAgICBjb25zdCBheCA9IGFuZ3VsYXJWZWxvY2l0eS54ICogYW5ndWxhckZhY3Rvci54LFxuICAgICAgICAgIGF5ID0gYW5ndWxhclZlbG9jaXR5LnkgKiBhbmd1bGFyRmFjdG9yLnksXG4gICAgICAgICAgYXogPSBhbmd1bGFyVmVsb2NpdHkueiAqIGFuZ3VsYXJGYWN0b3IueixcbiAgICAgICAgICBieCA9IHRoaXMueCxcbiAgICAgICAgICBieSA9IHRoaXMueSxcbiAgICAgICAgICBieiA9IHRoaXMueixcbiAgICAgICAgICBidyA9IHRoaXMudztcbiAgICBjb25zdCBoYWxmX2R0ID0gZHQgKiAwLjU7XG4gICAgdGFyZ2V0LnggKz0gaGFsZl9kdCAqIChheCAqIGJ3ICsgYXkgKiBieiAtIGF6ICogYnkpO1xuICAgIHRhcmdldC55ICs9IGhhbGZfZHQgKiAoYXkgKiBidyArIGF6ICogYnggLSBheCAqIGJ6KTtcbiAgICB0YXJnZXQueiArPSBoYWxmX2R0ICogKGF6ICogYncgKyBheCAqIGJ5IC0gYXkgKiBieCk7XG4gICAgdGFyZ2V0LncgKz0gaGFsZl9kdCAqICgtYXggKiBieCAtIGF5ICogYnkgLSBheiAqIGJ6KTtcbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9XG5cbn1cbmNvbnN0IHNmdl90MSA9IG5ldyBWZWMzKCk7XG5jb25zdCBzZnZfdDIgPSBuZXcgVmVjMygpO1xuXG4vKipcbiAqIFRoZSBhdmFpbGFibGUgc2hhcGUgdHlwZXMuXG4gKi9cbmNvbnN0IFNIQVBFX1RZUEVTID0ge1xuICAvKiogU1BIRVJFICovXG4gIFNQSEVSRTogMSxcblxuICAvKiogUExBTkUgKi9cbiAgUExBTkU6IDIsXG5cbiAgLyoqIEJPWCAqL1xuICBCT1g6IDQsXG5cbiAgLyoqIENPTVBPVU5EICovXG4gIENPTVBPVU5EOiA4LFxuXG4gIC8qKiBDT05WRVhQT0xZSEVEUk9OICovXG4gIENPTlZFWFBPTFlIRURST046IDE2LFxuXG4gIC8qKiBIRUlHSFRGSUVMRCAqL1xuICBIRUlHSFRGSUVMRDogMzIsXG5cbiAgLyoqIFBBUlRJQ0xFICovXG4gIFBBUlRJQ0xFOiA2NCxcblxuICAvKiogQ1lMSU5ERVIgKi9cbiAgQ1lMSU5ERVI6IDEyOCxcblxuICAvKiogVFJJTUVTSCAqL1xuICBUUklNRVNIOiAyNTZcbn07XG4vKipcbiAqIFNoYXBlVHlwZVxuICovXG5cbi8qKlxuICogQmFzZSBjbGFzcyBmb3Igc2hhcGVzXG4gKi9cbmNsYXNzIFNoYXBlIHtcbiAgLyoqXG4gICAqIElkZW50aWZpZXIgb2YgdGhlIFNoYXBlLlxuICAgKi9cblxuICAvKipcbiAgICogVGhlIHR5cGUgb2YgdGhpcyBzaGFwZS4gTXVzdCBiZSBzZXQgdG8gYW4gaW50ID4gMCBieSBzdWJjbGFzc2VzLlxuICAgKi9cblxuICAvKipcbiAgICogVGhlIGxvY2FsIGJvdW5kaW5nIHNwaGVyZSByYWRpdXMgb2YgdGhpcyBzaGFwZS5cbiAgICovXG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gcHJvZHVjZSBjb250YWN0IGZvcmNlcyB3aGVuIGluIGNvbnRhY3Qgd2l0aCBvdGhlciBib2RpZXMuIE5vdGUgdGhhdCBjb250YWN0cyB3aWxsIGJlIGdlbmVyYXRlZCwgYnV0IHRoZXkgd2lsbCBiZSBkaXNhYmxlZC5cbiAgICogQGRlZmF1bHQgdHJ1ZVxuICAgKi9cblxuICAvKipcbiAgICogQGRlZmF1bHQgMVxuICAgKi9cblxuICAvKipcbiAgICogQGRlZmF1bHQgLTFcbiAgICovXG5cbiAgLyoqXG4gICAqIE9wdGlvbmFsIG1hdGVyaWFsIG9mIHRoZSBzaGFwZSB0aGF0IHJlZ3VsYXRlcyBjb250YWN0IHByb3BlcnRpZXMuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBUaGUgYm9keSB0byB3aGljaCB0aGUgc2hhcGUgaXMgYWRkZWQgdG8uXG4gICAqL1xuXG4gIC8qKlxuICAgKiBBbGwgdGhlIFNoYXBlIHR5cGVzLlxuICAgKi9cbiAgY29uc3RydWN0b3Iob3B0aW9ucyA9IHt9KSB7XG4gICAgdGhpcy5pZCA9IHZvaWQgMDtcbiAgICB0aGlzLnR5cGUgPSB2b2lkIDA7XG4gICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IHZvaWQgMDtcbiAgICB0aGlzLmNvbGxpc2lvblJlc3BvbnNlID0gdm9pZCAwO1xuICAgIHRoaXMuY29sbGlzaW9uRmlsdGVyR3JvdXAgPSB2b2lkIDA7XG4gICAgdGhpcy5jb2xsaXNpb25GaWx0ZXJNYXNrID0gdm9pZCAwO1xuICAgIHRoaXMubWF0ZXJpYWwgPSB2b2lkIDA7XG4gICAgdGhpcy5ib2R5ID0gdm9pZCAwO1xuICAgIHRoaXMuaWQgPSBTaGFwZS5pZENvdW50ZXIrKztcbiAgICB0aGlzLnR5cGUgPSBvcHRpb25zLnR5cGUgfHwgMDtcbiAgICB0aGlzLmJvdW5kaW5nU3BoZXJlUmFkaXVzID0gMDtcbiAgICB0aGlzLmNvbGxpc2lvblJlc3BvbnNlID0gb3B0aW9ucy5jb2xsaXNpb25SZXNwb25zZSA/IG9wdGlvbnMuY29sbGlzaW9uUmVzcG9uc2UgOiB0cnVlO1xuICAgIHRoaXMuY29sbGlzaW9uRmlsdGVyR3JvdXAgPSBvcHRpb25zLmNvbGxpc2lvbkZpbHRlckdyb3VwICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNvbGxpc2lvbkZpbHRlckdyb3VwIDogMTtcbiAgICB0aGlzLmNvbGxpc2lvbkZpbHRlck1hc2sgPSBvcHRpb25zLmNvbGxpc2lvbkZpbHRlck1hc2sgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuY29sbGlzaW9uRmlsdGVyTWFzayA6IC0xO1xuICAgIHRoaXMubWF0ZXJpYWwgPSBvcHRpb25zLm1hdGVyaWFsID8gb3B0aW9ucy5tYXRlcmlhbCA6IG51bGw7XG4gICAgdGhpcy5ib2R5ID0gbnVsbDtcbiAgfVxuICAvKipcbiAgICogQ29tcHV0ZXMgdGhlIGJvdW5kaW5nIHNwaGVyZSByYWRpdXMuXG4gICAqIFRoZSByZXN1bHQgaXMgc3RvcmVkIGluIHRoZSBwcm9wZXJ0eSBgLmJvdW5kaW5nU3BoZXJlUmFkaXVzYFxuICAgKi9cblxuXG4gIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCkge1xuICAgIHRocm93IFwiY29tcHV0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCkgbm90IGltcGxlbWVudGVkIGZvciBzaGFwZSB0eXBlIFwiICsgdGhpcy50eXBlO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIHZvbHVtZSBvZiB0aGlzIHNoYXBlXG4gICAqL1xuXG5cbiAgdm9sdW1lKCkge1xuICAgIHRocm93IFwidm9sdW1lKCkgbm90IGltcGxlbWVudGVkIGZvciBzaGFwZSB0eXBlIFwiICsgdGhpcy50eXBlO1xuICB9XG4gIC8qKlxuICAgKiBDYWxjdWxhdGVzIHRoZSBpbmVydGlhIGluIHRoZSBsb2NhbCBmcmFtZSBmb3IgdGhpcyBzaGFwZS5cbiAgICogQHNlZSBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0xpc3Rfb2ZfbW9tZW50c19vZl9pbmVydGlhXG4gICAqL1xuXG5cbiAgY2FsY3VsYXRlTG9jYWxJbmVydGlhKG1hc3MsIHRhcmdldCkge1xuICAgIHRocm93IFwiY2FsY3VsYXRlTG9jYWxJbmVydGlhKCkgbm90IGltcGxlbWVudGVkIGZvciBzaGFwZSB0eXBlIFwiICsgdGhpcy50eXBlO1xuICB9XG4gIC8qKlxuICAgKiBAdG9kbyB1c2UgYWJzdHJhY3QgZm9yIHRoZXNlIGtpbmQgb2YgbWV0aG9kc1xuICAgKi9cblxuXG4gIGNhbGN1bGF0ZVdvcmxkQUFCQihwb3MsIHF1YXQsIG1pbiwgbWF4KSB7XG4gICAgdGhyb3cgXCJjYWxjdWxhdGVXb3JsZEFBQkIoKSBub3QgaW1wbGVtZW50ZWQgZm9yIHNoYXBlIHR5cGUgXCIgKyB0aGlzLnR5cGU7XG4gIH1cblxufVxuU2hhcGUuaWRDb3VudGVyID0gMDtcblNoYXBlLnR5cGVzID0gU0hBUEVfVFlQRVM7XG5cbi8qKlxuICogVHJhbnNmb3JtYXRpb24gdXRpbGl0aWVzLlxuICovXG5jbGFzcyBUcmFuc2Zvcm0ge1xuICAvKipcbiAgICogcG9zaXRpb25cbiAgICovXG5cbiAgLyoqXG4gICAqIHF1YXRlcm5pb25cbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkge1xuICAgIHRoaXMucG9zaXRpb24gPSB2b2lkIDA7XG4gICAgdGhpcy5xdWF0ZXJuaW9uID0gdm9pZCAwO1xuICAgIHRoaXMucG9zaXRpb24gPSBuZXcgVmVjMygpO1xuICAgIHRoaXMucXVhdGVybmlvbiA9IG5ldyBRdWF0ZXJuaW9uKCk7XG5cbiAgICBpZiAob3B0aW9ucy5wb3NpdGlvbikge1xuICAgICAgdGhpcy5wb3NpdGlvbi5jb3B5KG9wdGlvbnMucG9zaXRpb24pO1xuICAgIH1cblxuICAgIGlmIChvcHRpb25zLnF1YXRlcm5pb24pIHtcbiAgICAgIHRoaXMucXVhdGVybmlvbi5jb3B5KG9wdGlvbnMucXVhdGVybmlvbik7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBHZXQgYSBnbG9iYWwgcG9pbnQgaW4gbG9jYWwgdHJhbnNmb3JtIGNvb3JkaW5hdGVzLlxuICAgKi9cblxuXG4gIHBvaW50VG9Mb2NhbCh3b3JsZFBvaW50LCByZXN1bHQpIHtcbiAgICByZXR1cm4gVHJhbnNmb3JtLnBvaW50VG9Mb2NhbEZyYW1lKHRoaXMucG9zaXRpb24sIHRoaXMucXVhdGVybmlvbiwgd29ybGRQb2ludCwgcmVzdWx0KTtcbiAgfVxuICAvKipcbiAgICogR2V0IGEgbG9jYWwgcG9pbnQgaW4gZ2xvYmFsIHRyYW5zZm9ybSBjb29yZGluYXRlcy5cbiAgICovXG5cblxuICBwb2ludFRvV29ybGQobG9jYWxQb2ludCwgcmVzdWx0KSB7XG4gICAgcmV0dXJuIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZSh0aGlzLnBvc2l0aW9uLCB0aGlzLnF1YXRlcm5pb24sIGxvY2FsUG9pbnQsIHJlc3VsdCk7XG4gIH1cbiAgLyoqXG4gICAqIHZlY3RvclRvV29ybGRGcmFtZVxuICAgKi9cblxuXG4gIHZlY3RvclRvV29ybGRGcmFtZShsb2NhbFZlY3RvciwgcmVzdWx0ID0gbmV3IFZlYzMoKSkge1xuICAgIHRoaXMucXVhdGVybmlvbi52bXVsdChsb2NhbFZlY3RvciwgcmVzdWx0KTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG4gIC8qKlxuICAgKiBwb2ludFRvTG9jYWxGcmFtZVxuICAgKi9cblxuXG4gIHN0YXRpYyBwb2ludFRvTG9jYWxGcmFtZShwb3NpdGlvbiwgcXVhdGVybmlvbiwgd29ybGRQb2ludCwgcmVzdWx0ID0gbmV3IFZlYzMoKSkge1xuICAgIHdvcmxkUG9pbnQudnN1Yihwb3NpdGlvbiwgcmVzdWx0KTtcbiAgICBxdWF0ZXJuaW9uLmNvbmp1Z2F0ZSh0bXBRdWF0JDEpO1xuICAgIHRtcFF1YXQkMS52bXVsdChyZXN1bHQsIHJlc3VsdCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICAvKipcbiAgICogcG9pbnRUb1dvcmxkRnJhbWVcbiAgICovXG5cblxuICBzdGF0aWMgcG9pbnRUb1dvcmxkRnJhbWUocG9zaXRpb24sIHF1YXRlcm5pb24sIGxvY2FsUG9pbnQsIHJlc3VsdCA9IG5ldyBWZWMzKCkpIHtcbiAgICBxdWF0ZXJuaW9uLnZtdWx0KGxvY2FsUG9pbnQsIHJlc3VsdCk7XG4gICAgcmVzdWx0LnZhZGQocG9zaXRpb24sIHJlc3VsdCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICAvKipcbiAgICogdmVjdG9yVG9Xb3JsZEZyYW1lXG4gICAqL1xuXG5cbiAgc3RhdGljIHZlY3RvclRvV29ybGRGcmFtZShxdWF0ZXJuaW9uLCBsb2NhbFZlY3RvciwgcmVzdWx0ID0gbmV3IFZlYzMoKSkge1xuICAgIHF1YXRlcm5pb24udm11bHQobG9jYWxWZWN0b3IsIHJlc3VsdCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICAvKipcbiAgICogdmVjdG9yVG9Mb2NhbEZyYW1lXG4gICAqL1xuXG5cbiAgc3RhdGljIHZlY3RvclRvTG9jYWxGcmFtZShwb3NpdGlvbiwgcXVhdGVybmlvbiwgd29ybGRWZWN0b3IsIHJlc3VsdCA9IG5ldyBWZWMzKCkpIHtcbiAgICBxdWF0ZXJuaW9uLncgKj0gLTE7XG4gICAgcXVhdGVybmlvbi52bXVsdCh3b3JsZFZlY3RvciwgcmVzdWx0KTtcbiAgICBxdWF0ZXJuaW9uLncgKj0gLTE7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG59XG5jb25zdCB0bXBRdWF0JDEgPSBuZXcgUXVhdGVybmlvbigpO1xuXG4vKipcbiAqIEEgc2V0IG9mIHBvbHlnb25zIGRlc2NyaWJpbmcgYSBjb252ZXggc2hhcGUuXG4gKlxuICogVGhlIHNoYXBlIE1VU1QgYmUgY29udmV4IGZvciB0aGUgY29kZSB0byB3b3JrIHByb3Blcmx5LiBObyBwb2x5Z29ucyBtYXkgYmUgY29wbGFuYXIgKGNvbnRhaW5lZFxuICogaW4gdGhlIHNhbWUgM0QgcGxhbmUpLCBpbnN0ZWFkIHRoZXNlIHNob3VsZCBiZSBtZXJnZWQgaW50byBvbmUgcG9seWdvbi5cbiAqXG4gKiBAYXV0aG9yIHFpYW8gLyBodHRwczovL2dpdGh1Yi5jb20vcWlhbyAob3JpZ2luYWwgYXV0aG9yLCBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3FpYW8vdGhyZWUuanMvY29tbWl0Lzg1MDI2ZjBjNzY5ZTQwMDAxNDhhNjdkNDVhOWU5YjljNTEwODgzNmYpXG4gKiBAYXV0aG9yIHNjaHRlcHBlIC8gaHR0cHM6Ly9naXRodWIuY29tL3NjaHRlcHBlXG4gKiBAc2VlIGh0dHBzOi8vd3d3LmFsdGRldmJsb2dhZGF5LmNvbS8yMDExLzA1LzEzL2NvbnRhY3QtZ2VuZXJhdGlvbi1iZXR3ZWVuLTNkLWNvbnZleC1tZXNoZXMvXG4gKlxuICogQHRvZG8gTW92ZSB0aGUgY2xpcHBpbmcgZnVuY3Rpb25zIHRvIENvbnRhY3RHZW5lcmF0b3I/XG4gKiBAdG9kbyBBdXRvbWF0aWNhbGx5IG1lcmdlIGNvcGxhbmFyIHBvbHlnb25zIGluIGNvbnN0cnVjdG9yLlxuICogQGV4YW1wbGVcbiAqICAgICBjb25zdCBjb252ZXhTaGFwZSA9IG5ldyBDQU5OT04uQ29udmV4UG9seWhlZHJvbih7IHZlcnRpY2VzLCBmYWNlcyB9KVxuICogICAgIGNvbnN0IGNvbnZleEJvZHkgPSBuZXcgQ0FOTk9OLkJvZHkoeyBtYXNzOiAxLCBzaGFwZTogY29udmV4U2hhcGUgfSlcbiAqICAgICB3b3JsZC5hZGRCb2R5KGNvbnZleEJvZHkpXG4gKi9cbmNsYXNzIENvbnZleFBvbHloZWRyb24gZXh0ZW5kcyBTaGFwZSB7XG4gIC8qKiB2ZXJ0aWNlcyAqL1xuXG4gIC8qKlxuICAgKiBBcnJheSBvZiBpbnRlZ2VyIGFycmF5cywgaW5kaWNhdGluZyB3aGljaCB2ZXJ0aWNlcyBlYWNoIGZhY2UgY29uc2lzdHMgb2ZcbiAgICovXG5cbiAgLyoqIGZhY2VOb3JtYWxzICovXG5cbiAgLyoqIHdvcmxkVmVydGljZXMgKi9cblxuICAvKiogd29ybGRWZXJ0aWNlc05lZWRzVXBkYXRlICovXG5cbiAgLyoqIHdvcmxkRmFjZU5vcm1hbHMgKi9cblxuICAvKiogd29ybGRGYWNlTm9ybWFsc05lZWRzVXBkYXRlICovXG5cbiAgLyoqXG4gICAqIElmIGdpdmVuLCB0aGVzZSBsb2NhbGx5IGRlZmluZWQsIG5vcm1hbGl6ZWQgYXhlcyBhcmUgdGhlIG9ubHkgb25lcyBiZWluZyBjaGVja2VkIHdoZW4gZG9pbmcgc2VwYXJhdGluZyBheGlzIGNoZWNrLlxuICAgKi9cblxuICAvKiogdW5pcXVlRWRnZXMgKi9cblxuICAvKipcbiAgICogQHBhcmFtIHZlcnRpY2VzIEFuIGFycmF5IG9mIFZlYzMnc1xuICAgKiBAcGFyYW0gZmFjZXMgQXJyYXkgb2YgaW50ZWdlciBhcnJheXMsIGRlc2NyaWJpbmcgd2hpY2ggdmVydGljZXMgdGhhdCBpcyBpbmNsdWRlZCBpbiBlYWNoIGZhY2UuXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihwcm9wcyA9IHt9KSB7XG4gICAgY29uc3Qge1xuICAgICAgdmVydGljZXMgPSBbXSxcbiAgICAgIGZhY2VzID0gW10sXG4gICAgICBub3JtYWxzID0gW10sXG4gICAgICBheGVzLFxuICAgICAgYm91bmRpbmdTcGhlcmVSYWRpdXNcbiAgICB9ID0gcHJvcHM7XG4gICAgc3VwZXIoe1xuICAgICAgdHlwZTogU2hhcGUudHlwZXMuQ09OVkVYUE9MWUhFRFJPTlxuICAgIH0pO1xuICAgIHRoaXMudmVydGljZXMgPSB2b2lkIDA7XG4gICAgdGhpcy5mYWNlcyA9IHZvaWQgMDtcbiAgICB0aGlzLmZhY2VOb3JtYWxzID0gdm9pZCAwO1xuICAgIHRoaXMud29ybGRWZXJ0aWNlcyA9IHZvaWQgMDtcbiAgICB0aGlzLndvcmxkVmVydGljZXNOZWVkc1VwZGF0ZSA9IHZvaWQgMDtcbiAgICB0aGlzLndvcmxkRmFjZU5vcm1hbHMgPSB2b2lkIDA7XG4gICAgdGhpcy53b3JsZEZhY2VOb3JtYWxzTmVlZHNVcGRhdGUgPSB2b2lkIDA7XG4gICAgdGhpcy51bmlxdWVBeGVzID0gdm9pZCAwO1xuICAgIHRoaXMudW5pcXVlRWRnZXMgPSB2b2lkIDA7XG4gICAgdGhpcy52ZXJ0aWNlcyA9IHZlcnRpY2VzO1xuICAgIHRoaXMuZmFjZXMgPSBmYWNlcztcbiAgICB0aGlzLmZhY2VOb3JtYWxzID0gbm9ybWFscztcblxuICAgIGlmICh0aGlzLmZhY2VOb3JtYWxzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhpcy5jb21wdXRlTm9ybWFscygpO1xuICAgIH1cblxuICAgIGlmICghYm91bmRpbmdTcGhlcmVSYWRpdXMpIHtcbiAgICAgIHRoaXMudXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IGJvdW5kaW5nU3BoZXJlUmFkaXVzO1xuICAgIH1cblxuICAgIHRoaXMud29ybGRWZXJ0aWNlcyA9IFtdOyAvLyBXb3JsZCB0cmFuc2Zvcm1lZCB2ZXJzaW9uIG9mIC52ZXJ0aWNlc1xuXG4gICAgdGhpcy53b3JsZFZlcnRpY2VzTmVlZHNVcGRhdGUgPSB0cnVlO1xuICAgIHRoaXMud29ybGRGYWNlTm9ybWFscyA9IFtdOyAvLyBXb3JsZCB0cmFuc2Zvcm1lZCB2ZXJzaW9uIG9mIC5mYWNlTm9ybWFsc1xuXG4gICAgdGhpcy53b3JsZEZhY2VOb3JtYWxzTmVlZHNVcGRhdGUgPSB0cnVlO1xuICAgIHRoaXMudW5pcXVlQXhlcyA9IGF4ZXMgPyBheGVzLnNsaWNlKCkgOiBudWxsO1xuICAgIHRoaXMudW5pcXVlRWRnZXMgPSBbXTtcbiAgICB0aGlzLmNvbXB1dGVFZGdlcygpO1xuICB9XG4gIC8qKlxuICAgKiBDb21wdXRlcyB1bmlxdWVFZGdlc1xuICAgKi9cblxuXG4gIGNvbXB1dGVFZGdlcygpIHtcbiAgICBjb25zdCBmYWNlcyA9IHRoaXMuZmFjZXM7XG4gICAgY29uc3QgdmVydGljZXMgPSB0aGlzLnZlcnRpY2VzO1xuICAgIGNvbnN0IGVkZ2VzID0gdGhpcy51bmlxdWVFZGdlcztcbiAgICBlZGdlcy5sZW5ndGggPSAwO1xuICAgIGNvbnN0IGVkZ2UgPSBuZXcgVmVjMygpO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IGZhY2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBmYWNlID0gZmFjZXNbaV07XG4gICAgICBjb25zdCBudW1WZXJ0aWNlcyA9IGZhY2UubGVuZ3RoO1xuXG4gICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gbnVtVmVydGljZXM7IGorKykge1xuICAgICAgICBjb25zdCBrID0gKGogKyAxKSAlIG51bVZlcnRpY2VzO1xuICAgICAgICB2ZXJ0aWNlc1tmYWNlW2pdXS52c3ViKHZlcnRpY2VzW2ZhY2Vba11dLCBlZGdlKTtcbiAgICAgICAgZWRnZS5ub3JtYWxpemUoKTtcbiAgICAgICAgbGV0IGZvdW5kID0gZmFsc2U7XG5cbiAgICAgICAgZm9yIChsZXQgcCA9IDA7IHAgIT09IGVkZ2VzLmxlbmd0aDsgcCsrKSB7XG4gICAgICAgICAgaWYgKGVkZ2VzW3BdLmFsbW9zdEVxdWFscyhlZGdlKSB8fCBlZGdlc1twXS5hbG1vc3RFcXVhbHMoZWRnZSkpIHtcbiAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghZm91bmQpIHtcbiAgICAgICAgICBlZGdlcy5wdXNoKGVkZ2UuY2xvbmUoKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIENvbXB1dGUgdGhlIG5vcm1hbHMgb2YgdGhlIGZhY2VzLlxuICAgKiBXaWxsIHJldXNlIGV4aXN0aW5nIFZlYzMgb2JqZWN0cyBpbiB0aGUgYGZhY2VOb3JtYWxzYCBhcnJheSBpZiB0aGV5IGV4aXN0LlxuICAgKi9cblxuXG4gIGNvbXB1dGVOb3JtYWxzKCkge1xuICAgIHRoaXMuZmFjZU5vcm1hbHMubGVuZ3RoID0gdGhpcy5mYWNlcy5sZW5ndGg7IC8vIEdlbmVyYXRlIG5vcm1hbHNcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5mYWNlcy5sZW5ndGg7IGkrKykge1xuICAgICAgLy8gQ2hlY2sgc28gYWxsIHZlcnRpY2VzIGV4aXN0cyBmb3IgdGhpcyBmYWNlXG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMuZmFjZXNbaV0ubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgaWYgKCF0aGlzLnZlcnRpY2VzW3RoaXMuZmFjZXNbaV1bal1dKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVmVydGV4IFwiICsgdGhpcy5mYWNlc1tpXVtqXSArIFwiIG5vdCBmb3VuZCFcIik7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3QgbiA9IHRoaXMuZmFjZU5vcm1hbHNbaV0gfHwgbmV3IFZlYzMoKTtcbiAgICAgIHRoaXMuZ2V0RmFjZU5vcm1hbChpLCBuKTtcbiAgICAgIG4ubmVnYXRlKG4pO1xuICAgICAgdGhpcy5mYWNlTm9ybWFsc1tpXSA9IG47XG4gICAgICBjb25zdCB2ZXJ0ZXggPSB0aGlzLnZlcnRpY2VzW3RoaXMuZmFjZXNbaV1bMF1dO1xuXG4gICAgICBpZiAobi5kb3QodmVydGV4KSA8IDApIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIi5mYWNlTm9ybWFsc1tcIiArIGkgKyBcIl0gPSBWZWMzKFwiICsgbi50b1N0cmluZygpICsgXCIpIGxvb2tzIGxpa2UgaXQgcG9pbnRzIGludG8gdGhlIHNoYXBlPyBUaGUgdmVydGljZXMgZm9sbG93LiBNYWtlIHN1cmUgdGhleSBhcmUgb3JkZXJlZCBDQ1cgYXJvdW5kIHRoZSBub3JtYWwsIHVzaW5nIHRoZSByaWdodCBoYW5kIHJ1bGUuXCIpO1xuXG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy5mYWNlc1tpXS5sZW5ndGg7IGorKykge1xuICAgICAgICAgIGNvbnNvbGUud2FybihcIi52ZXJ0aWNlc1tcIiArIHRoaXMuZmFjZXNbaV1bal0gKyBcIl0gPSBWZWMzKFwiICsgdGhpcy52ZXJ0aWNlc1t0aGlzLmZhY2VzW2ldW2pdXS50b1N0cmluZygpICsgXCIpXCIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBDb21wdXRlIHRoZSBub3JtYWwgb2YgYSBmYWNlIGZyb20gaXRzIHZlcnRpY2VzXG4gICAqL1xuXG5cbiAgZ2V0RmFjZU5vcm1hbChpLCB0YXJnZXQpIHtcbiAgICBjb25zdCBmID0gdGhpcy5mYWNlc1tpXTtcbiAgICBjb25zdCB2YSA9IHRoaXMudmVydGljZXNbZlswXV07XG4gICAgY29uc3QgdmIgPSB0aGlzLnZlcnRpY2VzW2ZbMV1dO1xuICAgIGNvbnN0IHZjID0gdGhpcy52ZXJ0aWNlc1tmWzJdXTtcbiAgICBDb252ZXhQb2x5aGVkcm9uLmNvbXB1dGVOb3JtYWwodmEsIHZiLCB2YywgdGFyZ2V0KTtcbiAgfVxuICAvKipcbiAgICogR2V0IGZhY2Ugbm9ybWFsIGdpdmVuIDMgdmVydGljZXNcbiAgICovXG5cblxuICBzdGF0aWMgY29tcHV0ZU5vcm1hbCh2YSwgdmIsIHZjLCB0YXJnZXQpIHtcbiAgICBjb25zdCBjYiA9IG5ldyBWZWMzKCk7XG4gICAgY29uc3QgYWIgPSBuZXcgVmVjMygpO1xuICAgIHZiLnZzdWIodmEsIGFiKTtcbiAgICB2Yy52c3ViKHZiLCBjYik7XG4gICAgY2IuY3Jvc3MoYWIsIHRhcmdldCk7XG5cbiAgICBpZiAoIXRhcmdldC5pc1plcm8oKSkge1xuICAgICAgdGFyZ2V0Lm5vcm1hbGl6ZSgpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQHBhcmFtIG1pbkRpc3QgQ2xhbXAgZGlzdGFuY2VcbiAgICogQHBhcmFtIHJlc3VsdCBUaGUgYW4gYXJyYXkgb2YgY29udGFjdCBwb2ludCBvYmplY3RzLCBzZWUgY2xpcEZhY2VBZ2FpbnN0SHVsbFxuICAgKi9cblxuXG4gIGNsaXBBZ2FpbnN0SHVsbChwb3NBLCBxdWF0QSwgaHVsbEIsIHBvc0IsIHF1YXRCLCBzZXBhcmF0aW5nTm9ybWFsLCBtaW5EaXN0LCBtYXhEaXN0LCByZXN1bHQpIHtcbiAgICBjb25zdCBXb3JsZE5vcm1hbCA9IG5ldyBWZWMzKCk7XG4gICAgbGV0IGNsb3Nlc3RGYWNlQiA9IC0xO1xuICAgIGxldCBkbWF4ID0gLU51bWJlci5NQVhfVkFMVUU7XG5cbiAgICBmb3IgKGxldCBmYWNlID0gMDsgZmFjZSA8IGh1bGxCLmZhY2VzLmxlbmd0aDsgZmFjZSsrKSB7XG4gICAgICBXb3JsZE5vcm1hbC5jb3B5KGh1bGxCLmZhY2VOb3JtYWxzW2ZhY2VdKTtcbiAgICAgIHF1YXRCLnZtdWx0KFdvcmxkTm9ybWFsLCBXb3JsZE5vcm1hbCk7XG4gICAgICBjb25zdCBkID0gV29ybGROb3JtYWwuZG90KHNlcGFyYXRpbmdOb3JtYWwpO1xuXG4gICAgICBpZiAoZCA+IGRtYXgpIHtcbiAgICAgICAgZG1heCA9IGQ7XG4gICAgICAgIGNsb3Nlc3RGYWNlQiA9IGZhY2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3Qgd29ybGRWZXJ0c0IxID0gW107XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGh1bGxCLmZhY2VzW2Nsb3Nlc3RGYWNlQl0ubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGIgPSBodWxsQi52ZXJ0aWNlc1todWxsQi5mYWNlc1tjbG9zZXN0RmFjZUJdW2ldXTtcbiAgICAgIGNvbnN0IHdvcmxkYiA9IG5ldyBWZWMzKCk7XG4gICAgICB3b3JsZGIuY29weShiKTtcbiAgICAgIHF1YXRCLnZtdWx0KHdvcmxkYiwgd29ybGRiKTtcbiAgICAgIHBvc0IudmFkZCh3b3JsZGIsIHdvcmxkYik7XG4gICAgICB3b3JsZFZlcnRzQjEucHVzaCh3b3JsZGIpO1xuICAgIH1cblxuICAgIGlmIChjbG9zZXN0RmFjZUIgPj0gMCkge1xuICAgICAgdGhpcy5jbGlwRmFjZUFnYWluc3RIdWxsKHNlcGFyYXRpbmdOb3JtYWwsIHBvc0EsIHF1YXRBLCB3b3JsZFZlcnRzQjEsIG1pbkRpc3QsIG1heERpc3QsIHJlc3VsdCk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBGaW5kIHRoZSBzZXBhcmF0aW5nIGF4aXMgYmV0d2VlbiB0aGlzIGh1bGwgYW5kIGFub3RoZXJcbiAgICogQHBhcmFtIHRhcmdldCBUaGUgdGFyZ2V0IHZlY3RvciB0byBzYXZlIHRoZSBheGlzIGluXG4gICAqIEByZXR1cm4gUmV0dXJucyBmYWxzZSBpZiBhIHNlcGFyYXRpb24gaXMgZm91bmQsIGVsc2UgdHJ1ZVxuICAgKi9cblxuXG4gIGZpbmRTZXBhcmF0aW5nQXhpcyhodWxsQiwgcG9zQSwgcXVhdEEsIHBvc0IsIHF1YXRCLCB0YXJnZXQsIGZhY2VMaXN0QSwgZmFjZUxpc3RCKSB7XG4gICAgY29uc3QgZmFjZUFOb3JtYWxXUzMgPSBuZXcgVmVjMygpO1xuICAgIGNvbnN0IFdvcmxkbm9ybWFsMSA9IG5ldyBWZWMzKCk7XG4gICAgY29uc3QgZGVsdGFDID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCB3b3JsZEVkZ2UwID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCB3b3JsZEVkZ2UxID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCBDcm9zcyA9IG5ldyBWZWMzKCk7XG4gICAgbGV0IGRtaW4gPSBOdW1iZXIuTUFYX1ZBTFVFO1xuICAgIGNvbnN0IGh1bGxBID0gdGhpcztcblxuICAgIGlmICghaHVsbEEudW5pcXVlQXhlcykge1xuICAgICAgY29uc3QgbnVtRmFjZXNBID0gZmFjZUxpc3RBID8gZmFjZUxpc3RBLmxlbmd0aCA6IGh1bGxBLmZhY2VzLmxlbmd0aDsgLy8gVGVzdCBmYWNlIG5vcm1hbHMgZnJvbSBodWxsQVxuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bUZhY2VzQTsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGZpID0gZmFjZUxpc3RBID8gZmFjZUxpc3RBW2ldIDogaTsgLy8gR2V0IHdvcmxkIGZhY2Ugbm9ybWFsXG5cbiAgICAgICAgZmFjZUFOb3JtYWxXUzMuY29weShodWxsQS5mYWNlTm9ybWFsc1tmaV0pO1xuICAgICAgICBxdWF0QS52bXVsdChmYWNlQU5vcm1hbFdTMywgZmFjZUFOb3JtYWxXUzMpO1xuICAgICAgICBjb25zdCBkID0gaHVsbEEudGVzdFNlcEF4aXMoZmFjZUFOb3JtYWxXUzMsIGh1bGxCLCBwb3NBLCBxdWF0QSwgcG9zQiwgcXVhdEIpO1xuXG4gICAgICAgIGlmIChkID09PSBmYWxzZSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkIDwgZG1pbikge1xuICAgICAgICAgIGRtaW4gPSBkO1xuICAgICAgICAgIHRhcmdldC5jb3B5KGZhY2VBTm9ybWFsV1MzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBUZXN0IHVuaXF1ZSBheGVzXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gaHVsbEEudW5pcXVlQXhlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAvLyBHZXQgd29ybGQgYXhpc1xuICAgICAgICBxdWF0QS52bXVsdChodWxsQS51bmlxdWVBeGVzW2ldLCBmYWNlQU5vcm1hbFdTMyk7XG4gICAgICAgIGNvbnN0IGQgPSBodWxsQS50ZXN0U2VwQXhpcyhmYWNlQU5vcm1hbFdTMywgaHVsbEIsIHBvc0EsIHF1YXRBLCBwb3NCLCBxdWF0Qik7XG5cbiAgICAgICAgaWYgKGQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGQgPCBkbWluKSB7XG4gICAgICAgICAgZG1pbiA9IGQ7XG4gICAgICAgICAgdGFyZ2V0LmNvcHkoZmFjZUFOb3JtYWxXUzMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFodWxsQi51bmlxdWVBeGVzKSB7XG4gICAgICAvLyBUZXN0IGZhY2Ugbm9ybWFscyBmcm9tIGh1bGxCXG4gICAgICBjb25zdCBudW1GYWNlc0IgPSBmYWNlTGlzdEIgPyBmYWNlTGlzdEIubGVuZ3RoIDogaHVsbEIuZmFjZXMubGVuZ3RoO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bUZhY2VzQjsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGZpID0gZmFjZUxpc3RCID8gZmFjZUxpc3RCW2ldIDogaTtcbiAgICAgICAgV29ybGRub3JtYWwxLmNvcHkoaHVsbEIuZmFjZU5vcm1hbHNbZmldKTtcbiAgICAgICAgcXVhdEIudm11bHQoV29ybGRub3JtYWwxLCBXb3JsZG5vcm1hbDEpO1xuICAgICAgICBjb25zdCBkID0gaHVsbEEudGVzdFNlcEF4aXMoV29ybGRub3JtYWwxLCBodWxsQiwgcG9zQSwgcXVhdEEsIHBvc0IsIHF1YXRCKTtcblxuICAgICAgICBpZiAoZCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZCA8IGRtaW4pIHtcbiAgICAgICAgICBkbWluID0gZDtcbiAgICAgICAgICB0YXJnZXQuY29weShXb3JsZG5vcm1hbDEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFRlc3QgdW5pcXVlIGF4ZXMgaW4gQlxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IGh1bGxCLnVuaXF1ZUF4ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgcXVhdEIudm11bHQoaHVsbEIudW5pcXVlQXhlc1tpXSwgV29ybGRub3JtYWwxKTtcbiAgICAgICAgY29uc3QgZCA9IGh1bGxBLnRlc3RTZXBBeGlzKFdvcmxkbm9ybWFsMSwgaHVsbEIsIHBvc0EsIHF1YXRBLCBwb3NCLCBxdWF0Qik7XG5cbiAgICAgICAgaWYgKGQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGQgPCBkbWluKSB7XG4gICAgICAgICAgZG1pbiA9IGQ7XG4gICAgICAgICAgdGFyZ2V0LmNvcHkoV29ybGRub3JtYWwxKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gLy8gVGVzdCBlZGdlc1xuXG5cbiAgICBmb3IgKGxldCBlMCA9IDA7IGUwICE9PSBodWxsQS51bmlxdWVFZGdlcy5sZW5ndGg7IGUwKyspIHtcbiAgICAgIC8vIEdldCB3b3JsZCBlZGdlXG4gICAgICBxdWF0QS52bXVsdChodWxsQS51bmlxdWVFZGdlc1tlMF0sIHdvcmxkRWRnZTApO1xuXG4gICAgICBmb3IgKGxldCBlMSA9IDA7IGUxICE9PSBodWxsQi51bmlxdWVFZGdlcy5sZW5ndGg7IGUxKyspIHtcbiAgICAgICAgLy8gR2V0IHdvcmxkIGVkZ2UgMlxuICAgICAgICBxdWF0Qi52bXVsdChodWxsQi51bmlxdWVFZGdlc1tlMV0sIHdvcmxkRWRnZTEpO1xuICAgICAgICB3b3JsZEVkZ2UwLmNyb3NzKHdvcmxkRWRnZTEsIENyb3NzKTtcblxuICAgICAgICBpZiAoIUNyb3NzLmFsbW9zdFplcm8oKSkge1xuICAgICAgICAgIENyb3NzLm5vcm1hbGl6ZSgpO1xuICAgICAgICAgIGNvbnN0IGRpc3QgPSBodWxsQS50ZXN0U2VwQXhpcyhDcm9zcywgaHVsbEIsIHBvc0EsIHF1YXRBLCBwb3NCLCBxdWF0Qik7XG5cbiAgICAgICAgICBpZiAoZGlzdCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoZGlzdCA8IGRtaW4pIHtcbiAgICAgICAgICAgIGRtaW4gPSBkaXN0O1xuICAgICAgICAgICAgdGFyZ2V0LmNvcHkoQ3Jvc3MpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHBvc0IudnN1Yihwb3NBLCBkZWx0YUMpO1xuXG4gICAgaWYgKGRlbHRhQy5kb3QodGFyZ2V0KSA+IDAuMCkge1xuICAgICAgdGFyZ2V0Lm5lZ2F0ZSh0YXJnZXQpO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIC8qKlxuICAgKiBUZXN0IHNlcGFyYXRpbmcgYXhpcyBhZ2FpbnN0IHR3byBodWxscy4gQm90aCBodWxscyBhcmUgcHJvamVjdGVkIG9udG8gdGhlIGF4aXMgYW5kIHRoZSBvdmVybGFwIHNpemUgaXMgcmV0dXJuZWQgaWYgdGhlcmUgaXMgb25lLlxuICAgKiBAcmV0dXJuIFRoZSBvdmVybGFwIGRlcHRoLCBvciBGQUxTRSBpZiBubyBwZW5ldHJhdGlvbi5cbiAgICovXG5cblxuICB0ZXN0U2VwQXhpcyhheGlzLCBodWxsQiwgcG9zQSwgcXVhdEEsIHBvc0IsIHF1YXRCKSB7XG4gICAgY29uc3QgaHVsbEEgPSB0aGlzO1xuICAgIENvbnZleFBvbHloZWRyb24ucHJvamVjdChodWxsQSwgYXhpcywgcG9zQSwgcXVhdEEsIG1heG1pbkEpO1xuICAgIENvbnZleFBvbHloZWRyb24ucHJvamVjdChodWxsQiwgYXhpcywgcG9zQiwgcXVhdEIsIG1heG1pbkIpO1xuICAgIGNvbnN0IG1heEEgPSBtYXhtaW5BWzBdO1xuICAgIGNvbnN0IG1pbkEgPSBtYXhtaW5BWzFdO1xuICAgIGNvbnN0IG1heEIgPSBtYXhtaW5CWzBdO1xuICAgIGNvbnN0IG1pbkIgPSBtYXhtaW5CWzFdO1xuXG4gICAgaWYgKG1heEEgPCBtaW5CIHx8IG1heEIgPCBtaW5BKSB7XG4gICAgICByZXR1cm4gZmFsc2U7IC8vIFNlcGFyYXRlZFxuICAgIH1cblxuICAgIGNvbnN0IGQwID0gbWF4QSAtIG1pbkI7XG4gICAgY29uc3QgZDEgPSBtYXhCIC0gbWluQTtcbiAgICBjb25zdCBkZXB0aCA9IGQwIDwgZDEgPyBkMCA6IGQxO1xuICAgIHJldHVybiBkZXB0aDtcbiAgfVxuICAvKipcbiAgICogY2FsY3VsYXRlTG9jYWxJbmVydGlhXG4gICAqL1xuXG5cbiAgY2FsY3VsYXRlTG9jYWxJbmVydGlhKG1hc3MsIHRhcmdldCkge1xuICAgIC8vIEFwcHJveGltYXRlIHdpdGggYm94IGluZXJ0aWFcbiAgICAvLyBFeGFjdCBpbmVydGlhIGNhbGN1bGF0aW9uIGlzIG92ZXJraWxsLCBidXQgc2VlIGh0dHA6Ly9nZW9tZXRyaWN0b29scy5jb20vRG9jdW1lbnRhdGlvbi9Qb2x5aGVkcmFsTWFzc1Byb3BlcnRpZXMucGRmIGZvciB0aGUgY29ycmVjdCB3YXkgdG8gZG8gaXRcbiAgICBjb25zdCBhYWJibWF4ID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCBhYWJibWluID0gbmV3IFZlYzMoKTtcbiAgICB0aGlzLmNvbXB1dGVMb2NhbEFBQkIoYWFiYm1pbiwgYWFiYm1heCk7XG4gICAgY29uc3QgeCA9IGFhYmJtYXgueCAtIGFhYmJtaW4ueDtcbiAgICBjb25zdCB5ID0gYWFiYm1heC55IC0gYWFiYm1pbi55O1xuICAgIGNvbnN0IHogPSBhYWJibWF4LnogLSBhYWJibWluLno7XG4gICAgdGFyZ2V0LnggPSAxLjAgLyAxMi4wICogbWFzcyAqICgyICogeSAqIDIgKiB5ICsgMiAqIHogKiAyICogeik7XG4gICAgdGFyZ2V0LnkgPSAxLjAgLyAxMi4wICogbWFzcyAqICgyICogeCAqIDIgKiB4ICsgMiAqIHogKiAyICogeik7XG4gICAgdGFyZ2V0LnogPSAxLjAgLyAxMi4wICogbWFzcyAqICgyICogeSAqIDIgKiB5ICsgMiAqIHggKiAyICogeCk7XG4gIH1cbiAgLyoqXG4gICAqIEBwYXJhbSBmYWNlX2kgSW5kZXggb2YgdGhlIGZhY2VcbiAgICovXG5cblxuICBnZXRQbGFuZUNvbnN0YW50T2ZGYWNlKGZhY2VfaSkge1xuICAgIGNvbnN0IGYgPSB0aGlzLmZhY2VzW2ZhY2VfaV07XG4gICAgY29uc3QgbiA9IHRoaXMuZmFjZU5vcm1hbHNbZmFjZV9pXTtcbiAgICBjb25zdCB2ID0gdGhpcy52ZXJ0aWNlc1tmWzBdXTtcbiAgICBjb25zdCBjID0gLW4uZG90KHYpO1xuICAgIHJldHVybiBjO1xuICB9XG4gIC8qKlxuICAgKiBDbGlwIGEgZmFjZSBhZ2FpbnN0IGEgaHVsbC5cbiAgICogQHBhcmFtIHdvcmxkVmVydHNCMSBBbiBhcnJheSBvZiBWZWMzIHdpdGggdmVydGljZXMgaW4gdGhlIHdvcmxkIGZyYW1lLlxuICAgKiBAcGFyYW0gbWluRGlzdCBEaXN0YW5jZSBjbGFtcGluZ1xuICAgKiBAcGFyYW0gQXJyYXkgcmVzdWx0IEFycmF5IHRvIHN0b3JlIHJlc3VsdGluZyBjb250YWN0IHBvaW50cyBpbi4gV2lsbCBiZSBvYmplY3RzIHdpdGggcHJvcGVydGllczogcG9pbnQsIGRlcHRoLCBub3JtYWwuIFRoZXNlIGFyZSByZXByZXNlbnRlZCBpbiB3b3JsZCBjb29yZGluYXRlcy5cbiAgICovXG5cblxuICBjbGlwRmFjZUFnYWluc3RIdWxsKHNlcGFyYXRpbmdOb3JtYWwsIHBvc0EsIHF1YXRBLCB3b3JsZFZlcnRzQjEsIG1pbkRpc3QsIG1heERpc3QsIHJlc3VsdCkge1xuICAgIGNvbnN0IGZhY2VBTm9ybWFsV1MgPSBuZXcgVmVjMygpO1xuICAgIGNvbnN0IGVkZ2UwID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCBXb3JsZEVkZ2UwID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCB3b3JsZFBsYW5lQW5vcm1hbDEgPSBuZXcgVmVjMygpO1xuICAgIGNvbnN0IHBsYW5lTm9ybWFsV1MxID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCB3b3JsZEExID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCBsb2NhbFBsYW5lTm9ybWFsID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCBwbGFuZU5vcm1hbFdTID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCBodWxsQSA9IHRoaXM7XG4gICAgY29uc3Qgd29ybGRWZXJ0c0IyID0gW107XG4gICAgY29uc3QgcFZ0eEluID0gd29ybGRWZXJ0c0IxO1xuICAgIGNvbnN0IHBWdHhPdXQgPSB3b3JsZFZlcnRzQjI7XG4gICAgbGV0IGNsb3Nlc3RGYWNlQSA9IC0xO1xuICAgIGxldCBkbWluID0gTnVtYmVyLk1BWF9WQUxVRTsgLy8gRmluZCB0aGUgZmFjZSB3aXRoIG5vcm1hbCBjbG9zZXN0IHRvIHRoZSBzZXBhcmF0aW5nIGF4aXNcblxuICAgIGZvciAobGV0IGZhY2UgPSAwOyBmYWNlIDwgaHVsbEEuZmFjZXMubGVuZ3RoOyBmYWNlKyspIHtcbiAgICAgIGZhY2VBTm9ybWFsV1MuY29weShodWxsQS5mYWNlTm9ybWFsc1tmYWNlXSk7XG4gICAgICBxdWF0QS52bXVsdChmYWNlQU5vcm1hbFdTLCBmYWNlQU5vcm1hbFdTKTtcbiAgICAgIGNvbnN0IGQgPSBmYWNlQU5vcm1hbFdTLmRvdChzZXBhcmF0aW5nTm9ybWFsKTtcblxuICAgICAgaWYgKGQgPCBkbWluKSB7XG4gICAgICAgIGRtaW4gPSBkO1xuICAgICAgICBjbG9zZXN0RmFjZUEgPSBmYWNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChjbG9zZXN0RmFjZUEgPCAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfSAvLyBHZXQgdGhlIGZhY2UgYW5kIGNvbnN0cnVjdCBjb25uZWN0ZWQgZmFjZXNcblxuXG4gICAgY29uc3QgcG9seUEgPSBodWxsQS5mYWNlc1tjbG9zZXN0RmFjZUFdO1xuICAgIHBvbHlBLmNvbm5lY3RlZEZhY2VzID0gW107XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGh1bGxBLmZhY2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGh1bGxBLmZhY2VzW2ldLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgLyogU2hhcmluZyBhIHZlcnRleCovXG4gICAgICAgIHBvbHlBLmluZGV4T2YoaHVsbEEuZmFjZXNbaV1bal0pICE9PSAtMSAmJlxuICAgICAgICAvKiBOb3QgdGhlIG9uZSB3ZSBhcmUgbG9va2luZyBmb3IgY29ubmVjdGlvbnMgZnJvbSAqL1xuICAgICAgICBpICE9PSBjbG9zZXN0RmFjZUEgJiZcbiAgICAgICAgLyogTm90IGFscmVhZHkgYWRkZWQgKi9cbiAgICAgICAgcG9seUEuY29ubmVjdGVkRmFjZXMuaW5kZXhPZihpKSA9PT0gLTEpIHtcbiAgICAgICAgICBwb2x5QS5jb25uZWN0ZWRGYWNlcy5wdXNoKGkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSAvLyBDbGlwIHRoZSBwb2x5Z29uIHRvIHRoZSBiYWNrIG9mIHRoZSBwbGFuZXMgb2YgYWxsIGZhY2VzIG9mIGh1bGwgQSxcbiAgICAvLyB0aGF0IGFyZSBhZGphY2VudCB0byB0aGUgd2l0bmVzcyBmYWNlXG5cblxuICAgIGNvbnN0IG51bVZlcnRpY2VzQSA9IHBvbHlBLmxlbmd0aDtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtVmVydGljZXNBOyBpKyspIHtcbiAgICAgIGNvbnN0IGEgPSBodWxsQS52ZXJ0aWNlc1twb2x5QVtpXV07XG4gICAgICBjb25zdCBiID0gaHVsbEEudmVydGljZXNbcG9seUFbKGkgKyAxKSAlIG51bVZlcnRpY2VzQV1dO1xuICAgICAgYS52c3ViKGIsIGVkZ2UwKTtcbiAgICAgIFdvcmxkRWRnZTAuY29weShlZGdlMCk7XG4gICAgICBxdWF0QS52bXVsdChXb3JsZEVkZ2UwLCBXb3JsZEVkZ2UwKTtcbiAgICAgIHBvc0EudmFkZChXb3JsZEVkZ2UwLCBXb3JsZEVkZ2UwKTtcbiAgICAgIHdvcmxkUGxhbmVBbm9ybWFsMS5jb3B5KHRoaXMuZmFjZU5vcm1hbHNbY2xvc2VzdEZhY2VBXSk7XG4gICAgICBxdWF0QS52bXVsdCh3b3JsZFBsYW5lQW5vcm1hbDEsIHdvcmxkUGxhbmVBbm9ybWFsMSk7XG4gICAgICBwb3NBLnZhZGQod29ybGRQbGFuZUFub3JtYWwxLCB3b3JsZFBsYW5lQW5vcm1hbDEpO1xuICAgICAgV29ybGRFZGdlMC5jcm9zcyh3b3JsZFBsYW5lQW5vcm1hbDEsIHBsYW5lTm9ybWFsV1MxKTtcbiAgICAgIHBsYW5lTm9ybWFsV1MxLm5lZ2F0ZShwbGFuZU5vcm1hbFdTMSk7XG4gICAgICB3b3JsZEExLmNvcHkoYSk7XG4gICAgICBxdWF0QS52bXVsdCh3b3JsZEExLCB3b3JsZEExKTtcbiAgICAgIHBvc0EudmFkZCh3b3JsZEExLCB3b3JsZEExKTtcbiAgICAgIGNvbnN0IG90aGVyRmFjZSA9IHBvbHlBLmNvbm5lY3RlZEZhY2VzW2ldO1xuICAgICAgbG9jYWxQbGFuZU5vcm1hbC5jb3B5KHRoaXMuZmFjZU5vcm1hbHNbb3RoZXJGYWNlXSk7XG4gICAgICBjb25zdCBsb2NhbFBsYW5lRXEgPSB0aGlzLmdldFBsYW5lQ29uc3RhbnRPZkZhY2Uob3RoZXJGYWNlKTtcbiAgICAgIHBsYW5lTm9ybWFsV1MuY29weShsb2NhbFBsYW5lTm9ybWFsKTtcbiAgICAgIHF1YXRBLnZtdWx0KHBsYW5lTm9ybWFsV1MsIHBsYW5lTm9ybWFsV1MpO1xuICAgICAgY29uc3QgcGxhbmVFcVdTID0gbG9jYWxQbGFuZUVxIC0gcGxhbmVOb3JtYWxXUy5kb3QocG9zQSk7IC8vIENsaXAgZmFjZSBhZ2FpbnN0IG91ciBjb25zdHJ1Y3RlZCBwbGFuZVxuXG4gICAgICB0aGlzLmNsaXBGYWNlQWdhaW5zdFBsYW5lKHBWdHhJbiwgcFZ0eE91dCwgcGxhbmVOb3JtYWxXUywgcGxhbmVFcVdTKTsgLy8gVGhyb3cgYXdheSBhbGwgY2xpcHBlZCBwb2ludHMsIGJ1dCBzYXZlIHRoZSByZW1haW5pbmcgdW50aWwgbmV4dCBjbGlwXG5cbiAgICAgIHdoaWxlIChwVnR4SW4ubGVuZ3RoKSB7XG4gICAgICAgIHBWdHhJbi5zaGlmdCgpO1xuICAgICAgfVxuXG4gICAgICB3aGlsZSAocFZ0eE91dC5sZW5ndGgpIHtcbiAgICAgICAgcFZ0eEluLnB1c2gocFZ0eE91dC5zaGlmdCgpKTtcbiAgICAgIH1cbiAgICB9IC8vIG9ubHkga2VlcCBjb250YWN0IHBvaW50cyB0aGF0IGFyZSBiZWhpbmQgdGhlIHdpdG5lc3MgZmFjZVxuXG5cbiAgICBsb2NhbFBsYW5lTm9ybWFsLmNvcHkodGhpcy5mYWNlTm9ybWFsc1tjbG9zZXN0RmFjZUFdKTtcbiAgICBjb25zdCBsb2NhbFBsYW5lRXEgPSB0aGlzLmdldFBsYW5lQ29uc3RhbnRPZkZhY2UoY2xvc2VzdEZhY2VBKTtcbiAgICBwbGFuZU5vcm1hbFdTLmNvcHkobG9jYWxQbGFuZU5vcm1hbCk7XG4gICAgcXVhdEEudm11bHQocGxhbmVOb3JtYWxXUywgcGxhbmVOb3JtYWxXUyk7XG4gICAgY29uc3QgcGxhbmVFcVdTID0gbG9jYWxQbGFuZUVxIC0gcGxhbmVOb3JtYWxXUy5kb3QocG9zQSk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBWdHhJbi5sZW5ndGg7IGkrKykge1xuICAgICAgbGV0IGRlcHRoID0gcGxhbmVOb3JtYWxXUy5kb3QocFZ0eEluW2ldKSArIHBsYW5lRXFXUzsgLy8gPz8/XG5cbiAgICAgIGlmIChkZXB0aCA8PSBtaW5EaXN0KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiY2xhbXBlZDogZGVwdGg9XCIgKyBkZXB0aCArIFwiIHRvIG1pbkRpc3Q9XCIgKyBtaW5EaXN0KTtcbiAgICAgICAgZGVwdGggPSBtaW5EaXN0O1xuICAgICAgfVxuXG4gICAgICBpZiAoZGVwdGggPD0gbWF4RGlzdCkge1xuICAgICAgICBjb25zdCBwb2ludCA9IHBWdHhJbltpXTtcblxuICAgICAgICBpZiAoZGVwdGggPD0gMWUtNikge1xuICAgICAgICAgIGNvbnN0IHAgPSB7XG4gICAgICAgICAgICBwb2ludCxcbiAgICAgICAgICAgIG5vcm1hbDogcGxhbmVOb3JtYWxXUyxcbiAgICAgICAgICAgIGRlcHRoXG4gICAgICAgICAgfTtcbiAgICAgICAgICByZXN1bHQucHVzaChwKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICAvKipcbiAgICogQ2xpcCBhIGZhY2UgaW4gYSBodWxsIGFnYWluc3QgdGhlIGJhY2sgb2YgYSBwbGFuZS5cbiAgICogQHBhcmFtIHBsYW5lQ29uc3RhbnQgVGhlIGNvbnN0YW50IGluIHRoZSBtYXRoZW1hdGljYWwgcGxhbmUgZXF1YXRpb25cbiAgICovXG5cblxuICBjbGlwRmFjZUFnYWluc3RQbGFuZShpblZlcnRpY2VzLCBvdXRWZXJ0aWNlcywgcGxhbmVOb3JtYWwsIHBsYW5lQ29uc3RhbnQpIHtcbiAgICBsZXQgbl9kb3RfZmlyc3Q7XG4gICAgbGV0IG5fZG90X2xhc3Q7XG4gICAgY29uc3QgbnVtVmVydHMgPSBpblZlcnRpY2VzLmxlbmd0aDtcblxuICAgIGlmIChudW1WZXJ0cyA8IDIpIHtcbiAgICAgIHJldHVybiBvdXRWZXJ0aWNlcztcbiAgICB9XG5cbiAgICBsZXQgZmlyc3RWZXJ0ZXggPSBpblZlcnRpY2VzW2luVmVydGljZXMubGVuZ3RoIC0gMV07XG4gICAgbGV0IGxhc3RWZXJ0ZXggPSBpblZlcnRpY2VzWzBdO1xuICAgIG5fZG90X2ZpcnN0ID0gcGxhbmVOb3JtYWwuZG90KGZpcnN0VmVydGV4KSArIHBsYW5lQ29uc3RhbnQ7XG5cbiAgICBmb3IgKGxldCB2aSA9IDA7IHZpIDwgbnVtVmVydHM7IHZpKyspIHtcbiAgICAgIGxhc3RWZXJ0ZXggPSBpblZlcnRpY2VzW3ZpXTtcbiAgICAgIG5fZG90X2xhc3QgPSBwbGFuZU5vcm1hbC5kb3QobGFzdFZlcnRleCkgKyBwbGFuZUNvbnN0YW50O1xuXG4gICAgICBpZiAobl9kb3RfZmlyc3QgPCAwKSB7XG4gICAgICAgIGlmIChuX2RvdF9sYXN0IDwgMCkge1xuICAgICAgICAgIC8vIFN0YXJ0IDwgMCwgZW5kIDwgMCwgc28gb3V0cHV0IGxhc3RWZXJ0ZXhcbiAgICAgICAgICBjb25zdCBuZXd2ID0gbmV3IFZlYzMoKTtcbiAgICAgICAgICBuZXd2LmNvcHkobGFzdFZlcnRleCk7XG4gICAgICAgICAgb3V0VmVydGljZXMucHVzaChuZXd2KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBTdGFydCA8IDAsIGVuZCA+PSAwLCBzbyBvdXRwdXQgaW50ZXJzZWN0aW9uXG4gICAgICAgICAgY29uc3QgbmV3diA9IG5ldyBWZWMzKCk7XG4gICAgICAgICAgZmlyc3RWZXJ0ZXgubGVycChsYXN0VmVydGV4LCBuX2RvdF9maXJzdCAvIChuX2RvdF9maXJzdCAtIG5fZG90X2xhc3QpLCBuZXd2KTtcbiAgICAgICAgICBvdXRWZXJ0aWNlcy5wdXNoKG5ld3YpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAobl9kb3RfbGFzdCA8IDApIHtcbiAgICAgICAgICAvLyBTdGFydCA+PSAwLCBlbmQgPCAwIHNvIG91dHB1dCBpbnRlcnNlY3Rpb24gYW5kIGVuZFxuICAgICAgICAgIGNvbnN0IG5ld3YgPSBuZXcgVmVjMygpO1xuICAgICAgICAgIGZpcnN0VmVydGV4LmxlcnAobGFzdFZlcnRleCwgbl9kb3RfZmlyc3QgLyAobl9kb3RfZmlyc3QgLSBuX2RvdF9sYXN0KSwgbmV3dik7XG4gICAgICAgICAgb3V0VmVydGljZXMucHVzaChuZXd2KTtcbiAgICAgICAgICBvdXRWZXJ0aWNlcy5wdXNoKGxhc3RWZXJ0ZXgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZpcnN0VmVydGV4ID0gbGFzdFZlcnRleDtcbiAgICAgIG5fZG90X2ZpcnN0ID0gbl9kb3RfbGFzdDtcbiAgICB9XG5cbiAgICByZXR1cm4gb3V0VmVydGljZXM7XG4gIH1cbiAgLyoqXG4gICAqIFVwZGF0ZXMgYC53b3JsZFZlcnRpY2VzYCBhbmQgc2V0cyBgLndvcmxkVmVydGljZXNOZWVkc1VwZGF0ZWAgdG8gZmFsc2UuXG4gICAqL1xuXG5cbiAgY29tcHV0ZVdvcmxkVmVydGljZXMocG9zaXRpb24sIHF1YXQpIHtcbiAgICB3aGlsZSAodGhpcy53b3JsZFZlcnRpY2VzLmxlbmd0aCA8IHRoaXMudmVydGljZXMubGVuZ3RoKSB7XG4gICAgICB0aGlzLndvcmxkVmVydGljZXMucHVzaChuZXcgVmVjMygpKTtcbiAgICB9XG5cbiAgICBjb25zdCB2ZXJ0cyA9IHRoaXMudmVydGljZXM7XG4gICAgY29uc3Qgd29ybGRWZXJ0cyA9IHRoaXMud29ybGRWZXJ0aWNlcztcblxuICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSB0aGlzLnZlcnRpY2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBxdWF0LnZtdWx0KHZlcnRzW2ldLCB3b3JsZFZlcnRzW2ldKTtcbiAgICAgIHBvc2l0aW9uLnZhZGQod29ybGRWZXJ0c1tpXSwgd29ybGRWZXJ0c1tpXSk7XG4gICAgfVxuXG4gICAgdGhpcy53b3JsZFZlcnRpY2VzTmVlZHNVcGRhdGUgPSBmYWxzZTtcbiAgfVxuXG4gIGNvbXB1dGVMb2NhbEFBQkIoYWFiYm1pbiwgYWFiYm1heCkge1xuICAgIGNvbnN0IHZlcnRpY2VzID0gdGhpcy52ZXJ0aWNlcztcbiAgICBhYWJibWluLnNldChOdW1iZXIuTUFYX1ZBTFVFLCBOdW1iZXIuTUFYX1ZBTFVFLCBOdW1iZXIuTUFYX1ZBTFVFKTtcbiAgICBhYWJibWF4LnNldCgtTnVtYmVyLk1BWF9WQUxVRSwgLU51bWJlci5NQVhfVkFMVUUsIC1OdW1iZXIuTUFYX1ZBTFVFKTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy52ZXJ0aWNlcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgdiA9IHZlcnRpY2VzW2ldO1xuXG4gICAgICBpZiAodi54IDwgYWFiYm1pbi54KSB7XG4gICAgICAgIGFhYmJtaW4ueCA9IHYueDtcbiAgICAgIH0gZWxzZSBpZiAodi54ID4gYWFiYm1heC54KSB7XG4gICAgICAgIGFhYmJtYXgueCA9IHYueDtcbiAgICAgIH1cblxuICAgICAgaWYgKHYueSA8IGFhYmJtaW4ueSkge1xuICAgICAgICBhYWJibWluLnkgPSB2Lnk7XG4gICAgICB9IGVsc2UgaWYgKHYueSA+IGFhYmJtYXgueSkge1xuICAgICAgICBhYWJibWF4LnkgPSB2Lnk7XG4gICAgICB9XG5cbiAgICAgIGlmICh2LnogPCBhYWJibWluLnopIHtcbiAgICAgICAgYWFiYm1pbi56ID0gdi56O1xuICAgICAgfSBlbHNlIGlmICh2LnogPiBhYWJibWF4LnopIHtcbiAgICAgICAgYWFiYm1heC56ID0gdi56O1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAvKipcbiAgICogVXBkYXRlcyBgd29ybGRWZXJ0aWNlc2AgYW5kIHNldHMgYHdvcmxkVmVydGljZXNOZWVkc1VwZGF0ZWAgdG8gZmFsc2UuXG4gICAqL1xuXG5cbiAgY29tcHV0ZVdvcmxkRmFjZU5vcm1hbHMocXVhdCkge1xuICAgIGNvbnN0IE4gPSB0aGlzLmZhY2VOb3JtYWxzLmxlbmd0aDtcblxuICAgIHdoaWxlICh0aGlzLndvcmxkRmFjZU5vcm1hbHMubGVuZ3RoIDwgTikge1xuICAgICAgdGhpcy53b3JsZEZhY2VOb3JtYWxzLnB1c2gobmV3IFZlYzMoKSk7XG4gICAgfVxuXG4gICAgY29uc3Qgbm9ybWFscyA9IHRoaXMuZmFjZU5vcm1hbHM7XG4gICAgY29uc3Qgd29ybGROb3JtYWxzID0gdGhpcy53b3JsZEZhY2VOb3JtYWxzO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE47IGkrKykge1xuICAgICAgcXVhdC52bXVsdChub3JtYWxzW2ldLCB3b3JsZE5vcm1hbHNbaV0pO1xuICAgIH1cblxuICAgIHRoaXMud29ybGRGYWNlTm9ybWFsc05lZWRzVXBkYXRlID0gZmFsc2U7XG4gIH1cbiAgLyoqXG4gICAqIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzXG4gICAqL1xuXG5cbiAgdXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKSB7XG4gICAgLy8gQXNzdW1lIHBvaW50cyBhcmUgZGlzdHJpYnV0ZWQgd2l0aCBsb2NhbCAoMCwwLDApIGFzIGNlbnRlclxuICAgIGxldCBtYXgyID0gMDtcbiAgICBjb25zdCB2ZXJ0cyA9IHRoaXMudmVydGljZXM7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gdmVydHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IG5vcm0yID0gdmVydHNbaV0ubGVuZ3RoU3F1YXJlZCgpO1xuXG4gICAgICBpZiAobm9ybTIgPiBtYXgyKSB7XG4gICAgICAgIG1heDIgPSBub3JtMjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmJvdW5kaW5nU3BoZXJlUmFkaXVzID0gTWF0aC5zcXJ0KG1heDIpO1xuICB9XG4gIC8qKlxuICAgKiBjYWxjdWxhdGVXb3JsZEFBQkJcbiAgICovXG5cblxuICBjYWxjdWxhdGVXb3JsZEFBQkIocG9zLCBxdWF0LCBtaW4sIG1heCkge1xuICAgIGNvbnN0IHZlcnRzID0gdGhpcy52ZXJ0aWNlcztcbiAgICBsZXQgbWlueDtcbiAgICBsZXQgbWlueTtcbiAgICBsZXQgbWluejtcbiAgICBsZXQgbWF4eDtcbiAgICBsZXQgbWF4eTtcbiAgICBsZXQgbWF4ejtcbiAgICBsZXQgdGVtcFdvcmxkVmVydGV4ID0gbmV3IFZlYzMoKTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmVydHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRlbXBXb3JsZFZlcnRleC5jb3B5KHZlcnRzW2ldKTtcbiAgICAgIHF1YXQudm11bHQodGVtcFdvcmxkVmVydGV4LCB0ZW1wV29ybGRWZXJ0ZXgpO1xuICAgICAgcG9zLnZhZGQodGVtcFdvcmxkVmVydGV4LCB0ZW1wV29ybGRWZXJ0ZXgpO1xuICAgICAgY29uc3QgdiA9IHRlbXBXb3JsZFZlcnRleDtcblxuICAgICAgaWYgKG1pbnggPT09IHVuZGVmaW5lZCB8fCB2LnggPCBtaW54KSB7XG4gICAgICAgIG1pbnggPSB2Lng7XG4gICAgICB9XG5cbiAgICAgIGlmIChtYXh4ID09PSB1bmRlZmluZWQgfHwgdi54ID4gbWF4eCkge1xuICAgICAgICBtYXh4ID0gdi54O1xuICAgICAgfVxuXG4gICAgICBpZiAobWlueSA9PT0gdW5kZWZpbmVkIHx8IHYueSA8IG1pbnkpIHtcbiAgICAgICAgbWlueSA9IHYueTtcbiAgICAgIH1cblxuICAgICAgaWYgKG1heHkgPT09IHVuZGVmaW5lZCB8fCB2LnkgPiBtYXh5KSB7XG4gICAgICAgIG1heHkgPSB2Lnk7XG4gICAgICB9XG5cbiAgICAgIGlmIChtaW56ID09PSB1bmRlZmluZWQgfHwgdi56IDwgbWlueikge1xuICAgICAgICBtaW56ID0gdi56O1xuICAgICAgfVxuXG4gICAgICBpZiAobWF4eiA9PT0gdW5kZWZpbmVkIHx8IHYueiA+IG1heHopIHtcbiAgICAgICAgbWF4eiA9IHYuejtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBtaW4uc2V0KG1pbngsIG1pbnksIG1pbnopO1xuICAgIG1heC5zZXQobWF4eCwgbWF4eSwgbWF4eik7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBhcHByb3hpbWF0ZSBjb252ZXggdm9sdW1lXG4gICAqL1xuXG5cbiAgdm9sdW1lKCkge1xuICAgIHJldHVybiA0LjAgKiBNYXRoLlBJICogdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyAvIDMuMDtcbiAgfVxuICAvKipcbiAgICogR2V0IGFuIGF2ZXJhZ2Ugb2YgYWxsIHRoZSB2ZXJ0aWNlcyBwb3NpdGlvbnNcbiAgICovXG5cblxuICBnZXRBdmVyYWdlUG9pbnRMb2NhbCh0YXJnZXQgPSBuZXcgVmVjMygpKSB7XG4gICAgY29uc3QgdmVydHMgPSB0aGlzLnZlcnRpY2VzO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2ZXJ0cy5sZW5ndGg7IGkrKykge1xuICAgICAgdGFyZ2V0LnZhZGQodmVydHNbaV0sIHRhcmdldCk7XG4gICAgfVxuXG4gICAgdGFyZ2V0LnNjYWxlKDEgLyB2ZXJ0cy5sZW5ndGgsIHRhcmdldCk7XG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfVxuICAvKipcbiAgICogVHJhbnNmb3JtIGFsbCBsb2NhbCBwb2ludHMuIFdpbGwgY2hhbmdlIHRoZSAudmVydGljZXNcbiAgICovXG5cblxuICB0cmFuc2Zvcm1BbGxQb2ludHMob2Zmc2V0LCBxdWF0KSB7XG4gICAgY29uc3QgbiA9IHRoaXMudmVydGljZXMubGVuZ3RoO1xuICAgIGNvbnN0IHZlcnRzID0gdGhpcy52ZXJ0aWNlczsgLy8gQXBwbHkgcm90YXRpb25cblxuICAgIGlmIChxdWF0KSB7XG4gICAgICAvLyBSb3RhdGUgdmVydGljZXNcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbjsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHYgPSB2ZXJ0c1tpXTtcbiAgICAgICAgcXVhdC52bXVsdCh2LCB2KTtcbiAgICAgIH0gLy8gUm90YXRlIGZhY2Ugbm9ybWFsc1xuXG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5mYWNlTm9ybWFscy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCB2ID0gdGhpcy5mYWNlTm9ybWFsc1tpXTtcbiAgICAgICAgcXVhdC52bXVsdCh2LCB2KTtcbiAgICAgIH1cbiAgICAgIC8qXG4gICAgICAgICAgICAvLyBSb3RhdGUgZWRnZXNcbiAgICAgICAgICAgIGZvcihsZXQgaT0wOyBpPHRoaXMudW5pcXVlRWRnZXMubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgICAgIGNvbnN0IHYgPSB0aGlzLnVuaXF1ZUVkZ2VzW2ldO1xuICAgICAgICAgICAgICAgIHF1YXQudm11bHQodix2KTtcbiAgICAgICAgICAgIH0qL1xuXG4gICAgfSAvLyBBcHBseSBvZmZzZXRcblxuXG4gICAgaWYgKG9mZnNldCkge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgY29uc3QgdiA9IHZlcnRzW2ldO1xuICAgICAgICB2LnZhZGQob2Zmc2V0LCB2KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIENoZWNrcyB3aGV0aGVyIHAgaXMgaW5zaWRlIHRoZSBwb2x5aGVkcmEuIE11c3QgYmUgaW4gbG9jYWwgY29vcmRzLlxuICAgKiBUaGUgcG9pbnQgbGllcyBvdXRzaWRlIG9mIHRoZSBjb252ZXggaHVsbCBvZiB0aGUgb3RoZXIgcG9pbnRzIGlmIGFuZCBvbmx5IGlmIHRoZSBkaXJlY3Rpb25cbiAgICogb2YgYWxsIHRoZSB2ZWN0b3JzIGZyb20gaXQgdG8gdGhvc2Ugb3RoZXIgcG9pbnRzIGFyZSBvbiBsZXNzIHRoYW4gb25lIGhhbGYgb2YgYSBzcGhlcmUgYXJvdW5kIGl0LlxuICAgKiBAcGFyYW0gcCBBIHBvaW50IGdpdmVuIGluIGxvY2FsIGNvb3JkaW5hdGVzXG4gICAqL1xuXG5cbiAgcG9pbnRJc0luc2lkZShwKSB7XG4gICAgY29uc3QgdmVydHMgPSB0aGlzLnZlcnRpY2VzO1xuICAgIGNvbnN0IGZhY2VzID0gdGhpcy5mYWNlcztcbiAgICBjb25zdCBub3JtYWxzID0gdGhpcy5mYWNlTm9ybWFscztcbiAgICBjb25zdCBwb2ludEluc2lkZSA9IG5ldyBWZWMzKCk7XG4gICAgdGhpcy5nZXRBdmVyYWdlUG9pbnRMb2NhbChwb2ludEluc2lkZSk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZmFjZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCBuID0gbm9ybWFsc1tpXTtcbiAgICAgIGNvbnN0IHYgPSB2ZXJ0c1tmYWNlc1tpXVswXV07IC8vIFdlIG9ubHkgbmVlZCBvbmUgcG9pbnQgaW4gdGhlIGZhY2VcbiAgICAgIC8vIFRoaXMgZG90IHByb2R1Y3QgZGV0ZXJtaW5lcyB3aGljaCBzaWRlIG9mIHRoZSBlZGdlIHRoZSBwb2ludCBpc1xuXG4gICAgICBjb25zdCB2VG9QID0gbmV3IFZlYzMoKTtcbiAgICAgIHAudnN1Yih2LCB2VG9QKTtcbiAgICAgIGNvbnN0IHIxID0gbi5kb3QodlRvUCk7XG4gICAgICBjb25zdCB2VG9Qb2ludEluc2lkZSA9IG5ldyBWZWMzKCk7XG4gICAgICBwb2ludEluc2lkZS52c3ViKHYsIHZUb1BvaW50SW5zaWRlKTtcbiAgICAgIGNvbnN0IHIyID0gbi5kb3QodlRvUG9pbnRJbnNpZGUpO1xuXG4gICAgICBpZiAocjEgPCAwICYmIHIyID4gMCB8fCByMSA+IDAgJiYgcjIgPCAwKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTsgLy8gRW5jb3VudGVyZWQgc29tZSBvdGhlciBzaWduLiBFeGl0LlxuICAgICAgfVxuICAgIH0gLy8gSWYgd2UgZ290IGhlcmUsIGFsbCBkb3QgcHJvZHVjdHMgd2VyZSBvZiB0aGUgc2FtZSBzaWduLlxuXG5cbiAgICByZXR1cm4gLTE7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBtYXggYW5kIG1pbiBkb3QgcHJvZHVjdCBvZiBhIGNvbnZleCBodWxsIGF0IHBvc2l0aW9uIChwb3MscXVhdCkgcHJvamVjdGVkIG9udG8gYW4gYXhpcy5cbiAgICogUmVzdWx0cyBhcmUgc2F2ZWQgaW4gdGhlIGFycmF5IG1heG1pbi5cbiAgICogQHBhcmFtIHJlc3VsdCByZXN1bHRbMF0gYW5kIHJlc3VsdFsxXSB3aWxsIGJlIHNldCB0byBtYXhpbXVtIGFuZCBtaW5pbXVtLCByZXNwZWN0aXZlbHkuXG4gICAqL1xuXG5cbiAgc3RhdGljIHByb2plY3Qoc2hhcGUsIGF4aXMsIHBvcywgcXVhdCwgcmVzdWx0KSB7XG4gICAgY29uc3QgbiA9IHNoYXBlLnZlcnRpY2VzLmxlbmd0aDtcbiAgICBjb25zdCBsb2NhbEF4aXMgPSBwcm9qZWN0X2xvY2FsQXhpcztcbiAgICBsZXQgbWF4ID0gMDtcbiAgICBsZXQgbWluID0gMDtcbiAgICBjb25zdCBsb2NhbE9yaWdpbiA9IHByb2plY3RfbG9jYWxPcmlnaW47XG4gICAgY29uc3QgdnMgPSBzaGFwZS52ZXJ0aWNlcztcbiAgICBsb2NhbE9yaWdpbi5zZXRaZXJvKCk7IC8vIFRyYW5zZm9ybSB0aGUgYXhpcyB0byBsb2NhbFxuXG4gICAgVHJhbnNmb3JtLnZlY3RvclRvTG9jYWxGcmFtZShwb3MsIHF1YXQsIGF4aXMsIGxvY2FsQXhpcyk7XG4gICAgVHJhbnNmb3JtLnBvaW50VG9Mb2NhbEZyYW1lKHBvcywgcXVhdCwgbG9jYWxPcmlnaW4sIGxvY2FsT3JpZ2luKTtcbiAgICBjb25zdCBhZGQgPSBsb2NhbE9yaWdpbi5kb3QobG9jYWxBeGlzKTtcbiAgICBtaW4gPSBtYXggPSB2c1swXS5kb3QobG9jYWxBeGlzKTtcblxuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgbjsgaSsrKSB7XG4gICAgICBjb25zdCB2YWwgPSB2c1tpXS5kb3QobG9jYWxBeGlzKTtcblxuICAgICAgaWYgKHZhbCA+IG1heCkge1xuICAgICAgICBtYXggPSB2YWw7XG4gICAgICB9XG5cbiAgICAgIGlmICh2YWwgPCBtaW4pIHtcbiAgICAgICAgbWluID0gdmFsO1xuICAgICAgfVxuICAgIH1cblxuICAgIG1pbiAtPSBhZGQ7XG4gICAgbWF4IC09IGFkZDtcblxuICAgIGlmIChtaW4gPiBtYXgpIHtcbiAgICAgIC8vIEluY29uc2lzdGVudCAtIHN3YXBcbiAgICAgIGNvbnN0IHRlbXAgPSBtaW47XG4gICAgICBtaW4gPSBtYXg7XG4gICAgICBtYXggPSB0ZW1wO1xuICAgIH0gLy8gT3V0cHV0XG5cblxuICAgIHJlc3VsdFswXSA9IG1heDtcbiAgICByZXN1bHRbMV0gPSBtaW47XG4gIH1cblxufVxuY29uc3QgbWF4bWluQSA9IFtdO1xuY29uc3QgbWF4bWluQiA9IFtdO1xuY29uc3QgcHJvamVjdF9sb2NhbEF4aXMgPSBuZXcgVmVjMygpO1xuY29uc3QgcHJvamVjdF9sb2NhbE9yaWdpbiA9IG5ldyBWZWMzKCk7XG5cbi8qKlxuICogQSAzZCBib3ggc2hhcGUuXG4gKiBAZXhhbXBsZVxuICogICAgIGNvbnN0IHNpemUgPSAxXG4gKiAgICAgY29uc3QgaGFsZkV4dGVudHMgPSBuZXcgQ0FOTk9OLlZlYzMoc2l6ZSwgc2l6ZSwgc2l6ZSlcbiAqICAgICBjb25zdCBib3hTaGFwZSA9IG5ldyBDQU5OT04uQm94KGhhbGZFeHRlbnRzKVxuICogICAgIGNvbnN0IGJveEJvZHkgPSBuZXcgQ0FOTk9OLkJvZHkoeyBtYXNzOiAxLCBzaGFwZTogYm94U2hhcGUgfSlcbiAqICAgICB3b3JsZC5hZGRCb2R5KGJveEJvZHkpXG4gKi9cbmNsYXNzIEJveCBleHRlbmRzIFNoYXBlIHtcbiAgLyoqXG4gICAqIFRoZSBoYWxmIGV4dGVudHMgb2YgdGhlIGJveC5cbiAgICovXG5cbiAgLyoqXG4gICAqIFVzZWQgYnkgdGhlIGNvbnRhY3QgZ2VuZXJhdG9yIHRvIG1ha2UgY29udGFjdHMgd2l0aCBvdGhlciBjb252ZXggcG9seWhlZHJhIGZvciBleGFtcGxlLlxuICAgKi9cbiAgY29uc3RydWN0b3IoaGFsZkV4dGVudHMpIHtcbiAgICBzdXBlcih7XG4gICAgICB0eXBlOiBTaGFwZS50eXBlcy5CT1hcbiAgICB9KTtcbiAgICB0aGlzLmhhbGZFeHRlbnRzID0gdm9pZCAwO1xuICAgIHRoaXMuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uID0gdm9pZCAwO1xuICAgIHRoaXMuaGFsZkV4dGVudHMgPSBoYWxmRXh0ZW50cztcbiAgICB0aGlzLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbiA9IG51bGw7XG4gICAgdGhpcy51cGRhdGVDb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24oKTtcbiAgICB0aGlzLnVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCk7XG4gIH1cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhlIGxvY2FsIGNvbnZleCBwb2x5aGVkcm9uIHJlcHJlc2VudGF0aW9uIHVzZWQgZm9yIHNvbWUgY29sbGlzaW9ucy5cbiAgICovXG5cblxuICB1cGRhdGVDb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24oKSB7XG4gICAgY29uc3Qgc3ggPSB0aGlzLmhhbGZFeHRlbnRzLng7XG4gICAgY29uc3Qgc3kgPSB0aGlzLmhhbGZFeHRlbnRzLnk7XG4gICAgY29uc3Qgc3ogPSB0aGlzLmhhbGZFeHRlbnRzLno7XG4gICAgY29uc3QgViA9IFZlYzM7XG4gICAgY29uc3QgdmVydGljZXMgPSBbbmV3IFYoLXN4LCAtc3ksIC1zeiksIG5ldyBWKHN4LCAtc3ksIC1zeiksIG5ldyBWKHN4LCBzeSwgLXN6KSwgbmV3IFYoLXN4LCBzeSwgLXN6KSwgbmV3IFYoLXN4LCAtc3ksIHN6KSwgbmV3IFYoc3gsIC1zeSwgc3opLCBuZXcgVihzeCwgc3ksIHN6KSwgbmV3IFYoLXN4LCBzeSwgc3opXTtcbiAgICBjb25zdCBmYWNlcyA9IFtbMywgMiwgMSwgMF0sIC8vIC16XG4gICAgWzQsIDUsIDYsIDddLCAvLyArelxuICAgIFs1LCA0LCAwLCAxXSwgLy8gLXlcbiAgICBbMiwgMywgNywgNl0sIC8vICt5XG4gICAgWzAsIDQsIDcsIDNdLCAvLyAteFxuICAgIFsxLCAyLCA2LCA1XSAvLyAreFxuICAgIF07XG4gICAgY29uc3QgYXhlcyA9IFtuZXcgVigwLCAwLCAxKSwgbmV3IFYoMCwgMSwgMCksIG5ldyBWKDEsIDAsIDApXTtcbiAgICBjb25zdCBoID0gbmV3IENvbnZleFBvbHloZWRyb24oe1xuICAgICAgdmVydGljZXMsXG4gICAgICBmYWNlcyxcbiAgICAgIGF4ZXNcbiAgICB9KTtcbiAgICB0aGlzLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbiA9IGg7XG4gICAgaC5tYXRlcmlhbCA9IHRoaXMubWF0ZXJpYWw7XG4gIH1cbiAgLyoqXG4gICAqIENhbGN1bGF0ZSB0aGUgaW5lcnRpYSBvZiB0aGUgYm94LlxuICAgKi9cblxuXG4gIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYShtYXNzLCB0YXJnZXQgPSBuZXcgVmVjMygpKSB7XG4gICAgQm94LmNhbGN1bGF0ZUluZXJ0aWEodGhpcy5oYWxmRXh0ZW50cywgbWFzcywgdGFyZ2V0KTtcbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9XG5cbiAgc3RhdGljIGNhbGN1bGF0ZUluZXJ0aWEoaGFsZkV4dGVudHMsIG1hc3MsIHRhcmdldCkge1xuICAgIGNvbnN0IGUgPSBoYWxmRXh0ZW50cztcbiAgICB0YXJnZXQueCA9IDEuMCAvIDEyLjAgKiBtYXNzICogKDIgKiBlLnkgKiAyICogZS55ICsgMiAqIGUueiAqIDIgKiBlLnopO1xuICAgIHRhcmdldC55ID0gMS4wIC8gMTIuMCAqIG1hc3MgKiAoMiAqIGUueCAqIDIgKiBlLnggKyAyICogZS56ICogMiAqIGUueik7XG4gICAgdGFyZ2V0LnogPSAxLjAgLyAxMi4wICogbWFzcyAqICgyICogZS55ICogMiAqIGUueSArIDIgKiBlLnggKiAyICogZS54KTtcbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSBib3ggNiBzaWRlIG5vcm1hbHNcbiAgICogQHBhcmFtIHNpeFRhcmdldFZlY3RvcnMgQW4gYXJyYXkgb2YgNiB2ZWN0b3JzLCB0byBzdG9yZSB0aGUgcmVzdWx0aW5nIHNpZGUgbm9ybWFscyBpbi5cbiAgICogQHBhcmFtIHF1YXQgT3JpZW50YXRpb24gdG8gYXBwbHkgdG8gdGhlIG5vcm1hbCB2ZWN0b3JzLiBJZiBub3QgcHJvdmlkZWQsIHRoZSB2ZWN0b3JzIHdpbGwgYmUgaW4gcmVzcGVjdCB0byB0aGUgbG9jYWwgZnJhbWUuXG4gICAqL1xuXG5cbiAgZ2V0U2lkZU5vcm1hbHMoc2l4VGFyZ2V0VmVjdG9ycywgcXVhdCkge1xuICAgIGNvbnN0IHNpZGVzID0gc2l4VGFyZ2V0VmVjdG9ycztcbiAgICBjb25zdCBleCA9IHRoaXMuaGFsZkV4dGVudHM7XG4gICAgc2lkZXNbMF0uc2V0KGV4LngsIDAsIDApO1xuICAgIHNpZGVzWzFdLnNldCgwLCBleC55LCAwKTtcbiAgICBzaWRlc1syXS5zZXQoMCwgMCwgZXgueik7XG4gICAgc2lkZXNbM10uc2V0KC1leC54LCAwLCAwKTtcbiAgICBzaWRlc1s0XS5zZXQoMCwgLWV4LnksIDApO1xuICAgIHNpZGVzWzVdLnNldCgwLCAwLCAtZXgueik7XG5cbiAgICBpZiAocXVhdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gc2lkZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgcXVhdC52bXVsdChzaWRlc1tpXSwgc2lkZXNbaV0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBzaWRlcztcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyB0aGUgdm9sdW1lIG9mIHRoZSBib3guXG4gICAqL1xuXG5cbiAgdm9sdW1lKCkge1xuICAgIHJldHVybiA4LjAgKiB0aGlzLmhhbGZFeHRlbnRzLnggKiB0aGlzLmhhbGZFeHRlbnRzLnkgKiB0aGlzLmhhbGZFeHRlbnRzLno7XG4gIH1cbiAgLyoqXG4gICAqIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzXG4gICAqL1xuXG5cbiAgdXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKSB7XG4gICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IHRoaXMuaGFsZkV4dGVudHMubGVuZ3RoKCk7XG4gIH1cbiAgLyoqXG4gICAqIGZvckVhY2hXb3JsZENvcm5lclxuICAgKi9cblxuXG4gIGZvckVhY2hXb3JsZENvcm5lcihwb3MsIHF1YXQsIGNhbGxiYWNrKSB7XG4gICAgY29uc3QgZSA9IHRoaXMuaGFsZkV4dGVudHM7XG4gICAgY29uc3QgY29ybmVycyA9IFtbZS54LCBlLnksIGUuel0sIFstZS54LCBlLnksIGUuel0sIFstZS54LCAtZS55LCBlLnpdLCBbLWUueCwgLWUueSwgLWUuel0sIFtlLngsIC1lLnksIC1lLnpdLCBbZS54LCBlLnksIC1lLnpdLCBbLWUueCwgZS55LCAtZS56XSwgW2UueCwgLWUueSwgZS56XV07XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvcm5lcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHdvcmxkQ29ybmVyVGVtcFBvcy5zZXQoY29ybmVyc1tpXVswXSwgY29ybmVyc1tpXVsxXSwgY29ybmVyc1tpXVsyXSk7XG4gICAgICBxdWF0LnZtdWx0KHdvcmxkQ29ybmVyVGVtcFBvcywgd29ybGRDb3JuZXJUZW1wUG9zKTtcbiAgICAgIHBvcy52YWRkKHdvcmxkQ29ybmVyVGVtcFBvcywgd29ybGRDb3JuZXJUZW1wUG9zKTtcbiAgICAgIGNhbGxiYWNrKHdvcmxkQ29ybmVyVGVtcFBvcy54LCB3b3JsZENvcm5lclRlbXBQb3MueSwgd29ybGRDb3JuZXJUZW1wUG9zLnopO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogY2FsY3VsYXRlV29ybGRBQUJCXG4gICAqL1xuXG5cbiAgY2FsY3VsYXRlV29ybGRBQUJCKHBvcywgcXVhdCwgbWluLCBtYXgpIHtcbiAgICBjb25zdCBlID0gdGhpcy5oYWxmRXh0ZW50cztcbiAgICB3b3JsZENvcm5lcnNUZW1wWzBdLnNldChlLngsIGUueSwgZS56KTtcbiAgICB3b3JsZENvcm5lcnNUZW1wWzFdLnNldCgtZS54LCBlLnksIGUueik7XG4gICAgd29ybGRDb3JuZXJzVGVtcFsyXS5zZXQoLWUueCwgLWUueSwgZS56KTtcbiAgICB3b3JsZENvcm5lcnNUZW1wWzNdLnNldCgtZS54LCAtZS55LCAtZS56KTtcbiAgICB3b3JsZENvcm5lcnNUZW1wWzRdLnNldChlLngsIC1lLnksIC1lLnopO1xuICAgIHdvcmxkQ29ybmVyc1RlbXBbNV0uc2V0KGUueCwgZS55LCAtZS56KTtcbiAgICB3b3JsZENvcm5lcnNUZW1wWzZdLnNldCgtZS54LCBlLnksIC1lLnopO1xuICAgIHdvcmxkQ29ybmVyc1RlbXBbN10uc2V0KGUueCwgLWUueSwgZS56KTtcbiAgICBjb25zdCB3YyA9IHdvcmxkQ29ybmVyc1RlbXBbMF07XG4gICAgcXVhdC52bXVsdCh3Yywgd2MpO1xuICAgIHBvcy52YWRkKHdjLCB3Yyk7XG4gICAgbWF4LmNvcHkod2MpO1xuICAgIG1pbi5jb3B5KHdjKTtcblxuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgODsgaSsrKSB7XG4gICAgICBjb25zdCB3YyA9IHdvcmxkQ29ybmVyc1RlbXBbaV07XG4gICAgICBxdWF0LnZtdWx0KHdjLCB3Yyk7XG4gICAgICBwb3MudmFkZCh3Yywgd2MpO1xuICAgICAgY29uc3QgeCA9IHdjLng7XG4gICAgICBjb25zdCB5ID0gd2MueTtcbiAgICAgIGNvbnN0IHogPSB3Yy56O1xuXG4gICAgICBpZiAoeCA+IG1heC54KSB7XG4gICAgICAgIG1heC54ID0geDtcbiAgICAgIH1cblxuICAgICAgaWYgKHkgPiBtYXgueSkge1xuICAgICAgICBtYXgueSA9IHk7XG4gICAgICB9XG5cbiAgICAgIGlmICh6ID4gbWF4LnopIHtcbiAgICAgICAgbWF4LnogPSB6O1xuICAgICAgfVxuXG4gICAgICBpZiAoeCA8IG1pbi54KSB7XG4gICAgICAgIG1pbi54ID0geDtcbiAgICAgIH1cblxuICAgICAgaWYgKHkgPCBtaW4ueSkge1xuICAgICAgICBtaW4ueSA9IHk7XG4gICAgICB9XG5cbiAgICAgIGlmICh6IDwgbWluLnopIHtcbiAgICAgICAgbWluLnogPSB6O1xuICAgICAgfVxuICAgIH0gLy8gR2V0IGVhY2ggYXhpcyBtYXhcbiAgICAvLyBtaW4uc2V0KEluZmluaXR5LEluZmluaXR5LEluZmluaXR5KTtcbiAgICAvLyBtYXguc2V0KC1JbmZpbml0eSwtSW5maW5pdHksLUluZmluaXR5KTtcbiAgICAvLyB0aGlzLmZvckVhY2hXb3JsZENvcm5lcihwb3MscXVhdCxmdW5jdGlvbih4LHkseil7XG4gICAgLy8gICAgIGlmKHggPiBtYXgueCl7XG4gICAgLy8gICAgICAgICBtYXgueCA9IHg7XG4gICAgLy8gICAgIH1cbiAgICAvLyAgICAgaWYoeSA+IG1heC55KXtcbiAgICAvLyAgICAgICAgIG1heC55ID0geTtcbiAgICAvLyAgICAgfVxuICAgIC8vICAgICBpZih6ID4gbWF4Lnope1xuICAgIC8vICAgICAgICAgbWF4LnogPSB6O1xuICAgIC8vICAgICB9XG4gICAgLy8gICAgIGlmKHggPCBtaW4ueCl7XG4gICAgLy8gICAgICAgICBtaW4ueCA9IHg7XG4gICAgLy8gICAgIH1cbiAgICAvLyAgICAgaWYoeSA8IG1pbi55KXtcbiAgICAvLyAgICAgICAgIG1pbi55ID0geTtcbiAgICAvLyAgICAgfVxuICAgIC8vICAgICBpZih6IDwgbWluLnope1xuICAgIC8vICAgICAgICAgbWluLnogPSB6O1xuICAgIC8vICAgICB9XG4gICAgLy8gfSk7XG5cbiAgfVxuXG59XG5jb25zdCB3b3JsZENvcm5lclRlbXBQb3MgPSBuZXcgVmVjMygpO1xuY29uc3Qgd29ybGRDb3JuZXJzVGVtcCA9IFtuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpXTtcblxuLyoqXG4gKiBCT0RZX1RZUEVTXG4gKi9cbmNvbnN0IEJPRFlfVFlQRVMgPSB7XG4gIC8qKiBEWU5BTUlDICovXG4gIERZTkFNSUM6IDEsXG5cbiAgLyoqIFNUQVRJQyAqL1xuICBTVEFUSUM6IDIsXG5cbiAgLyoqIEtJTkVNQVRJQyAqL1xuICBLSU5FTUFUSUM6IDRcbn07XG4vKipcbiAqIEJvZHlUeXBlXG4gKi9cblxuLyoqXG4gKiBCT0RZX1NMRUVQX1NUQVRFU1xuICovXG5jb25zdCBCT0RZX1NMRUVQX1NUQVRFUyA9IHtcbiAgLyoqIEFXQUtFICovXG4gIEFXQUtFOiAwLFxuXG4gIC8qKiBTTEVFUFkgKi9cbiAgU0xFRVBZOiAxLFxuXG4gIC8qKiBTTEVFUElORyAqL1xuICBTTEVFUElORzogMlxufTtcbi8qKlxuICogQm9keVNsZWVwU3RhdGVcbiAqL1xuXG4vKipcbiAqIEJhc2UgY2xhc3MgZm9yIGFsbCBib2R5IHR5cGVzLlxuICogQGV4YW1wbGVcbiAqICAgICBjb25zdCBzaGFwZSA9IG5ldyBDQU5OT04uU3BoZXJlKDEpXG4gKiAgICAgY29uc3QgYm9keSA9IG5ldyBDQU5OT04uQm9keSh7XG4gKiAgICAgICBtYXNzOiAxLFxuICogICAgICAgc2hhcGUsXG4gKiAgICAgfSlcbiAqICAgICB3b3JsZC5hZGRCb2R5KGJvZHkpXG4gKi9cbmNsYXNzIEJvZHkgZXh0ZW5kcyBFdmVudFRhcmdldCB7XG4gIC8qKlxuICAgKiBEaXNwYXRjaGVkIGFmdGVyIHR3byBib2RpZXMgY29sbGlkZS4gVGhpcyBldmVudCBpcyBkaXNwYXRjaGVkIG9uIGVhY2hcbiAgICogb2YgdGhlIHR3byBib2RpZXMgaW52b2x2ZWQgaW4gdGhlIGNvbGxpc2lvbi5cbiAgICogQGV2ZW50IGNvbGxpZGVcbiAgICogQHBhcmFtIGJvZHkgVGhlIGJvZHkgdGhhdCB3YXMgaW52b2x2ZWQgaW4gdGhlIGNvbGxpc2lvbi5cbiAgICogQHBhcmFtIGNvbnRhY3QgVGhlIGRldGFpbHMgb2YgdGhlIGNvbGxpc2lvbi5cbiAgICovXG5cbiAgLyoqXG4gICAqIEEgZHluYW1pYyBib2R5IGlzIGZ1bGx5IHNpbXVsYXRlZC4gQ2FuIGJlIG1vdmVkIG1hbnVhbGx5IGJ5IHRoZSB1c2VyLCBidXQgbm9ybWFsbHkgdGhleSBtb3ZlIGFjY29yZGluZyB0byBmb3JjZXMuIEEgZHluYW1pYyBib2R5IGNhbiBjb2xsaWRlIHdpdGggYWxsIGJvZHkgdHlwZXMuIEEgZHluYW1pYyBib2R5IGFsd2F5cyBoYXMgZmluaXRlLCBub24temVybyBtYXNzLlxuICAgKi9cblxuICAvKipcbiAgICogQSBzdGF0aWMgYm9keSBkb2VzIG5vdCBtb3ZlIGR1cmluZyBzaW11bGF0aW9uIGFuZCBiZWhhdmVzIGFzIGlmIGl0IGhhcyBpbmZpbml0ZSBtYXNzLiBTdGF0aWMgYm9kaWVzIGNhbiBiZSBtb3ZlZCBtYW51YWxseSBieSBzZXR0aW5nIHRoZSBwb3NpdGlvbiBvZiB0aGUgYm9keS4gVGhlIHZlbG9jaXR5IG9mIGEgc3RhdGljIGJvZHkgaXMgYWx3YXlzIHplcm8uIFN0YXRpYyBib2RpZXMgZG8gbm90IGNvbGxpZGUgd2l0aCBvdGhlciBzdGF0aWMgb3Iga2luZW1hdGljIGJvZGllcy5cbiAgICovXG5cbiAgLyoqXG4gICAqIEEga2luZW1hdGljIGJvZHkgbW92ZXMgdW5kZXIgc2ltdWxhdGlvbiBhY2NvcmRpbmcgdG8gaXRzIHZlbG9jaXR5LiBUaGV5IGRvIG5vdCByZXNwb25kIHRvIGZvcmNlcy4gVGhleSBjYW4gYmUgbW92ZWQgbWFudWFsbHksIGJ1dCBub3JtYWxseSBhIGtpbmVtYXRpYyBib2R5IGlzIG1vdmVkIGJ5IHNldHRpbmcgaXRzIHZlbG9jaXR5LiBBIGtpbmVtYXRpYyBib2R5IGJlaGF2ZXMgYXMgaWYgaXQgaGFzIGluZmluaXRlIG1hc3MuIEtpbmVtYXRpYyBib2RpZXMgZG8gbm90IGNvbGxpZGUgd2l0aCBvdGhlciBzdGF0aWMgb3Iga2luZW1hdGljIGJvZGllcy5cbiAgICovXG5cbiAgLyoqXG4gICAqIEFXQUtFXG4gICAqL1xuXG4gIC8qKlxuICAgKiBTTEVFUFlcbiAgICovXG5cbiAgLyoqXG4gICAqIFNMRUVQSU5HXG4gICAqL1xuXG4gIC8qKlxuICAgKiBEaXNwYXRjaGVkIGFmdGVyIGEgc2xlZXBpbmcgYm9keSBoYXMgd29rZW4gdXAuXG4gICAqIEBldmVudCB3YWtldXBcbiAgICovXG5cbiAgLyoqXG4gICAqIERpc3BhdGNoZWQgYWZ0ZXIgYSBib2R5IGhhcyBnb25lIGluIHRvIHRoZSBzbGVlcHkgc3RhdGUuXG4gICAqIEBldmVudCBzbGVlcHlcbiAgICovXG5cbiAgLyoqXG4gICAqIERpc3BhdGNoZWQgYWZ0ZXIgYSBib2R5IGhhcyBmYWxsZW4gYXNsZWVwLlxuICAgKiBAZXZlbnQgc2xlZXBcbiAgICovXG5cbiAgLyoqXG4gICAqIElkZW50aWZpZXIgb2YgdGhlIGJvZHkuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBQb3NpdGlvbiBvZiBib2R5IGluIFdvcmxkLmJvZGllcy4gVXBkYXRlZCBieSBXb3JsZCBhbmQgdXNlZCBpbiBBcnJheUNvbGxpc2lvbk1hdHJpeC5cbiAgICovXG5cbiAgLyoqXG4gICAqIFJlZmVyZW5jZSB0byB0aGUgd29ybGQgdGhlIGJvZHkgaXMgbGl2aW5nIGluLlxuICAgKi9cblxuICAvKipcbiAgICogQ2FsbGJhY2sgZnVuY3Rpb24gdGhhdCBpcyB1c2VkIEJFRk9SRSBzdGVwcGluZyB0aGUgc3lzdGVtLiBVc2UgaXQgdG8gYXBwbHkgZm9yY2VzLCBmb3IgZXhhbXBsZS4gSW5zaWRlIHRoZSBmdW5jdGlvbiwgXCJ0aGlzXCIgd2lsbCByZWZlciB0byB0aGlzIEJvZHkgb2JqZWN0LiBEZXByZWNhdGVkIC0gdXNlIFdvcmxkIGV2ZW50cyBpbnN0ZWFkLlxuICAgKiBAZGVwcmVjYXRlZCBVc2UgV29ybGQgZXZlbnRzIGluc3RlYWRcbiAgICovXG5cbiAgLyoqXG4gICAqIENhbGxiYWNrIGZ1bmN0aW9uIHRoYXQgaXMgdXNlZCBBRlRFUiBzdGVwcGluZyB0aGUgc3lzdGVtLiBJbnNpZGUgdGhlIGZ1bmN0aW9uLCBcInRoaXNcIiB3aWxsIHJlZmVyIHRvIHRoaXMgQm9keSBvYmplY3QuIERlcHJlY2F0ZWQgLSB1c2UgV29ybGQgZXZlbnRzIGluc3RlYWQuXG4gICAqIEBkZXByZWNhdGVkIFVzZSBXb3JsZCBldmVudHMgaW5zdGVhZFxuICAgKi9cblxuICAvKipcbiAgICogVGhlIGNvbGxpc2lvbiBncm91cCB0aGUgYm9keSBiZWxvbmdzIHRvLlxuICAgKiBAZGVmYXVsdCAxXG4gICAqL1xuXG4gIC8qKlxuICAgKiBUaGUgY29sbGlzaW9uIGdyb3VwIHRoZSBib2R5IGNhbiBjb2xsaWRlIHdpdGguXG4gICAqIEBkZWZhdWx0IC0xXG4gICAqL1xuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIHByb2R1Y2UgY29udGFjdCBmb3JjZXMgd2hlbiBpbiBjb250YWN0IHdpdGggb3RoZXIgYm9kaWVzLiBOb3RlIHRoYXQgY29udGFjdHMgd2lsbCBiZSBnZW5lcmF0ZWQsIGJ1dCB0aGV5IHdpbGwgYmUgZGlzYWJsZWQgLSBpLmUuIFwiY29sbGlkZVwiIGV2ZW50cyB3aWxsIGJlIHJhaXNlZCwgYnV0IGZvcmNlcyB3aWxsIG5vdCBiZSBhbHRlcmVkLlxuICAgKi9cblxuICAvKipcbiAgICogV29ybGQgc3BhY2UgcG9zaXRpb24gb2YgdGhlIGJvZHkuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBJbnRlcnBvbGF0ZWQgcG9zaXRpb24gb2YgdGhlIGJvZHkuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBJbml0aWFsIHBvc2l0aW9uIG9mIHRoZSBib2R5LlxuICAgKi9cblxuICAvKipcbiAgICogV29ybGQgc3BhY2UgdmVsb2NpdHkgb2YgdGhlIGJvZHkuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBJbml0aWFsIHZlbG9jaXR5IG9mIHRoZSBib2R5LlxuICAgKi9cblxuICAvKipcbiAgICogTGluZWFyIGZvcmNlIG9uIHRoZSBib2R5IGluIHdvcmxkIHNwYWNlLlxuICAgKi9cblxuICAvKipcbiAgICogVGhlIG1hc3Mgb2YgdGhlIGJvZHkuXG4gICAqIEBkZWZhdWx0IDBcbiAgICovXG5cbiAgLyoqXG4gICAqIFRoZSBwaHlzaWNzIG1hdGVyaWFsIG9mIHRoZSBib2R5LiBJdCBkZWZpbmVzIHRoZSBib2R5IGludGVyYWN0aW9uIHdpdGggb3RoZXIgYm9kaWVzLlxuICAgKi9cblxuICAvKipcbiAgICogSG93IG11Y2ggdG8gZGFtcCB0aGUgYm9keSB2ZWxvY2l0eSBlYWNoIHN0ZXAuIEl0IGNhbiBnbyBmcm9tIDAgdG8gMS5cbiAgICogQGRlZmF1bHQgMC4wMVxuICAgKi9cblxuICAvKipcbiAgICogT25lIG9mOiBgQm9keS5EWU5BTUlDYCwgYEJvZHkuU1RBVElDYCBhbmQgYEJvZHkuS0lORU1BVElDYC5cbiAgICovXG5cbiAgLyoqXG4gICAqIElmIHRydWUsIHRoZSBib2R5IHdpbGwgYXV0b21hdGljYWxseSBmYWxsIHRvIHNsZWVwLlxuICAgKiBAZGVmYXVsdCB0cnVlXG4gICAqL1xuXG4gIC8qKlxuICAgKiBDdXJyZW50IHNsZWVwIHN0YXRlLlxuICAgKi9cblxuICAvKipcbiAgICogSWYgdGhlIHNwZWVkICh0aGUgbm9ybSBvZiB0aGUgdmVsb2NpdHkpIGlzIHNtYWxsZXIgdGhhbiB0aGlzIHZhbHVlLCB0aGUgYm9keSBpcyBjb25zaWRlcmVkIHNsZWVweS5cbiAgICogQGRlZmF1bHQgMC4xXG4gICAqL1xuXG4gIC8qKlxuICAgKiBJZiB0aGUgYm9keSBoYXMgYmVlbiBzbGVlcHkgZm9yIHRoaXMgc2xlZXBUaW1lTGltaXQgc2Vjb25kcywgaXQgaXMgY29uc2lkZXJlZCBzbGVlcGluZy5cbiAgICogQGRlZmF1bHQgMVxuICAgKi9cblxuICAvKipcbiAgICogV29ybGQgc3BhY2Ugcm90YXRpb25hbCBmb3JjZSBvbiB0aGUgYm9keSwgYXJvdW5kIGNlbnRlciBvZiBtYXNzLlxuICAgKi9cblxuICAvKipcbiAgICogV29ybGQgc3BhY2Ugb3JpZW50YXRpb24gb2YgdGhlIGJvZHkuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBJbml0aWFsIHF1YXRlcm5pb24gb2YgdGhlIGJvZHkuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBJbnRlcnBvbGF0ZWQgb3JpZW50YXRpb24gb2YgdGhlIGJvZHkuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBBbmd1bGFyIHZlbG9jaXR5IG9mIHRoZSBib2R5LCBpbiB3b3JsZCBzcGFjZS4gVGhpbmsgb2YgdGhlIGFuZ3VsYXIgdmVsb2NpdHkgYXMgYSB2ZWN0b3IsIHdoaWNoIHRoZSBib2R5IHJvdGF0ZXMgYXJvdW5kLiBUaGUgbGVuZ3RoIG9mIHRoaXMgdmVjdG9yIGRldGVybWluZXMgaG93IGZhc3QgKGluIHJhZGlhbnMgcGVyIHNlY29uZCkgdGhlIGJvZHkgcm90YXRlcy5cbiAgICovXG5cbiAgLyoqXG4gICAqIEluaXRpYWwgYW5ndWxhciB2ZWxvY2l0eSBvZiB0aGUgYm9keS5cbiAgICovXG5cbiAgLyoqXG4gICAqIExpc3Qgb2YgU2hhcGVzIHRoYXQgaGF2ZSBiZWVuIGFkZGVkIHRvIHRoZSBib2R5LlxuICAgKi9cblxuICAvKipcbiAgICogUG9zaXRpb24gb2YgZWFjaCBTaGFwZSBpbiB0aGUgYm9keSwgZ2l2ZW4gaW4gbG9jYWwgQm9keSBzcGFjZS5cbiAgICovXG5cbiAgLyoqXG4gICAqIE9yaWVudGF0aW9uIG9mIGVhY2ggU2hhcGUsIGdpdmVuIGluIGxvY2FsIEJvZHkgc3BhY2UuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBUaGUgaW5lcnRpYSBvZiB0aGUgYm9keS5cbiAgICovXG5cbiAgLyoqXG4gICAqIFNldCB0byB0cnVlIGlmIHlvdSBkb24ndCB3YW50IHRoZSBib2R5IHRvIHJvdGF0ZS4gTWFrZSBzdXJlIHRvIHJ1biAudXBkYXRlTWFzc1Byb3BlcnRpZXMoKSBpZiB5b3UgY2hhbmdlIHRoaXMgYWZ0ZXIgdGhlIGJvZHkgY3JlYXRpb24uXG4gICAqIEBkZWZhdWx0IGZhbHNlXG4gICAqL1xuXG4gIC8qKlxuICAgKiBIb3cgbXVjaCB0byBkYW1wIHRoZSBib2R5IGFuZ3VsYXIgdmVsb2NpdHkgZWFjaCBzdGVwLiBJdCBjYW4gZ28gZnJvbSAwIHRvIDEuXG4gICAqIEBkZWZhdWx0IDAuMDFcbiAgICovXG5cbiAgLyoqXG4gICAqIFVzZSB0aGlzIHByb3BlcnR5IHRvIGxpbWl0IHRoZSBtb3Rpb24gYWxvbmcgYW55IHdvcmxkIGF4aXMuICgxLDEsMSkgd2lsbCBhbGxvdyBtb3Rpb24gYWxvbmcgYWxsIGF4ZXMgd2hpbGUgKDAsMCwwKSBhbGxvd3Mgbm9uZS5cbiAgICovXG5cbiAgLyoqXG4gICAqIFVzZSB0aGlzIHByb3BlcnR5IHRvIGxpbWl0IHRoZSByb3RhdGlvbmFsIG1vdGlvbiBhbG9uZyBhbnkgd29ybGQgYXhpcy4gKDEsMSwxKSB3aWxsIGFsbG93IHJvdGF0aW9uIGFsb25nIGFsbCBheGVzIHdoaWxlICgwLDAsMCkgYWxsb3dzIG5vbmUuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBXb3JsZCBzcGFjZSBib3VuZGluZyBib3ggb2YgdGhlIGJvZHkgYW5kIGl0cyBzaGFwZXMuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBJbmRpY2F0ZXMgaWYgdGhlIEFBQkIgbmVlZHMgdG8gYmUgdXBkYXRlZCBiZWZvcmUgdXNlLlxuICAgKi9cblxuICAvKipcbiAgICogVG90YWwgYm91bmRpbmcgcmFkaXVzIG9mIHRoZSBCb2R5IGluY2x1ZGluZyBpdHMgc2hhcGVzLCByZWxhdGl2ZSB0byBib2R5LnBvc2l0aW9uLlxuICAgKi9cblxuICAvKipcbiAgICogV2hlbiB0cnVlIHRoZSBib2R5IGJlaGF2ZXMgbGlrZSBhIHRyaWdnZXIuIEl0IGRvZXMgbm90IGNvbGxpZGVcbiAgICogd2l0aCBvdGhlciBib2RpZXMgYnV0IGNvbGxpc2lvbiBldmVudHMgYXJlIHN0aWxsIHRyaWdnZXJlZC5cbiAgICogQGRlZmF1bHQgZmFsc2VcbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5pZCA9IHZvaWQgMDtcbiAgICB0aGlzLmluZGV4ID0gdm9pZCAwO1xuICAgIHRoaXMud29ybGQgPSB2b2lkIDA7XG4gICAgdGhpcy5wcmVTdGVwID0gdm9pZCAwO1xuICAgIHRoaXMucG9zdFN0ZXAgPSB2b2lkIDA7XG4gICAgdGhpcy52bGFtYmRhID0gdm9pZCAwO1xuICAgIHRoaXMuY29sbGlzaW9uRmlsdGVyR3JvdXAgPSB2b2lkIDA7XG4gICAgdGhpcy5jb2xsaXNpb25GaWx0ZXJNYXNrID0gdm9pZCAwO1xuICAgIHRoaXMuY29sbGlzaW9uUmVzcG9uc2UgPSB2b2lkIDA7XG4gICAgdGhpcy5wb3NpdGlvbiA9IHZvaWQgMDtcbiAgICB0aGlzLnByZXZpb3VzUG9zaXRpb24gPSB2b2lkIDA7XG4gICAgdGhpcy5pbnRlcnBvbGF0ZWRQb3NpdGlvbiA9IHZvaWQgMDtcbiAgICB0aGlzLmluaXRQb3NpdGlvbiA9IHZvaWQgMDtcbiAgICB0aGlzLnZlbG9jaXR5ID0gdm9pZCAwO1xuICAgIHRoaXMuaW5pdFZlbG9jaXR5ID0gdm9pZCAwO1xuICAgIHRoaXMuZm9yY2UgPSB2b2lkIDA7XG4gICAgdGhpcy5tYXNzID0gdm9pZCAwO1xuICAgIHRoaXMuaW52TWFzcyA9IHZvaWQgMDtcbiAgICB0aGlzLm1hdGVyaWFsID0gdm9pZCAwO1xuICAgIHRoaXMubGluZWFyRGFtcGluZyA9IHZvaWQgMDtcbiAgICB0aGlzLnR5cGUgPSB2b2lkIDA7XG4gICAgdGhpcy5hbGxvd1NsZWVwID0gdm9pZCAwO1xuICAgIHRoaXMuc2xlZXBTdGF0ZSA9IHZvaWQgMDtcbiAgICB0aGlzLnNsZWVwU3BlZWRMaW1pdCA9IHZvaWQgMDtcbiAgICB0aGlzLnNsZWVwVGltZUxpbWl0ID0gdm9pZCAwO1xuICAgIHRoaXMudGltZUxhc3RTbGVlcHkgPSB2b2lkIDA7XG4gICAgdGhpcy53YWtlVXBBZnRlck5hcnJvd3BoYXNlID0gdm9pZCAwO1xuICAgIHRoaXMudG9ycXVlID0gdm9pZCAwO1xuICAgIHRoaXMucXVhdGVybmlvbiA9IHZvaWQgMDtcbiAgICB0aGlzLmluaXRRdWF0ZXJuaW9uID0gdm9pZCAwO1xuICAgIHRoaXMucHJldmlvdXNRdWF0ZXJuaW9uID0gdm9pZCAwO1xuICAgIHRoaXMuaW50ZXJwb2xhdGVkUXVhdGVybmlvbiA9IHZvaWQgMDtcbiAgICB0aGlzLmFuZ3VsYXJWZWxvY2l0eSA9IHZvaWQgMDtcbiAgICB0aGlzLmluaXRBbmd1bGFyVmVsb2NpdHkgPSB2b2lkIDA7XG4gICAgdGhpcy5zaGFwZXMgPSB2b2lkIDA7XG4gICAgdGhpcy5zaGFwZU9mZnNldHMgPSB2b2lkIDA7XG4gICAgdGhpcy5zaGFwZU9yaWVudGF0aW9ucyA9IHZvaWQgMDtcbiAgICB0aGlzLmluZXJ0aWEgPSB2b2lkIDA7XG4gICAgdGhpcy5pbnZJbmVydGlhID0gdm9pZCAwO1xuICAgIHRoaXMuaW52SW5lcnRpYVdvcmxkID0gdm9pZCAwO1xuICAgIHRoaXMuaW52TWFzc1NvbHZlID0gdm9pZCAwO1xuICAgIHRoaXMuaW52SW5lcnRpYVNvbHZlID0gdm9pZCAwO1xuICAgIHRoaXMuaW52SW5lcnRpYVdvcmxkU29sdmUgPSB2b2lkIDA7XG4gICAgdGhpcy5maXhlZFJvdGF0aW9uID0gdm9pZCAwO1xuICAgIHRoaXMuYW5ndWxhckRhbXBpbmcgPSB2b2lkIDA7XG4gICAgdGhpcy5saW5lYXJGYWN0b3IgPSB2b2lkIDA7XG4gICAgdGhpcy5hbmd1bGFyRmFjdG9yID0gdm9pZCAwO1xuICAgIHRoaXMuYWFiYiA9IHZvaWQgMDtcbiAgICB0aGlzLmFhYmJOZWVkc1VwZGF0ZSA9IHZvaWQgMDtcbiAgICB0aGlzLmJvdW5kaW5nUmFkaXVzID0gdm9pZCAwO1xuICAgIHRoaXMud2xhbWJkYSA9IHZvaWQgMDtcbiAgICB0aGlzLmlzVHJpZ2dlciA9IHZvaWQgMDtcbiAgICB0aGlzLmlkID0gQm9keS5pZENvdW50ZXIrKztcbiAgICB0aGlzLmluZGV4ID0gLTE7XG4gICAgdGhpcy53b3JsZCA9IG51bGw7XG4gICAgdGhpcy5wcmVTdGVwID0gbnVsbDtcbiAgICB0aGlzLnBvc3RTdGVwID0gbnVsbDtcbiAgICB0aGlzLnZsYW1iZGEgPSBuZXcgVmVjMygpO1xuICAgIHRoaXMuY29sbGlzaW9uRmlsdGVyR3JvdXAgPSB0eXBlb2Ygb3B0aW9ucy5jb2xsaXNpb25GaWx0ZXJHcm91cCA9PT0gJ251bWJlcicgPyBvcHRpb25zLmNvbGxpc2lvbkZpbHRlckdyb3VwIDogMTtcbiAgICB0aGlzLmNvbGxpc2lvbkZpbHRlck1hc2sgPSB0eXBlb2Ygb3B0aW9ucy5jb2xsaXNpb25GaWx0ZXJNYXNrID09PSAnbnVtYmVyJyA/IG9wdGlvbnMuY29sbGlzaW9uRmlsdGVyTWFzayA6IC0xO1xuICAgIHRoaXMuY29sbGlzaW9uUmVzcG9uc2UgPSB0eXBlb2Ygb3B0aW9ucy5jb2xsaXNpb25SZXNwb25zZSA9PT0gJ2Jvb2xlYW4nID8gb3B0aW9ucy5jb2xsaXNpb25SZXNwb25zZSA6IHRydWU7XG4gICAgdGhpcy5wb3NpdGlvbiA9IG5ldyBWZWMzKCk7XG4gICAgdGhpcy5wcmV2aW91c1Bvc2l0aW9uID0gbmV3IFZlYzMoKTtcbiAgICB0aGlzLmludGVycG9sYXRlZFBvc2l0aW9uID0gbmV3IFZlYzMoKTtcbiAgICB0aGlzLmluaXRQb3NpdGlvbiA9IG5ldyBWZWMzKCk7XG5cbiAgICBpZiAob3B0aW9ucy5wb3NpdGlvbikge1xuICAgICAgdGhpcy5wb3NpdGlvbi5jb3B5KG9wdGlvbnMucG9zaXRpb24pO1xuICAgICAgdGhpcy5wcmV2aW91c1Bvc2l0aW9uLmNvcHkob3B0aW9ucy5wb3NpdGlvbik7XG4gICAgICB0aGlzLmludGVycG9sYXRlZFBvc2l0aW9uLmNvcHkob3B0aW9ucy5wb3NpdGlvbik7XG4gICAgICB0aGlzLmluaXRQb3NpdGlvbi5jb3B5KG9wdGlvbnMucG9zaXRpb24pO1xuICAgIH1cblxuICAgIHRoaXMudmVsb2NpdHkgPSBuZXcgVmVjMygpO1xuXG4gICAgaWYgKG9wdGlvbnMudmVsb2NpdHkpIHtcbiAgICAgIHRoaXMudmVsb2NpdHkuY29weShvcHRpb25zLnZlbG9jaXR5KTtcbiAgICB9XG5cbiAgICB0aGlzLmluaXRWZWxvY2l0eSA9IG5ldyBWZWMzKCk7XG4gICAgdGhpcy5mb3JjZSA9IG5ldyBWZWMzKCk7XG4gICAgY29uc3QgbWFzcyA9IHR5cGVvZiBvcHRpb25zLm1hc3MgPT09ICdudW1iZXInID8gb3B0aW9ucy5tYXNzIDogMDtcbiAgICB0aGlzLm1hc3MgPSBtYXNzO1xuICAgIHRoaXMuaW52TWFzcyA9IG1hc3MgPiAwID8gMS4wIC8gbWFzcyA6IDA7XG4gICAgdGhpcy5tYXRlcmlhbCA9IG9wdGlvbnMubWF0ZXJpYWwgfHwgbnVsbDtcbiAgICB0aGlzLmxpbmVhckRhbXBpbmcgPSB0eXBlb2Ygb3B0aW9ucy5saW5lYXJEYW1waW5nID09PSAnbnVtYmVyJyA/IG9wdGlvbnMubGluZWFyRGFtcGluZyA6IDAuMDE7XG4gICAgdGhpcy50eXBlID0gbWFzcyA8PSAwLjAgPyBCb2R5LlNUQVRJQyA6IEJvZHkuRFlOQU1JQztcblxuICAgIGlmICh0eXBlb2Ygb3B0aW9ucy50eXBlID09PSB0eXBlb2YgQm9keS5TVEFUSUMpIHtcbiAgICAgIHRoaXMudHlwZSA9IG9wdGlvbnMudHlwZTtcbiAgICB9XG5cbiAgICB0aGlzLmFsbG93U2xlZXAgPSB0eXBlb2Ygb3B0aW9ucy5hbGxvd1NsZWVwICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuYWxsb3dTbGVlcCA6IHRydWU7XG4gICAgdGhpcy5zbGVlcFN0YXRlID0gQm9keS5BV0FLRTtcbiAgICB0aGlzLnNsZWVwU3BlZWRMaW1pdCA9IHR5cGVvZiBvcHRpb25zLnNsZWVwU3BlZWRMaW1pdCAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLnNsZWVwU3BlZWRMaW1pdCA6IDAuMTtcbiAgICB0aGlzLnNsZWVwVGltZUxpbWl0ID0gdHlwZW9mIG9wdGlvbnMuc2xlZXBUaW1lTGltaXQgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5zbGVlcFRpbWVMaW1pdCA6IDE7XG4gICAgdGhpcy50aW1lTGFzdFNsZWVweSA9IDA7XG4gICAgdGhpcy53YWtlVXBBZnRlck5hcnJvd3BoYXNlID0gZmFsc2U7XG4gICAgdGhpcy50b3JxdWUgPSBuZXcgVmVjMygpO1xuICAgIHRoaXMucXVhdGVybmlvbiA9IG5ldyBRdWF0ZXJuaW9uKCk7XG4gICAgdGhpcy5pbml0UXVhdGVybmlvbiA9IG5ldyBRdWF0ZXJuaW9uKCk7XG4gICAgdGhpcy5wcmV2aW91c1F1YXRlcm5pb24gPSBuZXcgUXVhdGVybmlvbigpO1xuICAgIHRoaXMuaW50ZXJwb2xhdGVkUXVhdGVybmlvbiA9IG5ldyBRdWF0ZXJuaW9uKCk7XG5cbiAgICBpZiAob3B0aW9ucy5xdWF0ZXJuaW9uKSB7XG4gICAgICB0aGlzLnF1YXRlcm5pb24uY29weShvcHRpb25zLnF1YXRlcm5pb24pO1xuICAgICAgdGhpcy5pbml0UXVhdGVybmlvbi5jb3B5KG9wdGlvbnMucXVhdGVybmlvbik7XG4gICAgICB0aGlzLnByZXZpb3VzUXVhdGVybmlvbi5jb3B5KG9wdGlvbnMucXVhdGVybmlvbik7XG4gICAgICB0aGlzLmludGVycG9sYXRlZFF1YXRlcm5pb24uY29weShvcHRpb25zLnF1YXRlcm5pb24pO1xuICAgIH1cblxuICAgIHRoaXMuYW5ndWxhclZlbG9jaXR5ID0gbmV3IFZlYzMoKTtcblxuICAgIGlmIChvcHRpb25zLmFuZ3VsYXJWZWxvY2l0eSkge1xuICAgICAgdGhpcy5hbmd1bGFyVmVsb2NpdHkuY29weShvcHRpb25zLmFuZ3VsYXJWZWxvY2l0eSk7XG4gICAgfVxuXG4gICAgdGhpcy5pbml0QW5ndWxhclZlbG9jaXR5ID0gbmV3IFZlYzMoKTtcbiAgICB0aGlzLnNoYXBlcyA9IFtdO1xuICAgIHRoaXMuc2hhcGVPZmZzZXRzID0gW107XG4gICAgdGhpcy5zaGFwZU9yaWVudGF0aW9ucyA9IFtdO1xuICAgIHRoaXMuaW5lcnRpYSA9IG5ldyBWZWMzKCk7XG4gICAgdGhpcy5pbnZJbmVydGlhID0gbmV3IFZlYzMoKTtcbiAgICB0aGlzLmludkluZXJ0aWFXb3JsZCA9IG5ldyBNYXQzKCk7XG4gICAgdGhpcy5pbnZNYXNzU29sdmUgPSAwO1xuICAgIHRoaXMuaW52SW5lcnRpYVNvbHZlID0gbmV3IFZlYzMoKTtcbiAgICB0aGlzLmludkluZXJ0aWFXb3JsZFNvbHZlID0gbmV3IE1hdDMoKTtcbiAgICB0aGlzLmZpeGVkUm90YXRpb24gPSB0eXBlb2Ygb3B0aW9ucy5maXhlZFJvdGF0aW9uICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuZml4ZWRSb3RhdGlvbiA6IGZhbHNlO1xuICAgIHRoaXMuYW5ndWxhckRhbXBpbmcgPSB0eXBlb2Ygb3B0aW9ucy5hbmd1bGFyRGFtcGluZyAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmFuZ3VsYXJEYW1waW5nIDogMC4wMTtcbiAgICB0aGlzLmxpbmVhckZhY3RvciA9IG5ldyBWZWMzKDEsIDEsIDEpO1xuXG4gICAgaWYgKG9wdGlvbnMubGluZWFyRmFjdG9yKSB7XG4gICAgICB0aGlzLmxpbmVhckZhY3Rvci5jb3B5KG9wdGlvbnMubGluZWFyRmFjdG9yKTtcbiAgICB9XG5cbiAgICB0aGlzLmFuZ3VsYXJGYWN0b3IgPSBuZXcgVmVjMygxLCAxLCAxKTtcblxuICAgIGlmIChvcHRpb25zLmFuZ3VsYXJGYWN0b3IpIHtcbiAgICAgIHRoaXMuYW5ndWxhckZhY3Rvci5jb3B5KG9wdGlvbnMuYW5ndWxhckZhY3Rvcik7XG4gICAgfVxuXG4gICAgdGhpcy5hYWJiID0gbmV3IEFBQkIoKTtcbiAgICB0aGlzLmFhYmJOZWVkc1VwZGF0ZSA9IHRydWU7XG4gICAgdGhpcy5ib3VuZGluZ1JhZGl1cyA9IDA7XG4gICAgdGhpcy53bGFtYmRhID0gbmV3IFZlYzMoKTtcbiAgICB0aGlzLmlzVHJpZ2dlciA9IEJvb2xlYW4ob3B0aW9ucy5pc1RyaWdnZXIpO1xuXG4gICAgaWYgKG9wdGlvbnMuc2hhcGUpIHtcbiAgICAgIHRoaXMuYWRkU2hhcGUob3B0aW9ucy5zaGFwZSk7XG4gICAgfVxuXG4gICAgdGhpcy51cGRhdGVNYXNzUHJvcGVydGllcygpO1xuICB9XG4gIC8qKlxuICAgKiBXYWtlIHRoZSBib2R5IHVwLlxuICAgKi9cblxuXG4gIHdha2VVcCgpIHtcbiAgICBjb25zdCBwcmV2U3RhdGUgPSB0aGlzLnNsZWVwU3RhdGU7XG4gICAgdGhpcy5zbGVlcFN0YXRlID0gQm9keS5BV0FLRTtcbiAgICB0aGlzLndha2VVcEFmdGVyTmFycm93cGhhc2UgPSBmYWxzZTtcblxuICAgIGlmIChwcmV2U3RhdGUgPT09IEJvZHkuU0xFRVBJTkcpIHtcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChCb2R5Lndha2V1cEV2ZW50KTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEZvcmNlIGJvZHkgc2xlZXBcbiAgICovXG5cblxuICBzbGVlcCgpIHtcbiAgICB0aGlzLnNsZWVwU3RhdGUgPSBCb2R5LlNMRUVQSU5HO1xuICAgIHRoaXMudmVsb2NpdHkuc2V0KDAsIDAsIDApO1xuICAgIHRoaXMuYW5ndWxhclZlbG9jaXR5LnNldCgwLCAwLCAwKTtcbiAgICB0aGlzLndha2VVcEFmdGVyTmFycm93cGhhc2UgPSBmYWxzZTtcbiAgfVxuICAvKipcbiAgICogQ2FsbGVkIGV2ZXJ5IHRpbWVzdGVwIHRvIHVwZGF0ZSBpbnRlcm5hbCBzbGVlcCB0aW1lciBhbmQgY2hhbmdlIHNsZWVwIHN0YXRlIGlmIG5lZWRlZC5cbiAgICogQHBhcmFtIHRpbWUgVGhlIHdvcmxkIHRpbWUgaW4gc2Vjb25kc1xuICAgKi9cblxuXG4gIHNsZWVwVGljayh0aW1lKSB7XG4gICAgaWYgKHRoaXMuYWxsb3dTbGVlcCkge1xuICAgICAgY29uc3Qgc2xlZXBTdGF0ZSA9IHRoaXMuc2xlZXBTdGF0ZTtcbiAgICAgIGNvbnN0IHNwZWVkU3F1YXJlZCA9IHRoaXMudmVsb2NpdHkubGVuZ3RoU3F1YXJlZCgpICsgdGhpcy5hbmd1bGFyVmVsb2NpdHkubGVuZ3RoU3F1YXJlZCgpO1xuICAgICAgY29uc3Qgc3BlZWRMaW1pdFNxdWFyZWQgPSB0aGlzLnNsZWVwU3BlZWRMaW1pdCAqKiAyO1xuXG4gICAgICBpZiAoc2xlZXBTdGF0ZSA9PT0gQm9keS5BV0FLRSAmJiBzcGVlZFNxdWFyZWQgPCBzcGVlZExpbWl0U3F1YXJlZCkge1xuICAgICAgICB0aGlzLnNsZWVwU3RhdGUgPSBCb2R5LlNMRUVQWTsgLy8gU2xlZXB5XG5cbiAgICAgICAgdGhpcy50aW1lTGFzdFNsZWVweSA9IHRpbWU7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChCb2R5LnNsZWVweUV2ZW50KTtcbiAgICAgIH0gZWxzZSBpZiAoc2xlZXBTdGF0ZSA9PT0gQm9keS5TTEVFUFkgJiYgc3BlZWRTcXVhcmVkID4gc3BlZWRMaW1pdFNxdWFyZWQpIHtcbiAgICAgICAgdGhpcy53YWtlVXAoKTsgLy8gV2FrZSB1cFxuICAgICAgfSBlbHNlIGlmIChzbGVlcFN0YXRlID09PSBCb2R5LlNMRUVQWSAmJiB0aW1lIC0gdGhpcy50aW1lTGFzdFNsZWVweSA+IHRoaXMuc2xlZXBUaW1lTGltaXQpIHtcbiAgICAgICAgdGhpcy5zbGVlcCgpOyAvLyBTbGVlcGluZ1xuXG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChCb2R5LnNsZWVwRXZlbnQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAvKipcbiAgICogSWYgdGhlIGJvZHkgaXMgc2xlZXBpbmcsIGl0IHNob3VsZCBiZSBpbW1vdmFibGUgLyBoYXZlIGluZmluaXRlIG1hc3MgZHVyaW5nIHNvbHZlLiBXZSBzb2x2ZSBpdCBieSBoYXZpbmcgYSBzZXBhcmF0ZSBcInNvbHZlIG1hc3NcIi5cbiAgICovXG5cblxuICB1cGRhdGVTb2x2ZU1hc3NQcm9wZXJ0aWVzKCkge1xuICAgIGlmICh0aGlzLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcgfHwgdGhpcy50eXBlID09PSBCb2R5LktJTkVNQVRJQykge1xuICAgICAgdGhpcy5pbnZNYXNzU29sdmUgPSAwO1xuICAgICAgdGhpcy5pbnZJbmVydGlhU29sdmUuc2V0WmVybygpO1xuICAgICAgdGhpcy5pbnZJbmVydGlhV29ybGRTb2x2ZS5zZXRaZXJvKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuaW52TWFzc1NvbHZlID0gdGhpcy5pbnZNYXNzO1xuICAgICAgdGhpcy5pbnZJbmVydGlhU29sdmUuY29weSh0aGlzLmludkluZXJ0aWEpO1xuICAgICAgdGhpcy5pbnZJbmVydGlhV29ybGRTb2x2ZS5jb3B5KHRoaXMuaW52SW5lcnRpYVdvcmxkKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIENvbnZlcnQgYSB3b3JsZCBwb2ludCB0byBsb2NhbCBib2R5IGZyYW1lLlxuICAgKi9cblxuXG4gIHBvaW50VG9Mb2NhbEZyYW1lKHdvcmxkUG9pbnQsIHJlc3VsdCA9IG5ldyBWZWMzKCkpIHtcbiAgICB3b3JsZFBvaW50LnZzdWIodGhpcy5wb3NpdGlvbiwgcmVzdWx0KTtcbiAgICB0aGlzLnF1YXRlcm5pb24uY29uanVnYXRlKCkudm11bHQocmVzdWx0LCByZXN1bHQpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgLyoqXG4gICAqIENvbnZlcnQgYSB3b3JsZCB2ZWN0b3IgdG8gbG9jYWwgYm9keSBmcmFtZS5cbiAgICovXG5cblxuICB2ZWN0b3JUb0xvY2FsRnJhbWUod29ybGRWZWN0b3IsIHJlc3VsdCA9IG5ldyBWZWMzKCkpIHtcbiAgICB0aGlzLnF1YXRlcm5pb24uY29uanVnYXRlKCkudm11bHQod29ybGRWZWN0b3IsIHJlc3VsdCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICAvKipcbiAgICogQ29udmVydCBhIGxvY2FsIGJvZHkgcG9pbnQgdG8gd29ybGQgZnJhbWUuXG4gICAqL1xuXG5cbiAgcG9pbnRUb1dvcmxkRnJhbWUobG9jYWxQb2ludCwgcmVzdWx0ID0gbmV3IFZlYzMoKSkge1xuICAgIHRoaXMucXVhdGVybmlvbi52bXVsdChsb2NhbFBvaW50LCByZXN1bHQpO1xuICAgIHJlc3VsdC52YWRkKHRoaXMucG9zaXRpb24sIHJlc3VsdCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICAvKipcbiAgICogQ29udmVydCBhIGxvY2FsIGJvZHkgcG9pbnQgdG8gd29ybGQgZnJhbWUuXG4gICAqL1xuXG5cbiAgdmVjdG9yVG9Xb3JsZEZyYW1lKGxvY2FsVmVjdG9yLCByZXN1bHQgPSBuZXcgVmVjMygpKSB7XG4gICAgdGhpcy5xdWF0ZXJuaW9uLnZtdWx0KGxvY2FsVmVjdG9yLCByZXN1bHQpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgLyoqXG4gICAqIEFkZCBhIHNoYXBlIHRvIHRoZSBib2R5IHdpdGggYSBsb2NhbCBvZmZzZXQgYW5kIG9yaWVudGF0aW9uLlxuICAgKiBAcmV0dXJuIFRoZSBib2R5IG9iamVjdCwgZm9yIGNoYWluYWJpbGl0eS5cbiAgICovXG5cblxuICBhZGRTaGFwZShzaGFwZSwgX29mZnNldCwgX29yaWVudGF0aW9uKSB7XG4gICAgY29uc3Qgb2Zmc2V0ID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCBvcmllbnRhdGlvbiA9IG5ldyBRdWF0ZXJuaW9uKCk7XG5cbiAgICBpZiAoX29mZnNldCkge1xuICAgICAgb2Zmc2V0LmNvcHkoX29mZnNldCk7XG4gICAgfVxuXG4gICAgaWYgKF9vcmllbnRhdGlvbikge1xuICAgICAgb3JpZW50YXRpb24uY29weShfb3JpZW50YXRpb24pO1xuICAgIH1cblxuICAgIHRoaXMuc2hhcGVzLnB1c2goc2hhcGUpO1xuICAgIHRoaXMuc2hhcGVPZmZzZXRzLnB1c2gob2Zmc2V0KTtcbiAgICB0aGlzLnNoYXBlT3JpZW50YXRpb25zLnB1c2gob3JpZW50YXRpb24pO1xuICAgIHRoaXMudXBkYXRlTWFzc1Byb3BlcnRpZXMoKTtcbiAgICB0aGlzLnVwZGF0ZUJvdW5kaW5nUmFkaXVzKCk7XG4gICAgdGhpcy5hYWJiTmVlZHNVcGRhdGUgPSB0cnVlO1xuICAgIHNoYXBlLmJvZHkgPSB0aGlzO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBSZW1vdmUgYSBzaGFwZSBmcm9tIHRoZSBib2R5LlxuICAgKiBAcmV0dXJuIFRoZSBib2R5IG9iamVjdCwgZm9yIGNoYWluYWJpbGl0eS5cbiAgICovXG5cblxuICByZW1vdmVTaGFwZShzaGFwZSkge1xuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5zaGFwZXMuaW5kZXhPZihzaGFwZSk7XG5cbiAgICBpZiAoaW5kZXggPT09IC0xKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ1NoYXBlIGRvZXMgbm90IGJlbG9uZyB0byB0aGUgYm9keScpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgdGhpcy5zaGFwZXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICB0aGlzLnNoYXBlT2Zmc2V0cy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIHRoaXMuc2hhcGVPcmllbnRhdGlvbnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICB0aGlzLnVwZGF0ZU1hc3NQcm9wZXJ0aWVzKCk7XG4gICAgdGhpcy51cGRhdGVCb3VuZGluZ1JhZGl1cygpO1xuICAgIHRoaXMuYWFiYk5lZWRzVXBkYXRlID0gdHJ1ZTtcbiAgICBzaGFwZS5ib2R5ID0gbnVsbDtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogVXBkYXRlIHRoZSBib3VuZGluZyByYWRpdXMgb2YgdGhlIGJvZHkuIFNob3VsZCBiZSBkb25lIGlmIGFueSBvZiB0aGUgc2hhcGVzIGFyZSBjaGFuZ2VkLlxuICAgKi9cblxuXG4gIHVwZGF0ZUJvdW5kaW5nUmFkaXVzKCkge1xuICAgIGNvbnN0IHNoYXBlcyA9IHRoaXMuc2hhcGVzO1xuICAgIGNvbnN0IHNoYXBlT2Zmc2V0cyA9IHRoaXMuc2hhcGVPZmZzZXRzO1xuICAgIGNvbnN0IE4gPSBzaGFwZXMubGVuZ3RoO1xuICAgIGxldCByYWRpdXMgPSAwO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE47IGkrKykge1xuICAgICAgY29uc3Qgc2hhcGUgPSBzaGFwZXNbaV07XG4gICAgICBzaGFwZS51cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpO1xuICAgICAgY29uc3Qgb2Zmc2V0ID0gc2hhcGVPZmZzZXRzW2ldLmxlbmd0aCgpO1xuICAgICAgY29uc3QgciA9IHNoYXBlLmJvdW5kaW5nU3BoZXJlUmFkaXVzO1xuXG4gICAgICBpZiAob2Zmc2V0ICsgciA+IHJhZGl1cykge1xuICAgICAgICByYWRpdXMgPSBvZmZzZXQgKyByO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuYm91bmRpbmdSYWRpdXMgPSByYWRpdXM7XG4gIH1cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhlIC5hYWJiXG4gICAqL1xuXG5cbiAgdXBkYXRlQUFCQigpIHtcbiAgICBjb25zdCBzaGFwZXMgPSB0aGlzLnNoYXBlcztcbiAgICBjb25zdCBzaGFwZU9mZnNldHMgPSB0aGlzLnNoYXBlT2Zmc2V0cztcbiAgICBjb25zdCBzaGFwZU9yaWVudGF0aW9ucyA9IHRoaXMuc2hhcGVPcmllbnRhdGlvbnM7XG4gICAgY29uc3QgTiA9IHNoYXBlcy5sZW5ndGg7XG4gICAgY29uc3Qgb2Zmc2V0ID0gdG1wVmVjO1xuICAgIGNvbnN0IG9yaWVudGF0aW9uID0gdG1wUXVhdDtcbiAgICBjb25zdCBib2R5UXVhdCA9IHRoaXMucXVhdGVybmlvbjtcbiAgICBjb25zdCBhYWJiID0gdGhpcy5hYWJiO1xuICAgIGNvbnN0IHNoYXBlQUFCQiA9IHVwZGF0ZUFBQkJfc2hhcGVBQUJCO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE47IGkrKykge1xuICAgICAgY29uc3Qgc2hhcGUgPSBzaGFwZXNbaV07IC8vIEdldCBzaGFwZSB3b3JsZCBwb3NpdGlvblxuXG4gICAgICBib2R5UXVhdC52bXVsdChzaGFwZU9mZnNldHNbaV0sIG9mZnNldCk7XG4gICAgICBvZmZzZXQudmFkZCh0aGlzLnBvc2l0aW9uLCBvZmZzZXQpOyAvLyBHZXQgc2hhcGUgd29ybGQgcXVhdGVybmlvblxuXG4gICAgICBib2R5UXVhdC5tdWx0KHNoYXBlT3JpZW50YXRpb25zW2ldLCBvcmllbnRhdGlvbik7IC8vIEdldCBzaGFwZSBBQUJCXG5cbiAgICAgIHNoYXBlLmNhbGN1bGF0ZVdvcmxkQUFCQihvZmZzZXQsIG9yaWVudGF0aW9uLCBzaGFwZUFBQkIubG93ZXJCb3VuZCwgc2hhcGVBQUJCLnVwcGVyQm91bmQpO1xuXG4gICAgICBpZiAoaSA9PT0gMCkge1xuICAgICAgICBhYWJiLmNvcHkoc2hhcGVBQUJCKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFhYmIuZXh0ZW5kKHNoYXBlQUFCQik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5hYWJiTmVlZHNVcGRhdGUgPSBmYWxzZTtcbiAgfVxuICAvKipcbiAgICogVXBkYXRlIGAuaW5lcnRpYVdvcmxkYCBhbmQgYC5pbnZJbmVydGlhV29ybGRgXG4gICAqL1xuXG5cbiAgdXBkYXRlSW5lcnRpYVdvcmxkKGZvcmNlKSB7XG4gICAgY29uc3QgSSA9IHRoaXMuaW52SW5lcnRpYTtcblxuICAgIGlmIChJLnggPT09IEkueSAmJiBJLnkgPT09IEkueiAmJiAhZm9yY2UpIDsgZWxzZSB7XG4gICAgICBjb25zdCBtMSA9IHVpd19tMTtcbiAgICAgIGNvbnN0IG0yID0gdWl3X20yO1xuICAgICAgbTEuc2V0Um90YXRpb25Gcm9tUXVhdGVybmlvbih0aGlzLnF1YXRlcm5pb24pO1xuICAgICAgbTEudHJhbnNwb3NlKG0yKTtcbiAgICAgIG0xLnNjYWxlKEksIG0xKTtcbiAgICAgIG0xLm1tdWx0KG0yLCB0aGlzLmludkluZXJ0aWFXb3JsZCk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBBcHBseSBmb3JjZSB0byBhIHBvaW50IG9mIHRoZSBib2R5LiBUaGlzIGNvdWxkIGZvciBleGFtcGxlIGJlIGEgcG9pbnQgb24gdGhlIEJvZHkgc3VyZmFjZS5cbiAgICogQXBwbHlpbmcgZm9yY2UgdGhpcyB3YXkgd2lsbCBhZGQgdG8gQm9keS5mb3JjZSBhbmQgQm9keS50b3JxdWUuXG4gICAqIEBwYXJhbSBmb3JjZSBUaGUgYW1vdW50IG9mIGZvcmNlIHRvIGFkZC5cbiAgICogQHBhcmFtIHJlbGF0aXZlUG9pbnQgQSBwb2ludCByZWxhdGl2ZSB0byB0aGUgY2VudGVyIG9mIG1hc3MgdG8gYXBwbHkgdGhlIGZvcmNlIG9uLlxuICAgKi9cblxuXG4gIGFwcGx5Rm9yY2UoZm9yY2UsIHJlbGF0aXZlUG9pbnQgPSBuZXcgVmVjMygpKSB7XG4gICAgLy8gTmVlZGVkP1xuICAgIGlmICh0aGlzLnR5cGUgIT09IEJvZHkuRFlOQU1JQykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcpIHtcbiAgICAgIHRoaXMud2FrZVVwKCk7XG4gICAgfSAvLyBDb21wdXRlIHByb2R1Y2VkIHJvdGF0aW9uYWwgZm9yY2VcblxuXG4gICAgY29uc3Qgcm90Rm9yY2UgPSBCb2R5X2FwcGx5Rm9yY2Vfcm90Rm9yY2U7XG4gICAgcmVsYXRpdmVQb2ludC5jcm9zcyhmb3JjZSwgcm90Rm9yY2UpOyAvLyBBZGQgbGluZWFyIGZvcmNlXG5cbiAgICB0aGlzLmZvcmNlLnZhZGQoZm9yY2UsIHRoaXMuZm9yY2UpOyAvLyBBZGQgcm90YXRpb25hbCBmb3JjZVxuXG4gICAgdGhpcy50b3JxdWUudmFkZChyb3RGb3JjZSwgdGhpcy50b3JxdWUpO1xuICB9XG4gIC8qKlxuICAgKiBBcHBseSBmb3JjZSB0byBhIGxvY2FsIHBvaW50IGluIHRoZSBib2R5LlxuICAgKiBAcGFyYW0gZm9yY2UgVGhlIGZvcmNlIHZlY3RvciB0byBhcHBseSwgZGVmaW5lZCBsb2NhbGx5IGluIHRoZSBib2R5IGZyYW1lLlxuICAgKiBAcGFyYW0gbG9jYWxQb2ludCBBIGxvY2FsIHBvaW50IGluIHRoZSBib2R5IHRvIGFwcGx5IHRoZSBmb3JjZSBvbi5cbiAgICovXG5cblxuICBhcHBseUxvY2FsRm9yY2UobG9jYWxGb3JjZSwgbG9jYWxQb2ludCA9IG5ldyBWZWMzKCkpIHtcbiAgICBpZiAodGhpcy50eXBlICE9PSBCb2R5LkRZTkFNSUMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB3b3JsZEZvcmNlID0gQm9keV9hcHBseUxvY2FsRm9yY2Vfd29ybGRGb3JjZTtcbiAgICBjb25zdCByZWxhdGl2ZVBvaW50V29ybGQgPSBCb2R5X2FwcGx5TG9jYWxGb3JjZV9yZWxhdGl2ZVBvaW50V29ybGQ7IC8vIFRyYW5zZm9ybSB0aGUgZm9yY2UgdmVjdG9yIHRvIHdvcmxkIHNwYWNlXG5cbiAgICB0aGlzLnZlY3RvclRvV29ybGRGcmFtZShsb2NhbEZvcmNlLCB3b3JsZEZvcmNlKTtcbiAgICB0aGlzLnZlY3RvclRvV29ybGRGcmFtZShsb2NhbFBvaW50LCByZWxhdGl2ZVBvaW50V29ybGQpO1xuICAgIHRoaXMuYXBwbHlGb3JjZSh3b3JsZEZvcmNlLCByZWxhdGl2ZVBvaW50V29ybGQpO1xuICB9XG4gIC8qKlxuICAgKiBBcHBseSB0b3JxdWUgdG8gdGhlIGJvZHkuXG4gICAqIEBwYXJhbSB0b3JxdWUgVGhlIGFtb3VudCBvZiB0b3JxdWUgdG8gYWRkLlxuICAgKi9cblxuXG4gIGFwcGx5VG9ycXVlKHRvcnF1ZSkge1xuICAgIGlmICh0aGlzLnR5cGUgIT09IEJvZHkuRFlOQU1JQykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcpIHtcbiAgICAgIHRoaXMud2FrZVVwKCk7XG4gICAgfSAvLyBBZGQgcm90YXRpb25hbCBmb3JjZVxuXG5cbiAgICB0aGlzLnRvcnF1ZS52YWRkKHRvcnF1ZSwgdGhpcy50b3JxdWUpO1xuICB9XG4gIC8qKlxuICAgKiBBcHBseSBpbXB1bHNlIHRvIGEgcG9pbnQgb2YgdGhlIGJvZHkuIFRoaXMgY291bGQgZm9yIGV4YW1wbGUgYmUgYSBwb2ludCBvbiB0aGUgQm9keSBzdXJmYWNlLlxuICAgKiBBbiBpbXB1bHNlIGlzIGEgZm9yY2UgYWRkZWQgdG8gYSBib2R5IGR1cmluZyBhIHNob3J0IHBlcmlvZCBvZiB0aW1lIChpbXB1bHNlID0gZm9yY2UgKiB0aW1lKS5cbiAgICogSW1wdWxzZXMgd2lsbCBiZSBhZGRlZCB0byBCb2R5LnZlbG9jaXR5IGFuZCBCb2R5LmFuZ3VsYXJWZWxvY2l0eS5cbiAgICogQHBhcmFtIGltcHVsc2UgVGhlIGFtb3VudCBvZiBpbXB1bHNlIHRvIGFkZC5cbiAgICogQHBhcmFtIHJlbGF0aXZlUG9pbnQgQSBwb2ludCByZWxhdGl2ZSB0byB0aGUgY2VudGVyIG9mIG1hc3MgdG8gYXBwbHkgdGhlIGZvcmNlIG9uLlxuICAgKi9cblxuXG4gIGFwcGx5SW1wdWxzZShpbXB1bHNlLCByZWxhdGl2ZVBvaW50ID0gbmV3IFZlYzMoKSkge1xuICAgIGlmICh0aGlzLnR5cGUgIT09IEJvZHkuRFlOQU1JQykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcpIHtcbiAgICAgIHRoaXMud2FrZVVwKCk7XG4gICAgfSAvLyBDb21wdXRlIHBvaW50IHBvc2l0aW9uIHJlbGF0aXZlIHRvIHRoZSBib2R5IGNlbnRlclxuXG5cbiAgICBjb25zdCByID0gcmVsYXRpdmVQb2ludDsgLy8gQ29tcHV0ZSBwcm9kdWNlZCBjZW50cmFsIGltcHVsc2UgdmVsb2NpdHlcblxuICAgIGNvbnN0IHZlbG8gPSBCb2R5X2FwcGx5SW1wdWxzZV92ZWxvO1xuICAgIHZlbG8uY29weShpbXB1bHNlKTtcbiAgICB2ZWxvLnNjYWxlKHRoaXMuaW52TWFzcywgdmVsbyk7IC8vIEFkZCBsaW5lYXIgaW1wdWxzZVxuXG4gICAgdGhpcy52ZWxvY2l0eS52YWRkKHZlbG8sIHRoaXMudmVsb2NpdHkpOyAvLyBDb21wdXRlIHByb2R1Y2VkIHJvdGF0aW9uYWwgaW1wdWxzZSB2ZWxvY2l0eVxuXG4gICAgY29uc3Qgcm90VmVsbyA9IEJvZHlfYXBwbHlJbXB1bHNlX3JvdFZlbG87XG4gICAgci5jcm9zcyhpbXB1bHNlLCByb3RWZWxvKTtcbiAgICAvKlxuICAgICByb3RWZWxvLnggKj0gdGhpcy5pbnZJbmVydGlhLng7XG4gICAgIHJvdFZlbG8ueSAqPSB0aGlzLmludkluZXJ0aWEueTtcbiAgICAgcm90VmVsby56ICo9IHRoaXMuaW52SW5lcnRpYS56O1xuICAgICAqL1xuXG4gICAgdGhpcy5pbnZJbmVydGlhV29ybGQudm11bHQocm90VmVsbywgcm90VmVsbyk7IC8vIEFkZCByb3RhdGlvbmFsIEltcHVsc2VcblxuICAgIHRoaXMuYW5ndWxhclZlbG9jaXR5LnZhZGQocm90VmVsbywgdGhpcy5hbmd1bGFyVmVsb2NpdHkpO1xuICB9XG4gIC8qKlxuICAgKiBBcHBseSBsb2NhbGx5LWRlZmluZWQgaW1wdWxzZSB0byBhIGxvY2FsIHBvaW50IGluIHRoZSBib2R5LlxuICAgKiBAcGFyYW0gZm9yY2UgVGhlIGZvcmNlIHZlY3RvciB0byBhcHBseSwgZGVmaW5lZCBsb2NhbGx5IGluIHRoZSBib2R5IGZyYW1lLlxuICAgKiBAcGFyYW0gbG9jYWxQb2ludCBBIGxvY2FsIHBvaW50IGluIHRoZSBib2R5IHRvIGFwcGx5IHRoZSBmb3JjZSBvbi5cbiAgICovXG5cblxuICBhcHBseUxvY2FsSW1wdWxzZShsb2NhbEltcHVsc2UsIGxvY2FsUG9pbnQgPSBuZXcgVmVjMygpKSB7XG4gICAgaWYgKHRoaXMudHlwZSAhPT0gQm9keS5EWU5BTUlDKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qgd29ybGRJbXB1bHNlID0gQm9keV9hcHBseUxvY2FsSW1wdWxzZV93b3JsZEltcHVsc2U7XG4gICAgY29uc3QgcmVsYXRpdmVQb2ludFdvcmxkID0gQm9keV9hcHBseUxvY2FsSW1wdWxzZV9yZWxhdGl2ZVBvaW50OyAvLyBUcmFuc2Zvcm0gdGhlIGZvcmNlIHZlY3RvciB0byB3b3JsZCBzcGFjZVxuXG4gICAgdGhpcy52ZWN0b3JUb1dvcmxkRnJhbWUobG9jYWxJbXB1bHNlLCB3b3JsZEltcHVsc2UpO1xuICAgIHRoaXMudmVjdG9yVG9Xb3JsZEZyYW1lKGxvY2FsUG9pbnQsIHJlbGF0aXZlUG9pbnRXb3JsZCk7XG4gICAgdGhpcy5hcHBseUltcHVsc2Uod29ybGRJbXB1bHNlLCByZWxhdGl2ZVBvaW50V29ybGQpO1xuICB9XG4gIC8qKlxuICAgKiBTaG91bGQgYmUgY2FsbGVkIHdoZW5ldmVyIHlvdSBjaGFuZ2UgdGhlIGJvZHkgc2hhcGUgb3IgbWFzcy5cbiAgICovXG5cblxuICB1cGRhdGVNYXNzUHJvcGVydGllcygpIHtcbiAgICBjb25zdCBoYWxmRXh0ZW50cyA9IEJvZHlfdXBkYXRlTWFzc1Byb3BlcnRpZXNfaGFsZkV4dGVudHM7XG4gICAgdGhpcy5pbnZNYXNzID0gdGhpcy5tYXNzID4gMCA/IDEuMCAvIHRoaXMubWFzcyA6IDA7XG4gICAgY29uc3QgSSA9IHRoaXMuaW5lcnRpYTtcbiAgICBjb25zdCBmaXhlZCA9IHRoaXMuZml4ZWRSb3RhdGlvbjsgLy8gQXBwcm94aW1hdGUgd2l0aCBBQUJCIGJveFxuXG4gICAgdGhpcy51cGRhdGVBQUJCKCk7XG4gICAgaGFsZkV4dGVudHMuc2V0KCh0aGlzLmFhYmIudXBwZXJCb3VuZC54IC0gdGhpcy5hYWJiLmxvd2VyQm91bmQueCkgLyAyLCAodGhpcy5hYWJiLnVwcGVyQm91bmQueSAtIHRoaXMuYWFiYi5sb3dlckJvdW5kLnkpIC8gMiwgKHRoaXMuYWFiYi51cHBlckJvdW5kLnogLSB0aGlzLmFhYmIubG93ZXJCb3VuZC56KSAvIDIpO1xuICAgIEJveC5jYWxjdWxhdGVJbmVydGlhKGhhbGZFeHRlbnRzLCB0aGlzLm1hc3MsIEkpO1xuICAgIHRoaXMuaW52SW5lcnRpYS5zZXQoSS54ID4gMCAmJiAhZml4ZWQgPyAxLjAgLyBJLnggOiAwLCBJLnkgPiAwICYmICFmaXhlZCA/IDEuMCAvIEkueSA6IDAsIEkueiA+IDAgJiYgIWZpeGVkID8gMS4wIC8gSS56IDogMCk7XG4gICAgdGhpcy51cGRhdGVJbmVydGlhV29ybGQodHJ1ZSk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB3b3JsZCB2ZWxvY2l0eSBvZiBhIHBvaW50IGluIHRoZSBib2R5LlxuICAgKiBAcGFyYW0gd29ybGRQb2ludFxuICAgKiBAcGFyYW0gcmVzdWx0XG4gICAqIEByZXR1cm4gVGhlIHJlc3VsdCB2ZWN0b3IuXG4gICAqL1xuXG5cbiAgZ2V0VmVsb2NpdHlBdFdvcmxkUG9pbnQod29ybGRQb2ludCwgcmVzdWx0KSB7XG4gICAgY29uc3QgciA9IG5ldyBWZWMzKCk7XG4gICAgd29ybGRQb2ludC52c3ViKHRoaXMucG9zaXRpb24sIHIpO1xuICAgIHRoaXMuYW5ndWxhclZlbG9jaXR5LmNyb3NzKHIsIHJlc3VsdCk7XG4gICAgdGhpcy52ZWxvY2l0eS52YWRkKHJlc3VsdCwgcmVzdWx0KTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG4gIC8qKlxuICAgKiBNb3ZlIHRoZSBib2R5IGZvcndhcmQgaW4gdGltZS5cbiAgICogQHBhcmFtIGR0IFRpbWUgc3RlcFxuICAgKiBAcGFyYW0gcXVhdE5vcm1hbGl6ZSBTZXQgdG8gdHJ1ZSB0byBub3JtYWxpemUgdGhlIGJvZHkgcXVhdGVybmlvblxuICAgKiBAcGFyYW0gcXVhdE5vcm1hbGl6ZUZhc3QgSWYgdGhlIHF1YXRlcm5pb24gc2hvdWxkIGJlIG5vcm1hbGl6ZWQgdXNpbmcgXCJmYXN0XCIgcXVhdGVybmlvbiBub3JtYWxpemF0aW9uXG4gICAqL1xuXG5cbiAgaW50ZWdyYXRlKGR0LCBxdWF0Tm9ybWFsaXplLCBxdWF0Tm9ybWFsaXplRmFzdCkge1xuICAgIC8vIFNhdmUgcHJldmlvdXMgcG9zaXRpb25cbiAgICB0aGlzLnByZXZpb3VzUG9zaXRpb24uY29weSh0aGlzLnBvc2l0aW9uKTtcbiAgICB0aGlzLnByZXZpb3VzUXVhdGVybmlvbi5jb3B5KHRoaXMucXVhdGVybmlvbik7XG5cbiAgICBpZiAoISh0aGlzLnR5cGUgPT09IEJvZHkuRFlOQU1JQyB8fCB0aGlzLnR5cGUgPT09IEJvZHkuS0lORU1BVElDKSB8fCB0aGlzLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcpIHtcbiAgICAgIC8vIE9ubHkgZm9yIGR5bmFtaWNcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB2ZWxvID0gdGhpcy52ZWxvY2l0eTtcbiAgICBjb25zdCBhbmd1bGFyVmVsbyA9IHRoaXMuYW5ndWxhclZlbG9jaXR5O1xuICAgIGNvbnN0IHBvcyA9IHRoaXMucG9zaXRpb247XG4gICAgY29uc3QgZm9yY2UgPSB0aGlzLmZvcmNlO1xuICAgIGNvbnN0IHRvcnF1ZSA9IHRoaXMudG9ycXVlO1xuICAgIGNvbnN0IHF1YXQgPSB0aGlzLnF1YXRlcm5pb247XG4gICAgY29uc3QgaW52TWFzcyA9IHRoaXMuaW52TWFzcztcbiAgICBjb25zdCBpbnZJbmVydGlhID0gdGhpcy5pbnZJbmVydGlhV29ybGQ7XG4gICAgY29uc3QgbGluZWFyRmFjdG9yID0gdGhpcy5saW5lYXJGYWN0b3I7XG4gICAgY29uc3QgaU1kdCA9IGludk1hc3MgKiBkdDtcbiAgICB2ZWxvLnggKz0gZm9yY2UueCAqIGlNZHQgKiBsaW5lYXJGYWN0b3IueDtcbiAgICB2ZWxvLnkgKz0gZm9yY2UueSAqIGlNZHQgKiBsaW5lYXJGYWN0b3IueTtcbiAgICB2ZWxvLnogKz0gZm9yY2UueiAqIGlNZHQgKiBsaW5lYXJGYWN0b3IuejtcbiAgICBjb25zdCBlID0gaW52SW5lcnRpYS5lbGVtZW50cztcbiAgICBjb25zdCBhbmd1bGFyRmFjdG9yID0gdGhpcy5hbmd1bGFyRmFjdG9yO1xuICAgIGNvbnN0IHR4ID0gdG9ycXVlLnggKiBhbmd1bGFyRmFjdG9yLng7XG4gICAgY29uc3QgdHkgPSB0b3JxdWUueSAqIGFuZ3VsYXJGYWN0b3IueTtcbiAgICBjb25zdCB0eiA9IHRvcnF1ZS56ICogYW5ndWxhckZhY3Rvci56O1xuICAgIGFuZ3VsYXJWZWxvLnggKz0gZHQgKiAoZVswXSAqIHR4ICsgZVsxXSAqIHR5ICsgZVsyXSAqIHR6KTtcbiAgICBhbmd1bGFyVmVsby55ICs9IGR0ICogKGVbM10gKiB0eCArIGVbNF0gKiB0eSArIGVbNV0gKiB0eik7XG4gICAgYW5ndWxhclZlbG8ueiArPSBkdCAqIChlWzZdICogdHggKyBlWzddICogdHkgKyBlWzhdICogdHopOyAvLyBVc2UgbmV3IHZlbG9jaXR5ICAtIGxlYXAgZnJvZ1xuXG4gICAgcG9zLnggKz0gdmVsby54ICogZHQ7XG4gICAgcG9zLnkgKz0gdmVsby55ICogZHQ7XG4gICAgcG9zLnogKz0gdmVsby56ICogZHQ7XG4gICAgcXVhdC5pbnRlZ3JhdGUodGhpcy5hbmd1bGFyVmVsb2NpdHksIGR0LCB0aGlzLmFuZ3VsYXJGYWN0b3IsIHF1YXQpO1xuXG4gICAgaWYgKHF1YXROb3JtYWxpemUpIHtcbiAgICAgIGlmIChxdWF0Tm9ybWFsaXplRmFzdCkge1xuICAgICAgICBxdWF0Lm5vcm1hbGl6ZUZhc3QoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHF1YXQubm9ybWFsaXplKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5hYWJiTmVlZHNVcGRhdGUgPSB0cnVlOyAvLyBVcGRhdGUgd29ybGQgaW5lcnRpYVxuXG4gICAgdGhpcy51cGRhdGVJbmVydGlhV29ybGQoKTtcbiAgfVxuXG59XG5Cb2R5LmlkQ291bnRlciA9IDA7XG5Cb2R5LkNPTExJREVfRVZFTlRfTkFNRSA9ICdjb2xsaWRlJztcbkJvZHkuRFlOQU1JQyA9IEJPRFlfVFlQRVMuRFlOQU1JQztcbkJvZHkuU1RBVElDID0gQk9EWV9UWVBFUy5TVEFUSUM7XG5Cb2R5LktJTkVNQVRJQyA9IEJPRFlfVFlQRVMuS0lORU1BVElDO1xuQm9keS5BV0FLRSA9IEJPRFlfU0xFRVBfU1RBVEVTLkFXQUtFO1xuQm9keS5TTEVFUFkgPSBCT0RZX1NMRUVQX1NUQVRFUy5TTEVFUFk7XG5Cb2R5LlNMRUVQSU5HID0gQk9EWV9TTEVFUF9TVEFURVMuU0xFRVBJTkc7XG5Cb2R5Lndha2V1cEV2ZW50ID0ge1xuICB0eXBlOiAnd2FrZXVwJ1xufTtcbkJvZHkuc2xlZXB5RXZlbnQgPSB7XG4gIHR5cGU6ICdzbGVlcHknXG59O1xuQm9keS5zbGVlcEV2ZW50ID0ge1xuICB0eXBlOiAnc2xlZXAnXG59O1xuY29uc3QgdG1wVmVjID0gbmV3IFZlYzMoKTtcbmNvbnN0IHRtcFF1YXQgPSBuZXcgUXVhdGVybmlvbigpO1xuY29uc3QgdXBkYXRlQUFCQl9zaGFwZUFBQkIgPSBuZXcgQUFCQigpO1xuY29uc3QgdWl3X20xID0gbmV3IE1hdDMoKTtcbmNvbnN0IHVpd19tMiA9IG5ldyBNYXQzKCk7XG5jb25zdCBCb2R5X2FwcGx5Rm9yY2Vfcm90Rm9yY2UgPSBuZXcgVmVjMygpO1xuY29uc3QgQm9keV9hcHBseUxvY2FsRm9yY2Vfd29ybGRGb3JjZSA9IG5ldyBWZWMzKCk7XG5jb25zdCBCb2R5X2FwcGx5TG9jYWxGb3JjZV9yZWxhdGl2ZVBvaW50V29ybGQgPSBuZXcgVmVjMygpO1xuY29uc3QgQm9keV9hcHBseUltcHVsc2VfdmVsbyA9IG5ldyBWZWMzKCk7XG5jb25zdCBCb2R5X2FwcGx5SW1wdWxzZV9yb3RWZWxvID0gbmV3IFZlYzMoKTtcbmNvbnN0IEJvZHlfYXBwbHlMb2NhbEltcHVsc2Vfd29ybGRJbXB1bHNlID0gbmV3IFZlYzMoKTtcbmNvbnN0IEJvZHlfYXBwbHlMb2NhbEltcHVsc2VfcmVsYXRpdmVQb2ludCA9IG5ldyBWZWMzKCk7XG5jb25zdCBCb2R5X3VwZGF0ZU1hc3NQcm9wZXJ0aWVzX2hhbGZFeHRlbnRzID0gbmV3IFZlYzMoKTtcblxuLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBicm9hZHBoYXNlIGltcGxlbWVudGF0aW9uc1xuICogQGF1dGhvciBzY2h0ZXBwZVxuICovXG5jbGFzcyBCcm9hZHBoYXNlIHtcbiAgLyoqXG4gICAqIFRoZSB3b3JsZCB0byBzZWFyY2ggZm9yIGNvbGxpc2lvbnMgaW4uXG4gICAqL1xuXG4gIC8qKlxuICAgKiBJZiBzZXQgdG8gdHJ1ZSwgdGhlIGJyb2FkcGhhc2UgdXNlcyBib3VuZGluZyBib3hlcyBmb3IgaW50ZXJzZWN0aW9uIHRlc3RzLCBlbHNlIGl0IHVzZXMgYm91bmRpbmcgc3BoZXJlcy5cbiAgICovXG5cbiAgLyoqXG4gICAqIFNldCB0byB0cnVlIGlmIHRoZSBvYmplY3RzIGluIHRoZSB3b3JsZCBtb3ZlZC5cbiAgICovXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMud29ybGQgPSB2b2lkIDA7XG4gICAgdGhpcy51c2VCb3VuZGluZ0JveGVzID0gdm9pZCAwO1xuICAgIHRoaXMuZGlydHkgPSB2b2lkIDA7XG4gICAgdGhpcy53b3JsZCA9IG51bGw7XG4gICAgdGhpcy51c2VCb3VuZGluZ0JveGVzID0gZmFsc2U7XG4gICAgdGhpcy5kaXJ0eSA9IHRydWU7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgY29sbGlzaW9uIHBhaXJzIGZyb20gdGhlIHdvcmxkXG4gICAqIEBwYXJhbSB3b3JsZCBUaGUgd29ybGQgdG8gc2VhcmNoIGluXG4gICAqIEBwYXJhbSBwMSBFbXB0eSBhcnJheSB0byBiZSBmaWxsZWQgd2l0aCBib2R5IG9iamVjdHNcbiAgICogQHBhcmFtIHAyIEVtcHR5IGFycmF5IHRvIGJlIGZpbGxlZCB3aXRoIGJvZHkgb2JqZWN0c1xuICAgKi9cblxuXG4gIGNvbGxpc2lvblBhaXJzKHdvcmxkLCBwMSwgcDIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NvbGxpc2lvblBhaXJzIG5vdCBpbXBsZW1lbnRlZCBmb3IgdGhpcyBCcm9hZFBoYXNlIGNsYXNzIScpO1xuICB9XG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIGJvZHkgcGFpciBuZWVkcyB0byBiZSBpbnRlcnNlY3Rpb24gdGVzdGVkIGF0IGFsbC5cbiAgICovXG5cblxuICBuZWVkQnJvYWRwaGFzZUNvbGxpc2lvbihib2R5QSwgYm9keUIpIHtcbiAgICAvLyBDaGVjayBjb2xsaXNpb24gZmlsdGVyIG1hc2tzXG4gICAgaWYgKChib2R5QS5jb2xsaXNpb25GaWx0ZXJHcm91cCAmIGJvZHlCLmNvbGxpc2lvbkZpbHRlck1hc2spID09PSAwIHx8IChib2R5Qi5jb2xsaXNpb25GaWx0ZXJHcm91cCAmIGJvZHlBLmNvbGxpc2lvbkZpbHRlck1hc2spID09PSAwKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSAvLyBDaGVjayB0eXBlc1xuXG5cbiAgICBpZiAoKChib2R5QS50eXBlICYgQm9keS5TVEFUSUMpICE9PSAwIHx8IGJvZHlBLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcpICYmICgoYm9keUIudHlwZSAmIEJvZHkuU1RBVElDKSAhPT0gMCB8fCBib2R5Qi5zbGVlcFN0YXRlID09PSBCb2R5LlNMRUVQSU5HKSkge1xuICAgICAgLy8gQm90aCBib2RpZXMgYXJlIHN0YXRpYyBvciBzbGVlcGluZy4gU2tpcC5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICAvKipcbiAgICogQ2hlY2sgaWYgdGhlIGJvdW5kaW5nIHZvbHVtZXMgb2YgdHdvIGJvZGllcyBpbnRlcnNlY3QuXG4gICAqL1xuXG5cbiAgaW50ZXJzZWN0aW9uVGVzdChib2R5QSwgYm9keUIsIHBhaXJzMSwgcGFpcnMyKSB7XG4gICAgaWYgKHRoaXMudXNlQm91bmRpbmdCb3hlcykge1xuICAgICAgdGhpcy5kb0JvdW5kaW5nQm94QnJvYWRwaGFzZShib2R5QSwgYm9keUIsIHBhaXJzMSwgcGFpcnMyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5kb0JvdW5kaW5nU3BoZXJlQnJvYWRwaGFzZShib2R5QSwgYm9keUIsIHBhaXJzMSwgcGFpcnMyKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIENoZWNrIGlmIHRoZSBib3VuZGluZyBzcGhlcmVzIG9mIHR3byBib2RpZXMgYXJlIGludGVyc2VjdGluZy5cbiAgICogQHBhcmFtIHBhaXJzMSBib2R5QSBpcyBhcHBlbmRlZCB0byB0aGlzIGFycmF5IGlmIGludGVyc2VjdGlvblxuICAgKiBAcGFyYW0gcGFpcnMyIGJvZHlCIGlzIGFwcGVuZGVkIHRvIHRoaXMgYXJyYXkgaWYgaW50ZXJzZWN0aW9uXG4gICAqL1xuXG5cbiAgZG9Cb3VuZGluZ1NwaGVyZUJyb2FkcGhhc2UoYm9keUEsIGJvZHlCLCBwYWlyczEsIHBhaXJzMikge1xuICAgIGNvbnN0IHIgPSBCcm9hZHBoYXNlX2NvbGxpc2lvblBhaXJzX3I7XG4gICAgYm9keUIucG9zaXRpb24udnN1Yihib2R5QS5wb3NpdGlvbiwgcik7XG4gICAgY29uc3QgYm91bmRpbmdSYWRpdXNTdW0yID0gKGJvZHlBLmJvdW5kaW5nUmFkaXVzICsgYm9keUIuYm91bmRpbmdSYWRpdXMpICoqIDI7XG4gICAgY29uc3Qgbm9ybTIgPSByLmxlbmd0aFNxdWFyZWQoKTtcblxuICAgIGlmIChub3JtMiA8IGJvdW5kaW5nUmFkaXVzU3VtMikge1xuICAgICAgcGFpcnMxLnB1c2goYm9keUEpO1xuICAgICAgcGFpcnMyLnB1c2goYm9keUIpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQ2hlY2sgaWYgdGhlIGJvdW5kaW5nIGJveGVzIG9mIHR3byBib2RpZXMgYXJlIGludGVyc2VjdGluZy5cbiAgICovXG5cblxuICBkb0JvdW5kaW5nQm94QnJvYWRwaGFzZShib2R5QSwgYm9keUIsIHBhaXJzMSwgcGFpcnMyKSB7XG4gICAgaWYgKGJvZHlBLmFhYmJOZWVkc1VwZGF0ZSkge1xuICAgICAgYm9keUEudXBkYXRlQUFCQigpO1xuICAgIH1cblxuICAgIGlmIChib2R5Qi5hYWJiTmVlZHNVcGRhdGUpIHtcbiAgICAgIGJvZHlCLnVwZGF0ZUFBQkIoKTtcbiAgICB9IC8vIENoZWNrIEFBQkIgLyBBQUJCXG5cblxuICAgIGlmIChib2R5QS5hYWJiLm92ZXJsYXBzKGJvZHlCLmFhYmIpKSB7XG4gICAgICBwYWlyczEucHVzaChib2R5QSk7XG4gICAgICBwYWlyczIucHVzaChib2R5Qik7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBSZW1vdmVzIGR1cGxpY2F0ZSBwYWlycyBmcm9tIHRoZSBwYWlyIGFycmF5cy5cbiAgICovXG5cblxuICBtYWtlUGFpcnNVbmlxdWUocGFpcnMxLCBwYWlyczIpIHtcbiAgICBjb25zdCB0ID0gQnJvYWRwaGFzZV9tYWtlUGFpcnNVbmlxdWVfdGVtcDtcbiAgICBjb25zdCBwMSA9IEJyb2FkcGhhc2VfbWFrZVBhaXJzVW5pcXVlX3AxO1xuICAgIGNvbnN0IHAyID0gQnJvYWRwaGFzZV9tYWtlUGFpcnNVbmlxdWVfcDI7XG4gICAgY29uc3QgTiA9IHBhaXJzMS5sZW5ndGg7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTjsgaSsrKSB7XG4gICAgICBwMVtpXSA9IHBhaXJzMVtpXTtcbiAgICAgIHAyW2ldID0gcGFpcnMyW2ldO1xuICAgIH1cblxuICAgIHBhaXJzMS5sZW5ndGggPSAwO1xuICAgIHBhaXJzMi5sZW5ndGggPSAwO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE47IGkrKykge1xuICAgICAgY29uc3QgaWQxID0gcDFbaV0uaWQ7XG4gICAgICBjb25zdCBpZDIgPSBwMltpXS5pZDtcbiAgICAgIGNvbnN0IGtleSA9IGlkMSA8IGlkMiA/IGlkMSArIFwiLFwiICsgaWQyIDogaWQyICsgXCIsXCIgKyBpZDE7XG4gICAgICB0W2tleV0gPSBpO1xuICAgICAgdC5rZXlzLnB1c2goa2V5KTtcbiAgICB9XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gdC5rZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBrZXkgPSB0LmtleXMucG9wKCk7XG4gICAgICBjb25zdCBwYWlySW5kZXggPSB0W2tleV07XG4gICAgICBwYWlyczEucHVzaChwMVtwYWlySW5kZXhdKTtcbiAgICAgIHBhaXJzMi5wdXNoKHAyW3BhaXJJbmRleF0pO1xuICAgICAgZGVsZXRlIHRba2V5XTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFRvIGJlIGltcGxlbWVudGVkIGJ5IHN1YmNhc3Nlc1xuICAgKi9cblxuXG4gIHNldFdvcmxkKHdvcmxkKSB7fVxuICAvKipcbiAgICogQ2hlY2sgaWYgdGhlIGJvdW5kaW5nIHNwaGVyZXMgb2YgdHdvIGJvZGllcyBvdmVybGFwLlxuICAgKi9cblxuXG4gIHN0YXRpYyBib3VuZGluZ1NwaGVyZUNoZWNrKGJvZHlBLCBib2R5Qikge1xuICAgIGNvbnN0IGRpc3QgPSBuZXcgVmVjMygpOyAvLyBic2NfZGlzdDtcblxuICAgIGJvZHlBLnBvc2l0aW9uLnZzdWIoYm9keUIucG9zaXRpb24sIGRpc3QpO1xuICAgIGNvbnN0IHNhID0gYm9keUEuc2hhcGVzWzBdO1xuICAgIGNvbnN0IHNiID0gYm9keUIuc2hhcGVzWzBdO1xuICAgIHJldHVybiBNYXRoLnBvdyhzYS5ib3VuZGluZ1NwaGVyZVJhZGl1cyArIHNiLmJvdW5kaW5nU3BoZXJlUmFkaXVzLCAyKSA+IGRpc3QubGVuZ3RoU3F1YXJlZCgpO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIGFsbCB0aGUgYm9kaWVzIHdpdGhpbiB0aGUgQUFCQi5cbiAgICovXG5cblxuICBhYWJiUXVlcnkod29ybGQsIGFhYmIsIHJlc3VsdCkge1xuICAgIGNvbnNvbGUud2FybignLmFhYmJRdWVyeSBpcyBub3QgaW1wbGVtZW50ZWQgaW4gdGhpcyBCcm9hZHBoYXNlIHN1YmNsYXNzLicpO1xuICAgIHJldHVybiBbXTtcbiAgfVxuXG59IC8vIFRlbXAgb2JqZWN0c1xuXG5jb25zdCBCcm9hZHBoYXNlX2NvbGxpc2lvblBhaXJzX3IgPSBuZXcgVmVjMygpO1xuY29uc3QgQnJvYWRwaGFzZV9tYWtlUGFpcnNVbmlxdWVfdGVtcCA9IHtcbiAga2V5czogW11cbn07XG5jb25zdCBCcm9hZHBoYXNlX21ha2VQYWlyc1VuaXF1ZV9wMSA9IFtdO1xuY29uc3QgQnJvYWRwaGFzZV9tYWtlUGFpcnNVbmlxdWVfcDIgPSBbXTtcblxuLyoqXG4gKiBBeGlzIGFsaWduZWQgdW5pZm9ybSBncmlkIGJyb2FkcGhhc2UuXG4gKiBAdG9kbyBOZWVkcyBzdXBwb3J0IGZvciBtb3JlIHRoYW4ganVzdCBwbGFuZXMgYW5kIHNwaGVyZXMuXG4gKi9cbmNsYXNzIEdyaWRCcm9hZHBoYXNlIGV4dGVuZHMgQnJvYWRwaGFzZSB7XG4gIC8qKlxuICAgKiBOdW1iZXIgb2YgYm94ZXMgYWxvbmcgeFxuICAgKi9cblxuICAvKipcbiAgICogTnVtYmVyIG9mIGJveGVzIGFsb25nIHlcbiAgICovXG5cbiAgLyoqXG4gICAqIE51bWJlciBvZiBib3hlcyBhbG9uZyB6XG4gICAqL1xuXG4gIC8qKlxuICAgKiBhYWJiTWluXG4gICAqL1xuXG4gIC8qKlxuICAgKiBhYWJiTWF4XG4gICAqL1xuXG4gIC8qKlxuICAgKiBiaW5zXG4gICAqL1xuXG4gIC8qKlxuICAgKiBiaW5MZW5ndGhzXG4gICAqL1xuXG4gIC8qKlxuICAgKiBAcGFyYW0gbnggTnVtYmVyIG9mIGJveGVzIGFsb25nIHguXG4gICAqIEBwYXJhbSBueSBOdW1iZXIgb2YgYm94ZXMgYWxvbmcgeS5cbiAgICogQHBhcmFtIG56IE51bWJlciBvZiBib3hlcyBhbG9uZyB6LlxuICAgKi9cbiAgY29uc3RydWN0b3IoYWFiYk1pbiA9IG5ldyBWZWMzKDEwMCwgMTAwLCAxMDApLCBhYWJiTWF4ID0gbmV3IFZlYzMoLTEwMCwgLTEwMCwgLTEwMCksIG54ID0gMTAsIG55ID0gMTAsIG56ID0gMTApIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMubnggPSB2b2lkIDA7XG4gICAgdGhpcy5ueSA9IHZvaWQgMDtcbiAgICB0aGlzLm56ID0gdm9pZCAwO1xuICAgIHRoaXMuYWFiYk1pbiA9IHZvaWQgMDtcbiAgICB0aGlzLmFhYmJNYXggPSB2b2lkIDA7XG4gICAgdGhpcy5iaW5zID0gdm9pZCAwO1xuICAgIHRoaXMuYmluTGVuZ3RocyA9IHZvaWQgMDtcbiAgICB0aGlzLm54ID0gbng7XG4gICAgdGhpcy5ueSA9IG55O1xuICAgIHRoaXMubnogPSBuejtcbiAgICB0aGlzLmFhYmJNaW4gPSBhYWJiTWluO1xuICAgIHRoaXMuYWFiYk1heCA9IGFhYmJNYXg7XG4gICAgY29uc3QgbmJpbnMgPSB0aGlzLm54ICogdGhpcy5ueSAqIHRoaXMubno7XG5cbiAgICBpZiAobmJpbnMgPD0gMCkge1xuICAgICAgdGhyb3cgXCJHcmlkQnJvYWRwaGFzZTogRWFjaCBkaW1lbnNpb24ncyBuIG11c3QgYmUgPjBcIjtcbiAgICB9XG5cbiAgICB0aGlzLmJpbnMgPSBbXTtcbiAgICB0aGlzLmJpbkxlbmd0aHMgPSBbXTsgLy8gUmF0aGVyIHRoYW4gY29udGludWFsbHkgcmVzaXppbmcgYXJyYXlzICh0aHJhc2hpbmcgdGhlIG1lbW9yeSksIGp1c3QgcmVjb3JkIGxlbmd0aCBhbmQgYWxsb3cgdGhlbSB0byBncm93XG5cbiAgICB0aGlzLmJpbnMubGVuZ3RoID0gbmJpbnM7XG4gICAgdGhpcy5iaW5MZW5ndGhzLmxlbmd0aCA9IG5iaW5zO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuYmluczsgaSsrKSB7XG4gICAgICB0aGlzLmJpbnNbaV0gPSBbXTtcbiAgICAgIHRoaXMuYmluTGVuZ3Roc1tpXSA9IDA7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBHZXQgYWxsIHRoZSBjb2xsaXNpb24gcGFpcnMgaW4gdGhlIHBoeXNpY3Mgd29ybGRcbiAgICovXG5cblxuICBjb2xsaXNpb25QYWlycyh3b3JsZCwgcGFpcnMxLCBwYWlyczIpIHtcbiAgICBjb25zdCBOID0gd29ybGQubnVtT2JqZWN0cygpO1xuICAgIGNvbnN0IGJvZGllcyA9IHdvcmxkLmJvZGllcztcbiAgICBjb25zdCBtYXggPSB0aGlzLmFhYmJNYXg7XG4gICAgY29uc3QgbWluID0gdGhpcy5hYWJiTWluO1xuICAgIGNvbnN0IG54ID0gdGhpcy5ueDtcbiAgICBjb25zdCBueSA9IHRoaXMubnk7XG4gICAgY29uc3QgbnogPSB0aGlzLm56O1xuICAgIGNvbnN0IHhzdGVwID0gbnkgKiBuejtcbiAgICBjb25zdCB5c3RlcCA9IG56O1xuICAgIGNvbnN0IHpzdGVwID0gMTtcbiAgICBjb25zdCB4bWF4ID0gbWF4Lng7XG4gICAgY29uc3QgeW1heCA9IG1heC55O1xuICAgIGNvbnN0IHptYXggPSBtYXguejtcbiAgICBjb25zdCB4bWluID0gbWluLng7XG4gICAgY29uc3QgeW1pbiA9IG1pbi55O1xuICAgIGNvbnN0IHptaW4gPSBtaW4uejtcbiAgICBjb25zdCB4bXVsdCA9IG54IC8gKHhtYXggLSB4bWluKTtcbiAgICBjb25zdCB5bXVsdCA9IG55IC8gKHltYXggLSB5bWluKTtcbiAgICBjb25zdCB6bXVsdCA9IG56IC8gKHptYXggLSB6bWluKTtcbiAgICBjb25zdCBiaW5zaXplWCA9ICh4bWF4IC0geG1pbikgLyBueDtcbiAgICBjb25zdCBiaW5zaXplWSA9ICh5bWF4IC0geW1pbikgLyBueTtcbiAgICBjb25zdCBiaW5zaXplWiA9ICh6bWF4IC0gem1pbikgLyBuejtcbiAgICBjb25zdCBiaW5SYWRpdXMgPSBNYXRoLnNxcnQoYmluc2l6ZVggKiBiaW5zaXplWCArIGJpbnNpemVZICogYmluc2l6ZVkgKyBiaW5zaXplWiAqIGJpbnNpemVaKSAqIDAuNTtcbiAgICBjb25zdCB0eXBlcyA9IFNoYXBlLnR5cGVzO1xuICAgIGNvbnN0IFNQSEVSRSA9IHR5cGVzLlNQSEVSRTtcbiAgICBjb25zdCBQTEFORSA9IHR5cGVzLlBMQU5FO1xuICAgIHR5cGVzLkJPWDtcbiAgICB0eXBlcy5DT01QT1VORDtcbiAgICB0eXBlcy5DT05WRVhQT0xZSEVEUk9OO1xuICAgIGNvbnN0IGJpbnMgPSB0aGlzLmJpbnM7XG4gICAgY29uc3QgYmluTGVuZ3RocyA9IHRoaXMuYmluTGVuZ3RocztcbiAgICBjb25zdCBOYmlucyA9IHRoaXMuYmlucy5sZW5ndGg7IC8vIFJlc2V0IGJpbnNcblxuICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOYmluczsgaSsrKSB7XG4gICAgICBiaW5MZW5ndGhzW2ldID0gMDtcbiAgICB9XG5cbiAgICBjb25zdCBjZWlsID0gTWF0aC5jZWlsO1xuXG4gICAgZnVuY3Rpb24gYWRkQm94VG9CaW5zKHgwLCB5MCwgejAsIHgxLCB5MSwgejEsIGJpKSB7XG4gICAgICBsZXQgeG9mZjAgPSAoeDAgLSB4bWluKSAqIHhtdWx0IHwgMDtcbiAgICAgIGxldCB5b2ZmMCA9ICh5MCAtIHltaW4pICogeW11bHQgfCAwO1xuICAgICAgbGV0IHpvZmYwID0gKHowIC0gem1pbikgKiB6bXVsdCB8IDA7XG4gICAgICBsZXQgeG9mZjEgPSBjZWlsKCh4MSAtIHhtaW4pICogeG11bHQpO1xuICAgICAgbGV0IHlvZmYxID0gY2VpbCgoeTEgLSB5bWluKSAqIHltdWx0KTtcbiAgICAgIGxldCB6b2ZmMSA9IGNlaWwoKHoxIC0gem1pbikgKiB6bXVsdCk7XG5cbiAgICAgIGlmICh4b2ZmMCA8IDApIHtcbiAgICAgICAgeG9mZjAgPSAwO1xuICAgICAgfSBlbHNlIGlmICh4b2ZmMCA+PSBueCkge1xuICAgICAgICB4b2ZmMCA9IG54IC0gMTtcbiAgICAgIH1cblxuICAgICAgaWYgKHlvZmYwIDwgMCkge1xuICAgICAgICB5b2ZmMCA9IDA7XG4gICAgICB9IGVsc2UgaWYgKHlvZmYwID49IG55KSB7XG4gICAgICAgIHlvZmYwID0gbnkgLSAxO1xuICAgICAgfVxuXG4gICAgICBpZiAoem9mZjAgPCAwKSB7XG4gICAgICAgIHpvZmYwID0gMDtcbiAgICAgIH0gZWxzZSBpZiAoem9mZjAgPj0gbnopIHtcbiAgICAgICAgem9mZjAgPSBueiAtIDE7XG4gICAgICB9XG5cbiAgICAgIGlmICh4b2ZmMSA8IDApIHtcbiAgICAgICAgeG9mZjEgPSAwO1xuICAgICAgfSBlbHNlIGlmICh4b2ZmMSA+PSBueCkge1xuICAgICAgICB4b2ZmMSA9IG54IC0gMTtcbiAgICAgIH1cblxuICAgICAgaWYgKHlvZmYxIDwgMCkge1xuICAgICAgICB5b2ZmMSA9IDA7XG4gICAgICB9IGVsc2UgaWYgKHlvZmYxID49IG55KSB7XG4gICAgICAgIHlvZmYxID0gbnkgLSAxO1xuICAgICAgfVxuXG4gICAgICBpZiAoem9mZjEgPCAwKSB7XG4gICAgICAgIHpvZmYxID0gMDtcbiAgICAgIH0gZWxzZSBpZiAoem9mZjEgPj0gbnopIHtcbiAgICAgICAgem9mZjEgPSBueiAtIDE7XG4gICAgICB9XG5cbiAgICAgIHhvZmYwICo9IHhzdGVwO1xuICAgICAgeW9mZjAgKj0geXN0ZXA7XG4gICAgICB6b2ZmMCAqPSB6c3RlcDtcbiAgICAgIHhvZmYxICo9IHhzdGVwO1xuICAgICAgeW9mZjEgKj0geXN0ZXA7XG4gICAgICB6b2ZmMSAqPSB6c3RlcDtcblxuICAgICAgZm9yIChsZXQgeG9mZiA9IHhvZmYwOyB4b2ZmIDw9IHhvZmYxOyB4b2ZmICs9IHhzdGVwKSB7XG4gICAgICAgIGZvciAobGV0IHlvZmYgPSB5b2ZmMDsgeW9mZiA8PSB5b2ZmMTsgeW9mZiArPSB5c3RlcCkge1xuICAgICAgICAgIGZvciAobGV0IHpvZmYgPSB6b2ZmMDsgem9mZiA8PSB6b2ZmMTsgem9mZiArPSB6c3RlcCkge1xuICAgICAgICAgICAgY29uc3QgaWR4ID0geG9mZiArIHlvZmYgKyB6b2ZmO1xuICAgICAgICAgICAgYmluc1tpZHhdW2Jpbkxlbmd0aHNbaWR4XSsrXSA9IGJpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gLy8gUHV0IGFsbCBib2RpZXMgaW50byB0aGUgYmluc1xuXG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTjsgaSsrKSB7XG4gICAgICBjb25zdCBiaSA9IGJvZGllc1tpXTtcbiAgICAgIGNvbnN0IHNpID0gYmkuc2hhcGVzWzBdO1xuXG4gICAgICBzd2l0Y2ggKHNpLnR5cGUpIHtcbiAgICAgICAgY2FzZSBTUEhFUkU6XG4gICAgICAgICAge1xuICAgICAgICAgICAgY29uc3Qgc2hhcGUgPSBzaTsgLy8gUHV0IGluIGJpblxuICAgICAgICAgICAgLy8gY2hlY2sgaWYgb3ZlcmxhcCB3aXRoIG90aGVyIGJpbnNcblxuICAgICAgICAgICAgY29uc3QgeCA9IGJpLnBvc2l0aW9uLng7XG4gICAgICAgICAgICBjb25zdCB5ID0gYmkucG9zaXRpb24ueTtcbiAgICAgICAgICAgIGNvbnN0IHogPSBiaS5wb3NpdGlvbi56O1xuICAgICAgICAgICAgY29uc3QgciA9IHNoYXBlLnJhZGl1cztcbiAgICAgICAgICAgIGFkZEJveFRvQmlucyh4IC0gciwgeSAtIHIsIHogLSByLCB4ICsgciwgeSArIHIsIHogKyByLCBiaSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG5cbiAgICAgICAgY2FzZSBQTEFORTpcbiAgICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBzaGFwZSA9IHNpO1xuXG4gICAgICAgICAgICBpZiAoc2hhcGUud29ybGROb3JtYWxOZWVkc1VwZGF0ZSkge1xuICAgICAgICAgICAgICBzaGFwZS5jb21wdXRlV29ybGROb3JtYWwoYmkucXVhdGVybmlvbik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHBsYW5lTm9ybWFsID0gc2hhcGUud29ybGROb3JtYWw7IC8vUmVsYXRpdmUgcG9zaXRpb24gZnJvbSBvcmlnaW4gb2YgcGxhbmUgb2JqZWN0IHRvIHRoZSBmaXJzdCBiaW5cbiAgICAgICAgICAgIC8vSW5jcmVtZW50ZWQgYXMgd2UgaXRlcmF0ZSB0aHJvdWdoIHRoZSBiaW5zXG5cbiAgICAgICAgICAgIGNvbnN0IHhyZXNldCA9IHhtaW4gKyBiaW5zaXplWCAqIDAuNSAtIGJpLnBvc2l0aW9uLng7XG4gICAgICAgICAgICBjb25zdCB5cmVzZXQgPSB5bWluICsgYmluc2l6ZVkgKiAwLjUgLSBiaS5wb3NpdGlvbi55O1xuICAgICAgICAgICAgY29uc3QgenJlc2V0ID0gem1pbiArIGJpbnNpemVaICogMC41IC0gYmkucG9zaXRpb24uejtcbiAgICAgICAgICAgIGNvbnN0IGQgPSBHcmlkQnJvYWRwaGFzZV9jb2xsaXNpb25QYWlyc19kO1xuICAgICAgICAgICAgZC5zZXQoeHJlc2V0LCB5cmVzZXQsIHpyZXNldCk7XG5cbiAgICAgICAgICAgIGZvciAobGV0IHhpID0gMCwgeG9mZiA9IDA7IHhpICE9PSBueDsgeGkrKywgeG9mZiArPSB4c3RlcCwgZC55ID0geXJlc2V0LCBkLnggKz0gYmluc2l6ZVgpIHtcbiAgICAgICAgICAgICAgZm9yIChsZXQgeWkgPSAwLCB5b2ZmID0gMDsgeWkgIT09IG55OyB5aSsrLCB5b2ZmICs9IHlzdGVwLCBkLnogPSB6cmVzZXQsIGQueSArPSBiaW5zaXplWSkge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IHppID0gMCwgem9mZiA9IDA7IHppICE9PSBuejsgemkrKywgem9mZiArPSB6c3RlcCwgZC56ICs9IGJpbnNpemVaKSB7XG4gICAgICAgICAgICAgICAgICBpZiAoZC5kb3QocGxhbmVOb3JtYWwpIDwgYmluUmFkaXVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeCA9IHhvZmYgKyB5b2ZmICsgem9mZjtcbiAgICAgICAgICAgICAgICAgICAgYmluc1tpZHhdW2Jpbkxlbmd0aHNbaWR4XSsrXSA9IGJpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICB7XG4gICAgICAgICAgICBpZiAoYmkuYWFiYk5lZWRzVXBkYXRlKSB7XG4gICAgICAgICAgICAgIGJpLnVwZGF0ZUFBQkIoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYWRkQm94VG9CaW5zKGJpLmFhYmIubG93ZXJCb3VuZC54LCBiaS5hYWJiLmxvd2VyQm91bmQueSwgYmkuYWFiYi5sb3dlckJvdW5kLnosIGJpLmFhYmIudXBwZXJCb3VuZC54LCBiaS5hYWJiLnVwcGVyQm91bmQueSwgYmkuYWFiYi51cHBlckJvdW5kLnosIGJpKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgIH1cbiAgICB9IC8vIENoZWNrIGVhY2ggYmluXG5cblxuICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOYmluczsgaSsrKSB7XG4gICAgICBjb25zdCBiaW5MZW5ndGggPSBiaW5MZW5ndGhzW2ldOyAvL1NraXAgYmlucyB3aXRoIG5vIHBvdGVudGlhbCBjb2xsaXNpb25zXG5cbiAgICAgIGlmIChiaW5MZW5ndGggPiAxKSB7XG4gICAgICAgIGNvbnN0IGJpbiA9IGJpbnNbaV07IC8vIERvIE5eMiBicm9hZHBoYXNlIGluc2lkZVxuXG4gICAgICAgIGZvciAobGV0IHhpID0gMDsgeGkgIT09IGJpbkxlbmd0aDsgeGkrKykge1xuICAgICAgICAgIGNvbnN0IGJpID0gYmluW3hpXTtcblxuICAgICAgICAgIGZvciAobGV0IHlpID0gMDsgeWkgIT09IHhpOyB5aSsrKSB7XG4gICAgICAgICAgICBjb25zdCBiaiA9IGJpblt5aV07XG5cbiAgICAgICAgICAgIGlmICh0aGlzLm5lZWRCcm9hZHBoYXNlQ29sbGlzaW9uKGJpLCBiaikpIHtcbiAgICAgICAgICAgICAgdGhpcy5pbnRlcnNlY3Rpb25UZXN0KGJpLCBiaiwgcGFpcnMxLCBwYWlyczIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gLy9cdGZvciAobGV0IHppID0gMCwgem9mZj0wOyB6aSA8IG56OyB6aSsrLCB6b2ZmKz0genN0ZXApIHtcbiAgICAvL1x0XHRjb25zb2xlLmxvZyhcImxheWVyIFwiK3ppKTtcbiAgICAvL1x0XHRmb3IgKGxldCB5aSA9IDAsIHlvZmY9MDsgeWkgPCBueTsgeWkrKywgeW9mZiArPSB5c3RlcCkge1xuICAgIC8vXHRcdFx0Y29uc3Qgcm93ID0gJyc7XG4gICAgLy9cdFx0XHRmb3IgKGxldCB4aSA9IDAsIHhvZmY9MDsgeGkgPCBueDsgeGkrKywgeG9mZiArPSB4c3RlcCkge1xuICAgIC8vXHRcdFx0XHRjb25zdCBpZHggPSB4b2ZmICsgeW9mZiArIHpvZmY7XG4gICAgLy9cdFx0XHRcdHJvdyArPSAnICcgKyBiaW5MZW5ndGhzW2lkeF07XG4gICAgLy9cdFx0XHR9XG4gICAgLy9cdFx0XHRjb25zb2xlLmxvZyhyb3cpO1xuICAgIC8vXHRcdH1cbiAgICAvL1x0fVxuXG5cbiAgICB0aGlzLm1ha2VQYWlyc1VuaXF1ZShwYWlyczEsIHBhaXJzMik7XG4gIH1cblxufVxuY29uc3QgR3JpZEJyb2FkcGhhc2VfY29sbGlzaW9uUGFpcnNfZCA9IG5ldyBWZWMzKCk7XG5cbi8qKlxuICogTmFpdmUgYnJvYWRwaGFzZSBpbXBsZW1lbnRhdGlvbiwgdXNlZCBpbiBsYWNrIG9mIGJldHRlciBvbmVzLlxuICpcbiAqIFRoZSBuYWl2ZSBicm9hZHBoYXNlIGxvb2tzIGF0IGFsbCBwb3NzaWJsZSBwYWlycyB3aXRob3V0IHJlc3RyaWN0aW9uLCB0aGVyZWZvcmUgaXQgaGFzIGNvbXBsZXhpdHkgTl4yIF8od2hpY2ggaXMgYmFkKV9cbiAqL1xuY2xhc3MgTmFpdmVCcm9hZHBoYXNlIGV4dGVuZHMgQnJvYWRwaGFzZSB7XG4gIC8qKlxuICAgKiBAdG9kbyBSZW1vdmUgdXNlbGVzcyBjb25zdHJ1Y3RvclxuICAgKi9cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcbiAgfVxuICAvKipcbiAgICogR2V0IGFsbCB0aGUgY29sbGlzaW9uIHBhaXJzIGluIHRoZSBwaHlzaWNzIHdvcmxkXG4gICAqL1xuXG5cbiAgY29sbGlzaW9uUGFpcnMod29ybGQsIHBhaXJzMSwgcGFpcnMyKSB7XG4gICAgY29uc3QgYm9kaWVzID0gd29ybGQuYm9kaWVzO1xuICAgIGNvbnN0IG4gPSBib2RpZXMubGVuZ3RoO1xuICAgIGxldCBiaTtcbiAgICBsZXQgYmo7IC8vIE5haXZlIE5eMiBmdHchXG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gbjsgaSsrKSB7XG4gICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gaTsgaisrKSB7XG4gICAgICAgIGJpID0gYm9kaWVzW2ldO1xuICAgICAgICBiaiA9IGJvZGllc1tqXTtcblxuICAgICAgICBpZiAoIXRoaXMubmVlZEJyb2FkcGhhc2VDb2xsaXNpb24oYmksIGJqKSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5pbnRlcnNlY3Rpb25UZXN0KGJpLCBiaiwgcGFpcnMxLCBwYWlyczIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAvKipcbiAgICogUmV0dXJucyBhbGwgdGhlIGJvZGllcyB3aXRoaW4gYW4gQUFCQi5cbiAgICogQHBhcmFtIHJlc3VsdCBBbiBhcnJheSB0byBzdG9yZSByZXN1bHRpbmcgYm9kaWVzIGluLlxuICAgKi9cblxuXG4gIGFhYmJRdWVyeSh3b3JsZCwgYWFiYiwgcmVzdWx0ID0gW10pIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHdvcmxkLmJvZGllcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgYiA9IHdvcmxkLmJvZGllc1tpXTtcblxuICAgICAgaWYgKGIuYWFiYk5lZWRzVXBkYXRlKSB7XG4gICAgICAgIGIudXBkYXRlQUFCQigpO1xuICAgICAgfSAvLyBVZ2x5IGhhY2sgdW50aWwgQm9keSBnZXRzIGFhYmJcblxuXG4gICAgICBpZiAoYi5hYWJiLm92ZXJsYXBzKGFhYmIpKSB7XG4gICAgICAgIHJlc3VsdC5wdXNoKGIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxufVxuXG4vKipcbiAqIFN0b3JhZ2UgZm9yIFJheSBjYXN0aW5nIGRhdGFcbiAqL1xuY2xhc3MgUmF5Y2FzdFJlc3VsdCB7XG4gIC8qKlxuICAgKiByYXlGcm9tV29ybGRcbiAgICovXG5cbiAgLyoqXG4gICAqIHJheVRvV29ybGRcbiAgICovXG5cbiAgLyoqXG4gICAqIGhpdE5vcm1hbFdvcmxkXG4gICAqL1xuXG4gIC8qKlxuICAgKiBoaXRQb2ludFdvcmxkXG4gICAqL1xuXG4gIC8qKlxuICAgKiBoYXNIaXRcbiAgICovXG5cbiAgLyoqXG4gICAqIHNoYXBlXG4gICAqL1xuXG4gIC8qKlxuICAgKiBib2R5XG4gICAqL1xuXG4gIC8qKlxuICAgKiBUaGUgaW5kZXggb2YgdGhlIGhpdCB0cmlhbmdsZSwgaWYgdGhlIGhpdCBzaGFwZSB3YXMgYSB0cmltZXNoXG4gICAqL1xuXG4gIC8qKlxuICAgKiBEaXN0YW5jZSB0byB0aGUgaGl0LiBXaWxsIGJlIHNldCB0byAtMSBpZiB0aGVyZSB3YXMgbm8gaGl0XG4gICAqL1xuXG4gIC8qKlxuICAgKiBJZiB0aGUgcmF5IHNob3VsZCBzdG9wIHRyYXZlcnNpbmcgdGhlIGJvZGllc1xuICAgKi9cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5yYXlGcm9tV29ybGQgPSB2b2lkIDA7XG4gICAgdGhpcy5yYXlUb1dvcmxkID0gdm9pZCAwO1xuICAgIHRoaXMuaGl0Tm9ybWFsV29ybGQgPSB2b2lkIDA7XG4gICAgdGhpcy5oaXRQb2ludFdvcmxkID0gdm9pZCAwO1xuICAgIHRoaXMuaGFzSGl0ID0gdm9pZCAwO1xuICAgIHRoaXMuc2hhcGUgPSB2b2lkIDA7XG4gICAgdGhpcy5ib2R5ID0gdm9pZCAwO1xuICAgIHRoaXMuaGl0RmFjZUluZGV4ID0gdm9pZCAwO1xuICAgIHRoaXMuZGlzdGFuY2UgPSB2b2lkIDA7XG4gICAgdGhpcy5zaG91bGRTdG9wID0gdm9pZCAwO1xuICAgIHRoaXMucmF5RnJvbVdvcmxkID0gbmV3IFZlYzMoKTtcbiAgICB0aGlzLnJheVRvV29ybGQgPSBuZXcgVmVjMygpO1xuICAgIHRoaXMuaGl0Tm9ybWFsV29ybGQgPSBuZXcgVmVjMygpO1xuICAgIHRoaXMuaGl0UG9pbnRXb3JsZCA9IG5ldyBWZWMzKCk7XG4gICAgdGhpcy5oYXNIaXQgPSBmYWxzZTtcbiAgICB0aGlzLnNoYXBlID0gbnVsbDtcbiAgICB0aGlzLmJvZHkgPSBudWxsO1xuICAgIHRoaXMuaGl0RmFjZUluZGV4ID0gLTE7XG4gICAgdGhpcy5kaXN0YW5jZSA9IC0xO1xuICAgIHRoaXMuc2hvdWxkU3RvcCA9IGZhbHNlO1xuICB9XG4gIC8qKlxuICAgKiBSZXNldCBhbGwgcmVzdWx0IGRhdGEuXG4gICAqL1xuXG5cbiAgcmVzZXQoKSB7XG4gICAgdGhpcy5yYXlGcm9tV29ybGQuc2V0WmVybygpO1xuICAgIHRoaXMucmF5VG9Xb3JsZC5zZXRaZXJvKCk7XG4gICAgdGhpcy5oaXROb3JtYWxXb3JsZC5zZXRaZXJvKCk7XG4gICAgdGhpcy5oaXRQb2ludFdvcmxkLnNldFplcm8oKTtcbiAgICB0aGlzLmhhc0hpdCA9IGZhbHNlO1xuICAgIHRoaXMuc2hhcGUgPSBudWxsO1xuICAgIHRoaXMuYm9keSA9IG51bGw7XG4gICAgdGhpcy5oaXRGYWNlSW5kZXggPSAtMTtcbiAgICB0aGlzLmRpc3RhbmNlID0gLTE7XG4gICAgdGhpcy5zaG91bGRTdG9wID0gZmFsc2U7XG4gIH1cbiAgLyoqXG4gICAqIGFib3J0XG4gICAqL1xuXG5cbiAgYWJvcnQoKSB7XG4gICAgdGhpcy5zaG91bGRTdG9wID0gdHJ1ZTtcbiAgfVxuICAvKipcbiAgICogU2V0IHJlc3VsdCBkYXRhLlxuICAgKi9cblxuXG4gIHNldChyYXlGcm9tV29ybGQsIHJheVRvV29ybGQsIGhpdE5vcm1hbFdvcmxkLCBoaXRQb2ludFdvcmxkLCBzaGFwZSwgYm9keSwgZGlzdGFuY2UpIHtcbiAgICB0aGlzLnJheUZyb21Xb3JsZC5jb3B5KHJheUZyb21Xb3JsZCk7XG4gICAgdGhpcy5yYXlUb1dvcmxkLmNvcHkocmF5VG9Xb3JsZCk7XG4gICAgdGhpcy5oaXROb3JtYWxXb3JsZC5jb3B5KGhpdE5vcm1hbFdvcmxkKTtcbiAgICB0aGlzLmhpdFBvaW50V29ybGQuY29weShoaXRQb2ludFdvcmxkKTtcbiAgICB0aGlzLnNoYXBlID0gc2hhcGU7XG4gICAgdGhpcy5ib2R5ID0gYm9keTtcbiAgICB0aGlzLmRpc3RhbmNlID0gZGlzdGFuY2U7XG4gIH1cblxufVxuXG5sZXQgX1NoYXBlJHR5cGVzJFNQSEVSRSwgX1NoYXBlJHR5cGVzJFBMQU5FLCBfU2hhcGUkdHlwZXMkQk9YLCBfU2hhcGUkdHlwZXMkQ1lMSU5ERVIsIF9TaGFwZSR0eXBlcyRDT05WRVhQTywgX1NoYXBlJHR5cGVzJEhFSUdIVEZJLCBfU2hhcGUkdHlwZXMkVFJJTUVTSDtcblxuLyoqXG4gKiBSQVlfTU9ERVNcbiAqL1xuY29uc3QgUkFZX01PREVTID0ge1xuICAvKiogQ0xPU0VTVCAqL1xuICBDTE9TRVNUOiAxLFxuXG4gIC8qKiBBTlkgKi9cbiAgQU5ZOiAyLFxuXG4gIC8qKiBBTEwgKi9cbiAgQUxMOiA0XG59O1xuLyoqXG4gKiBSYXlNb2RlXG4gKi9cblxuX1NoYXBlJHR5cGVzJFNQSEVSRSA9IFNoYXBlLnR5cGVzLlNQSEVSRTtcbl9TaGFwZSR0eXBlcyRQTEFORSA9IFNoYXBlLnR5cGVzLlBMQU5FO1xuX1NoYXBlJHR5cGVzJEJPWCA9IFNoYXBlLnR5cGVzLkJPWDtcbl9TaGFwZSR0eXBlcyRDWUxJTkRFUiA9IFNoYXBlLnR5cGVzLkNZTElOREVSO1xuX1NoYXBlJHR5cGVzJENPTlZFWFBPID0gU2hhcGUudHlwZXMuQ09OVkVYUE9MWUhFRFJPTjtcbl9TaGFwZSR0eXBlcyRIRUlHSFRGSSA9IFNoYXBlLnR5cGVzLkhFSUdIVEZJRUxEO1xuX1NoYXBlJHR5cGVzJFRSSU1FU0ggPSBTaGFwZS50eXBlcy5UUklNRVNIO1xuXG4vKipcbiAqIEEgbGluZSBpbiAzRCBzcGFjZSB0aGF0IGludGVyc2VjdHMgYm9kaWVzIGFuZCByZXR1cm4gcG9pbnRzLlxuICovXG5jbGFzcyBSYXkge1xuICAvKipcbiAgICogZnJvbVxuICAgKi9cblxuICAvKipcbiAgICogdG9cbiAgICovXG5cbiAgLyoqXG4gICAqIGRpcmVjdGlvblxuICAgKi9cblxuICAvKipcbiAgICogVGhlIHByZWNpc2lvbiBvZiB0aGUgcmF5LiBVc2VkIHdoZW4gY2hlY2tpbmcgcGFyYWxsZWxpdHkgZXRjLlxuICAgKiBAZGVmYXVsdCAwLjAwMDFcbiAgICovXG5cbiAgLyoqXG4gICAqIFNldCB0byBgZmFsc2VgIGlmIHlvdSBkb24ndCB3YW50IHRoZSBSYXkgdG8gdGFrZSBgY29sbGlzaW9uUmVzcG9uc2VgIGZsYWdzIGludG8gYWNjb3VudCBvbiBib2RpZXMgYW5kIHNoYXBlcy5cbiAgICogQGRlZmF1bHQgdHJ1ZVxuICAgKi9cblxuICAvKipcbiAgICogSWYgc2V0IHRvIGB0cnVlYCwgdGhlIHJheSBza2lwcyBhbnkgaGl0cyB3aXRoIG5vcm1hbC5kb3QocmF5RGlyZWN0aW9uKSA8IDAuXG4gICAqIEBkZWZhdWx0IGZhbHNlXG4gICAqL1xuXG4gIC8qKlxuICAgKiBjb2xsaXNpb25GaWx0ZXJNYXNrXG4gICAqIEBkZWZhdWx0IC0xXG4gICAqL1xuXG4gIC8qKlxuICAgKiBjb2xsaXNpb25GaWx0ZXJHcm91cFxuICAgKiBAZGVmYXVsdCAtMVxuICAgKi9cblxuICAvKipcbiAgICogVGhlIGludGVyc2VjdGlvbiBtb2RlLiBTaG91bGQgYmUgUmF5LkFOWSwgUmF5LkFMTCBvciBSYXkuQ0xPU0VTVC5cbiAgICogQGRlZmF1bHQgUkFZLkFOWVxuICAgKi9cblxuICAvKipcbiAgICogQ3VycmVudCByZXN1bHQgb2JqZWN0LlxuICAgKi9cblxuICAvKipcbiAgICogV2lsbCBiZSBzZXQgdG8gYHRydWVgIGR1cmluZyBpbnRlcnNlY3RXb3JsZCgpIGlmIHRoZSByYXkgaGl0IGFueXRoaW5nLlxuICAgKi9cblxuICAvKipcbiAgICogVXNlci1wcm92aWRlZCByZXN1bHQgY2FsbGJhY2suIFdpbGwgYmUgdXNlZCBpZiBtb2RlIGlzIFJheS5BTEwuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBDTE9TRVNUXG4gICAqL1xuXG4gIC8qKlxuICAgKiBBTllcbiAgICovXG5cbiAgLyoqXG4gICAqIEFMTFxuICAgKi9cbiAgZ2V0IFtfU2hhcGUkdHlwZXMkU1BIRVJFXSgpIHtcbiAgICByZXR1cm4gdGhpcy5faW50ZXJzZWN0U3BoZXJlO1xuICB9XG5cbiAgZ2V0IFtfU2hhcGUkdHlwZXMkUExBTkVdKCkge1xuICAgIHJldHVybiB0aGlzLl9pbnRlcnNlY3RQbGFuZTtcbiAgfVxuXG4gIGdldCBbX1NoYXBlJHR5cGVzJEJPWF0oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2ludGVyc2VjdEJveDtcbiAgfVxuXG4gIGdldCBbX1NoYXBlJHR5cGVzJENZTElOREVSXSgpIHtcbiAgICByZXR1cm4gdGhpcy5faW50ZXJzZWN0Q29udmV4O1xuICB9XG5cbiAgZ2V0IFtfU2hhcGUkdHlwZXMkQ09OVkVYUE9dKCkge1xuICAgIHJldHVybiB0aGlzLl9pbnRlcnNlY3RDb252ZXg7XG4gIH1cblxuICBnZXQgW19TaGFwZSR0eXBlcyRIRUlHSFRGSV0oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2ludGVyc2VjdEhlaWdodGZpZWxkO1xuICB9XG5cbiAgZ2V0IFtfU2hhcGUkdHlwZXMkVFJJTUVTSF0oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2ludGVyc2VjdFRyaW1lc2g7XG4gIH1cblxuICBjb25zdHJ1Y3Rvcihmcm9tID0gbmV3IFZlYzMoKSwgdG8gPSBuZXcgVmVjMygpKSB7XG4gICAgdGhpcy5mcm9tID0gdm9pZCAwO1xuICAgIHRoaXMudG8gPSB2b2lkIDA7XG4gICAgdGhpcy5kaXJlY3Rpb24gPSB2b2lkIDA7XG4gICAgdGhpcy5wcmVjaXNpb24gPSB2b2lkIDA7XG4gICAgdGhpcy5jaGVja0NvbGxpc2lvblJlc3BvbnNlID0gdm9pZCAwO1xuICAgIHRoaXMuc2tpcEJhY2tmYWNlcyA9IHZvaWQgMDtcbiAgICB0aGlzLmNvbGxpc2lvbkZpbHRlck1hc2sgPSB2b2lkIDA7XG4gICAgdGhpcy5jb2xsaXNpb25GaWx0ZXJHcm91cCA9IHZvaWQgMDtcbiAgICB0aGlzLm1vZGUgPSB2b2lkIDA7XG4gICAgdGhpcy5yZXN1bHQgPSB2b2lkIDA7XG4gICAgdGhpcy5oYXNIaXQgPSB2b2lkIDA7XG4gICAgdGhpcy5jYWxsYmFjayA9IHZvaWQgMDtcbiAgICB0aGlzLmZyb20gPSBmcm9tLmNsb25lKCk7XG4gICAgdGhpcy50byA9IHRvLmNsb25lKCk7XG4gICAgdGhpcy5kaXJlY3Rpb24gPSBuZXcgVmVjMygpO1xuICAgIHRoaXMucHJlY2lzaW9uID0gMC4wMDAxO1xuICAgIHRoaXMuY2hlY2tDb2xsaXNpb25SZXNwb25zZSA9IHRydWU7XG4gICAgdGhpcy5za2lwQmFja2ZhY2VzID0gZmFsc2U7XG4gICAgdGhpcy5jb2xsaXNpb25GaWx0ZXJNYXNrID0gLTE7XG4gICAgdGhpcy5jb2xsaXNpb25GaWx0ZXJHcm91cCA9IC0xO1xuICAgIHRoaXMubW9kZSA9IFJheS5BTlk7XG4gICAgdGhpcy5yZXN1bHQgPSBuZXcgUmF5Y2FzdFJlc3VsdCgpO1xuICAgIHRoaXMuaGFzSGl0ID0gZmFsc2U7XG5cbiAgICB0aGlzLmNhbGxiYWNrID0gcmVzdWx0ID0+IHt9O1xuICB9XG4gIC8qKlxuICAgKiBEbyBpdGVyc2VjdGlvbiBhZ2FpbnN0IGFsbCBib2RpZXMgaW4gdGhlIGdpdmVuIFdvcmxkLlxuICAgKiBAcmV0dXJuIFRydWUgaWYgdGhlIHJheSBoaXQgYW55dGhpbmcsIG90aGVyd2lzZSBmYWxzZS5cbiAgICovXG5cblxuICBpbnRlcnNlY3RXb3JsZCh3b3JsZCwgb3B0aW9ucykge1xuICAgIHRoaXMubW9kZSA9IG9wdGlvbnMubW9kZSB8fCBSYXkuQU5ZO1xuICAgIHRoaXMucmVzdWx0ID0gb3B0aW9ucy5yZXN1bHQgfHwgbmV3IFJheWNhc3RSZXN1bHQoKTtcbiAgICB0aGlzLnNraXBCYWNrZmFjZXMgPSAhIW9wdGlvbnMuc2tpcEJhY2tmYWNlcztcbiAgICB0aGlzLmNvbGxpc2lvbkZpbHRlck1hc2sgPSB0eXBlb2Ygb3B0aW9ucy5jb2xsaXNpb25GaWx0ZXJNYXNrICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuY29sbGlzaW9uRmlsdGVyTWFzayA6IC0xO1xuICAgIHRoaXMuY29sbGlzaW9uRmlsdGVyR3JvdXAgPSB0eXBlb2Ygb3B0aW9ucy5jb2xsaXNpb25GaWx0ZXJHcm91cCAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmNvbGxpc2lvbkZpbHRlckdyb3VwIDogLTE7XG4gICAgdGhpcy5jaGVja0NvbGxpc2lvblJlc3BvbnNlID0gdHlwZW9mIG9wdGlvbnMuY2hlY2tDb2xsaXNpb25SZXNwb25zZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmNoZWNrQ29sbGlzaW9uUmVzcG9uc2UgOiB0cnVlO1xuXG4gICAgaWYgKG9wdGlvbnMuZnJvbSkge1xuICAgICAgdGhpcy5mcm9tLmNvcHkob3B0aW9ucy5mcm9tKTtcbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucy50bykge1xuICAgICAgdGhpcy50by5jb3B5KG9wdGlvbnMudG8pO1xuICAgIH1cblxuICAgIHRoaXMuY2FsbGJhY2sgPSBvcHRpb25zLmNhbGxiYWNrIHx8ICgoKSA9PiB7fSk7XG5cbiAgICB0aGlzLmhhc0hpdCA9IGZhbHNlO1xuICAgIHRoaXMucmVzdWx0LnJlc2V0KCk7XG4gICAgdGhpcy51cGRhdGVEaXJlY3Rpb24oKTtcbiAgICB0aGlzLmdldEFBQkIodG1wQUFCQiQxKTtcbiAgICB0bXBBcnJheS5sZW5ndGggPSAwO1xuICAgIHdvcmxkLmJyb2FkcGhhc2UuYWFiYlF1ZXJ5KHdvcmxkLCB0bXBBQUJCJDEsIHRtcEFycmF5KTtcbiAgICB0aGlzLmludGVyc2VjdEJvZGllcyh0bXBBcnJheSk7XG4gICAgcmV0dXJuIHRoaXMuaGFzSGl0O1xuICB9XG4gIC8qKlxuICAgKiBTaG9vdCBhIHJheSBhdCBhIGJvZHksIGdldCBiYWNrIGluZm9ybWF0aW9uIGFib3V0IHRoZSBoaXQuXG4gICAqIEBkZXByZWNhdGVkIEBwYXJhbSByZXN1bHQgc2V0IHRoZSByZXN1bHQgcHJvcGVydHkgb2YgdGhlIFJheSBpbnN0ZWFkLlxuICAgKi9cblxuXG4gIGludGVyc2VjdEJvZHkoYm9keSwgcmVzdWx0KSB7XG4gICAgaWYgKHJlc3VsdCkge1xuICAgICAgdGhpcy5yZXN1bHQgPSByZXN1bHQ7XG4gICAgICB0aGlzLnVwZGF0ZURpcmVjdGlvbigpO1xuICAgIH1cblxuICAgIGNvbnN0IGNoZWNrQ29sbGlzaW9uUmVzcG9uc2UgPSB0aGlzLmNoZWNrQ29sbGlzaW9uUmVzcG9uc2U7XG5cbiAgICBpZiAoY2hlY2tDb2xsaXNpb25SZXNwb25zZSAmJiAhYm9keS5jb2xsaXNpb25SZXNwb25zZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICgodGhpcy5jb2xsaXNpb25GaWx0ZXJHcm91cCAmIGJvZHkuY29sbGlzaW9uRmlsdGVyTWFzaykgPT09IDAgfHwgKGJvZHkuY29sbGlzaW9uRmlsdGVyR3JvdXAgJiB0aGlzLmNvbGxpc2lvbkZpbHRlck1hc2spID09PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgeGkgPSBpbnRlcnNlY3RCb2R5X3hpO1xuICAgIGNvbnN0IHFpID0gaW50ZXJzZWN0Qm9keV9xaTtcblxuICAgIGZvciAobGV0IGkgPSAwLCBOID0gYm9keS5zaGFwZXMubGVuZ3RoOyBpIDwgTjsgaSsrKSB7XG4gICAgICBjb25zdCBzaGFwZSA9IGJvZHkuc2hhcGVzW2ldO1xuXG4gICAgICBpZiAoY2hlY2tDb2xsaXNpb25SZXNwb25zZSAmJiAhc2hhcGUuY29sbGlzaW9uUmVzcG9uc2UpIHtcbiAgICAgICAgY29udGludWU7IC8vIFNraXBcbiAgICAgIH1cblxuICAgICAgYm9keS5xdWF0ZXJuaW9uLm11bHQoYm9keS5zaGFwZU9yaWVudGF0aW9uc1tpXSwgcWkpO1xuICAgICAgYm9keS5xdWF0ZXJuaW9uLnZtdWx0KGJvZHkuc2hhcGVPZmZzZXRzW2ldLCB4aSk7XG4gICAgICB4aS52YWRkKGJvZHkucG9zaXRpb24sIHhpKTtcbiAgICAgIHRoaXMuaW50ZXJzZWN0U2hhcGUoc2hhcGUsIHFpLCB4aSwgYm9keSk7XG5cbiAgICAgIGlmICh0aGlzLnJlc3VsdC5zaG91bGRTdG9wKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAvKipcbiAgICogU2hvb3QgYSByYXkgYXQgYW4gYXJyYXkgYm9kaWVzLCBnZXQgYmFjayBpbmZvcm1hdGlvbiBhYm91dCB0aGUgaGl0LlxuICAgKiBAcGFyYW0gYm9kaWVzIEFuIGFycmF5IG9mIEJvZHkgb2JqZWN0cy5cbiAgICogQGRlcHJlY2F0ZWQgQHBhcmFtIHJlc3VsdCBzZXQgdGhlIHJlc3VsdCBwcm9wZXJ0eSBvZiB0aGUgUmF5IGluc3RlYWQuXG4gICAqXG4gICAqL1xuXG5cbiAgaW50ZXJzZWN0Qm9kaWVzKGJvZGllcywgcmVzdWx0KSB7XG4gICAgaWYgKHJlc3VsdCkge1xuICAgICAgdGhpcy5yZXN1bHQgPSByZXN1bHQ7XG4gICAgICB0aGlzLnVwZGF0ZURpcmVjdGlvbigpO1xuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSAwLCBsID0gYm9kaWVzLmxlbmd0aDsgIXRoaXMucmVzdWx0LnNob3VsZFN0b3AgJiYgaSA8IGw7IGkrKykge1xuICAgICAgdGhpcy5pbnRlcnNlY3RCb2R5KGJvZGllc1tpXSk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBVcGRhdGVzIHRoZSBkaXJlY3Rpb24gdmVjdG9yLlxuICAgKi9cblxuXG4gIHVwZGF0ZURpcmVjdGlvbigpIHtcbiAgICB0aGlzLnRvLnZzdWIodGhpcy5mcm9tLCB0aGlzLmRpcmVjdGlvbik7XG4gICAgdGhpcy5kaXJlY3Rpb24ubm9ybWFsaXplKCk7XG4gIH1cblxuICBpbnRlcnNlY3RTaGFwZShzaGFwZSwgcXVhdCwgcG9zaXRpb24sIGJvZHkpIHtcbiAgICBjb25zdCBmcm9tID0gdGhpcy5mcm9tOyAvLyBDaGVja2luZyBib3VuZGluZ1NwaGVyZVxuXG4gICAgY29uc3QgZGlzdGFuY2UgPSBkaXN0YW5jZUZyb21JbnRlcnNlY3Rpb24oZnJvbSwgdGhpcy5kaXJlY3Rpb24sIHBvc2l0aW9uKTtcblxuICAgIGlmIChkaXN0YW5jZSA+IHNoYXBlLmJvdW5kaW5nU3BoZXJlUmFkaXVzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgaW50ZXJzZWN0TWV0aG9kID0gdGhpc1tzaGFwZS50eXBlXTtcblxuICAgIGlmIChpbnRlcnNlY3RNZXRob2QpIHtcbiAgICAgIGludGVyc2VjdE1ldGhvZC5jYWxsKHRoaXMsIHNoYXBlLCBxdWF0LCBwb3NpdGlvbiwgYm9keSwgc2hhcGUpO1xuICAgIH1cbiAgfVxuXG4gIF9pbnRlcnNlY3RCb3goYm94LCBxdWF0LCBwb3NpdGlvbiwgYm9keSwgcmVwb3J0ZWRTaGFwZSkge1xuICAgIHJldHVybiB0aGlzLl9pbnRlcnNlY3RDb252ZXgoYm94LmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbiwgcXVhdCwgcG9zaXRpb24sIGJvZHksIHJlcG9ydGVkU2hhcGUpO1xuICB9XG5cbiAgX2ludGVyc2VjdFBsYW5lKHNoYXBlLCBxdWF0LCBwb3NpdGlvbiwgYm9keSwgcmVwb3J0ZWRTaGFwZSkge1xuICAgIGNvbnN0IGZyb20gPSB0aGlzLmZyb207XG4gICAgY29uc3QgdG8gPSB0aGlzLnRvO1xuICAgIGNvbnN0IGRpcmVjdGlvbiA9IHRoaXMuZGlyZWN0aW9uOyAvLyBHZXQgcGxhbmUgbm9ybWFsXG5cbiAgICBjb25zdCB3b3JsZE5vcm1hbCA9IG5ldyBWZWMzKDAsIDAsIDEpO1xuICAgIHF1YXQudm11bHQod29ybGROb3JtYWwsIHdvcmxkTm9ybWFsKTtcbiAgICBjb25zdCBsZW4gPSBuZXcgVmVjMygpO1xuICAgIGZyb20udnN1Yihwb3NpdGlvbiwgbGVuKTtcbiAgICBjb25zdCBwbGFuZVRvRnJvbSA9IGxlbi5kb3Qod29ybGROb3JtYWwpO1xuICAgIHRvLnZzdWIocG9zaXRpb24sIGxlbik7XG4gICAgY29uc3QgcGxhbmVUb1RvID0gbGVuLmRvdCh3b3JsZE5vcm1hbCk7XG5cbiAgICBpZiAocGxhbmVUb0Zyb20gKiBwbGFuZVRvVG8gPiAwKSB7XG4gICAgICAvLyBcImZyb21cIiBhbmQgXCJ0b1wiIGFyZSBvbiB0aGUgc2FtZSBzaWRlIG9mIHRoZSBwbGFuZS4uLiBiYWlsIG91dFxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChmcm9tLmRpc3RhbmNlVG8odG8pIDwgcGxhbmVUb0Zyb20pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBuX2RvdF9kaXIgPSB3b3JsZE5vcm1hbC5kb3QoZGlyZWN0aW9uKTtcblxuICAgIGlmIChNYXRoLmFicyhuX2RvdF9kaXIpIDwgdGhpcy5wcmVjaXNpb24pIHtcbiAgICAgIC8vIE5vIGludGVyc2VjdGlvblxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHBsYW5lUG9pbnRUb0Zyb20gPSBuZXcgVmVjMygpO1xuICAgIGNvbnN0IGRpcl9zY2FsZWRfd2l0aF90ID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCBoaXRQb2ludFdvcmxkID0gbmV3IFZlYzMoKTtcbiAgICBmcm9tLnZzdWIocG9zaXRpb24sIHBsYW5lUG9pbnRUb0Zyb20pO1xuICAgIGNvbnN0IHQgPSAtd29ybGROb3JtYWwuZG90KHBsYW5lUG9pbnRUb0Zyb20pIC8gbl9kb3RfZGlyO1xuICAgIGRpcmVjdGlvbi5zY2FsZSh0LCBkaXJfc2NhbGVkX3dpdGhfdCk7XG4gICAgZnJvbS52YWRkKGRpcl9zY2FsZWRfd2l0aF90LCBoaXRQb2ludFdvcmxkKTtcbiAgICB0aGlzLnJlcG9ydEludGVyc2VjdGlvbih3b3JsZE5vcm1hbCwgaGl0UG9pbnRXb3JsZCwgcmVwb3J0ZWRTaGFwZSwgYm9keSwgLTEpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIHdvcmxkIEFBQkIgb2YgdGhlIHJheS5cbiAgICovXG5cblxuICBnZXRBQUJCKGFhYmIpIHtcbiAgICBjb25zdCB7XG4gICAgICBsb3dlckJvdW5kLFxuICAgICAgdXBwZXJCb3VuZFxuICAgIH0gPSBhYWJiO1xuICAgIGNvbnN0IHRvID0gdGhpcy50bztcbiAgICBjb25zdCBmcm9tID0gdGhpcy5mcm9tO1xuICAgIGxvd2VyQm91bmQueCA9IE1hdGgubWluKHRvLngsIGZyb20ueCk7XG4gICAgbG93ZXJCb3VuZC55ID0gTWF0aC5taW4odG8ueSwgZnJvbS55KTtcbiAgICBsb3dlckJvdW5kLnogPSBNYXRoLm1pbih0by56LCBmcm9tLnopO1xuICAgIHVwcGVyQm91bmQueCA9IE1hdGgubWF4KHRvLngsIGZyb20ueCk7XG4gICAgdXBwZXJCb3VuZC55ID0gTWF0aC5tYXgodG8ueSwgZnJvbS55KTtcbiAgICB1cHBlckJvdW5kLnogPSBNYXRoLm1heCh0by56LCBmcm9tLnopO1xuICB9XG5cbiAgX2ludGVyc2VjdEhlaWdodGZpZWxkKHNoYXBlLCBxdWF0LCBwb3NpdGlvbiwgYm9keSwgcmVwb3J0ZWRTaGFwZSkge1xuICAgIHNoYXBlLmRhdGE7XG4gICAgc2hhcGUuZWxlbWVudFNpemU7IC8vIENvbnZlcnQgdGhlIHJheSB0byBsb2NhbCBoZWlnaHRmaWVsZCBjb29yZGluYXRlc1xuXG4gICAgY29uc3QgbG9jYWxSYXkgPSBpbnRlcnNlY3RIZWlnaHRmaWVsZF9sb2NhbFJheTsgLy9uZXcgUmF5KHRoaXMuZnJvbSwgdGhpcy50byk7XG5cbiAgICBsb2NhbFJheS5mcm9tLmNvcHkodGhpcy5mcm9tKTtcbiAgICBsb2NhbFJheS50by5jb3B5KHRoaXMudG8pO1xuICAgIFRyYW5zZm9ybS5wb2ludFRvTG9jYWxGcmFtZShwb3NpdGlvbiwgcXVhdCwgbG9jYWxSYXkuZnJvbSwgbG9jYWxSYXkuZnJvbSk7XG4gICAgVHJhbnNmb3JtLnBvaW50VG9Mb2NhbEZyYW1lKHBvc2l0aW9uLCBxdWF0LCBsb2NhbFJheS50bywgbG9jYWxSYXkudG8pO1xuICAgIGxvY2FsUmF5LnVwZGF0ZURpcmVjdGlvbigpOyAvLyBHZXQgdGhlIGluZGV4IG9mIHRoZSBkYXRhIHBvaW50cyB0byB0ZXN0IGFnYWluc3RcblxuICAgIGNvbnN0IGluZGV4ID0gaW50ZXJzZWN0SGVpZ2h0ZmllbGRfaW5kZXg7XG4gICAgbGV0IGlNaW5YO1xuICAgIGxldCBpTWluWTtcbiAgICBsZXQgaU1heFg7XG4gICAgbGV0IGlNYXhZOyAvLyBTZXQgdG8gbWF4XG5cbiAgICBpTWluWCA9IGlNaW5ZID0gMDtcbiAgICBpTWF4WCA9IGlNYXhZID0gc2hhcGUuZGF0YS5sZW5ndGggLSAxO1xuICAgIGNvbnN0IGFhYmIgPSBuZXcgQUFCQigpO1xuICAgIGxvY2FsUmF5LmdldEFBQkIoYWFiYik7XG4gICAgc2hhcGUuZ2V0SW5kZXhPZlBvc2l0aW9uKGFhYmIubG93ZXJCb3VuZC54LCBhYWJiLmxvd2VyQm91bmQueSwgaW5kZXgsIHRydWUpO1xuICAgIGlNaW5YID0gTWF0aC5tYXgoaU1pblgsIGluZGV4WzBdKTtcbiAgICBpTWluWSA9IE1hdGgubWF4KGlNaW5ZLCBpbmRleFsxXSk7XG4gICAgc2hhcGUuZ2V0SW5kZXhPZlBvc2l0aW9uKGFhYmIudXBwZXJCb3VuZC54LCBhYWJiLnVwcGVyQm91bmQueSwgaW5kZXgsIHRydWUpO1xuICAgIGlNYXhYID0gTWF0aC5taW4oaU1heFgsIGluZGV4WzBdICsgMSk7XG4gICAgaU1heFkgPSBNYXRoLm1pbihpTWF4WSwgaW5kZXhbMV0gKyAxKTtcblxuICAgIGZvciAobGV0IGkgPSBpTWluWDsgaSA8IGlNYXhYOyBpKyspIHtcbiAgICAgIGZvciAobGV0IGogPSBpTWluWTsgaiA8IGlNYXhZOyBqKyspIHtcbiAgICAgICAgaWYgKHRoaXMucmVzdWx0LnNob3VsZFN0b3ApIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBzaGFwZS5nZXRBYWJiQXRJbmRleChpLCBqLCBhYWJiKTtcblxuICAgICAgICBpZiAoIWFhYmIub3ZlcmxhcHNSYXkobG9jYWxSYXkpKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH0gLy8gTG93ZXIgdHJpYW5nbGVcblxuXG4gICAgICAgIHNoYXBlLmdldENvbnZleFRyaWFuZ2xlUGlsbGFyKGksIGosIGZhbHNlKTtcbiAgICAgICAgVHJhbnNmb3JtLnBvaW50VG9Xb3JsZEZyYW1lKHBvc2l0aW9uLCBxdWF0LCBzaGFwZS5waWxsYXJPZmZzZXQsIHdvcmxkUGlsbGFyT2Zmc2V0KTtcblxuICAgICAgICB0aGlzLl9pbnRlcnNlY3RDb252ZXgoc2hhcGUucGlsbGFyQ29udmV4LCBxdWF0LCB3b3JsZFBpbGxhck9mZnNldCwgYm9keSwgcmVwb3J0ZWRTaGFwZSwgaW50ZXJzZWN0Q29udmV4T3B0aW9ucyk7XG5cbiAgICAgICAgaWYgKHRoaXMucmVzdWx0LnNob3VsZFN0b3ApIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gLy8gVXBwZXIgdHJpYW5nbGVcblxuXG4gICAgICAgIHNoYXBlLmdldENvbnZleFRyaWFuZ2xlUGlsbGFyKGksIGosIHRydWUpO1xuICAgICAgICBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUocG9zaXRpb24sIHF1YXQsIHNoYXBlLnBpbGxhck9mZnNldCwgd29ybGRQaWxsYXJPZmZzZXQpO1xuXG4gICAgICAgIHRoaXMuX2ludGVyc2VjdENvbnZleChzaGFwZS5waWxsYXJDb252ZXgsIHF1YXQsIHdvcmxkUGlsbGFyT2Zmc2V0LCBib2R5LCByZXBvcnRlZFNoYXBlLCBpbnRlcnNlY3RDb252ZXhPcHRpb25zKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBfaW50ZXJzZWN0U3BoZXJlKHNwaGVyZSwgcXVhdCwgcG9zaXRpb24sIGJvZHksIHJlcG9ydGVkU2hhcGUpIHtcbiAgICBjb25zdCBmcm9tID0gdGhpcy5mcm9tO1xuICAgIGNvbnN0IHRvID0gdGhpcy50bztcbiAgICBjb25zdCByID0gc3BoZXJlLnJhZGl1cztcbiAgICBjb25zdCBhID0gKHRvLnggLSBmcm9tLngpICoqIDIgKyAodG8ueSAtIGZyb20ueSkgKiogMiArICh0by56IC0gZnJvbS56KSAqKiAyO1xuICAgIGNvbnN0IGIgPSAyICogKCh0by54IC0gZnJvbS54KSAqIChmcm9tLnggLSBwb3NpdGlvbi54KSArICh0by55IC0gZnJvbS55KSAqIChmcm9tLnkgLSBwb3NpdGlvbi55KSArICh0by56IC0gZnJvbS56KSAqIChmcm9tLnogLSBwb3NpdGlvbi56KSk7XG4gICAgY29uc3QgYyA9IChmcm9tLnggLSBwb3NpdGlvbi54KSAqKiAyICsgKGZyb20ueSAtIHBvc2l0aW9uLnkpICoqIDIgKyAoZnJvbS56IC0gcG9zaXRpb24ueikgKiogMiAtIHIgKiogMjtcbiAgICBjb25zdCBkZWx0YSA9IGIgKiogMiAtIDQgKiBhICogYztcbiAgICBjb25zdCBpbnRlcnNlY3Rpb25Qb2ludCA9IFJheV9pbnRlcnNlY3RTcGhlcmVfaW50ZXJzZWN0aW9uUG9pbnQ7XG4gICAgY29uc3Qgbm9ybWFsID0gUmF5X2ludGVyc2VjdFNwaGVyZV9ub3JtYWw7XG5cbiAgICBpZiAoZGVsdGEgPCAwKSB7XG4gICAgICAvLyBObyBpbnRlcnNlY3Rpb25cbiAgICAgIHJldHVybjtcbiAgICB9IGVsc2UgaWYgKGRlbHRhID09PSAwKSB7XG4gICAgICAvLyBzaW5nbGUgaW50ZXJzZWN0aW9uIHBvaW50XG4gICAgICBmcm9tLmxlcnAodG8sIGRlbHRhLCBpbnRlcnNlY3Rpb25Qb2ludCk7XG4gICAgICBpbnRlcnNlY3Rpb25Qb2ludC52c3ViKHBvc2l0aW9uLCBub3JtYWwpO1xuICAgICAgbm9ybWFsLm5vcm1hbGl6ZSgpO1xuICAgICAgdGhpcy5yZXBvcnRJbnRlcnNlY3Rpb24obm9ybWFsLCBpbnRlcnNlY3Rpb25Qb2ludCwgcmVwb3J0ZWRTaGFwZSwgYm9keSwgLTEpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBkMSA9ICgtYiAtIE1hdGguc3FydChkZWx0YSkpIC8gKDIgKiBhKTtcbiAgICAgIGNvbnN0IGQyID0gKC1iICsgTWF0aC5zcXJ0KGRlbHRhKSkgLyAoMiAqIGEpO1xuXG4gICAgICBpZiAoZDEgPj0gMCAmJiBkMSA8PSAxKSB7XG4gICAgICAgIGZyb20ubGVycCh0bywgZDEsIGludGVyc2VjdGlvblBvaW50KTtcbiAgICAgICAgaW50ZXJzZWN0aW9uUG9pbnQudnN1Yihwb3NpdGlvbiwgbm9ybWFsKTtcbiAgICAgICAgbm9ybWFsLm5vcm1hbGl6ZSgpO1xuICAgICAgICB0aGlzLnJlcG9ydEludGVyc2VjdGlvbihub3JtYWwsIGludGVyc2VjdGlvblBvaW50LCByZXBvcnRlZFNoYXBlLCBib2R5LCAtMSk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLnJlc3VsdC5zaG91bGRTdG9wKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKGQyID49IDAgJiYgZDIgPD0gMSkge1xuICAgICAgICBmcm9tLmxlcnAodG8sIGQyLCBpbnRlcnNlY3Rpb25Qb2ludCk7XG4gICAgICAgIGludGVyc2VjdGlvblBvaW50LnZzdWIocG9zaXRpb24sIG5vcm1hbCk7XG4gICAgICAgIG5vcm1hbC5ub3JtYWxpemUoKTtcbiAgICAgICAgdGhpcy5yZXBvcnRJbnRlcnNlY3Rpb24obm9ybWFsLCBpbnRlcnNlY3Rpb25Qb2ludCwgcmVwb3J0ZWRTaGFwZSwgYm9keSwgLTEpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIF9pbnRlcnNlY3RDb252ZXgoc2hhcGUsIHF1YXQsIHBvc2l0aW9uLCBib2R5LCByZXBvcnRlZFNoYXBlLCBvcHRpb25zKSB7XG4gICAgY29uc3Qgbm9ybWFsID0gaW50ZXJzZWN0Q29udmV4X25vcm1hbDtcbiAgICBjb25zdCB2ZWN0b3IgPSBpbnRlcnNlY3RDb252ZXhfdmVjdG9yO1xuICAgIGNvbnN0IGZhY2VMaXN0ID0gb3B0aW9ucyAmJiBvcHRpb25zLmZhY2VMaXN0IHx8IG51bGw7IC8vIENoZWNraW5nIGZhY2VzXG5cbiAgICBjb25zdCBmYWNlcyA9IHNoYXBlLmZhY2VzO1xuICAgIGNvbnN0IHZlcnRpY2VzID0gc2hhcGUudmVydGljZXM7XG4gICAgY29uc3Qgbm9ybWFscyA9IHNoYXBlLmZhY2VOb3JtYWxzO1xuICAgIGNvbnN0IGRpcmVjdGlvbiA9IHRoaXMuZGlyZWN0aW9uO1xuICAgIGNvbnN0IGZyb20gPSB0aGlzLmZyb207XG4gICAgY29uc3QgdG8gPSB0aGlzLnRvO1xuICAgIGNvbnN0IGZyb21Ub0Rpc3RhbmNlID0gZnJvbS5kaXN0YW5jZVRvKHRvKTtcbiAgICBjb25zdCBOZmFjZXMgPSBmYWNlTGlzdCA/IGZhY2VMaXN0Lmxlbmd0aCA6IGZhY2VzLmxlbmd0aDtcbiAgICBjb25zdCByZXN1bHQgPSB0aGlzLnJlc3VsdDtcblxuICAgIGZvciAobGV0IGogPSAwOyAhcmVzdWx0LnNob3VsZFN0b3AgJiYgaiA8IE5mYWNlczsgaisrKSB7XG4gICAgICBjb25zdCBmaSA9IGZhY2VMaXN0ID8gZmFjZUxpc3Rbal0gOiBqO1xuICAgICAgY29uc3QgZmFjZSA9IGZhY2VzW2ZpXTtcbiAgICAgIGNvbnN0IGZhY2VOb3JtYWwgPSBub3JtYWxzW2ZpXTtcbiAgICAgIGNvbnN0IHEgPSBxdWF0O1xuICAgICAgY29uc3QgeCA9IHBvc2l0aW9uOyAvLyBkZXRlcm1pbmUgaWYgcmF5IGludGVyc2VjdHMgdGhlIHBsYW5lIG9mIHRoZSBmYWNlXG4gICAgICAvLyBub3RlOiB0aGlzIHdvcmtzIHJlZ2FyZGxlc3Mgb2YgdGhlIGRpcmVjdGlvbiBvZiB0aGUgZmFjZSBub3JtYWxcbiAgICAgIC8vIEdldCBwbGFuZSBwb2ludCBpbiB3b3JsZCBjb29yZGluYXRlcy4uLlxuXG4gICAgICB2ZWN0b3IuY29weSh2ZXJ0aWNlc1tmYWNlWzBdXSk7XG4gICAgICBxLnZtdWx0KHZlY3RvciwgdmVjdG9yKTtcbiAgICAgIHZlY3Rvci52YWRkKHgsIHZlY3Rvcik7IC8vIC4uLmJ1dCBtYWtlIGl0IHJlbGF0aXZlIHRvIHRoZSByYXkgZnJvbS4gV2UnbGwgZml4IHRoaXMgbGF0ZXIuXG5cbiAgICAgIHZlY3Rvci52c3ViKGZyb20sIHZlY3Rvcik7IC8vIEdldCBwbGFuZSBub3JtYWxcblxuICAgICAgcS52bXVsdChmYWNlTm9ybWFsLCBub3JtYWwpOyAvLyBJZiB0aGlzIGRvdCBwcm9kdWN0IGlzIG5lZ2F0aXZlLCB3ZSBoYXZlIHNvbWV0aGluZyBpbnRlcmVzdGluZ1xuXG4gICAgICBjb25zdCBkb3QgPSBkaXJlY3Rpb24uZG90KG5vcm1hbCk7IC8vIEJhaWwgb3V0IGlmIHJheSBhbmQgcGxhbmUgYXJlIHBhcmFsbGVsXG5cbiAgICAgIGlmIChNYXRoLmFicyhkb3QpIDwgdGhpcy5wcmVjaXNpb24pIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9IC8vIGNhbGMgZGlzdGFuY2UgdG8gcGxhbmVcblxuXG4gICAgICBjb25zdCBzY2FsYXIgPSBub3JtYWwuZG90KHZlY3RvcikgLyBkb3Q7IC8vIGlmIG5lZ2F0aXZlIGRpc3RhbmNlLCB0aGVuIHBsYW5lIGlzIGJlaGluZCByYXlcblxuICAgICAgaWYgKHNjYWxhciA8IDApIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9IC8vIGlmIChkb3QgPCAwKSB7XG4gICAgICAvLyBJbnRlcnNlY3Rpb24gcG9pbnQgaXMgZnJvbSArIGRpcmVjdGlvbiAqIHNjYWxhclxuXG5cbiAgICAgIGRpcmVjdGlvbi5zY2FsZShzY2FsYXIsIGludGVyc2VjdFBvaW50KTtcbiAgICAgIGludGVyc2VjdFBvaW50LnZhZGQoZnJvbSwgaW50ZXJzZWN0UG9pbnQpOyAvLyBhIGlzIHRoZSBwb2ludCB3ZSBjb21wYXJlIHBvaW50cyBiIGFuZCBjIHdpdGguXG5cbiAgICAgIGEuY29weSh2ZXJ0aWNlc1tmYWNlWzBdXSk7XG4gICAgICBxLnZtdWx0KGEsIGEpO1xuICAgICAgeC52YWRkKGEsIGEpO1xuXG4gICAgICBmb3IgKGxldCBpID0gMTsgIXJlc3VsdC5zaG91bGRTdG9wICYmIGkgPCBmYWNlLmxlbmd0aCAtIDE7IGkrKykge1xuICAgICAgICAvLyBUcmFuc2Zvcm0gMyB2ZXJ0aWNlcyB0byB3b3JsZCBjb29yZHNcbiAgICAgICAgYi5jb3B5KHZlcnRpY2VzW2ZhY2VbaV1dKTtcbiAgICAgICAgYy5jb3B5KHZlcnRpY2VzW2ZhY2VbaSArIDFdXSk7XG4gICAgICAgIHEudm11bHQoYiwgYik7XG4gICAgICAgIHEudm11bHQoYywgYyk7XG4gICAgICAgIHgudmFkZChiLCBiKTtcbiAgICAgICAgeC52YWRkKGMsIGMpO1xuICAgICAgICBjb25zdCBkaXN0YW5jZSA9IGludGVyc2VjdFBvaW50LmRpc3RhbmNlVG8oZnJvbSk7XG5cbiAgICAgICAgaWYgKCEoUmF5LnBvaW50SW5UcmlhbmdsZShpbnRlcnNlY3RQb2ludCwgYSwgYiwgYykgfHwgUmF5LnBvaW50SW5UcmlhbmdsZShpbnRlcnNlY3RQb2ludCwgYiwgYSwgYykpIHx8IGRpc3RhbmNlID4gZnJvbVRvRGlzdGFuY2UpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucmVwb3J0SW50ZXJzZWN0aW9uKG5vcm1hbCwgaW50ZXJzZWN0UG9pbnQsIHJlcG9ydGVkU2hhcGUsIGJvZHksIGZpKTtcbiAgICAgIH0gLy8gfVxuXG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBAdG9kbyBPcHRpbWl6ZSBieSB0cmFuc2Zvcm1pbmcgdGhlIHdvcmxkIHRvIGxvY2FsIHNwYWNlIGZpcnN0LlxuICAgKiBAdG9kbyBVc2UgT2N0cmVlIGxvb2t1cFxuICAgKi9cblxuXG4gIF9pbnRlcnNlY3RUcmltZXNoKG1lc2gsIHF1YXQsIHBvc2l0aW9uLCBib2R5LCByZXBvcnRlZFNoYXBlLCBvcHRpb25zKSB7XG4gICAgY29uc3Qgbm9ybWFsID0gaW50ZXJzZWN0VHJpbWVzaF9ub3JtYWw7XG4gICAgY29uc3QgdHJpYW5nbGVzID0gaW50ZXJzZWN0VHJpbWVzaF90cmlhbmdsZXM7XG4gICAgY29uc3QgdHJlZVRyYW5zZm9ybSA9IGludGVyc2VjdFRyaW1lc2hfdHJlZVRyYW5zZm9ybTtcbiAgICBjb25zdCB2ZWN0b3IgPSBpbnRlcnNlY3RDb252ZXhfdmVjdG9yO1xuICAgIGNvbnN0IGxvY2FsRGlyZWN0aW9uID0gaW50ZXJzZWN0VHJpbWVzaF9sb2NhbERpcmVjdGlvbjtcbiAgICBjb25zdCBsb2NhbEZyb20gPSBpbnRlcnNlY3RUcmltZXNoX2xvY2FsRnJvbTtcbiAgICBjb25zdCBsb2NhbFRvID0gaW50ZXJzZWN0VHJpbWVzaF9sb2NhbFRvO1xuICAgIGNvbnN0IHdvcmxkSW50ZXJzZWN0UG9pbnQgPSBpbnRlcnNlY3RUcmltZXNoX3dvcmxkSW50ZXJzZWN0UG9pbnQ7XG4gICAgY29uc3Qgd29ybGROb3JtYWwgPSBpbnRlcnNlY3RUcmltZXNoX3dvcmxkTm9ybWFsOyAvLyBDaGVja2luZyBmYWNlc1xuXG4gICAgY29uc3QgaW5kaWNlcyA9IG1lc2guaW5kaWNlcztcbiAgICBtZXNoLnZlcnRpY2VzOyAvLyBjb25zdCBub3JtYWxzID0gbWVzaC5mYWNlTm9ybWFsc1xuXG4gICAgY29uc3QgZnJvbSA9IHRoaXMuZnJvbTtcbiAgICBjb25zdCB0byA9IHRoaXMudG87XG4gICAgY29uc3QgZGlyZWN0aW9uID0gdGhpcy5kaXJlY3Rpb247XG4gICAgdHJlZVRyYW5zZm9ybS5wb3NpdGlvbi5jb3B5KHBvc2l0aW9uKTtcbiAgICB0cmVlVHJhbnNmb3JtLnF1YXRlcm5pb24uY29weShxdWF0KTsgLy8gVHJhbnNmb3JtIHJheSB0byBsb2NhbCBzcGFjZSFcblxuICAgIFRyYW5zZm9ybS52ZWN0b3JUb0xvY2FsRnJhbWUocG9zaXRpb24sIHF1YXQsIGRpcmVjdGlvbiwgbG9jYWxEaXJlY3Rpb24pO1xuICAgIFRyYW5zZm9ybS5wb2ludFRvTG9jYWxGcmFtZShwb3NpdGlvbiwgcXVhdCwgZnJvbSwgbG9jYWxGcm9tKTtcbiAgICBUcmFuc2Zvcm0ucG9pbnRUb0xvY2FsRnJhbWUocG9zaXRpb24sIHF1YXQsIHRvLCBsb2NhbFRvKTtcbiAgICBsb2NhbFRvLnggKj0gbWVzaC5zY2FsZS54O1xuICAgIGxvY2FsVG8ueSAqPSBtZXNoLnNjYWxlLnk7XG4gICAgbG9jYWxUby56ICo9IG1lc2guc2NhbGUuejtcbiAgICBsb2NhbEZyb20ueCAqPSBtZXNoLnNjYWxlLng7XG4gICAgbG9jYWxGcm9tLnkgKj0gbWVzaC5zY2FsZS55O1xuICAgIGxvY2FsRnJvbS56ICo9IG1lc2guc2NhbGUuejtcbiAgICBsb2NhbFRvLnZzdWIobG9jYWxGcm9tLCBsb2NhbERpcmVjdGlvbik7XG4gICAgbG9jYWxEaXJlY3Rpb24ubm9ybWFsaXplKCk7XG4gICAgY29uc3QgZnJvbVRvRGlzdGFuY2VTcXVhcmVkID0gbG9jYWxGcm9tLmRpc3RhbmNlU3F1YXJlZChsb2NhbFRvKTtcbiAgICBtZXNoLnRyZWUucmF5UXVlcnkodGhpcywgdHJlZVRyYW5zZm9ybSwgdHJpYW5nbGVzKTtcblxuICAgIGZvciAobGV0IGkgPSAwLCBOID0gdHJpYW5nbGVzLmxlbmd0aDsgIXRoaXMucmVzdWx0LnNob3VsZFN0b3AgJiYgaSAhPT0gTjsgaSsrKSB7XG4gICAgICBjb25zdCB0cmlhbmdsZXNJbmRleCA9IHRyaWFuZ2xlc1tpXTtcbiAgICAgIG1lc2guZ2V0Tm9ybWFsKHRyaWFuZ2xlc0luZGV4LCBub3JtYWwpOyAvLyBkZXRlcm1pbmUgaWYgcmF5IGludGVyc2VjdHMgdGhlIHBsYW5lIG9mIHRoZSBmYWNlXG4gICAgICAvLyBub3RlOiB0aGlzIHdvcmtzIHJlZ2FyZGxlc3Mgb2YgdGhlIGRpcmVjdGlvbiBvZiB0aGUgZmFjZSBub3JtYWxcbiAgICAgIC8vIEdldCBwbGFuZSBwb2ludCBpbiB3b3JsZCBjb29yZGluYXRlcy4uLlxuXG4gICAgICBtZXNoLmdldFZlcnRleChpbmRpY2VzW3RyaWFuZ2xlc0luZGV4ICogM10sIGEpOyAvLyAuLi5idXQgbWFrZSBpdCByZWxhdGl2ZSB0byB0aGUgcmF5IGZyb20uIFdlJ2xsIGZpeCB0aGlzIGxhdGVyLlxuXG4gICAgICBhLnZzdWIobG9jYWxGcm9tLCB2ZWN0b3IpOyAvLyBJZiB0aGlzIGRvdCBwcm9kdWN0IGlzIG5lZ2F0aXZlLCB3ZSBoYXZlIHNvbWV0aGluZyBpbnRlcmVzdGluZ1xuXG4gICAgICBjb25zdCBkb3QgPSBsb2NhbERpcmVjdGlvbi5kb3Qobm9ybWFsKTsgLy8gQmFpbCBvdXQgaWYgcmF5IGFuZCBwbGFuZSBhcmUgcGFyYWxsZWxcbiAgICAgIC8vIGlmIChNYXRoLmFicyggZG90ICkgPCB0aGlzLnByZWNpc2lvbil7XG4gICAgICAvLyAgICAgY29udGludWU7XG4gICAgICAvLyB9XG4gICAgICAvLyBjYWxjIGRpc3RhbmNlIHRvIHBsYW5lXG5cbiAgICAgIGNvbnN0IHNjYWxhciA9IG5vcm1hbC5kb3QodmVjdG9yKSAvIGRvdDsgLy8gaWYgbmVnYXRpdmUgZGlzdGFuY2UsIHRoZW4gcGxhbmUgaXMgYmVoaW5kIHJheVxuXG4gICAgICBpZiAoc2NhbGFyIDwgMCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH0gLy8gSW50ZXJzZWN0aW9uIHBvaW50IGlzIGZyb20gKyBkaXJlY3Rpb24gKiBzY2FsYXJcblxuXG4gICAgICBsb2NhbERpcmVjdGlvbi5zY2FsZShzY2FsYXIsIGludGVyc2VjdFBvaW50KTtcbiAgICAgIGludGVyc2VjdFBvaW50LnZhZGQobG9jYWxGcm9tLCBpbnRlcnNlY3RQb2ludCk7IC8vIEdldCB0cmlhbmdsZSB2ZXJ0aWNlc1xuXG4gICAgICBtZXNoLmdldFZlcnRleChpbmRpY2VzW3RyaWFuZ2xlc0luZGV4ICogMyArIDFdLCBiKTtcbiAgICAgIG1lc2guZ2V0VmVydGV4KGluZGljZXNbdHJpYW5nbGVzSW5kZXggKiAzICsgMl0sIGMpO1xuICAgICAgY29uc3Qgc3F1YXJlZERpc3RhbmNlID0gaW50ZXJzZWN0UG9pbnQuZGlzdGFuY2VTcXVhcmVkKGxvY2FsRnJvbSk7XG5cbiAgICAgIGlmICghKFJheS5wb2ludEluVHJpYW5nbGUoaW50ZXJzZWN0UG9pbnQsIGIsIGEsIGMpIHx8IFJheS5wb2ludEluVHJpYW5nbGUoaW50ZXJzZWN0UG9pbnQsIGEsIGIsIGMpKSB8fCBzcXVhcmVkRGlzdGFuY2UgPiBmcm9tVG9EaXN0YW5jZVNxdWFyZWQpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9IC8vIHRyYW5zZm9ybSBpbnRlcnNlY3Rwb2ludCBhbmQgbm9ybWFsIHRvIHdvcmxkXG5cblxuICAgICAgVHJhbnNmb3JtLnZlY3RvclRvV29ybGRGcmFtZShxdWF0LCBub3JtYWwsIHdvcmxkTm9ybWFsKTtcbiAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZShwb3NpdGlvbiwgcXVhdCwgaW50ZXJzZWN0UG9pbnQsIHdvcmxkSW50ZXJzZWN0UG9pbnQpO1xuICAgICAgdGhpcy5yZXBvcnRJbnRlcnNlY3Rpb24od29ybGROb3JtYWwsIHdvcmxkSW50ZXJzZWN0UG9pbnQsIHJlcG9ydGVkU2hhcGUsIGJvZHksIHRyaWFuZ2xlc0luZGV4KTtcbiAgICB9XG5cbiAgICB0cmlhbmdsZXMubGVuZ3RoID0gMDtcbiAgfVxuICAvKipcbiAgICogQHJldHVybiBUcnVlIGlmIHRoZSBpbnRlcnNlY3Rpb25zIHNob3VsZCBjb250aW51ZVxuICAgKi9cblxuXG4gIHJlcG9ydEludGVyc2VjdGlvbihub3JtYWwsIGhpdFBvaW50V29ybGQsIHNoYXBlLCBib2R5LCBoaXRGYWNlSW5kZXgpIHtcbiAgICBjb25zdCBmcm9tID0gdGhpcy5mcm9tO1xuICAgIGNvbnN0IHRvID0gdGhpcy50bztcbiAgICBjb25zdCBkaXN0YW5jZSA9IGZyb20uZGlzdGFuY2VUbyhoaXRQb2ludFdvcmxkKTtcbiAgICBjb25zdCByZXN1bHQgPSB0aGlzLnJlc3VsdDsgLy8gU2tpcCBiYWNrIGZhY2VzP1xuXG4gICAgaWYgKHRoaXMuc2tpcEJhY2tmYWNlcyAmJiBub3JtYWwuZG90KHRoaXMuZGlyZWN0aW9uKSA+IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICByZXN1bHQuaGl0RmFjZUluZGV4ID0gdHlwZW9mIGhpdEZhY2VJbmRleCAhPT0gJ3VuZGVmaW5lZCcgPyBoaXRGYWNlSW5kZXggOiAtMTtcblxuICAgIHN3aXRjaCAodGhpcy5tb2RlKSB7XG4gICAgICBjYXNlIFJheS5BTEw6XG4gICAgICAgIHRoaXMuaGFzSGl0ID0gdHJ1ZTtcbiAgICAgICAgcmVzdWx0LnNldChmcm9tLCB0bywgbm9ybWFsLCBoaXRQb2ludFdvcmxkLCBzaGFwZSwgYm9keSwgZGlzdGFuY2UpO1xuICAgICAgICByZXN1bHQuaGFzSGl0ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5jYWxsYmFjayhyZXN1bHQpO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBSYXkuQ0xPU0VTVDpcbiAgICAgICAgLy8gU3RvcmUgaWYgY2xvc2VyIHRoYW4gY3VycmVudCBjbG9zZXN0XG4gICAgICAgIGlmIChkaXN0YW5jZSA8IHJlc3VsdC5kaXN0YW5jZSB8fCAhcmVzdWx0Lmhhc0hpdCkge1xuICAgICAgICAgIHRoaXMuaGFzSGl0ID0gdHJ1ZTtcbiAgICAgICAgICByZXN1bHQuaGFzSGl0ID0gdHJ1ZTtcbiAgICAgICAgICByZXN1bHQuc2V0KGZyb20sIHRvLCBub3JtYWwsIGhpdFBvaW50V29ybGQsIHNoYXBlLCBib2R5LCBkaXN0YW5jZSk7XG4gICAgICAgIH1cblxuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBSYXkuQU5ZOlxuICAgICAgICAvLyBSZXBvcnQgYW5kIHN0b3AuXG4gICAgICAgIHRoaXMuaGFzSGl0ID0gdHJ1ZTtcbiAgICAgICAgcmVzdWx0Lmhhc0hpdCA9IHRydWU7XG4gICAgICAgIHJlc3VsdC5zZXQoZnJvbSwgdG8sIG5vcm1hbCwgaGl0UG9pbnRXb3JsZCwgc2hhcGUsIGJvZHksIGRpc3RhbmNlKTtcbiAgICAgICAgcmVzdWx0LnNob3VsZFN0b3AgPSB0cnVlO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEFzIHBlciBcIkJhcnljZW50cmljIFRlY2huaXF1ZVwiIGFzIG5hbWVkXG4gICAqIHtAbGluayBodHRwczovL3d3dy5ibGFja3Bhd24uY29tL3RleHRzL3BvaW50aW5wb2x5L2RlZmF1bHQuaHRtbCBoZXJlfSBidXQgd2l0aG91dCB0aGUgZGl2aXNpb25cbiAgICovXG5cblxuICBzdGF0aWMgcG9pbnRJblRyaWFuZ2xlKHAsIGEsIGIsIGMpIHtcbiAgICBjLnZzdWIoYSwgdjApO1xuICAgIGIudnN1YihhLCB2MSk7XG4gICAgcC52c3ViKGEsIHYyKTtcbiAgICBjb25zdCBkb3QwMCA9IHYwLmRvdCh2MCk7XG4gICAgY29uc3QgZG90MDEgPSB2MC5kb3QodjEpO1xuICAgIGNvbnN0IGRvdDAyID0gdjAuZG90KHYyKTtcbiAgICBjb25zdCBkb3QxMSA9IHYxLmRvdCh2MSk7XG4gICAgY29uc3QgZG90MTIgPSB2MS5kb3QodjIpO1xuICAgIGxldCB1O1xuICAgIGxldCB2O1xuICAgIHJldHVybiAodSA9IGRvdDExICogZG90MDIgLSBkb3QwMSAqIGRvdDEyKSA+PSAwICYmICh2ID0gZG90MDAgKiBkb3QxMiAtIGRvdDAxICogZG90MDIpID49IDAgJiYgdSArIHYgPCBkb3QwMCAqIGRvdDExIC0gZG90MDEgKiBkb3QwMTtcbiAgfVxuXG59XG5SYXkuQ0xPU0VTVCA9IFJBWV9NT0RFUy5DTE9TRVNUO1xuUmF5LkFOWSA9IFJBWV9NT0RFUy5BTlk7XG5SYXkuQUxMID0gUkFZX01PREVTLkFMTDtcbmNvbnN0IHRtcEFBQkIkMSA9IG5ldyBBQUJCKCk7XG5jb25zdCB0bXBBcnJheSA9IFtdO1xuY29uc3QgdjEgPSBuZXcgVmVjMygpO1xuY29uc3QgdjIgPSBuZXcgVmVjMygpO1xuY29uc3QgaW50ZXJzZWN0Qm9keV94aSA9IG5ldyBWZWMzKCk7XG5jb25zdCBpbnRlcnNlY3RCb2R5X3FpID0gbmV3IFF1YXRlcm5pb24oKTtcbmNvbnN0IGludGVyc2VjdFBvaW50ID0gbmV3IFZlYzMoKTtcbmNvbnN0IGEgPSBuZXcgVmVjMygpO1xuY29uc3QgYiA9IG5ldyBWZWMzKCk7XG5jb25zdCBjID0gbmV3IFZlYzMoKTtcbmNvbnN0IGludGVyc2VjdENvbnZleE9wdGlvbnMgPSB7XG4gIGZhY2VMaXN0OiBbMF1cbn07XG5jb25zdCB3b3JsZFBpbGxhck9mZnNldCA9IG5ldyBWZWMzKCk7XG5jb25zdCBpbnRlcnNlY3RIZWlnaHRmaWVsZF9sb2NhbFJheSA9IG5ldyBSYXkoKTtcbmNvbnN0IGludGVyc2VjdEhlaWdodGZpZWxkX2luZGV4ID0gW107XG5jb25zdCBSYXlfaW50ZXJzZWN0U3BoZXJlX2ludGVyc2VjdGlvblBvaW50ID0gbmV3IFZlYzMoKTtcbmNvbnN0IFJheV9pbnRlcnNlY3RTcGhlcmVfbm9ybWFsID0gbmV3IFZlYzMoKTtcbmNvbnN0IGludGVyc2VjdENvbnZleF9ub3JtYWwgPSBuZXcgVmVjMygpO1xuY29uc3QgaW50ZXJzZWN0Q29udmV4X3ZlY3RvciA9IG5ldyBWZWMzKCk7XG5jb25zdCBpbnRlcnNlY3RUcmltZXNoX25vcm1hbCA9IG5ldyBWZWMzKCk7XG5jb25zdCBpbnRlcnNlY3RUcmltZXNoX2xvY2FsRGlyZWN0aW9uID0gbmV3IFZlYzMoKTtcbmNvbnN0IGludGVyc2VjdFRyaW1lc2hfbG9jYWxGcm9tID0gbmV3IFZlYzMoKTtcbmNvbnN0IGludGVyc2VjdFRyaW1lc2hfbG9jYWxUbyA9IG5ldyBWZWMzKCk7XG5jb25zdCBpbnRlcnNlY3RUcmltZXNoX3dvcmxkTm9ybWFsID0gbmV3IFZlYzMoKTtcbmNvbnN0IGludGVyc2VjdFRyaW1lc2hfd29ybGRJbnRlcnNlY3RQb2ludCA9IG5ldyBWZWMzKCk7XG5uZXcgQUFCQigpO1xuY29uc3QgaW50ZXJzZWN0VHJpbWVzaF90cmlhbmdsZXMgPSBbXTtcbmNvbnN0IGludGVyc2VjdFRyaW1lc2hfdHJlZVRyYW5zZm9ybSA9IG5ldyBUcmFuc2Zvcm0oKTtcbmNvbnN0IHYwID0gbmV3IFZlYzMoKTtcbmNvbnN0IGludGVyc2VjdCA9IG5ldyBWZWMzKCk7XG5cbmZ1bmN0aW9uIGRpc3RhbmNlRnJvbUludGVyc2VjdGlvbihmcm9tLCBkaXJlY3Rpb24sIHBvc2l0aW9uKSB7XG4gIC8vIHYwIGlzIHZlY3RvciBmcm9tIGZyb20gdG8gcG9zaXRpb25cbiAgcG9zaXRpb24udnN1Yihmcm9tLCB2MCk7XG4gIGNvbnN0IGRvdCA9IHYwLmRvdChkaXJlY3Rpb24pOyAvLyBpbnRlcnNlY3QgPSBkaXJlY3Rpb24qZG90ICsgZnJvbVxuXG4gIGRpcmVjdGlvbi5zY2FsZShkb3QsIGludGVyc2VjdCk7XG4gIGludGVyc2VjdC52YWRkKGZyb20sIGludGVyc2VjdCk7XG4gIGNvbnN0IGRpc3RhbmNlID0gcG9zaXRpb24uZGlzdGFuY2VUbyhpbnRlcnNlY3QpO1xuICByZXR1cm4gZGlzdGFuY2U7XG59XG5cbi8qKlxuICogU3dlZXAgYW5kIHBydW5lIGJyb2FkcGhhc2UgYWxvbmcgb25lIGF4aXMuXG4gKi9cbmNsYXNzIFNBUEJyb2FkcGhhc2UgZXh0ZW5kcyBCcm9hZHBoYXNlIHtcbiAgLyoqXG4gICAqIExpc3Qgb2YgYm9kaWVzIGN1cnJlbnRseSBpbiB0aGUgYnJvYWRwaGFzZS5cbiAgICovXG5cbiAgLyoqXG4gICAqIFRoZSB3b3JsZCB0byBzZWFyY2ggaW4uXG4gICAqL1xuXG4gIC8qKlxuICAgKiBBeGlzIHRvIHNvcnQgdGhlIGJvZGllcyBhbG9uZy5cbiAgICogU2V0IHRvIDAgZm9yIHggYXhpcywgYW5kIDEgZm9yIHkgYXhpcy5cbiAgICogRm9yIGJlc3QgcGVyZm9ybWFuY2UsIHBpY2sgdGhlIGF4aXMgd2hlcmUgYm9kaWVzIGFyZSBtb3N0IGRpc3RyaWJ1dGVkLlxuICAgKi9cblxuICAvKipcbiAgICogQ2hlY2sgaWYgdGhlIGJvdW5kcyBvZiB0d28gYm9kaWVzIG92ZXJsYXAsIGFsb25nIHRoZSBnaXZlbiBTQVAgYXhpcy5cbiAgICovXG4gIHN0YXRpYyBjaGVja0JvdW5kcyhiaSwgYmosIGF4aXNJbmRleCkge1xuICAgIGxldCBiaVBvcztcbiAgICBsZXQgYmpQb3M7XG5cbiAgICBpZiAoYXhpc0luZGV4ID09PSAwKSB7XG4gICAgICBiaVBvcyA9IGJpLnBvc2l0aW9uLng7XG4gICAgICBialBvcyA9IGJqLnBvc2l0aW9uLng7XG4gICAgfSBlbHNlIGlmIChheGlzSW5kZXggPT09IDEpIHtcbiAgICAgIGJpUG9zID0gYmkucG9zaXRpb24ueTtcbiAgICAgIGJqUG9zID0gYmoucG9zaXRpb24ueTtcbiAgICB9IGVsc2UgaWYgKGF4aXNJbmRleCA9PT0gMikge1xuICAgICAgYmlQb3MgPSBiaS5wb3NpdGlvbi56O1xuICAgICAgYmpQb3MgPSBiai5wb3NpdGlvbi56O1xuICAgIH1cblxuICAgIGNvbnN0IHJpID0gYmkuYm91bmRpbmdSYWRpdXMsXG4gICAgICAgICAgcmogPSBiai5ib3VuZGluZ1JhZGl1cyxcbiAgICAgICAgICBib3VuZEEyID0gYmlQb3MgKyByaSxcbiAgICAgICAgICBib3VuZEIxID0gYmpQb3MgLSByajtcbiAgICByZXR1cm4gYm91bmRCMSA8IGJvdW5kQTI7XG4gIH0gLy8gTm90ZTogdGhlc2UgYXJlIGlkZW50aWNhbCwgc2F2ZSBmb3IgeC95L3ogbG93ZXJib3VuZFxuXG4gIC8qKlxuICAgKiBpbnNlcnRpb25Tb3J0WFxuICAgKi9cblxuXG4gIHN0YXRpYyBpbnNlcnRpb25Tb3J0WChhKSB7XG4gICAgZm9yIChsZXQgaSA9IDEsIGwgPSBhLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgY29uc3QgdiA9IGFbaV07XG4gICAgICBsZXQgajtcblxuICAgICAgZm9yIChqID0gaSAtIDE7IGogPj0gMDsgai0tKSB7XG4gICAgICAgIGlmIChhW2pdLmFhYmIubG93ZXJCb3VuZC54IDw9IHYuYWFiYi5sb3dlckJvdW5kLngpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGFbaiArIDFdID0gYVtqXTtcbiAgICAgIH1cblxuICAgICAgYVtqICsgMV0gPSB2O1xuICAgIH1cblxuICAgIHJldHVybiBhO1xuICB9XG4gIC8qKlxuICAgKiBpbnNlcnRpb25Tb3J0WVxuICAgKi9cblxuXG4gIHN0YXRpYyBpbnNlcnRpb25Tb3J0WShhKSB7XG4gICAgZm9yIChsZXQgaSA9IDEsIGwgPSBhLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgY29uc3QgdiA9IGFbaV07XG4gICAgICBsZXQgajtcblxuICAgICAgZm9yIChqID0gaSAtIDE7IGogPj0gMDsgai0tKSB7XG4gICAgICAgIGlmIChhW2pdLmFhYmIubG93ZXJCb3VuZC55IDw9IHYuYWFiYi5sb3dlckJvdW5kLnkpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGFbaiArIDFdID0gYVtqXTtcbiAgICAgIH1cblxuICAgICAgYVtqICsgMV0gPSB2O1xuICAgIH1cblxuICAgIHJldHVybiBhO1xuICB9XG4gIC8qKlxuICAgKiBpbnNlcnRpb25Tb3J0WlxuICAgKi9cblxuXG4gIHN0YXRpYyBpbnNlcnRpb25Tb3J0WihhKSB7XG4gICAgZm9yIChsZXQgaSA9IDEsIGwgPSBhLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgY29uc3QgdiA9IGFbaV07XG4gICAgICBsZXQgajtcblxuICAgICAgZm9yIChqID0gaSAtIDE7IGogPj0gMDsgai0tKSB7XG4gICAgICAgIGlmIChhW2pdLmFhYmIubG93ZXJCb3VuZC56IDw9IHYuYWFiYi5sb3dlckJvdW5kLnopIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGFbaiArIDFdID0gYVtqXTtcbiAgICAgIH1cblxuICAgICAgYVtqICsgMV0gPSB2O1xuICAgIH1cblxuICAgIHJldHVybiBhO1xuICB9XG5cbiAgY29uc3RydWN0b3Iod29ybGQpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuYXhpc0xpc3QgPSB2b2lkIDA7XG4gICAgdGhpcy53b3JsZCA9IHZvaWQgMDtcbiAgICB0aGlzLmF4aXNJbmRleCA9IHZvaWQgMDtcbiAgICB0aGlzLl9hZGRCb2R5SGFuZGxlciA9IHZvaWQgMDtcbiAgICB0aGlzLl9yZW1vdmVCb2R5SGFuZGxlciA9IHZvaWQgMDtcbiAgICB0aGlzLmF4aXNMaXN0ID0gW107XG4gICAgdGhpcy53b3JsZCA9IG51bGw7XG4gICAgdGhpcy5heGlzSW5kZXggPSAwO1xuICAgIGNvbnN0IGF4aXNMaXN0ID0gdGhpcy5heGlzTGlzdDtcblxuICAgIHRoaXMuX2FkZEJvZHlIYW5kbGVyID0gZXZlbnQgPT4ge1xuICAgICAgYXhpc0xpc3QucHVzaChldmVudC5ib2R5KTtcbiAgICB9O1xuXG4gICAgdGhpcy5fcmVtb3ZlQm9keUhhbmRsZXIgPSBldmVudCA9PiB7XG4gICAgICBjb25zdCBpZHggPSBheGlzTGlzdC5pbmRleE9mKGV2ZW50LmJvZHkpO1xuXG4gICAgICBpZiAoaWR4ICE9PSAtMSkge1xuICAgICAgICBheGlzTGlzdC5zcGxpY2UoaWR4LCAxKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgaWYgKHdvcmxkKSB7XG4gICAgICB0aGlzLnNldFdvcmxkKHdvcmxkKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIENoYW5nZSB0aGUgd29ybGRcbiAgICovXG5cblxuICBzZXRXb3JsZCh3b3JsZCkge1xuICAgIC8vIENsZWFyIHRoZSBvbGQgYXhpcyBhcnJheVxuICAgIHRoaXMuYXhpc0xpc3QubGVuZ3RoID0gMDsgLy8gQWRkIGFsbCBib2RpZXMgZnJvbSB0aGUgbmV3IHdvcmxkXG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHdvcmxkLmJvZGllcy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5heGlzTGlzdC5wdXNoKHdvcmxkLmJvZGllc1tpXSk7XG4gICAgfSAvLyBSZW1vdmUgb2xkIGhhbmRsZXJzLCBpZiBhbnlcblxuXG4gICAgd29ybGQucmVtb3ZlRXZlbnRMaXN0ZW5lcignYWRkQm9keScsIHRoaXMuX2FkZEJvZHlIYW5kbGVyKTtcbiAgICB3b3JsZC5yZW1vdmVFdmVudExpc3RlbmVyKCdyZW1vdmVCb2R5JywgdGhpcy5fcmVtb3ZlQm9keUhhbmRsZXIpOyAvLyBBZGQgaGFuZGxlcnMgdG8gdXBkYXRlIHRoZSBsaXN0IG9mIGJvZGllcy5cblxuICAgIHdvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ2FkZEJvZHknLCB0aGlzLl9hZGRCb2R5SGFuZGxlcik7XG4gICAgd29ybGQuYWRkRXZlbnRMaXN0ZW5lcigncmVtb3ZlQm9keScsIHRoaXMuX3JlbW92ZUJvZHlIYW5kbGVyKTtcbiAgICB0aGlzLndvcmxkID0gd29ybGQ7XG4gICAgdGhpcy5kaXJ0eSA9IHRydWU7XG4gIH1cbiAgLyoqXG4gICAqIENvbGxlY3QgYWxsIGNvbGxpc2lvbiBwYWlyc1xuICAgKi9cblxuXG4gIGNvbGxpc2lvblBhaXJzKHdvcmxkLCBwMSwgcDIpIHtcbiAgICBjb25zdCBib2RpZXMgPSB0aGlzLmF4aXNMaXN0O1xuICAgIGNvbnN0IE4gPSBib2RpZXMubGVuZ3RoO1xuICAgIGNvbnN0IGF4aXNJbmRleCA9IHRoaXMuYXhpc0luZGV4O1xuICAgIGxldCBpO1xuICAgIGxldCBqO1xuXG4gICAgaWYgKHRoaXMuZGlydHkpIHtcbiAgICAgIHRoaXMuc29ydExpc3QoKTtcbiAgICAgIHRoaXMuZGlydHkgPSBmYWxzZTtcbiAgICB9IC8vIExvb2sgdGhyb3VnaCB0aGUgbGlzdFxuXG5cbiAgICBmb3IgKGkgPSAwOyBpICE9PSBOOyBpKyspIHtcbiAgICAgIGNvbnN0IGJpID0gYm9kaWVzW2ldO1xuXG4gICAgICBmb3IgKGogPSBpICsgMTsgaiA8IE47IGorKykge1xuICAgICAgICBjb25zdCBiaiA9IGJvZGllc1tqXTtcblxuICAgICAgICBpZiAoIXRoaXMubmVlZEJyb2FkcGhhc2VDb2xsaXNpb24oYmksIGJqKSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFTQVBCcm9hZHBoYXNlLmNoZWNrQm91bmRzKGJpLCBiaiwgYXhpc0luZGV4KSkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5pbnRlcnNlY3Rpb25UZXN0KGJpLCBiaiwgcDEsIHAyKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzb3J0TGlzdCgpIHtcbiAgICBjb25zdCBheGlzTGlzdCA9IHRoaXMuYXhpc0xpc3Q7XG4gICAgY29uc3QgYXhpc0luZGV4ID0gdGhpcy5heGlzSW5kZXg7XG4gICAgY29uc3QgTiA9IGF4aXNMaXN0Lmxlbmd0aDsgLy8gVXBkYXRlIEFBQkJzXG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTjsgaSsrKSB7XG4gICAgICBjb25zdCBiaSA9IGF4aXNMaXN0W2ldO1xuXG4gICAgICBpZiAoYmkuYWFiYk5lZWRzVXBkYXRlKSB7XG4gICAgICAgIGJpLnVwZGF0ZUFBQkIoKTtcbiAgICAgIH1cbiAgICB9IC8vIFNvcnQgdGhlIGxpc3RcblxuXG4gICAgaWYgKGF4aXNJbmRleCA9PT0gMCkge1xuICAgICAgU0FQQnJvYWRwaGFzZS5pbnNlcnRpb25Tb3J0WChheGlzTGlzdCk7XG4gICAgfSBlbHNlIGlmIChheGlzSW5kZXggPT09IDEpIHtcbiAgICAgIFNBUEJyb2FkcGhhc2UuaW5zZXJ0aW9uU29ydFkoYXhpc0xpc3QpO1xuICAgIH0gZWxzZSBpZiAoYXhpc0luZGV4ID09PSAyKSB7XG4gICAgICBTQVBCcm9hZHBoYXNlLmluc2VydGlvblNvcnRaKGF4aXNMaXN0KTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIENvbXB1dGVzIHRoZSB2YXJpYW5jZSBvZiB0aGUgYm9keSBwb3NpdGlvbnMgYW5kIGVzdGltYXRlcyB0aGUgYmVzdCBheGlzIHRvIHVzZS5cbiAgICogV2lsbCBhdXRvbWF0aWNhbGx5IHNldCBwcm9wZXJ0eSBgYXhpc0luZGV4YC5cbiAgICovXG5cblxuICBhdXRvRGV0ZWN0QXhpcygpIHtcbiAgICBsZXQgc3VtWCA9IDA7XG4gICAgbGV0IHN1bVgyID0gMDtcbiAgICBsZXQgc3VtWSA9IDA7XG4gICAgbGV0IHN1bVkyID0gMDtcbiAgICBsZXQgc3VtWiA9IDA7XG4gICAgbGV0IHN1bVoyID0gMDtcbiAgICBjb25zdCBib2RpZXMgPSB0aGlzLmF4aXNMaXN0O1xuICAgIGNvbnN0IE4gPSBib2RpZXMubGVuZ3RoO1xuICAgIGNvbnN0IGludk4gPSAxIC8gTjtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOOyBpKyspIHtcbiAgICAgIGNvbnN0IGIgPSBib2RpZXNbaV07XG4gICAgICBjb25zdCBjZW50ZXJYID0gYi5wb3NpdGlvbi54O1xuICAgICAgc3VtWCArPSBjZW50ZXJYO1xuICAgICAgc3VtWDIgKz0gY2VudGVyWCAqIGNlbnRlclg7XG4gICAgICBjb25zdCBjZW50ZXJZID0gYi5wb3NpdGlvbi55O1xuICAgICAgc3VtWSArPSBjZW50ZXJZO1xuICAgICAgc3VtWTIgKz0gY2VudGVyWSAqIGNlbnRlclk7XG4gICAgICBjb25zdCBjZW50ZXJaID0gYi5wb3NpdGlvbi56O1xuICAgICAgc3VtWiArPSBjZW50ZXJaO1xuICAgICAgc3VtWjIgKz0gY2VudGVyWiAqIGNlbnRlclo7XG4gICAgfVxuXG4gICAgY29uc3QgdmFyaWFuY2VYID0gc3VtWDIgLSBzdW1YICogc3VtWCAqIGludk47XG4gICAgY29uc3QgdmFyaWFuY2VZID0gc3VtWTIgLSBzdW1ZICogc3VtWSAqIGludk47XG4gICAgY29uc3QgdmFyaWFuY2VaID0gc3VtWjIgLSBzdW1aICogc3VtWiAqIGludk47XG5cbiAgICBpZiAodmFyaWFuY2VYID4gdmFyaWFuY2VZKSB7XG4gICAgICBpZiAodmFyaWFuY2VYID4gdmFyaWFuY2VaKSB7XG4gICAgICAgIHRoaXMuYXhpc0luZGV4ID0gMDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuYXhpc0luZGV4ID0gMjtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHZhcmlhbmNlWSA+IHZhcmlhbmNlWikge1xuICAgICAgdGhpcy5heGlzSW5kZXggPSAxO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmF4aXNJbmRleCA9IDI7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIGFsbCB0aGUgYm9kaWVzIHdpdGhpbiBhbiBBQUJCLlxuICAgKiBAcGFyYW0gcmVzdWx0IEFuIGFycmF5IHRvIHN0b3JlIHJlc3VsdGluZyBib2RpZXMgaW4uXG4gICAqL1xuXG5cbiAgYWFiYlF1ZXJ5KHdvcmxkLCBhYWJiLCByZXN1bHQgPSBbXSkge1xuICAgIGlmICh0aGlzLmRpcnR5KSB7XG4gICAgICB0aGlzLnNvcnRMaXN0KCk7XG4gICAgICB0aGlzLmRpcnR5ID0gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3QgYXhpc0luZGV4ID0gdGhpcy5heGlzSW5kZXg7XG4gICAgbGV0IGF4aXMgPSAneCc7XG5cbiAgICBpZiAoYXhpc0luZGV4ID09PSAxKSB7XG4gICAgICBheGlzID0gJ3knO1xuICAgIH1cblxuICAgIGlmIChheGlzSW5kZXggPT09IDIpIHtcbiAgICAgIGF4aXMgPSAneic7XG4gICAgfVxuXG4gICAgY29uc3QgYXhpc0xpc3QgPSB0aGlzLmF4aXNMaXN0O1xuICAgIGFhYmIubG93ZXJCb3VuZFtheGlzXTtcbiAgICBhYWJiLnVwcGVyQm91bmRbYXhpc107XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGF4aXNMaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBiID0gYXhpc0xpc3RbaV07XG5cbiAgICAgIGlmIChiLmFhYmJOZWVkc1VwZGF0ZSkge1xuICAgICAgICBiLnVwZGF0ZUFBQkIoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGIuYWFiYi5vdmVybGFwcyhhYWJiKSkge1xuICAgICAgICByZXN1bHQucHVzaChiKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbn1cblxuY2xhc3MgVXRpbHMge1xuICAvKipcbiAgICogRXh0ZW5kIGFuIG9wdGlvbnMgb2JqZWN0IHdpdGggZGVmYXVsdCB2YWx1ZXMuXG4gICAqIEBwYXJhbSBvcHRpb25zIFRoZSBvcHRpb25zIG9iamVjdC4gTWF5IGJlIGZhbHN5OiBpbiB0aGlzIGNhc2UsIGEgbmV3IG9iamVjdCBpcyBjcmVhdGVkIGFuZCByZXR1cm5lZC5cbiAgICogQHBhcmFtIGRlZmF1bHRzIEFuIG9iamVjdCBjb250YWluaW5nIGRlZmF1bHQgdmFsdWVzLlxuICAgKiBAcmV0dXJuIFRoZSBtb2RpZmllZCBvcHRpb25zIG9iamVjdC5cbiAgICovXG4gIHN0YXRpYyBkZWZhdWx0cyhvcHRpb25zID0ge30sIGRlZmF1bHRzKSB7XG4gICAgZm9yIChsZXQga2V5IGluIGRlZmF1bHRzKSB7XG4gICAgICBpZiAoIShrZXkgaW4gb3B0aW9ucykpIHtcbiAgICAgICAgb3B0aW9uc1trZXldID0gZGVmYXVsdHNba2V5XTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gb3B0aW9ucztcbiAgfVxuXG59XG5cbi8qKlxuICogQ29uc3RyYWludCBiYXNlIGNsYXNzXG4gKi9cbmNsYXNzIENvbnN0cmFpbnQge1xuICAvKipcbiAgICogRXF1YXRpb25zIHRvIGJlIHNvbHZlZCBpbiB0aGlzIGNvbnN0cmFpbnQuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBCb2R5IEEuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBCb2R5IEIuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBTZXQgdG8gZmFsc2UgaWYgeW91IGRvbid0IHdhbnQgdGhlIGJvZGllcyB0byBjb2xsaWRlIHdoZW4gdGhleSBhcmUgY29ubmVjdGVkLlxuICAgKi9cbiAgY29uc3RydWN0b3IoYm9keUEsIGJvZHlCLCBvcHRpb25zID0ge30pIHtcbiAgICB0aGlzLmVxdWF0aW9ucyA9IHZvaWQgMDtcbiAgICB0aGlzLmJvZHlBID0gdm9pZCAwO1xuICAgIHRoaXMuYm9keUIgPSB2b2lkIDA7XG4gICAgdGhpcy5pZCA9IHZvaWQgMDtcbiAgICB0aGlzLmNvbGxpZGVDb25uZWN0ZWQgPSB2b2lkIDA7XG4gICAgb3B0aW9ucyA9IFV0aWxzLmRlZmF1bHRzKG9wdGlvbnMsIHtcbiAgICAgIGNvbGxpZGVDb25uZWN0ZWQ6IHRydWUsXG4gICAgICB3YWtlVXBCb2RpZXM6IHRydWVcbiAgICB9KTtcbiAgICB0aGlzLmVxdWF0aW9ucyA9IFtdO1xuICAgIHRoaXMuYm9keUEgPSBib2R5QTtcbiAgICB0aGlzLmJvZHlCID0gYm9keUI7XG4gICAgdGhpcy5pZCA9IENvbnN0cmFpbnQuaWRDb3VudGVyKys7XG4gICAgdGhpcy5jb2xsaWRlQ29ubmVjdGVkID0gb3B0aW9ucy5jb2xsaWRlQ29ubmVjdGVkO1xuXG4gICAgaWYgKG9wdGlvbnMud2FrZVVwQm9kaWVzKSB7XG4gICAgICBpZiAoYm9keUEpIHtcbiAgICAgICAgYm9keUEud2FrZVVwKCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChib2R5Qikge1xuICAgICAgICBib2R5Qi53YWtlVXAoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFVwZGF0ZSBhbGwgdGhlIGVxdWF0aW9ucyB3aXRoIGRhdGEuXG4gICAqL1xuXG5cbiAgdXBkYXRlKCkge1xuICAgIHRocm93IG5ldyBFcnJvcignbWV0aG9kIHVwZGF0ZSgpIG5vdCBpbXBsbWVtZW50ZWQgaW4gdGhpcyBDb25zdHJhaW50IHN1YmNsYXNzIScpO1xuICB9XG4gIC8qKlxuICAgKiBFbmFibGVzIGFsbCBlcXVhdGlvbnMgaW4gdGhlIGNvbnN0cmFpbnQuXG4gICAqL1xuXG5cbiAgZW5hYmxlKCkge1xuICAgIGNvbnN0IGVxcyA9IHRoaXMuZXF1YXRpb25zO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlcXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGVxc1tpXS5lbmFibGVkID0gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIERpc2FibGVzIGFsbCBlcXVhdGlvbnMgaW4gdGhlIGNvbnN0cmFpbnQuXG4gICAqL1xuXG5cbiAgZGlzYWJsZSgpIHtcbiAgICBjb25zdCBlcXMgPSB0aGlzLmVxdWF0aW9ucztcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZXFzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBlcXNbaV0uZW5hYmxlZCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG59XG5Db25zdHJhaW50LmlkQ291bnRlciA9IDA7XG5cbi8qKlxuICogQW4gZWxlbWVudCBjb250YWluaW5nIDYgZW50cmllcywgMyBzcGF0aWFsIGFuZCAzIHJvdGF0aW9uYWwgZGVncmVlcyBvZiBmcmVlZG9tLlxuICovXG5cbmNsYXNzIEphY29iaWFuRWxlbWVudCB7XG4gIC8qKlxuICAgKiBzcGF0aWFsXG4gICAqL1xuXG4gIC8qKlxuICAgKiByb3RhdGlvbmFsXG4gICAqL1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnNwYXRpYWwgPSB2b2lkIDA7XG4gICAgdGhpcy5yb3RhdGlvbmFsID0gdm9pZCAwO1xuICAgIHRoaXMuc3BhdGlhbCA9IG5ldyBWZWMzKCk7XG4gICAgdGhpcy5yb3RhdGlvbmFsID0gbmV3IFZlYzMoKTtcbiAgfVxuICAvKipcbiAgICogTXVsdGlwbHkgd2l0aCBvdGhlciBKYWNvYmlhbkVsZW1lbnRcbiAgICovXG5cblxuICBtdWx0aXBseUVsZW1lbnQoZWxlbWVudCkge1xuICAgIHJldHVybiBlbGVtZW50LnNwYXRpYWwuZG90KHRoaXMuc3BhdGlhbCkgKyBlbGVtZW50LnJvdGF0aW9uYWwuZG90KHRoaXMucm90YXRpb25hbCk7XG4gIH1cbiAgLyoqXG4gICAqIE11bHRpcGx5IHdpdGggdHdvIHZlY3RvcnNcbiAgICovXG5cblxuICBtdWx0aXBseVZlY3RvcnMoc3BhdGlhbCwgcm90YXRpb25hbCkge1xuICAgIHJldHVybiBzcGF0aWFsLmRvdCh0aGlzLnNwYXRpYWwpICsgcm90YXRpb25hbC5kb3QodGhpcy5yb3RhdGlvbmFsKTtcbiAgfVxuXG59XG5cbi8qKlxuICogRXF1YXRpb24gYmFzZSBjbGFzcy5cbiAqXG4gKiBgYWAsIGBiYCBhbmQgYGVwc2AgYXJlIHtAbGluayBodHRwczovL3d3dzguY3MudW11LnNlL2t1cnNlci81RFYwNTgvVlQxNS9sZWN0dXJlcy9TUE9PS2xhYm5vdGVzLnBkZiBTUE9PS30gcGFyYW1ldGVycyB0aGF0IGRlZmF1bHQgdG8gYDAuMGAuIFNlZSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL3NjaHRlcHBlL2Nhbm5vbi5qcy9pc3N1ZXMvMjM4I2lzc3VlY29tbWVudC0xNDcxNzIzMjcgdGhpcyBleGNoYW5nZX0gZm9yIG1vcmUgZGV0YWlscyBvbiBDYW5ub24ncyBwaHlzaWNzIGltcGxlbWVudGF0aW9uLlxuICovXG5jbGFzcyBFcXVhdGlvbiB7XG4gIC8qKlxuICAgKiBNaW5pbXVtIChyZWFkOiBuZWdhdGl2ZSBtYXgpIGZvcmNlIHRvIGJlIGFwcGxpZWQgYnkgdGhlIGNvbnN0cmFpbnQuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBNYXhpbXVtIChyZWFkOiBwb3NpdGl2ZSBtYXgpIGZvcmNlIHRvIGJlIGFwcGxpZWQgYnkgdGhlIGNvbnN0cmFpbnQuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBTUE9PSyBwYXJhbWV0ZXJcbiAgICovXG5cbiAgLyoqXG4gICAqIFNQT09LIHBhcmFtZXRlclxuICAgKi9cblxuICAvKipcbiAgICogU1BPT0sgcGFyYW1ldGVyXG4gICAqL1xuXG4gIC8qKlxuICAgKiBBIG51bWJlciwgcHJvcG9ydGlvbmFsIHRvIHRoZSBmb3JjZSBhZGRlZCB0byB0aGUgYm9kaWVzLlxuICAgKi9cbiAgY29uc3RydWN0b3IoYmksIGJqLCBtaW5Gb3JjZSA9IC0xZTYsIG1heEZvcmNlID0gMWU2KSB7XG4gICAgdGhpcy5pZCA9IHZvaWQgMDtcbiAgICB0aGlzLm1pbkZvcmNlID0gdm9pZCAwO1xuICAgIHRoaXMubWF4Rm9yY2UgPSB2b2lkIDA7XG4gICAgdGhpcy5iaSA9IHZvaWQgMDtcbiAgICB0aGlzLmJqID0gdm9pZCAwO1xuICAgIHRoaXMuc2kgPSB2b2lkIDA7XG4gICAgdGhpcy5zaiA9IHZvaWQgMDtcbiAgICB0aGlzLmEgPSB2b2lkIDA7XG4gICAgdGhpcy5iID0gdm9pZCAwO1xuICAgIHRoaXMuZXBzID0gdm9pZCAwO1xuICAgIHRoaXMuamFjb2JpYW5FbGVtZW50QSA9IHZvaWQgMDtcbiAgICB0aGlzLmphY29iaWFuRWxlbWVudEIgPSB2b2lkIDA7XG4gICAgdGhpcy5lbmFibGVkID0gdm9pZCAwO1xuICAgIHRoaXMubXVsdGlwbGllciA9IHZvaWQgMDtcbiAgICB0aGlzLmlkID0gRXF1YXRpb24uaWRDb3VudGVyKys7XG4gICAgdGhpcy5taW5Gb3JjZSA9IG1pbkZvcmNlO1xuICAgIHRoaXMubWF4Rm9yY2UgPSBtYXhGb3JjZTtcbiAgICB0aGlzLmJpID0gYmk7XG4gICAgdGhpcy5iaiA9IGJqO1xuICAgIHRoaXMuYSA9IDAuMDsgLy8gU1BPT0sgcGFyYW1ldGVyXG5cbiAgICB0aGlzLmIgPSAwLjA7IC8vIFNQT09LIHBhcmFtZXRlclxuXG4gICAgdGhpcy5lcHMgPSAwLjA7IC8vIFNQT09LIHBhcmFtZXRlclxuXG4gICAgdGhpcy5qYWNvYmlhbkVsZW1lbnRBID0gbmV3IEphY29iaWFuRWxlbWVudCgpO1xuICAgIHRoaXMuamFjb2JpYW5FbGVtZW50QiA9IG5ldyBKYWNvYmlhbkVsZW1lbnQoKTtcbiAgICB0aGlzLmVuYWJsZWQgPSB0cnVlO1xuICAgIHRoaXMubXVsdGlwbGllciA9IDA7XG4gICAgdGhpcy5zZXRTcG9va1BhcmFtcygxZTcsIDQsIDEgLyA2MCk7IC8vIFNldCB0eXBpY2FsIHNwb29rIHBhcmFtc1xuICB9XG4gIC8qKlxuICAgKiBSZWNhbGN1bGF0ZXMgYSwgYiwgYW5kIGVwcy5cbiAgICpcbiAgICogVGhlIEVxdWF0aW9uIGNvbnN0cnVjdG9yIHNldHMgdHlwaWNhbCBTUE9PSyBwYXJhbWV0ZXJzIGFzIHN1Y2g6XG4gICAqICogYHN0aWZmbmVzc2AgPSAxZTdcbiAgICogKiBgcmVsYXhhdGlvbmAgPSA0XG4gICAqICogYHRpbWVTdGVwYD0gMSAvIDYwLCBfbm90ZSB0aGUgaGFyZGNvZGVkIHJlZnJlc2ggcmF0ZS5fXG4gICAqL1xuXG5cbiAgc2V0U3Bvb2tQYXJhbXMoc3RpZmZuZXNzLCByZWxheGF0aW9uLCB0aW1lU3RlcCkge1xuICAgIGNvbnN0IGQgPSByZWxheGF0aW9uO1xuICAgIGNvbnN0IGsgPSBzdGlmZm5lc3M7XG4gICAgY29uc3QgaCA9IHRpbWVTdGVwO1xuICAgIHRoaXMuYSA9IDQuMCAvIChoICogKDEgKyA0ICogZCkpO1xuICAgIHRoaXMuYiA9IDQuMCAqIGQgLyAoMSArIDQgKiBkKTtcbiAgICB0aGlzLmVwcyA9IDQuMCAvIChoICogaCAqIGsgKiAoMSArIDQgKiBkKSk7XG4gIH1cbiAgLyoqXG4gICAqIENvbXB1dGVzIHRoZSByaWdodCBoYW5kIHNpZGUgb2YgdGhlIFNQT09LIGVxdWF0aW9uXG4gICAqL1xuXG5cbiAgY29tcHV0ZUIoYSwgYiwgaCkge1xuICAgIGNvbnN0IEdXID0gdGhpcy5jb21wdXRlR1coKTtcbiAgICBjb25zdCBHcSA9IHRoaXMuY29tcHV0ZUdxKCk7XG4gICAgY29uc3QgR2lNZiA9IHRoaXMuY29tcHV0ZUdpTWYoKTtcbiAgICByZXR1cm4gLUdxICogYSAtIEdXICogYiAtIEdpTWYgKiBoO1xuICB9XG4gIC8qKlxuICAgKiBDb21wdXRlcyBHKnEsIHdoZXJlIHEgYXJlIHRoZSBnZW5lcmFsaXplZCBib2R5IGNvb3JkaW5hdGVzXG4gICAqL1xuXG5cbiAgY29tcHV0ZUdxKCkge1xuICAgIGNvbnN0IEdBID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRBO1xuICAgIGNvbnN0IEdCID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRCO1xuICAgIGNvbnN0IGJpID0gdGhpcy5iaTtcbiAgICBjb25zdCBiaiA9IHRoaXMuYmo7XG4gICAgY29uc3QgeGkgPSBiaS5wb3NpdGlvbjtcbiAgICBjb25zdCB4aiA9IGJqLnBvc2l0aW9uO1xuICAgIHJldHVybiBHQS5zcGF0aWFsLmRvdCh4aSkgKyBHQi5zcGF0aWFsLmRvdCh4aik7XG4gIH1cbiAgLyoqXG4gICAqIENvbXB1dGVzIEcqVywgd2hlcmUgVyBhcmUgdGhlIGJvZHkgdmVsb2NpdGllc1xuICAgKi9cblxuXG4gIGNvbXB1dGVHVygpIHtcbiAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTtcbiAgICBjb25zdCBHQiA9IHRoaXMuamFjb2JpYW5FbGVtZW50QjtcbiAgICBjb25zdCBiaSA9IHRoaXMuYmk7XG4gICAgY29uc3QgYmogPSB0aGlzLmJqO1xuICAgIGNvbnN0IHZpID0gYmkudmVsb2NpdHk7XG4gICAgY29uc3QgdmogPSBiai52ZWxvY2l0eTtcbiAgICBjb25zdCB3aSA9IGJpLmFuZ3VsYXJWZWxvY2l0eTtcbiAgICBjb25zdCB3aiA9IGJqLmFuZ3VsYXJWZWxvY2l0eTtcbiAgICByZXR1cm4gR0EubXVsdGlwbHlWZWN0b3JzKHZpLCB3aSkgKyBHQi5tdWx0aXBseVZlY3RvcnModmosIHdqKTtcbiAgfVxuICAvKipcbiAgICogQ29tcHV0ZXMgRypXbGFtYmRhLCB3aGVyZSBXIGFyZSB0aGUgYm9keSB2ZWxvY2l0aWVzXG4gICAqL1xuXG5cbiAgY29tcHV0ZUdXbGFtYmRhKCkge1xuICAgIGNvbnN0IEdBID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRBO1xuICAgIGNvbnN0IEdCID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRCO1xuICAgIGNvbnN0IGJpID0gdGhpcy5iaTtcbiAgICBjb25zdCBiaiA9IHRoaXMuYmo7XG4gICAgY29uc3QgdmkgPSBiaS52bGFtYmRhO1xuICAgIGNvbnN0IHZqID0gYmoudmxhbWJkYTtcbiAgICBjb25zdCB3aSA9IGJpLndsYW1iZGE7XG4gICAgY29uc3Qgd2ogPSBiai53bGFtYmRhO1xuICAgIHJldHVybiBHQS5tdWx0aXBseVZlY3RvcnModmksIHdpKSArIEdCLm11bHRpcGx5VmVjdG9ycyh2aiwgd2opO1xuICB9XG4gIC8qKlxuICAgKiBDb21wdXRlcyBHKmludihNKSpmLCB3aGVyZSBNIGlzIHRoZSBtYXNzIG1hdHJpeCB3aXRoIGRpYWdvbmFsIGJsb2NrcyBmb3IgZWFjaCBib2R5LCBhbmQgZiBhcmUgdGhlIGZvcmNlcyBvbiB0aGUgYm9kaWVzLlxuICAgKi9cblxuXG4gIGNvbXB1dGVHaU1mKCkge1xuICAgIGNvbnN0IEdBID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRBO1xuICAgIGNvbnN0IEdCID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRCO1xuICAgIGNvbnN0IGJpID0gdGhpcy5iaTtcbiAgICBjb25zdCBiaiA9IHRoaXMuYmo7XG4gICAgY29uc3QgZmkgPSBiaS5mb3JjZTtcbiAgICBjb25zdCB0aSA9IGJpLnRvcnF1ZTtcbiAgICBjb25zdCBmaiA9IGJqLmZvcmNlO1xuICAgIGNvbnN0IHRqID0gYmoudG9ycXVlO1xuICAgIGNvbnN0IGludk1hc3NpID0gYmkuaW52TWFzc1NvbHZlO1xuICAgIGNvbnN0IGludk1hc3NqID0gYmouaW52TWFzc1NvbHZlO1xuICAgIGZpLnNjYWxlKGludk1hc3NpLCBpTWZpKTtcbiAgICBmai5zY2FsZShpbnZNYXNzaiwgaU1maik7XG4gICAgYmkuaW52SW5lcnRpYVdvcmxkU29sdmUudm11bHQodGksIGludklpX3ZtdWx0X3RhdWkpO1xuICAgIGJqLmludkluZXJ0aWFXb3JsZFNvbHZlLnZtdWx0KHRqLCBpbnZJal92bXVsdF90YXVqKTtcbiAgICByZXR1cm4gR0EubXVsdGlwbHlWZWN0b3JzKGlNZmksIGludklpX3ZtdWx0X3RhdWkpICsgR0IubXVsdGlwbHlWZWN0b3JzKGlNZmosIGludklqX3ZtdWx0X3RhdWopO1xuICB9XG4gIC8qKlxuICAgKiBDb21wdXRlcyBHKmludihNKSpHJ1xuICAgKi9cblxuXG4gIGNvbXB1dGVHaU1HdCgpIHtcbiAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTtcbiAgICBjb25zdCBHQiA9IHRoaXMuamFjb2JpYW5FbGVtZW50QjtcbiAgICBjb25zdCBiaSA9IHRoaXMuYmk7XG4gICAgY29uc3QgYmogPSB0aGlzLmJqO1xuICAgIGNvbnN0IGludk1hc3NpID0gYmkuaW52TWFzc1NvbHZlO1xuICAgIGNvbnN0IGludk1hc3NqID0gYmouaW52TWFzc1NvbHZlO1xuICAgIGNvbnN0IGludklpID0gYmkuaW52SW5lcnRpYVdvcmxkU29sdmU7XG4gICAgY29uc3QgaW52SWogPSBiai5pbnZJbmVydGlhV29ybGRTb2x2ZTtcbiAgICBsZXQgcmVzdWx0ID0gaW52TWFzc2kgKyBpbnZNYXNzajtcbiAgICBpbnZJaS52bXVsdChHQS5yb3RhdGlvbmFsLCB0bXApO1xuICAgIHJlc3VsdCArPSB0bXAuZG90KEdBLnJvdGF0aW9uYWwpO1xuICAgIGludklqLnZtdWx0KEdCLnJvdGF0aW9uYWwsIHRtcCk7XG4gICAgcmVzdWx0ICs9IHRtcC5kb3QoR0Iucm90YXRpb25hbCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICAvKipcbiAgICogQWRkIGNvbnN0cmFpbnQgdmVsb2NpdHkgdG8gdGhlIGJvZGllcy5cbiAgICovXG5cblxuICBhZGRUb1dsYW1iZGEoZGVsdGFsYW1iZGEpIHtcbiAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTtcbiAgICBjb25zdCBHQiA9IHRoaXMuamFjb2JpYW5FbGVtZW50QjtcbiAgICBjb25zdCBiaSA9IHRoaXMuYmk7XG4gICAgY29uc3QgYmogPSB0aGlzLmJqO1xuICAgIGNvbnN0IHRlbXAgPSBhZGRUb1dsYW1iZGFfdGVtcDsgLy8gQWRkIHRvIGxpbmVhciB2ZWxvY2l0eVxuICAgIC8vIHZfbGFtYmRhICs9IGludihNKSAqIGRlbHRhX2xhbWJhICogR1xuXG4gICAgYmkudmxhbWJkYS5hZGRTY2FsZWRWZWN0b3IoYmkuaW52TWFzc1NvbHZlICogZGVsdGFsYW1iZGEsIEdBLnNwYXRpYWwsIGJpLnZsYW1iZGEpO1xuICAgIGJqLnZsYW1iZGEuYWRkU2NhbGVkVmVjdG9yKGJqLmludk1hc3NTb2x2ZSAqIGRlbHRhbGFtYmRhLCBHQi5zcGF0aWFsLCBiai52bGFtYmRhKTsgLy8gQWRkIHRvIGFuZ3VsYXIgdmVsb2NpdHlcblxuICAgIGJpLmludkluZXJ0aWFXb3JsZFNvbHZlLnZtdWx0KEdBLnJvdGF0aW9uYWwsIHRlbXApO1xuICAgIGJpLndsYW1iZGEuYWRkU2NhbGVkVmVjdG9yKGRlbHRhbGFtYmRhLCB0ZW1wLCBiaS53bGFtYmRhKTtcbiAgICBiai5pbnZJbmVydGlhV29ybGRTb2x2ZS52bXVsdChHQi5yb3RhdGlvbmFsLCB0ZW1wKTtcbiAgICBiai53bGFtYmRhLmFkZFNjYWxlZFZlY3RvcihkZWx0YWxhbWJkYSwgdGVtcCwgYmoud2xhbWJkYSk7XG4gIH1cbiAgLyoqXG4gICAqIENvbXB1dGUgdGhlIGRlbm9taW5hdG9yIHBhcnQgb2YgdGhlIFNQT09LIGVxdWF0aW9uOiBDID0gRyppbnYoTSkqRycgKyBlcHNcbiAgICovXG5cblxuICBjb21wdXRlQygpIHtcbiAgICByZXR1cm4gdGhpcy5jb21wdXRlR2lNR3QoKSArIHRoaXMuZXBzO1xuICB9XG5cbn1cbkVxdWF0aW9uLmlkQ291bnRlciA9IDA7XG5jb25zdCBpTWZpID0gbmV3IFZlYzMoKTtcbmNvbnN0IGlNZmogPSBuZXcgVmVjMygpO1xuY29uc3QgaW52SWlfdm11bHRfdGF1aSA9IG5ldyBWZWMzKCk7XG5jb25zdCBpbnZJal92bXVsdF90YXVqID0gbmV3IFZlYzMoKTtcbmNvbnN0IHRtcCA9IG5ldyBWZWMzKCk7XG5jb25zdCBhZGRUb1dsYW1iZGFfdGVtcCA9IG5ldyBWZWMzKCk7XG5cbi8qKlxuICogQ29udGFjdC9ub24tcGVuZXRyYXRpb24gY29uc3RyYWludCBlcXVhdGlvblxuICovXG5jbGFzcyBDb250YWN0RXF1YXRpb24gZXh0ZW5kcyBFcXVhdGlvbiB7XG4gIC8qKlxuICAgKiBcImJvdW5jaW5lc3NcIjogdTEgPSAtZSp1MFxuICAgKi9cblxuICAvKipcbiAgICogV29ybGQtb3JpZW50ZWQgdmVjdG9yIHRoYXQgZ29lcyBmcm9tIHRoZSBjZW50ZXIgb2YgYmkgdG8gdGhlIGNvbnRhY3QgcG9pbnQuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBXb3JsZC1vcmllbnRlZCB2ZWN0b3IgdGhhdCBzdGFydHMgaW4gYm9keSBqIHBvc2l0aW9uIGFuZCBnb2VzIHRvIHRoZSBjb250YWN0IHBvaW50LlxuICAgKi9cblxuICAvKipcbiAgICogQ29udGFjdCBub3JtYWwsIHBvaW50aW5nIG91dCBvZiBib2R5IGkuXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIG1heEZvcmNlID0gMWU2KSB7XG4gICAgc3VwZXIoYm9keUEsIGJvZHlCLCAwLCBtYXhGb3JjZSk7XG4gICAgdGhpcy5yZXN0aXR1dGlvbiA9IHZvaWQgMDtcbiAgICB0aGlzLnJpID0gdm9pZCAwO1xuICAgIHRoaXMucmogPSB2b2lkIDA7XG4gICAgdGhpcy5uaSA9IHZvaWQgMDtcbiAgICB0aGlzLnJlc3RpdHV0aW9uID0gMC4wO1xuICAgIHRoaXMucmkgPSBuZXcgVmVjMygpO1xuICAgIHRoaXMucmogPSBuZXcgVmVjMygpO1xuICAgIHRoaXMubmkgPSBuZXcgVmVjMygpO1xuICB9XG5cbiAgY29tcHV0ZUIoaCkge1xuICAgIGNvbnN0IGEgPSB0aGlzLmE7XG4gICAgY29uc3QgYiA9IHRoaXMuYjtcbiAgICBjb25zdCBiaSA9IHRoaXMuYmk7XG4gICAgY29uc3QgYmogPSB0aGlzLmJqO1xuICAgIGNvbnN0IHJpID0gdGhpcy5yaTtcbiAgICBjb25zdCByaiA9IHRoaXMucmo7XG4gICAgY29uc3Qgcml4biA9IENvbnRhY3RFcXVhdGlvbl9jb21wdXRlQl90ZW1wMTtcbiAgICBjb25zdCByanhuID0gQ29udGFjdEVxdWF0aW9uX2NvbXB1dGVCX3RlbXAyO1xuICAgIGNvbnN0IHZpID0gYmkudmVsb2NpdHk7XG4gICAgY29uc3Qgd2kgPSBiaS5hbmd1bGFyVmVsb2NpdHk7XG4gICAgYmkuZm9yY2U7XG4gICAgYmkudG9ycXVlO1xuICAgIGNvbnN0IHZqID0gYmoudmVsb2NpdHk7XG4gICAgY29uc3Qgd2ogPSBiai5hbmd1bGFyVmVsb2NpdHk7XG4gICAgYmouZm9yY2U7XG4gICAgYmoudG9ycXVlO1xuICAgIGNvbnN0IHBlbmV0cmF0aW9uVmVjID0gQ29udGFjdEVxdWF0aW9uX2NvbXB1dGVCX3RlbXAzO1xuICAgIGNvbnN0IEdBID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRBO1xuICAgIGNvbnN0IEdCID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRCO1xuICAgIGNvbnN0IG4gPSB0aGlzLm5pOyAvLyBDYWx1Y2xhdGUgY3Jvc3MgcHJvZHVjdHNcblxuICAgIHJpLmNyb3NzKG4sIHJpeG4pO1xuICAgIHJqLmNyb3NzKG4sIHJqeG4pOyAvLyBnID0geGorcmogLSh4aStyaSlcbiAgICAvLyBHID0gWyAtbmkgIC1yaXhuICBuaSAgcmp4biBdXG5cbiAgICBuLm5lZ2F0ZShHQS5zcGF0aWFsKTtcbiAgICByaXhuLm5lZ2F0ZShHQS5yb3RhdGlvbmFsKTtcbiAgICBHQi5zcGF0aWFsLmNvcHkobik7XG4gICAgR0Iucm90YXRpb25hbC5jb3B5KHJqeG4pOyAvLyBDYWxjdWxhdGUgdGhlIHBlbmV0cmF0aW9uIHZlY3RvclxuXG4gICAgcGVuZXRyYXRpb25WZWMuY29weShiai5wb3NpdGlvbik7XG4gICAgcGVuZXRyYXRpb25WZWMudmFkZChyaiwgcGVuZXRyYXRpb25WZWMpO1xuICAgIHBlbmV0cmF0aW9uVmVjLnZzdWIoYmkucG9zaXRpb24sIHBlbmV0cmF0aW9uVmVjKTtcbiAgICBwZW5ldHJhdGlvblZlYy52c3ViKHJpLCBwZW5ldHJhdGlvblZlYyk7XG4gICAgY29uc3QgZyA9IG4uZG90KHBlbmV0cmF0aW9uVmVjKTsgLy8gQ29tcHV0ZSBpdGVyYXRpb25cblxuICAgIGNvbnN0IGVQbHVzT25lID0gdGhpcy5yZXN0aXR1dGlvbiArIDE7XG4gICAgY29uc3QgR1cgPSBlUGx1c09uZSAqIHZqLmRvdChuKSAtIGVQbHVzT25lICogdmkuZG90KG4pICsgd2ouZG90KHJqeG4pIC0gd2kuZG90KHJpeG4pO1xuICAgIGNvbnN0IEdpTWYgPSB0aGlzLmNvbXB1dGVHaU1mKCk7XG4gICAgY29uc3QgQiA9IC1nICogYSAtIEdXICogYiAtIGggKiBHaU1mO1xuICAgIHJldHVybiBCO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIGN1cnJlbnQgcmVsYXRpdmUgdmVsb2NpdHkgaW4gdGhlIGNvbnRhY3QgcG9pbnQuXG4gICAqL1xuXG5cbiAgZ2V0SW1wYWN0VmVsb2NpdHlBbG9uZ05vcm1hbCgpIHtcbiAgICBjb25zdCB2aSA9IENvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3ZpO1xuICAgIGNvbnN0IHZqID0gQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfdmo7XG4gICAgY29uc3QgeGkgPSBDb250YWN0RXF1YXRpb25fZ2V0SW1wYWN0VmVsb2NpdHlBbG9uZ05vcm1hbF94aTtcbiAgICBjb25zdCB4aiA9IENvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3hqO1xuICAgIGNvbnN0IHJlbFZlbCA9IENvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3JlbFZlbDtcbiAgICB0aGlzLmJpLnBvc2l0aW9uLnZhZGQodGhpcy5yaSwgeGkpO1xuICAgIHRoaXMuYmoucG9zaXRpb24udmFkZCh0aGlzLnJqLCB4aik7XG4gICAgdGhpcy5iaS5nZXRWZWxvY2l0eUF0V29ybGRQb2ludCh4aSwgdmkpO1xuICAgIHRoaXMuYmouZ2V0VmVsb2NpdHlBdFdvcmxkUG9pbnQoeGosIHZqKTtcbiAgICB2aS52c3ViKHZqLCByZWxWZWwpO1xuICAgIHJldHVybiB0aGlzLm5pLmRvdChyZWxWZWwpO1xuICB9XG5cbn1cbmNvbnN0IENvbnRhY3RFcXVhdGlvbl9jb21wdXRlQl90ZW1wMSA9IG5ldyBWZWMzKCk7IC8vIFRlbXAgdmVjdG9yc1xuXG5jb25zdCBDb250YWN0RXF1YXRpb25fY29tcHV0ZUJfdGVtcDIgPSBuZXcgVmVjMygpO1xuY29uc3QgQ29udGFjdEVxdWF0aW9uX2NvbXB1dGVCX3RlbXAzID0gbmV3IFZlYzMoKTtcbmNvbnN0IENvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3ZpID0gbmV3IFZlYzMoKTtcbmNvbnN0IENvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3ZqID0gbmV3IFZlYzMoKTtcbmNvbnN0IENvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3hpID0gbmV3IFZlYzMoKTtcbmNvbnN0IENvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3hqID0gbmV3IFZlYzMoKTtcbmNvbnN0IENvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3JlbFZlbCA9IG5ldyBWZWMzKCk7XG5cbi8qKlxuICogQ29ubmVjdHMgdHdvIGJvZGllcyBhdCBnaXZlbiBvZmZzZXQgcG9pbnRzLlxuICogQGV4YW1wbGVcbiAqICAgICBjb25zdCBib2R5QSA9IG5ldyBCb2R5KHsgbWFzczogMSB9KVxuICogICAgIGNvbnN0IGJvZHlCID0gbmV3IEJvZHkoeyBtYXNzOiAxIH0pXG4gKiAgICAgYm9keUEucG9zaXRpb24uc2V0KC0xLCAwLCAwKVxuICogICAgIGJvZHlCLnBvc2l0aW9uLnNldCgxLCAwLCAwKVxuICogICAgIGJvZHlBLmFkZFNoYXBlKHNoYXBlQSlcbiAqICAgICBib2R5Qi5hZGRTaGFwZShzaGFwZUIpXG4gKiAgICAgd29ybGQuYWRkQm9keShib2R5QSlcbiAqICAgICB3b3JsZC5hZGRCb2R5KGJvZHlCKVxuICogICAgIGNvbnN0IGxvY2FsUGl2b3RBID0gbmV3IFZlYzMoMSwgMCwgMClcbiAqICAgICBjb25zdCBsb2NhbFBpdm90QiA9IG5ldyBWZWMzKC0xLCAwLCAwKVxuICogICAgIGNvbnN0IGNvbnN0cmFpbnQgPSBuZXcgUG9pbnRUb1BvaW50Q29uc3RyYWludChib2R5QSwgbG9jYWxQaXZvdEEsIGJvZHlCLCBsb2NhbFBpdm90QilcbiAqICAgICB3b3JsZC5hZGRDb25zdHJhaW50KGNvbnN0cmFpbnQpXG4gKi9cbmNsYXNzIFBvaW50VG9Qb2ludENvbnN0cmFpbnQgZXh0ZW5kcyBDb25zdHJhaW50IHtcbiAgLyoqXG4gICAqIFBpdm90LCBkZWZpbmVkIGxvY2FsbHkgaW4gYm9keUEuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBQaXZvdCwgZGVmaW5lZCBsb2NhbGx5IGluIGJvZHlCLlxuICAgKi9cblxuICAvKipcbiAgICogQHBhcmFtIHBpdm90QSBUaGUgcG9pbnQgcmVsYXRpdmUgdG8gdGhlIGNlbnRlciBvZiBtYXNzIG9mIGJvZHlBIHdoaWNoIGJvZHlBIGlzIGNvbnN0cmFpbmVkIHRvLlxuICAgKiBAcGFyYW0gYm9keUIgQm9keSB0aGF0IHdpbGwgYmUgY29uc3RyYWluZWQgaW4gYSBzaW1pbGFyIHdheSB0byB0aGUgc2FtZSBwb2ludCBhcyBib2R5QS4gV2Ugd2lsbCB0aGVyZWZvcmUgZ2V0IGEgbGluayBiZXR3ZWVuIGJvZHlBIGFuZCBib2R5Qi4gSWYgbm90IHNwZWNpZmllZCwgYm9keUEgd2lsbCBiZSBjb25zdHJhaW5lZCB0byBhIHN0YXRpYyBwb2ludC5cbiAgICogQHBhcmFtIHBpdm90QiBUaGUgcG9pbnQgcmVsYXRpdmUgdG8gdGhlIGNlbnRlciBvZiBtYXNzIG9mIGJvZHlCIHdoaWNoIGJvZHlCIGlzIGNvbnN0cmFpbmVkIHRvLlxuICAgKiBAcGFyYW0gbWF4Rm9yY2UgVGhlIG1heGltdW0gZm9yY2UgdGhhdCBzaG91bGQgYmUgYXBwbGllZCB0byBjb25zdHJhaW4gdGhlIGJvZGllcy5cbiAgICovXG4gIGNvbnN0cnVjdG9yKGJvZHlBLCBwaXZvdEEgPSBuZXcgVmVjMygpLCBib2R5QiwgcGl2b3RCID0gbmV3IFZlYzMoKSwgbWF4Rm9yY2UgPSAxZTYpIHtcbiAgICBzdXBlcihib2R5QSwgYm9keUIpO1xuICAgIHRoaXMucGl2b3RBID0gdm9pZCAwO1xuICAgIHRoaXMucGl2b3RCID0gdm9pZCAwO1xuICAgIHRoaXMuZXF1YXRpb25YID0gdm9pZCAwO1xuICAgIHRoaXMuZXF1YXRpb25ZID0gdm9pZCAwO1xuICAgIHRoaXMuZXF1YXRpb25aID0gdm9pZCAwO1xuICAgIHRoaXMucGl2b3RBID0gcGl2b3RBLmNsb25lKCk7XG4gICAgdGhpcy5waXZvdEIgPSBwaXZvdEIuY2xvbmUoKTtcbiAgICBjb25zdCB4ID0gdGhpcy5lcXVhdGlvblggPSBuZXcgQ29udGFjdEVxdWF0aW9uKGJvZHlBLCBib2R5Qik7XG4gICAgY29uc3QgeSA9IHRoaXMuZXF1YXRpb25ZID0gbmV3IENvbnRhY3RFcXVhdGlvbihib2R5QSwgYm9keUIpO1xuICAgIGNvbnN0IHogPSB0aGlzLmVxdWF0aW9uWiA9IG5ldyBDb250YWN0RXF1YXRpb24oYm9keUEsIGJvZHlCKTsgLy8gRXF1YXRpb25zIHRvIGJlIGZlZCB0byB0aGUgc29sdmVyXG5cbiAgICB0aGlzLmVxdWF0aW9ucy5wdXNoKHgsIHksIHopOyAvLyBNYWtlIHRoZSBlcXVhdGlvbnMgYmlkaXJlY3Rpb25hbFxuXG4gICAgeC5taW5Gb3JjZSA9IHkubWluRm9yY2UgPSB6Lm1pbkZvcmNlID0gLW1heEZvcmNlO1xuICAgIHgubWF4Rm9yY2UgPSB5Lm1heEZvcmNlID0gei5tYXhGb3JjZSA9IG1heEZvcmNlO1xuICAgIHgubmkuc2V0KDEsIDAsIDApO1xuICAgIHkubmkuc2V0KDAsIDEsIDApO1xuICAgIHoubmkuc2V0KDAsIDAsIDEpO1xuICB9XG5cbiAgdXBkYXRlKCkge1xuICAgIGNvbnN0IGJvZHlBID0gdGhpcy5ib2R5QTtcbiAgICBjb25zdCBib2R5QiA9IHRoaXMuYm9keUI7XG4gICAgY29uc3QgeCA9IHRoaXMuZXF1YXRpb25YO1xuICAgIGNvbnN0IHkgPSB0aGlzLmVxdWF0aW9uWTtcbiAgICBjb25zdCB6ID0gdGhpcy5lcXVhdGlvblo7IC8vIFJvdGF0ZSB0aGUgcGl2b3RzIHRvIHdvcmxkIHNwYWNlXG5cbiAgICBib2R5QS5xdWF0ZXJuaW9uLnZtdWx0KHRoaXMucGl2b3RBLCB4LnJpKTtcbiAgICBib2R5Qi5xdWF0ZXJuaW9uLnZtdWx0KHRoaXMucGl2b3RCLCB4LnJqKTtcbiAgICB5LnJpLmNvcHkoeC5yaSk7XG4gICAgeS5yai5jb3B5KHgucmopO1xuICAgIHoucmkuY29weSh4LnJpKTtcbiAgICB6LnJqLmNvcHkoeC5yaik7XG4gIH1cblxufVxuXG4vKipcbiAqIENvbmUgZXF1YXRpb24uIFdvcmtzIHRvIGtlZXAgdGhlIGdpdmVuIGJvZHkgd29ybGQgdmVjdG9ycyBhbGlnbmVkLCBvciB0aWx0ZWQgd2l0aGluIGEgZ2l2ZW4gYW5nbGUgZnJvbSBlYWNoIG90aGVyLlxuICovXG5jbGFzcyBDb25lRXF1YXRpb24gZXh0ZW5kcyBFcXVhdGlvbiB7XG4gIC8qKlxuICAgKiBMb2NhbCBheGlzIGluIEFcbiAgICovXG5cbiAgLyoqXG4gICAqIExvY2FsIGF4aXMgaW4gQlxuICAgKi9cblxuICAvKipcbiAgICogVGhlIFwiY29uZSBhbmdsZVwiIHRvIGtlZXBcbiAgICovXG4gIGNvbnN0cnVjdG9yKGJvZHlBLCBib2R5Qiwgb3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgbWF4Rm9yY2UgPSB0eXBlb2Ygb3B0aW9ucy5tYXhGb3JjZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLm1heEZvcmNlIDogMWU2O1xuICAgIHN1cGVyKGJvZHlBLCBib2R5QiwgLW1heEZvcmNlLCBtYXhGb3JjZSk7XG4gICAgdGhpcy5heGlzQSA9IHZvaWQgMDtcbiAgICB0aGlzLmF4aXNCID0gdm9pZCAwO1xuICAgIHRoaXMuYW5nbGUgPSB2b2lkIDA7XG4gICAgdGhpcy5heGlzQSA9IG9wdGlvbnMuYXhpc0EgPyBvcHRpb25zLmF4aXNBLmNsb25lKCkgOiBuZXcgVmVjMygxLCAwLCAwKTtcbiAgICB0aGlzLmF4aXNCID0gb3B0aW9ucy5heGlzQiA/IG9wdGlvbnMuYXhpc0IuY2xvbmUoKSA6IG5ldyBWZWMzKDAsIDEsIDApO1xuICAgIHRoaXMuYW5nbGUgPSB0eXBlb2Ygb3B0aW9ucy5hbmdsZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmFuZ2xlIDogMDtcbiAgfVxuXG4gIGNvbXB1dGVCKGgpIHtcbiAgICBjb25zdCBhID0gdGhpcy5hO1xuICAgIGNvbnN0IGIgPSB0aGlzLmI7XG4gICAgY29uc3QgbmkgPSB0aGlzLmF4aXNBO1xuICAgIGNvbnN0IG5qID0gdGhpcy5heGlzQjtcbiAgICBjb25zdCBuaXhuaiA9IHRtcFZlYzEkMjtcbiAgICBjb25zdCBuanhuaSA9IHRtcFZlYzIkMjtcbiAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTtcbiAgICBjb25zdCBHQiA9IHRoaXMuamFjb2JpYW5FbGVtZW50QjsgLy8gQ2FsdWNsYXRlIGNyb3NzIHByb2R1Y3RzXG5cbiAgICBuaS5jcm9zcyhuaiwgbml4bmopO1xuICAgIG5qLmNyb3NzKG5pLCBuanhuaSk7IC8vIFRoZSBhbmdsZSBiZXR3ZWVuIHR3byB2ZWN0b3IgaXM6XG4gICAgLy8gY29zKHRoZXRhKSA9IGEgKiBiIC8gKGxlbmd0aChhKSAqIGxlbmd0aChiKSA9IHsgbGVuKGEpID0gbGVuKGIpID0gMSB9ID0gYSAqIGJcbiAgICAvLyBnID0gYSAqIGJcbiAgICAvLyBnZG90ID0gKGIgeCBhKSAqIHdpICsgKGEgeCBiKSAqIHdqXG4gICAgLy8gRyA9IFswIGJ4YSAwIGF4Yl1cbiAgICAvLyBXID0gW3ZpIHdpIHZqIHdqXVxuXG4gICAgR0Eucm90YXRpb25hbC5jb3B5KG5qeG5pKTtcbiAgICBHQi5yb3RhdGlvbmFsLmNvcHkobml4bmopO1xuICAgIGNvbnN0IGcgPSBNYXRoLmNvcyh0aGlzLmFuZ2xlKSAtIG5pLmRvdChuaik7XG4gICAgY29uc3QgR1cgPSB0aGlzLmNvbXB1dGVHVygpO1xuICAgIGNvbnN0IEdpTWYgPSB0aGlzLmNvbXB1dGVHaU1mKCk7XG4gICAgY29uc3QgQiA9IC1nICogYSAtIEdXICogYiAtIGggKiBHaU1mO1xuICAgIHJldHVybiBCO1xuICB9XG5cbn1cbmNvbnN0IHRtcFZlYzEkMiA9IG5ldyBWZWMzKCk7XG5jb25zdCB0bXBWZWMyJDIgPSBuZXcgVmVjMygpO1xuXG4vKipcbiAqIFJvdGF0aW9uYWwgY29uc3RyYWludC4gV29ya3MgdG8ga2VlcCB0aGUgbG9jYWwgdmVjdG9ycyBvcnRob2dvbmFsIHRvIGVhY2ggb3RoZXIgaW4gd29ybGQgc3BhY2UuXG4gKi9cbmNsYXNzIFJvdGF0aW9uYWxFcXVhdGlvbiBleHRlbmRzIEVxdWF0aW9uIHtcbiAgLyoqXG4gICAqIFdvcmxkIG9yaWVudGVkIHJvdGF0aW9uYWwgYXhpcy5cbiAgICovXG5cbiAgLyoqXG4gICAqIFdvcmxkIG9yaWVudGVkIHJvdGF0aW9uYWwgYXhpcy5cbiAgICovXG5cbiAgLyoqXG4gICAqIG1heEFuZ2xlXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IG1heEZvcmNlID0gdHlwZW9mIG9wdGlvbnMubWF4Rm9yY2UgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5tYXhGb3JjZSA6IDFlNjtcbiAgICBzdXBlcihib2R5QSwgYm9keUIsIC1tYXhGb3JjZSwgbWF4Rm9yY2UpO1xuICAgIHRoaXMuYXhpc0EgPSB2b2lkIDA7XG4gICAgdGhpcy5heGlzQiA9IHZvaWQgMDtcbiAgICB0aGlzLm1heEFuZ2xlID0gdm9pZCAwO1xuICAgIHRoaXMuYXhpc0EgPSBvcHRpb25zLmF4aXNBID8gb3B0aW9ucy5heGlzQS5jbG9uZSgpIDogbmV3IFZlYzMoMSwgMCwgMCk7XG4gICAgdGhpcy5heGlzQiA9IG9wdGlvbnMuYXhpc0IgPyBvcHRpb25zLmF4aXNCLmNsb25lKCkgOiBuZXcgVmVjMygwLCAxLCAwKTtcbiAgICB0aGlzLm1heEFuZ2xlID0gTWF0aC5QSSAvIDI7XG4gIH1cblxuICBjb21wdXRlQihoKSB7XG4gICAgY29uc3QgYSA9IHRoaXMuYTtcbiAgICBjb25zdCBiID0gdGhpcy5iO1xuICAgIGNvbnN0IG5pID0gdGhpcy5heGlzQTtcbiAgICBjb25zdCBuaiA9IHRoaXMuYXhpc0I7XG4gICAgY29uc3Qgbml4bmogPSB0bXBWZWMxJDE7XG4gICAgY29uc3Qgbmp4bmkgPSB0bXBWZWMyJDE7XG4gICAgY29uc3QgR0EgPSB0aGlzLmphY29iaWFuRWxlbWVudEE7XG4gICAgY29uc3QgR0IgPSB0aGlzLmphY29iaWFuRWxlbWVudEI7IC8vIENhbHVjbGF0ZSBjcm9zcyBwcm9kdWN0c1xuXG4gICAgbmkuY3Jvc3MobmosIG5peG5qKTtcbiAgICBuai5jcm9zcyhuaSwgbmp4bmkpOyAvLyBnID0gbmkgKiBualxuICAgIC8vIGdkb3QgPSAobmogeCBuaSkgKiB3aSArIChuaSB4IG5qKSAqIHdqXG4gICAgLy8gRyA9IFswIG5qeG5pIDAgbml4bmpdXG4gICAgLy8gVyA9IFt2aSB3aSB2aiB3al1cblxuICAgIEdBLnJvdGF0aW9uYWwuY29weShuanhuaSk7XG4gICAgR0Iucm90YXRpb25hbC5jb3B5KG5peG5qKTtcbiAgICBjb25zdCBnID0gTWF0aC5jb3ModGhpcy5tYXhBbmdsZSkgLSBuaS5kb3QobmopO1xuICAgIGNvbnN0IEdXID0gdGhpcy5jb21wdXRlR1coKTtcbiAgICBjb25zdCBHaU1mID0gdGhpcy5jb21wdXRlR2lNZigpO1xuICAgIGNvbnN0IEIgPSAtZyAqIGEgLSBHVyAqIGIgLSBoICogR2lNZjtcbiAgICByZXR1cm4gQjtcbiAgfVxuXG59XG5jb25zdCB0bXBWZWMxJDEgPSBuZXcgVmVjMygpO1xuY29uc3QgdG1wVmVjMiQxID0gbmV3IFZlYzMoKTtcblxuLyoqXG4gKiBBIENvbmUgVHdpc3QgY29uc3RyYWludCwgdXNlZnVsIGZvciByYWdkb2xscy5cbiAqL1xuY2xhc3MgQ29uZVR3aXN0Q29uc3RyYWludCBleHRlbmRzIFBvaW50VG9Qb2ludENvbnN0cmFpbnQge1xuICAvKipcbiAgICogVGhlIGF4aXMgZGlyZWN0aW9uIGZvciB0aGUgY29uc3RyYWludCBvZiB0aGUgYm9keSBBLlxuICAgKi9cblxuICAvKipcbiAgICogVGhlIGF4aXMgZGlyZWN0aW9uIGZvciB0aGUgY29uc3RyYWludCBvZiB0aGUgYm9keSBCLlxuICAgKi9cblxuICAvKipcbiAgICogVGhlIGFwZXJ0dXJlIGFuZ2xlIG9mIHRoZSBjb25lLlxuICAgKi9cblxuICAvKipcbiAgICogVGhlIHR3aXN0IGFuZ2xlIG9mIHRoZSBqb2ludC5cbiAgICovXG4gIGNvbnN0cnVjdG9yKGJvZHlBLCBib2R5Qiwgb3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgbWF4Rm9yY2UgPSB0eXBlb2Ygb3B0aW9ucy5tYXhGb3JjZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLm1heEZvcmNlIDogMWU2OyAvLyBTZXQgcGl2b3QgcG9pbnQgaW4gYmV0d2VlblxuXG4gICAgY29uc3QgcGl2b3RBID0gb3B0aW9ucy5waXZvdEEgPyBvcHRpb25zLnBpdm90QS5jbG9uZSgpIDogbmV3IFZlYzMoKTtcbiAgICBjb25zdCBwaXZvdEIgPSBvcHRpb25zLnBpdm90QiA/IG9wdGlvbnMucGl2b3RCLmNsb25lKCkgOiBuZXcgVmVjMygpO1xuICAgIHN1cGVyKGJvZHlBLCBwaXZvdEEsIGJvZHlCLCBwaXZvdEIsIG1heEZvcmNlKTtcbiAgICB0aGlzLmF4aXNBID0gdm9pZCAwO1xuICAgIHRoaXMuYXhpc0IgPSB2b2lkIDA7XG4gICAgdGhpcy5hbmdsZSA9IHZvaWQgMDtcbiAgICB0aGlzLnR3aXN0QW5nbGUgPSB2b2lkIDA7XG4gICAgdGhpcy5jb25lRXF1YXRpb24gPSB2b2lkIDA7XG4gICAgdGhpcy50d2lzdEVxdWF0aW9uID0gdm9pZCAwO1xuICAgIHRoaXMuYXhpc0EgPSBvcHRpb25zLmF4aXNBID8gb3B0aW9ucy5heGlzQS5jbG9uZSgpIDogbmV3IFZlYzMoKTtcbiAgICB0aGlzLmF4aXNCID0gb3B0aW9ucy5heGlzQiA/IG9wdGlvbnMuYXhpc0IuY2xvbmUoKSA6IG5ldyBWZWMzKCk7XG4gICAgdGhpcy5jb2xsaWRlQ29ubmVjdGVkID0gISFvcHRpb25zLmNvbGxpZGVDb25uZWN0ZWQ7XG4gICAgdGhpcy5hbmdsZSA9IHR5cGVvZiBvcHRpb25zLmFuZ2xlICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuYW5nbGUgOiAwO1xuICAgIGNvbnN0IGMgPSB0aGlzLmNvbmVFcXVhdGlvbiA9IG5ldyBDb25lRXF1YXRpb24oYm9keUEsIGJvZHlCLCBvcHRpb25zKTtcbiAgICBjb25zdCB0ID0gdGhpcy50d2lzdEVxdWF0aW9uID0gbmV3IFJvdGF0aW9uYWxFcXVhdGlvbihib2R5QSwgYm9keUIsIG9wdGlvbnMpO1xuICAgIHRoaXMudHdpc3RBbmdsZSA9IHR5cGVvZiBvcHRpb25zLnR3aXN0QW5nbGUgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy50d2lzdEFuZ2xlIDogMDsgLy8gTWFrZSB0aGUgY29uZSBlcXVhdGlvbiBwdXNoIHRoZSBib2RpZXMgdG93YXJkIHRoZSBjb25lIGF4aXMsIG5vdCBvdXR3YXJkXG5cbiAgICBjLm1heEZvcmNlID0gMDtcbiAgICBjLm1pbkZvcmNlID0gLW1heEZvcmNlOyAvLyBNYWtlIHRoZSB0d2lzdCBlcXVhdGlvbiBhZGQgdG9ycXVlIHRvd2FyZCB0aGUgaW5pdGlhbCBwb3NpdGlvblxuXG4gICAgdC5tYXhGb3JjZSA9IDA7XG4gICAgdC5taW5Gb3JjZSA9IC1tYXhGb3JjZTtcbiAgICB0aGlzLmVxdWF0aW9ucy5wdXNoKGMsIHQpO1xuICB9XG5cbiAgdXBkYXRlKCkge1xuICAgIGNvbnN0IGJvZHlBID0gdGhpcy5ib2R5QTtcbiAgICBjb25zdCBib2R5QiA9IHRoaXMuYm9keUI7XG4gICAgY29uc3QgY29uZSA9IHRoaXMuY29uZUVxdWF0aW9uO1xuICAgIGNvbnN0IHR3aXN0ID0gdGhpcy50d2lzdEVxdWF0aW9uO1xuICAgIHN1cGVyLnVwZGF0ZSgpOyAvLyBVcGRhdGUgdGhlIGF4ZXMgdG8gdGhlIGNvbmUgY29uc3RyYWludFxuXG4gICAgYm9keUEudmVjdG9yVG9Xb3JsZEZyYW1lKHRoaXMuYXhpc0EsIGNvbmUuYXhpc0EpO1xuICAgIGJvZHlCLnZlY3RvclRvV29ybGRGcmFtZSh0aGlzLmF4aXNCLCBjb25lLmF4aXNCKTsgLy8gVXBkYXRlIHRoZSB3b3JsZCBheGVzIGluIHRoZSB0d2lzdCBjb25zdHJhaW50XG5cbiAgICB0aGlzLmF4aXNBLnRhbmdlbnRzKHR3aXN0LmF4aXNBLCB0d2lzdC5heGlzQSk7XG4gICAgYm9keUEudmVjdG9yVG9Xb3JsZEZyYW1lKHR3aXN0LmF4aXNBLCB0d2lzdC5heGlzQSk7XG4gICAgdGhpcy5heGlzQi50YW5nZW50cyh0d2lzdC5heGlzQiwgdHdpc3QuYXhpc0IpO1xuICAgIGJvZHlCLnZlY3RvclRvV29ybGRGcmFtZSh0d2lzdC5heGlzQiwgdHdpc3QuYXhpc0IpO1xuICAgIGNvbmUuYW5nbGUgPSB0aGlzLmFuZ2xlO1xuICAgIHR3aXN0Lm1heEFuZ2xlID0gdGhpcy50d2lzdEFuZ2xlO1xuICB9XG5cbn1cblxuLyoqXG4gKiBDb25zdHJhaW5zIHR3byBib2RpZXMgdG8gYmUgYXQgYSBjb25zdGFudCBkaXN0YW5jZSBmcm9tIGVhY2ggb3RoZXJzIGNlbnRlciBvZiBtYXNzLlxuICovXG5jbGFzcyBEaXN0YW5jZUNvbnN0cmFpbnQgZXh0ZW5kcyBDb25zdHJhaW50IHtcbiAgLyoqXG4gICAqIFRoZSBkaXN0YW5jZSB0byBrZWVwLiBJZiB1bmRlZmluZWQsIGl0IHdpbGwgYmUgc2V0IHRvIHRoZSBjdXJyZW50IGRpc3RhbmNlIGJldHdlZW4gYm9keUEgYW5kIGJvZHlCXG4gICAqL1xuXG4gIC8qKlxuICAgKiBAcGFyYW0gZGlzdGFuY2UgVGhlIGRpc3RhbmNlIHRvIGtlZXAuIElmIHVuZGVmaW5lZCwgaXQgd2lsbCBiZSBzZXQgdG8gdGhlIGN1cnJlbnQgZGlzdGFuY2UgYmV0d2VlbiBib2R5QSBhbmQgYm9keUIuXG4gICAqIEBwYXJhbSBtYXhGb3JjZSBUaGUgbWF4aW11bSBmb3JjZSB0aGF0IHNob3VsZCBiZSBhcHBsaWVkIHRvIGNvbnN0cmFpbiB0aGUgYm9kaWVzLlxuICAgKi9cbiAgY29uc3RydWN0b3IoYm9keUEsIGJvZHlCLCBkaXN0YW5jZSwgbWF4Rm9yY2UgPSAxZTYpIHtcbiAgICBzdXBlcihib2R5QSwgYm9keUIpO1xuICAgIHRoaXMuZGlzdGFuY2UgPSB2b2lkIDA7XG4gICAgdGhpcy5kaXN0YW5jZUVxdWF0aW9uID0gdm9pZCAwO1xuXG4gICAgaWYgKHR5cGVvZiBkaXN0YW5jZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGRpc3RhbmNlID0gYm9keUEucG9zaXRpb24uZGlzdGFuY2VUbyhib2R5Qi5wb3NpdGlvbik7XG4gICAgfVxuXG4gICAgdGhpcy5kaXN0YW5jZSA9IGRpc3RhbmNlO1xuICAgIGNvbnN0IGVxID0gdGhpcy5kaXN0YW5jZUVxdWF0aW9uID0gbmV3IENvbnRhY3RFcXVhdGlvbihib2R5QSwgYm9keUIpO1xuICAgIHRoaXMuZXF1YXRpb25zLnB1c2goZXEpOyAvLyBNYWtlIGl0IGJpZGlyZWN0aW9uYWxcblxuICAgIGVxLm1pbkZvcmNlID0gLW1heEZvcmNlO1xuICAgIGVxLm1heEZvcmNlID0gbWF4Rm9yY2U7XG4gIH1cbiAgLyoqXG4gICAqIHVwZGF0ZVxuICAgKi9cblxuXG4gIHVwZGF0ZSgpIHtcbiAgICBjb25zdCBib2R5QSA9IHRoaXMuYm9keUE7XG4gICAgY29uc3QgYm9keUIgPSB0aGlzLmJvZHlCO1xuICAgIGNvbnN0IGVxID0gdGhpcy5kaXN0YW5jZUVxdWF0aW9uO1xuICAgIGNvbnN0IGhhbGZEaXN0ID0gdGhpcy5kaXN0YW5jZSAqIDAuNTtcbiAgICBjb25zdCBub3JtYWwgPSBlcS5uaTtcbiAgICBib2R5Qi5wb3NpdGlvbi52c3ViKGJvZHlBLnBvc2l0aW9uLCBub3JtYWwpO1xuICAgIG5vcm1hbC5ub3JtYWxpemUoKTtcbiAgICBub3JtYWwuc2NhbGUoaGFsZkRpc3QsIGVxLnJpKTtcbiAgICBub3JtYWwuc2NhbGUoLWhhbGZEaXN0LCBlcS5yaik7XG4gIH1cblxufVxuXG4vKipcbiAqIExvY2sgY29uc3RyYWludC4gV2lsbCByZW1vdmUgYWxsIGRlZ3JlZXMgb2YgZnJlZWRvbSBiZXR3ZWVuIHRoZSBib2RpZXMuXG4gKi9cbmNsYXNzIExvY2tDb25zdHJhaW50IGV4dGVuZHMgUG9pbnRUb1BvaW50Q29uc3RyYWludCB7XG4gIGNvbnN0cnVjdG9yKGJvZHlBLCBib2R5Qiwgb3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgbWF4Rm9yY2UgPSB0eXBlb2Ygb3B0aW9ucy5tYXhGb3JjZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLm1heEZvcmNlIDogMWU2OyAvLyBTZXQgcGl2b3QgcG9pbnQgaW4gYmV0d2VlblxuXG4gICAgY29uc3QgcGl2b3RBID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCBwaXZvdEIgPSBuZXcgVmVjMygpO1xuICAgIGNvbnN0IGhhbGZXYXkgPSBuZXcgVmVjMygpO1xuICAgIGJvZHlBLnBvc2l0aW9uLnZhZGQoYm9keUIucG9zaXRpb24sIGhhbGZXYXkpO1xuICAgIGhhbGZXYXkuc2NhbGUoMC41LCBoYWxmV2F5KTtcbiAgICBib2R5Qi5wb2ludFRvTG9jYWxGcmFtZShoYWxmV2F5LCBwaXZvdEIpO1xuICAgIGJvZHlBLnBvaW50VG9Mb2NhbEZyYW1lKGhhbGZXYXksIHBpdm90QSk7IC8vIFRoZSBwb2ludC10by1wb2ludCBjb25zdHJhaW50IHdpbGwga2VlcCBhIHBvaW50IHNoYXJlZCBiZXR3ZWVuIHRoZSBib2RpZXNcblxuICAgIHN1cGVyKGJvZHlBLCBwaXZvdEEsIGJvZHlCLCBwaXZvdEIsIG1heEZvcmNlKTsgLy8gU3RvcmUgaW5pdGlhbCByb3RhdGlvbiBvZiB0aGUgYm9kaWVzIGFzIHVuaXQgdmVjdG9ycyBpbiB0aGUgbG9jYWwgYm9keSBzcGFjZXNcblxuICAgIHRoaXMueEEgPSB2b2lkIDA7XG4gICAgdGhpcy54QiA9IHZvaWQgMDtcbiAgICB0aGlzLnlBID0gdm9pZCAwO1xuICAgIHRoaXMueUIgPSB2b2lkIDA7XG4gICAgdGhpcy56QSA9IHZvaWQgMDtcbiAgICB0aGlzLnpCID0gdm9pZCAwO1xuICAgIHRoaXMucm90YXRpb25hbEVxdWF0aW9uMSA9IHZvaWQgMDtcbiAgICB0aGlzLnJvdGF0aW9uYWxFcXVhdGlvbjIgPSB2b2lkIDA7XG4gICAgdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24zID0gdm9pZCAwO1xuICAgIHRoaXMubW90b3JFcXVhdGlvbiA9IHZvaWQgMDtcbiAgICB0aGlzLnhBID0gYm9keUEudmVjdG9yVG9Mb2NhbEZyYW1lKFZlYzMuVU5JVF9YKTtcbiAgICB0aGlzLnhCID0gYm9keUIudmVjdG9yVG9Mb2NhbEZyYW1lKFZlYzMuVU5JVF9YKTtcbiAgICB0aGlzLnlBID0gYm9keUEudmVjdG9yVG9Mb2NhbEZyYW1lKFZlYzMuVU5JVF9ZKTtcbiAgICB0aGlzLnlCID0gYm9keUIudmVjdG9yVG9Mb2NhbEZyYW1lKFZlYzMuVU5JVF9ZKTtcbiAgICB0aGlzLnpBID0gYm9keUEudmVjdG9yVG9Mb2NhbEZyYW1lKFZlYzMuVU5JVF9aKTtcbiAgICB0aGlzLnpCID0gYm9keUIudmVjdG9yVG9Mb2NhbEZyYW1lKFZlYzMuVU5JVF9aKTsgLy8gLi4uYW5kIHRoZSBmb2xsb3dpbmcgcm90YXRpb25hbCBlcXVhdGlvbnMgd2lsbCBrZWVwIGFsbCByb3RhdGlvbmFsIERPRidzIGluIHBsYWNlXG5cbiAgICBjb25zdCByMSA9IHRoaXMucm90YXRpb25hbEVxdWF0aW9uMSA9IG5ldyBSb3RhdGlvbmFsRXF1YXRpb24oYm9keUEsIGJvZHlCLCBvcHRpb25zKTtcbiAgICBjb25zdCByMiA9IHRoaXMucm90YXRpb25hbEVxdWF0aW9uMiA9IG5ldyBSb3RhdGlvbmFsRXF1YXRpb24oYm9keUEsIGJvZHlCLCBvcHRpb25zKTtcbiAgICBjb25zdCByMyA9IHRoaXMucm90YXRpb25hbEVxdWF0aW9uMyA9IG5ldyBSb3RhdGlvbmFsRXF1YXRpb24oYm9keUEsIGJvZHlCLCBvcHRpb25zKTtcbiAgICB0aGlzLmVxdWF0aW9ucy5wdXNoKHIxLCByMiwgcjMpO1xuICB9XG4gIC8qKlxuICAgKiB1cGRhdGVcbiAgICovXG5cblxuICB1cGRhdGUoKSB7XG4gICAgY29uc3QgYm9keUEgPSB0aGlzLmJvZHlBO1xuICAgIGNvbnN0IGJvZHlCID0gdGhpcy5ib2R5QjtcbiAgICB0aGlzLm1vdG9yRXF1YXRpb247XG4gICAgY29uc3QgcjEgPSB0aGlzLnJvdGF0aW9uYWxFcXVhdGlvbjE7XG4gICAgY29uc3QgcjIgPSB0aGlzLnJvdGF0aW9uYWxFcXVhdGlvbjI7XG4gICAgY29uc3QgcjMgPSB0aGlzLnJvdGF0aW9uYWxFcXVhdGlvbjM7XG4gICAgc3VwZXIudXBkYXRlKCk7IC8vIFRoZXNlIHZlY3RvciBwYWlycyBtdXN0IGJlIG9ydGhvZ29uYWxcblxuICAgIGJvZHlBLnZlY3RvclRvV29ybGRGcmFtZSh0aGlzLnhBLCByMS5heGlzQSk7XG4gICAgYm9keUIudmVjdG9yVG9Xb3JsZEZyYW1lKHRoaXMueUIsIHIxLmF4aXNCKTtcbiAgICBib2R5QS52ZWN0b3JUb1dvcmxkRnJhbWUodGhpcy55QSwgcjIuYXhpc0EpO1xuICAgIGJvZHlCLnZlY3RvclRvV29ybGRGcmFtZSh0aGlzLnpCLCByMi5heGlzQik7XG4gICAgYm9keUEudmVjdG9yVG9Xb3JsZEZyYW1lKHRoaXMuekEsIHIzLmF4aXNBKTtcbiAgICBib2R5Qi52ZWN0b3JUb1dvcmxkRnJhbWUodGhpcy54QiwgcjMuYXhpc0IpO1xuICB9XG5cbn1cblxuLyoqXG4gKiBSb3RhdGlvbmFsIG1vdG9yIGNvbnN0cmFpbnQuIFRyaWVzIHRvIGtlZXAgdGhlIHJlbGF0aXZlIGFuZ3VsYXIgdmVsb2NpdHkgb2YgdGhlIGJvZGllcyB0byBhIGdpdmVuIHZhbHVlLlxuICovXG5jbGFzcyBSb3RhdGlvbmFsTW90b3JFcXVhdGlvbiBleHRlbmRzIEVxdWF0aW9uIHtcbiAgLyoqXG4gICAqIFdvcmxkIG9yaWVudGVkIHJvdGF0aW9uYWwgYXhpcy5cbiAgICovXG5cbiAgLyoqXG4gICAqIFdvcmxkIG9yaWVudGVkIHJvdGF0aW9uYWwgYXhpcy5cbiAgICovXG5cbiAgLyoqXG4gICAqIE1vdG9yIHZlbG9jaXR5LlxuICAgKi9cbiAgY29uc3RydWN0b3IoYm9keUEsIGJvZHlCLCBtYXhGb3JjZSA9IDFlNikge1xuICAgIHN1cGVyKGJvZHlBLCBib2R5QiwgLW1heEZvcmNlLCBtYXhGb3JjZSk7XG4gICAgdGhpcy5heGlzQSA9IHZvaWQgMDtcbiAgICB0aGlzLmF4aXNCID0gdm9pZCAwO1xuICAgIHRoaXMudGFyZ2V0VmVsb2NpdHkgPSB2b2lkIDA7XG4gICAgdGhpcy5heGlzQSA9IG5ldyBWZWMzKCk7XG4gICAgdGhpcy5heGlzQiA9IG5ldyBWZWMzKCk7XG4gICAgdGhpcy50YXJnZXRWZWxvY2l0eSA9IDA7XG4gIH1cblxuICBjb21wdXRlQihoKSB7XG4gICAgdGhpcy5hO1xuICAgIGNvbnN0IGIgPSB0aGlzLmI7XG4gICAgdGhpcy5iaTtcbiAgICB0aGlzLmJqO1xuICAgIGNvbnN0IGF4aXNBID0gdGhpcy5heGlzQTtcbiAgICBjb25zdCBheGlzQiA9IHRoaXMuYXhpc0I7XG4gICAgY29uc3QgR0EgPSB0aGlzLmphY29iaWFuRWxlbWVudEE7XG4gICAgY29uc3QgR0IgPSB0aGlzLmphY29iaWFuRWxlbWVudEI7IC8vIGcgPSAwXG4gICAgLy8gZ2RvdCA9IGF4aXNBICogd2kgLSBheGlzQiAqIHdqXG4gICAgLy8gZ2RvdCA9IEcgKiBXID0gRyAqIFt2aSB3aSB2aiB3al1cbiAgICAvLyA9PlxuICAgIC8vIEcgPSBbMCBheGlzQSAwIC1heGlzQl1cblxuICAgIEdBLnJvdGF0aW9uYWwuY29weShheGlzQSk7XG4gICAgYXhpc0IubmVnYXRlKEdCLnJvdGF0aW9uYWwpO1xuICAgIGNvbnN0IEdXID0gdGhpcy5jb21wdXRlR1coKSAtIHRoaXMudGFyZ2V0VmVsb2NpdHk7XG4gICAgY29uc3QgR2lNZiA9IHRoaXMuY29tcHV0ZUdpTWYoKTtcbiAgICBjb25zdCBCID0gLUdXICogYiAtIGggKiBHaU1mO1xuICAgIHJldHVybiBCO1xuICB9XG5cbn1cblxuLyoqXG4gKiBIaW5nZSBjb25zdHJhaW50LiBUaGluayBvZiBpdCBhcyBhIGRvb3IgaGluZ2UuIEl0IHRyaWVzIHRvIGtlZXAgdGhlIGRvb3IgaW4gdGhlIGNvcnJlY3QgcGxhY2UgYW5kIHdpdGggdGhlIGNvcnJlY3Qgb3JpZW50YXRpb24uXG4gKi9cbmNsYXNzIEhpbmdlQ29uc3RyYWludCBleHRlbmRzIFBvaW50VG9Qb2ludENvbnN0cmFpbnQge1xuICAvKipcbiAgICogUm90YXRpb24gYXhpcywgZGVmaW5lZCBsb2NhbGx5IGluIGJvZHlBLlxuICAgKi9cblxuICAvKipcbiAgICogUm90YXRpb24gYXhpcywgZGVmaW5lZCBsb2NhbGx5IGluIGJvZHlCLlxuICAgKi9cbiAgY29uc3RydWN0b3IoYm9keUEsIGJvZHlCLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBtYXhGb3JjZSA9IHR5cGVvZiBvcHRpb25zLm1heEZvcmNlICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMubWF4Rm9yY2UgOiAxZTY7XG4gICAgY29uc3QgcGl2b3RBID0gb3B0aW9ucy5waXZvdEEgPyBvcHRpb25zLnBpdm90QS5jbG9uZSgpIDogbmV3IFZlYzMoKTtcbiAgICBjb25zdCBwaXZvdEIgPSBvcHRpb25zLnBpdm90QiA/IG9wdGlvbnMucGl2b3RCLmNsb25lKCkgOiBuZXcgVmVjMygpO1xuICAgIHN1cGVyKGJvZHlBLCBwaXZvdEEsIGJvZHlCLCBwaXZvdEIsIG1heEZvcmNlKTtcbiAgICB0aGlzLmF4aXNBID0gdm9pZCAwO1xuICAgIHRoaXMuYXhpc0IgPSB2b2lkIDA7XG4gICAgdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24xID0gdm9pZCAwO1xuICAgIHRoaXMucm90YXRpb25hbEVxdWF0aW9uMiA9IHZvaWQgMDtcbiAgICB0aGlzLm1vdG9yRXF1YXRpb24gPSB2b2lkIDA7XG4gICAgY29uc3QgYXhpc0EgPSB0aGlzLmF4aXNBID0gb3B0aW9ucy5heGlzQSA/IG9wdGlvbnMuYXhpc0EuY2xvbmUoKSA6IG5ldyBWZWMzKDEsIDAsIDApO1xuICAgIGF4aXNBLm5vcm1hbGl6ZSgpO1xuICAgIGNvbnN0IGF4aXNCID0gdGhpcy5heGlzQiA9IG9wdGlvbnMuYXhpc0IgPyBvcHRpb25zLmF4aXNCLmNsb25lKCkgOiBuZXcgVmVjMygxLCAwLCAwKTtcbiAgICBheGlzQi5ub3JtYWxpemUoKTtcbiAgICB0aGlzLmNvbGxpZGVDb25uZWN0ZWQgPSAhIW9wdGlvbnMuY29sbGlkZUNvbm5lY3RlZDtcbiAgICBjb25zdCByb3RhdGlvbmFsMSA9IHRoaXMucm90YXRpb25hbEVxdWF0aW9uMSA9IG5ldyBSb3RhdGlvbmFsRXF1YXRpb24oYm9keUEsIGJvZHlCLCBvcHRpb25zKTtcbiAgICBjb25zdCByb3RhdGlvbmFsMiA9IHRoaXMucm90YXRpb25hbEVxdWF0aW9uMiA9IG5ldyBSb3RhdGlvbmFsRXF1YXRpb24oYm9keUEsIGJvZHlCLCBvcHRpb25zKTtcbiAgICBjb25zdCBtb3RvciA9IHRoaXMubW90b3JFcXVhdGlvbiA9IG5ldyBSb3RhdGlvbmFsTW90b3JFcXVhdGlvbihib2R5QSwgYm9keUIsIG1heEZvcmNlKTtcbiAgICBtb3Rvci5lbmFibGVkID0gZmFsc2U7IC8vIE5vdCBlbmFibGVkIGJ5IGRlZmF1bHRcbiAgICAvLyBFcXVhdGlvbnMgdG8gYmUgZmVkIHRvIHRoZSBzb2x2ZXJcblxuICAgIHRoaXMuZXF1YXRpb25zLnB1c2gocm90YXRpb25hbDEsIHJvdGF0aW9uYWwyLCBtb3Rvcik7XG4gIH1cbiAgLyoqXG4gICAqIGVuYWJsZU1vdG9yXG4gICAqL1xuXG5cbiAgZW5hYmxlTW90b3IoKSB7XG4gICAgdGhpcy5tb3RvckVxdWF0aW9uLmVuYWJsZWQgPSB0cnVlO1xuICB9XG4gIC8qKlxuICAgKiBkaXNhYmxlTW90b3JcbiAgICovXG5cblxuICBkaXNhYmxlTW90b3IoKSB7XG4gICAgdGhpcy5tb3RvckVxdWF0aW9uLmVuYWJsZWQgPSBmYWxzZTtcbiAgfVxuICAvKipcbiAgICogc2V0TW90b3JTcGVlZFxuICAgKi9cblxuXG4gIHNldE1vdG9yU3BlZWQoc3BlZWQpIHtcbiAgICB0aGlzLm1vdG9yRXF1YXRpb24udGFyZ2V0VmVsb2NpdHkgPSBzcGVlZDtcbiAgfVxuICAvKipcbiAgICogc2V0TW90b3JNYXhGb3JjZVxuICAgKi9cblxuXG4gIHNldE1vdG9yTWF4Rm9yY2UobWF4Rm9yY2UpIHtcbiAgICB0aGlzLm1vdG9yRXF1YXRpb24ubWF4Rm9yY2UgPSBtYXhGb3JjZTtcbiAgICB0aGlzLm1vdG9yRXF1YXRpb24ubWluRm9yY2UgPSAtbWF4Rm9yY2U7XG4gIH1cbiAgLyoqXG4gICAqIHVwZGF0ZVxuICAgKi9cblxuXG4gIHVwZGF0ZSgpIHtcbiAgICBjb25zdCBib2R5QSA9IHRoaXMuYm9keUE7XG4gICAgY29uc3QgYm9keUIgPSB0aGlzLmJvZHlCO1xuICAgIGNvbnN0IG1vdG9yID0gdGhpcy5tb3RvckVxdWF0aW9uO1xuICAgIGNvbnN0IHIxID0gdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24xO1xuICAgIGNvbnN0IHIyID0gdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24yO1xuICAgIGNvbnN0IHdvcmxkQXhpc0EgPSBIaW5nZUNvbnN0cmFpbnRfdXBkYXRlX3RtcFZlYzE7XG4gICAgY29uc3Qgd29ybGRBeGlzQiA9IEhpbmdlQ29uc3RyYWludF91cGRhdGVfdG1wVmVjMjtcbiAgICBjb25zdCBheGlzQSA9IHRoaXMuYXhpc0E7XG4gICAgY29uc3QgYXhpc0IgPSB0aGlzLmF4aXNCO1xuICAgIHN1cGVyLnVwZGF0ZSgpOyAvLyBHZXQgd29ybGQgYXhlc1xuXG4gICAgYm9keUEucXVhdGVybmlvbi52bXVsdChheGlzQSwgd29ybGRBeGlzQSk7XG4gICAgYm9keUIucXVhdGVybmlvbi52bXVsdChheGlzQiwgd29ybGRBeGlzQik7XG4gICAgd29ybGRBeGlzQS50YW5nZW50cyhyMS5heGlzQSwgcjIuYXhpc0EpO1xuICAgIHIxLmF4aXNCLmNvcHkod29ybGRBeGlzQik7XG4gICAgcjIuYXhpc0IuY29weSh3b3JsZEF4aXNCKTtcblxuICAgIGlmICh0aGlzLm1vdG9yRXF1YXRpb24uZW5hYmxlZCkge1xuICAgICAgYm9keUEucXVhdGVybmlvbi52bXVsdCh0aGlzLmF4aXNBLCBtb3Rvci5heGlzQSk7XG4gICAgICBib2R5Qi5xdWF0ZXJuaW9uLnZtdWx0KHRoaXMuYXhpc0IsIG1vdG9yLmF4aXNCKTtcbiAgICB9XG4gIH1cblxufVxuY29uc3QgSGluZ2VDb25zdHJhaW50X3VwZGF0ZV90bXBWZWMxID0gbmV3IFZlYzMoKTtcbmNvbnN0IEhpbmdlQ29uc3RyYWludF91cGRhdGVfdG1wVmVjMiA9IG5ldyBWZWMzKCk7XG5cbi8qKlxuICogQ29uc3RyYWlucyB0aGUgc2xpcHBpbmcgaW4gYSBjb250YWN0IGFsb25nIGEgdGFuZ2VudFxuICovXG5jbGFzcyBGcmljdGlvbkVxdWF0aW9uIGV4dGVuZHMgRXF1YXRpb24ge1xuICAvLyBUYW5nZW50XG5cbiAgLyoqXG4gICAqIEBwYXJhbSBzbGlwRm9yY2Ugc2hvdWxkIGJlICstRl9mcmljdGlvbiA9ICstbXUgKiBGX25vcm1hbCA9ICstbXUgKiBtICogZ1xuICAgKi9cbiAgY29uc3RydWN0b3IoYm9keUEsIGJvZHlCLCBzbGlwRm9yY2UpIHtcbiAgICBzdXBlcihib2R5QSwgYm9keUIsIC1zbGlwRm9yY2UsIHNsaXBGb3JjZSk7XG4gICAgdGhpcy5yaSA9IHZvaWQgMDtcbiAgICB0aGlzLnJqID0gdm9pZCAwO1xuICAgIHRoaXMudCA9IHZvaWQgMDtcbiAgICB0aGlzLnJpID0gbmV3IFZlYzMoKTtcbiAgICB0aGlzLnJqID0gbmV3IFZlYzMoKTtcbiAgICB0aGlzLnQgPSBuZXcgVmVjMygpO1xuICB9XG5cbiAgY29tcHV0ZUIoaCkge1xuICAgIHRoaXMuYTtcbiAgICBjb25zdCBiID0gdGhpcy5iO1xuICAgIHRoaXMuYmk7XG4gICAgdGhpcy5iajtcbiAgICBjb25zdCByaSA9IHRoaXMucmk7XG4gICAgY29uc3QgcmogPSB0aGlzLnJqO1xuICAgIGNvbnN0IHJpeHQgPSBGcmljdGlvbkVxdWF0aW9uX2NvbXB1dGVCX3RlbXAxO1xuICAgIGNvbnN0IHJqeHQgPSBGcmljdGlvbkVxdWF0aW9uX2NvbXB1dGVCX3RlbXAyO1xuICAgIGNvbnN0IHQgPSB0aGlzLnQ7IC8vIENhbHVjbGF0ZSBjcm9zcyBwcm9kdWN0c1xuXG4gICAgcmkuY3Jvc3ModCwgcml4dCk7XG4gICAgcmouY3Jvc3ModCwgcmp4dCk7IC8vIEcgPSBbLXQgLXJpeHQgdCByanh0XVxuICAgIC8vIEFuZCByZW1lbWJlciwgdGhpcyBpcyBhIHB1cmUgdmVsb2NpdHkgY29uc3RyYWludCwgZyBpcyBhbHdheXMgemVybyFcblxuICAgIGNvbnN0IEdBID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRBO1xuICAgIGNvbnN0IEdCID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRCO1xuICAgIHQubmVnYXRlKEdBLnNwYXRpYWwpO1xuICAgIHJpeHQubmVnYXRlKEdBLnJvdGF0aW9uYWwpO1xuICAgIEdCLnNwYXRpYWwuY29weSh0KTtcbiAgICBHQi5yb3RhdGlvbmFsLmNvcHkocmp4dCk7XG4gICAgY29uc3QgR1cgPSB0aGlzLmNvbXB1dGVHVygpO1xuICAgIGNvbnN0IEdpTWYgPSB0aGlzLmNvbXB1dGVHaU1mKCk7XG4gICAgY29uc3QgQiA9IC1HVyAqIGIgLSBoICogR2lNZjtcbiAgICByZXR1cm4gQjtcbiAgfVxuXG59XG5jb25zdCBGcmljdGlvbkVxdWF0aW9uX2NvbXB1dGVCX3RlbXAxID0gbmV3IFZlYzMoKTtcbmNvbnN0IEZyaWN0aW9uRXF1YXRpb25fY29tcHV0ZUJfdGVtcDIgPSBuZXcgVmVjMygpO1xuXG4vKipcbiAqIERlZmluZXMgd2hhdCBoYXBwZW5zIHdoZW4gdHdvIG1hdGVyaWFscyBtZWV0LlxuICogQHRvZG8gUmVmYWN0b3IgbWF0ZXJpYWxzIHRvIG1hdGVyaWFsQSBhbmQgbWF0ZXJpYWxCXG4gKi9cbmNsYXNzIENvbnRhY3RNYXRlcmlhbCB7XG4gIC8qKlxuICAgKiBJZGVudGlmaWVyIG9mIHRoaXMgbWF0ZXJpYWwuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBQYXJ0aWNpcGF0aW5nIG1hdGVyaWFscy5cbiAgICovXG5cbiAgLyoqXG4gICAqIEZyaWN0aW9uIGNvZWZmaWNpZW50LlxuICAgKiBAZGVmYXVsdCAwLjNcbiAgICovXG5cbiAgLyoqXG4gICAqIFJlc3RpdHV0aW9uIGNvZWZmaWNpZW50LlxuICAgKiBAZGVmYXVsdCAwLjNcbiAgICovXG5cbiAgLyoqXG4gICAqIFN0aWZmbmVzcyBvZiB0aGUgcHJvZHVjZWQgY29udGFjdCBlcXVhdGlvbnMuXG4gICAqIEBkZWZhdWx0IDFlN1xuICAgKi9cblxuICAvKipcbiAgICogUmVsYXhhdGlvbiB0aW1lIG9mIHRoZSBwcm9kdWNlZCBjb250YWN0IGVxdWF0aW9ucy5cbiAgICogQGRlZmF1bHQgM1xuICAgKi9cblxuICAvKipcbiAgICogU3RpZmZuZXNzIG9mIHRoZSBwcm9kdWNlZCBmcmljdGlvbiBlcXVhdGlvbnMuXG4gICAqIEBkZWZhdWx0IDFlN1xuICAgKi9cblxuICAvKipcbiAgICogUmVsYXhhdGlvbiB0aW1lIG9mIHRoZSBwcm9kdWNlZCBmcmljdGlvbiBlcXVhdGlvbnNcbiAgICogQGRlZmF1bHQgM1xuICAgKi9cbiAgY29uc3RydWN0b3IobTEsIG0yLCBvcHRpb25zKSB7XG4gICAgdGhpcy5pZCA9IHZvaWQgMDtcbiAgICB0aGlzLm1hdGVyaWFscyA9IHZvaWQgMDtcbiAgICB0aGlzLmZyaWN0aW9uID0gdm9pZCAwO1xuICAgIHRoaXMucmVzdGl0dXRpb24gPSB2b2lkIDA7XG4gICAgdGhpcy5jb250YWN0RXF1YXRpb25TdGlmZm5lc3MgPSB2b2lkIDA7XG4gICAgdGhpcy5jb250YWN0RXF1YXRpb25SZWxheGF0aW9uID0gdm9pZCAwO1xuICAgIHRoaXMuZnJpY3Rpb25FcXVhdGlvblN0aWZmbmVzcyA9IHZvaWQgMDtcbiAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25SZWxheGF0aW9uID0gdm9pZCAwO1xuICAgIG9wdGlvbnMgPSBVdGlscy5kZWZhdWx0cyhvcHRpb25zLCB7XG4gICAgICBmcmljdGlvbjogMC4zLFxuICAgICAgcmVzdGl0dXRpb246IDAuMyxcbiAgICAgIGNvbnRhY3RFcXVhdGlvblN0aWZmbmVzczogMWU3LFxuICAgICAgY29udGFjdEVxdWF0aW9uUmVsYXhhdGlvbjogMyxcbiAgICAgIGZyaWN0aW9uRXF1YXRpb25TdGlmZm5lc3M6IDFlNyxcbiAgICAgIGZyaWN0aW9uRXF1YXRpb25SZWxheGF0aW9uOiAzXG4gICAgfSk7XG4gICAgdGhpcy5pZCA9IENvbnRhY3RNYXRlcmlhbC5pZENvdW50ZXIrKztcbiAgICB0aGlzLm1hdGVyaWFscyA9IFttMSwgbTJdO1xuICAgIHRoaXMuZnJpY3Rpb24gPSBvcHRpb25zLmZyaWN0aW9uO1xuICAgIHRoaXMucmVzdGl0dXRpb24gPSBvcHRpb25zLnJlc3RpdHV0aW9uO1xuICAgIHRoaXMuY29udGFjdEVxdWF0aW9uU3RpZmZuZXNzID0gb3B0aW9ucy5jb250YWN0RXF1YXRpb25TdGlmZm5lc3M7XG4gICAgdGhpcy5jb250YWN0RXF1YXRpb25SZWxheGF0aW9uID0gb3B0aW9ucy5jb250YWN0RXF1YXRpb25SZWxheGF0aW9uO1xuICAgIHRoaXMuZnJpY3Rpb25FcXVhdGlvblN0aWZmbmVzcyA9IG9wdGlvbnMuZnJpY3Rpb25FcXVhdGlvblN0aWZmbmVzcztcbiAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25SZWxheGF0aW9uID0gb3B0aW9ucy5mcmljdGlvbkVxdWF0aW9uUmVsYXhhdGlvbjtcbiAgfVxuXG59XG5Db250YWN0TWF0ZXJpYWwuaWRDb3VudGVyID0gMDtcblxuLyoqXG4gKiBEZWZpbmVzIGEgcGh5c2ljcyBtYXRlcmlhbC5cbiAqL1xuY2xhc3MgTWF0ZXJpYWwge1xuICAvKipcbiAgICogTWF0ZXJpYWwgbmFtZS5cbiAgICogSWYgb3B0aW9ucyBpcyBhIHN0cmluZywgbmFtZSB3aWxsIGJlIHNldCB0byB0aGF0IHN0cmluZy5cbiAgICogQHRvZG8gRGVwcmVjYXRlIHRoaXNcbiAgICovXG5cbiAgLyoqIE1hdGVyaWFsIGlkLiAqL1xuXG4gIC8qKlxuICAgKiBGcmljdGlvbiBmb3IgdGhpcyBtYXRlcmlhbC5cbiAgICogSWYgbm9uLW5lZ2F0aXZlLCBpdCB3aWxsIGJlIHVzZWQgaW5zdGVhZCBvZiB0aGUgZnJpY3Rpb24gZ2l2ZW4gYnkgQ29udGFjdE1hdGVyaWFscy4gSWYgdGhlcmUncyBubyBtYXRjaGluZyBDb250YWN0TWF0ZXJpYWwsIHRoZSB2YWx1ZSBmcm9tIGBkZWZhdWx0Q29udGFjdE1hdGVyaWFsYCBpbiB0aGUgV29ybGQgd2lsbCBiZSB1c2VkLlxuICAgKi9cblxuICAvKipcbiAgICogUmVzdGl0dXRpb24gZm9yIHRoaXMgbWF0ZXJpYWwuXG4gICAqIElmIG5vbi1uZWdhdGl2ZSwgaXQgd2lsbCBiZSB1c2VkIGluc3RlYWQgb2YgdGhlIHJlc3RpdHV0aW9uIGdpdmVuIGJ5IENvbnRhY3RNYXRlcmlhbHMuIElmIHRoZXJlJ3Mgbm8gbWF0Y2hpbmcgQ29udGFjdE1hdGVyaWFsLCB0aGUgdmFsdWUgZnJvbSBgZGVmYXVsdENvbnRhY3RNYXRlcmlhbGAgaW4gdGhlIFdvcmxkIHdpbGwgYmUgdXNlZC5cbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkge1xuICAgIHRoaXMubmFtZSA9IHZvaWQgMDtcbiAgICB0aGlzLmlkID0gdm9pZCAwO1xuICAgIHRoaXMuZnJpY3Rpb24gPSB2b2lkIDA7XG4gICAgdGhpcy5yZXN0aXR1dGlvbiA9IHZvaWQgMDtcbiAgICBsZXQgbmFtZSA9ICcnOyAvLyBCYWNrd2FyZHMgY29tcGF0aWJpbGl0eSBmaXhcblxuICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ3N0cmluZycpIHtcbiAgICAgIC8vY29uc29sZS53YXJuKGBQYXNzaW5nIGEgc3RyaW5nIHRvIE1hdGVyaWFsT3B0aW9ucyBpcyBkZXByZWNhdGVkLCBhbmQgaGFzIG5vIGVmZmVjdGApXG4gICAgICBuYW1lID0gb3B0aW9ucztcbiAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICB9XG5cbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgIHRoaXMuaWQgPSBNYXRlcmlhbC5pZENvdW50ZXIrKztcbiAgICB0aGlzLmZyaWN0aW9uID0gdHlwZW9mIG9wdGlvbnMuZnJpY3Rpb24gIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5mcmljdGlvbiA6IC0xO1xuICAgIHRoaXMucmVzdGl0dXRpb24gPSB0eXBlb2Ygb3B0aW9ucy5yZXN0aXR1dGlvbiAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLnJlc3RpdHV0aW9uIDogLTE7XG4gIH1cblxufVxuTWF0ZXJpYWwuaWRDb3VudGVyID0gMDtcblxuLyoqXG4gKiBBIHNwcmluZywgY29ubmVjdGluZyB0d28gYm9kaWVzLlxuICogQGV4YW1wbGVcbiAqICAgICBjb25zdCBzcHJpbmcgPSBuZXcgU3ByaW5nKGJveEJvZHksIHNwaGVyZUJvZHksIHtcbiAqICAgICAgIHJlc3RMZW5ndGg6IDAsXG4gKiAgICAgICBzdGlmZm5lc3M6IDUwLFxuICogICAgICAgZGFtcGluZzogMSxcbiAqICAgICB9KVxuICpcbiAqICAgICAvLyBDb21wdXRlIHRoZSBmb3JjZSBhZnRlciBlYWNoIHN0ZXBcbiAqICAgICB3b3JsZC5hZGRFdmVudExpc3RlbmVyKCdwb3N0U3RlcCcsIChldmVudCkgPT4ge1xuICogICAgICAgc3ByaW5nLmFwcGx5Rm9yY2UoKVxuICogICAgIH0pXG4gKi9cbmNsYXNzIFNwcmluZyB7XG4gIC8qKlxuICAgKiBSZXN0IGxlbmd0aCBvZiB0aGUgc3ByaW5nLiBBIG51bWJlciA+IDAuXG4gICAqIEBkZWZhdWx0IDFcbiAgICovXG5cbiAgLyoqXG4gICAqIFN0aWZmbmVzcyBvZiB0aGUgc3ByaW5nLiBBIG51bWJlciA+PSAwLlxuICAgKiBAZGVmYXVsdCAxMDBcbiAgICovXG5cbiAgLyoqXG4gICAqIERhbXBpbmcgb2YgdGhlIHNwcmluZy4gQSBudW1iZXIgPj0gMC5cbiAgICogQGRlZmF1bHQgMVxuICAgKi9cblxuICAvKipcbiAgICogRmlyc3QgY29ubmVjdGVkIGJvZHkuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBTZWNvbmQgY29ubmVjdGVkIGJvZHkuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBBbmNob3IgZm9yIGJvZHlBIGluIGxvY2FsIGJvZHlBIGNvb3JkaW5hdGVzLlxuICAgKiBXaGVyZSB0byBob29rIHRoZSBzcHJpbmcgdG8gYm9keSBBLCBpbiBsb2NhbCBib2R5IGNvb3JkaW5hdGVzLlxuICAgKiBAZGVmYXVsdCBuZXcgVmVjMygpXG4gICAqL1xuXG4gIC8qKlxuICAgKiBBbmNob3IgZm9yIGJvZHlCIGluIGxvY2FsIGJvZHlCIGNvb3JkaW5hdGVzLlxuICAgKiBXaGVyZSB0byBob29rIHRoZSBzcHJpbmcgdG8gYm9keSBCLCBpbiBsb2NhbCBib2R5IGNvb3JkaW5hdGVzLlxuICAgKiBAZGVmYXVsdCBuZXcgVmVjMygpXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIG9wdGlvbnMgPSB7fSkge1xuICAgIHRoaXMucmVzdExlbmd0aCA9IHZvaWQgMDtcbiAgICB0aGlzLnN0aWZmbmVzcyA9IHZvaWQgMDtcbiAgICB0aGlzLmRhbXBpbmcgPSB2b2lkIDA7XG4gICAgdGhpcy5ib2R5QSA9IHZvaWQgMDtcbiAgICB0aGlzLmJvZHlCID0gdm9pZCAwO1xuICAgIHRoaXMubG9jYWxBbmNob3JBID0gdm9pZCAwO1xuICAgIHRoaXMubG9jYWxBbmNob3JCID0gdm9pZCAwO1xuICAgIHRoaXMucmVzdExlbmd0aCA9IHR5cGVvZiBvcHRpb25zLnJlc3RMZW5ndGggPT09ICdudW1iZXInID8gb3B0aW9ucy5yZXN0TGVuZ3RoIDogMTtcbiAgICB0aGlzLnN0aWZmbmVzcyA9IG9wdGlvbnMuc3RpZmZuZXNzIHx8IDEwMDtcbiAgICB0aGlzLmRhbXBpbmcgPSBvcHRpb25zLmRhbXBpbmcgfHwgMTtcbiAgICB0aGlzLmJvZHlBID0gYm9keUE7XG4gICAgdGhpcy5ib2R5QiA9IGJvZHlCO1xuICAgIHRoaXMubG9jYWxBbmNob3JBID0gbmV3IFZlYzMoKTtcbiAgICB0aGlzLmxvY2FsQW5jaG9yQiA9IG5ldyBWZWMzKCk7XG5cbiAgICBpZiAob3B0aW9ucy5sb2NhbEFuY2hvckEpIHtcbiAgICAgIHRoaXMubG9jYWxBbmNob3JBLmNvcHkob3B0aW9ucy5sb2NhbEFuY2hvckEpO1xuICAgIH1cblxuICAgIGlmIChvcHRpb25zLmxvY2FsQW5jaG9yQikge1xuICAgICAgdGhpcy5sb2NhbEFuY2hvckIuY29weShvcHRpb25zLmxvY2FsQW5jaG9yQik7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMud29ybGRBbmNob3JBKSB7XG4gICAgICB0aGlzLnNldFdvcmxkQW5jaG9yQShvcHRpb25zLndvcmxkQW5jaG9yQSk7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMud29ybGRBbmNob3JCKSB7XG4gICAgICB0aGlzLnNldFdvcmxkQW5jaG9yQihvcHRpb25zLndvcmxkQW5jaG9yQik7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBTZXQgdGhlIGFuY2hvciBwb2ludCBvbiBib2R5IEEsIHVzaW5nIHdvcmxkIGNvb3JkaW5hdGVzLlxuICAgKi9cblxuXG4gIHNldFdvcmxkQW5jaG9yQSh3b3JsZEFuY2hvckEpIHtcbiAgICB0aGlzLmJvZHlBLnBvaW50VG9Mb2NhbEZyYW1lKHdvcmxkQW5jaG9yQSwgdGhpcy5sb2NhbEFuY2hvckEpO1xuICB9XG4gIC8qKlxuICAgKiBTZXQgdGhlIGFuY2hvciBwb2ludCBvbiBib2R5IEIsIHVzaW5nIHdvcmxkIGNvb3JkaW5hdGVzLlxuICAgKi9cblxuXG4gIHNldFdvcmxkQW5jaG9yQih3b3JsZEFuY2hvckIpIHtcbiAgICB0aGlzLmJvZHlCLnBvaW50VG9Mb2NhbEZyYW1lKHdvcmxkQW5jaG9yQiwgdGhpcy5sb2NhbEFuY2hvckIpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIGFuY2hvciBwb2ludCBvbiBib2R5IEEsIGluIHdvcmxkIGNvb3JkaW5hdGVzLlxuICAgKiBAcGFyYW0gcmVzdWx0IFRoZSB2ZWN0b3IgdG8gc3RvcmUgdGhlIHJlc3VsdCBpbi5cbiAgICovXG5cblxuICBnZXRXb3JsZEFuY2hvckEocmVzdWx0KSB7XG4gICAgdGhpcy5ib2R5QS5wb2ludFRvV29ybGRGcmFtZSh0aGlzLmxvY2FsQW5jaG9yQSwgcmVzdWx0KTtcbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSBhbmNob3IgcG9pbnQgb24gYm9keSBCLCBpbiB3b3JsZCBjb29yZGluYXRlcy5cbiAgICogQHBhcmFtIHJlc3VsdCBUaGUgdmVjdG9yIHRvIHN0b3JlIHRoZSByZXN1bHQgaW4uXG4gICAqL1xuXG5cbiAgZ2V0V29ybGRBbmNob3JCKHJlc3VsdCkge1xuICAgIHRoaXMuYm9keUIucG9pbnRUb1dvcmxkRnJhbWUodGhpcy5sb2NhbEFuY2hvckIsIHJlc3VsdCk7XG4gIH1cbiAgLyoqXG4gICAqIEFwcGx5IHRoZSBzcHJpbmcgZm9yY2UgdG8gdGhlIGNvbm5lY3RlZCBib2RpZXMuXG4gICAqL1xuXG5cbiAgYXBwbHlGb3JjZSgpIHtcbiAgICBjb25zdCBrID0gdGhpcy5zdGlmZm5lc3M7XG4gICAgY29uc3QgZCA9IHRoaXMuZGFtcGluZztcbiAgICBjb25zdCBsID0gdGhpcy5yZXN0TGVuZ3RoO1xuICAgIGNvbnN0IGJvZHlBID0gdGhpcy5ib2R5QTtcbiAgICBjb25zdCBib2R5QiA9IHRoaXMuYm9keUI7XG4gICAgY29uc3QgciA9IGFwcGx5Rm9yY2VfcjtcbiAgICBjb25zdCByX3VuaXQgPSBhcHBseUZvcmNlX3JfdW5pdDtcbiAgICBjb25zdCB1ID0gYXBwbHlGb3JjZV91O1xuICAgIGNvbnN0IGYgPSBhcHBseUZvcmNlX2Y7XG4gICAgY29uc3QgdG1wID0gYXBwbHlGb3JjZV90bXA7XG4gICAgY29uc3Qgd29ybGRBbmNob3JBID0gYXBwbHlGb3JjZV93b3JsZEFuY2hvckE7XG4gICAgY29uc3Qgd29ybGRBbmNob3JCID0gYXBwbHlGb3JjZV93b3JsZEFuY2hvckI7XG4gICAgY29uc3QgcmkgPSBhcHBseUZvcmNlX3JpO1xuICAgIGNvbnN0IHJqID0gYXBwbHlGb3JjZV9yajtcbiAgICBjb25zdCByaV94X2YgPSBhcHBseUZvcmNlX3JpX3hfZjtcbiAgICBjb25zdCByal94X2YgPSBhcHBseUZvcmNlX3JqX3hfZjsgLy8gR2V0IHdvcmxkIGFuY2hvcnNcblxuICAgIHRoaXMuZ2V0V29ybGRBbmNob3JBKHdvcmxkQW5jaG9yQSk7XG4gICAgdGhpcy5nZXRXb3JsZEFuY2hvckIod29ybGRBbmNob3JCKTsgLy8gR2V0IG9mZnNldCBwb2ludHNcblxuICAgIHdvcmxkQW5jaG9yQS52c3ViKGJvZHlBLnBvc2l0aW9uLCByaSk7XG4gICAgd29ybGRBbmNob3JCLnZzdWIoYm9keUIucG9zaXRpb24sIHJqKTsgLy8gQ29tcHV0ZSBkaXN0YW5jZSB2ZWN0b3IgYmV0d2VlbiB3b3JsZCBhbmNob3IgcG9pbnRzXG5cbiAgICB3b3JsZEFuY2hvckIudnN1Yih3b3JsZEFuY2hvckEsIHIpO1xuICAgIGNvbnN0IHJsZW4gPSByLmxlbmd0aCgpO1xuICAgIHJfdW5pdC5jb3B5KHIpO1xuICAgIHJfdW5pdC5ub3JtYWxpemUoKTsgLy8gQ29tcHV0ZSByZWxhdGl2ZSB2ZWxvY2l0eSBvZiB0aGUgYW5jaG9yIHBvaW50cywgdVxuXG4gICAgYm9keUIudmVsb2NpdHkudnN1Yihib2R5QS52ZWxvY2l0eSwgdSk7IC8vIEFkZCByb3RhdGlvbmFsIHZlbG9jaXR5XG5cbiAgICBib2R5Qi5hbmd1bGFyVmVsb2NpdHkuY3Jvc3MocmosIHRtcCk7XG4gICAgdS52YWRkKHRtcCwgdSk7XG4gICAgYm9keUEuYW5ndWxhclZlbG9jaXR5LmNyb3NzKHJpLCB0bXApO1xuICAgIHUudnN1Yih0bXAsIHUpOyAvLyBGID0gLSBrICogKCB4IC0gTCApIC0gRCAqICggdSApXG5cbiAgICByX3VuaXQuc2NhbGUoLWsgKiAocmxlbiAtIGwpIC0gZCAqIHUuZG90KHJfdW5pdCksIGYpOyAvLyBBZGQgZm9yY2VzIHRvIGJvZGllc1xuXG4gICAgYm9keUEuZm9yY2UudnN1YihmLCBib2R5QS5mb3JjZSk7XG4gICAgYm9keUIuZm9yY2UudmFkZChmLCBib2R5Qi5mb3JjZSk7IC8vIEFuZ3VsYXIgZm9yY2VcblxuICAgIHJpLmNyb3NzKGYsIHJpX3hfZik7XG4gICAgcmouY3Jvc3MoZiwgcmpfeF9mKTtcbiAgICBib2R5QS50b3JxdWUudnN1YihyaV94X2YsIGJvZHlBLnRvcnF1ZSk7XG4gICAgYm9keUIudG9ycXVlLnZhZGQocmpfeF9mLCBib2R5Qi50b3JxdWUpO1xuICB9XG5cbn1cbmNvbnN0IGFwcGx5Rm9yY2VfciA9IG5ldyBWZWMzKCk7XG5jb25zdCBhcHBseUZvcmNlX3JfdW5pdCA9IG5ldyBWZWMzKCk7XG5jb25zdCBhcHBseUZvcmNlX3UgPSBuZXcgVmVjMygpO1xuY29uc3QgYXBwbHlGb3JjZV9mID0gbmV3IFZlYzMoKTtcbmNvbnN0IGFwcGx5Rm9yY2Vfd29ybGRBbmNob3JBID0gbmV3IFZlYzMoKTtcbmNvbnN0IGFwcGx5Rm9yY2Vfd29ybGRBbmNob3JCID0gbmV3IFZlYzMoKTtcbmNvbnN0IGFwcGx5Rm9yY2VfcmkgPSBuZXcgVmVjMygpO1xuY29uc3QgYXBwbHlGb3JjZV9yaiA9IG5ldyBWZWMzKCk7XG5jb25zdCBhcHBseUZvcmNlX3JpX3hfZiA9IG5ldyBWZWMzKCk7XG5jb25zdCBhcHBseUZvcmNlX3JqX3hfZiA9IG5ldyBWZWMzKCk7XG5jb25zdCBhcHBseUZvcmNlX3RtcCA9IG5ldyBWZWMzKCk7XG5cbi8qKlxuICogV2hlZWxJbmZvXG4gKi9cbmNsYXNzIFdoZWVsSW5mbyB7XG4gIC8qKlxuICAgKiBNYXggdHJhdmVsIGRpc3RhbmNlIG9mIHRoZSBzdXNwZW5zaW9uLCBpbiBtZXRlcnMuXG4gICAqIEBkZWZhdWx0IDFcbiAgICovXG5cbiAgLyoqXG4gICAqIFNwZWVkIHRvIGFwcGx5IHRvIHRoZSB3aGVlbCByb3RhdGlvbiB3aGVuIHRoZSB3aGVlbCBpcyBzbGlkaW5nLlxuICAgKiBAZGVmYXVsdCAtMC4xXG4gICAqL1xuXG4gIC8qKlxuICAgKiBJZiB0aGUgY3VzdG9tU2xpZGluZ1JvdGF0aW9uYWxTcGVlZCBzaG91bGQgYmUgdXNlZC5cbiAgICogQGRlZmF1bHQgZmFsc2VcbiAgICovXG5cbiAgLyoqXG4gICAqIHNsaWRpbmdcbiAgICovXG5cbiAgLyoqXG4gICAqIENvbm5lY3Rpb24gcG9pbnQsIGRlZmluZWQgbG9jYWxseSBpbiB0aGUgY2hhc3NpcyBib2R5IGZyYW1lLlxuICAgKi9cblxuICAvKipcbiAgICogY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludFdvcmxkXG4gICAqL1xuXG4gIC8qKlxuICAgKiBkaXJlY3Rpb25Mb2NhbFxuICAgKi9cblxuICAvKipcbiAgICogZGlyZWN0aW9uV29ybGRcbiAgICovXG5cbiAgLyoqXG4gICAqIGF4bGVMb2NhbFxuICAgKi9cblxuICAvKipcbiAgICogYXhsZVdvcmxkXG4gICAqL1xuXG4gIC8qKlxuICAgKiBzdXNwZW5zaW9uUmVzdExlbmd0aFxuICAgKiBAZGVmYXVsdCAxXG4gICAqL1xuXG4gIC8qKlxuICAgKiBzdXNwZW5zaW9uTWF4TGVuZ3RoXG4gICAqIEBkZWZhdWx0IDJcbiAgICovXG5cbiAgLyoqXG4gICAqIHJhZGl1c1xuICAgKiBAZGVmYXVsdCAxXG4gICAqL1xuXG4gIC8qKlxuICAgKiBzdXNwZW5zaW9uU3RpZmZuZXNzXG4gICAqIEBkZWZhdWx0IDEwMFxuICAgKi9cblxuICAvKipcbiAgICogZGFtcGluZ0NvbXByZXNzaW9uXG4gICAqIEBkZWZhdWx0IDEwXG4gICAqL1xuXG4gIC8qKlxuICAgKiBkYW1waW5nUmVsYXhhdGlvblxuICAgKiBAZGVmYXVsdCAxMFxuICAgKi9cblxuICAvKipcbiAgICogZnJpY3Rpb25TbGlwXG4gICAqIEBkZWZhdWx0IDEwLjVcbiAgICovXG5cbiAgLyoqIGZvcndhcmRBY2NlbGVyYXRpb24gKi9cblxuICAvKiogc2lkZUFjY2VsZXJhdGlvbiAqL1xuXG4gIC8qKlxuICAgKiBzdGVlcmluZ1xuICAgKiBAZGVmYXVsdCAwXG4gICAqL1xuXG4gIC8qKlxuICAgKiBSb3RhdGlvbiB2YWx1ZSwgaW4gcmFkaWFucy5cbiAgICogQGRlZmF1bHQgMFxuICAgKi9cblxuICAvKipcbiAgICogZGVsdGFSb3RhdGlvblxuICAgKiBAZGVmYXVsdCAwXG4gICAqL1xuXG4gIC8qKlxuICAgKiByb2xsSW5mbHVlbmNlXG4gICAqIEBkZWZhdWx0IDAuMDFcbiAgICovXG5cbiAgLyoqXG4gICAqIG1heFN1c3BlbnNpb25Gb3JjZVxuICAgKi9cblxuICAvKipcbiAgICogZW5naW5lRm9yY2VcbiAgICovXG5cbiAgLyoqXG4gICAqIGJyYWtlXG4gICAqL1xuXG4gIC8qKlxuICAgKiBpc0Zyb250V2hlZWxcbiAgICogQGRlZmF1bHQgdHJ1ZVxuICAgKi9cblxuICAvKipcbiAgICogY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uXG4gICAqIEBkZWZhdWx0IDFcbiAgICovXG5cbiAgLyoqXG4gICAqIHN1c3BlbnNpb25SZWxhdGl2ZVZlbG9jaXR5XG4gICAqIEBkZWZhdWx0IDBcbiAgICovXG5cbiAgLyoqXG4gICAqIHN1c3BlbnNpb25Gb3JjZVxuICAgKiBAZGVmYXVsdCAwXG4gICAqL1xuXG4gIC8qKlxuICAgKiBzbGlwSW5mb1xuICAgKi9cblxuICAvKipcbiAgICogc2tpZEluZm9cbiAgICogQGRlZmF1bHQgMFxuICAgKi9cblxuICAvKipcbiAgICogc3VzcGVuc2lvbkxlbmd0aFxuICAgKiBAZGVmYXVsdCAwXG4gICAqL1xuXG4gIC8qKlxuICAgKiBzaWRlSW1wdWxzZVxuICAgKi9cblxuICAvKipcbiAgICogZm9yd2FyZEltcHVsc2VcbiAgICovXG5cbiAgLyoqXG4gICAqIFRoZSByZXN1bHQgZnJvbSByYXljYXN0aW5nLlxuICAgKi9cblxuICAvKipcbiAgICogV2hlZWwgd29ybGQgdHJhbnNmb3JtLlxuICAgKi9cblxuICAvKipcbiAgICogaXNJbkNvbnRhY3RcbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkge1xuICAgIHRoaXMubWF4U3VzcGVuc2lvblRyYXZlbCA9IHZvaWQgMDtcbiAgICB0aGlzLmN1c3RvbVNsaWRpbmdSb3RhdGlvbmFsU3BlZWQgPSB2b2lkIDA7XG4gICAgdGhpcy51c2VDdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkID0gdm9pZCAwO1xuICAgIHRoaXMuc2xpZGluZyA9IHZvaWQgMDtcbiAgICB0aGlzLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRMb2NhbCA9IHZvaWQgMDtcbiAgICB0aGlzLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRXb3JsZCA9IHZvaWQgMDtcbiAgICB0aGlzLmRpcmVjdGlvbkxvY2FsID0gdm9pZCAwO1xuICAgIHRoaXMuZGlyZWN0aW9uV29ybGQgPSB2b2lkIDA7XG4gICAgdGhpcy5heGxlTG9jYWwgPSB2b2lkIDA7XG4gICAgdGhpcy5heGxlV29ybGQgPSB2b2lkIDA7XG4gICAgdGhpcy5zdXNwZW5zaW9uUmVzdExlbmd0aCA9IHZvaWQgMDtcbiAgICB0aGlzLnN1c3BlbnNpb25NYXhMZW5ndGggPSB2b2lkIDA7XG4gICAgdGhpcy5yYWRpdXMgPSB2b2lkIDA7XG4gICAgdGhpcy5zdXNwZW5zaW9uU3RpZmZuZXNzID0gdm9pZCAwO1xuICAgIHRoaXMuZGFtcGluZ0NvbXByZXNzaW9uID0gdm9pZCAwO1xuICAgIHRoaXMuZGFtcGluZ1JlbGF4YXRpb24gPSB2b2lkIDA7XG4gICAgdGhpcy5mcmljdGlvblNsaXAgPSB2b2lkIDA7XG4gICAgdGhpcy5mb3J3YXJkQWNjZWxlcmF0aW9uID0gdm9pZCAwO1xuICAgIHRoaXMuc2lkZUFjY2VsZXJhdGlvbiA9IHZvaWQgMDtcbiAgICB0aGlzLnN0ZWVyaW5nID0gdm9pZCAwO1xuICAgIHRoaXMucm90YXRpb24gPSB2b2lkIDA7XG4gICAgdGhpcy5kZWx0YVJvdGF0aW9uID0gdm9pZCAwO1xuICAgIHRoaXMucm9sbEluZmx1ZW5jZSA9IHZvaWQgMDtcbiAgICB0aGlzLm1heFN1c3BlbnNpb25Gb3JjZSA9IHZvaWQgMDtcbiAgICB0aGlzLmVuZ2luZUZvcmNlID0gdm9pZCAwO1xuICAgIHRoaXMuYnJha2UgPSB2b2lkIDA7XG4gICAgdGhpcy5pc0Zyb250V2hlZWwgPSB2b2lkIDA7XG4gICAgdGhpcy5jbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb24gPSB2b2lkIDA7XG4gICAgdGhpcy5zdXNwZW5zaW9uUmVsYXRpdmVWZWxvY2l0eSA9IHZvaWQgMDtcbiAgICB0aGlzLnN1c3BlbnNpb25Gb3JjZSA9IHZvaWQgMDtcbiAgICB0aGlzLnNsaXBJbmZvID0gdm9pZCAwO1xuICAgIHRoaXMuc2tpZEluZm8gPSB2b2lkIDA7XG4gICAgdGhpcy5zdXNwZW5zaW9uTGVuZ3RoID0gdm9pZCAwO1xuICAgIHRoaXMuc2lkZUltcHVsc2UgPSB2b2lkIDA7XG4gICAgdGhpcy5mb3J3YXJkSW1wdWxzZSA9IHZvaWQgMDtcbiAgICB0aGlzLnJheWNhc3RSZXN1bHQgPSB2b2lkIDA7XG4gICAgdGhpcy53b3JsZFRyYW5zZm9ybSA9IHZvaWQgMDtcbiAgICB0aGlzLmlzSW5Db250YWN0ID0gdm9pZCAwO1xuICAgIG9wdGlvbnMgPSBVdGlscy5kZWZhdWx0cyhvcHRpb25zLCB7XG4gICAgICBjaGFzc2lzQ29ubmVjdGlvblBvaW50TG9jYWw6IG5ldyBWZWMzKCksXG4gICAgICBjaGFzc2lzQ29ubmVjdGlvblBvaW50V29ybGQ6IG5ldyBWZWMzKCksXG4gICAgICBkaXJlY3Rpb25Mb2NhbDogbmV3IFZlYzMoKSxcbiAgICAgIGRpcmVjdGlvbldvcmxkOiBuZXcgVmVjMygpLFxuICAgICAgYXhsZUxvY2FsOiBuZXcgVmVjMygpLFxuICAgICAgYXhsZVdvcmxkOiBuZXcgVmVjMygpLFxuICAgICAgc3VzcGVuc2lvblJlc3RMZW5ndGg6IDEsXG4gICAgICBzdXNwZW5zaW9uTWF4TGVuZ3RoOiAyLFxuICAgICAgcmFkaXVzOiAxLFxuICAgICAgc3VzcGVuc2lvblN0aWZmbmVzczogMTAwLFxuICAgICAgZGFtcGluZ0NvbXByZXNzaW9uOiAxMCxcbiAgICAgIGRhbXBpbmdSZWxheGF0aW9uOiAxMCxcbiAgICAgIGZyaWN0aW9uU2xpcDogMTAuNSxcbiAgICAgIGZvcndhcmRBY2NlbGVyYXRpb246IDEsXG4gICAgICBzaWRlQWNjZWxlcmF0aW9uOiAxLFxuICAgICAgc3RlZXJpbmc6IDAsXG4gICAgICByb3RhdGlvbjogMCxcbiAgICAgIGRlbHRhUm90YXRpb246IDAsXG4gICAgICByb2xsSW5mbHVlbmNlOiAwLjAxLFxuICAgICAgbWF4U3VzcGVuc2lvbkZvcmNlOiBOdW1iZXIuTUFYX1ZBTFVFLFxuICAgICAgaXNGcm9udFdoZWVsOiB0cnVlLFxuICAgICAgY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uOiAxLFxuICAgICAgc3VzcGVuc2lvblJlbGF0aXZlVmVsb2NpdHk6IDAsXG4gICAgICBzdXNwZW5zaW9uRm9yY2U6IDAsXG4gICAgICBzbGlwSW5mbzogMCxcbiAgICAgIHNraWRJbmZvOiAwLFxuICAgICAgc3VzcGVuc2lvbkxlbmd0aDogMCxcbiAgICAgIG1heFN1c3BlbnNpb25UcmF2ZWw6IDEsXG4gICAgICB1c2VDdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkOiBmYWxzZSxcbiAgICAgIGN1c3RvbVNsaWRpbmdSb3RhdGlvbmFsU3BlZWQ6IC0wLjFcbiAgICB9KTtcbiAgICB0aGlzLm1heFN1c3BlbnNpb25UcmF2ZWwgPSBvcHRpb25zLm1heFN1c3BlbnNpb25UcmF2ZWw7XG4gICAgdGhpcy5jdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkID0gb3B0aW9ucy5jdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkO1xuICAgIHRoaXMudXNlQ3VzdG9tU2xpZGluZ1JvdGF0aW9uYWxTcGVlZCA9IG9wdGlvbnMudXNlQ3VzdG9tU2xpZGluZ1JvdGF0aW9uYWxTcGVlZDtcbiAgICB0aGlzLnNsaWRpbmcgPSBmYWxzZTtcbiAgICB0aGlzLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRMb2NhbCA9IG9wdGlvbnMuY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludExvY2FsLmNsb25lKCk7XG4gICAgdGhpcy5jaGFzc2lzQ29ubmVjdGlvblBvaW50V29ybGQgPSBvcHRpb25zLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRXb3JsZC5jbG9uZSgpO1xuICAgIHRoaXMuZGlyZWN0aW9uTG9jYWwgPSBvcHRpb25zLmRpcmVjdGlvbkxvY2FsLmNsb25lKCk7XG4gICAgdGhpcy5kaXJlY3Rpb25Xb3JsZCA9IG9wdGlvbnMuZGlyZWN0aW9uV29ybGQuY2xvbmUoKTtcbiAgICB0aGlzLmF4bGVMb2NhbCA9IG9wdGlvbnMuYXhsZUxvY2FsLmNsb25lKCk7XG4gICAgdGhpcy5heGxlV29ybGQgPSBvcHRpb25zLmF4bGVXb3JsZC5jbG9uZSgpO1xuICAgIHRoaXMuc3VzcGVuc2lvblJlc3RMZW5ndGggPSBvcHRpb25zLnN1c3BlbnNpb25SZXN0TGVuZ3RoO1xuICAgIHRoaXMuc3VzcGVuc2lvbk1heExlbmd0aCA9IG9wdGlvbnMuc3VzcGVuc2lvbk1heExlbmd0aDtcbiAgICB0aGlzLnJhZGl1cyA9IG9wdGlvbnMucmFkaXVzO1xuICAgIHRoaXMuc3VzcGVuc2lvblN0aWZmbmVzcyA9IG9wdGlvbnMuc3VzcGVuc2lvblN0aWZmbmVzcztcbiAgICB0aGlzLmRhbXBpbmdDb21wcmVzc2lvbiA9IG9wdGlvbnMuZGFtcGluZ0NvbXByZXNzaW9uO1xuICAgIHRoaXMuZGFtcGluZ1JlbGF4YXRpb24gPSBvcHRpb25zLmRhbXBpbmdSZWxheGF0aW9uO1xuICAgIHRoaXMuZnJpY3Rpb25TbGlwID0gb3B0aW9ucy5mcmljdGlvblNsaXA7XG4gICAgdGhpcy5mb3J3YXJkQWNjZWxlcmF0aW9uID0gb3B0aW9ucy5mb3J3YXJkQWNjZWxlcmF0aW9uO1xuICAgIHRoaXMuc2lkZUFjY2VsZXJhdGlvbiA9IG9wdGlvbnMuc2lkZUFjY2VsZXJhdGlvbjtcbiAgICB0aGlzLnN0ZWVyaW5nID0gMDtcbiAgICB0aGlzLnJvdGF0aW9uID0gMDtcbiAgICB0aGlzLmRlbHRhUm90YXRpb24gPSAwO1xuICAgIHRoaXMucm9sbEluZmx1ZW5jZSA9IG9wdGlvbnMucm9sbEluZmx1ZW5jZTtcbiAgICB0aGlzLm1heFN1c3BlbnNpb25Gb3JjZSA9IG9wdGlvbnMubWF4U3VzcGVuc2lvbkZvcmNlO1xuICAgIHRoaXMuZW5naW5lRm9yY2UgPSAwO1xuICAgIHRoaXMuYnJha2UgPSAwO1xuICAgIHRoaXMuaXNGcm9udFdoZWVsID0gb3B0aW9ucy5pc0Zyb250V2hlZWw7XG4gICAgdGhpcy5jbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb24gPSAxO1xuICAgIHRoaXMuc3VzcGVuc2lvblJlbGF0aXZlVmVsb2NpdHkgPSAwO1xuICAgIHRoaXMuc3VzcGVuc2lvbkZvcmNlID0gMDtcbiAgICB0aGlzLnNsaXBJbmZvID0gMDtcbiAgICB0aGlzLnNraWRJbmZvID0gMDtcbiAgICB0aGlzLnN1c3BlbnNpb25MZW5ndGggPSAwO1xuICAgIHRoaXMuc2lkZUltcHVsc2UgPSAwO1xuICAgIHRoaXMuZm9yd2FyZEltcHVsc2UgPSAwO1xuICAgIHRoaXMucmF5Y2FzdFJlc3VsdCA9IG5ldyBSYXljYXN0UmVzdWx0KCk7XG4gICAgdGhpcy53b3JsZFRyYW5zZm9ybSA9IG5ldyBUcmFuc2Zvcm0oKTtcbiAgICB0aGlzLmlzSW5Db250YWN0ID0gZmFsc2U7XG4gIH1cblxuICB1cGRhdGVXaGVlbChjaGFzc2lzKSB7XG4gICAgY29uc3QgcmF5Y2FzdFJlc3VsdCA9IHRoaXMucmF5Y2FzdFJlc3VsdDtcblxuICAgIGlmICh0aGlzLmlzSW5Db250YWN0KSB7XG4gICAgICBjb25zdCBwcm9qZWN0ID0gcmF5Y2FzdFJlc3VsdC5oaXROb3JtYWxXb3JsZC5kb3QocmF5Y2FzdFJlc3VsdC5kaXJlY3Rpb25Xb3JsZCk7XG4gICAgICByYXljYXN0UmVzdWx0LmhpdFBvaW50V29ybGQudnN1YihjaGFzc2lzLnBvc2l0aW9uLCByZWxwb3MpO1xuICAgICAgY2hhc3Npcy5nZXRWZWxvY2l0eUF0V29ybGRQb2ludChyZWxwb3MsIGNoYXNzaXNfdmVsb2NpdHlfYXRfY29udGFjdFBvaW50KTtcbiAgICAgIGNvbnN0IHByb2pWZWwgPSByYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkLmRvdChjaGFzc2lzX3ZlbG9jaXR5X2F0X2NvbnRhY3RQb2ludCk7XG5cbiAgICAgIGlmIChwcm9qZWN0ID49IC0wLjEpIHtcbiAgICAgICAgdGhpcy5zdXNwZW5zaW9uUmVsYXRpdmVWZWxvY2l0eSA9IDAuMDtcbiAgICAgICAgdGhpcy5jbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb24gPSAxLjAgLyAwLjE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBpbnYgPSAtMSAvIHByb2plY3Q7XG4gICAgICAgIHRoaXMuc3VzcGVuc2lvblJlbGF0aXZlVmVsb2NpdHkgPSBwcm9qVmVsICogaW52O1xuICAgICAgICB0aGlzLmNsaXBwZWRJbnZDb250YWN0RG90U3VzcGVuc2lvbiA9IGludjtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gTm90IGluIGNvbnRhY3QgOiBwb3NpdGlvbiB3aGVlbCBpbiBhIG5pY2UgKHJlc3QgbGVuZ3RoKSBwb3NpdGlvblxuICAgICAgcmF5Y2FzdFJlc3VsdC5zdXNwZW5zaW9uTGVuZ3RoID0gdGhpcy5zdXNwZW5zaW9uUmVzdExlbmd0aDtcbiAgICAgIHRoaXMuc3VzcGVuc2lvblJlbGF0aXZlVmVsb2NpdHkgPSAwLjA7XG4gICAgICByYXljYXN0UmVzdWx0LmRpcmVjdGlvbldvcmxkLnNjYWxlKC0xLCByYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkKTtcbiAgICAgIHRoaXMuY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uID0gMS4wO1xuICAgIH1cbiAgfVxuXG59XG5jb25zdCBjaGFzc2lzX3ZlbG9jaXR5X2F0X2NvbnRhY3RQb2ludCA9IG5ldyBWZWMzKCk7XG5jb25zdCByZWxwb3MgPSBuZXcgVmVjMygpO1xuXG4vKipcbiAqIFZlaGljbGUgaGVscGVyIGNsYXNzIHRoYXQgY2FzdHMgcmF5cyBmcm9tIHRoZSB3aGVlbCBwb3NpdGlvbnMgdG93YXJkcyB0aGUgZ3JvdW5kIGFuZCBhcHBsaWVzIGZvcmNlcy5cbiAqL1xuY2xhc3MgUmF5Y2FzdFZlaGljbGUge1xuICAvKiogVGhlIGNhciBjaGFzc2lzIGJvZHkuICovXG5cbiAgLyoqIFRoZSB3aGVlbHMuICovXG5cbiAgLyoqIFdpbGwgYmUgc2V0IHRvIHRydWUgaWYgdGhlIGNhciBpcyBzbGlkaW5nLiAqL1xuXG4gIC8qKiBJbmRleCBvZiB0aGUgcmlnaHQgYXhpcy4geD0wLCB5PTEsIHo9MiAqL1xuXG4gIC8qKiBJbmRleCBvZiB0aGUgZm9yd2FyZCBheGlzLiB4PTAsIHk9MSwgej0yICovXG5cbiAgLyoqIEluZGV4IG9mIHRoZSB1cCBheGlzLiB4PTAsIHk9MSwgej0yICovXG5cbiAgLyoqIFRoZSBjb25zdHJhaW50cy4gKi9cblxuICAvKiogT3B0aW9uYWwgcHJlLXN0ZXAgY2FsbGJhY2suICovXG5cbiAgLyoqIE51bWJlciBvZiB3aGVlbHMgb24gdGhlIGdyb3VuZC4gKi9cbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIHRoaXMuY2hhc3Npc0JvZHkgPSB2b2lkIDA7XG4gICAgdGhpcy53aGVlbEluZm9zID0gdm9pZCAwO1xuICAgIHRoaXMuc2xpZGluZyA9IHZvaWQgMDtcbiAgICB0aGlzLndvcmxkID0gdm9pZCAwO1xuICAgIHRoaXMuaW5kZXhSaWdodEF4aXMgPSB2b2lkIDA7XG4gICAgdGhpcy5pbmRleEZvcndhcmRBeGlzID0gdm9pZCAwO1xuICAgIHRoaXMuaW5kZXhVcEF4aXMgPSB2b2lkIDA7XG4gICAgdGhpcy5jb25zdHJhaW50cyA9IHZvaWQgMDtcbiAgICB0aGlzLnByZVN0ZXBDYWxsYmFjayA9IHZvaWQgMDtcbiAgICB0aGlzLmN1cnJlbnRWZWhpY2xlU3BlZWRLbUhvdXIgPSB2b2lkIDA7XG4gICAgdGhpcy5udW1XaGVlbHNPbkdyb3VuZCA9IHZvaWQgMDtcbiAgICB0aGlzLmNoYXNzaXNCb2R5ID0gb3B0aW9ucy5jaGFzc2lzQm9keTtcbiAgICB0aGlzLndoZWVsSW5mb3MgPSBbXTtcbiAgICB0aGlzLnNsaWRpbmcgPSBmYWxzZTtcbiAgICB0aGlzLndvcmxkID0gbnVsbDtcbiAgICB0aGlzLmluZGV4UmlnaHRBeGlzID0gdHlwZW9mIG9wdGlvbnMuaW5kZXhSaWdodEF4aXMgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5pbmRleFJpZ2h0QXhpcyA6IDI7XG4gICAgdGhpcy5pbmRleEZvcndhcmRBeGlzID0gdHlwZW9mIG9wdGlvbnMuaW5kZXhGb3J3YXJkQXhpcyAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmluZGV4Rm9yd2FyZEF4aXMgOiAwO1xuICAgIHRoaXMuaW5kZXhVcEF4aXMgPSB0eXBlb2Ygb3B0aW9ucy5pbmRleFVwQXhpcyAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmluZGV4VXBBeGlzIDogMTtcbiAgICB0aGlzLmNvbnN0cmFpbnRzID0gW107XG5cbiAgICB0aGlzLnByZVN0ZXBDYWxsYmFjayA9ICgpID0+IHt9O1xuXG4gICAgdGhpcy5jdXJyZW50VmVoaWNsZVNwZWVkS21Ib3VyID0gMDtcbiAgICB0aGlzLm51bVdoZWVsc09uR3JvdW5kID0gMDtcbiAgfVxuICAvKipcbiAgICogQWRkIGEgd2hlZWwuIEZvciBpbmZvcm1hdGlvbiBhYm91dCB0aGUgb3B0aW9ucywgc2VlIGBXaGVlbEluZm9gLlxuICAgKi9cblxuXG4gIGFkZFdoZWVsKG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IGluZm8gPSBuZXcgV2hlZWxJbmZvKG9wdGlvbnMpO1xuICAgIGNvbnN0IGluZGV4ID0gdGhpcy53aGVlbEluZm9zLmxlbmd0aDtcbiAgICB0aGlzLndoZWVsSW5mb3MucHVzaChpbmZvKTtcbiAgICByZXR1cm4gaW5kZXg7XG4gIH1cbiAgLyoqXG4gICAqIFNldCB0aGUgc3RlZXJpbmcgdmFsdWUgb2YgYSB3aGVlbC5cbiAgICovXG5cblxuICBzZXRTdGVlcmluZ1ZhbHVlKHZhbHVlLCB3aGVlbEluZGV4KSB7XG4gICAgY29uc3Qgd2hlZWwgPSB0aGlzLndoZWVsSW5mb3Nbd2hlZWxJbmRleF07XG4gICAgd2hlZWwuc3RlZXJpbmcgPSB2YWx1ZTtcbiAgfVxuICAvKipcbiAgICogU2V0IHRoZSB3aGVlbCBmb3JjZSB0byBhcHBseSBvbiBvbmUgb2YgdGhlIHdoZWVscyBlYWNoIHRpbWUgc3RlcFxuICAgKi9cblxuXG4gIGFwcGx5RW5naW5lRm9yY2UodmFsdWUsIHdoZWVsSW5kZXgpIHtcbiAgICB0aGlzLndoZWVsSW5mb3Nbd2hlZWxJbmRleF0uZW5naW5lRm9yY2UgPSB2YWx1ZTtcbiAgfVxuICAvKipcbiAgICogU2V0IHRoZSBicmFraW5nIGZvcmNlIG9mIGEgd2hlZWxcbiAgICovXG5cblxuICBzZXRCcmFrZShicmFrZSwgd2hlZWxJbmRleCkge1xuICAgIHRoaXMud2hlZWxJbmZvc1t3aGVlbEluZGV4XS5icmFrZSA9IGJyYWtlO1xuICB9XG4gIC8qKlxuICAgKiBBZGQgdGhlIHZlaGljbGUgaW5jbHVkaW5nIGl0cyBjb25zdHJhaW50cyB0byB0aGUgd29ybGQuXG4gICAqL1xuXG5cbiAgYWRkVG9Xb3JsZCh3b3JsZCkge1xuICAgIHdvcmxkLmFkZEJvZHkodGhpcy5jaGFzc2lzQm9keSk7XG4gICAgY29uc3QgdGhhdCA9IHRoaXM7XG5cbiAgICB0aGlzLnByZVN0ZXBDYWxsYmFjayA9ICgpID0+IHtcbiAgICAgIHRoYXQudXBkYXRlVmVoaWNsZSh3b3JsZC5kdCk7XG4gICAgfTtcblxuICAgIHdvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ3ByZVN0ZXAnLCB0aGlzLnByZVN0ZXBDYWxsYmFjayk7XG4gICAgdGhpcy53b3JsZCA9IHdvcmxkO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgb25lIG9mIHRoZSB3aGVlbCBheGxlcywgd29ybGQtb3JpZW50ZWQuXG4gICAqL1xuXG5cbiAgZ2V0VmVoaWNsZUF4aXNXb3JsZChheGlzSW5kZXgsIHJlc3VsdCkge1xuICAgIHJlc3VsdC5zZXQoYXhpc0luZGV4ID09PSAwID8gMSA6IDAsIGF4aXNJbmRleCA9PT0gMSA/IDEgOiAwLCBheGlzSW5kZXggPT09IDIgPyAxIDogMCk7XG4gICAgdGhpcy5jaGFzc2lzQm9keS52ZWN0b3JUb1dvcmxkRnJhbWUocmVzdWx0LCByZXN1bHQpO1xuICB9XG5cbiAgdXBkYXRlVmVoaWNsZSh0aW1lU3RlcCkge1xuICAgIGNvbnN0IHdoZWVsSW5mb3MgPSB0aGlzLndoZWVsSW5mb3M7XG4gICAgY29uc3QgbnVtV2hlZWxzID0gd2hlZWxJbmZvcy5sZW5ndGg7XG4gICAgY29uc3QgY2hhc3Npc0JvZHkgPSB0aGlzLmNoYXNzaXNCb2R5O1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1XaGVlbHM7IGkrKykge1xuICAgICAgdGhpcy51cGRhdGVXaGVlbFRyYW5zZm9ybShpKTtcbiAgICB9XG5cbiAgICB0aGlzLmN1cnJlbnRWZWhpY2xlU3BlZWRLbUhvdXIgPSAzLjYgKiBjaGFzc2lzQm9keS52ZWxvY2l0eS5sZW5ndGgoKTtcbiAgICBjb25zdCBmb3J3YXJkV29ybGQgPSBuZXcgVmVjMygpO1xuICAgIHRoaXMuZ2V0VmVoaWNsZUF4aXNXb3JsZCh0aGlzLmluZGV4Rm9yd2FyZEF4aXMsIGZvcndhcmRXb3JsZCk7XG5cbiAgICBpZiAoZm9yd2FyZFdvcmxkLmRvdChjaGFzc2lzQm9keS52ZWxvY2l0eSkgPCAwKSB7XG4gICAgICB0aGlzLmN1cnJlbnRWZWhpY2xlU3BlZWRLbUhvdXIgKj0gLTE7XG4gICAgfSAvLyBzaW11bGF0ZSBzdXNwZW5zaW9uXG5cblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtV2hlZWxzOyBpKyspIHtcbiAgICAgIHRoaXMuY2FzdFJheSh3aGVlbEluZm9zW2ldKTtcbiAgICB9XG5cbiAgICB0aGlzLnVwZGF0ZVN1c3BlbnNpb24odGltZVN0ZXApO1xuICAgIGNvbnN0IGltcHVsc2UgPSBuZXcgVmVjMygpO1xuICAgIGNvbnN0IHJlbHBvcyA9IG5ldyBWZWMzKCk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVdoZWVsczsgaSsrKSB7XG4gICAgICAvL2FwcGx5IHN1c3BlbnNpb24gZm9yY2VcbiAgICAgIGNvbnN0IHdoZWVsID0gd2hlZWxJbmZvc1tpXTtcbiAgICAgIGxldCBzdXNwZW5zaW9uRm9yY2UgPSB3aGVlbC5zdXNwZW5zaW9uRm9yY2U7XG5cbiAgICAgIGlmIChzdXNwZW5zaW9uRm9yY2UgPiB3aGVlbC5tYXhTdXNwZW5zaW9uRm9yY2UpIHtcbiAgICAgICAgc3VzcGVuc2lvbkZvcmNlID0gd2hlZWwubWF4U3VzcGVuc2lvbkZvcmNlO1xuICAgICAgfVxuXG4gICAgICB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkLnNjYWxlKHN1c3BlbnNpb25Gb3JjZSAqIHRpbWVTdGVwLCBpbXB1bHNlKTtcbiAgICAgIHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZC52c3ViKGNoYXNzaXNCb2R5LnBvc2l0aW9uLCByZWxwb3MpO1xuICAgICAgY2hhc3Npc0JvZHkuYXBwbHlJbXB1bHNlKGltcHVsc2UsIHJlbHBvcyk7XG4gICAgfVxuXG4gICAgdGhpcy51cGRhdGVGcmljdGlvbih0aW1lU3RlcCk7XG4gICAgY29uc3QgaGl0Tm9ybWFsV29ybGRTY2FsZWRXaXRoUHJvaiA9IG5ldyBWZWMzKCk7XG4gICAgY29uc3QgZndkID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCB2ZWwgPSBuZXcgVmVjMygpO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1XaGVlbHM7IGkrKykge1xuICAgICAgY29uc3Qgd2hlZWwgPSB3aGVlbEluZm9zW2ldOyAvL2NvbnN0IHJlbHBvcyA9IG5ldyBWZWMzKCk7XG4gICAgICAvL3doZWVsLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRXb3JsZC52c3ViKGNoYXNzaXNCb2R5LnBvc2l0aW9uLCByZWxwb3MpO1xuXG4gICAgICBjaGFzc2lzQm9keS5nZXRWZWxvY2l0eUF0V29ybGRQb2ludCh3aGVlbC5jaGFzc2lzQ29ubmVjdGlvblBvaW50V29ybGQsIHZlbCk7IC8vIEhhY2sgdG8gZ2V0IHRoZSByb3RhdGlvbiBpbiB0aGUgY29ycmVjdCBkaXJlY3Rpb25cblxuICAgICAgbGV0IG0gPSAxO1xuXG4gICAgICBzd2l0Y2ggKHRoaXMuaW5kZXhVcEF4aXMpIHtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgIG0gPSAtMTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgaWYgKHdoZWVsLmlzSW5Db250YWN0KSB7XG4gICAgICAgIHRoaXMuZ2V0VmVoaWNsZUF4aXNXb3JsZCh0aGlzLmluZGV4Rm9yd2FyZEF4aXMsIGZ3ZCk7XG4gICAgICAgIGNvbnN0IHByb2ogPSBmd2QuZG90KHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0Tm9ybWFsV29ybGQpO1xuICAgICAgICB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkLnNjYWxlKHByb2osIGhpdE5vcm1hbFdvcmxkU2NhbGVkV2l0aFByb2opO1xuICAgICAgICBmd2QudnN1YihoaXROb3JtYWxXb3JsZFNjYWxlZFdpdGhQcm9qLCBmd2QpO1xuICAgICAgICBjb25zdCBwcm9qMiA9IGZ3ZC5kb3QodmVsKTtcbiAgICAgICAgd2hlZWwuZGVsdGFSb3RhdGlvbiA9IG0gKiBwcm9qMiAqIHRpbWVTdGVwIC8gd2hlZWwucmFkaXVzO1xuICAgICAgfVxuXG4gICAgICBpZiAoKHdoZWVsLnNsaWRpbmcgfHwgIXdoZWVsLmlzSW5Db250YWN0KSAmJiB3aGVlbC5lbmdpbmVGb3JjZSAhPT0gMCAmJiB3aGVlbC51c2VDdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkKSB7XG4gICAgICAgIC8vIEFwcGx5IGN1c3RvbSByb3RhdGlvbiB3aGVuIGFjY2VsZXJhdGluZyBhbmQgc2xpZGluZ1xuICAgICAgICB3aGVlbC5kZWx0YVJvdGF0aW9uID0gKHdoZWVsLmVuZ2luZUZvcmNlID4gMCA/IDEgOiAtMSkgKiB3aGVlbC5jdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkICogdGltZVN0ZXA7XG4gICAgICB9IC8vIExvY2sgd2hlZWxzXG5cblxuICAgICAgaWYgKE1hdGguYWJzKHdoZWVsLmJyYWtlKSA+IE1hdGguYWJzKHdoZWVsLmVuZ2luZUZvcmNlKSkge1xuICAgICAgICB3aGVlbC5kZWx0YVJvdGF0aW9uID0gMDtcbiAgICAgIH1cblxuICAgICAgd2hlZWwucm90YXRpb24gKz0gd2hlZWwuZGVsdGFSb3RhdGlvbjsgLy8gVXNlIHRoZSBvbGQgdmFsdWVcblxuICAgICAgd2hlZWwuZGVsdGFSb3RhdGlvbiAqPSAwLjk5OyAvLyBkYW1waW5nIG9mIHJvdGF0aW9uIHdoZW4gbm90IGluIGNvbnRhY3RcbiAgICB9XG4gIH1cblxuICB1cGRhdGVTdXNwZW5zaW9uKGRlbHRhVGltZSkge1xuICAgIGNvbnN0IGNoYXNzaXNCb2R5ID0gdGhpcy5jaGFzc2lzQm9keTtcbiAgICBjb25zdCBjaGFzc2lzTWFzcyA9IGNoYXNzaXNCb2R5Lm1hc3M7XG4gICAgY29uc3Qgd2hlZWxJbmZvcyA9IHRoaXMud2hlZWxJbmZvcztcbiAgICBjb25zdCBudW1XaGVlbHMgPSB3aGVlbEluZm9zLmxlbmd0aDtcblxuICAgIGZvciAobGV0IHdfaXQgPSAwOyB3X2l0IDwgbnVtV2hlZWxzOyB3X2l0KyspIHtcbiAgICAgIGNvbnN0IHdoZWVsID0gd2hlZWxJbmZvc1t3X2l0XTtcblxuICAgICAgaWYgKHdoZWVsLmlzSW5Db250YWN0KSB7XG4gICAgICAgIGxldCBmb3JjZTsgLy8gU3ByaW5nXG5cbiAgICAgICAgY29uc3Qgc3VzcF9sZW5ndGggPSB3aGVlbC5zdXNwZW5zaW9uUmVzdExlbmd0aDtcbiAgICAgICAgY29uc3QgY3VycmVudF9sZW5ndGggPSB3aGVlbC5zdXNwZW5zaW9uTGVuZ3RoO1xuICAgICAgICBjb25zdCBsZW5ndGhfZGlmZiA9IHN1c3BfbGVuZ3RoIC0gY3VycmVudF9sZW5ndGg7XG4gICAgICAgIGZvcmNlID0gd2hlZWwuc3VzcGVuc2lvblN0aWZmbmVzcyAqIGxlbmd0aF9kaWZmICogd2hlZWwuY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uOyAvLyBEYW1wZXJcblxuICAgICAgICBjb25zdCBwcm9qZWN0ZWRfcmVsX3ZlbCA9IHdoZWVsLnN1c3BlbnNpb25SZWxhdGl2ZVZlbG9jaXR5O1xuICAgICAgICBsZXQgc3VzcF9kYW1waW5nO1xuXG4gICAgICAgIGlmIChwcm9qZWN0ZWRfcmVsX3ZlbCA8IDApIHtcbiAgICAgICAgICBzdXNwX2RhbXBpbmcgPSB3aGVlbC5kYW1waW5nQ29tcHJlc3Npb247XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3VzcF9kYW1waW5nID0gd2hlZWwuZGFtcGluZ1JlbGF4YXRpb247XG4gICAgICAgIH1cblxuICAgICAgICBmb3JjZSAtPSBzdXNwX2RhbXBpbmcgKiBwcm9qZWN0ZWRfcmVsX3ZlbDtcbiAgICAgICAgd2hlZWwuc3VzcGVuc2lvbkZvcmNlID0gZm9yY2UgKiBjaGFzc2lzTWFzcztcblxuICAgICAgICBpZiAod2hlZWwuc3VzcGVuc2lvbkZvcmNlIDwgMCkge1xuICAgICAgICAgIHdoZWVsLnN1c3BlbnNpb25Gb3JjZSA9IDA7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdoZWVsLnN1c3BlbnNpb25Gb3JjZSA9IDA7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBSZW1vdmUgdGhlIHZlaGljbGUgaW5jbHVkaW5nIGl0cyBjb25zdHJhaW50cyBmcm9tIHRoZSB3b3JsZC5cbiAgICovXG5cblxuICByZW1vdmVGcm9tV29ybGQod29ybGQpIHtcbiAgICB0aGlzLmNvbnN0cmFpbnRzO1xuICAgIHdvcmxkLnJlbW92ZUJvZHkodGhpcy5jaGFzc2lzQm9keSk7XG4gICAgd29ybGQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncHJlU3RlcCcsIHRoaXMucHJlU3RlcENhbGxiYWNrKTtcbiAgICB0aGlzLndvcmxkID0gbnVsbDtcbiAgfVxuXG4gIGNhc3RSYXkod2hlZWwpIHtcbiAgICBjb25zdCByYXl2ZWN0b3IgPSBjYXN0UmF5X3JheXZlY3RvcjtcbiAgICBjb25zdCB0YXJnZXQgPSBjYXN0UmF5X3RhcmdldDtcbiAgICB0aGlzLnVwZGF0ZVdoZWVsVHJhbnNmb3JtV29ybGQod2hlZWwpO1xuICAgIGNvbnN0IGNoYXNzaXNCb2R5ID0gdGhpcy5jaGFzc2lzQm9keTtcbiAgICBsZXQgZGVwdGggPSAtMTtcbiAgICBjb25zdCByYXlsZW4gPSB3aGVlbC5zdXNwZW5zaW9uUmVzdExlbmd0aCArIHdoZWVsLnJhZGl1cztcbiAgICB3aGVlbC5kaXJlY3Rpb25Xb3JsZC5zY2FsZShyYXlsZW4sIHJheXZlY3Rvcik7XG4gICAgY29uc3Qgc291cmNlID0gd2hlZWwuY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludFdvcmxkO1xuICAgIHNvdXJjZS52YWRkKHJheXZlY3RvciwgdGFyZ2V0KTtcbiAgICBjb25zdCByYXljYXN0UmVzdWx0ID0gd2hlZWwucmF5Y2FzdFJlc3VsdDtcbiAgICByYXljYXN0UmVzdWx0LnJlc2V0KCk7IC8vIFR1cm4gb2ZmIHJheSBjb2xsaXNpb24gd2l0aCB0aGUgY2hhc3NpcyB0ZW1wb3JhcmlseVxuXG4gICAgY29uc3Qgb2xkU3RhdGUgPSBjaGFzc2lzQm9keS5jb2xsaXNpb25SZXNwb25zZTtcbiAgICBjaGFzc2lzQm9keS5jb2xsaXNpb25SZXNwb25zZSA9IGZhbHNlOyAvLyBDYXN0IHJheSBhZ2FpbnN0IHdvcmxkXG5cbiAgICB0aGlzLndvcmxkLnJheVRlc3Qoc291cmNlLCB0YXJnZXQsIHJheWNhc3RSZXN1bHQpO1xuICAgIGNoYXNzaXNCb2R5LmNvbGxpc2lvblJlc3BvbnNlID0gb2xkU3RhdGU7XG4gICAgY29uc3Qgb2JqZWN0ID0gcmF5Y2FzdFJlc3VsdC5ib2R5O1xuICAgIHdoZWVsLnJheWNhc3RSZXN1bHQuZ3JvdW5kT2JqZWN0ID0gMDtcblxuICAgIGlmIChvYmplY3QpIHtcbiAgICAgIGRlcHRoID0gcmF5Y2FzdFJlc3VsdC5kaXN0YW5jZTtcbiAgICAgIHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0Tm9ybWFsV29ybGQgPSByYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkO1xuICAgICAgd2hlZWwuaXNJbkNvbnRhY3QgPSB0cnVlO1xuICAgICAgY29uc3QgaGl0RGlzdGFuY2UgPSByYXljYXN0UmVzdWx0LmRpc3RhbmNlO1xuICAgICAgd2hlZWwuc3VzcGVuc2lvbkxlbmd0aCA9IGhpdERpc3RhbmNlIC0gd2hlZWwucmFkaXVzOyAvLyBjbGFtcCBvbiBtYXggc3VzcGVuc2lvbiB0cmF2ZWxcblxuICAgICAgY29uc3QgbWluU3VzcGVuc2lvbkxlbmd0aCA9IHdoZWVsLnN1c3BlbnNpb25SZXN0TGVuZ3RoIC0gd2hlZWwubWF4U3VzcGVuc2lvblRyYXZlbDtcbiAgICAgIGNvbnN0IG1heFN1c3BlbnNpb25MZW5ndGggPSB3aGVlbC5zdXNwZW5zaW9uUmVzdExlbmd0aCArIHdoZWVsLm1heFN1c3BlbnNpb25UcmF2ZWw7XG5cbiAgICAgIGlmICh3aGVlbC5zdXNwZW5zaW9uTGVuZ3RoIDwgbWluU3VzcGVuc2lvbkxlbmd0aCkge1xuICAgICAgICB3aGVlbC5zdXNwZW5zaW9uTGVuZ3RoID0gbWluU3VzcGVuc2lvbkxlbmd0aDtcbiAgICAgIH1cblxuICAgICAgaWYgKHdoZWVsLnN1c3BlbnNpb25MZW5ndGggPiBtYXhTdXNwZW5zaW9uTGVuZ3RoKSB7XG4gICAgICAgIHdoZWVsLnN1c3BlbnNpb25MZW5ndGggPSBtYXhTdXNwZW5zaW9uTGVuZ3RoO1xuICAgICAgICB3aGVlbC5yYXljYXN0UmVzdWx0LnJlc2V0KCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGRlbm9taW5hdG9yID0gd2hlZWwucmF5Y2FzdFJlc3VsdC5oaXROb3JtYWxXb3JsZC5kb3Qod2hlZWwuZGlyZWN0aW9uV29ybGQpO1xuICAgICAgY29uc3QgY2hhc3Npc192ZWxvY2l0eV9hdF9jb250YWN0UG9pbnQgPSBuZXcgVmVjMygpO1xuICAgICAgY2hhc3Npc0JvZHkuZ2V0VmVsb2NpdHlBdFdvcmxkUG9pbnQod2hlZWwucmF5Y2FzdFJlc3VsdC5oaXRQb2ludFdvcmxkLCBjaGFzc2lzX3ZlbG9jaXR5X2F0X2NvbnRhY3RQb2ludCk7XG4gICAgICBjb25zdCBwcm9qVmVsID0gd2hlZWwucmF5Y2FzdFJlc3VsdC5oaXROb3JtYWxXb3JsZC5kb3QoY2hhc3Npc192ZWxvY2l0eV9hdF9jb250YWN0UG9pbnQpO1xuXG4gICAgICBpZiAoZGVub21pbmF0b3IgPj0gLTAuMSkge1xuICAgICAgICB3aGVlbC5zdXNwZW5zaW9uUmVsYXRpdmVWZWxvY2l0eSA9IDA7XG4gICAgICAgIHdoZWVsLmNsaXBwZWRJbnZDb250YWN0RG90U3VzcGVuc2lvbiA9IDEgLyAwLjE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBpbnYgPSAtMSAvIGRlbm9taW5hdG9yO1xuICAgICAgICB3aGVlbC5zdXNwZW5zaW9uUmVsYXRpdmVWZWxvY2l0eSA9IHByb2pWZWwgKiBpbnY7XG4gICAgICAgIHdoZWVsLmNsaXBwZWRJbnZDb250YWN0RG90U3VzcGVuc2lvbiA9IGludjtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy9wdXQgd2hlZWwgaW5mbyBhcyBpbiByZXN0IHBvc2l0aW9uXG4gICAgICB3aGVlbC5zdXNwZW5zaW9uTGVuZ3RoID0gd2hlZWwuc3VzcGVuc2lvblJlc3RMZW5ndGggKyAwICogd2hlZWwubWF4U3VzcGVuc2lvblRyYXZlbDtcbiAgICAgIHdoZWVsLnN1c3BlbnNpb25SZWxhdGl2ZVZlbG9jaXR5ID0gMC4wO1xuICAgICAgd2hlZWwuZGlyZWN0aW9uV29ybGQuc2NhbGUoLTEsIHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0Tm9ybWFsV29ybGQpO1xuICAgICAgd2hlZWwuY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uID0gMS4wO1xuICAgIH1cblxuICAgIHJldHVybiBkZXB0aDtcbiAgfVxuXG4gIHVwZGF0ZVdoZWVsVHJhbnNmb3JtV29ybGQod2hlZWwpIHtcbiAgICB3aGVlbC5pc0luQ29udGFjdCA9IGZhbHNlO1xuICAgIGNvbnN0IGNoYXNzaXNCb2R5ID0gdGhpcy5jaGFzc2lzQm9keTtcbiAgICBjaGFzc2lzQm9keS5wb2ludFRvV29ybGRGcmFtZSh3aGVlbC5jaGFzc2lzQ29ubmVjdGlvblBvaW50TG9jYWwsIHdoZWVsLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRXb3JsZCk7XG4gICAgY2hhc3Npc0JvZHkudmVjdG9yVG9Xb3JsZEZyYW1lKHdoZWVsLmRpcmVjdGlvbkxvY2FsLCB3aGVlbC5kaXJlY3Rpb25Xb3JsZCk7XG4gICAgY2hhc3Npc0JvZHkudmVjdG9yVG9Xb3JsZEZyYW1lKHdoZWVsLmF4bGVMb2NhbCwgd2hlZWwuYXhsZVdvcmxkKTtcbiAgfVxuICAvKipcbiAgICogVXBkYXRlIG9uZSBvZiB0aGUgd2hlZWwgdHJhbnNmb3JtLlxuICAgKiBOb3RlIHdoZW4gcmVuZGVyaW5nIHdoZWVsczogZHVyaW5nIGVhY2ggc3RlcCwgd2hlZWwgdHJhbnNmb3JtcyBhcmUgdXBkYXRlZCBCRUZPUkUgdGhlIGNoYXNzaXM7IGllLiB0aGVpciBwb3NpdGlvbiBiZWNvbWVzIGludmFsaWQgYWZ0ZXIgdGhlIHN0ZXAuIFRodXMgd2hlbiB5b3UgcmVuZGVyIHdoZWVscywgeW91IG11c3QgdXBkYXRlIHdoZWVsIHRyYW5zZm9ybXMgYmVmb3JlIHJlbmRlcmluZyB0aGVtLiBTZWUgcmF5Y2FzdFZlaGljbGUgZGVtbyBmb3IgYW4gZXhhbXBsZS5cbiAgICogQHBhcmFtIHdoZWVsSW5kZXggVGhlIHdoZWVsIGluZGV4IHRvIHVwZGF0ZS5cbiAgICovXG5cblxuICB1cGRhdGVXaGVlbFRyYW5zZm9ybSh3aGVlbEluZGV4KSB7XG4gICAgY29uc3QgdXAgPSB0bXBWZWM0O1xuICAgIGNvbnN0IHJpZ2h0ID0gdG1wVmVjNTtcbiAgICBjb25zdCBmd2QgPSB0bXBWZWM2O1xuICAgIGNvbnN0IHdoZWVsID0gdGhpcy53aGVlbEluZm9zW3doZWVsSW5kZXhdO1xuICAgIHRoaXMudXBkYXRlV2hlZWxUcmFuc2Zvcm1Xb3JsZCh3aGVlbCk7XG4gICAgd2hlZWwuZGlyZWN0aW9uTG9jYWwuc2NhbGUoLTEsIHVwKTtcbiAgICByaWdodC5jb3B5KHdoZWVsLmF4bGVMb2NhbCk7XG4gICAgdXAuY3Jvc3MocmlnaHQsIGZ3ZCk7XG4gICAgZndkLm5vcm1hbGl6ZSgpO1xuICAgIHJpZ2h0Lm5vcm1hbGl6ZSgpOyAvLyBSb3RhdGUgYXJvdW5kIHN0ZWVyaW5nIG92ZXIgdGhlIHdoZWVsQXhsZVxuXG4gICAgY29uc3Qgc3RlZXJpbmcgPSB3aGVlbC5zdGVlcmluZztcbiAgICBjb25zdCBzdGVlcmluZ09ybiA9IG5ldyBRdWF0ZXJuaW9uKCk7XG4gICAgc3RlZXJpbmdPcm4uc2V0RnJvbUF4aXNBbmdsZSh1cCwgc3RlZXJpbmcpO1xuICAgIGNvbnN0IHJvdGF0aW5nT3JuID0gbmV3IFF1YXRlcm5pb24oKTtcbiAgICByb3RhdGluZ09ybi5zZXRGcm9tQXhpc0FuZ2xlKHJpZ2h0LCB3aGVlbC5yb3RhdGlvbik7IC8vIFdvcmxkIHJvdGF0aW9uIG9mIHRoZSB3aGVlbFxuXG4gICAgY29uc3QgcSA9IHdoZWVsLndvcmxkVHJhbnNmb3JtLnF1YXRlcm5pb247XG4gICAgdGhpcy5jaGFzc2lzQm9keS5xdWF0ZXJuaW9uLm11bHQoc3RlZXJpbmdPcm4sIHEpO1xuICAgIHEubXVsdChyb3RhdGluZ09ybiwgcSk7XG4gICAgcS5ub3JtYWxpemUoKTsgLy8gd29ybGQgcG9zaXRpb24gb2YgdGhlIHdoZWVsXG5cbiAgICBjb25zdCBwID0gd2hlZWwud29ybGRUcmFuc2Zvcm0ucG9zaXRpb247XG4gICAgcC5jb3B5KHdoZWVsLmRpcmVjdGlvbldvcmxkKTtcbiAgICBwLnNjYWxlKHdoZWVsLnN1c3BlbnNpb25MZW5ndGgsIHApO1xuICAgIHAudmFkZCh3aGVlbC5jaGFzc2lzQ29ubmVjdGlvblBvaW50V29ybGQsIHApO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIHdvcmxkIHRyYW5zZm9ybSBvZiBvbmUgb2YgdGhlIHdoZWVsc1xuICAgKi9cblxuXG4gIGdldFdoZWVsVHJhbnNmb3JtV29ybGQod2hlZWxJbmRleCkge1xuICAgIHJldHVybiB0aGlzLndoZWVsSW5mb3Nbd2hlZWxJbmRleF0ud29ybGRUcmFuc2Zvcm07XG4gIH1cblxuICB1cGRhdGVGcmljdGlvbih0aW1lU3RlcCkge1xuICAgIGNvbnN0IHN1cmZOb3JtYWxXU19zY2FsZWRfcHJvaiA9IHVwZGF0ZUZyaWN0aW9uX3N1cmZOb3JtYWxXU19zY2FsZWRfcHJvajsgLy9jYWxjdWxhdGUgdGhlIGltcHVsc2UsIHNvIHRoYXQgdGhlIHdoZWVscyBkb24ndCBtb3ZlIHNpZGV3YXJkc1xuXG4gICAgY29uc3Qgd2hlZWxJbmZvcyA9IHRoaXMud2hlZWxJbmZvcztcbiAgICBjb25zdCBudW1XaGVlbHMgPSB3aGVlbEluZm9zLmxlbmd0aDtcbiAgICBjb25zdCBjaGFzc2lzQm9keSA9IHRoaXMuY2hhc3Npc0JvZHk7XG4gICAgY29uc3QgZm9yd2FyZFdTID0gdXBkYXRlRnJpY3Rpb25fZm9yd2FyZFdTO1xuICAgIGNvbnN0IGF4bGUgPSB1cGRhdGVGcmljdGlvbl9heGxlO1xuICAgIHRoaXMubnVtV2hlZWxzT25Hcm91bmQgPSAwO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1XaGVlbHM7IGkrKykge1xuICAgICAgY29uc3Qgd2hlZWwgPSB3aGVlbEluZm9zW2ldO1xuICAgICAgY29uc3QgZ3JvdW5kT2JqZWN0ID0gd2hlZWwucmF5Y2FzdFJlc3VsdC5ib2R5O1xuXG4gICAgICBpZiAoZ3JvdW5kT2JqZWN0KSB7XG4gICAgICAgIHRoaXMubnVtV2hlZWxzT25Hcm91bmQrKztcbiAgICAgIH1cblxuICAgICAgd2hlZWwuc2lkZUltcHVsc2UgPSAwO1xuICAgICAgd2hlZWwuZm9yd2FyZEltcHVsc2UgPSAwO1xuXG4gICAgICBpZiAoIWZvcndhcmRXU1tpXSkge1xuICAgICAgICBmb3J3YXJkV1NbaV0gPSBuZXcgVmVjMygpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWF4bGVbaV0pIHtcbiAgICAgICAgYXhsZVtpXSA9IG5ldyBWZWMzKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1XaGVlbHM7IGkrKykge1xuICAgICAgY29uc3Qgd2hlZWwgPSB3aGVlbEluZm9zW2ldO1xuICAgICAgY29uc3QgZ3JvdW5kT2JqZWN0ID0gd2hlZWwucmF5Y2FzdFJlc3VsdC5ib2R5O1xuXG4gICAgICBpZiAoZ3JvdW5kT2JqZWN0KSB7XG4gICAgICAgIGNvbnN0IGF4bGVpID0gYXhsZVtpXTtcbiAgICAgICAgY29uc3Qgd2hlZWxUcmFucyA9IHRoaXMuZ2V0V2hlZWxUcmFuc2Zvcm1Xb3JsZChpKTsgLy8gR2V0IHdvcmxkIGF4bGVcblxuICAgICAgICB3aGVlbFRyYW5zLnZlY3RvclRvV29ybGRGcmFtZShkaXJlY3Rpb25zW3RoaXMuaW5kZXhSaWdodEF4aXNdLCBheGxlaSk7XG4gICAgICAgIGNvbnN0IHN1cmZOb3JtYWxXUyA9IHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0Tm9ybWFsV29ybGQ7XG4gICAgICAgIGNvbnN0IHByb2ogPSBheGxlaS5kb3Qoc3VyZk5vcm1hbFdTKTtcbiAgICAgICAgc3VyZk5vcm1hbFdTLnNjYWxlKHByb2osIHN1cmZOb3JtYWxXU19zY2FsZWRfcHJvaik7XG4gICAgICAgIGF4bGVpLnZzdWIoc3VyZk5vcm1hbFdTX3NjYWxlZF9wcm9qLCBheGxlaSk7XG4gICAgICAgIGF4bGVpLm5vcm1hbGl6ZSgpO1xuICAgICAgICBzdXJmTm9ybWFsV1MuY3Jvc3MoYXhsZWksIGZvcndhcmRXU1tpXSk7XG4gICAgICAgIGZvcndhcmRXU1tpXS5ub3JtYWxpemUoKTtcbiAgICAgICAgd2hlZWwuc2lkZUltcHVsc2UgPSByZXNvbHZlU2luZ2xlQmlsYXRlcmFsKGNoYXNzaXNCb2R5LCB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdFBvaW50V29ybGQsIGdyb3VuZE9iamVjdCwgd2hlZWwucmF5Y2FzdFJlc3VsdC5oaXRQb2ludFdvcmxkLCBheGxlaSk7XG4gICAgICAgIHdoZWVsLnNpZGVJbXB1bHNlICo9IHNpZGVGcmljdGlvblN0aWZmbmVzczI7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3Qgc2lkZUZhY3RvciA9IDE7XG4gICAgY29uc3QgZndkRmFjdG9yID0gMC41O1xuICAgIHRoaXMuc2xpZGluZyA9IGZhbHNlO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1XaGVlbHM7IGkrKykge1xuICAgICAgY29uc3Qgd2hlZWwgPSB3aGVlbEluZm9zW2ldO1xuICAgICAgY29uc3QgZ3JvdW5kT2JqZWN0ID0gd2hlZWwucmF5Y2FzdFJlc3VsdC5ib2R5O1xuICAgICAgbGV0IHJvbGxpbmdGcmljdGlvbiA9IDA7XG4gICAgICB3aGVlbC5zbGlwSW5mbyA9IDE7XG5cbiAgICAgIGlmIChncm91bmRPYmplY3QpIHtcbiAgICAgICAgY29uc3QgZGVmYXVsdFJvbGxpbmdGcmljdGlvbkltcHVsc2UgPSAwO1xuICAgICAgICBjb25zdCBtYXhJbXB1bHNlID0gd2hlZWwuYnJha2UgPyB3aGVlbC5icmFrZSA6IGRlZmF1bHRSb2xsaW5nRnJpY3Rpb25JbXB1bHNlOyAvLyBidFdoZWVsQ29udGFjdFBvaW50IGNvbnRhY3RQdChjaGFzc2lzQm9keSxncm91bmRPYmplY3Qsd2hlZWxJbmZyYXljYXN0SW5mby5oaXRQb2ludFdvcmxkLGZvcndhcmRXU1t3aGVlbF0sbWF4SW1wdWxzZSk7XG4gICAgICAgIC8vIHJvbGxpbmdGcmljdGlvbiA9IGNhbGNSb2xsaW5nRnJpY3Rpb24oY29udGFjdFB0KTtcblxuICAgICAgICByb2xsaW5nRnJpY3Rpb24gPSBjYWxjUm9sbGluZ0ZyaWN0aW9uKGNoYXNzaXNCb2R5LCBncm91bmRPYmplY3QsIHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZCwgZm9yd2FyZFdTW2ldLCBtYXhJbXB1bHNlKTtcbiAgICAgICAgcm9sbGluZ0ZyaWN0aW9uICs9IHdoZWVsLmVuZ2luZUZvcmNlICogdGltZVN0ZXA7IC8vIHJvbGxpbmdGcmljdGlvbiA9IDA7XG5cbiAgICAgICAgY29uc3QgZmFjdG9yID0gbWF4SW1wdWxzZSAvIHJvbGxpbmdGcmljdGlvbjtcbiAgICAgICAgd2hlZWwuc2xpcEluZm8gKj0gZmFjdG9yO1xuICAgICAgfSAvL3N3aXRjaCBiZXR3ZWVuIGFjdGl2ZSByb2xsaW5nICh0aHJvdHRsZSksIGJyYWtpbmcgYW5kIG5vbi1hY3RpdmUgcm9sbGluZyBmcmljdGlvbiAobnRocm90dGxlL2JyZWFrKVxuXG5cbiAgICAgIHdoZWVsLmZvcndhcmRJbXB1bHNlID0gMDtcbiAgICAgIHdoZWVsLnNraWRJbmZvID0gMTtcblxuICAgICAgaWYgKGdyb3VuZE9iamVjdCkge1xuICAgICAgICB3aGVlbC5za2lkSW5mbyA9IDE7XG4gICAgICAgIGNvbnN0IG1heGltcCA9IHdoZWVsLnN1c3BlbnNpb25Gb3JjZSAqIHRpbWVTdGVwICogd2hlZWwuZnJpY3Rpb25TbGlwO1xuICAgICAgICBjb25zdCBtYXhpbXBTaWRlID0gbWF4aW1wO1xuICAgICAgICBjb25zdCBtYXhpbXBTcXVhcmVkID0gbWF4aW1wICogbWF4aW1wU2lkZTtcbiAgICAgICAgd2hlZWwuZm9yd2FyZEltcHVsc2UgPSByb2xsaW5nRnJpY3Rpb247IC8vd2hlZWxJbmZvLmVuZ2luZUZvcmNlKiB0aW1lU3RlcDtcblxuICAgICAgICBjb25zdCB4ID0gd2hlZWwuZm9yd2FyZEltcHVsc2UgKiBmd2RGYWN0b3IgLyB3aGVlbC5mb3J3YXJkQWNjZWxlcmF0aW9uO1xuICAgICAgICBjb25zdCB5ID0gd2hlZWwuc2lkZUltcHVsc2UgKiBzaWRlRmFjdG9yIC8gd2hlZWwuc2lkZUFjY2VsZXJhdGlvbjtcbiAgICAgICAgY29uc3QgaW1wdWxzZVNxdWFyZWQgPSB4ICogeCArIHkgKiB5O1xuICAgICAgICB3aGVlbC5zbGlkaW5nID0gZmFsc2U7XG5cbiAgICAgICAgaWYgKGltcHVsc2VTcXVhcmVkID4gbWF4aW1wU3F1YXJlZCkge1xuICAgICAgICAgIHRoaXMuc2xpZGluZyA9IHRydWU7XG4gICAgICAgICAgd2hlZWwuc2xpZGluZyA9IHRydWU7XG4gICAgICAgICAgY29uc3QgZmFjdG9yID0gbWF4aW1wIC8gTWF0aC5zcXJ0KGltcHVsc2VTcXVhcmVkKTtcbiAgICAgICAgICB3aGVlbC5za2lkSW5mbyAqPSBmYWN0b3I7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5zbGlkaW5nKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVdoZWVsczsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHdoZWVsID0gd2hlZWxJbmZvc1tpXTtcblxuICAgICAgICBpZiAod2hlZWwuc2lkZUltcHVsc2UgIT09IDApIHtcbiAgICAgICAgICBpZiAod2hlZWwuc2tpZEluZm8gPCAxKSB7XG4gICAgICAgICAgICB3aGVlbC5mb3J3YXJkSW1wdWxzZSAqPSB3aGVlbC5za2lkSW5mbztcbiAgICAgICAgICAgIHdoZWVsLnNpZGVJbXB1bHNlICo9IHdoZWVsLnNraWRJbmZvO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gLy8gYXBwbHkgdGhlIGltcHVsc2VzXG5cblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtV2hlZWxzOyBpKyspIHtcbiAgICAgIGNvbnN0IHdoZWVsID0gd2hlZWxJbmZvc1tpXTtcbiAgICAgIGNvbnN0IHJlbF9wb3MgPSBuZXcgVmVjMygpO1xuICAgICAgd2hlZWwucmF5Y2FzdFJlc3VsdC5oaXRQb2ludFdvcmxkLnZzdWIoY2hhc3Npc0JvZHkucG9zaXRpb24sIHJlbF9wb3MpOyAvLyBjYW5ub25zIGFwcGx5aW1wdWxzZSBpcyB1c2luZyB3b3JsZCBjb29yZCBmb3IgdGhlIHBvc2l0aW9uXG4gICAgICAvL3JlbF9wb3MuY29weSh3aGVlbC5yYXljYXN0UmVzdWx0LmhpdFBvaW50V29ybGQpO1xuXG4gICAgICBpZiAod2hlZWwuZm9yd2FyZEltcHVsc2UgIT09IDApIHtcbiAgICAgICAgY29uc3QgaW1wdWxzZSA9IG5ldyBWZWMzKCk7XG4gICAgICAgIGZvcndhcmRXU1tpXS5zY2FsZSh3aGVlbC5mb3J3YXJkSW1wdWxzZSwgaW1wdWxzZSk7XG4gICAgICAgIGNoYXNzaXNCb2R5LmFwcGx5SW1wdWxzZShpbXB1bHNlLCByZWxfcG9zKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHdoZWVsLnNpZGVJbXB1bHNlICE9PSAwKSB7XG4gICAgICAgIGNvbnN0IGdyb3VuZE9iamVjdCA9IHdoZWVsLnJheWNhc3RSZXN1bHQuYm9keTtcbiAgICAgICAgY29uc3QgcmVsX3BvczIgPSBuZXcgVmVjMygpO1xuICAgICAgICB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdFBvaW50V29ybGQudnN1Yihncm91bmRPYmplY3QucG9zaXRpb24sIHJlbF9wb3MyKTsgLy9yZWxfcG9zMi5jb3B5KHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZCk7XG5cbiAgICAgICAgY29uc3Qgc2lkZUltcCA9IG5ldyBWZWMzKCk7XG4gICAgICAgIGF4bGVbaV0uc2NhbGUod2hlZWwuc2lkZUltcHVsc2UsIHNpZGVJbXApOyAvLyBTY2FsZSB0aGUgcmVsYXRpdmUgcG9zaXRpb24gaW4gdGhlIHVwIGRpcmVjdGlvbiB3aXRoIHJvbGxJbmZsdWVuY2UuXG4gICAgICAgIC8vIElmIHJvbGxJbmZsdWVuY2UgaXMgMSwgdGhlIGltcHVsc2Ugd2lsbCBiZSBhcHBsaWVkIG9uIHRoZSBoaXRQb2ludCAoZWFzeSB0byByb2xsIG92ZXIpLCBpZiBpdCBpcyB6ZXJvIGl0IHdpbGwgYmUgYXBwbGllZCBpbiB0aGUgc2FtZSBwbGFuZSBhcyB0aGUgY2VudGVyIG9mIG1hc3MgKG5vdCBlYXN5IHRvIHJvbGwgb3ZlcikuXG5cbiAgICAgICAgY2hhc3Npc0JvZHkudmVjdG9yVG9Mb2NhbEZyYW1lKHJlbF9wb3MsIHJlbF9wb3MpO1xuICAgICAgICByZWxfcG9zWyd4eXonW3RoaXMuaW5kZXhVcEF4aXNdXSAqPSB3aGVlbC5yb2xsSW5mbHVlbmNlO1xuICAgICAgICBjaGFzc2lzQm9keS52ZWN0b3JUb1dvcmxkRnJhbWUocmVsX3BvcywgcmVsX3Bvcyk7XG4gICAgICAgIGNoYXNzaXNCb2R5LmFwcGx5SW1wdWxzZShzaWRlSW1wLCByZWxfcG9zKTsgLy9hcHBseSBmcmljdGlvbiBpbXB1bHNlIG9uIHRoZSBncm91bmRcblxuICAgICAgICBzaWRlSW1wLnNjYWxlKC0xLCBzaWRlSW1wKTtcbiAgICAgICAgZ3JvdW5kT2JqZWN0LmFwcGx5SW1wdWxzZShzaWRlSW1wLCByZWxfcG9zMik7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbn1cbmNvbnN0IHRtcFZlYzQgPSBuZXcgVmVjMygpO1xuY29uc3QgdG1wVmVjNSA9IG5ldyBWZWMzKCk7XG5jb25zdCB0bXBWZWM2ID0gbmV3IFZlYzMoKTtcbm5ldyBSYXkoKTtcbmNvbnN0IGNhc3RSYXlfcmF5dmVjdG9yID0gbmV3IFZlYzMoKTtcbmNvbnN0IGNhc3RSYXlfdGFyZ2V0ID0gbmV3IFZlYzMoKTtcbmNvbnN0IGRpcmVjdGlvbnMgPSBbbmV3IFZlYzMoMSwgMCwgMCksIG5ldyBWZWMzKDAsIDEsIDApLCBuZXcgVmVjMygwLCAwLCAxKV07XG5jb25zdCB1cGRhdGVGcmljdGlvbl9zdXJmTm9ybWFsV1Nfc2NhbGVkX3Byb2ogPSBuZXcgVmVjMygpO1xuY29uc3QgdXBkYXRlRnJpY3Rpb25fYXhsZSA9IFtdO1xuY29uc3QgdXBkYXRlRnJpY3Rpb25fZm9yd2FyZFdTID0gW107XG5jb25zdCBzaWRlRnJpY3Rpb25TdGlmZm5lc3MyID0gMTtcbmNvbnN0IGNhbGNSb2xsaW5nRnJpY3Rpb25fdmVsMSA9IG5ldyBWZWMzKCk7XG5jb25zdCBjYWxjUm9sbGluZ0ZyaWN0aW9uX3ZlbDIgPSBuZXcgVmVjMygpO1xuY29uc3QgY2FsY1JvbGxpbmdGcmljdGlvbl92ZWwgPSBuZXcgVmVjMygpO1xuXG5mdW5jdGlvbiBjYWxjUm9sbGluZ0ZyaWN0aW9uKGJvZHkwLCBib2R5MSwgZnJpY3Rpb25Qb3NXb3JsZCwgZnJpY3Rpb25EaXJlY3Rpb25Xb3JsZCwgbWF4SW1wdWxzZSkge1xuICBsZXQgajEgPSAwO1xuICBjb25zdCBjb250YWN0UG9zV29ybGQgPSBmcmljdGlvblBvc1dvcmxkOyAvLyBjb25zdCByZWxfcG9zMSA9IG5ldyBWZWMzKCk7XG4gIC8vIGNvbnN0IHJlbF9wb3MyID0gbmV3IFZlYzMoKTtcblxuICBjb25zdCB2ZWwxID0gY2FsY1JvbGxpbmdGcmljdGlvbl92ZWwxO1xuICBjb25zdCB2ZWwyID0gY2FsY1JvbGxpbmdGcmljdGlvbl92ZWwyO1xuICBjb25zdCB2ZWwgPSBjYWxjUm9sbGluZ0ZyaWN0aW9uX3ZlbDsgLy8gY29udGFjdFBvc1dvcmxkLnZzdWIoYm9keTAucG9zaXRpb24sIHJlbF9wb3MxKTtcbiAgLy8gY29udGFjdFBvc1dvcmxkLnZzdWIoYm9keTEucG9zaXRpb24sIHJlbF9wb3MyKTtcblxuICBib2R5MC5nZXRWZWxvY2l0eUF0V29ybGRQb2ludChjb250YWN0UG9zV29ybGQsIHZlbDEpO1xuICBib2R5MS5nZXRWZWxvY2l0eUF0V29ybGRQb2ludChjb250YWN0UG9zV29ybGQsIHZlbDIpO1xuICB2ZWwxLnZzdWIodmVsMiwgdmVsKTtcbiAgY29uc3QgdnJlbCA9IGZyaWN0aW9uRGlyZWN0aW9uV29ybGQuZG90KHZlbCk7XG4gIGNvbnN0IGRlbm9tMCA9IGNvbXB1dGVJbXB1bHNlRGVub21pbmF0b3IoYm9keTAsIGZyaWN0aW9uUG9zV29ybGQsIGZyaWN0aW9uRGlyZWN0aW9uV29ybGQpO1xuICBjb25zdCBkZW5vbTEgPSBjb21wdXRlSW1wdWxzZURlbm9taW5hdG9yKGJvZHkxLCBmcmljdGlvblBvc1dvcmxkLCBmcmljdGlvbkRpcmVjdGlvbldvcmxkKTtcbiAgY29uc3QgcmVsYXhhdGlvbiA9IDE7XG4gIGNvbnN0IGphY0RpYWdBQkludiA9IHJlbGF4YXRpb24gLyAoZGVub20wICsgZGVub20xKTsgLy8gY2FsY3VsYXRlIGogdGhhdCBtb3ZlcyB1cyB0byB6ZXJvIHJlbGF0aXZlIHZlbG9jaXR5XG5cbiAgajEgPSAtdnJlbCAqIGphY0RpYWdBQkludjtcblxuICBpZiAobWF4SW1wdWxzZSA8IGoxKSB7XG4gICAgajEgPSBtYXhJbXB1bHNlO1xuICB9XG5cbiAgaWYgKGoxIDwgLW1heEltcHVsc2UpIHtcbiAgICBqMSA9IC1tYXhJbXB1bHNlO1xuICB9XG5cbiAgcmV0dXJuIGoxO1xufVxuXG5jb25zdCBjb21wdXRlSW1wdWxzZURlbm9taW5hdG9yX3IwID0gbmV3IFZlYzMoKTtcbmNvbnN0IGNvbXB1dGVJbXB1bHNlRGVub21pbmF0b3JfYzAgPSBuZXcgVmVjMygpO1xuY29uc3QgY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcl92ZWMgPSBuZXcgVmVjMygpO1xuY29uc3QgY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcl9tID0gbmV3IFZlYzMoKTtcblxuZnVuY3Rpb24gY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcihib2R5LCBwb3MsIG5vcm1hbCkge1xuICBjb25zdCByMCA9IGNvbXB1dGVJbXB1bHNlRGVub21pbmF0b3JfcjA7XG4gIGNvbnN0IGMwID0gY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcl9jMDtcbiAgY29uc3QgdmVjID0gY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcl92ZWM7XG4gIGNvbnN0IG0gPSBjb21wdXRlSW1wdWxzZURlbm9taW5hdG9yX207XG4gIHBvcy52c3ViKGJvZHkucG9zaXRpb24sIHIwKTtcbiAgcjAuY3Jvc3Mobm9ybWFsLCBjMCk7XG4gIGJvZHkuaW52SW5lcnRpYVdvcmxkLnZtdWx0KGMwLCBtKTtcbiAgbS5jcm9zcyhyMCwgdmVjKTtcbiAgcmV0dXJuIGJvZHkuaW52TWFzcyArIG5vcm1hbC5kb3QodmVjKTtcbn1cblxuY29uc3QgcmVzb2x2ZVNpbmdsZUJpbGF0ZXJhbF92ZWwxID0gbmV3IFZlYzMoKTtcbmNvbnN0IHJlc29sdmVTaW5nbGVCaWxhdGVyYWxfdmVsMiA9IG5ldyBWZWMzKCk7XG5jb25zdCByZXNvbHZlU2luZ2xlQmlsYXRlcmFsX3ZlbCA9IG5ldyBWZWMzKCk7IC8vIGJpbGF0ZXJhbCBjb25zdHJhaW50IGJldHdlZW4gdHdvIGR5bmFtaWMgb2JqZWN0c1xuXG5mdW5jdGlvbiByZXNvbHZlU2luZ2xlQmlsYXRlcmFsKGJvZHkxLCBwb3MxLCBib2R5MiwgcG9zMiwgbm9ybWFsKSB7XG4gIGNvbnN0IG5vcm1hbExlblNxciA9IG5vcm1hbC5sZW5ndGhTcXVhcmVkKCk7XG5cbiAgaWYgKG5vcm1hbExlblNxciA+IDEuMSkge1xuICAgIHJldHVybiAwOyAvLyBubyBpbXB1bHNlXG4gIH0gLy8gY29uc3QgcmVsX3BvczEgPSBuZXcgVmVjMygpO1xuICAvLyBjb25zdCByZWxfcG9zMiA9IG5ldyBWZWMzKCk7XG4gIC8vIHBvczEudnN1Yihib2R5MS5wb3NpdGlvbiwgcmVsX3BvczEpO1xuICAvLyBwb3MyLnZzdWIoYm9keTIucG9zaXRpb24sIHJlbF9wb3MyKTtcblxuXG4gIGNvbnN0IHZlbDEgPSByZXNvbHZlU2luZ2xlQmlsYXRlcmFsX3ZlbDE7XG4gIGNvbnN0IHZlbDIgPSByZXNvbHZlU2luZ2xlQmlsYXRlcmFsX3ZlbDI7XG4gIGNvbnN0IHZlbCA9IHJlc29sdmVTaW5nbGVCaWxhdGVyYWxfdmVsO1xuICBib2R5MS5nZXRWZWxvY2l0eUF0V29ybGRQb2ludChwb3MxLCB2ZWwxKTtcbiAgYm9keTIuZ2V0VmVsb2NpdHlBdFdvcmxkUG9pbnQocG9zMiwgdmVsMik7XG4gIHZlbDEudnN1Yih2ZWwyLCB2ZWwpO1xuICBjb25zdCByZWxfdmVsID0gbm9ybWFsLmRvdCh2ZWwpO1xuICBjb25zdCBjb250YWN0RGFtcGluZyA9IDAuMjtcbiAgY29uc3QgbWFzc1Rlcm0gPSAxIC8gKGJvZHkxLmludk1hc3MgKyBib2R5Mi5pbnZNYXNzKTtcbiAgY29uc3QgaW1wdWxzZSA9IC1jb250YWN0RGFtcGluZyAqIHJlbF92ZWwgKiBtYXNzVGVybTtcbiAgcmV0dXJuIGltcHVsc2U7XG59XG5cbi8qKlxuICogU3BoZXJpY2FsIHNoYXBlXG4gKiBAZXhhbXBsZVxuICogICAgIGNvbnN0IHJhZGl1cyA9IDFcbiAqICAgICBjb25zdCBzcGhlcmVTaGFwZSA9IG5ldyBDQU5OT04uU3BoZXJlKHJhZGl1cylcbiAqICAgICBjb25zdCBzcGhlcmVCb2R5ID0gbmV3IENBTk5PTi5Cb2R5KHsgbWFzczogMSwgc2hhcGU6IHNwaGVyZVNoYXBlIH0pXG4gKiAgICAgd29ybGQuYWRkQm9keShzcGhlcmVCb2R5KVxuICovXG5jbGFzcyBTcGhlcmUgZXh0ZW5kcyBTaGFwZSB7XG4gIC8qKlxuICAgKiBUaGUgcmFkaXVzIG9mIHRoZSBzcGhlcmUuXG4gICAqL1xuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0gcmFkaXVzIFRoZSByYWRpdXMgb2YgdGhlIHNwaGVyZSwgYSBub24tbmVnYXRpdmUgbnVtYmVyLlxuICAgKi9cbiAgY29uc3RydWN0b3IocmFkaXVzKSB7XG4gICAgc3VwZXIoe1xuICAgICAgdHlwZTogU2hhcGUudHlwZXMuU1BIRVJFXG4gICAgfSk7XG4gICAgdGhpcy5yYWRpdXMgPSB2b2lkIDA7XG4gICAgdGhpcy5yYWRpdXMgPSByYWRpdXMgIT09IHVuZGVmaW5lZCA/IHJhZGl1cyA6IDEuMDtcblxuICAgIGlmICh0aGlzLnJhZGl1cyA8IDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIHNwaGVyZSByYWRpdXMgY2Fubm90IGJlIG5lZ2F0aXZlLicpO1xuICAgIH1cblxuICAgIHRoaXMudXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKTtcbiAgfVxuICAvKiogY2FsY3VsYXRlTG9jYWxJbmVydGlhICovXG5cblxuICBjYWxjdWxhdGVMb2NhbEluZXJ0aWEobWFzcywgdGFyZ2V0ID0gbmV3IFZlYzMoKSkge1xuICAgIGNvbnN0IEkgPSAyLjAgKiBtYXNzICogdGhpcy5yYWRpdXMgKiB0aGlzLnJhZGl1cyAvIDUuMDtcbiAgICB0YXJnZXQueCA9IEk7XG4gICAgdGFyZ2V0LnkgPSBJO1xuICAgIHRhcmdldC56ID0gSTtcbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9XG4gIC8qKiB2b2x1bWUgKi9cblxuXG4gIHZvbHVtZSgpIHtcbiAgICByZXR1cm4gNC4wICogTWF0aC5QSSAqIE1hdGgucG93KHRoaXMucmFkaXVzLCAzKSAvIDMuMDtcbiAgfVxuXG4gIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCkge1xuICAgIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgPSB0aGlzLnJhZGl1cztcbiAgfVxuXG4gIGNhbGN1bGF0ZVdvcmxkQUFCQihwb3MsIHF1YXQsIG1pbiwgbWF4KSB7XG4gICAgY29uc3QgciA9IHRoaXMucmFkaXVzO1xuICAgIGNvbnN0IGF4ZXMgPSBbJ3gnLCAneScsICd6J107XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGF4ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGF4ID0gYXhlc1tpXTtcbiAgICAgIG1pbltheF0gPSBwb3NbYXhdIC0gcjtcbiAgICAgIG1heFtheF0gPSBwb3NbYXhdICsgcjtcbiAgICB9XG4gIH1cblxufVxuXG4vKipcbiAqIFNpbXBsZSB2ZWhpY2xlIGhlbHBlciBjbGFzcyB3aXRoIHNwaGVyaWNhbCByaWdpZCBib2R5IHdoZWVscy5cbiAqL1xuY2xhc3MgUmlnaWRWZWhpY2xlIHtcbiAgLyoqXG4gICAqIFRoZSBib2RpZXMgb2YgdGhlIHdoZWVscy5cbiAgICovXG5cbiAgLyoqXG4gICAqIFRoZSBjaGFzc2lzIGJvZHkuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBUaGUgY29uc3RyYWludHMuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBUaGUgd2hlZWwgYXhlcy5cbiAgICovXG5cbiAgLyoqXG4gICAqIFRoZSB3aGVlbCBmb3JjZXMuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihvcHRpb25zID0ge30pIHtcbiAgICB0aGlzLndoZWVsQm9kaWVzID0gdm9pZCAwO1xuICAgIHRoaXMuY29vcmRpbmF0ZVN5c3RlbSA9IHZvaWQgMDtcbiAgICB0aGlzLmNoYXNzaXNCb2R5ID0gdm9pZCAwO1xuICAgIHRoaXMuY29uc3RyYWludHMgPSB2b2lkIDA7XG4gICAgdGhpcy53aGVlbEF4ZXMgPSB2b2lkIDA7XG4gICAgdGhpcy53aGVlbEZvcmNlcyA9IHZvaWQgMDtcbiAgICB0aGlzLndoZWVsQm9kaWVzID0gW107XG4gICAgdGhpcy5jb29yZGluYXRlU3lzdGVtID0gdHlwZW9mIG9wdGlvbnMuY29vcmRpbmF0ZVN5c3RlbSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmNvb3JkaW5hdGVTeXN0ZW0uY2xvbmUoKSA6IG5ldyBWZWMzKDEsIDIsIDMpO1xuXG4gICAgaWYgKG9wdGlvbnMuY2hhc3Npc0JvZHkpIHtcbiAgICAgIHRoaXMuY2hhc3Npc0JvZHkgPSBvcHRpb25zLmNoYXNzaXNCb2R5O1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBObyBjaGFzc2lzIGJvZHkgZ2l2ZW4uIENyZWF0ZSBpdCFcbiAgICAgIHRoaXMuY2hhc3Npc0JvZHkgPSBuZXcgQm9keSh7XG4gICAgICAgIG1hc3M6IDEsXG4gICAgICAgIHNoYXBlOiBuZXcgQm94KG5ldyBWZWMzKDUsIDAuNSwgMikpXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB0aGlzLmNvbnN0cmFpbnRzID0gW107XG4gICAgdGhpcy53aGVlbEF4ZXMgPSBbXTtcbiAgICB0aGlzLndoZWVsRm9yY2VzID0gW107XG4gIH1cbiAgLyoqXG4gICAqIEFkZCBhIHdoZWVsXG4gICAqL1xuXG5cbiAgYWRkV2hlZWwob3B0aW9ucyA9IHt9KSB7XG4gICAgbGV0IHdoZWVsQm9keTtcblxuICAgIGlmIChvcHRpb25zLmJvZHkpIHtcbiAgICAgIHdoZWVsQm9keSA9IG9wdGlvbnMuYm9keTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gTm8gd2hlZWwgYm9keSBnaXZlbi4gQ3JlYXRlIGl0IVxuICAgICAgd2hlZWxCb2R5ID0gbmV3IEJvZHkoe1xuICAgICAgICBtYXNzOiAxLFxuICAgICAgICBzaGFwZTogbmV3IFNwaGVyZSgxLjIpXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB0aGlzLndoZWVsQm9kaWVzLnB1c2god2hlZWxCb2R5KTtcbiAgICB0aGlzLndoZWVsRm9yY2VzLnB1c2goMCk7IC8vIFBvc2l0aW9uIGNvbnN0cmFpbiB3aGVlbHNcblxuICAgIGNvbnN0IHBvc2l0aW9uID0gdHlwZW9mIG9wdGlvbnMucG9zaXRpb24gIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5wb3NpdGlvbi5jbG9uZSgpIDogbmV3IFZlYzMoKTsgLy8gU2V0IHBvc2l0aW9uIGxvY2FsbHkgdG8gdGhlIGNoYXNzaXNcblxuICAgIGNvbnN0IHdvcmxkUG9zaXRpb24gPSBuZXcgVmVjMygpO1xuICAgIHRoaXMuY2hhc3Npc0JvZHkucG9pbnRUb1dvcmxkRnJhbWUocG9zaXRpb24sIHdvcmxkUG9zaXRpb24pO1xuICAgIHdoZWVsQm9keS5wb3NpdGlvbi5zZXQod29ybGRQb3NpdGlvbi54LCB3b3JsZFBvc2l0aW9uLnksIHdvcmxkUG9zaXRpb24ueik7IC8vIENvbnN0cmFpbiB3aGVlbFxuXG4gICAgY29uc3QgYXhpcyA9IHR5cGVvZiBvcHRpb25zLmF4aXMgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5heGlzLmNsb25lKCkgOiBuZXcgVmVjMygwLCAwLCAxKTtcbiAgICB0aGlzLndoZWVsQXhlcy5wdXNoKGF4aXMpO1xuICAgIGNvbnN0IGhpbmdlQ29uc3RyYWludCA9IG5ldyBIaW5nZUNvbnN0cmFpbnQodGhpcy5jaGFzc2lzQm9keSwgd2hlZWxCb2R5LCB7XG4gICAgICBwaXZvdEE6IHBvc2l0aW9uLFxuICAgICAgYXhpc0E6IGF4aXMsXG4gICAgICBwaXZvdEI6IFZlYzMuWkVSTyxcbiAgICAgIGF4aXNCOiBheGlzLFxuICAgICAgY29sbGlkZUNvbm5lY3RlZDogZmFsc2VcbiAgICB9KTtcbiAgICB0aGlzLmNvbnN0cmFpbnRzLnB1c2goaGluZ2VDb25zdHJhaW50KTtcbiAgICByZXR1cm4gdGhpcy53aGVlbEJvZGllcy5sZW5ndGggLSAxO1xuICB9XG4gIC8qKlxuICAgKiBTZXQgdGhlIHN0ZWVyaW5nIHZhbHVlIG9mIGEgd2hlZWwuXG4gICAqIEB0b2RvIGNoZWNrIGNvb3JkaW5hdGVTeXN0ZW1cbiAgICovXG5cblxuICBzZXRTdGVlcmluZ1ZhbHVlKHZhbHVlLCB3aGVlbEluZGV4KSB7XG4gICAgLy8gU2V0IGFuZ2xlIG9mIHRoZSBoaW5nZSBheGlzXG4gICAgY29uc3QgYXhpcyA9IHRoaXMud2hlZWxBeGVzW3doZWVsSW5kZXhdO1xuICAgIGNvbnN0IGMgPSBNYXRoLmNvcyh2YWx1ZSk7XG4gICAgY29uc3QgcyA9IE1hdGguc2luKHZhbHVlKTtcbiAgICBjb25zdCB4ID0gYXhpcy54O1xuICAgIGNvbnN0IHogPSBheGlzLno7XG4gICAgdGhpcy5jb25zdHJhaW50c1t3aGVlbEluZGV4XS5heGlzQS5zZXQoLWMgKiB4ICsgcyAqIHosIDAsIHMgKiB4ICsgYyAqIHopO1xuICB9XG4gIC8qKlxuICAgKiBTZXQgdGhlIHRhcmdldCByb3RhdGlvbmFsIHNwZWVkIG9mIHRoZSBoaW5nZSBjb25zdHJhaW50LlxuICAgKi9cblxuXG4gIHNldE1vdG9yU3BlZWQodmFsdWUsIHdoZWVsSW5kZXgpIHtcbiAgICBjb25zdCBoaW5nZUNvbnN0cmFpbnQgPSB0aGlzLmNvbnN0cmFpbnRzW3doZWVsSW5kZXhdO1xuICAgIGhpbmdlQ29uc3RyYWludC5lbmFibGVNb3RvcigpO1xuICAgIGhpbmdlQ29uc3RyYWludC5tb3RvclRhcmdldFZlbG9jaXR5ID0gdmFsdWU7XG4gIH1cbiAgLyoqXG4gICAqIFNldCB0aGUgdGFyZ2V0IHJvdGF0aW9uYWwgc3BlZWQgb2YgdGhlIGhpbmdlIGNvbnN0cmFpbnQuXG4gICAqL1xuXG5cbiAgZGlzYWJsZU1vdG9yKHdoZWVsSW5kZXgpIHtcbiAgICBjb25zdCBoaW5nZUNvbnN0cmFpbnQgPSB0aGlzLmNvbnN0cmFpbnRzW3doZWVsSW5kZXhdO1xuICAgIGhpbmdlQ29uc3RyYWludC5kaXNhYmxlTW90b3IoKTtcbiAgfVxuICAvKipcbiAgICogU2V0IHRoZSB3aGVlbCBmb3JjZSB0byBhcHBseSBvbiBvbmUgb2YgdGhlIHdoZWVscyBlYWNoIHRpbWUgc3RlcFxuICAgKi9cblxuXG4gIHNldFdoZWVsRm9yY2UodmFsdWUsIHdoZWVsSW5kZXgpIHtcbiAgICB0aGlzLndoZWVsRm9yY2VzW3doZWVsSW5kZXhdID0gdmFsdWU7XG4gIH1cbiAgLyoqXG4gICAqIEFwcGx5IGEgdG9ycXVlIG9uIG9uZSBvZiB0aGUgd2hlZWxzLlxuICAgKi9cblxuXG4gIGFwcGx5V2hlZWxGb3JjZSh2YWx1ZSwgd2hlZWxJbmRleCkge1xuICAgIGNvbnN0IGF4aXMgPSB0aGlzLndoZWVsQXhlc1t3aGVlbEluZGV4XTtcbiAgICBjb25zdCB3aGVlbEJvZHkgPSB0aGlzLndoZWVsQm9kaWVzW3doZWVsSW5kZXhdO1xuICAgIGNvbnN0IGJvZHlUb3JxdWUgPSB3aGVlbEJvZHkudG9ycXVlO1xuICAgIGF4aXMuc2NhbGUodmFsdWUsIHRvcnF1ZSk7XG4gICAgd2hlZWxCb2R5LnZlY3RvclRvV29ybGRGcmFtZSh0b3JxdWUsIHRvcnF1ZSk7XG4gICAgYm9keVRvcnF1ZS52YWRkKHRvcnF1ZSwgYm9keVRvcnF1ZSk7XG4gIH1cbiAgLyoqXG4gICAqIEFkZCB0aGUgdmVoaWNsZSBpbmNsdWRpbmcgaXRzIGNvbnN0cmFpbnRzIHRvIHRoZSB3b3JsZC5cbiAgICovXG5cblxuICBhZGRUb1dvcmxkKHdvcmxkKSB7XG4gICAgY29uc3QgY29uc3RyYWludHMgPSB0aGlzLmNvbnN0cmFpbnRzO1xuICAgIGNvbnN0IGJvZGllcyA9IHRoaXMud2hlZWxCb2RpZXMuY29uY2F0KFt0aGlzLmNoYXNzaXNCb2R5XSk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJvZGllcy5sZW5ndGg7IGkrKykge1xuICAgICAgd29ybGQuYWRkQm9keShib2RpZXNbaV0pO1xuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29uc3RyYWludHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHdvcmxkLmFkZENvbnN0cmFpbnQoY29uc3RyYWludHNbaV0pO1xuICAgIH1cblxuICAgIHdvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ3ByZVN0ZXAnLCB0aGlzLl91cGRhdGUuYmluZCh0aGlzKSk7XG4gIH1cblxuICBfdXBkYXRlKCkge1xuICAgIGNvbnN0IHdoZWVsRm9yY2VzID0gdGhpcy53aGVlbEZvcmNlcztcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgd2hlZWxGb3JjZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMuYXBwbHlXaGVlbEZvcmNlKHdoZWVsRm9yY2VzW2ldLCBpKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFJlbW92ZSB0aGUgdmVoaWNsZSBpbmNsdWRpbmcgaXRzIGNvbnN0cmFpbnRzIGZyb20gdGhlIHdvcmxkLlxuICAgKi9cblxuXG4gIHJlbW92ZUZyb21Xb3JsZCh3b3JsZCkge1xuICAgIGNvbnN0IGNvbnN0cmFpbnRzID0gdGhpcy5jb25zdHJhaW50cztcbiAgICBjb25zdCBib2RpZXMgPSB0aGlzLndoZWVsQm9kaWVzLmNvbmNhdChbdGhpcy5jaGFzc2lzQm9keV0pO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBib2RpZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHdvcmxkLnJlbW92ZUJvZHkoYm9kaWVzW2ldKTtcbiAgICB9XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbnN0cmFpbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB3b3JsZC5yZW1vdmVDb25zdHJhaW50KGNvbnN0cmFpbnRzW2ldKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEdldCBjdXJyZW50IHJvdGF0aW9uYWwgdmVsb2NpdHkgb2YgYSB3aGVlbFxuICAgKi9cblxuXG4gIGdldFdoZWVsU3BlZWQod2hlZWxJbmRleCkge1xuICAgIGNvbnN0IGF4aXMgPSB0aGlzLndoZWVsQXhlc1t3aGVlbEluZGV4XTtcbiAgICBjb25zdCB3aGVlbEJvZHkgPSB0aGlzLndoZWVsQm9kaWVzW3doZWVsSW5kZXhdO1xuICAgIGNvbnN0IHcgPSB3aGVlbEJvZHkuYW5ndWxhclZlbG9jaXR5O1xuICAgIHRoaXMuY2hhc3Npc0JvZHkudmVjdG9yVG9Xb3JsZEZyYW1lKGF4aXMsIHdvcmxkQXhpcyk7XG4gICAgcmV0dXJuIHcuZG90KHdvcmxkQXhpcyk7XG4gIH1cblxufVxuY29uc3QgdG9ycXVlID0gbmV3IFZlYzMoKTtcbmNvbnN0IHdvcmxkQXhpcyA9IG5ldyBWZWMzKCk7XG5cbi8qKlxuICogU21vb3RoZWQtcGFydGljbGUgaHlkcm9keW5hbWljcyBzeXN0ZW1cbiAqIEB0b2RvIE1ha2UgcGFyYW1ldGVycyBjdXN0b21pemFibGUgaW4gdGhlIGNvbnN0cnVjdG9yXG4gKi9cbmNsYXNzIFNQSFN5c3RlbSB7XG4gIC8qKlxuICAgKiBUaGUgcGFydGljbGVzIGFycmF5LlxuICAgKi9cblxuICAvKipcbiAgICogRGVuc2l0eSBvZiB0aGUgc3lzdGVtIChrZy9tMykuXG4gICAqIEBkZWZhdWx0IDFcbiAgICovXG5cbiAgLyoqXG4gICAqIERpc3RhbmNlIGJlbG93IHdoaWNoIHR3byBwYXJ0aWNsZXMgYXJlIGNvbnNpZGVyZWQgdG8gYmUgbmVpZ2hib3JzLlxuICAgKiBJdCBzaG91bGQgYmUgYWRqdXN0ZWQgc28gdGhlcmUgYXJlIGFib3V0IDE1LTIwIG5laWdoYm9yIHBhcnRpY2xlcyB3aXRoaW4gdGhpcyByYWRpdXMuXG4gICAqIEBkZWZhdWx0IDFcbiAgICovXG5cbiAgLyoqXG4gICAqIEBkZWZhdWx0IDFcbiAgICovXG5cbiAgLyoqXG4gICAqIFZpc2Nvc2l0eSBvZiB0aGUgc3lzdGVtLlxuICAgKiBAZGVmYXVsdCAwLjAxXG4gICAqL1xuXG4gIC8qKlxuICAgKiBAZGVmYXVsdCAwLjAwMDAwMVxuICAgKi9cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5wYXJ0aWNsZXMgPSB2b2lkIDA7XG4gICAgdGhpcy5kZW5zaXR5ID0gdm9pZCAwO1xuICAgIHRoaXMuc21vb3RoaW5nUmFkaXVzID0gdm9pZCAwO1xuICAgIHRoaXMuc3BlZWRPZlNvdW5kID0gdm9pZCAwO1xuICAgIHRoaXMudmlzY29zaXR5ID0gdm9pZCAwO1xuICAgIHRoaXMuZXBzID0gdm9pZCAwO1xuICAgIHRoaXMucHJlc3N1cmVzID0gdm9pZCAwO1xuICAgIHRoaXMuZGVuc2l0aWVzID0gdm9pZCAwO1xuICAgIHRoaXMubmVpZ2hib3JzID0gdm9pZCAwO1xuICAgIHRoaXMucGFydGljbGVzID0gW107XG4gICAgdGhpcy5kZW5zaXR5ID0gMTtcbiAgICB0aGlzLnNtb290aGluZ1JhZGl1cyA9IDE7XG4gICAgdGhpcy5zcGVlZE9mU291bmQgPSAxO1xuICAgIHRoaXMudmlzY29zaXR5ID0gMC4wMTtcbiAgICB0aGlzLmVwcyA9IDAuMDAwMDAxOyAvLyBTdHVmZiBDb21wdXRlZCBwZXIgcGFydGljbGVcblxuICAgIHRoaXMucHJlc3N1cmVzID0gW107XG4gICAgdGhpcy5kZW5zaXRpZXMgPSBbXTtcbiAgICB0aGlzLm5laWdoYm9ycyA9IFtdO1xuICB9XG4gIC8qKlxuICAgKiBBZGQgYSBwYXJ0aWNsZSB0byB0aGUgc3lzdGVtLlxuICAgKi9cblxuXG4gIGFkZChwYXJ0aWNsZSkge1xuICAgIHRoaXMucGFydGljbGVzLnB1c2gocGFydGljbGUpO1xuXG4gICAgaWYgKHRoaXMubmVpZ2hib3JzLmxlbmd0aCA8IHRoaXMucGFydGljbGVzLmxlbmd0aCkge1xuICAgICAgdGhpcy5uZWlnaGJvcnMucHVzaChbXSk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBSZW1vdmUgYSBwYXJ0aWNsZSBmcm9tIHRoZSBzeXN0ZW0uXG4gICAqL1xuXG5cbiAgcmVtb3ZlKHBhcnRpY2xlKSB7XG4gICAgY29uc3QgaWR4ID0gdGhpcy5wYXJ0aWNsZXMuaW5kZXhPZihwYXJ0aWNsZSk7XG5cbiAgICBpZiAoaWR4ICE9PSAtMSkge1xuICAgICAgdGhpcy5wYXJ0aWNsZXMuc3BsaWNlKGlkeCwgMSk7XG5cbiAgICAgIGlmICh0aGlzLm5laWdoYm9ycy5sZW5ndGggPiB0aGlzLnBhcnRpY2xlcy5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy5uZWlnaGJvcnMucG9wKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBHZXQgbmVpZ2hib3JzIHdpdGhpbiBzbW9vdGhpbmcgdm9sdW1lLCBzYXZlIGluIHRoZSBhcnJheSBuZWlnaGJvcnNcbiAgICovXG5cblxuICBnZXROZWlnaGJvcnMocGFydGljbGUsIG5laWdoYm9ycykge1xuICAgIGNvbnN0IE4gPSB0aGlzLnBhcnRpY2xlcy5sZW5ndGg7XG4gICAgY29uc3QgaWQgPSBwYXJ0aWNsZS5pZDtcbiAgICBjb25zdCBSMiA9IHRoaXMuc21vb3RoaW5nUmFkaXVzICogdGhpcy5zbW9vdGhpbmdSYWRpdXM7XG4gICAgY29uc3QgZGlzdCA9IFNQSFN5c3RlbV9nZXROZWlnaGJvcnNfZGlzdDtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOOyBpKyspIHtcbiAgICAgIGNvbnN0IHAgPSB0aGlzLnBhcnRpY2xlc1tpXTtcbiAgICAgIHAucG9zaXRpb24udnN1YihwYXJ0aWNsZS5wb3NpdGlvbiwgZGlzdCk7XG5cbiAgICAgIGlmIChpZCAhPT0gcC5pZCAmJiBkaXN0Lmxlbmd0aFNxdWFyZWQoKSA8IFIyKSB7XG4gICAgICAgIG5laWdoYm9ycy5wdXNoKHApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHVwZGF0ZSgpIHtcbiAgICBjb25zdCBOID0gdGhpcy5wYXJ0aWNsZXMubGVuZ3RoO1xuICAgIGNvbnN0IGRpc3QgPSBTUEhTeXN0ZW1fdXBkYXRlX2Rpc3Q7XG4gICAgY29uc3QgY3MgPSB0aGlzLnNwZWVkT2ZTb3VuZDtcbiAgICBjb25zdCBlcHMgPSB0aGlzLmVwcztcblxuICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOOyBpKyspIHtcbiAgICAgIGNvbnN0IHAgPSB0aGlzLnBhcnRpY2xlc1tpXTsgLy8gQ3VycmVudCBwYXJ0aWNsZVxuXG4gICAgICBjb25zdCBuZWlnaGJvcnMgPSB0aGlzLm5laWdoYm9yc1tpXTsgLy8gR2V0IG5laWdoYm9yc1xuXG4gICAgICBuZWlnaGJvcnMubGVuZ3RoID0gMDtcbiAgICAgIHRoaXMuZ2V0TmVpZ2hib3JzKHAsIG5laWdoYm9ycyk7XG4gICAgICBuZWlnaGJvcnMucHVzaCh0aGlzLnBhcnRpY2xlc1tpXSk7IC8vIEFkZCBjdXJyZW50IHRvb1xuXG4gICAgICBjb25zdCBudW1OZWlnaGJvcnMgPSBuZWlnaGJvcnMubGVuZ3RoOyAvLyBBY2N1bXVsYXRlIGRlbnNpdHkgZm9yIHRoZSBwYXJ0aWNsZVxuXG4gICAgICBsZXQgc3VtID0gMC4wO1xuXG4gICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gbnVtTmVpZ2hib3JzOyBqKyspIHtcbiAgICAgICAgLy9wcmludGYoXCJDdXJyZW50IHBhcnRpY2xlIGhhcyBwb3NpdGlvbiAlZiAlZiAlZlxcblwiLG9iamVjdHNbaWRdLnBvcy54KCksb2JqZWN0c1tpZF0ucG9zLnkoKSxvYmplY3RzW2lkXS5wb3MueigpKTtcbiAgICAgICAgcC5wb3NpdGlvbi52c3ViKG5laWdoYm9yc1tqXS5wb3NpdGlvbiwgZGlzdCk7XG4gICAgICAgIGNvbnN0IGxlbiA9IGRpc3QubGVuZ3RoKCk7XG4gICAgICAgIGNvbnN0IHdlaWdodCA9IHRoaXMudyhsZW4pO1xuICAgICAgICBzdW0gKz0gbmVpZ2hib3JzW2pdLm1hc3MgKiB3ZWlnaHQ7XG4gICAgICB9IC8vIFNhdmVcblxuXG4gICAgICB0aGlzLmRlbnNpdGllc1tpXSA9IHN1bTtcbiAgICAgIHRoaXMucHJlc3N1cmVzW2ldID0gY3MgKiBjcyAqICh0aGlzLmRlbnNpdGllc1tpXSAtIHRoaXMuZGVuc2l0eSk7XG4gICAgfSAvLyBBZGQgZm9yY2VzXG4gICAgLy8gU3VtIHRvIHRoZXNlIGFjY2VsZXJhdGlvbnNcblxuXG4gICAgY29uc3QgYV9wcmVzc3VyZSA9IFNQSFN5c3RlbV91cGRhdGVfYV9wcmVzc3VyZTtcbiAgICBjb25zdCBhX3Zpc2MgPSBTUEhTeXN0ZW1fdXBkYXRlX2FfdmlzYztcbiAgICBjb25zdCBncmFkVyA9IFNQSFN5c3RlbV91cGRhdGVfZ3JhZFc7XG4gICAgY29uc3Qgcl92ZWMgPSBTUEhTeXN0ZW1fdXBkYXRlX3JfdmVjO1xuICAgIGNvbnN0IHUgPSBTUEhTeXN0ZW1fdXBkYXRlX3U7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTjsgaSsrKSB7XG4gICAgICBjb25zdCBwYXJ0aWNsZSA9IHRoaXMucGFydGljbGVzW2ldO1xuICAgICAgYV9wcmVzc3VyZS5zZXQoMCwgMCwgMCk7XG4gICAgICBhX3Zpc2Muc2V0KDAsIDAsIDApOyAvLyBJbml0IHZhcnNcblxuICAgICAgbGV0IFBpajtcbiAgICAgIGxldCBuYWJsYTtcblxuICAgICAgY29uc3QgbmVpZ2hib3JzID0gdGhpcy5uZWlnaGJvcnNbaV07XG4gICAgICBjb25zdCBudW1OZWlnaGJvcnMgPSBuZWlnaGJvcnMubGVuZ3RoOyAvL3ByaW50ZihcIk5laWdoYm9yczogXCIpO1xuXG4gICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gbnVtTmVpZ2hib3JzOyBqKyspIHtcbiAgICAgICAgY29uc3QgbmVpZ2hib3IgPSBuZWlnaGJvcnNbal07IC8vcHJpbnRmKFwiJWQgXCIsbmopO1xuICAgICAgICAvLyBHZXQgciBvbmNlIGZvciBhbGwuLlxuXG4gICAgICAgIHBhcnRpY2xlLnBvc2l0aW9uLnZzdWIobmVpZ2hib3IucG9zaXRpb24sIHJfdmVjKTtcbiAgICAgICAgY29uc3QgciA9IHJfdmVjLmxlbmd0aCgpOyAvLyBQcmVzc3VyZSBjb250cmlidXRpb25cblxuICAgICAgICBQaWogPSAtbmVpZ2hib3IubWFzcyAqICh0aGlzLnByZXNzdXJlc1tpXSAvICh0aGlzLmRlbnNpdGllc1tpXSAqIHRoaXMuZGVuc2l0aWVzW2ldICsgZXBzKSArIHRoaXMucHJlc3N1cmVzW2pdIC8gKHRoaXMuZGVuc2l0aWVzW2pdICogdGhpcy5kZW5zaXRpZXNbal0gKyBlcHMpKTtcbiAgICAgICAgdGhpcy5ncmFkdyhyX3ZlYywgZ3JhZFcpOyAvLyBBZGQgdG8gcHJlc3N1cmUgYWNjZWxlcmF0aW9uXG5cbiAgICAgICAgZ3JhZFcuc2NhbGUoUGlqLCBncmFkVyk7XG4gICAgICAgIGFfcHJlc3N1cmUudmFkZChncmFkVywgYV9wcmVzc3VyZSk7IC8vIFZpc2Nvc2l0eSBjb250cmlidXRpb25cblxuICAgICAgICBuZWlnaGJvci52ZWxvY2l0eS52c3ViKHBhcnRpY2xlLnZlbG9jaXR5LCB1KTtcbiAgICAgICAgdS5zY2FsZSgxLjAgLyAoMC4wMDAxICsgdGhpcy5kZW5zaXRpZXNbaV0gKiB0aGlzLmRlbnNpdGllc1tqXSkgKiB0aGlzLnZpc2Nvc2l0eSAqIG5laWdoYm9yLm1hc3MsIHUpO1xuICAgICAgICBuYWJsYSA9IHRoaXMubmFibGF3KHIpO1xuICAgICAgICB1LnNjYWxlKG5hYmxhLCB1KTsgLy8gQWRkIHRvIHZpc2Nvc2l0eSBhY2NlbGVyYXRpb25cblxuICAgICAgICBhX3Zpc2MudmFkZCh1LCBhX3Zpc2MpO1xuICAgICAgfSAvLyBDYWxjdWxhdGUgZm9yY2VcblxuXG4gICAgICBhX3Zpc2Muc2NhbGUocGFydGljbGUubWFzcywgYV92aXNjKTtcbiAgICAgIGFfcHJlc3N1cmUuc2NhbGUocGFydGljbGUubWFzcywgYV9wcmVzc3VyZSk7IC8vIEFkZCBmb3JjZSB0byBwYXJ0aWNsZXNcblxuICAgICAgcGFydGljbGUuZm9yY2UudmFkZChhX3Zpc2MsIHBhcnRpY2xlLmZvcmNlKTtcbiAgICAgIHBhcnRpY2xlLmZvcmNlLnZhZGQoYV9wcmVzc3VyZSwgcGFydGljbGUuZm9yY2UpO1xuICAgIH1cbiAgfSAvLyBDYWxjdWxhdGUgdGhlIHdlaWdodCB1c2luZyB0aGUgVyhyKSB3ZWlnaHRmdW5jdGlvblxuXG5cbiAgdyhyKSB7XG4gICAgLy8gMzE1XG4gICAgY29uc3QgaCA9IHRoaXMuc21vb3RoaW5nUmFkaXVzO1xuICAgIHJldHVybiAzMTUuMCAvICg2NC4wICogTWF0aC5QSSAqIGggKiogOSkgKiAoaCAqIGggLSByICogcikgKiogMztcbiAgfSAvLyBjYWxjdWxhdGUgZ3JhZGllbnQgb2YgdGhlIHdlaWdodCBmdW5jdGlvblxuXG5cbiAgZ3JhZHcoclZlYywgcmVzdWx0VmVjKSB7XG4gICAgY29uc3QgciA9IHJWZWMubGVuZ3RoKCk7XG4gICAgY29uc3QgaCA9IHRoaXMuc21vb3RoaW5nUmFkaXVzO1xuICAgIHJWZWMuc2NhbGUoOTQ1LjAgLyAoMzIuMCAqIE1hdGguUEkgKiBoICoqIDkpICogKGggKiBoIC0gciAqIHIpICoqIDIsIHJlc3VsdFZlYyk7XG4gIH0gLy8gQ2FsY3VsYXRlIG5hYmxhKFcpXG5cblxuICBuYWJsYXcocikge1xuICAgIGNvbnN0IGggPSB0aGlzLnNtb290aGluZ1JhZGl1cztcbiAgICBjb25zdCBuYWJsYSA9IDk0NS4wIC8gKDMyLjAgKiBNYXRoLlBJICogaCAqKiA5KSAqIChoICogaCAtIHIgKiByKSAqICg3ICogciAqIHIgLSAzICogaCAqIGgpO1xuICAgIHJldHVybiBuYWJsYTtcbiAgfVxuXG59XG5jb25zdCBTUEhTeXN0ZW1fZ2V0TmVpZ2hib3JzX2Rpc3QgPSBuZXcgVmVjMygpOyAvLyBUZW1wIHZlY3RvcnMgZm9yIGNhbGN1bGF0aW9uXG5cbmNvbnN0IFNQSFN5c3RlbV91cGRhdGVfZGlzdCA9IG5ldyBWZWMzKCk7IC8vIFJlbGF0aXZlIHZlbG9jaXR5XG5cbmNvbnN0IFNQSFN5c3RlbV91cGRhdGVfYV9wcmVzc3VyZSA9IG5ldyBWZWMzKCk7XG5jb25zdCBTUEhTeXN0ZW1fdXBkYXRlX2FfdmlzYyA9IG5ldyBWZWMzKCk7XG5jb25zdCBTUEhTeXN0ZW1fdXBkYXRlX2dyYWRXID0gbmV3IFZlYzMoKTtcbmNvbnN0IFNQSFN5c3RlbV91cGRhdGVfcl92ZWMgPSBuZXcgVmVjMygpO1xuY29uc3QgU1BIU3lzdGVtX3VwZGF0ZV91ID0gbmV3IFZlYzMoKTtcblxuLyoqXG4gKiBDeWxpbmRlciBjbGFzcy5cbiAqIEBleGFtcGxlXG4gKiAgICAgY29uc3QgcmFkaXVzVG9wID0gMC41XG4gKiAgICAgY29uc3QgcmFkaXVzQm90dG9tID0gMC41XG4gKiAgICAgY29uc3QgaGVpZ2h0ID0gMlxuICogICAgIGNvbnN0IG51bVNlZ21lbnRzID0gMTJcbiAqICAgICBjb25zdCBjeWxpbmRlclNoYXBlID0gbmV3IENBTk5PTi5DeWxpbmRlcihyYWRpdXNUb3AsIHJhZGl1c0JvdHRvbSwgaGVpZ2h0LCBudW1TZWdtZW50cylcbiAqICAgICBjb25zdCBjeWxpbmRlckJvZHkgPSBuZXcgQ0FOTk9OLkJvZHkoeyBtYXNzOiAxLCBzaGFwZTogY3lsaW5kZXJTaGFwZSB9KVxuICogICAgIHdvcmxkLmFkZEJvZHkoY3lsaW5kZXJCb2R5KVxuICovXG5cbmNsYXNzIEN5bGluZGVyIGV4dGVuZHMgQ29udmV4UG9seWhlZHJvbiB7XG4gIC8qKiBUaGUgcmFkaXVzIG9mIHRoZSB0b3Agb2YgdGhlIEN5bGluZGVyLiAqL1xuXG4gIC8qKiBUaGUgcmFkaXVzIG9mIHRoZSBib3R0b20gb2YgdGhlIEN5bGluZGVyLiAqL1xuXG4gIC8qKiBUaGUgaGVpZ2h0IG9mIHRoZSBDeWxpbmRlci4gKi9cblxuICAvKiogVGhlIG51bWJlciBvZiBzZWdtZW50cyB0byBidWlsZCB0aGUgY3lsaW5kZXIgb3V0IG9mLiAqL1xuXG4gIC8qKlxuICAgKiBAcGFyYW0gcmFkaXVzVG9wIFRoZSByYWRpdXMgb2YgdGhlIHRvcCBvZiB0aGUgQ3lsaW5kZXIuXG4gICAqIEBwYXJhbSByYWRpdXNCb3R0b20gVGhlIHJhZGl1cyBvZiB0aGUgYm90dG9tIG9mIHRoZSBDeWxpbmRlci5cbiAgICogQHBhcmFtIGhlaWdodCBUaGUgaGVpZ2h0IG9mIHRoZSBDeWxpbmRlci5cbiAgICogQHBhcmFtIG51bVNlZ21lbnRzIFRoZSBudW1iZXIgb2Ygc2VnbWVudHMgdG8gYnVpbGQgdGhlIGN5bGluZGVyIG91dCBvZi5cbiAgICovXG4gIGNvbnN0cnVjdG9yKHJhZGl1c1RvcCA9IDEsIHJhZGl1c0JvdHRvbSA9IDEsIGhlaWdodCA9IDEsIG51bVNlZ21lbnRzID0gOCkge1xuICAgIGlmIChyYWRpdXNUb3AgPCAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBjeWxpbmRlciByYWRpdXNUb3AgY2Fubm90IGJlIG5lZ2F0aXZlLicpO1xuICAgIH1cblxuICAgIGlmIChyYWRpdXNCb3R0b20gPCAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBjeWxpbmRlciByYWRpdXNCb3R0b20gY2Fubm90IGJlIG5lZ2F0aXZlLicpO1xuICAgIH1cblxuICAgIGNvbnN0IE4gPSBudW1TZWdtZW50cztcbiAgICBjb25zdCB2ZXJ0aWNlcyA9IFtdO1xuICAgIGNvbnN0IGF4ZXMgPSBbXTtcbiAgICBjb25zdCBmYWNlcyA9IFtdO1xuICAgIGNvbnN0IGJvdHRvbWZhY2UgPSBbXTtcbiAgICBjb25zdCB0b3BmYWNlID0gW107XG4gICAgY29uc3QgY29zID0gTWF0aC5jb3M7XG4gICAgY29uc3Qgc2luID0gTWF0aC5zaW47IC8vIEZpcnN0IGJvdHRvbSBwb2ludFxuXG4gICAgdmVydGljZXMucHVzaChuZXcgVmVjMygtcmFkaXVzQm90dG9tICogc2luKDApLCAtaGVpZ2h0ICogMC41LCByYWRpdXNCb3R0b20gKiBjb3MoMCkpKTtcbiAgICBib3R0b21mYWNlLnB1c2goMCk7IC8vIEZpcnN0IHRvcCBwb2ludFxuXG4gICAgdmVydGljZXMucHVzaChuZXcgVmVjMygtcmFkaXVzVG9wICogc2luKDApLCBoZWlnaHQgKiAwLjUsIHJhZGl1c1RvcCAqIGNvcygwKSkpO1xuICAgIHRvcGZhY2UucHVzaCgxKTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgTjsgaSsrKSB7XG4gICAgICBjb25zdCB0aGV0YSA9IDIgKiBNYXRoLlBJIC8gTiAqIChpICsgMSk7XG4gICAgICBjb25zdCB0aGV0YU4gPSAyICogTWF0aC5QSSAvIE4gKiAoaSArIDAuNSk7XG5cbiAgICAgIGlmIChpIDwgTiAtIDEpIHtcbiAgICAgICAgLy8gQm90dG9tXG4gICAgICAgIHZlcnRpY2VzLnB1c2gobmV3IFZlYzMoLXJhZGl1c0JvdHRvbSAqIHNpbih0aGV0YSksIC1oZWlnaHQgKiAwLjUsIHJhZGl1c0JvdHRvbSAqIGNvcyh0aGV0YSkpKTtcbiAgICAgICAgYm90dG9tZmFjZS5wdXNoKDIgKiBpICsgMik7IC8vIFRvcFxuXG4gICAgICAgIHZlcnRpY2VzLnB1c2gobmV3IFZlYzMoLXJhZGl1c1RvcCAqIHNpbih0aGV0YSksIGhlaWdodCAqIDAuNSwgcmFkaXVzVG9wICogY29zKHRoZXRhKSkpO1xuICAgICAgICB0b3BmYWNlLnB1c2goMiAqIGkgKyAzKTsgLy8gRmFjZVxuXG4gICAgICAgIGZhY2VzLnB1c2goWzIgKiBpLCAyICogaSArIDEsIDIgKiBpICsgMywgMiAqIGkgKyAyXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmYWNlcy5wdXNoKFsyICogaSwgMiAqIGkgKyAxLCAxLCAwXSk7IC8vIENvbm5lY3RcbiAgICAgIH0gLy8gQXhpczogd2UgY2FuIGN1dCBvZmYgaGFsZiBvZiB0aGVtIGlmIHdlIGhhdmUgZXZlbiBudW1iZXIgb2Ygc2VnbWVudHNcblxuXG4gICAgICBpZiAoTiAlIDIgPT09IDEgfHwgaSA8IE4gLyAyKSB7XG4gICAgICAgIGF4ZXMucHVzaChuZXcgVmVjMygtc2luKHRoZXRhTiksIDAsIGNvcyh0aGV0YU4pKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZmFjZXMucHVzaChib3R0b21mYWNlKTtcbiAgICBheGVzLnB1c2gobmV3IFZlYzMoMCwgMSwgMCkpOyAvLyBSZW9yZGVyIHRvcCBmYWNlXG5cbiAgICBjb25zdCB0ZW1wID0gW107XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRvcGZhY2UubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRlbXAucHVzaCh0b3BmYWNlW3RvcGZhY2UubGVuZ3RoIC0gaSAtIDFdKTtcbiAgICB9XG5cbiAgICBmYWNlcy5wdXNoKHRlbXApO1xuICAgIHN1cGVyKHtcbiAgICAgIHZlcnRpY2VzLFxuICAgICAgZmFjZXMsXG4gICAgICBheGVzXG4gICAgfSk7XG4gICAgdGhpcy5yYWRpdXNUb3AgPSB2b2lkIDA7XG4gICAgdGhpcy5yYWRpdXNCb3R0b20gPSB2b2lkIDA7XG4gICAgdGhpcy5oZWlnaHQgPSB2b2lkIDA7XG4gICAgdGhpcy5udW1TZWdtZW50cyA9IHZvaWQgMDtcbiAgICB0aGlzLnR5cGUgPSBTaGFwZS50eXBlcy5DWUxJTkRFUjtcbiAgICB0aGlzLnJhZGl1c1RvcCA9IHJhZGl1c1RvcDtcbiAgICB0aGlzLnJhZGl1c0JvdHRvbSA9IHJhZGl1c0JvdHRvbTtcbiAgICB0aGlzLmhlaWdodCA9IGhlaWdodDtcbiAgICB0aGlzLm51bVNlZ21lbnRzID0gbnVtU2VnbWVudHM7XG4gIH1cblxufVxuXG4vKipcbiAqIFBhcnRpY2xlIHNoYXBlLlxuICogQGV4YW1wbGVcbiAqICAgICBjb25zdCBwYXJ0aWNsZVNoYXBlID0gbmV3IENBTk5PTi5QYXJ0aWNsZSgpXG4gKiAgICAgY29uc3QgcGFydGljbGVCb2R5ID0gbmV3IENBTk5PTi5Cb2R5KHsgbWFzczogMSwgc2hhcGU6IHBhcnRpY2xlU2hhcGUgfSlcbiAqICAgICB3b3JsZC5hZGRCb2R5KHBhcnRpY2xlQm9keSlcbiAqL1xuY2xhc3MgUGFydGljbGUgZXh0ZW5kcyBTaGFwZSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKHtcbiAgICAgIHR5cGU6IFNoYXBlLnR5cGVzLlBBUlRJQ0xFXG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYVxuICAgKi9cblxuXG4gIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYShtYXNzLCB0YXJnZXQgPSBuZXcgVmVjMygpKSB7XG4gICAgdGFyZ2V0LnNldCgwLCAwLCAwKTtcbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9XG5cbiAgdm9sdW1lKCkge1xuICAgIHJldHVybiAwO1xuICB9XG5cbiAgdXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKSB7XG4gICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IDA7XG4gIH1cblxuICBjYWxjdWxhdGVXb3JsZEFBQkIocG9zLCBxdWF0LCBtaW4sIG1heCkge1xuICAgIC8vIEdldCBlYWNoIGF4aXMgbWF4XG4gICAgbWluLmNvcHkocG9zKTtcbiAgICBtYXguY29weShwb3MpO1xuICB9XG5cbn1cblxuLyoqXG4gKiBBIHBsYW5lLCBmYWNpbmcgaW4gdGhlIFogZGlyZWN0aW9uLiBUaGUgcGxhbmUgaGFzIGl0cyBzdXJmYWNlIGF0IHo9MCBhbmQgZXZlcnl0aGluZyBiZWxvdyB6PTAgaXMgYXNzdW1lZCB0byBiZSBzb2xpZCBwbGFuZS4gVG8gbWFrZSB0aGUgcGxhbmUgZmFjZSBpbiBzb21lIG90aGVyIGRpcmVjdGlvbiB0aGFuIHosIHlvdSBtdXN0IHB1dCBpdCBpbnNpZGUgYSBCb2R5IGFuZCByb3RhdGUgdGhhdCBib2R5LiBTZWUgdGhlIGRlbW9zLlxuICogQGV4YW1wbGVcbiAqICAgICBjb25zdCBwbGFuZVNoYXBlID0gbmV3IENBTk5PTi5QbGFuZSgpXG4gKiAgICAgY29uc3QgcGxhbmVCb2R5ID0gbmV3IENBTk5PTi5Cb2R5KHsgbWFzczogMCwgc2hhcGU6ICBwbGFuZVNoYXBlIH0pXG4gKiAgICAgcGxhbmVCb2R5LnF1YXRlcm5pb24uc2V0RnJvbUV1bGVyKC1NYXRoLlBJIC8gMiwgMCwgMCkgLy8gbWFrZSBpdCBmYWNlIHVwXG4gKiAgICAgd29ybGQuYWRkQm9keShwbGFuZUJvZHkpXG4gKi9cbmNsYXNzIFBsYW5lIGV4dGVuZHMgU2hhcGUge1xuICAvKiogd29ybGROb3JtYWwgKi9cblxuICAvKiogd29ybGROb3JtYWxOZWVkc1VwZGF0ZSAqL1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcih7XG4gICAgICB0eXBlOiBTaGFwZS50eXBlcy5QTEFORVxuICAgIH0pOyAvLyBXb3JsZCBvcmllbnRlZCBub3JtYWxcblxuICAgIHRoaXMud29ybGROb3JtYWwgPSB2b2lkIDA7XG4gICAgdGhpcy53b3JsZE5vcm1hbE5lZWRzVXBkYXRlID0gdm9pZCAwO1xuICAgIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgPSB2b2lkIDA7XG4gICAgdGhpcy53b3JsZE5vcm1hbCA9IG5ldyBWZWMzKCk7XG4gICAgdGhpcy53b3JsZE5vcm1hbE5lZWRzVXBkYXRlID0gdHJ1ZTtcbiAgICB0aGlzLmJvdW5kaW5nU3BoZXJlUmFkaXVzID0gTnVtYmVyLk1BWF9WQUxVRTtcbiAgfVxuICAvKiogY29tcHV0ZVdvcmxkTm9ybWFsICovXG5cblxuICBjb21wdXRlV29ybGROb3JtYWwocXVhdCkge1xuICAgIGNvbnN0IG4gPSB0aGlzLndvcmxkTm9ybWFsO1xuICAgIG4uc2V0KDAsIDAsIDEpO1xuICAgIHF1YXQudm11bHQobiwgbik7XG4gICAgdGhpcy53b3JsZE5vcm1hbE5lZWRzVXBkYXRlID0gZmFsc2U7XG4gIH1cblxuICBjYWxjdWxhdGVMb2NhbEluZXJ0aWEobWFzcywgdGFyZ2V0ID0gbmV3IFZlYzMoKSkge1xuICAgIHJldHVybiB0YXJnZXQ7XG4gIH1cblxuICB2b2x1bWUoKSB7XG4gICAgcmV0dXJuICgvLyBUaGUgcGxhbmUgaXMgaW5maW5pdGUuLi5cbiAgICAgIE51bWJlci5NQVhfVkFMVUVcbiAgICApO1xuICB9XG5cbiAgY2FsY3VsYXRlV29ybGRBQUJCKHBvcywgcXVhdCwgbWluLCBtYXgpIHtcbiAgICAvLyBUaGUgcGxhbmUgQUFCQiBpcyBpbmZpbml0ZSwgZXhjZXB0IGlmIHRoZSBub3JtYWwgaXMgcG9pbnRpbmcgYWxvbmcgYW55IGF4aXNcbiAgICB0ZW1wTm9ybWFsLnNldCgwLCAwLCAxKTsgLy8gRGVmYXVsdCBwbGFuZSBub3JtYWwgaXMgelxuXG4gICAgcXVhdC52bXVsdCh0ZW1wTm9ybWFsLCB0ZW1wTm9ybWFsKTtcbiAgICBjb25zdCBtYXhWYWwgPSBOdW1iZXIuTUFYX1ZBTFVFO1xuICAgIG1pbi5zZXQoLW1heFZhbCwgLW1heFZhbCwgLW1heFZhbCk7XG4gICAgbWF4LnNldChtYXhWYWwsIG1heFZhbCwgbWF4VmFsKTtcblxuICAgIGlmICh0ZW1wTm9ybWFsLnggPT09IDEpIHtcbiAgICAgIG1heC54ID0gcG9zLng7XG4gICAgfSBlbHNlIGlmICh0ZW1wTm9ybWFsLnggPT09IC0xKSB7XG4gICAgICBtaW4ueCA9IHBvcy54O1xuICAgIH1cblxuICAgIGlmICh0ZW1wTm9ybWFsLnkgPT09IDEpIHtcbiAgICAgIG1heC55ID0gcG9zLnk7XG4gICAgfSBlbHNlIGlmICh0ZW1wTm9ybWFsLnkgPT09IC0xKSB7XG4gICAgICBtaW4ueSA9IHBvcy55O1xuICAgIH1cblxuICAgIGlmICh0ZW1wTm9ybWFsLnogPT09IDEpIHtcbiAgICAgIG1heC56ID0gcG9zLno7XG4gICAgfSBlbHNlIGlmICh0ZW1wTm9ybWFsLnogPT09IC0xKSB7XG4gICAgICBtaW4ueiA9IHBvcy56O1xuICAgIH1cbiAgfVxuXG4gIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCkge1xuICAgIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgPSBOdW1iZXIuTUFYX1ZBTFVFO1xuICB9XG5cbn1cbmNvbnN0IHRlbXBOb3JtYWwgPSBuZXcgVmVjMygpO1xuXG4vKipcbiAqIEhlaWdodGZpZWxkIHNoYXBlIGNsYXNzLiBIZWlnaHQgZGF0YSBpcyBnaXZlbiBhcyBhbiBhcnJheS4gVGhlc2UgZGF0YSBwb2ludHMgYXJlIHNwcmVhZCBvdXQgZXZlbmx5IHdpdGggYSBnaXZlbiBkaXN0YW5jZS5cbiAqIEB0b2RvIFNob3VsZCBiZSBwb3NzaWJsZSB0byB1c2UgYWxvbmcgYWxsIGF4ZXMsIG5vdCBqdXN0IHlcbiAqIEB0b2RvIHNob3VsZCBiZSBwb3NzaWJsZSB0byBzY2FsZSBhbG9uZyBhbGwgYXhlc1xuICogQHRvZG8gUmVmYWN0b3IgZWxlbWVudFNpemUgdG8gZWxlbWVudFNpemVYIGFuZCBlbGVtZW50U2l6ZVlcbiAqXG4gKiBAZXhhbXBsZVxuICogICAgIC8vIEdlbmVyYXRlIHNvbWUgaGVpZ2h0IGRhdGEgKHktdmFsdWVzKS5cbiAqICAgICBjb25zdCBkYXRhID0gW11cbiAqICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwMDA7IGkrKykge1xuICogICAgICAgICBjb25zdCB5ID0gMC41ICogTWF0aC5jb3MoMC4yICogaSlcbiAqICAgICAgICAgZGF0YS5wdXNoKHkpXG4gKiAgICAgfVxuICpcbiAqICAgICAvLyBDcmVhdGUgdGhlIGhlaWdodGZpZWxkIHNoYXBlXG4gKiAgICAgY29uc3QgaGVpZ2h0ZmllbGRTaGFwZSA9IG5ldyBDQU5OT04uSGVpZ2h0ZmllbGQoZGF0YSwge1xuICogICAgICAgICBlbGVtZW50U2l6ZTogMSAvLyBEaXN0YW5jZSBiZXR3ZWVuIHRoZSBkYXRhIHBvaW50cyBpbiBYIGFuZCBZIGRpcmVjdGlvbnNcbiAqICAgICB9KVxuICogICAgIGNvbnN0IGhlaWdodGZpZWxkQm9keSA9IG5ldyBDQU5OT04uQm9keSh7IHNoYXBlOiBoZWlnaHRmaWVsZFNoYXBlIH0pXG4gKiAgICAgd29ybGQuYWRkQm9keShoZWlnaHRmaWVsZEJvZHkpXG4gKi9cbmNsYXNzIEhlaWdodGZpZWxkIGV4dGVuZHMgU2hhcGUge1xuICAvKipcbiAgICogQW4gYXJyYXkgb2YgbnVtYmVycywgb3IgaGVpZ2h0IHZhbHVlcywgdGhhdCBhcmUgc3ByZWFkIG91dCBhbG9uZyB0aGUgeCBheGlzLlxuICAgKi9cblxuICAvKipcbiAgICogTWF4IHZhbHVlIG9mIHRoZSBkYXRhIHBvaW50cyBpbiB0aGUgZGF0YSBhcnJheS5cbiAgICovXG5cbiAgLyoqXG4gICAqIE1pbmltdW0gdmFsdWUgb2YgdGhlIGRhdGEgcG9pbnRzIGluIHRoZSBkYXRhIGFycmF5LlxuICAgKi9cblxuICAvKipcbiAgICogV29ybGQgc3BhY2luZyBiZXR3ZWVuIHRoZSBkYXRhIHBvaW50cyBpbiBYIGFuZCBZIGRpcmVjdGlvbi5cbiAgICogQHRvZG8gZWxlbWVudFNpemVYIGFuZCBZXG4gICAqIEBkZWZhdWx0IDFcbiAgICovXG5cbiAgLyoqXG4gICAqIEBkZWZhdWx0IHRydWVcbiAgICovXG5cbiAgLyoqXG4gICAqIEBwYXJhbSBkYXRhIEFuIGFycmF5IG9mIG51bWJlcnMsIG9yIGhlaWdodCB2YWx1ZXMsIHRoYXQgYXJlIHNwcmVhZCBvdXQgYWxvbmcgdGhlIHggYXhpcy5cbiAgICovXG4gIGNvbnN0cnVjdG9yKGRhdGEsIG9wdGlvbnMgPSB7fSkge1xuICAgIG9wdGlvbnMgPSBVdGlscy5kZWZhdWx0cyhvcHRpb25zLCB7XG4gICAgICBtYXhWYWx1ZTogbnVsbCxcbiAgICAgIG1pblZhbHVlOiBudWxsLFxuICAgICAgZWxlbWVudFNpemU6IDFcbiAgICB9KTtcbiAgICBzdXBlcih7XG4gICAgICB0eXBlOiBTaGFwZS50eXBlcy5IRUlHSFRGSUVMRFxuICAgIH0pO1xuICAgIHRoaXMuZGF0YSA9IHZvaWQgMDtcbiAgICB0aGlzLm1heFZhbHVlID0gdm9pZCAwO1xuICAgIHRoaXMubWluVmFsdWUgPSB2b2lkIDA7XG4gICAgdGhpcy5lbGVtZW50U2l6ZSA9IHZvaWQgMDtcbiAgICB0aGlzLmNhY2hlRW5hYmxlZCA9IHZvaWQgMDtcbiAgICB0aGlzLnBpbGxhckNvbnZleCA9IHZvaWQgMDtcbiAgICB0aGlzLnBpbGxhck9mZnNldCA9IHZvaWQgMDtcbiAgICB0aGlzLl9jYWNoZWRQaWxsYXJzID0gdm9pZCAwO1xuICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gICAgdGhpcy5tYXhWYWx1ZSA9IG9wdGlvbnMubWF4VmFsdWU7XG4gICAgdGhpcy5taW5WYWx1ZSA9IG9wdGlvbnMubWluVmFsdWU7XG4gICAgdGhpcy5lbGVtZW50U2l6ZSA9IG9wdGlvbnMuZWxlbWVudFNpemU7XG5cbiAgICBpZiAob3B0aW9ucy5taW5WYWx1ZSA9PT0gbnVsbCkge1xuICAgICAgdGhpcy51cGRhdGVNaW5WYWx1ZSgpO1xuICAgIH1cblxuICAgIGlmIChvcHRpb25zLm1heFZhbHVlID09PSBudWxsKSB7XG4gICAgICB0aGlzLnVwZGF0ZU1heFZhbHVlKCk7XG4gICAgfVxuXG4gICAgdGhpcy5jYWNoZUVuYWJsZWQgPSB0cnVlO1xuICAgIHRoaXMucGlsbGFyQ29udmV4ID0gbmV3IENvbnZleFBvbHloZWRyb24oKTtcbiAgICB0aGlzLnBpbGxhck9mZnNldCA9IG5ldyBWZWMzKCk7XG4gICAgdGhpcy51cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpOyAvLyBcImlfal9pc1VwcGVyXCIgPT4geyBjb252ZXg6IC4uLiwgb2Zmc2V0OiAuLi4gfVxuICAgIC8vIGZvciBleGFtcGxlOlxuICAgIC8vIF9jYWNoZWRQaWxsYXJzW1wiMF8yXzFcIl1cblxuICAgIHRoaXMuX2NhY2hlZFBpbGxhcnMgPSB7fTtcbiAgfVxuICAvKipcbiAgICogQ2FsbCB3aGVuZXZlciB5b3UgY2hhbmdlIHRoZSBkYXRhIGFycmF5LlxuICAgKi9cblxuXG4gIHVwZGF0ZSgpIHtcbiAgICB0aGlzLl9jYWNoZWRQaWxsYXJzID0ge307XG4gIH1cbiAgLyoqXG4gICAqIFVwZGF0ZSB0aGUgYG1pblZhbHVlYCBwcm9wZXJ0eVxuICAgKi9cblxuXG4gIHVwZGF0ZU1pblZhbHVlKCkge1xuICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7XG4gICAgbGV0IG1pblZhbHVlID0gZGF0YVswXVswXTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBkYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gZGF0YVtpXS5sZW5ndGg7IGorKykge1xuICAgICAgICBjb25zdCB2ID0gZGF0YVtpXVtqXTtcblxuICAgICAgICBpZiAodiA8IG1pblZhbHVlKSB7XG4gICAgICAgICAgbWluVmFsdWUgPSB2O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5taW5WYWx1ZSA9IG1pblZhbHVlO1xuICB9XG4gIC8qKlxuICAgKiBVcGRhdGUgdGhlIGBtYXhWYWx1ZWAgcHJvcGVydHlcbiAgICovXG5cblxuICB1cGRhdGVNYXhWYWx1ZSgpIHtcbiAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhO1xuICAgIGxldCBtYXhWYWx1ZSA9IGRhdGFbMF1bMF07XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gZGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgZm9yIChsZXQgaiA9IDA7IGogIT09IGRhdGFbaV0ubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgY29uc3QgdiA9IGRhdGFbaV1bal07XG5cbiAgICAgICAgaWYgKHYgPiBtYXhWYWx1ZSkge1xuICAgICAgICAgIG1heFZhbHVlID0gdjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMubWF4VmFsdWUgPSBtYXhWYWx1ZTtcbiAgfVxuICAvKipcbiAgICogU2V0IHRoZSBoZWlnaHQgdmFsdWUgYXQgYW4gaW5kZXguIERvbid0IGZvcmdldCB0byB1cGRhdGUgbWF4VmFsdWUgYW5kIG1pblZhbHVlIGFmdGVyIHlvdSdyZSBkb25lLlxuICAgKi9cblxuXG4gIHNldEhlaWdodFZhbHVlQXRJbmRleCh4aSwgeWksIHZhbHVlKSB7XG4gICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTtcbiAgICBkYXRhW3hpXVt5aV0gPSB2YWx1ZTsgLy8gSW52YWxpZGF0ZSBjYWNoZVxuXG4gICAgdGhpcy5jbGVhckNhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpLCB5aSwgZmFsc2UpO1xuXG4gICAgaWYgKHhpID4gMCkge1xuICAgICAgdGhpcy5jbGVhckNhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpIC0gMSwgeWksIHRydWUpO1xuICAgICAgdGhpcy5jbGVhckNhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpIC0gMSwgeWksIGZhbHNlKTtcbiAgICB9XG5cbiAgICBpZiAoeWkgPiAwKSB7XG4gICAgICB0aGlzLmNsZWFyQ2FjaGVkQ29udmV4VHJpYW5nbGVQaWxsYXIoeGksIHlpIC0gMSwgdHJ1ZSk7XG4gICAgICB0aGlzLmNsZWFyQ2FjaGVkQ29udmV4VHJpYW5nbGVQaWxsYXIoeGksIHlpIC0gMSwgZmFsc2UpO1xuICAgIH1cblxuICAgIGlmICh5aSA+IDAgJiYgeGkgPiAwKSB7XG4gICAgICB0aGlzLmNsZWFyQ2FjaGVkQ29udmV4VHJpYW5nbGVQaWxsYXIoeGkgLSAxLCB5aSAtIDEsIHRydWUpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogR2V0IG1heC9taW4gaW4gYSByZWN0YW5nbGUgaW4gdGhlIG1hdHJpeCBkYXRhXG4gICAqIEBwYXJhbSByZXN1bHQgQW4gYXJyYXkgdG8gc3RvcmUgdGhlIHJlc3VsdHMgaW4uXG4gICAqIEByZXR1cm4gVGhlIHJlc3VsdCBhcnJheSwgaWYgaXQgd2FzIHBhc3NlZCBpbi4gTWluaW11bSB3aWxsIGJlIGF0IHBvc2l0aW9uIDAgYW5kIG1heCBhdCAxLlxuICAgKi9cblxuXG4gIGdldFJlY3RNaW5NYXgoaU1pblgsIGlNaW5ZLCBpTWF4WCwgaU1heFksIHJlc3VsdCA9IFtdKSB7XG4gICAgLy8gR2V0IG1heCBhbmQgbWluIG9mIHRoZSBkYXRhXG4gICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTsgLy8gU2V0IGZpcnN0IHZhbHVlXG5cbiAgICBsZXQgbWF4ID0gdGhpcy5taW5WYWx1ZTtcblxuICAgIGZvciAobGV0IGkgPSBpTWluWDsgaSA8PSBpTWF4WDsgaSsrKSB7XG4gICAgICBmb3IgKGxldCBqID0gaU1pblk7IGogPD0gaU1heFk7IGorKykge1xuICAgICAgICBjb25zdCBoZWlnaHQgPSBkYXRhW2ldW2pdO1xuXG4gICAgICAgIGlmIChoZWlnaHQgPiBtYXgpIHtcbiAgICAgICAgICBtYXggPSBoZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXN1bHRbMF0gPSB0aGlzLm1pblZhbHVlO1xuICAgIHJlc3VsdFsxXSA9IG1heDtcbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSBpbmRleCBvZiBhIGxvY2FsIHBvc2l0aW9uIG9uIHRoZSBoZWlnaHRmaWVsZC4gVGhlIGluZGV4ZXMgaW5kaWNhdGUgdGhlIHJlY3RhbmdsZXMsIHNvIGlmIHlvdXIgdGVycmFpbiBpcyBtYWRlIG9mIE4geCBOIGhlaWdodCBkYXRhIHBvaW50cywgeW91IHdpbGwgaGF2ZSByZWN0YW5nbGUgaW5kZXhlcyByYW5naW5nIGZyb20gMCB0byBOLTEuXG4gICAqIEBwYXJhbSByZXN1bHQgVHdvLWVsZW1lbnQgYXJyYXlcbiAgICogQHBhcmFtIGNsYW1wIElmIHRoZSBwb3NpdGlvbiBzaG91bGQgYmUgY2xhbXBlZCB0byB0aGUgaGVpZ2h0ZmllbGQgZWRnZS5cbiAgICovXG5cblxuICBnZXRJbmRleE9mUG9zaXRpb24oeCwgeSwgcmVzdWx0LCBjbGFtcCkge1xuICAgIC8vIEdldCB0aGUgaW5kZXggb2YgdGhlIGRhdGEgcG9pbnRzIHRvIHRlc3QgYWdhaW5zdFxuICAgIGNvbnN0IHcgPSB0aGlzLmVsZW1lbnRTaXplO1xuICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7XG4gICAgbGV0IHhpID0gTWF0aC5mbG9vcih4IC8gdyk7XG4gICAgbGV0IHlpID0gTWF0aC5mbG9vcih5IC8gdyk7XG4gICAgcmVzdWx0WzBdID0geGk7XG4gICAgcmVzdWx0WzFdID0geWk7XG5cbiAgICBpZiAoY2xhbXApIHtcbiAgICAgIC8vIENsYW1wIGluZGV4IHRvIGVkZ2VzXG4gICAgICBpZiAoeGkgPCAwKSB7XG4gICAgICAgIHhpID0gMDtcbiAgICAgIH1cblxuICAgICAgaWYgKHlpIDwgMCkge1xuICAgICAgICB5aSA9IDA7XG4gICAgICB9XG5cbiAgICAgIGlmICh4aSA+PSBkYXRhLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgeGkgPSBkYXRhLmxlbmd0aCAtIDE7XG4gICAgICB9XG5cbiAgICAgIGlmICh5aSA+PSBkYXRhWzBdLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgeWkgPSBkYXRhWzBdLmxlbmd0aCAtIDE7XG4gICAgICB9XG4gICAgfSAvLyBCYWlsIG91dCBpZiB3ZSBhcmUgb3V0IG9mIHRoZSB0ZXJyYWluXG5cblxuICAgIGlmICh4aSA8IDAgfHwgeWkgPCAwIHx8IHhpID49IGRhdGEubGVuZ3RoIC0gMSB8fCB5aSA+PSBkYXRhWzBdLmxlbmd0aCAtIDEpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGdldFRyaWFuZ2xlQXQoeCwgeSwgZWRnZUNsYW1wLCBhLCBiLCBjKSB7XG4gICAgY29uc3QgaWR4ID0gZ2V0SGVpZ2h0QXRfaWR4O1xuICAgIHRoaXMuZ2V0SW5kZXhPZlBvc2l0aW9uKHgsIHksIGlkeCwgZWRnZUNsYW1wKTtcbiAgICBsZXQgeGkgPSBpZHhbMF07XG4gICAgbGV0IHlpID0gaWR4WzFdO1xuICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7XG5cbiAgICBpZiAoZWRnZUNsYW1wKSB7XG4gICAgICB4aSA9IE1hdGgubWluKGRhdGEubGVuZ3RoIC0gMiwgTWF0aC5tYXgoMCwgeGkpKTtcbiAgICAgIHlpID0gTWF0aC5taW4oZGF0YVswXS5sZW5ndGggLSAyLCBNYXRoLm1heCgwLCB5aSkpO1xuICAgIH1cblxuICAgIGNvbnN0IGVsZW1lbnRTaXplID0gdGhpcy5lbGVtZW50U2l6ZTtcbiAgICBjb25zdCBsb3dlckRpc3QyID0gKHggLyBlbGVtZW50U2l6ZSAtIHhpKSAqKiAyICsgKHkgLyBlbGVtZW50U2l6ZSAtIHlpKSAqKiAyO1xuICAgIGNvbnN0IHVwcGVyRGlzdDIgPSAoeCAvIGVsZW1lbnRTaXplIC0gKHhpICsgMSkpICoqIDIgKyAoeSAvIGVsZW1lbnRTaXplIC0gKHlpICsgMSkpICoqIDI7XG4gICAgY29uc3QgdXBwZXIgPSBsb3dlckRpc3QyID4gdXBwZXJEaXN0MjtcbiAgICB0aGlzLmdldFRyaWFuZ2xlKHhpLCB5aSwgdXBwZXIsIGEsIGIsIGMpO1xuICAgIHJldHVybiB1cHBlcjtcbiAgfVxuXG4gIGdldE5vcm1hbEF0KHgsIHksIGVkZ2VDbGFtcCwgcmVzdWx0KSB7XG4gICAgY29uc3QgYSA9IGdldE5vcm1hbEF0X2E7XG4gICAgY29uc3QgYiA9IGdldE5vcm1hbEF0X2I7XG4gICAgY29uc3QgYyA9IGdldE5vcm1hbEF0X2M7XG4gICAgY29uc3QgZTAgPSBnZXROb3JtYWxBdF9lMDtcbiAgICBjb25zdCBlMSA9IGdldE5vcm1hbEF0X2UxO1xuICAgIHRoaXMuZ2V0VHJpYW5nbGVBdCh4LCB5LCBlZGdlQ2xhbXAsIGEsIGIsIGMpO1xuICAgIGIudnN1YihhLCBlMCk7XG4gICAgYy52c3ViKGEsIGUxKTtcbiAgICBlMC5jcm9zcyhlMSwgcmVzdWx0KTtcbiAgICByZXN1bHQubm9ybWFsaXplKCk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBhbiBBQUJCIG9mIGEgc3F1YXJlIGluIHRoZSBoZWlnaHRmaWVsZFxuICAgKiBAcGFyYW0geGlcbiAgICogQHBhcmFtIHlpXG4gICAqIEBwYXJhbSByZXN1bHRcbiAgICovXG5cblxuICBnZXRBYWJiQXRJbmRleCh4aSwgeWksIHtcbiAgICBsb3dlckJvdW5kLFxuICAgIHVwcGVyQm91bmRcbiAgfSkge1xuICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7XG4gICAgY29uc3QgZWxlbWVudFNpemUgPSB0aGlzLmVsZW1lbnRTaXplO1xuICAgIGxvd2VyQm91bmQuc2V0KHhpICogZWxlbWVudFNpemUsIHlpICogZWxlbWVudFNpemUsIGRhdGFbeGldW3lpXSk7XG4gICAgdXBwZXJCb3VuZC5zZXQoKHhpICsgMSkgKiBlbGVtZW50U2l6ZSwgKHlpICsgMSkgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aSArIDFdW3lpICsgMV0pO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIGhlaWdodCBpbiB0aGUgaGVpZ2h0ZmllbGQgYXQgYSBnaXZlbiBwb3NpdGlvblxuICAgKi9cblxuXG4gIGdldEhlaWdodEF0KHgsIHksIGVkZ2VDbGFtcCkge1xuICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7XG4gICAgY29uc3QgYSA9IGdldEhlaWdodEF0X2E7XG4gICAgY29uc3QgYiA9IGdldEhlaWdodEF0X2I7XG4gICAgY29uc3QgYyA9IGdldEhlaWdodEF0X2M7XG4gICAgY29uc3QgaWR4ID0gZ2V0SGVpZ2h0QXRfaWR4O1xuICAgIHRoaXMuZ2V0SW5kZXhPZlBvc2l0aW9uKHgsIHksIGlkeCwgZWRnZUNsYW1wKTtcbiAgICBsZXQgeGkgPSBpZHhbMF07XG4gICAgbGV0IHlpID0gaWR4WzFdO1xuXG4gICAgaWYgKGVkZ2VDbGFtcCkge1xuICAgICAgeGkgPSBNYXRoLm1pbihkYXRhLmxlbmd0aCAtIDIsIE1hdGgubWF4KDAsIHhpKSk7XG4gICAgICB5aSA9IE1hdGgubWluKGRhdGFbMF0ubGVuZ3RoIC0gMiwgTWF0aC5tYXgoMCwgeWkpKTtcbiAgICB9XG5cbiAgICBjb25zdCB1cHBlciA9IHRoaXMuZ2V0VHJpYW5nbGVBdCh4LCB5LCBlZGdlQ2xhbXAsIGEsIGIsIGMpO1xuICAgIGJhcnljZW50cmljV2VpZ2h0cyh4LCB5LCBhLngsIGEueSwgYi54LCBiLnksIGMueCwgYy55LCBnZXRIZWlnaHRBdF93ZWlnaHRzKTtcbiAgICBjb25zdCB3ID0gZ2V0SGVpZ2h0QXRfd2VpZ2h0cztcblxuICAgIGlmICh1cHBlcikge1xuICAgICAgLy8gVG9wIHRyaWFuZ2xlIHZlcnRzXG4gICAgICByZXR1cm4gZGF0YVt4aSArIDFdW3lpICsgMV0gKiB3LnggKyBkYXRhW3hpXVt5aSArIDFdICogdy55ICsgZGF0YVt4aSArIDFdW3lpXSAqIHcuejtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVG9wIHRyaWFuZ2xlIHZlcnRzXG4gICAgICByZXR1cm4gZGF0YVt4aV1beWldICogdy54ICsgZGF0YVt4aSArIDFdW3lpXSAqIHcueSArIGRhdGFbeGldW3lpICsgMV0gKiB3Lno7XG4gICAgfVxuICB9XG5cbiAgZ2V0Q2FjaGVDb252ZXhUcmlhbmdsZVBpbGxhcktleSh4aSwgeWksIGdldFVwcGVyVHJpYW5nbGUpIHtcbiAgICByZXR1cm4geGkgKyBcIl9cIiArIHlpICsgXCJfXCIgKyAoZ2V0VXBwZXJUcmlhbmdsZSA/IDEgOiAwKTtcbiAgfVxuXG4gIGdldENhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpLCB5aSwgZ2V0VXBwZXJUcmlhbmdsZSkge1xuICAgIHJldHVybiB0aGlzLl9jYWNoZWRQaWxsYXJzW3RoaXMuZ2V0Q2FjaGVDb252ZXhUcmlhbmdsZVBpbGxhcktleSh4aSwgeWksIGdldFVwcGVyVHJpYW5nbGUpXTtcbiAgfVxuXG4gIHNldENhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpLCB5aSwgZ2V0VXBwZXJUcmlhbmdsZSwgY29udmV4LCBvZmZzZXQpIHtcbiAgICB0aGlzLl9jYWNoZWRQaWxsYXJzW3RoaXMuZ2V0Q2FjaGVDb252ZXhUcmlhbmdsZVBpbGxhcktleSh4aSwgeWksIGdldFVwcGVyVHJpYW5nbGUpXSA9IHtcbiAgICAgIGNvbnZleCxcbiAgICAgIG9mZnNldFxuICAgIH07XG4gIH1cblxuICBjbGVhckNhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpLCB5aSwgZ2V0VXBwZXJUcmlhbmdsZSkge1xuICAgIGRlbGV0ZSB0aGlzLl9jYWNoZWRQaWxsYXJzW3RoaXMuZ2V0Q2FjaGVDb252ZXhUcmlhbmdsZVBpbGxhcktleSh4aSwgeWksIGdldFVwcGVyVHJpYW5nbGUpXTtcbiAgfVxuICAvKipcbiAgICogR2V0IGEgdHJpYW5nbGUgZnJvbSB0aGUgaGVpZ2h0ZmllbGRcbiAgICovXG5cblxuICBnZXRUcmlhbmdsZSh4aSwgeWksIHVwcGVyLCBhLCBiLCBjKSB7XG4gICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTtcbiAgICBjb25zdCBlbGVtZW50U2l6ZSA9IHRoaXMuZWxlbWVudFNpemU7XG5cbiAgICBpZiAodXBwZXIpIHtcbiAgICAgIC8vIFRvcCB0cmlhbmdsZSB2ZXJ0c1xuICAgICAgYS5zZXQoKHhpICsgMSkgKiBlbGVtZW50U2l6ZSwgKHlpICsgMSkgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aSArIDFdW3lpICsgMV0pO1xuICAgICAgYi5zZXQoeGkgKiBlbGVtZW50U2l6ZSwgKHlpICsgMSkgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aV1beWkgKyAxXSk7XG4gICAgICBjLnNldCgoeGkgKyAxKSAqIGVsZW1lbnRTaXplLCB5aSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpICsgMV1beWldKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVG9wIHRyaWFuZ2xlIHZlcnRzXG4gICAgICBhLnNldCh4aSAqIGVsZW1lbnRTaXplLCB5aSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpXVt5aV0pO1xuICAgICAgYi5zZXQoKHhpICsgMSkgKiBlbGVtZW50U2l6ZSwgeWkgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aSArIDFdW3lpXSk7XG4gICAgICBjLnNldCh4aSAqIGVsZW1lbnRTaXplLCAoeWkgKyAxKSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpXVt5aSArIDFdKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEdldCBhIHRyaWFuZ2xlIGluIHRoZSB0ZXJyYWluIGluIHRoZSBmb3JtIG9mIGEgdHJpYW5ndWxhciBjb252ZXggc2hhcGUuXG4gICAqL1xuXG5cbiAgZ2V0Q29udmV4VHJpYW5nbGVQaWxsYXIoeGksIHlpLCBnZXRVcHBlclRyaWFuZ2xlKSB7XG4gICAgbGV0IHJlc3VsdCA9IHRoaXMucGlsbGFyQ29udmV4O1xuICAgIGxldCBvZmZzZXRSZXN1bHQgPSB0aGlzLnBpbGxhck9mZnNldDtcblxuICAgIGlmICh0aGlzLmNhY2hlRW5hYmxlZCkge1xuICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZ2V0Q2FjaGVkQ29udmV4VHJpYW5nbGVQaWxsYXIoeGksIHlpLCBnZXRVcHBlclRyaWFuZ2xlKTtcblxuICAgICAgaWYgKGRhdGEpIHtcbiAgICAgICAgdGhpcy5waWxsYXJDb252ZXggPSBkYXRhLmNvbnZleDtcbiAgICAgICAgdGhpcy5waWxsYXJPZmZzZXQgPSBkYXRhLm9mZnNldDtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICByZXN1bHQgPSBuZXcgQ29udmV4UG9seWhlZHJvbigpO1xuICAgICAgb2Zmc2V0UmVzdWx0ID0gbmV3IFZlYzMoKTtcbiAgICAgIHRoaXMucGlsbGFyQ29udmV4ID0gcmVzdWx0O1xuICAgICAgdGhpcy5waWxsYXJPZmZzZXQgPSBvZmZzZXRSZXN1bHQ7XG4gICAgfVxuXG4gICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTtcbiAgICBjb25zdCBlbGVtZW50U2l6ZSA9IHRoaXMuZWxlbWVudFNpemU7XG4gICAgY29uc3QgZmFjZXMgPSByZXN1bHQuZmFjZXM7IC8vIFJldXNlIHZlcnRzIGlmIHBvc3NpYmxlXG5cbiAgICByZXN1bHQudmVydGljZXMubGVuZ3RoID0gNjtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNjsgaSsrKSB7XG4gICAgICBpZiAoIXJlc3VsdC52ZXJ0aWNlc1tpXSkge1xuICAgICAgICByZXN1bHQudmVydGljZXNbaV0gPSBuZXcgVmVjMygpO1xuICAgICAgfVxuICAgIH0gLy8gUmV1c2UgZmFjZXMgaWYgcG9zc2libGVcblxuXG4gICAgZmFjZXMubGVuZ3RoID0gNTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNTsgaSsrKSB7XG4gICAgICBpZiAoIWZhY2VzW2ldKSB7XG4gICAgICAgIGZhY2VzW2ldID0gW107XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgdmVydHMgPSByZXN1bHQudmVydGljZXM7XG4gICAgY29uc3QgaCA9IChNYXRoLm1pbihkYXRhW3hpXVt5aV0sIGRhdGFbeGkgKyAxXVt5aV0sIGRhdGFbeGldW3lpICsgMV0sIGRhdGFbeGkgKyAxXVt5aSArIDFdKSAtIHRoaXMubWluVmFsdWUpIC8gMiArIHRoaXMubWluVmFsdWU7XG5cbiAgICBpZiAoIWdldFVwcGVyVHJpYW5nbGUpIHtcbiAgICAgIC8vIENlbnRlciBvZiB0aGUgdHJpYW5nbGUgcGlsbGFyIC0gYWxsIHBvbHlnb25zIGFyZSBnaXZlbiByZWxhdGl2ZSB0byB0aGlzIG9uZVxuICAgICAgb2Zmc2V0UmVzdWx0LnNldCgoeGkgKyAwLjI1KSAqIGVsZW1lbnRTaXplLCAvLyBzb3J0IG9mIGNlbnRlciBvZiBhIHRyaWFuZ2xlXG4gICAgICAoeWkgKyAwLjI1KSAqIGVsZW1lbnRTaXplLCBoIC8vIHZlcnRpY2FsIGNlbnRlclxuICAgICAgKTsgLy8gVG9wIHRyaWFuZ2xlIHZlcnRzXG5cbiAgICAgIHZlcnRzWzBdLnNldCgtMC4yNSAqIGVsZW1lbnRTaXplLCAtMC4yNSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpXVt5aV0gLSBoKTtcbiAgICAgIHZlcnRzWzFdLnNldCgwLjc1ICogZWxlbWVudFNpemUsIC0wLjI1ICogZWxlbWVudFNpemUsIGRhdGFbeGkgKyAxXVt5aV0gLSBoKTtcbiAgICAgIHZlcnRzWzJdLnNldCgtMC4yNSAqIGVsZW1lbnRTaXplLCAwLjc1ICogZWxlbWVudFNpemUsIGRhdGFbeGldW3lpICsgMV0gLSBoKTsgLy8gYm90dG9tIHRyaWFuZ2xlIHZlcnRzXG5cbiAgICAgIHZlcnRzWzNdLnNldCgtMC4yNSAqIGVsZW1lbnRTaXplLCAtMC4yNSAqIGVsZW1lbnRTaXplLCAtTWF0aC5hYnMoaCkgLSAxKTtcbiAgICAgIHZlcnRzWzRdLnNldCgwLjc1ICogZWxlbWVudFNpemUsIC0wLjI1ICogZWxlbWVudFNpemUsIC1NYXRoLmFicyhoKSAtIDEpO1xuICAgICAgdmVydHNbNV0uc2V0KC0wLjI1ICogZWxlbWVudFNpemUsIDAuNzUgKiBlbGVtZW50U2l6ZSwgLU1hdGguYWJzKGgpIC0gMSk7IC8vIHRvcCB0cmlhbmdsZVxuXG4gICAgICBmYWNlc1swXVswXSA9IDA7XG4gICAgICBmYWNlc1swXVsxXSA9IDE7XG4gICAgICBmYWNlc1swXVsyXSA9IDI7IC8vIGJvdHRvbSB0cmlhbmdsZVxuXG4gICAgICBmYWNlc1sxXVswXSA9IDU7XG4gICAgICBmYWNlc1sxXVsxXSA9IDQ7XG4gICAgICBmYWNlc1sxXVsyXSA9IDM7IC8vIC14IGZhY2luZyBxdWFkXG5cbiAgICAgIGZhY2VzWzJdWzBdID0gMDtcbiAgICAgIGZhY2VzWzJdWzFdID0gMjtcbiAgICAgIGZhY2VzWzJdWzJdID0gNTtcbiAgICAgIGZhY2VzWzJdWzNdID0gMzsgLy8gLXkgZmFjaW5nIHF1YWRcblxuICAgICAgZmFjZXNbM11bMF0gPSAxO1xuICAgICAgZmFjZXNbM11bMV0gPSAwO1xuICAgICAgZmFjZXNbM11bMl0gPSAzO1xuICAgICAgZmFjZXNbM11bM10gPSA0OyAvLyAreHkgZmFjaW5nIHF1YWRcblxuICAgICAgZmFjZXNbNF1bMF0gPSA0O1xuICAgICAgZmFjZXNbNF1bMV0gPSA1O1xuICAgICAgZmFjZXNbNF1bMl0gPSAyO1xuICAgICAgZmFjZXNbNF1bM10gPSAxO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBDZW50ZXIgb2YgdGhlIHRyaWFuZ2xlIHBpbGxhciAtIGFsbCBwb2x5Z29ucyBhcmUgZ2l2ZW4gcmVsYXRpdmUgdG8gdGhpcyBvbmVcbiAgICAgIG9mZnNldFJlc3VsdC5zZXQoKHhpICsgMC43NSkgKiBlbGVtZW50U2l6ZSwgLy8gc29ydCBvZiBjZW50ZXIgb2YgYSB0cmlhbmdsZVxuICAgICAgKHlpICsgMC43NSkgKiBlbGVtZW50U2l6ZSwgaCAvLyB2ZXJ0aWNhbCBjZW50ZXJcbiAgICAgICk7IC8vIFRvcCB0cmlhbmdsZSB2ZXJ0c1xuXG4gICAgICB2ZXJ0c1swXS5zZXQoMC4yNSAqIGVsZW1lbnRTaXplLCAwLjI1ICogZWxlbWVudFNpemUsIGRhdGFbeGkgKyAxXVt5aSArIDFdIC0gaCk7XG4gICAgICB2ZXJ0c1sxXS5zZXQoLTAuNzUgKiBlbGVtZW50U2l6ZSwgMC4yNSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpXVt5aSArIDFdIC0gaCk7XG4gICAgICB2ZXJ0c1syXS5zZXQoMC4yNSAqIGVsZW1lbnRTaXplLCAtMC43NSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpICsgMV1beWldIC0gaCk7IC8vIGJvdHRvbSB0cmlhbmdsZSB2ZXJ0c1xuXG4gICAgICB2ZXJ0c1szXS5zZXQoMC4yNSAqIGVsZW1lbnRTaXplLCAwLjI1ICogZWxlbWVudFNpemUsIC1NYXRoLmFicyhoKSAtIDEpO1xuICAgICAgdmVydHNbNF0uc2V0KC0wLjc1ICogZWxlbWVudFNpemUsIDAuMjUgKiBlbGVtZW50U2l6ZSwgLU1hdGguYWJzKGgpIC0gMSk7XG4gICAgICB2ZXJ0c1s1XS5zZXQoMC4yNSAqIGVsZW1lbnRTaXplLCAtMC43NSAqIGVsZW1lbnRTaXplLCAtTWF0aC5hYnMoaCkgLSAxKTsgLy8gVG9wIHRyaWFuZ2xlXG5cbiAgICAgIGZhY2VzWzBdWzBdID0gMDtcbiAgICAgIGZhY2VzWzBdWzFdID0gMTtcbiAgICAgIGZhY2VzWzBdWzJdID0gMjsgLy8gYm90dG9tIHRyaWFuZ2xlXG5cbiAgICAgIGZhY2VzWzFdWzBdID0gNTtcbiAgICAgIGZhY2VzWzFdWzFdID0gNDtcbiAgICAgIGZhY2VzWzFdWzJdID0gMzsgLy8gK3ggZmFjaW5nIHF1YWRcblxuICAgICAgZmFjZXNbMl1bMF0gPSAyO1xuICAgICAgZmFjZXNbMl1bMV0gPSA1O1xuICAgICAgZmFjZXNbMl1bMl0gPSAzO1xuICAgICAgZmFjZXNbMl1bM10gPSAwOyAvLyAreSBmYWNpbmcgcXVhZFxuXG4gICAgICBmYWNlc1szXVswXSA9IDM7XG4gICAgICBmYWNlc1szXVsxXSA9IDQ7XG4gICAgICBmYWNlc1szXVsyXSA9IDE7XG4gICAgICBmYWNlc1szXVszXSA9IDA7IC8vIC14eSBmYWNpbmcgcXVhZFxuXG4gICAgICBmYWNlc1s0XVswXSA9IDE7XG4gICAgICBmYWNlc1s0XVsxXSA9IDQ7XG4gICAgICBmYWNlc1s0XVsyXSA9IDU7XG4gICAgICBmYWNlc1s0XVszXSA9IDI7XG4gICAgfVxuXG4gICAgcmVzdWx0LmNvbXB1dGVOb3JtYWxzKCk7XG4gICAgcmVzdWx0LmNvbXB1dGVFZGdlcygpO1xuICAgIHJlc3VsdC51cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpO1xuICAgIHRoaXMuc2V0Q2FjaGVkQ29udmV4VHJpYW5nbGVQaWxsYXIoeGksIHlpLCBnZXRVcHBlclRyaWFuZ2xlLCByZXN1bHQsIG9mZnNldFJlc3VsdCk7XG4gIH1cblxuICBjYWxjdWxhdGVMb2NhbEluZXJ0aWEobWFzcywgdGFyZ2V0ID0gbmV3IFZlYzMoKSkge1xuICAgIHRhcmdldC5zZXQoMCwgMCwgMCk7XG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfVxuXG4gIHZvbHVtZSgpIHtcbiAgICByZXR1cm4gKC8vIFRoZSB0ZXJyYWluIGlzIGluZmluaXRlXG4gICAgICBOdW1iZXIuTUFYX1ZBTFVFXG4gICAgKTtcbiAgfVxuXG4gIGNhbGN1bGF0ZVdvcmxkQUFCQihwb3MsIHF1YXQsIG1pbiwgbWF4KSB7XG4gICAgLyoqIEBUT0RPIGRvIGl0IHByb3Blcmx5ICovXG4gICAgbWluLnNldCgtTnVtYmVyLk1BWF9WQUxVRSwgLU51bWJlci5NQVhfVkFMVUUsIC1OdW1iZXIuTUFYX1ZBTFVFKTtcbiAgICBtYXguc2V0KE51bWJlci5NQVhfVkFMVUUsIE51bWJlci5NQVhfVkFMVUUsIE51bWJlci5NQVhfVkFMVUUpO1xuICB9XG5cbiAgdXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKSB7XG4gICAgLy8gVXNlIHRoZSBib3VuZGluZyBib3ggb2YgdGhlIG1pbi9tYXggdmFsdWVzXG4gICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTtcbiAgICBjb25zdCBzID0gdGhpcy5lbGVtZW50U2l6ZTtcbiAgICB0aGlzLmJvdW5kaW5nU3BoZXJlUmFkaXVzID0gbmV3IFZlYzMoZGF0YS5sZW5ndGggKiBzLCBkYXRhWzBdLmxlbmd0aCAqIHMsIE1hdGgubWF4KE1hdGguYWJzKHRoaXMubWF4VmFsdWUpLCBNYXRoLmFicyh0aGlzLm1pblZhbHVlKSkpLmxlbmd0aCgpO1xuICB9XG4gIC8qKlxuICAgKiBTZXRzIHRoZSBoZWlnaHQgdmFsdWVzIGZyb20gYW4gaW1hZ2UuIEN1cnJlbnRseSBvbmx5IHN1cHBvcnRlZCBpbiBicm93c2VyLlxuICAgKi9cblxuXG4gIHNldEhlaWdodHNGcm9tSW1hZ2UoaW1hZ2UsIHNjYWxlKSB7XG4gICAgY29uc3Qge1xuICAgICAgeCxcbiAgICAgIHosXG4gICAgICB5XG4gICAgfSA9IHNjYWxlO1xuICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgIGNhbnZhcy53aWR0aCA9IGltYWdlLndpZHRoO1xuICAgIGNhbnZhcy5oZWlnaHQgPSBpbWFnZS5oZWlnaHQ7XG4gICAgY29uc3QgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgIGNvbnRleHQuZHJhd0ltYWdlKGltYWdlLCAwLCAwKTtcbiAgICBjb25zdCBpbWFnZURhdGEgPSBjb250ZXh0LmdldEltYWdlRGF0YSgwLCAwLCBpbWFnZS53aWR0aCwgaW1hZ2UuaGVpZ2h0KTtcbiAgICBjb25zdCBtYXRyaXggPSB0aGlzLmRhdGE7XG4gICAgbWF0cml4Lmxlbmd0aCA9IDA7XG4gICAgdGhpcy5lbGVtZW50U2l6ZSA9IE1hdGguYWJzKHgpIC8gaW1hZ2VEYXRhLndpZHRoO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbWFnZURhdGEuaGVpZ2h0OyBpKyspIHtcbiAgICAgIGNvbnN0IHJvdyA9IFtdO1xuXG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGltYWdlRGF0YS53aWR0aDsgaisrKSB7XG4gICAgICAgIGNvbnN0IGEgPSBpbWFnZURhdGEuZGF0YVsoaSAqIGltYWdlRGF0YS5oZWlnaHQgKyBqKSAqIDRdO1xuICAgICAgICBjb25zdCBiID0gaW1hZ2VEYXRhLmRhdGFbKGkgKiBpbWFnZURhdGEuaGVpZ2h0ICsgaikgKiA0ICsgMV07XG4gICAgICAgIGNvbnN0IGMgPSBpbWFnZURhdGEuZGF0YVsoaSAqIGltYWdlRGF0YS5oZWlnaHQgKyBqKSAqIDQgKyAyXTtcbiAgICAgICAgY29uc3QgaGVpZ2h0ID0gKGEgKyBiICsgYykgLyA0IC8gMjU1ICogejtcblxuICAgICAgICBpZiAoeCA8IDApIHtcbiAgICAgICAgICByb3cucHVzaChoZWlnaHQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJvdy51bnNoaWZ0KGhlaWdodCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHkgPCAwKSB7XG4gICAgICAgIG1hdHJpeC51bnNoaWZ0KHJvdyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBtYXRyaXgucHVzaChyb3cpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMudXBkYXRlTWF4VmFsdWUoKTtcbiAgICB0aGlzLnVwZGF0ZU1pblZhbHVlKCk7XG4gICAgdGhpcy51cGRhdGUoKTtcbiAgfVxuXG59XG5jb25zdCBnZXRIZWlnaHRBdF9pZHggPSBbXTtcbmNvbnN0IGdldEhlaWdodEF0X3dlaWdodHMgPSBuZXcgVmVjMygpO1xuY29uc3QgZ2V0SGVpZ2h0QXRfYSA9IG5ldyBWZWMzKCk7XG5jb25zdCBnZXRIZWlnaHRBdF9iID0gbmV3IFZlYzMoKTtcbmNvbnN0IGdldEhlaWdodEF0X2MgPSBuZXcgVmVjMygpO1xuY29uc3QgZ2V0Tm9ybWFsQXRfYSA9IG5ldyBWZWMzKCk7XG5jb25zdCBnZXROb3JtYWxBdF9iID0gbmV3IFZlYzMoKTtcbmNvbnN0IGdldE5vcm1hbEF0X2MgPSBuZXcgVmVjMygpO1xuY29uc3QgZ2V0Tm9ybWFsQXRfZTAgPSBuZXcgVmVjMygpO1xuY29uc3QgZ2V0Tm9ybWFsQXRfZTEgPSBuZXcgVmVjMygpOyAvLyBmcm9tIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0JhcnljZW50cmljX2Nvb3JkaW5hdGVfc3lzdGVtXG5cbmZ1bmN0aW9uIGJhcnljZW50cmljV2VpZ2h0cyh4LCB5LCBheCwgYXksIGJ4LCBieSwgY3gsIGN5LCByZXN1bHQpIHtcbiAgcmVzdWx0LnggPSAoKGJ5IC0gY3kpICogKHggLSBjeCkgKyAoY3ggLSBieCkgKiAoeSAtIGN5KSkgLyAoKGJ5IC0gY3kpICogKGF4IC0gY3gpICsgKGN4IC0gYngpICogKGF5IC0gY3kpKTtcbiAgcmVzdWx0LnkgPSAoKGN5IC0gYXkpICogKHggLSBjeCkgKyAoYXggLSBjeCkgKiAoeSAtIGN5KSkgLyAoKGJ5IC0gY3kpICogKGF4IC0gY3gpICsgKGN4IC0gYngpICogKGF5IC0gY3kpKTtcbiAgcmVzdWx0LnogPSAxIC0gcmVzdWx0LnggLSByZXN1bHQueTtcbn1cblxuLyoqXG4gKiBPY3RyZWVOb2RlXG4gKi9cbmNsYXNzIE9jdHJlZU5vZGUge1xuICAvKiogVGhlIHJvb3Qgbm9kZSAqL1xuXG4gIC8qKiBCb3VuZGFyeSBvZiB0aGlzIG5vZGUgKi9cblxuICAvKiogQ29udGFpbmVkIGRhdGEgYXQgdGhlIGN1cnJlbnQgbm9kZSBsZXZlbCAqL1xuXG4gIC8qKiBDaGlsZHJlbiB0byB0aGlzIG5vZGUgKi9cbiAgY29uc3RydWN0b3Iob3B0aW9ucyA9IHt9KSB7XG4gICAgdGhpcy5yb290ID0gdm9pZCAwO1xuICAgIHRoaXMuYWFiYiA9IHZvaWQgMDtcbiAgICB0aGlzLmRhdGEgPSB2b2lkIDA7XG4gICAgdGhpcy5jaGlsZHJlbiA9IHZvaWQgMDtcbiAgICB0aGlzLnJvb3QgPSBvcHRpb25zLnJvb3QgfHwgbnVsbDtcbiAgICB0aGlzLmFhYmIgPSBvcHRpb25zLmFhYmIgPyBvcHRpb25zLmFhYmIuY2xvbmUoKSA6IG5ldyBBQUJCKCk7XG4gICAgdGhpcy5kYXRhID0gW107XG4gICAgdGhpcy5jaGlsZHJlbiA9IFtdO1xuICB9XG4gIC8qKlxuICAgKiByZXNldFxuICAgKi9cblxuXG4gIHJlc2V0KCkge1xuICAgIHRoaXMuY2hpbGRyZW4ubGVuZ3RoID0gdGhpcy5kYXRhLmxlbmd0aCA9IDA7XG4gIH1cbiAgLyoqXG4gICAqIEluc2VydCBkYXRhIGludG8gdGhpcyBub2RlXG4gICAqIEByZXR1cm4gVHJ1ZSBpZiBzdWNjZXNzZnVsLCBvdGhlcndpc2UgZmFsc2VcbiAgICovXG5cblxuICBpbnNlcnQoYWFiYiwgZWxlbWVudERhdGEsIGxldmVsID0gMCkge1xuICAgIGNvbnN0IG5vZGVEYXRhID0gdGhpcy5kYXRhOyAvLyBJZ25vcmUgb2JqZWN0cyB0aGF0IGRvIG5vdCBiZWxvbmcgaW4gdGhpcyBub2RlXG5cbiAgICBpZiAoIXRoaXMuYWFiYi5jb250YWlucyhhYWJiKSkge1xuICAgICAgcmV0dXJuIGZhbHNlOyAvLyBvYmplY3QgY2Fubm90IGJlIGFkZGVkXG4gICAgfVxuXG4gICAgY29uc3QgY2hpbGRyZW4gPSB0aGlzLmNoaWxkcmVuO1xuICAgIGNvbnN0IG1heERlcHRoID0gdGhpcy5tYXhEZXB0aCB8fCB0aGlzLnJvb3QubWF4RGVwdGg7XG5cbiAgICBpZiAobGV2ZWwgPCBtYXhEZXB0aCkge1xuICAgICAgLy8gU3ViZGl2aWRlIGlmIHRoZXJlIGFyZSBubyBjaGlsZHJlbiB5ZXRcbiAgICAgIGxldCBzdWJkaXZpZGVkID0gZmFsc2U7XG5cbiAgICAgIGlmICghY2hpbGRyZW4ubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuc3ViZGl2aWRlKCk7XG4gICAgICAgIHN1YmRpdmlkZWQgPSB0cnVlO1xuICAgICAgfSAvLyBhZGQgdG8gd2hpY2hldmVyIG5vZGUgd2lsbCBhY2NlcHQgaXRcblxuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gODsgaSsrKSB7XG4gICAgICAgIGlmIChjaGlsZHJlbltpXS5pbnNlcnQoYWFiYiwgZWxlbWVudERhdGEsIGxldmVsICsgMSkpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoc3ViZGl2aWRlZCkge1xuICAgICAgICAvLyBObyBjaGlsZHJlbiBhY2NlcHRlZCEgTWlnaHQgYXMgd2VsbCBqdXN0IHJlbW92ZSBlbSBzaW5jZSB0aGV5IGNvbnRhaW4gbm9uZVxuICAgICAgICBjaGlsZHJlbi5sZW5ndGggPSAwO1xuICAgICAgfVxuICAgIH0gLy8gVG9vIGRlZXAsIG9yIGNoaWxkcmVuIGRpZG50IHdhbnQgaXQuIGFkZCBpdCBpbiBjdXJyZW50IG5vZGVcblxuXG4gICAgbm9kZURhdGEucHVzaChlbGVtZW50RGF0YSk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSA4IGVxdWFsbHkgc2l6ZWQgY2hpbGRyZW4gbm9kZXMgYW5kIHB1dCB0aGVtIGluIHRoZSBgY2hpbGRyZW5gIGFycmF5LlxuICAgKi9cblxuXG4gIHN1YmRpdmlkZSgpIHtcbiAgICBjb25zdCBhYWJiID0gdGhpcy5hYWJiO1xuICAgIGNvbnN0IGwgPSBhYWJiLmxvd2VyQm91bmQ7XG4gICAgY29uc3QgdSA9IGFhYmIudXBwZXJCb3VuZDtcbiAgICBjb25zdCBjaGlsZHJlbiA9IHRoaXMuY2hpbGRyZW47XG4gICAgY2hpbGRyZW4ucHVzaChuZXcgT2N0cmVlTm9kZSh7XG4gICAgICBhYWJiOiBuZXcgQUFCQih7XG4gICAgICAgIGxvd2VyQm91bmQ6IG5ldyBWZWMzKDAsIDAsIDApXG4gICAgICB9KVxuICAgIH0pLCBuZXcgT2N0cmVlTm9kZSh7XG4gICAgICBhYWJiOiBuZXcgQUFCQih7XG4gICAgICAgIGxvd2VyQm91bmQ6IG5ldyBWZWMzKDEsIDAsIDApXG4gICAgICB9KVxuICAgIH0pLCBuZXcgT2N0cmVlTm9kZSh7XG4gICAgICBhYWJiOiBuZXcgQUFCQih7XG4gICAgICAgIGxvd2VyQm91bmQ6IG5ldyBWZWMzKDEsIDEsIDApXG4gICAgICB9KVxuICAgIH0pLCBuZXcgT2N0cmVlTm9kZSh7XG4gICAgICBhYWJiOiBuZXcgQUFCQih7XG4gICAgICAgIGxvd2VyQm91bmQ6IG5ldyBWZWMzKDEsIDEsIDEpXG4gICAgICB9KVxuICAgIH0pLCBuZXcgT2N0cmVlTm9kZSh7XG4gICAgICBhYWJiOiBuZXcgQUFCQih7XG4gICAgICAgIGxvd2VyQm91bmQ6IG5ldyBWZWMzKDAsIDEsIDEpXG4gICAgICB9KVxuICAgIH0pLCBuZXcgT2N0cmVlTm9kZSh7XG4gICAgICBhYWJiOiBuZXcgQUFCQih7XG4gICAgICAgIGxvd2VyQm91bmQ6IG5ldyBWZWMzKDAsIDAsIDEpXG4gICAgICB9KVxuICAgIH0pLCBuZXcgT2N0cmVlTm9kZSh7XG4gICAgICBhYWJiOiBuZXcgQUFCQih7XG4gICAgICAgIGxvd2VyQm91bmQ6IG5ldyBWZWMzKDEsIDAsIDEpXG4gICAgICB9KVxuICAgIH0pLCBuZXcgT2N0cmVlTm9kZSh7XG4gICAgICBhYWJiOiBuZXcgQUFCQih7XG4gICAgICAgIGxvd2VyQm91bmQ6IG5ldyBWZWMzKDAsIDEsIDApXG4gICAgICB9KVxuICAgIH0pKTtcbiAgICB1LnZzdWIobCwgaGFsZkRpYWdvbmFsKTtcbiAgICBoYWxmRGlhZ29uYWwuc2NhbGUoMC41LCBoYWxmRGlhZ29uYWwpO1xuICAgIGNvbnN0IHJvb3QgPSB0aGlzLnJvb3QgfHwgdGhpcztcblxuICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSA4OyBpKyspIHtcbiAgICAgIGNvbnN0IGNoaWxkID0gY2hpbGRyZW5baV07IC8vIFNldCBjdXJyZW50IG5vZGUgYXMgcm9vdFxuXG4gICAgICBjaGlsZC5yb290ID0gcm9vdDsgLy8gQ29tcHV0ZSBib3VuZHNcblxuICAgICAgY29uc3QgbG93ZXJCb3VuZCA9IGNoaWxkLmFhYmIubG93ZXJCb3VuZDtcbiAgICAgIGxvd2VyQm91bmQueCAqPSBoYWxmRGlhZ29uYWwueDtcbiAgICAgIGxvd2VyQm91bmQueSAqPSBoYWxmRGlhZ29uYWwueTtcbiAgICAgIGxvd2VyQm91bmQueiAqPSBoYWxmRGlhZ29uYWwuejtcbiAgICAgIGxvd2VyQm91bmQudmFkZChsLCBsb3dlckJvdW5kKTsgLy8gVXBwZXIgYm91bmQgaXMgYWx3YXlzIGxvd2VyIGJvdW5kICsgaGFsZkRpYWdvbmFsXG5cbiAgICAgIGxvd2VyQm91bmQudmFkZChoYWxmRGlhZ29uYWwsIGNoaWxkLmFhYmIudXBwZXJCb3VuZCk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBHZXQgYWxsIGRhdGEsIHBvdGVudGlhbGx5IHdpdGhpbiBhbiBBQUJCXG4gICAqIEByZXR1cm4gVGhlIFwicmVzdWx0XCIgb2JqZWN0XG4gICAqL1xuXG5cbiAgYWFiYlF1ZXJ5KGFhYmIsIHJlc3VsdCkge1xuICAgIHRoaXMuZGF0YTsgLy8gYWJvcnQgaWYgdGhlIHJhbmdlIGRvZXMgbm90IGludGVyc2VjdCB0aGlzIG5vZGVcbiAgICAvLyBpZiAoIXRoaXMuYWFiYi5vdmVybGFwcyhhYWJiKSl7XG4gICAgLy8gICAgIHJldHVybiByZXN1bHQ7XG4gICAgLy8gfVxuICAgIC8vIEFkZCBvYmplY3RzIGF0IHRoaXMgbGV2ZWxcbiAgICAvLyBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShyZXN1bHQsIG5vZGVEYXRhKTtcbiAgICAvLyBBZGQgY2hpbGQgZGF0YVxuICAgIC8vIEB0b2RvIHVud3JhcCByZWN1cnNpb24gaW50byBhIHF1ZXVlIC8gbG9vcCwgdGhhdCdzIGZhc3RlciBpbiBKU1xuXG4gICAgdGhpcy5jaGlsZHJlbjsgLy8gZm9yIChsZXQgaSA9IDAsIE4gPSB0aGlzLmNoaWxkcmVuLmxlbmd0aDsgaSAhPT0gTjsgaSsrKSB7XG4gICAgLy8gICAgIGNoaWxkcmVuW2ldLmFhYmJRdWVyeShhYWJiLCByZXN1bHQpO1xuICAgIC8vIH1cblxuICAgIGNvbnN0IHF1ZXVlID0gW3RoaXNdO1xuXG4gICAgd2hpbGUgKHF1ZXVlLmxlbmd0aCkge1xuICAgICAgY29uc3Qgbm9kZSA9IHF1ZXVlLnBvcCgpO1xuXG4gICAgICBpZiAobm9kZS5hYWJiLm92ZXJsYXBzKGFhYmIpKSB7XG4gICAgICAgIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KHJlc3VsdCwgbm9kZS5kYXRhKTtcbiAgICAgIH1cblxuICAgICAgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkocXVldWUsIG5vZGUuY2hpbGRyZW4pO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBhbGwgZGF0YSwgcG90ZW50aWFsbHkgaW50ZXJzZWN0ZWQgYnkgYSByYXkuXG4gICAqIEByZXR1cm4gVGhlIFwicmVzdWx0XCIgb2JqZWN0XG4gICAqL1xuXG5cbiAgcmF5UXVlcnkocmF5LCB0cmVlVHJhbnNmb3JtLCByZXN1bHQpIHtcbiAgICAvLyBVc2UgYWFiYiBxdWVyeSBmb3Igbm93LlxuXG4gICAgLyoqIEB0b2RvIGltcGxlbWVudCByZWFsIHJheSBxdWVyeSB3aGljaCBuZWVkcyBsZXNzIGxvb2t1cHMgKi9cbiAgICByYXkuZ2V0QUFCQih0bXBBQUJCKTtcbiAgICB0bXBBQUJCLnRvTG9jYWxGcmFtZSh0cmVlVHJhbnNmb3JtLCB0bXBBQUJCKTtcbiAgICB0aGlzLmFhYmJRdWVyeSh0bXBBQUJCLCByZXN1bHQpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgLyoqXG4gICAqIHJlbW92ZUVtcHR5Tm9kZXNcbiAgICovXG5cblxuICByZW1vdmVFbXB0eU5vZGVzKCkge1xuICAgIGZvciAobGV0IGkgPSB0aGlzLmNoaWxkcmVuLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICB0aGlzLmNoaWxkcmVuW2ldLnJlbW92ZUVtcHR5Tm9kZXMoKTtcblxuICAgICAgaWYgKCF0aGlzLmNoaWxkcmVuW2ldLmNoaWxkcmVuLmxlbmd0aCAmJiAhdGhpcy5jaGlsZHJlbltpXS5kYXRhLmxlbmd0aCkge1xuICAgICAgICB0aGlzLmNoaWxkcmVuLnNwbGljZShpLCAxKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxufVxuLyoqXG4gKiBPY3RyZWVcbiAqL1xuXG5cbmNsYXNzIE9jdHJlZSBleHRlbmRzIE9jdHJlZU5vZGUge1xuICAvKipcbiAgICogTWF4aW11bSBzdWJkaXZpc2lvbiBkZXB0aFxuICAgKiBAZGVmYXVsdCA4XG4gICAqL1xuXG4gIC8qKlxuICAgKiBAcGFyYW0gYWFiYiBUaGUgdG90YWwgQUFCQiBvZiB0aGUgdHJlZVxuICAgKi9cbiAgY29uc3RydWN0b3IoYWFiYiwgb3B0aW9ucyA9IHt9KSB7XG4gICAgc3VwZXIoe1xuICAgICAgcm9vdDogbnVsbCxcbiAgICAgIGFhYmJcbiAgICB9KTtcbiAgICB0aGlzLm1heERlcHRoID0gdm9pZCAwO1xuICAgIHRoaXMubWF4RGVwdGggPSB0eXBlb2Ygb3B0aW9ucy5tYXhEZXB0aCAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLm1heERlcHRoIDogODtcbiAgfVxuXG59XG5jb25zdCBoYWxmRGlhZ29uYWwgPSBuZXcgVmVjMygpO1xuY29uc3QgdG1wQUFCQiA9IG5ldyBBQUJCKCk7XG5cbi8qKlxuICogVHJpbWVzaC5cbiAqIEBleGFtcGxlXG4gKiAgICAgLy8gSG93IHRvIG1ha2UgYSBtZXNoIHdpdGggYSBzaW5nbGUgdHJpYW5nbGVcbiAqICAgICBjb25zdCB2ZXJ0aWNlcyA9IFtcbiAqICAgICAgICAgMCwgMCwgMCwgLy8gdmVydGV4IDBcbiAqICAgICAgICAgMSwgMCwgMCwgLy8gdmVydGV4IDFcbiAqICAgICAgICAgMCwgMSwgMCAgLy8gdmVydGV4IDJcbiAqICAgICBdXG4gKiAgICAgY29uc3QgaW5kaWNlcyA9IFtcbiAqICAgICAgICAgMCwgMSwgMiAgLy8gdHJpYW5nbGUgMFxuICogICAgIF1cbiAqICAgICBjb25zdCB0cmltZXNoU2hhcGUgPSBuZXcgQ0FOTk9OLlRyaW1lc2godmVydGljZXMsIGluZGljZXMpXG4gKi9cbmNsYXNzIFRyaW1lc2ggZXh0ZW5kcyBTaGFwZSB7XG4gIC8qKlxuICAgKiB2ZXJ0aWNlc1xuICAgKi9cblxuICAvKipcbiAgICogQXJyYXkgb2YgaW50ZWdlcnMsIGluZGljYXRpbmcgd2hpY2ggdmVydGljZXMgZWFjaCB0cmlhbmdsZSBjb25zaXN0cyBvZi4gVGhlIGxlbmd0aCBvZiB0aGlzIGFycmF5IGlzIHRodXMgMyB0aW1lcyB0aGUgbnVtYmVyIG9mIHRyaWFuZ2xlcy5cbiAgICovXG5cbiAgLyoqXG4gICAqIFRoZSBub3JtYWxzIGRhdGEuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBUaGUgbG9jYWwgQUFCQiBvZiB0aGUgbWVzaC5cbiAgICovXG5cbiAgLyoqXG4gICAqIFJlZmVyZW5jZXMgdG8gdmVydGV4IHBhaXJzLCBtYWtpbmcgdXAgYWxsIHVuaXF1ZSBlZGdlcyBpbiB0aGUgdHJpbWVzaC5cbiAgICovXG5cbiAgLyoqXG4gICAqIExvY2FsIHNjYWxpbmcgb2YgdGhlIG1lc2guIFVzZSAuc2V0U2NhbGUoKSB0byBzZXQgaXQuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBUaGUgaW5kZXhlZCB0cmlhbmdsZXMuIFVzZSAudXBkYXRlVHJlZSgpIHRvIHVwZGF0ZSBpdC5cbiAgICovXG4gIGNvbnN0cnVjdG9yKHZlcnRpY2VzLCBpbmRpY2VzKSB7XG4gICAgc3VwZXIoe1xuICAgICAgdHlwZTogU2hhcGUudHlwZXMuVFJJTUVTSFxuICAgIH0pO1xuICAgIHRoaXMudmVydGljZXMgPSB2b2lkIDA7XG4gICAgdGhpcy5pbmRpY2VzID0gdm9pZCAwO1xuICAgIHRoaXMubm9ybWFscyA9IHZvaWQgMDtcbiAgICB0aGlzLmFhYmIgPSB2b2lkIDA7XG4gICAgdGhpcy5lZGdlcyA9IHZvaWQgMDtcbiAgICB0aGlzLnNjYWxlID0gdm9pZCAwO1xuICAgIHRoaXMudHJlZSA9IHZvaWQgMDtcbiAgICB0aGlzLnZlcnRpY2VzID0gbmV3IEZsb2F0MzJBcnJheSh2ZXJ0aWNlcyk7XG4gICAgdGhpcy5pbmRpY2VzID0gbmV3IEludDE2QXJyYXkoaW5kaWNlcyk7XG4gICAgdGhpcy5ub3JtYWxzID0gbmV3IEZsb2F0MzJBcnJheShpbmRpY2VzLmxlbmd0aCk7XG4gICAgdGhpcy5hYWJiID0gbmV3IEFBQkIoKTtcbiAgICB0aGlzLmVkZ2VzID0gbnVsbDtcbiAgICB0aGlzLnNjYWxlID0gbmV3IFZlYzMoMSwgMSwgMSk7XG4gICAgdGhpcy50cmVlID0gbmV3IE9jdHJlZSgpO1xuICAgIHRoaXMudXBkYXRlRWRnZXMoKTtcbiAgICB0aGlzLnVwZGF0ZU5vcm1hbHMoKTtcbiAgICB0aGlzLnVwZGF0ZUFBQkIoKTtcbiAgICB0aGlzLnVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCk7XG4gICAgdGhpcy51cGRhdGVUcmVlKCk7XG4gIH1cbiAgLyoqXG4gICAqIHVwZGF0ZVRyZWVcbiAgICovXG5cblxuICB1cGRhdGVUcmVlKCkge1xuICAgIGNvbnN0IHRyZWUgPSB0aGlzLnRyZWU7XG4gICAgdHJlZS5yZXNldCgpO1xuICAgIHRyZWUuYWFiYi5jb3B5KHRoaXMuYWFiYik7XG4gICAgY29uc3Qgc2NhbGUgPSB0aGlzLnNjYWxlOyAvLyBUaGUgbG9jYWwgbWVzaCBBQUJCIGlzIHNjYWxlZCwgYnV0IHRoZSBvY3RyZWUgQUFCQiBzaG91bGQgYmUgdW5zY2FsZWRcblxuICAgIHRyZWUuYWFiYi5sb3dlckJvdW5kLnggKj0gMSAvIHNjYWxlLng7XG4gICAgdHJlZS5hYWJiLmxvd2VyQm91bmQueSAqPSAxIC8gc2NhbGUueTtcbiAgICB0cmVlLmFhYmIubG93ZXJCb3VuZC56ICo9IDEgLyBzY2FsZS56O1xuICAgIHRyZWUuYWFiYi51cHBlckJvdW5kLnggKj0gMSAvIHNjYWxlLng7XG4gICAgdHJlZS5hYWJiLnVwcGVyQm91bmQueSAqPSAxIC8gc2NhbGUueTtcbiAgICB0cmVlLmFhYmIudXBwZXJCb3VuZC56ICo9IDEgLyBzY2FsZS56OyAvLyBJbnNlcnQgYWxsIHRyaWFuZ2xlc1xuXG4gICAgY29uc3QgdHJpYW5nbGVBQUJCID0gbmV3IEFBQkIoKTtcbiAgICBjb25zdCBhID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCBiID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCBjID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCBwb2ludHMgPSBbYSwgYiwgY107XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuaW5kaWNlcy5sZW5ndGggLyAzOyBpKyspIHtcbiAgICAgIC8vdGhpcy5nZXRUcmlhbmdsZVZlcnRpY2VzKGksIGEsIGIsIGMpO1xuICAgICAgLy8gR2V0IHVuc2NhbGVkIHRyaWFuZ2xlIHZlcnRzXG4gICAgICBjb25zdCBpMyA9IGkgKiAzO1xuXG4gICAgICB0aGlzLl9nZXRVbnNjYWxlZFZlcnRleCh0aGlzLmluZGljZXNbaTNdLCBhKTtcblxuICAgICAgdGhpcy5fZ2V0VW5zY2FsZWRWZXJ0ZXgodGhpcy5pbmRpY2VzW2kzICsgMV0sIGIpO1xuXG4gICAgICB0aGlzLl9nZXRVbnNjYWxlZFZlcnRleCh0aGlzLmluZGljZXNbaTMgKyAyXSwgYyk7XG5cbiAgICAgIHRyaWFuZ2xlQUFCQi5zZXRGcm9tUG9pbnRzKHBvaW50cyk7XG4gICAgICB0cmVlLmluc2VydCh0cmlhbmdsZUFBQkIsIGkpO1xuICAgIH1cblxuICAgIHRyZWUucmVtb3ZlRW1wdHlOb2RlcygpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdHJpYW5nbGVzIGluIGEgbG9jYWwgQUFCQiBmcm9tIHRoZSB0cmltZXNoLlxuICAgKiBAcGFyYW0gcmVzdWx0IEFuIGFycmF5IG9mIGludGVnZXJzLCByZWZlcmVuY2luZyB0aGUgcXVlcmllZCB0cmlhbmdsZXMuXG4gICAqL1xuXG5cbiAgZ2V0VHJpYW5nbGVzSW5BQUJCKGFhYmIsIHJlc3VsdCkge1xuICAgIHVuc2NhbGVkQUFCQi5jb3B5KGFhYmIpOyAvLyBTY2FsZSBpdCB0byBsb2NhbFxuXG4gICAgY29uc3Qgc2NhbGUgPSB0aGlzLnNjYWxlO1xuICAgIGNvbnN0IGlzeCA9IHNjYWxlLng7XG4gICAgY29uc3QgaXN5ID0gc2NhbGUueTtcbiAgICBjb25zdCBpc3ogPSBzY2FsZS56O1xuICAgIGNvbnN0IGwgPSB1bnNjYWxlZEFBQkIubG93ZXJCb3VuZDtcbiAgICBjb25zdCB1ID0gdW5zY2FsZWRBQUJCLnVwcGVyQm91bmQ7XG4gICAgbC54IC89IGlzeDtcbiAgICBsLnkgLz0gaXN5O1xuICAgIGwueiAvPSBpc3o7XG4gICAgdS54IC89IGlzeDtcbiAgICB1LnkgLz0gaXN5O1xuICAgIHUueiAvPSBpc3o7XG4gICAgcmV0dXJuIHRoaXMudHJlZS5hYWJiUXVlcnkodW5zY2FsZWRBQUJCLCByZXN1bHQpO1xuICB9XG4gIC8qKlxuICAgKiBzZXRTY2FsZVxuICAgKi9cblxuXG4gIHNldFNjYWxlKHNjYWxlKSB7XG4gICAgY29uc3Qgd2FzVW5pZm9ybSA9IHRoaXMuc2NhbGUueCA9PT0gdGhpcy5zY2FsZS55ICYmIHRoaXMuc2NhbGUueSA9PT0gdGhpcy5zY2FsZS56O1xuICAgIGNvbnN0IGlzVW5pZm9ybSA9IHNjYWxlLnggPT09IHNjYWxlLnkgJiYgc2NhbGUueSA9PT0gc2NhbGUuejtcblxuICAgIGlmICghKHdhc1VuaWZvcm0gJiYgaXNVbmlmb3JtKSkge1xuICAgICAgLy8gTm9uLXVuaWZvcm0gc2NhbGluZy4gTmVlZCB0byB1cGRhdGUgbm9ybWFscy5cbiAgICAgIHRoaXMudXBkYXRlTm9ybWFscygpO1xuICAgIH1cblxuICAgIHRoaXMuc2NhbGUuY29weShzY2FsZSk7XG4gICAgdGhpcy51cGRhdGVBQUJCKCk7XG4gICAgdGhpcy51cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpO1xuICB9XG4gIC8qKlxuICAgKiBDb21wdXRlIHRoZSBub3JtYWxzIG9mIHRoZSBmYWNlcy4gV2lsbCBzYXZlIGluIHRoZSBgLm5vcm1hbHNgIGFycmF5LlxuICAgKi9cblxuXG4gIHVwZGF0ZU5vcm1hbHMoKSB7XG4gICAgY29uc3QgbiA9IGNvbXB1dGVOb3JtYWxzX247IC8vIEdlbmVyYXRlIG5vcm1hbHNcblxuICAgIGNvbnN0IG5vcm1hbHMgPSB0aGlzLm5vcm1hbHM7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuaW5kaWNlcy5sZW5ndGggLyAzOyBpKyspIHtcbiAgICAgIGNvbnN0IGkzID0gaSAqIDM7XG4gICAgICBjb25zdCBhID0gdGhpcy5pbmRpY2VzW2kzXTtcbiAgICAgIGNvbnN0IGIgPSB0aGlzLmluZGljZXNbaTMgKyAxXTtcbiAgICAgIGNvbnN0IGMgPSB0aGlzLmluZGljZXNbaTMgKyAyXTtcbiAgICAgIHRoaXMuZ2V0VmVydGV4KGEsIHZhKTtcbiAgICAgIHRoaXMuZ2V0VmVydGV4KGIsIHZiKTtcbiAgICAgIHRoaXMuZ2V0VmVydGV4KGMsIHZjKTtcbiAgICAgIFRyaW1lc2guY29tcHV0ZU5vcm1hbCh2YiwgdmEsIHZjLCBuKTtcbiAgICAgIG5vcm1hbHNbaTNdID0gbi54O1xuICAgICAgbm9ybWFsc1tpMyArIDFdID0gbi55O1xuICAgICAgbm9ybWFsc1tpMyArIDJdID0gbi56O1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogVXBkYXRlIHRoZSBgLmVkZ2VzYCBwcm9wZXJ0eVxuICAgKi9cblxuXG4gIHVwZGF0ZUVkZ2VzKCkge1xuICAgIGNvbnN0IGVkZ2VzID0ge307XG5cbiAgICBjb25zdCBhZGQgPSAoYSwgYikgPT4ge1xuICAgICAgY29uc3Qga2V5ID0gYSA8IGIgPyBhICsgXCJfXCIgKyBiIDogYiArIFwiX1wiICsgYTtcbiAgICAgIGVkZ2VzW2tleV0gPSB0cnVlO1xuICAgIH07XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuaW5kaWNlcy5sZW5ndGggLyAzOyBpKyspIHtcbiAgICAgIGNvbnN0IGkzID0gaSAqIDM7XG4gICAgICBjb25zdCBhID0gdGhpcy5pbmRpY2VzW2kzXTtcbiAgICAgIGNvbnN0IGIgPSB0aGlzLmluZGljZXNbaTMgKyAxXTtcbiAgICAgIGNvbnN0IGMgPSB0aGlzLmluZGljZXNbaTMgKyAyXTtcbiAgICAgIGFkZChhLCBiKTtcbiAgICAgIGFkZChiLCBjKTtcbiAgICAgIGFkZChjLCBhKTtcbiAgICB9XG5cbiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoZWRnZXMpO1xuICAgIHRoaXMuZWRnZXMgPSBuZXcgSW50MTZBcnJheShrZXlzLmxlbmd0aCAqIDIpO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBpbmRpY2VzID0ga2V5c1tpXS5zcGxpdCgnXycpO1xuICAgICAgdGhpcy5lZGdlc1syICogaV0gPSBwYXJzZUludChpbmRpY2VzWzBdLCAxMCk7XG4gICAgICB0aGlzLmVkZ2VzWzIgKiBpICsgMV0gPSBwYXJzZUludChpbmRpY2VzWzFdLCAxMCk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBHZXQgYW4gZWRnZSB2ZXJ0ZXhcbiAgICogQHBhcmFtIGZpcnN0T3JTZWNvbmQgMCBvciAxLCBkZXBlbmRpbmcgb24gd2hpY2ggb25lIG9mIHRoZSB2ZXJ0aWNlcyB5b3UgbmVlZC5cbiAgICogQHBhcmFtIHZlcnRleFN0b3JlIFdoZXJlIHRvIHN0b3JlIHRoZSByZXN1bHRcbiAgICovXG5cblxuICBnZXRFZGdlVmVydGV4KGVkZ2VJbmRleCwgZmlyc3RPclNlY29uZCwgdmVydGV4U3RvcmUpIHtcbiAgICBjb25zdCB2ZXJ0ZXhJbmRleCA9IHRoaXMuZWRnZXNbZWRnZUluZGV4ICogMiArIChmaXJzdE9yU2Vjb25kID8gMSA6IDApXTtcbiAgICB0aGlzLmdldFZlcnRleCh2ZXJ0ZXhJbmRleCwgdmVydGV4U3RvcmUpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgYSB2ZWN0b3IgYWxvbmcgYW4gZWRnZS5cbiAgICovXG5cblxuICBnZXRFZGdlVmVjdG9yKGVkZ2VJbmRleCwgdmVjdG9yU3RvcmUpIHtcbiAgICBjb25zdCB2YSA9IGdldEVkZ2VWZWN0b3JfdmE7XG4gICAgY29uc3QgdmIgPSBnZXRFZGdlVmVjdG9yX3ZiO1xuICAgIHRoaXMuZ2V0RWRnZVZlcnRleChlZGdlSW5kZXgsIDAsIHZhKTtcbiAgICB0aGlzLmdldEVkZ2VWZXJ0ZXgoZWRnZUluZGV4LCAxLCB2Yik7XG4gICAgdmIudnN1Yih2YSwgdmVjdG9yU3RvcmUpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgZmFjZSBub3JtYWwgZ2l2ZW4gMyB2ZXJ0aWNlc1xuICAgKi9cblxuXG4gIHN0YXRpYyBjb21wdXRlTm9ybWFsKHZhLCB2YiwgdmMsIHRhcmdldCkge1xuICAgIHZiLnZzdWIodmEsIGFiKTtcbiAgICB2Yy52c3ViKHZiLCBjYik7XG4gICAgY2IuY3Jvc3MoYWIsIHRhcmdldCk7XG5cbiAgICBpZiAoIXRhcmdldC5pc1plcm8oKSkge1xuICAgICAgdGFyZ2V0Lm5vcm1hbGl6ZSgpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogR2V0IHZlcnRleCBpLlxuICAgKiBAcmV0dXJuIFRoZSBcIm91dFwiIHZlY3RvciBvYmplY3RcbiAgICovXG5cblxuICBnZXRWZXJ0ZXgoaSwgb3V0KSB7XG4gICAgY29uc3Qgc2NhbGUgPSB0aGlzLnNjYWxlO1xuXG4gICAgdGhpcy5fZ2V0VW5zY2FsZWRWZXJ0ZXgoaSwgb3V0KTtcblxuICAgIG91dC54ICo9IHNjYWxlLng7XG4gICAgb3V0LnkgKj0gc2NhbGUueTtcbiAgICBvdXQueiAqPSBzY2FsZS56O1xuICAgIHJldHVybiBvdXQ7XG4gIH1cbiAgLyoqXG4gICAqIEdldCByYXcgdmVydGV4IGlcbiAgICogQHJldHVybiBUaGUgXCJvdXRcIiB2ZWN0b3Igb2JqZWN0XG4gICAqL1xuXG5cbiAgX2dldFVuc2NhbGVkVmVydGV4KGksIG91dCkge1xuICAgIGNvbnN0IGkzID0gaSAqIDM7XG4gICAgY29uc3QgdmVydGljZXMgPSB0aGlzLnZlcnRpY2VzO1xuICAgIHJldHVybiBvdXQuc2V0KHZlcnRpY2VzW2kzXSwgdmVydGljZXNbaTMgKyAxXSwgdmVydGljZXNbaTMgKyAyXSk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBhIHZlcnRleCBmcm9tIHRoZSB0cmltZXNoLHRyYW5zZm9ybWVkIGJ5IHRoZSBnaXZlbiBwb3NpdGlvbiBhbmQgcXVhdGVybmlvbi5cbiAgICogQHJldHVybiBUaGUgXCJvdXRcIiB2ZWN0b3Igb2JqZWN0XG4gICAqL1xuXG5cbiAgZ2V0V29ybGRWZXJ0ZXgoaSwgcG9zLCBxdWF0LCBvdXQpIHtcbiAgICB0aGlzLmdldFZlcnRleChpLCBvdXQpO1xuICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZShwb3MsIHF1YXQsIG91dCwgb3V0KTtcbiAgICByZXR1cm4gb3V0O1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIHRocmVlIHZlcnRpY2VzIGZvciB0cmlhbmdsZSBpLlxuICAgKi9cblxuXG4gIGdldFRyaWFuZ2xlVmVydGljZXMoaSwgYSwgYiwgYykge1xuICAgIGNvbnN0IGkzID0gaSAqIDM7XG4gICAgdGhpcy5nZXRWZXJ0ZXgodGhpcy5pbmRpY2VzW2kzXSwgYSk7XG4gICAgdGhpcy5nZXRWZXJ0ZXgodGhpcy5pbmRpY2VzW2kzICsgMV0sIGIpO1xuICAgIHRoaXMuZ2V0VmVydGV4KHRoaXMuaW5kaWNlc1tpMyArIDJdLCBjKTtcbiAgfVxuICAvKipcbiAgICogQ29tcHV0ZSB0aGUgbm9ybWFsIG9mIHRyaWFuZ2xlIGkuXG4gICAqIEByZXR1cm4gVGhlIFwidGFyZ2V0XCIgdmVjdG9yIG9iamVjdFxuICAgKi9cblxuXG4gIGdldE5vcm1hbChpLCB0YXJnZXQpIHtcbiAgICBjb25zdCBpMyA9IGkgKiAzO1xuICAgIHJldHVybiB0YXJnZXQuc2V0KHRoaXMubm9ybWFsc1tpM10sIHRoaXMubm9ybWFsc1tpMyArIDFdLCB0aGlzLm5vcm1hbHNbaTMgKyAyXSk7XG4gIH1cbiAgLyoqXG4gICAqIEByZXR1cm4gVGhlIFwidGFyZ2V0XCIgdmVjdG9yIG9iamVjdFxuICAgKi9cblxuXG4gIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYShtYXNzLCB0YXJnZXQpIHtcbiAgICAvLyBBcHByb3hpbWF0ZSB3aXRoIGJveCBpbmVydGlhXG4gICAgLy8gRXhhY3QgaW5lcnRpYSBjYWxjdWxhdGlvbiBpcyBvdmVya2lsbCwgYnV0IHNlZSBodHRwOi8vZ2VvbWV0cmljdG9vbHMuY29tL0RvY3VtZW50YXRpb24vUG9seWhlZHJhbE1hc3NQcm9wZXJ0aWVzLnBkZiBmb3IgdGhlIGNvcnJlY3Qgd2F5IHRvIGRvIGl0XG4gICAgdGhpcy5jb21wdXRlTG9jYWxBQUJCKGNsaV9hYWJiKTtcbiAgICBjb25zdCB4ID0gY2xpX2FhYmIudXBwZXJCb3VuZC54IC0gY2xpX2FhYmIubG93ZXJCb3VuZC54O1xuICAgIGNvbnN0IHkgPSBjbGlfYWFiYi51cHBlckJvdW5kLnkgLSBjbGlfYWFiYi5sb3dlckJvdW5kLnk7XG4gICAgY29uc3QgeiA9IGNsaV9hYWJiLnVwcGVyQm91bmQueiAtIGNsaV9hYWJiLmxvd2VyQm91bmQuejtcbiAgICByZXR1cm4gdGFyZ2V0LnNldCgxLjAgLyAxMi4wICogbWFzcyAqICgyICogeSAqIDIgKiB5ICsgMiAqIHogKiAyICogeiksIDEuMCAvIDEyLjAgKiBtYXNzICogKDIgKiB4ICogMiAqIHggKyAyICogeiAqIDIgKiB6KSwgMS4wIC8gMTIuMCAqIG1hc3MgKiAoMiAqIHkgKiAyICogeSArIDIgKiB4ICogMiAqIHgpKTtcbiAgfVxuICAvKipcbiAgICogQ29tcHV0ZSB0aGUgbG9jYWwgQUFCQiBmb3IgdGhlIHRyaW1lc2hcbiAgICovXG5cblxuICBjb21wdXRlTG9jYWxBQUJCKGFhYmIpIHtcbiAgICBjb25zdCBsID0gYWFiYi5sb3dlckJvdW5kO1xuICAgIGNvbnN0IHUgPSBhYWJiLnVwcGVyQm91bmQ7XG4gICAgY29uc3QgbiA9IHRoaXMudmVydGljZXMubGVuZ3RoO1xuICAgIHRoaXMudmVydGljZXM7XG4gICAgY29uc3QgdiA9IGNvbXB1dGVMb2NhbEFBQkJfd29ybGRWZXJ0O1xuICAgIHRoaXMuZ2V0VmVydGV4KDAsIHYpO1xuICAgIGwuY29weSh2KTtcbiAgICB1LmNvcHkodik7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gbjsgaSsrKSB7XG4gICAgICB0aGlzLmdldFZlcnRleChpLCB2KTtcblxuICAgICAgaWYgKHYueCA8IGwueCkge1xuICAgICAgICBsLnggPSB2Lng7XG4gICAgICB9IGVsc2UgaWYgKHYueCA+IHUueCkge1xuICAgICAgICB1LnggPSB2Lng7XG4gICAgICB9XG5cbiAgICAgIGlmICh2LnkgPCBsLnkpIHtcbiAgICAgICAgbC55ID0gdi55O1xuICAgICAgfSBlbHNlIGlmICh2LnkgPiB1LnkpIHtcbiAgICAgICAgdS55ID0gdi55O1xuICAgICAgfVxuXG4gICAgICBpZiAodi56IDwgbC56KSB7XG4gICAgICAgIGwueiA9IHYuejtcbiAgICAgIH0gZWxzZSBpZiAodi56ID4gdS56KSB7XG4gICAgICAgIHUueiA9IHYuejtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFVwZGF0ZSB0aGUgYC5hYWJiYCBwcm9wZXJ0eVxuICAgKi9cblxuXG4gIHVwZGF0ZUFBQkIoKSB7XG4gICAgdGhpcy5jb21wdXRlTG9jYWxBQUJCKHRoaXMuYWFiYik7XG4gIH1cbiAgLyoqXG4gICAqIFdpbGwgdXBkYXRlIHRoZSBgLmJvdW5kaW5nU3BoZXJlUmFkaXVzYCBwcm9wZXJ0eVxuICAgKi9cblxuXG4gIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCkge1xuICAgIC8vIEFzc3VtZSBwb2ludHMgYXJlIGRpc3RyaWJ1dGVkIHdpdGggbG9jYWwgKDAsMCwwKSBhcyBjZW50ZXJcbiAgICBsZXQgbWF4MiA9IDA7XG4gICAgY29uc3QgdmVydGljZXMgPSB0aGlzLnZlcnRpY2VzO1xuICAgIGNvbnN0IHYgPSBuZXcgVmVjMygpO1xuXG4gICAgZm9yIChsZXQgaSA9IDAsIE4gPSB2ZXJ0aWNlcy5sZW5ndGggLyAzOyBpICE9PSBOOyBpKyspIHtcbiAgICAgIHRoaXMuZ2V0VmVydGV4KGksIHYpO1xuICAgICAgY29uc3Qgbm9ybTIgPSB2Lmxlbmd0aFNxdWFyZWQoKTtcblxuICAgICAgaWYgKG5vcm0yID4gbWF4Mikge1xuICAgICAgICBtYXgyID0gbm9ybTI7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IE1hdGguc3FydChtYXgyKTtcbiAgfVxuICAvKipcbiAgICogY2FsY3VsYXRlV29ybGRBQUJCXG4gICAqL1xuXG5cbiAgY2FsY3VsYXRlV29ybGRBQUJCKHBvcywgcXVhdCwgbWluLCBtYXgpIHtcbiAgICAvKlxuICAgICAgICBjb25zdCBuID0gdGhpcy52ZXJ0aWNlcy5sZW5ndGggLyAzLFxuICAgICAgICAgICAgdmVydHMgPSB0aGlzLnZlcnRpY2VzO1xuICAgICAgICBjb25zdCBtaW54LG1pbnksbWlueixtYXh4LG1heHksbWF4ejtcbiAgICAgICAgIGNvbnN0IHYgPSB0ZW1wV29ybGRWZXJ0ZXg7XG4gICAgICAgIGZvcihsZXQgaT0wOyBpPG47IGkrKyl7XG4gICAgICAgICAgICB0aGlzLmdldFZlcnRleChpLCB2KTtcbiAgICAgICAgICAgIHF1YXQudm11bHQodiwgdik7XG4gICAgICAgICAgICBwb3MudmFkZCh2LCB2KTtcbiAgICAgICAgICAgIGlmICh2LnggPCBtaW54IHx8IG1pbng9PT11bmRlZmluZWQpe1xuICAgICAgICAgICAgICAgIG1pbnggPSB2Lng7XG4gICAgICAgICAgICB9IGVsc2UgaWYodi54ID4gbWF4eCB8fCBtYXh4PT09dW5kZWZpbmVkKXtcbiAgICAgICAgICAgICAgICBtYXh4ID0gdi54O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgIGlmICh2LnkgPCBtaW55IHx8IG1pbnk9PT11bmRlZmluZWQpe1xuICAgICAgICAgICAgICAgIG1pbnkgPSB2Lnk7XG4gICAgICAgICAgICB9IGVsc2UgaWYodi55ID4gbWF4eSB8fCBtYXh5PT09dW5kZWZpbmVkKXtcbiAgICAgICAgICAgICAgICBtYXh5ID0gdi55O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgIGlmICh2LnogPCBtaW56IHx8IG1pbno9PT11bmRlZmluZWQpe1xuICAgICAgICAgICAgICAgIG1pbnogPSB2Lno7XG4gICAgICAgICAgICB9IGVsc2UgaWYodi56ID4gbWF4eiB8fCBtYXh6PT09dW5kZWZpbmVkKXtcbiAgICAgICAgICAgICAgICBtYXh6ID0gdi56O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIG1pbi5zZXQobWlueCxtaW55LG1pbnopO1xuICAgICAgICBtYXguc2V0KG1heHgsbWF4eSxtYXh6KTtcbiAgICAgICAgKi9cbiAgICAvLyBGYXN0ZXIgYXBwcm94aW1hdGlvbiB1c2luZyBsb2NhbCBBQUJCXG4gICAgY29uc3QgZnJhbWUgPSBjYWxjdWxhdGVXb3JsZEFBQkJfZnJhbWU7XG4gICAgY29uc3QgcmVzdWx0ID0gY2FsY3VsYXRlV29ybGRBQUJCX2FhYmI7XG4gICAgZnJhbWUucG9zaXRpb24gPSBwb3M7XG4gICAgZnJhbWUucXVhdGVybmlvbiA9IHF1YXQ7XG4gICAgdGhpcy5hYWJiLnRvV29ybGRGcmFtZShmcmFtZSwgcmVzdWx0KTtcbiAgICBtaW4uY29weShyZXN1bHQubG93ZXJCb3VuZCk7XG4gICAgbWF4LmNvcHkocmVzdWx0LnVwcGVyQm91bmQpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgYXBwcm94aW1hdGUgdm9sdW1lXG4gICAqL1xuXG5cbiAgdm9sdW1lKCkge1xuICAgIHJldHVybiA0LjAgKiBNYXRoLlBJICogdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyAvIDMuMDtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIGEgVHJpbWVzaCBpbnN0YW5jZSwgc2hhcGVkIGFzIGEgdG9ydXMuXG4gICAqL1xuXG5cbiAgc3RhdGljIGNyZWF0ZVRvcnVzKHJhZGl1cyA9IDEsIHR1YmUgPSAwLjUsIHJhZGlhbFNlZ21lbnRzID0gOCwgdHVidWxhclNlZ21lbnRzID0gNiwgYXJjID0gTWF0aC5QSSAqIDIpIHtcbiAgICBjb25zdCB2ZXJ0aWNlcyA9IFtdO1xuICAgIGNvbnN0IGluZGljZXMgPSBbXTtcblxuICAgIGZvciAobGV0IGogPSAwOyBqIDw9IHJhZGlhbFNlZ21lbnRzOyBqKyspIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IHR1YnVsYXJTZWdtZW50czsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHUgPSBpIC8gdHVidWxhclNlZ21lbnRzICogYXJjO1xuICAgICAgICBjb25zdCB2ID0gaiAvIHJhZGlhbFNlZ21lbnRzICogTWF0aC5QSSAqIDI7XG4gICAgICAgIGNvbnN0IHggPSAocmFkaXVzICsgdHViZSAqIE1hdGguY29zKHYpKSAqIE1hdGguY29zKHUpO1xuICAgICAgICBjb25zdCB5ID0gKHJhZGl1cyArIHR1YmUgKiBNYXRoLmNvcyh2KSkgKiBNYXRoLnNpbih1KTtcbiAgICAgICAgY29uc3QgeiA9IHR1YmUgKiBNYXRoLnNpbih2KTtcbiAgICAgICAgdmVydGljZXMucHVzaCh4LCB5LCB6KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKGxldCBqID0gMTsgaiA8PSByYWRpYWxTZWdtZW50czsgaisrKSB7XG4gICAgICBmb3IgKGxldCBpID0gMTsgaSA8PSB0dWJ1bGFyU2VnbWVudHM7IGkrKykge1xuICAgICAgICBjb25zdCBhID0gKHR1YnVsYXJTZWdtZW50cyArIDEpICogaiArIGkgLSAxO1xuICAgICAgICBjb25zdCBiID0gKHR1YnVsYXJTZWdtZW50cyArIDEpICogKGogLSAxKSArIGkgLSAxO1xuICAgICAgICBjb25zdCBjID0gKHR1YnVsYXJTZWdtZW50cyArIDEpICogKGogLSAxKSArIGk7XG4gICAgICAgIGNvbnN0IGQgPSAodHVidWxhclNlZ21lbnRzICsgMSkgKiBqICsgaTtcbiAgICAgICAgaW5kaWNlcy5wdXNoKGEsIGIsIGQpO1xuICAgICAgICBpbmRpY2VzLnB1c2goYiwgYywgZCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBUcmltZXNoKHZlcnRpY2VzLCBpbmRpY2VzKTtcbiAgfVxuXG59XG5jb25zdCBjb21wdXRlTm9ybWFsc19uID0gbmV3IFZlYzMoKTtcbmNvbnN0IHVuc2NhbGVkQUFCQiA9IG5ldyBBQUJCKCk7XG5jb25zdCBnZXRFZGdlVmVjdG9yX3ZhID0gbmV3IFZlYzMoKTtcbmNvbnN0IGdldEVkZ2VWZWN0b3JfdmIgPSBuZXcgVmVjMygpO1xuY29uc3QgY2IgPSBuZXcgVmVjMygpO1xuY29uc3QgYWIgPSBuZXcgVmVjMygpO1xuY29uc3QgdmEgPSBuZXcgVmVjMygpO1xuY29uc3QgdmIgPSBuZXcgVmVjMygpO1xuY29uc3QgdmMgPSBuZXcgVmVjMygpO1xuY29uc3QgY2xpX2FhYmIgPSBuZXcgQUFCQigpO1xuY29uc3QgY29tcHV0ZUxvY2FsQUFCQl93b3JsZFZlcnQgPSBuZXcgVmVjMygpO1xuY29uc3QgY2FsY3VsYXRlV29ybGRBQUJCX2ZyYW1lID0gbmV3IFRyYW5zZm9ybSgpO1xuY29uc3QgY2FsY3VsYXRlV29ybGRBQUJCX2FhYmIgPSBuZXcgQUFCQigpO1xuXG4vKipcbiAqIENvbnN0cmFpbnQgZXF1YXRpb24gc29sdmVyIGJhc2UgY2xhc3MuXG4gKi9cbmNsYXNzIFNvbHZlciB7XG4gIC8qKlxuICAgKiBBbGwgZXF1YXRpb25zIHRvIGJlIHNvbHZlZFxuICAgKi9cblxuICAvKipcbiAgICogQHRvZG8gcmVtb3ZlIHVzZWxlc3MgY29uc3RydWN0b3JcbiAgICovXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuZXF1YXRpb25zID0gdm9pZCAwO1xuICAgIHRoaXMuZXF1YXRpb25zID0gW107XG4gIH1cbiAgLyoqXG4gICAqIFNob3VsZCBiZSBpbXBsZW1lbnRlZCBpbiBzdWJjbGFzc2VzIVxuICAgKiBAdG9kbyB1c2UgYWJzdHJhY3RcbiAgICogQHJldHVybiBudW1iZXIgb2YgaXRlcmF0aW9ucyBwZXJmb3JtZWRcbiAgICovXG5cblxuICBzb2x2ZShkdCwgd29ybGQpIHtcbiAgICByZXR1cm4gKC8vIFNob3VsZCByZXR1cm4gdGhlIG51bWJlciBvZiBpdGVyYXRpb25zIGRvbmUhXG4gICAgICAwXG4gICAgKTtcbiAgfVxuICAvKipcbiAgICogQWRkIGFuIGVxdWF0aW9uXG4gICAqL1xuXG5cbiAgYWRkRXF1YXRpb24oZXEpIHtcbiAgICBpZiAoZXEuZW5hYmxlZCAmJiAhZXEuYmkuaXNUcmlnZ2VyICYmICFlcS5iai5pc1RyaWdnZXIpIHtcbiAgICAgIHRoaXMuZXF1YXRpb25zLnB1c2goZXEpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogUmVtb3ZlIGFuIGVxdWF0aW9uXG4gICAqL1xuXG5cbiAgcmVtb3ZlRXF1YXRpb24oZXEpIHtcbiAgICBjb25zdCBlcXMgPSB0aGlzLmVxdWF0aW9ucztcbiAgICBjb25zdCBpID0gZXFzLmluZGV4T2YoZXEpO1xuXG4gICAgaWYgKGkgIT09IC0xKSB7XG4gICAgICBlcXMuc3BsaWNlKGksIDEpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQWRkIGFsbCBlcXVhdGlvbnNcbiAgICovXG5cblxuICByZW1vdmVBbGxFcXVhdGlvbnMoKSB7XG4gICAgdGhpcy5lcXVhdGlvbnMubGVuZ3RoID0gMDtcbiAgfVxuXG59XG5cbi8qKlxuICogQ29uc3RyYWludCBlcXVhdGlvbiBHYXVzcy1TZWlkZWwgc29sdmVyLlxuICogQHRvZG8gVGhlIHNwb29rIHBhcmFtZXRlcnMgc2hvdWxkIGJlIHNwZWNpZmllZCBmb3IgZWFjaCBjb25zdHJhaW50LCBub3QgZ2xvYmFsbHkuXG4gKiBAc2VlIGh0dHBzOi8vd3d3OC5jcy51bXUuc2Uva3Vyc2VyLzVEVjA1OC9WVDA5L2xlY3R1cmVzL3Nwb29rbm90ZXMucGRmXG4gKi9cbmNsYXNzIEdTU29sdmVyIGV4dGVuZHMgU29sdmVyIHtcbiAgLyoqXG4gICAqIFRoZSBudW1iZXIgb2Ygc29sdmVyIGl0ZXJhdGlvbnMgZGV0ZXJtaW5lcyBxdWFsaXR5IG9mIHRoZSBjb25zdHJhaW50cyBpbiB0aGUgd29ybGQuXG4gICAqIFRoZSBtb3JlIGl0ZXJhdGlvbnMsIHRoZSBtb3JlIGNvcnJlY3Qgc2ltdWxhdGlvbi4gTW9yZSBpdGVyYXRpb25zIG5lZWQgbW9yZSBjb21wdXRhdGlvbnMgdGhvdWdoLiBJZiB5b3UgaGF2ZSBhIGxhcmdlIGdyYXZpdHkgZm9yY2UgaW4geW91ciB3b3JsZCwgeW91IHdpbGwgbmVlZCBtb3JlIGl0ZXJhdGlvbnMuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBXaGVuIHRvbGVyYW5jZSBpcyByZWFjaGVkLCB0aGUgc3lzdGVtIGlzIGFzc3VtZWQgdG8gYmUgY29udmVyZ2VkLlxuICAgKi9cblxuICAvKipcbiAgICogQHRvZG8gcmVtb3ZlIHVzZWxlc3MgY29uc3RydWN0b3JcbiAgICovXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5pdGVyYXRpb25zID0gdm9pZCAwO1xuICAgIHRoaXMudG9sZXJhbmNlID0gdm9pZCAwO1xuICAgIHRoaXMuaXRlcmF0aW9ucyA9IDEwO1xuICAgIHRoaXMudG9sZXJhbmNlID0gMWUtNztcbiAgfVxuICAvKipcbiAgICogU29sdmVcbiAgICogQHJldHVybiBudW1iZXIgb2YgaXRlcmF0aW9ucyBwZXJmb3JtZWRcbiAgICovXG5cblxuICBzb2x2ZShkdCwgd29ybGQpIHtcbiAgICBsZXQgaXRlciA9IDA7XG4gICAgY29uc3QgbWF4SXRlciA9IHRoaXMuaXRlcmF0aW9ucztcbiAgICBjb25zdCB0b2xTcXVhcmVkID0gdGhpcy50b2xlcmFuY2UgKiB0aGlzLnRvbGVyYW5jZTtcbiAgICBjb25zdCBlcXVhdGlvbnMgPSB0aGlzLmVxdWF0aW9ucztcbiAgICBjb25zdCBOZXEgPSBlcXVhdGlvbnMubGVuZ3RoO1xuICAgIGNvbnN0IGJvZGllcyA9IHdvcmxkLmJvZGllcztcbiAgICBjb25zdCBOYm9kaWVzID0gYm9kaWVzLmxlbmd0aDtcbiAgICBjb25zdCBoID0gZHQ7XG4gICAgbGV0IEI7XG4gICAgbGV0IGludkM7XG4gICAgbGV0IGRlbHRhbGFtYmRhO1xuICAgIGxldCBkZWx0YWxhbWJkYVRvdDtcbiAgICBsZXQgR1dsYW1iZGE7XG4gICAgbGV0IGxhbWJkYWo7IC8vIFVwZGF0ZSBzb2x2ZSBtYXNzXG5cbiAgICBpZiAoTmVxICE9PSAwKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTmJvZGllczsgaSsrKSB7XG4gICAgICAgIGJvZGllc1tpXS51cGRhdGVTb2x2ZU1hc3NQcm9wZXJ0aWVzKCk7XG4gICAgICB9XG4gICAgfSAvLyBUaGluZ3MgdGhhdCBkbyBub3QgY2hhbmdlIGR1cmluZyBpdGVyYXRpb24gY2FuIGJlIGNvbXB1dGVkIG9uY2VcblxuXG4gICAgY29uc3QgaW52Q3MgPSBHU1NvbHZlcl9zb2x2ZV9pbnZDcztcbiAgICBjb25zdCBCcyA9IEdTU29sdmVyX3NvbHZlX0JzO1xuICAgIGNvbnN0IGxhbWJkYSA9IEdTU29sdmVyX3NvbHZlX2xhbWJkYTtcbiAgICBpbnZDcy5sZW5ndGggPSBOZXE7XG4gICAgQnMubGVuZ3RoID0gTmVxO1xuICAgIGxhbWJkYS5sZW5ndGggPSBOZXE7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTmVxOyBpKyspIHtcbiAgICAgIGNvbnN0IGMgPSBlcXVhdGlvbnNbaV07XG4gICAgICBsYW1iZGFbaV0gPSAwLjA7XG4gICAgICBCc1tpXSA9IGMuY29tcHV0ZUIoaCk7XG4gICAgICBpbnZDc1tpXSA9IDEuMCAvIGMuY29tcHV0ZUMoKTtcbiAgICB9XG5cbiAgICBpZiAoTmVxICE9PSAwKSB7XG4gICAgICAvLyBSZXNldCB2bGFtYmRhXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTmJvZGllczsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGIgPSBib2RpZXNbaV07XG4gICAgICAgIGNvbnN0IHZsYW1iZGEgPSBiLnZsYW1iZGE7XG4gICAgICAgIGNvbnN0IHdsYW1iZGEgPSBiLndsYW1iZGE7XG4gICAgICAgIHZsYW1iZGEuc2V0KDAsIDAsIDApO1xuICAgICAgICB3bGFtYmRhLnNldCgwLCAwLCAwKTtcbiAgICAgIH0gLy8gSXRlcmF0ZSBvdmVyIGVxdWF0aW9uc1xuXG5cbiAgICAgIGZvciAoaXRlciA9IDA7IGl0ZXIgIT09IG1heEl0ZXI7IGl0ZXIrKykge1xuICAgICAgICAvLyBBY2N1bXVsYXRlIHRoZSB0b3RhbCBlcnJvciBmb3IgZWFjaCBpdGVyYXRpb24uXG4gICAgICAgIGRlbHRhbGFtYmRhVG90ID0gMC4wO1xuXG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqICE9PSBOZXE7IGorKykge1xuICAgICAgICAgIGNvbnN0IGMgPSBlcXVhdGlvbnNbal07IC8vIENvbXB1dGUgaXRlcmF0aW9uXG5cbiAgICAgICAgICBCID0gQnNbal07XG4gICAgICAgICAgaW52QyA9IGludkNzW2pdO1xuICAgICAgICAgIGxhbWJkYWogPSBsYW1iZGFbal07XG4gICAgICAgICAgR1dsYW1iZGEgPSBjLmNvbXB1dGVHV2xhbWJkYSgpO1xuICAgICAgICAgIGRlbHRhbGFtYmRhID0gaW52QyAqIChCIC0gR1dsYW1iZGEgLSBjLmVwcyAqIGxhbWJkYWopOyAvLyBDbGFtcCBpZiB3ZSBhcmUgbm90IHdpdGhpbiB0aGUgbWluL21heCBpbnRlcnZhbFxuXG4gICAgICAgICAgaWYgKGxhbWJkYWogKyBkZWx0YWxhbWJkYSA8IGMubWluRm9yY2UpIHtcbiAgICAgICAgICAgIGRlbHRhbGFtYmRhID0gYy5taW5Gb3JjZSAtIGxhbWJkYWo7XG4gICAgICAgICAgfSBlbHNlIGlmIChsYW1iZGFqICsgZGVsdGFsYW1iZGEgPiBjLm1heEZvcmNlKSB7XG4gICAgICAgICAgICBkZWx0YWxhbWJkYSA9IGMubWF4Rm9yY2UgLSBsYW1iZGFqO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGxhbWJkYVtqXSArPSBkZWx0YWxhbWJkYTtcbiAgICAgICAgICBkZWx0YWxhbWJkYVRvdCArPSBkZWx0YWxhbWJkYSA+IDAuMCA/IGRlbHRhbGFtYmRhIDogLWRlbHRhbGFtYmRhOyAvLyBhYnMoZGVsdGFsYW1iZGEpXG5cbiAgICAgICAgICBjLmFkZFRvV2xhbWJkYShkZWx0YWxhbWJkYSk7XG4gICAgICAgIH0gLy8gSWYgdGhlIHRvdGFsIGVycm9yIGlzIHNtYWxsIGVub3VnaCAtIHN0b3AgaXRlcmF0ZVxuXG5cbiAgICAgICAgaWYgKGRlbHRhbGFtYmRhVG90ICogZGVsdGFsYW1iZGFUb3QgPCB0b2xTcXVhcmVkKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH0gLy8gQWRkIHJlc3VsdCB0byB2ZWxvY2l0eVxuXG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOYm9kaWVzOyBpKyspIHtcbiAgICAgICAgY29uc3QgYiA9IGJvZGllc1tpXTtcbiAgICAgICAgY29uc3QgdiA9IGIudmVsb2NpdHk7XG4gICAgICAgIGNvbnN0IHcgPSBiLmFuZ3VsYXJWZWxvY2l0eTtcbiAgICAgICAgYi52bGFtYmRhLnZtdWwoYi5saW5lYXJGYWN0b3IsIGIudmxhbWJkYSk7XG4gICAgICAgIHYudmFkZChiLnZsYW1iZGEsIHYpO1xuICAgICAgICBiLndsYW1iZGEudm11bChiLmFuZ3VsYXJGYWN0b3IsIGIud2xhbWJkYSk7XG4gICAgICAgIHcudmFkZChiLndsYW1iZGEsIHcpO1xuICAgICAgfSAvLyBTZXQgdGhlIGAubXVsdGlwbGllcmAgcHJvcGVydHkgb2YgZWFjaCBlcXVhdGlvblxuXG5cbiAgICAgIGxldCBsID0gZXF1YXRpb25zLmxlbmd0aDtcbiAgICAgIGNvbnN0IGludkR0ID0gMSAvIGg7XG5cbiAgICAgIHdoaWxlIChsLS0pIHtcbiAgICAgICAgZXF1YXRpb25zW2xdLm11bHRpcGxpZXIgPSBsYW1iZGFbbF0gKiBpbnZEdDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gaXRlcjtcbiAgfVxuXG59IC8vIEp1c3QgdGVtcG9yYXJ5IG51bWJlciBob2xkZXJzIHRoYXQgd2Ugd2FudCB0byByZXVzZSBlYWNoIGl0ZXJhdGlvbi5cblxuY29uc3QgR1NTb2x2ZXJfc29sdmVfbGFtYmRhID0gW107XG5jb25zdCBHU1NvbHZlcl9zb2x2ZV9pbnZDcyA9IFtdO1xuY29uc3QgR1NTb2x2ZXJfc29sdmVfQnMgPSBbXTtcblxuLyoqXG4gKiBTcGxpdHMgdGhlIGVxdWF0aW9ucyBpbnRvIGlzbGFuZHMgYW5kIHNvbHZlcyB0aGVtIGluZGVwZW5kZW50bHkuIENhbiBpbXByb3ZlIHBlcmZvcm1hbmNlLlxuICovXG5jbGFzcyBTcGxpdFNvbHZlciBleHRlbmRzIFNvbHZlciB7XG4gIC8qKlxuICAgKiBUaGUgbnVtYmVyIG9mIHNvbHZlciBpdGVyYXRpb25zIGRldGVybWluZXMgcXVhbGl0eSBvZiB0aGUgY29uc3RyYWludHMgaW4gdGhlIHdvcmxkLiBUaGUgbW9yZSBpdGVyYXRpb25zLCB0aGUgbW9yZSBjb3JyZWN0IHNpbXVsYXRpb24uIE1vcmUgaXRlcmF0aW9ucyBuZWVkIG1vcmUgY29tcHV0YXRpb25zIHRob3VnaC4gSWYgeW91IGhhdmUgYSBsYXJnZSBncmF2aXR5IGZvcmNlIGluIHlvdXIgd29ybGQsIHlvdSB3aWxsIG5lZWQgbW9yZSBpdGVyYXRpb25zLlxuICAgKi9cblxuICAvKipcbiAgICogV2hlbiB0b2xlcmFuY2UgaXMgcmVhY2hlZCwgdGhlIHN5c3RlbSBpcyBhc3N1bWVkIHRvIGJlIGNvbnZlcmdlZC5cbiAgICovXG5cbiAgLyoqIHN1YnNvbHZlciAqL1xuICBjb25zdHJ1Y3RvcihzdWJzb2x2ZXIpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuaXRlcmF0aW9ucyA9IHZvaWQgMDtcbiAgICB0aGlzLnRvbGVyYW5jZSA9IHZvaWQgMDtcbiAgICB0aGlzLnN1YnNvbHZlciA9IHZvaWQgMDtcbiAgICB0aGlzLm5vZGVzID0gdm9pZCAwO1xuICAgIHRoaXMubm9kZVBvb2wgPSB2b2lkIDA7XG4gICAgdGhpcy5pdGVyYXRpb25zID0gMTA7XG4gICAgdGhpcy50b2xlcmFuY2UgPSAxZS03O1xuICAgIHRoaXMuc3Vic29sdmVyID0gc3Vic29sdmVyO1xuICAgIHRoaXMubm9kZXMgPSBbXTtcbiAgICB0aGlzLm5vZGVQb29sID0gW107IC8vIENyZWF0ZSBuZWVkZWQgbm9kZXMsIHJldXNlIGlmIHBvc3NpYmxlXG5cbiAgICB3aGlsZSAodGhpcy5ub2RlUG9vbC5sZW5ndGggPCAxMjgpIHtcbiAgICAgIHRoaXMubm9kZVBvb2wucHVzaCh0aGlzLmNyZWF0ZU5vZGUoKSk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBjcmVhdGVOb2RlXG4gICAqL1xuXG5cbiAgY3JlYXRlTm9kZSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgYm9keTogbnVsbCxcbiAgICAgIGNoaWxkcmVuOiBbXSxcbiAgICAgIGVxczogW10sXG4gICAgICB2aXNpdGVkOiBmYWxzZVxuICAgIH07XG4gIH1cbiAgLyoqXG4gICAqIFNvbHZlIHRoZSBzdWJzeXN0ZW1zXG4gICAqIEByZXR1cm4gbnVtYmVyIG9mIGl0ZXJhdGlvbnMgcGVyZm9ybWVkXG4gICAqL1xuXG5cbiAgc29sdmUoZHQsIHdvcmxkKSB7XG4gICAgY29uc3Qgbm9kZXMgPSBTcGxpdFNvbHZlcl9zb2x2ZV9ub2RlcztcbiAgICBjb25zdCBub2RlUG9vbCA9IHRoaXMubm9kZVBvb2w7XG4gICAgY29uc3QgYm9kaWVzID0gd29ybGQuYm9kaWVzO1xuICAgIGNvbnN0IGVxdWF0aW9ucyA9IHRoaXMuZXF1YXRpb25zO1xuICAgIGNvbnN0IE5lcSA9IGVxdWF0aW9ucy5sZW5ndGg7XG4gICAgY29uc3QgTmJvZGllcyA9IGJvZGllcy5sZW5ndGg7XG4gICAgY29uc3Qgc3Vic29sdmVyID0gdGhpcy5zdWJzb2x2ZXI7IC8vIENyZWF0ZSBuZWVkZWQgbm9kZXMsIHJldXNlIGlmIHBvc3NpYmxlXG5cbiAgICB3aGlsZSAobm9kZVBvb2wubGVuZ3RoIDwgTmJvZGllcykge1xuICAgICAgbm9kZVBvb2wucHVzaCh0aGlzLmNyZWF0ZU5vZGUoKSk7XG4gICAgfVxuXG4gICAgbm9kZXMubGVuZ3RoID0gTmJvZGllcztcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgTmJvZGllczsgaSsrKSB7XG4gICAgICBub2Rlc1tpXSA9IG5vZGVQb29sW2ldO1xuICAgIH0gLy8gUmVzZXQgbm9kZSB2YWx1ZXNcblxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE5ib2RpZXM7IGkrKykge1xuICAgICAgY29uc3Qgbm9kZSA9IG5vZGVzW2ldO1xuICAgICAgbm9kZS5ib2R5ID0gYm9kaWVzW2ldO1xuICAgICAgbm9kZS5jaGlsZHJlbi5sZW5ndGggPSAwO1xuICAgICAgbm9kZS5lcXMubGVuZ3RoID0gMDtcbiAgICAgIG5vZGUudmlzaXRlZCA9IGZhbHNlO1xuICAgIH1cblxuICAgIGZvciAobGV0IGsgPSAwOyBrICE9PSBOZXE7IGsrKykge1xuICAgICAgY29uc3QgZXEgPSBlcXVhdGlvbnNba107XG4gICAgICBjb25zdCBpID0gYm9kaWVzLmluZGV4T2YoZXEuYmkpO1xuICAgICAgY29uc3QgaiA9IGJvZGllcy5pbmRleE9mKGVxLmJqKTtcbiAgICAgIGNvbnN0IG5pID0gbm9kZXNbaV07XG4gICAgICBjb25zdCBuaiA9IG5vZGVzW2pdO1xuICAgICAgbmkuY2hpbGRyZW4ucHVzaChuaik7XG4gICAgICBuaS5lcXMucHVzaChlcSk7XG4gICAgICBuai5jaGlsZHJlbi5wdXNoKG5pKTtcbiAgICAgIG5qLmVxcy5wdXNoKGVxKTtcbiAgICB9XG5cbiAgICBsZXQgY2hpbGQ7XG4gICAgbGV0IG4gPSAwO1xuICAgIGxldCBlcXMgPSBTcGxpdFNvbHZlcl9zb2x2ZV9lcXM7XG4gICAgc3Vic29sdmVyLnRvbGVyYW5jZSA9IHRoaXMudG9sZXJhbmNlO1xuICAgIHN1YnNvbHZlci5pdGVyYXRpb25zID0gdGhpcy5pdGVyYXRpb25zO1xuICAgIGNvbnN0IGR1bW15V29ybGQgPSBTcGxpdFNvbHZlcl9zb2x2ZV9kdW1teVdvcmxkO1xuXG4gICAgd2hpbGUgKGNoaWxkID0gZ2V0VW52aXNpdGVkTm9kZShub2RlcykpIHtcbiAgICAgIGVxcy5sZW5ndGggPSAwO1xuICAgICAgZHVtbXlXb3JsZC5ib2RpZXMubGVuZ3RoID0gMDtcbiAgICAgIGJmcyhjaGlsZCwgdmlzaXRGdW5jLCBkdW1teVdvcmxkLmJvZGllcywgZXFzKTtcbiAgICAgIGNvbnN0IE5lcXMgPSBlcXMubGVuZ3RoO1xuICAgICAgZXFzID0gZXFzLnNvcnQoc29ydEJ5SWQpO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTmVxczsgaSsrKSB7XG4gICAgICAgIHN1YnNvbHZlci5hZGRFcXVhdGlvbihlcXNbaV0pO1xuICAgICAgfVxuXG4gICAgICBzdWJzb2x2ZXIuc29sdmUoZHQsIGR1bW15V29ybGQpO1xuICAgICAgc3Vic29sdmVyLnJlbW92ZUFsbEVxdWF0aW9ucygpO1xuICAgICAgbisrO1xuICAgIH1cblxuICAgIHJldHVybiBuO1xuICB9XG5cbn0gLy8gUmV0dXJucyB0aGUgbnVtYmVyIG9mIHN1YnN5c3RlbXNcblxuY29uc3QgU3BsaXRTb2x2ZXJfc29sdmVfbm9kZXMgPSBbXTsgLy8gQWxsIGFsbG9jYXRlZCBub2RlIG9iamVjdHNcblxuY29uc3QgU3BsaXRTb2x2ZXJfc29sdmVfZXFzID0gW107IC8vIFRlbXAgYXJyYXlcblxuY29uc3QgU3BsaXRTb2x2ZXJfc29sdmVfZHVtbXlXb3JsZCA9IHtcbiAgYm9kaWVzOiBbXVxufTsgLy8gVGVtcCBvYmplY3RcblxuY29uc3QgU1RBVElDID0gQm9keS5TVEFUSUM7XG5cbmZ1bmN0aW9uIGdldFVudmlzaXRlZE5vZGUobm9kZXMpIHtcbiAgY29uc3QgTm5vZGVzID0gbm9kZXMubGVuZ3RoO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpICE9PSBObm9kZXM7IGkrKykge1xuICAgIGNvbnN0IG5vZGUgPSBub2Rlc1tpXTtcblxuICAgIGlmICghbm9kZS52aXNpdGVkICYmICEobm9kZS5ib2R5LnR5cGUgJiBTVEFUSUMpKSB7XG4gICAgICByZXR1cm4gbm9kZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZmFsc2U7XG59XG5cbmNvbnN0IHF1ZXVlID0gW107XG5cbmZ1bmN0aW9uIGJmcyhyb290LCB2aXNpdEZ1bmMsIGJkcywgZXFzKSB7XG4gIHF1ZXVlLnB1c2gocm9vdCk7XG4gIHJvb3QudmlzaXRlZCA9IHRydWU7XG4gIHZpc2l0RnVuYyhyb290LCBiZHMsIGVxcyk7XG5cbiAgd2hpbGUgKHF1ZXVlLmxlbmd0aCkge1xuICAgIGNvbnN0IG5vZGUgPSBxdWV1ZS5wb3AoKTsgLy8gTG9vcCBvdmVyIHVudmlzaXRlZCBjaGlsZCBub2Rlc1xuXG4gICAgbGV0IGNoaWxkO1xuXG4gICAgd2hpbGUgKGNoaWxkID0gZ2V0VW52aXNpdGVkTm9kZShub2RlLmNoaWxkcmVuKSkge1xuICAgICAgY2hpbGQudmlzaXRlZCA9IHRydWU7XG4gICAgICB2aXNpdEZ1bmMoY2hpbGQsIGJkcywgZXFzKTtcbiAgICAgIHF1ZXVlLnB1c2goY2hpbGQpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiB2aXNpdEZ1bmMobm9kZSwgYmRzLCBlcXMpIHtcbiAgYmRzLnB1c2gobm9kZS5ib2R5KTtcbiAgY29uc3QgTmVxcyA9IG5vZGUuZXFzLmxlbmd0aDtcblxuICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTmVxczsgaSsrKSB7XG4gICAgY29uc3QgZXEgPSBub2RlLmVxc1tpXTtcblxuICAgIGlmICghZXFzLmluY2x1ZGVzKGVxKSkge1xuICAgICAgZXFzLnB1c2goZXEpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBzb3J0QnlJZChhLCBiKSB7XG4gIHJldHVybiBiLmlkIC0gYS5pZDtcbn1cblxuLyoqXG4gKiBGb3IgcG9vbGluZyBvYmplY3RzIHRoYXQgY2FuIGJlIHJldXNlZC5cbiAqL1xuY2xhc3MgUG9vbCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMub2JqZWN0cyA9IFtdO1xuICAgIHRoaXMudHlwZSA9IE9iamVjdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWxlYXNlIGFuIG9iamVjdCBhZnRlciB1c2VcbiAgICovXG4gIHJlbGVhc2UoLi4uYXJncykge1xuICAgIGNvbnN0IE5hcmdzID0gYXJncy5sZW5ndGg7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTmFyZ3M7IGkrKykge1xuICAgICAgdGhpcy5vYmplY3RzLnB1c2goYXJnc1tpXSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBhbiBvYmplY3RcbiAgICovXG5cblxuICBnZXQoKSB7XG4gICAgaWYgKHRoaXMub2JqZWN0cy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdE9iamVjdCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5vYmplY3RzLnBvcCgpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQ29uc3RydWN0IGFuIG9iamVjdC4gU2hvdWxkIGJlIGltcGxlbWVudGVkIGluIGVhY2ggc3ViY2xhc3MuXG4gICAqL1xuXG5cbiAgY29uc3RydWN0T2JqZWN0KCkge1xuICAgIHRocm93IG5ldyBFcnJvcignY29uc3RydWN0T2JqZWN0KCkgbm90IGltcGxlbWVudGVkIGluIHRoaXMgUG9vbCBzdWJjbGFzcyB5ZXQhJyk7XG4gIH1cbiAgLyoqXG4gICAqIEByZXR1cm4gU2VsZiwgZm9yIGNoYWluaW5nXG4gICAqL1xuXG5cbiAgcmVzaXplKHNpemUpIHtcbiAgICBjb25zdCBvYmplY3RzID0gdGhpcy5vYmplY3RzO1xuXG4gICAgd2hpbGUgKG9iamVjdHMubGVuZ3RoID4gc2l6ZSkge1xuICAgICAgb2JqZWN0cy5wb3AoKTtcbiAgICB9XG5cbiAgICB3aGlsZSAob2JqZWN0cy5sZW5ndGggPCBzaXplKSB7XG4gICAgICBvYmplY3RzLnB1c2godGhpcy5jb25zdHJ1Y3RPYmplY3QoKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxufVxuXG4vKipcbiAqIFZlYzNQb29sXG4gKi9cblxuY2xhc3MgVmVjM1Bvb2wgZXh0ZW5kcyBQb29sIHtcbiAgY29uc3RydWN0b3IoLi4uYXJncykge1xuICAgIHN1cGVyKC4uLmFyZ3MpO1xuICAgIHRoaXMudHlwZSA9IFZlYzM7XG4gIH1cblxuICAvKipcbiAgICogQ29uc3RydWN0IGEgdmVjdG9yXG4gICAqL1xuICBjb25zdHJ1Y3RPYmplY3QoKSB7XG4gICAgcmV0dXJuIG5ldyBWZWMzKCk7XG4gIH1cblxufVxuXG5sZXQgX0NPTExJU0lPTl9UWVBFUyRzcGhlLCBfQ09MTElTSU9OX1RZUEVTJHNwaGUyLCBfQ09MTElTSU9OX1RZUEVTJGJveEIsIF9DT0xMSVNJT05fVFlQRVMkc3BoZTMsIF9DT0xMSVNJT05fVFlQRVMkcGxhbiwgX0NPTExJU0lPTl9UWVBFUyRjb252LCBfQ09MTElTSU9OX1RZUEVTJHNwaGU0LCBfQ09MTElTSU9OX1RZUEVTJHBsYW4yLCBfQ09MTElTSU9OX1RZUEVTJGJveEMsIF9DT0xMSVNJT05fVFlQRVMkc3BoZTUsIF9DT0xMSVNJT05fVFlQRVMkYm94SCwgX0NPTExJU0lPTl9UWVBFUyRjb252MiwgX0NPTExJU0lPTl9UWVBFUyRzcGhlNiwgX0NPTExJU0lPTl9UWVBFUyRwbGFuMywgX0NPTExJU0lPTl9UWVBFUyRib3hQLCBfQ09MTElTSU9OX1RZUEVTJGNvbnYzLCBfQ09MTElTSU9OX1RZUEVTJGN5bGksIF9DT0xMSVNJT05fVFlQRVMkc3BoZTcsIF9DT0xMSVNJT05fVFlQRVMkcGxhbjQsIF9DT0xMSVNJT05fVFlQRVMkYm94QzIsIF9DT0xMSVNJT05fVFlQRVMkY29udjQsIF9DT0xMSVNJT05fVFlQRVMkaGVpZywgX0NPTExJU0lPTl9UWVBFUyRwYXJ0LCBfQ09MTElTSU9OX1RZUEVTJHNwaGU4LCBfQ09MTElTSU9OX1RZUEVTJHBsYW41O1xuLy8gTmFtaW5nIHJ1bGU6IGJhc2VkIG9mIHRoZSBvcmRlciBpbiBTSEFQRV9UWVBFUyxcbi8vIHRoZSBmaXJzdCBwYXJ0IG9mIHRoZSBtZXRob2QgaXMgZm9ybWVkIGJ5IHRoZVxuLy8gc2hhcGUgdHlwZSB0aGF0IGNvbWVzIGJlZm9yZSwgaW4gdGhlIHNlY29uZCBwYXJ0XG4vLyB0aGVyZSBpcyB0aGUgc2hhcGUgdHlwZSB0aGF0IGNvbWVzIGFmdGVyIGluIHRoZSBTSEFQRV9UWVBFUyBsaXN0XG5jb25zdCBDT0xMSVNJT05fVFlQRVMgPSB7XG4gIHNwaGVyZVNwaGVyZTogU2hhcGUudHlwZXMuU1BIRVJFLFxuICBzcGhlcmVQbGFuZTogU2hhcGUudHlwZXMuU1BIRVJFIHwgU2hhcGUudHlwZXMuUExBTkUsXG4gIGJveEJveDogU2hhcGUudHlwZXMuQk9YIHwgU2hhcGUudHlwZXMuQk9YLFxuICBzcGhlcmVCb3g6IFNoYXBlLnR5cGVzLlNQSEVSRSB8IFNoYXBlLnR5cGVzLkJPWCxcbiAgcGxhbmVCb3g6IFNoYXBlLnR5cGVzLlBMQU5FIHwgU2hhcGUudHlwZXMuQk9YLFxuICBjb252ZXhDb252ZXg6IFNoYXBlLnR5cGVzLkNPTlZFWFBPTFlIRURST04sXG4gIHNwaGVyZUNvbnZleDogU2hhcGUudHlwZXMuU1BIRVJFIHwgU2hhcGUudHlwZXMuQ09OVkVYUE9MWUhFRFJPTixcbiAgcGxhbmVDb252ZXg6IFNoYXBlLnR5cGVzLlBMQU5FIHwgU2hhcGUudHlwZXMuQ09OVkVYUE9MWUhFRFJPTixcbiAgYm94Q29udmV4OiBTaGFwZS50eXBlcy5CT1ggfCBTaGFwZS50eXBlcy5DT05WRVhQT0xZSEVEUk9OLFxuICBzcGhlcmVIZWlnaHRmaWVsZDogU2hhcGUudHlwZXMuU1BIRVJFIHwgU2hhcGUudHlwZXMuSEVJR0hURklFTEQsXG4gIGJveEhlaWdodGZpZWxkOiBTaGFwZS50eXBlcy5CT1ggfCBTaGFwZS50eXBlcy5IRUlHSFRGSUVMRCxcbiAgY29udmV4SGVpZ2h0ZmllbGQ6IFNoYXBlLnR5cGVzLkNPTlZFWFBPTFlIRURST04gfCBTaGFwZS50eXBlcy5IRUlHSFRGSUVMRCxcbiAgc3BoZXJlUGFydGljbGU6IFNoYXBlLnR5cGVzLlBBUlRJQ0xFIHwgU2hhcGUudHlwZXMuU1BIRVJFLFxuICBwbGFuZVBhcnRpY2xlOiBTaGFwZS50eXBlcy5QTEFORSB8IFNoYXBlLnR5cGVzLlBBUlRJQ0xFLFxuICBib3hQYXJ0aWNsZTogU2hhcGUudHlwZXMuQk9YIHwgU2hhcGUudHlwZXMuUEFSVElDTEUsXG4gIGNvbnZleFBhcnRpY2xlOiBTaGFwZS50eXBlcy5QQVJUSUNMRSB8IFNoYXBlLnR5cGVzLkNPTlZFWFBPTFlIRURST04sXG4gIGN5bGluZGVyQ3lsaW5kZXI6IFNoYXBlLnR5cGVzLkNZTElOREVSLFxuICBzcGhlcmVDeWxpbmRlcjogU2hhcGUudHlwZXMuU1BIRVJFIHwgU2hhcGUudHlwZXMuQ1lMSU5ERVIsXG4gIHBsYW5lQ3lsaW5kZXI6IFNoYXBlLnR5cGVzLlBMQU5FIHwgU2hhcGUudHlwZXMuQ1lMSU5ERVIsXG4gIGJveEN5bGluZGVyOiBTaGFwZS50eXBlcy5CT1ggfCBTaGFwZS50eXBlcy5DWUxJTkRFUixcbiAgY29udmV4Q3lsaW5kZXI6IFNoYXBlLnR5cGVzLkNPTlZFWFBPTFlIRURST04gfCBTaGFwZS50eXBlcy5DWUxJTkRFUixcbiAgaGVpZ2h0ZmllbGRDeWxpbmRlcjogU2hhcGUudHlwZXMuSEVJR0hURklFTEQgfCBTaGFwZS50eXBlcy5DWUxJTkRFUixcbiAgcGFydGljbGVDeWxpbmRlcjogU2hhcGUudHlwZXMuUEFSVElDTEUgfCBTaGFwZS50eXBlcy5DWUxJTkRFUixcbiAgc3BoZXJlVHJpbWVzaDogU2hhcGUudHlwZXMuU1BIRVJFIHwgU2hhcGUudHlwZXMuVFJJTUVTSCxcbiAgcGxhbmVUcmltZXNoOiBTaGFwZS50eXBlcy5QTEFORSB8IFNoYXBlLnR5cGVzLlRSSU1FU0hcbn07XG5fQ09MTElTSU9OX1RZUEVTJHNwaGUgPSBDT0xMSVNJT05fVFlQRVMuc3BoZXJlU3BoZXJlO1xuX0NPTExJU0lPTl9UWVBFUyRzcGhlMiA9IENPTExJU0lPTl9UWVBFUy5zcGhlcmVQbGFuZTtcbl9DT0xMSVNJT05fVFlQRVMkYm94QiA9IENPTExJU0lPTl9UWVBFUy5ib3hCb3g7XG5fQ09MTElTSU9OX1RZUEVTJHNwaGUzID0gQ09MTElTSU9OX1RZUEVTLnNwaGVyZUJveDtcbl9DT0xMSVNJT05fVFlQRVMkcGxhbiA9IENPTExJU0lPTl9UWVBFUy5wbGFuZUJveDtcbl9DT0xMSVNJT05fVFlQRVMkY29udiA9IENPTExJU0lPTl9UWVBFUy5jb252ZXhDb252ZXg7XG5fQ09MTElTSU9OX1RZUEVTJHNwaGU0ID0gQ09MTElTSU9OX1RZUEVTLnNwaGVyZUNvbnZleDtcbl9DT0xMSVNJT05fVFlQRVMkcGxhbjIgPSBDT0xMSVNJT05fVFlQRVMucGxhbmVDb252ZXg7XG5fQ09MTElTSU9OX1RZUEVTJGJveEMgPSBDT0xMSVNJT05fVFlQRVMuYm94Q29udmV4O1xuX0NPTExJU0lPTl9UWVBFUyRzcGhlNSA9IENPTExJU0lPTl9UWVBFUy5zcGhlcmVIZWlnaHRmaWVsZDtcbl9DT0xMSVNJT05fVFlQRVMkYm94SCA9IENPTExJU0lPTl9UWVBFUy5ib3hIZWlnaHRmaWVsZDtcbl9DT0xMSVNJT05fVFlQRVMkY29udjIgPSBDT0xMSVNJT05fVFlQRVMuY29udmV4SGVpZ2h0ZmllbGQ7XG5fQ09MTElTSU9OX1RZUEVTJHNwaGU2ID0gQ09MTElTSU9OX1RZUEVTLnNwaGVyZVBhcnRpY2xlO1xuX0NPTExJU0lPTl9UWVBFUyRwbGFuMyA9IENPTExJU0lPTl9UWVBFUy5wbGFuZVBhcnRpY2xlO1xuX0NPTExJU0lPTl9UWVBFUyRib3hQID0gQ09MTElTSU9OX1RZUEVTLmJveFBhcnRpY2xlO1xuX0NPTExJU0lPTl9UWVBFUyRjb252MyA9IENPTExJU0lPTl9UWVBFUy5jb252ZXhQYXJ0aWNsZTtcbl9DT0xMSVNJT05fVFlQRVMkY3lsaSA9IENPTExJU0lPTl9UWVBFUy5jeWxpbmRlckN5bGluZGVyO1xuX0NPTExJU0lPTl9UWVBFUyRzcGhlNyA9IENPTExJU0lPTl9UWVBFUy5zcGhlcmVDeWxpbmRlcjtcbl9DT0xMSVNJT05fVFlQRVMkcGxhbjQgPSBDT0xMSVNJT05fVFlQRVMucGxhbmVDeWxpbmRlcjtcbl9DT0xMSVNJT05fVFlQRVMkYm94QzIgPSBDT0xMSVNJT05fVFlQRVMuYm94Q3lsaW5kZXI7XG5fQ09MTElTSU9OX1RZUEVTJGNvbnY0ID0gQ09MTElTSU9OX1RZUEVTLmNvbnZleEN5bGluZGVyO1xuX0NPTExJU0lPTl9UWVBFUyRoZWlnID0gQ09MTElTSU9OX1RZUEVTLmhlaWdodGZpZWxkQ3lsaW5kZXI7XG5fQ09MTElTSU9OX1RZUEVTJHBhcnQgPSBDT0xMSVNJT05fVFlQRVMucGFydGljbGVDeWxpbmRlcjtcbl9DT0xMSVNJT05fVFlQRVMkc3BoZTggPSBDT0xMSVNJT05fVFlQRVMuc3BoZXJlVHJpbWVzaDtcbl9DT0xMSVNJT05fVFlQRVMkcGxhbjUgPSBDT0xMSVNJT05fVFlQRVMucGxhbmVUcmltZXNoO1xuXG4vKipcbiAqIEhlbHBlciBjbGFzcyBmb3IgdGhlIFdvcmxkLiBHZW5lcmF0ZXMgQ29udGFjdEVxdWF0aW9ucy5cbiAqIEB0b2RvIFNwaGVyZS1Db252ZXhQb2x5aGVkcm9uIGNvbnRhY3RzXG4gKiBAdG9kbyBDb250YWN0IHJlZHVjdGlvblxuICogQHRvZG8gc2hvdWxkIG1vdmUgbWV0aG9kcyB0byBwcm90b3R5cGVcbiAqL1xuY2xhc3MgTmFycm93cGhhc2Uge1xuICAvKipcbiAgICogSW50ZXJuYWwgc3RvcmFnZSBvZiBwb29sZWQgY29udGFjdCBwb2ludHMuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBQb29sZWQgdmVjdG9ycy5cbiAgICovXG4gIGdldCBbX0NPTExJU0lPTl9UWVBFUyRzcGhlXSgpIHtcbiAgICByZXR1cm4gdGhpcy5zcGhlcmVTcGhlcmU7XG4gIH1cblxuICBnZXQgW19DT0xMSVNJT05fVFlQRVMkc3BoZTJdKCkge1xuICAgIHJldHVybiB0aGlzLnNwaGVyZVBsYW5lO1xuICB9XG5cbiAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJGJveEJdKCkge1xuICAgIHJldHVybiB0aGlzLmJveEJveDtcbiAgfVxuXG4gIGdldCBbX0NPTExJU0lPTl9UWVBFUyRzcGhlM10oKSB7XG4gICAgcmV0dXJuIHRoaXMuc3BoZXJlQm94O1xuICB9XG5cbiAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJHBsYW5dKCkge1xuICAgIHJldHVybiB0aGlzLnBsYW5lQm94O1xuICB9XG5cbiAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJGNvbnZdKCkge1xuICAgIHJldHVybiB0aGlzLmNvbnZleENvbnZleDtcbiAgfVxuXG4gIGdldCBbX0NPTExJU0lPTl9UWVBFUyRzcGhlNF0oKSB7XG4gICAgcmV0dXJuIHRoaXMuc3BoZXJlQ29udmV4O1xuICB9XG5cbiAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJHBsYW4yXSgpIHtcbiAgICByZXR1cm4gdGhpcy5wbGFuZUNvbnZleDtcbiAgfVxuXG4gIGdldCBbX0NPTExJU0lPTl9UWVBFUyRib3hDXSgpIHtcbiAgICByZXR1cm4gdGhpcy5ib3hDb252ZXg7XG4gIH1cblxuICBnZXQgW19DT0xMSVNJT05fVFlQRVMkc3BoZTVdKCkge1xuICAgIHJldHVybiB0aGlzLnNwaGVyZUhlaWdodGZpZWxkO1xuICB9XG5cbiAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJGJveEhdKCkge1xuICAgIHJldHVybiB0aGlzLmJveEhlaWdodGZpZWxkO1xuICB9XG5cbiAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJGNvbnYyXSgpIHtcbiAgICByZXR1cm4gdGhpcy5jb252ZXhIZWlnaHRmaWVsZDtcbiAgfVxuXG4gIGdldCBbX0NPTExJU0lPTl9UWVBFUyRzcGhlNl0oKSB7XG4gICAgcmV0dXJuIHRoaXMuc3BoZXJlUGFydGljbGU7XG4gIH1cblxuICBnZXQgW19DT0xMSVNJT05fVFlQRVMkcGxhbjNdKCkge1xuICAgIHJldHVybiB0aGlzLnBsYW5lUGFydGljbGU7XG4gIH1cblxuICBnZXQgW19DT0xMSVNJT05fVFlQRVMkYm94UF0oKSB7XG4gICAgcmV0dXJuIHRoaXMuYm94UGFydGljbGU7XG4gIH1cblxuICBnZXQgW19DT0xMSVNJT05fVFlQRVMkY29udjNdKCkge1xuICAgIHJldHVybiB0aGlzLmNvbnZleFBhcnRpY2xlO1xuICB9XG5cbiAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJGN5bGldKCkge1xuICAgIHJldHVybiB0aGlzLmNvbnZleENvbnZleDtcbiAgfVxuXG4gIGdldCBbX0NPTExJU0lPTl9UWVBFUyRzcGhlN10oKSB7XG4gICAgcmV0dXJuIHRoaXMuc3BoZXJlQ29udmV4O1xuICB9XG5cbiAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJHBsYW40XSgpIHtcbiAgICByZXR1cm4gdGhpcy5wbGFuZUNvbnZleDtcbiAgfVxuXG4gIGdldCBbX0NPTExJU0lPTl9UWVBFUyRib3hDMl0oKSB7XG4gICAgcmV0dXJuIHRoaXMuYm94Q29udmV4O1xuICB9XG5cbiAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJGNvbnY0XSgpIHtcbiAgICByZXR1cm4gdGhpcy5jb252ZXhDb252ZXg7XG4gIH1cblxuICBnZXQgW19DT0xMSVNJT05fVFlQRVMkaGVpZ10oKSB7XG4gICAgcmV0dXJuIHRoaXMuaGVpZ2h0ZmllbGRDeWxpbmRlcjtcbiAgfVxuXG4gIGdldCBbX0NPTExJU0lPTl9UWVBFUyRwYXJ0XSgpIHtcbiAgICByZXR1cm4gdGhpcy5wYXJ0aWNsZUN5bGluZGVyO1xuICB9XG5cbiAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJHNwaGU4XSgpIHtcbiAgICByZXR1cm4gdGhpcy5zcGhlcmVUcmltZXNoO1xuICB9XG5cbiAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJHBsYW41XSgpIHtcbiAgICByZXR1cm4gdGhpcy5wbGFuZVRyaW1lc2g7XG4gIH0gLy8gZ2V0IFtDT0xMSVNJT05fVFlQRVMuY29udmV4VHJpbWVzaF0oKSB7XG4gIC8vICAgcmV0dXJuIHRoaXMuY29udmV4VHJpbWVzaFxuICAvLyB9XG5cblxuICBjb25zdHJ1Y3Rvcih3b3JsZCkge1xuICAgIHRoaXMuY29udGFjdFBvaW50UG9vbCA9IHZvaWQgMDtcbiAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25Qb29sID0gdm9pZCAwO1xuICAgIHRoaXMucmVzdWx0ID0gdm9pZCAwO1xuICAgIHRoaXMuZnJpY3Rpb25SZXN1bHQgPSB2b2lkIDA7XG4gICAgdGhpcy52M3Bvb2wgPSB2b2lkIDA7XG4gICAgdGhpcy53b3JsZCA9IHZvaWQgMDtcbiAgICB0aGlzLmN1cnJlbnRDb250YWN0TWF0ZXJpYWwgPSB2b2lkIDA7XG4gICAgdGhpcy5lbmFibGVGcmljdGlvblJlZHVjdGlvbiA9IHZvaWQgMDtcbiAgICB0aGlzLmNvbnRhY3RQb2ludFBvb2wgPSBbXTtcbiAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25Qb29sID0gW107XG4gICAgdGhpcy5yZXN1bHQgPSBbXTtcbiAgICB0aGlzLmZyaWN0aW9uUmVzdWx0ID0gW107XG4gICAgdGhpcy52M3Bvb2wgPSBuZXcgVmVjM1Bvb2woKTtcbiAgICB0aGlzLndvcmxkID0gd29ybGQ7XG4gICAgdGhpcy5jdXJyZW50Q29udGFjdE1hdGVyaWFsID0gd29ybGQuZGVmYXVsdENvbnRhY3RNYXRlcmlhbDtcbiAgICB0aGlzLmVuYWJsZUZyaWN0aW9uUmVkdWN0aW9uID0gZmFsc2U7XG4gIH1cbiAgLyoqXG4gICAqIE1ha2UgYSBjb250YWN0IG9iamVjdCwgYnkgdXNpbmcgdGhlIGludGVybmFsIHBvb2wgb3IgY3JlYXRpbmcgYSBuZXcgb25lLlxuICAgKi9cblxuXG4gIGNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgb3ZlcnJpZGVTaGFwZUEsIG92ZXJyaWRlU2hhcGVCKSB7XG4gICAgbGV0IGM7XG5cbiAgICBpZiAodGhpcy5jb250YWN0UG9pbnRQb29sLmxlbmd0aCkge1xuICAgICAgYyA9IHRoaXMuY29udGFjdFBvaW50UG9vbC5wb3AoKTtcbiAgICAgIGMuYmkgPSBiaTtcbiAgICAgIGMuYmogPSBiajtcbiAgICB9IGVsc2Uge1xuICAgICAgYyA9IG5ldyBDb250YWN0RXF1YXRpb24oYmksIGJqKTtcbiAgICB9XG5cbiAgICBjLmVuYWJsZWQgPSBiaS5jb2xsaXNpb25SZXNwb25zZSAmJiBiai5jb2xsaXNpb25SZXNwb25zZSAmJiBzaS5jb2xsaXNpb25SZXNwb25zZSAmJiBzai5jb2xsaXNpb25SZXNwb25zZTtcbiAgICBjb25zdCBjbSA9IHRoaXMuY3VycmVudENvbnRhY3RNYXRlcmlhbDtcbiAgICBjLnJlc3RpdHV0aW9uID0gY20ucmVzdGl0dXRpb247XG4gICAgYy5zZXRTcG9va1BhcmFtcyhjbS5jb250YWN0RXF1YXRpb25TdGlmZm5lc3MsIGNtLmNvbnRhY3RFcXVhdGlvblJlbGF4YXRpb24sIHRoaXMud29ybGQuZHQpO1xuICAgIGNvbnN0IG1hdEEgPSBzaS5tYXRlcmlhbCB8fCBiaS5tYXRlcmlhbDtcbiAgICBjb25zdCBtYXRCID0gc2oubWF0ZXJpYWwgfHwgYmoubWF0ZXJpYWw7XG5cbiAgICBpZiAobWF0QSAmJiBtYXRCICYmIG1hdEEucmVzdGl0dXRpb24gPj0gMCAmJiBtYXRCLnJlc3RpdHV0aW9uID49IDApIHtcbiAgICAgIGMucmVzdGl0dXRpb24gPSBtYXRBLnJlc3RpdHV0aW9uICogbWF0Qi5yZXN0aXR1dGlvbjtcbiAgICB9XG5cbiAgICBjLnNpID0gb3ZlcnJpZGVTaGFwZUEgfHwgc2k7XG4gICAgYy5zaiA9IG92ZXJyaWRlU2hhcGVCIHx8IHNqO1xuICAgIHJldHVybiBjO1xuICB9XG5cbiAgY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChjb250YWN0RXF1YXRpb24sIG91dEFycmF5KSB7XG4gICAgY29uc3QgYm9keUEgPSBjb250YWN0RXF1YXRpb24uYmk7XG4gICAgY29uc3QgYm9keUIgPSBjb250YWN0RXF1YXRpb24uYmo7XG4gICAgY29uc3Qgc2hhcGVBID0gY29udGFjdEVxdWF0aW9uLnNpO1xuICAgIGNvbnN0IHNoYXBlQiA9IGNvbnRhY3RFcXVhdGlvbi5zajtcbiAgICBjb25zdCB3b3JsZCA9IHRoaXMud29ybGQ7XG4gICAgY29uc3QgY20gPSB0aGlzLmN1cnJlbnRDb250YWN0TWF0ZXJpYWw7IC8vIElmIGZyaWN0aW9uIG9yIHJlc3RpdHV0aW9uIHdlcmUgc3BlY2lmaWVkIGluIHRoZSBtYXRlcmlhbCwgdXNlIHRoZW1cblxuICAgIGxldCBmcmljdGlvbiA9IGNtLmZyaWN0aW9uO1xuICAgIGNvbnN0IG1hdEEgPSBzaGFwZUEubWF0ZXJpYWwgfHwgYm9keUEubWF0ZXJpYWw7XG4gICAgY29uc3QgbWF0QiA9IHNoYXBlQi5tYXRlcmlhbCB8fCBib2R5Qi5tYXRlcmlhbDtcblxuICAgIGlmIChtYXRBICYmIG1hdEIgJiYgbWF0QS5mcmljdGlvbiA+PSAwICYmIG1hdEIuZnJpY3Rpb24gPj0gMCkge1xuICAgICAgZnJpY3Rpb24gPSBtYXRBLmZyaWN0aW9uICogbWF0Qi5mcmljdGlvbjtcbiAgICB9XG5cbiAgICBpZiAoZnJpY3Rpb24gPiAwKSB7XG4gICAgICAvLyBDcmVhdGUgMiB0YW5nZW50IGVxdWF0aW9uc1xuICAgICAgY29uc3QgbXVnID0gZnJpY3Rpb24gKiB3b3JsZC5ncmF2aXR5Lmxlbmd0aCgpO1xuICAgICAgbGV0IHJlZHVjZWRNYXNzID0gYm9keUEuaW52TWFzcyArIGJvZHlCLmludk1hc3M7XG5cbiAgICAgIGlmIChyZWR1Y2VkTWFzcyA+IDApIHtcbiAgICAgICAgcmVkdWNlZE1hc3MgPSAxIC8gcmVkdWNlZE1hc3M7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHBvb2wgPSB0aGlzLmZyaWN0aW9uRXF1YXRpb25Qb29sO1xuICAgICAgY29uc3QgYzEgPSBwb29sLmxlbmd0aCA/IHBvb2wucG9wKCkgOiBuZXcgRnJpY3Rpb25FcXVhdGlvbihib2R5QSwgYm9keUIsIG11ZyAqIHJlZHVjZWRNYXNzKTtcbiAgICAgIGNvbnN0IGMyID0gcG9vbC5sZW5ndGggPyBwb29sLnBvcCgpIDogbmV3IEZyaWN0aW9uRXF1YXRpb24oYm9keUEsIGJvZHlCLCBtdWcgKiByZWR1Y2VkTWFzcyk7XG4gICAgICBjMS5iaSA9IGMyLmJpID0gYm9keUE7XG4gICAgICBjMS5iaiA9IGMyLmJqID0gYm9keUI7XG4gICAgICBjMS5taW5Gb3JjZSA9IGMyLm1pbkZvcmNlID0gLW11ZyAqIHJlZHVjZWRNYXNzO1xuICAgICAgYzEubWF4Rm9yY2UgPSBjMi5tYXhGb3JjZSA9IG11ZyAqIHJlZHVjZWRNYXNzOyAvLyBDb3B5IG92ZXIgdGhlIHJlbGF0aXZlIHZlY3RvcnNcblxuICAgICAgYzEucmkuY29weShjb250YWN0RXF1YXRpb24ucmkpO1xuICAgICAgYzEucmouY29weShjb250YWN0RXF1YXRpb24ucmopO1xuICAgICAgYzIucmkuY29weShjb250YWN0RXF1YXRpb24ucmkpO1xuICAgICAgYzIucmouY29weShjb250YWN0RXF1YXRpb24ucmopOyAvLyBDb25zdHJ1Y3QgdGFuZ2VudHNcblxuICAgICAgY29udGFjdEVxdWF0aW9uLm5pLnRhbmdlbnRzKGMxLnQsIGMyLnQpOyAvLyBTZXQgc3Bvb2sgcGFyYW1zXG5cbiAgICAgIGMxLnNldFNwb29rUGFyYW1zKGNtLmZyaWN0aW9uRXF1YXRpb25TdGlmZm5lc3MsIGNtLmZyaWN0aW9uRXF1YXRpb25SZWxheGF0aW9uLCB3b3JsZC5kdCk7XG4gICAgICBjMi5zZXRTcG9va1BhcmFtcyhjbS5mcmljdGlvbkVxdWF0aW9uU3RpZmZuZXNzLCBjbS5mcmljdGlvbkVxdWF0aW9uUmVsYXhhdGlvbiwgd29ybGQuZHQpO1xuICAgICAgYzEuZW5hYmxlZCA9IGMyLmVuYWJsZWQgPSBjb250YWN0RXF1YXRpb24uZW5hYmxlZDtcbiAgICAgIG91dEFycmF5LnB1c2goYzEsIGMyKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICAvKipcbiAgICogVGFrZSB0aGUgYXZlcmFnZSBOIGxhdGVzdCBjb250YWN0IHBvaW50IG9uIHRoZSBwbGFuZS5cbiAgICovXG5cblxuICBjcmVhdGVGcmljdGlvbkZyb21BdmVyYWdlKG51bUNvbnRhY3RzKSB7XG4gICAgLy8gVGhlIGxhc3QgY29udGFjdEVxdWF0aW9uXG4gICAgbGV0IGMgPSB0aGlzLnJlc3VsdFt0aGlzLnJlc3VsdC5sZW5ndGggLSAxXTsgLy8gQ3JlYXRlIHRoZSByZXN1bHQ6IHR3byBcImF2ZXJhZ2VcIiBmcmljdGlvbiBlcXVhdGlvbnNcblxuICAgIGlmICghdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KGMsIHRoaXMuZnJpY3Rpb25SZXN1bHQpIHx8IG51bUNvbnRhY3RzID09PSAxKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgZjEgPSB0aGlzLmZyaWN0aW9uUmVzdWx0W3RoaXMuZnJpY3Rpb25SZXN1bHQubGVuZ3RoIC0gMl07XG4gICAgY29uc3QgZjIgPSB0aGlzLmZyaWN0aW9uUmVzdWx0W3RoaXMuZnJpY3Rpb25SZXN1bHQubGVuZ3RoIC0gMV07XG4gICAgYXZlcmFnZU5vcm1hbC5zZXRaZXJvKCk7XG4gICAgYXZlcmFnZUNvbnRhY3RQb2ludEEuc2V0WmVybygpO1xuICAgIGF2ZXJhZ2VDb250YWN0UG9pbnRCLnNldFplcm8oKTtcbiAgICBjb25zdCBib2R5QSA9IGMuYmk7XG4gICAgYy5iajtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBudW1Db250YWN0czsgaSsrKSB7XG4gICAgICBjID0gdGhpcy5yZXN1bHRbdGhpcy5yZXN1bHQubGVuZ3RoIC0gMSAtIGldO1xuXG4gICAgICBpZiAoYy5iaSAhPT0gYm9keUEpIHtcbiAgICAgICAgYXZlcmFnZU5vcm1hbC52YWRkKGMubmksIGF2ZXJhZ2VOb3JtYWwpO1xuICAgICAgICBhdmVyYWdlQ29udGFjdFBvaW50QS52YWRkKGMucmksIGF2ZXJhZ2VDb250YWN0UG9pbnRBKTtcbiAgICAgICAgYXZlcmFnZUNvbnRhY3RQb2ludEIudmFkZChjLnJqLCBhdmVyYWdlQ29udGFjdFBvaW50Qik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhdmVyYWdlTm9ybWFsLnZzdWIoYy5uaSwgYXZlcmFnZU5vcm1hbCk7XG4gICAgICAgIGF2ZXJhZ2VDb250YWN0UG9pbnRBLnZhZGQoYy5yaiwgYXZlcmFnZUNvbnRhY3RQb2ludEEpO1xuICAgICAgICBhdmVyYWdlQ29udGFjdFBvaW50Qi52YWRkKGMucmksIGF2ZXJhZ2VDb250YWN0UG9pbnRCKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBpbnZOdW1Db250YWN0cyA9IDEgLyBudW1Db250YWN0cztcbiAgICBhdmVyYWdlQ29udGFjdFBvaW50QS5zY2FsZShpbnZOdW1Db250YWN0cywgZjEucmkpO1xuICAgIGF2ZXJhZ2VDb250YWN0UG9pbnRCLnNjYWxlKGludk51bUNvbnRhY3RzLCBmMS5yaik7XG4gICAgZjIucmkuY29weShmMS5yaSk7IC8vIFNob3VsZCBiZSB0aGUgc2FtZVxuXG4gICAgZjIucmouY29weShmMS5yaik7XG4gICAgYXZlcmFnZU5vcm1hbC5ub3JtYWxpemUoKTtcbiAgICBhdmVyYWdlTm9ybWFsLnRhbmdlbnRzKGYxLnQsIGYyLnQpOyAvLyByZXR1cm4gZXE7XG4gIH1cbiAgLyoqXG4gICAqIEdlbmVyYXRlIGFsbCBjb250YWN0cyBiZXR3ZWVuIGEgbGlzdCBvZiBib2R5IHBhaXJzXG4gICAqIEBwYXJhbSBwMSBBcnJheSBvZiBib2R5IGluZGljZXNcbiAgICogQHBhcmFtIHAyIEFycmF5IG9mIGJvZHkgaW5kaWNlc1xuICAgKiBAcGFyYW0gcmVzdWx0IEFycmF5IHRvIHN0b3JlIGdlbmVyYXRlZCBjb250YWN0c1xuICAgKiBAcGFyYW0gb2xkY29udGFjdHMgT3B0aW9uYWwuIEFycmF5IG9mIHJldXNhYmxlIGNvbnRhY3Qgb2JqZWN0c1xuICAgKi9cblxuXG4gIGdldENvbnRhY3RzKHAxLCBwMiwgd29ybGQsIHJlc3VsdCwgb2xkY29udGFjdHMsIGZyaWN0aW9uUmVzdWx0LCBmcmljdGlvblBvb2wpIHtcbiAgICAvLyBTYXZlIG9sZCBjb250YWN0IG9iamVjdHNcbiAgICB0aGlzLmNvbnRhY3RQb2ludFBvb2wgPSBvbGRjb250YWN0cztcbiAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25Qb29sID0gZnJpY3Rpb25Qb29sO1xuICAgIHRoaXMucmVzdWx0ID0gcmVzdWx0O1xuICAgIHRoaXMuZnJpY3Rpb25SZXN1bHQgPSBmcmljdGlvblJlc3VsdDtcbiAgICBjb25zdCBxaSA9IHRtcFF1YXQxO1xuICAgIGNvbnN0IHFqID0gdG1wUXVhdDI7XG4gICAgY29uc3QgeGkgPSB0bXBWZWMxO1xuICAgIGNvbnN0IHhqID0gdG1wVmVjMjtcblxuICAgIGZvciAobGV0IGsgPSAwLCBOID0gcDEubGVuZ3RoOyBrICE9PSBOOyBrKyspIHtcbiAgICAgIC8vIEdldCBjdXJyZW50IGNvbGxpc2lvbiBib2RpZXNcbiAgICAgIGNvbnN0IGJpID0gcDFba107XG4gICAgICBjb25zdCBiaiA9IHAyW2tdOyAvLyBHZXQgY29udGFjdCBtYXRlcmlhbFxuXG4gICAgICBsZXQgYm9keUNvbnRhY3RNYXRlcmlhbCA9IG51bGw7XG5cbiAgICAgIGlmIChiaS5tYXRlcmlhbCAmJiBiai5tYXRlcmlhbCkge1xuICAgICAgICBib2R5Q29udGFjdE1hdGVyaWFsID0gd29ybGQuZ2V0Q29udGFjdE1hdGVyaWFsKGJpLm1hdGVyaWFsLCBiai5tYXRlcmlhbCkgfHwgbnVsbDtcbiAgICAgIH1cblxuICAgICAgY29uc3QganVzdFRlc3QgPSBiaS50eXBlICYgQm9keS5LSU5FTUFUSUMgJiYgYmoudHlwZSAmIEJvZHkuU1RBVElDIHx8IGJpLnR5cGUgJiBCb2R5LlNUQVRJQyAmJiBiai50eXBlICYgQm9keS5LSU5FTUFUSUMgfHwgYmkudHlwZSAmIEJvZHkuS0lORU1BVElDICYmIGJqLnR5cGUgJiBCb2R5LktJTkVNQVRJQztcblxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBiaS5zaGFwZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgYmkucXVhdGVybmlvbi5tdWx0KGJpLnNoYXBlT3JpZW50YXRpb25zW2ldLCBxaSk7XG4gICAgICAgIGJpLnF1YXRlcm5pb24udm11bHQoYmkuc2hhcGVPZmZzZXRzW2ldLCB4aSk7XG4gICAgICAgIHhpLnZhZGQoYmkucG9zaXRpb24sIHhpKTtcbiAgICAgICAgY29uc3Qgc2kgPSBiaS5zaGFwZXNbaV07XG5cbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBiai5zaGFwZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAvLyBDb21wdXRlIHdvcmxkIHRyYW5zZm9ybSBvZiBzaGFwZXNcbiAgICAgICAgICBiai5xdWF0ZXJuaW9uLm11bHQoYmouc2hhcGVPcmllbnRhdGlvbnNbal0sIHFqKTtcbiAgICAgICAgICBiai5xdWF0ZXJuaW9uLnZtdWx0KGJqLnNoYXBlT2Zmc2V0c1tqXSwgeGopO1xuICAgICAgICAgIHhqLnZhZGQoYmoucG9zaXRpb24sIHhqKTtcbiAgICAgICAgICBjb25zdCBzaiA9IGJqLnNoYXBlc1tqXTtcblxuICAgICAgICAgIGlmICghKHNpLmNvbGxpc2lvbkZpbHRlck1hc2sgJiBzai5jb2xsaXNpb25GaWx0ZXJHcm91cCAmJiBzai5jb2xsaXNpb25GaWx0ZXJNYXNrICYgc2kuY29sbGlzaW9uRmlsdGVyR3JvdXApKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoeGkuZGlzdGFuY2VUbyh4aikgPiBzaS5ib3VuZGluZ1NwaGVyZVJhZGl1cyArIHNqLmJvdW5kaW5nU3BoZXJlUmFkaXVzKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9IC8vIEdldCBjb2xsaXNpb24gbWF0ZXJpYWxcblxuXG4gICAgICAgICAgbGV0IHNoYXBlQ29udGFjdE1hdGVyaWFsID0gbnVsbDtcblxuICAgICAgICAgIGlmIChzaS5tYXRlcmlhbCAmJiBzai5tYXRlcmlhbCkge1xuICAgICAgICAgICAgc2hhcGVDb250YWN0TWF0ZXJpYWwgPSB3b3JsZC5nZXRDb250YWN0TWF0ZXJpYWwoc2kubWF0ZXJpYWwsIHNqLm1hdGVyaWFsKSB8fCBudWxsO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHRoaXMuY3VycmVudENvbnRhY3RNYXRlcmlhbCA9IHNoYXBlQ29udGFjdE1hdGVyaWFsIHx8IGJvZHlDb250YWN0TWF0ZXJpYWwgfHwgd29ybGQuZGVmYXVsdENvbnRhY3RNYXRlcmlhbDsgLy8gR2V0IGNvbnRhY3RzXG5cbiAgICAgICAgICBjb25zdCByZXNvbHZlckluZGV4ID0gc2kudHlwZSB8IHNqLnR5cGU7XG4gICAgICAgICAgY29uc3QgcmVzb2x2ZXIgPSB0aGlzW3Jlc29sdmVySW5kZXhdO1xuXG4gICAgICAgICAgaWYgKHJlc29sdmVyKSB7XG4gICAgICAgICAgICBsZXQgcmV0dmFsID0gZmFsc2U7IC8vIFRPIERPOiBpbnZlc3RpZ2F0ZSB3aHkgc3BoZXJlUGFydGljbGUgYW5kIGNvbnZleFBhcnRpY2xlXG4gICAgICAgICAgICAvLyByZXNvbHZlcnMgZXhwZWN0IHNpIGFuZCBzaiBzaGFwZXMgdG8gYmUgaW4gcmV2ZXJzZSBvcmRlclxuICAgICAgICAgICAgLy8gKGkuZS4gbGFyZ2VyIGludGVnZXIgdmFsdWUgdHlwZSBmaXJzdCBpbnN0ZWFkIG9mIHNtYWxsZXIgZmlyc3QpXG5cbiAgICAgICAgICAgIGlmIChzaS50eXBlIDwgc2oudHlwZSkge1xuICAgICAgICAgICAgICByZXR2YWwgPSByZXNvbHZlci5jYWxsKHRoaXMsIHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgc2ksIHNqLCBqdXN0VGVzdCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICByZXR2YWwgPSByZXNvbHZlci5jYWxsKHRoaXMsIHNqLCBzaSwgeGosIHhpLCBxaiwgcWksIGJqLCBiaSwgc2ksIHNqLCBqdXN0VGVzdCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChyZXR2YWwgJiYganVzdFRlc3QpIHtcbiAgICAgICAgICAgICAgLy8gUmVnaXN0ZXIgb3ZlcmxhcFxuICAgICAgICAgICAgICB3b3JsZC5zaGFwZU92ZXJsYXBLZWVwZXIuc2V0KHNpLmlkLCBzai5pZCk7XG4gICAgICAgICAgICAgIHdvcmxkLmJvZHlPdmVybGFwS2VlcGVyLnNldChiaS5pZCwgYmouaWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHNwaGVyZVNwaGVyZShzaSwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHJzaSwgcnNqLCBqdXN0VGVzdCkge1xuICAgIGlmIChqdXN0VGVzdCkge1xuICAgICAgcmV0dXJuIHhpLmRpc3RhbmNlU3F1YXJlZCh4aikgPCAoc2kucmFkaXVzICsgc2oucmFkaXVzKSAqKiAyO1xuICAgIH0gLy8gV2Ugd2lsbCBoYXZlIG9ubHkgb25lIGNvbnRhY3QgaW4gdGhpcyBjYXNlXG5cblxuICAgIGNvbnN0IGNvbnRhY3RFcSA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLCBiaiwgc2ksIHNqLCByc2ksIHJzaik7IC8vIENvbnRhY3Qgbm9ybWFsXG5cbiAgICB4ai52c3ViKHhpLCBjb250YWN0RXEubmkpO1xuICAgIGNvbnRhY3RFcS5uaS5ub3JtYWxpemUoKTsgLy8gQ29udGFjdCBwb2ludCBsb2NhdGlvbnNcblxuICAgIGNvbnRhY3RFcS5yaS5jb3B5KGNvbnRhY3RFcS5uaSk7XG4gICAgY29udGFjdEVxLnJqLmNvcHkoY29udGFjdEVxLm5pKTtcbiAgICBjb250YWN0RXEucmkuc2NhbGUoc2kucmFkaXVzLCBjb250YWN0RXEucmkpO1xuICAgIGNvbnRhY3RFcS5yai5zY2FsZSgtc2oucmFkaXVzLCBjb250YWN0RXEucmopO1xuICAgIGNvbnRhY3RFcS5yaS52YWRkKHhpLCBjb250YWN0RXEucmkpO1xuICAgIGNvbnRhY3RFcS5yaS52c3ViKGJpLnBvc2l0aW9uLCBjb250YWN0RXEucmkpO1xuICAgIGNvbnRhY3RFcS5yai52YWRkKHhqLCBjb250YWN0RXEucmopO1xuICAgIGNvbnRhY3RFcS5yai52c3ViKGJqLnBvc2l0aW9uLCBjb250YWN0RXEucmopO1xuICAgIHRoaXMucmVzdWx0LnB1c2goY29udGFjdEVxKTtcbiAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QoY29udGFjdEVxLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTtcbiAgfVxuXG4gIHNwaGVyZVBsYW5lKHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0KSB7XG4gICAgLy8gV2Ugd2lsbCBoYXZlIG9uZSBjb250YWN0IGluIHRoaXMgY2FzZVxuICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opOyAvLyBDb250YWN0IG5vcm1hbFxuXG4gICAgci5uaS5zZXQoMCwgMCwgMSk7XG4gICAgcWoudm11bHQoci5uaSwgci5uaSk7XG4gICAgci5uaS5uZWdhdGUoci5uaSk7IC8vIGJvZHkgaSBpcyB0aGUgc3BoZXJlLCBmbGlwIG5vcm1hbFxuXG4gICAgci5uaS5ub3JtYWxpemUoKTsgLy8gTmVlZGVkP1xuICAgIC8vIFZlY3RvciBmcm9tIHNwaGVyZSBjZW50ZXIgdG8gY29udGFjdCBwb2ludFxuXG4gICAgci5uaS5zY2FsZShzaS5yYWRpdXMsIHIucmkpOyAvLyBQcm9qZWN0IGRvd24gc3BoZXJlIG9uIHBsYW5lXG5cbiAgICB4aS52c3ViKHhqLCBwb2ludF9vbl9wbGFuZV90b19zcGhlcmUpO1xuICAgIHIubmkuc2NhbGUoci5uaS5kb3QocG9pbnRfb25fcGxhbmVfdG9fc3BoZXJlKSwgcGxhbmVfdG9fc3BoZXJlX29ydGhvKTtcbiAgICBwb2ludF9vbl9wbGFuZV90b19zcGhlcmUudnN1YihwbGFuZV90b19zcGhlcmVfb3J0aG8sIHIucmopOyAvLyBUaGUgc3BoZXJlIHBvc2l0aW9uIHByb2plY3RlZCB0byBwbGFuZVxuXG4gICAgaWYgKC1wb2ludF9vbl9wbGFuZV90b19zcGhlcmUuZG90KHIubmkpIDw9IHNpLnJhZGl1cykge1xuICAgICAgaWYgKGp1c3RUZXN0KSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSAvLyBNYWtlIGl0IHJlbGF0aXZlIHRvIHRoZSBib2R5XG5cblxuICAgICAgY29uc3QgcmkgPSByLnJpO1xuICAgICAgY29uc3QgcmogPSByLnJqO1xuICAgICAgcmkudmFkZCh4aSwgcmkpO1xuICAgICAgcmkudnN1YihiaS5wb3NpdGlvbiwgcmkpO1xuICAgICAgcmoudmFkZCh4aiwgcmopO1xuICAgICAgcmoudnN1Yihiai5wb3NpdGlvbiwgcmopO1xuICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTtcbiAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTtcbiAgICB9XG4gIH1cblxuICBib3hCb3goc2ksIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCByc2ksIHJzaiwganVzdFRlc3QpIHtcbiAgICBzaS5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24ubWF0ZXJpYWwgPSBzaS5tYXRlcmlhbDtcbiAgICBzai5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24ubWF0ZXJpYWwgPSBzai5tYXRlcmlhbDtcbiAgICBzaS5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24uY29sbGlzaW9uUmVzcG9uc2UgPSBzaS5jb2xsaXNpb25SZXNwb25zZTtcbiAgICBzai5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24uY29sbGlzaW9uUmVzcG9uc2UgPSBzai5jb2xsaXNpb25SZXNwb25zZTtcbiAgICByZXR1cm4gdGhpcy5jb252ZXhDb252ZXgoc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLCBzai5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24sIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHNpLCBzaiwganVzdFRlc3QpO1xuICB9XG5cbiAgc3BoZXJlQm94KHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0KSB7XG4gICAgY29uc3QgdjNwb29sID0gdGhpcy52M3Bvb2w7IC8vIHdlIHJlZmVyIHRvIHRoZSBib3ggYXMgYm9keSBqXG5cbiAgICBjb25zdCBzaWRlcyA9IHNwaGVyZUJveF9zaWRlcztcbiAgICB4aS52c3ViKHhqLCBib3hfdG9fc3BoZXJlKTtcbiAgICBzai5nZXRTaWRlTm9ybWFscyhzaWRlcywgcWopO1xuICAgIGNvbnN0IFIgPSBzaS5yYWRpdXM7XG5cbiAgICBsZXQgZm91bmQgPSBmYWxzZTsgLy8gU3RvcmUgdGhlIHJlc3VsdGluZyBzaWRlIHBlbmV0cmF0aW9uIGluZm9cblxuICAgIGNvbnN0IHNpZGVfbnMgPSBzcGhlcmVCb3hfc2lkZV9ucztcbiAgICBjb25zdCBzaWRlX25zMSA9IHNwaGVyZUJveF9zaWRlX25zMTtcbiAgICBjb25zdCBzaWRlX25zMiA9IHNwaGVyZUJveF9zaWRlX25zMjtcbiAgICBsZXQgc2lkZV9oID0gbnVsbDtcbiAgICBsZXQgc2lkZV9wZW5ldHJhdGlvbnMgPSAwO1xuICAgIGxldCBzaWRlX2RvdDEgPSAwO1xuICAgIGxldCBzaWRlX2RvdDIgPSAwO1xuICAgIGxldCBzaWRlX2Rpc3RhbmNlID0gbnVsbDtcblxuICAgIGZvciAobGV0IGlkeCA9IDAsIG5zaWRlcyA9IHNpZGVzLmxlbmd0aDsgaWR4ICE9PSBuc2lkZXMgJiYgZm91bmQgPT09IGZhbHNlOyBpZHgrKykge1xuICAgICAgLy8gR2V0IHRoZSBwbGFuZSBzaWRlIG5vcm1hbCAobnMpXG4gICAgICBjb25zdCBucyA9IHNwaGVyZUJveF9ucztcbiAgICAgIG5zLmNvcHkoc2lkZXNbaWR4XSk7XG4gICAgICBjb25zdCBoID0gbnMubGVuZ3RoKCk7XG4gICAgICBucy5ub3JtYWxpemUoKTsgLy8gVGhlIG5vcm1hbC9kaXN0YW5jZSBkb3QgcHJvZHVjdCB0ZWxscyB3aGljaCBzaWRlIG9mIHRoZSBwbGFuZSB3ZSBhcmVcblxuICAgICAgY29uc3QgZG90ID0gYm94X3RvX3NwaGVyZS5kb3QobnMpO1xuXG4gICAgICBpZiAoZG90IDwgaCArIFIgJiYgZG90ID4gMCkge1xuICAgICAgICAvLyBJbnRlcnNlY3RzIHBsYW5lLiBOb3cgY2hlY2sgdGhlIG90aGVyIHR3byBkaW1lbnNpb25zXG4gICAgICAgIGNvbnN0IG5zMSA9IHNwaGVyZUJveF9uczE7XG4gICAgICAgIGNvbnN0IG5zMiA9IHNwaGVyZUJveF9uczI7XG4gICAgICAgIG5zMS5jb3B5KHNpZGVzWyhpZHggKyAxKSAlIDNdKTtcbiAgICAgICAgbnMyLmNvcHkoc2lkZXNbKGlkeCArIDIpICUgM10pO1xuICAgICAgICBjb25zdCBoMSA9IG5zMS5sZW5ndGgoKTtcbiAgICAgICAgY29uc3QgaDIgPSBuczIubGVuZ3RoKCk7XG4gICAgICAgIG5zMS5ub3JtYWxpemUoKTtcbiAgICAgICAgbnMyLm5vcm1hbGl6ZSgpO1xuICAgICAgICBjb25zdCBkb3QxID0gYm94X3RvX3NwaGVyZS5kb3QobnMxKTtcbiAgICAgICAgY29uc3QgZG90MiA9IGJveF90b19zcGhlcmUuZG90KG5zMik7XG5cbiAgICAgICAgaWYgKGRvdDEgPCBoMSAmJiBkb3QxID4gLWgxICYmIGRvdDIgPCBoMiAmJiBkb3QyID4gLWgyKSB7XG4gICAgICAgICAgY29uc3QgZGlzdCA9IE1hdGguYWJzKGRvdCAtIGggLSBSKTtcblxuICAgICAgICAgIGlmIChzaWRlX2Rpc3RhbmNlID09PSBudWxsIHx8IGRpc3QgPCBzaWRlX2Rpc3RhbmNlKSB7XG4gICAgICAgICAgICBzaWRlX2Rpc3RhbmNlID0gZGlzdDtcbiAgICAgICAgICAgIHNpZGVfZG90MSA9IGRvdDE7XG4gICAgICAgICAgICBzaWRlX2RvdDIgPSBkb3QyO1xuICAgICAgICAgICAgc2lkZV9oID0gaDtcbiAgICAgICAgICAgIHNpZGVfbnMuY29weShucyk7XG4gICAgICAgICAgICBzaWRlX25zMS5jb3B5KG5zMSk7XG4gICAgICAgICAgICBzaWRlX25zMi5jb3B5KG5zMik7XG4gICAgICAgICAgICBzaWRlX3BlbmV0cmF0aW9ucysrO1xuXG4gICAgICAgICAgICBpZiAoanVzdFRlc3QpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHNpZGVfcGVuZXRyYXRpb25zKSB7XG4gICAgICBmb3VuZCA9IHRydWU7XG4gICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksIGJqLCBzaSwgc2osIHJzaSwgcnNqKTtcbiAgICAgIHNpZGVfbnMuc2NhbGUoLVIsIHIucmkpOyAvLyBTcGhlcmUgclxuXG4gICAgICByLm5pLmNvcHkoc2lkZV9ucyk7XG4gICAgICByLm5pLm5lZ2F0ZShyLm5pKTsgLy8gTm9ybWFsIHNob3VsZCBiZSBvdXQgb2Ygc3BoZXJlXG5cbiAgICAgIHNpZGVfbnMuc2NhbGUoc2lkZV9oLCBzaWRlX25zKTtcbiAgICAgIHNpZGVfbnMxLnNjYWxlKHNpZGVfZG90MSwgc2lkZV9uczEpO1xuICAgICAgc2lkZV9ucy52YWRkKHNpZGVfbnMxLCBzaWRlX25zKTtcbiAgICAgIHNpZGVfbnMyLnNjYWxlKHNpZGVfZG90Miwgc2lkZV9uczIpO1xuICAgICAgc2lkZV9ucy52YWRkKHNpZGVfbnMyLCByLnJqKTsgLy8gTWFrZSByZWxhdGl2ZSB0byBib2RpZXNcblxuICAgICAgci5yaS52YWRkKHhpLCByLnJpKTtcbiAgICAgIHIucmkudnN1YihiaS5wb3NpdGlvbiwgci5yaSk7XG4gICAgICByLnJqLnZhZGQoeGosIHIucmopO1xuICAgICAgci5yai52c3ViKGJqLnBvc2l0aW9uLCByLnJqKTtcbiAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7XG4gICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7XG4gICAgfSAvLyBDaGVjayBjb3JuZXJzXG5cblxuICAgIGxldCByaiA9IHYzcG9vbC5nZXQoKTtcbiAgICBjb25zdCBzcGhlcmVfdG9fY29ybmVyID0gc3BoZXJlQm94X3NwaGVyZV90b19jb3JuZXI7XG5cbiAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gMiAmJiAhZm91bmQ7IGorKykge1xuICAgICAgZm9yIChsZXQgayA9IDA7IGsgIT09IDIgJiYgIWZvdW5kOyBrKyspIHtcbiAgICAgICAgZm9yIChsZXQgbCA9IDA7IGwgIT09IDIgJiYgIWZvdW5kOyBsKyspIHtcbiAgICAgICAgICByai5zZXQoMCwgMCwgMCk7XG5cbiAgICAgICAgICBpZiAoaikge1xuICAgICAgICAgICAgcmoudmFkZChzaWRlc1swXSwgcmopO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByai52c3ViKHNpZGVzWzBdLCByaik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGspIHtcbiAgICAgICAgICAgIHJqLnZhZGQoc2lkZXNbMV0sIHJqKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmoudnN1YihzaWRlc1sxXSwgcmopO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChsKSB7XG4gICAgICAgICAgICByai52YWRkKHNpZGVzWzJdLCByaik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJqLnZzdWIoc2lkZXNbMl0sIHJqKTtcbiAgICAgICAgICB9IC8vIFdvcmxkIHBvc2l0aW9uIG9mIGNvcm5lclxuXG5cbiAgICAgICAgICB4ai52YWRkKHJqLCBzcGhlcmVfdG9fY29ybmVyKTtcbiAgICAgICAgICBzcGhlcmVfdG9fY29ybmVyLnZzdWIoeGksIHNwaGVyZV90b19jb3JuZXIpO1xuXG4gICAgICAgICAgaWYgKHNwaGVyZV90b19jb3JuZXIubGVuZ3RoU3F1YXJlZCgpIDwgUiAqIFIpIHtcbiAgICAgICAgICAgIGlmIChqdXN0VGVzdCkge1xuICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgY29uc3QgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLCBiaiwgc2ksIHNqLCByc2ksIHJzaik7XG4gICAgICAgICAgICByLnJpLmNvcHkoc3BoZXJlX3RvX2Nvcm5lcik7XG4gICAgICAgICAgICByLnJpLm5vcm1hbGl6ZSgpO1xuICAgICAgICAgICAgci5uaS5jb3B5KHIucmkpO1xuICAgICAgICAgICAgci5yaS5zY2FsZShSLCByLnJpKTtcbiAgICAgICAgICAgIHIucmouY29weShyaik7IC8vIE1ha2UgcmVsYXRpdmUgdG8gYm9kaWVzXG5cbiAgICAgICAgICAgIHIucmkudmFkZCh4aSwgci5yaSk7XG4gICAgICAgICAgICByLnJpLnZzdWIoYmkucG9zaXRpb24sIHIucmkpO1xuICAgICAgICAgICAgci5yai52YWRkKHhqLCByLnJqKTtcbiAgICAgICAgICAgIHIucmoudnN1Yihiai5wb3NpdGlvbiwgci5yaik7XG4gICAgICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpO1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHYzcG9vbC5yZWxlYXNlKHJqKTtcbiAgICByaiA9IG51bGw7IC8vIENoZWNrIGVkZ2VzXG5cbiAgICBjb25zdCBlZGdlVGFuZ2VudCA9IHYzcG9vbC5nZXQoKTtcbiAgICBjb25zdCBlZGdlQ2VudGVyID0gdjNwb29sLmdldCgpO1xuICAgIGNvbnN0IHIgPSB2M3Bvb2wuZ2V0KCk7IC8vIHIgPSBlZGdlIGNlbnRlciB0byBzcGhlcmUgY2VudGVyXG5cbiAgICBjb25zdCBvcnRob2dvbmFsID0gdjNwb29sLmdldCgpO1xuICAgIGNvbnN0IGRpc3QgPSB2M3Bvb2wuZ2V0KCk7XG4gICAgY29uc3QgTnNpZGVzID0gc2lkZXMubGVuZ3RoO1xuXG4gICAgZm9yIChsZXQgaiA9IDA7IGogIT09IE5zaWRlcyAmJiAhZm91bmQ7IGorKykge1xuICAgICAgZm9yIChsZXQgayA9IDA7IGsgIT09IE5zaWRlcyAmJiAhZm91bmQ7IGsrKykge1xuICAgICAgICBpZiAoaiAlIDMgIT09IGsgJSAzKSB7XG4gICAgICAgICAgLy8gR2V0IGVkZ2UgdGFuZ2VudFxuICAgICAgICAgIHNpZGVzW2tdLmNyb3NzKHNpZGVzW2pdLCBlZGdlVGFuZ2VudCk7XG4gICAgICAgICAgZWRnZVRhbmdlbnQubm9ybWFsaXplKCk7XG4gICAgICAgICAgc2lkZXNbal0udmFkZChzaWRlc1trXSwgZWRnZUNlbnRlcik7XG4gICAgICAgICAgci5jb3B5KHhpKTtcbiAgICAgICAgICByLnZzdWIoZWRnZUNlbnRlciwgcik7XG4gICAgICAgICAgci52c3ViKHhqLCByKTtcbiAgICAgICAgICBjb25zdCBvcnRob25vcm0gPSByLmRvdChlZGdlVGFuZ2VudCk7IC8vIGRpc3RhbmNlIGZyb20gZWRnZSBjZW50ZXIgdG8gc3BoZXJlIGNlbnRlciBpbiB0aGUgdGFuZ2VudCBkaXJlY3Rpb25cblxuICAgICAgICAgIGVkZ2VUYW5nZW50LnNjYWxlKG9ydGhvbm9ybSwgb3J0aG9nb25hbCk7IC8vIFZlY3RvciBmcm9tIGVkZ2UgY2VudGVyIHRvIHNwaGVyZSBjZW50ZXIgaW4gdGhlIHRhbmdlbnQgZGlyZWN0aW9uXG4gICAgICAgICAgLy8gRmluZCB0aGUgdGhpcmQgc2lkZSBvcnRob2dvbmFsIHRvIHRoaXMgb25lXG5cbiAgICAgICAgICBsZXQgbCA9IDA7XG5cbiAgICAgICAgICB3aGlsZSAobCA9PT0gaiAlIDMgfHwgbCA9PT0gayAlIDMpIHtcbiAgICAgICAgICAgIGwrKztcbiAgICAgICAgICB9IC8vIHZlYyBmcm9tIGVkZ2UgY2VudGVyIHRvIHNwaGVyZSBwcm9qZWN0ZWQgdG8gdGhlIHBsYW5lIG9ydGhvZ29uYWwgdG8gdGhlIGVkZ2UgdGFuZ2VudFxuXG5cbiAgICAgICAgICBkaXN0LmNvcHkoeGkpO1xuICAgICAgICAgIGRpc3QudnN1YihvcnRob2dvbmFsLCBkaXN0KTtcbiAgICAgICAgICBkaXN0LnZzdWIoZWRnZUNlbnRlciwgZGlzdCk7XG4gICAgICAgICAgZGlzdC52c3ViKHhqLCBkaXN0KTsgLy8gRGlzdGFuY2VzIGluIHRhbmdlbnQgZGlyZWN0aW9uIGFuZCBkaXN0YW5jZSBpbiB0aGUgcGxhbmUgb3J0aG9nb25hbCB0byBpdFxuXG4gICAgICAgICAgY29uc3QgdGRpc3QgPSBNYXRoLmFicyhvcnRob25vcm0pO1xuICAgICAgICAgIGNvbnN0IG5kaXN0ID0gZGlzdC5sZW5ndGgoKTtcblxuICAgICAgICAgIGlmICh0ZGlzdCA8IHNpZGVzW2xdLmxlbmd0aCgpICYmIG5kaXN0IDwgUikge1xuICAgICAgICAgICAgaWYgKGp1c3RUZXN0KSB7XG4gICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb3VuZCA9IHRydWU7XG4gICAgICAgICAgICBjb25zdCByZXMgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opO1xuICAgICAgICAgICAgZWRnZUNlbnRlci52YWRkKG9ydGhvZ29uYWwsIHJlcy5yaik7IC8vIGJveCByalxuXG4gICAgICAgICAgICByZXMucmouY29weShyZXMucmopO1xuICAgICAgICAgICAgZGlzdC5uZWdhdGUocmVzLm5pKTtcbiAgICAgICAgICAgIHJlcy5uaS5ub3JtYWxpemUoKTtcbiAgICAgICAgICAgIHJlcy5yaS5jb3B5KHJlcy5yaik7XG4gICAgICAgICAgICByZXMucmkudmFkZCh4aiwgcmVzLnJpKTtcbiAgICAgICAgICAgIHJlcy5yaS52c3ViKHhpLCByZXMucmkpO1xuICAgICAgICAgICAgcmVzLnJpLm5vcm1hbGl6ZSgpO1xuICAgICAgICAgICAgcmVzLnJpLnNjYWxlKFIsIHJlcy5yaSk7IC8vIE1ha2UgcmVsYXRpdmUgdG8gYm9kaWVzXG5cbiAgICAgICAgICAgIHJlcy5yaS52YWRkKHhpLCByZXMucmkpO1xuICAgICAgICAgICAgcmVzLnJpLnZzdWIoYmkucG9zaXRpb24sIHJlcy5yaSk7XG4gICAgICAgICAgICByZXMucmoudmFkZCh4aiwgcmVzLnJqKTtcbiAgICAgICAgICAgIHJlcy5yai52c3ViKGJqLnBvc2l0aW9uLCByZXMucmopO1xuICAgICAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyZXMpO1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHJlcywgdGhpcy5mcmljdGlvblJlc3VsdCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgdjNwb29sLnJlbGVhc2UoZWRnZVRhbmdlbnQsIGVkZ2VDZW50ZXIsIHIsIG9ydGhvZ29uYWwsIGRpc3QpO1xuICB9XG5cbiAgcGxhbmVCb3goc2ksIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCByc2ksIHJzaiwganVzdFRlc3QpIHtcbiAgICBzai5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24ubWF0ZXJpYWwgPSBzai5tYXRlcmlhbDtcbiAgICBzai5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24uY29sbGlzaW9uUmVzcG9uc2UgPSBzai5jb2xsaXNpb25SZXNwb25zZTtcbiAgICBzai5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24uaWQgPSBzai5pZDtcbiAgICByZXR1cm4gdGhpcy5wbGFuZUNvbnZleChzaSwgc2ouY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCBzaSwgc2osIGp1c3RUZXN0KTtcbiAgfVxuXG4gIGNvbnZleENvbnZleChzaSwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHJzaSwgcnNqLCBqdXN0VGVzdCwgZmFjZUxpc3RBLCBmYWNlTGlzdEIpIHtcbiAgICBjb25zdCBzZXBBeGlzID0gY29udmV4Q29udmV4X3NlcEF4aXM7XG5cbiAgICBpZiAoeGkuZGlzdGFuY2VUbyh4aikgPiBzaS5ib3VuZGluZ1NwaGVyZVJhZGl1cyArIHNqLmJvdW5kaW5nU3BoZXJlUmFkaXVzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHNpLmZpbmRTZXBhcmF0aW5nQXhpcyhzaiwgeGksIHFpLCB4aiwgcWosIHNlcEF4aXMsIGZhY2VMaXN0QSwgZmFjZUxpc3RCKSkge1xuICAgICAgY29uc3QgcmVzID0gW107XG4gICAgICBjb25zdCBxID0gY29udmV4Q29udmV4X3E7XG4gICAgICBzaS5jbGlwQWdhaW5zdEh1bGwoeGksIHFpLCBzaiwgeGosIHFqLCBzZXBBeGlzLCAtMTAwLCAxMDAsIHJlcyk7XG4gICAgICBsZXQgbnVtQ29udGFjdHMgPSAwO1xuXG4gICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gcmVzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIGlmIChqdXN0VGVzdCkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLCBiaiwgc2ksIHNqLCByc2ksIHJzaik7XG4gICAgICAgIGNvbnN0IHJpID0gci5yaTtcbiAgICAgICAgY29uc3QgcmogPSByLnJqO1xuICAgICAgICBzZXBBeGlzLm5lZ2F0ZShyLm5pKTtcbiAgICAgICAgcmVzW2pdLm5vcm1hbC5uZWdhdGUocSk7XG4gICAgICAgIHEuc2NhbGUocmVzW2pdLmRlcHRoLCBxKTtcbiAgICAgICAgcmVzW2pdLnBvaW50LnZhZGQocSwgcmkpO1xuICAgICAgICByai5jb3B5KHJlc1tqXS5wb2ludCk7IC8vIENvbnRhY3QgcG9pbnRzIGFyZSBpbiB3b3JsZCBjb29yZGluYXRlcy4gVHJhbnNmb3JtIGJhY2sgdG8gcmVsYXRpdmVcblxuICAgICAgICByaS52c3ViKHhpLCByaSk7XG4gICAgICAgIHJqLnZzdWIoeGosIHJqKTsgLy8gTWFrZSByZWxhdGl2ZSB0byBib2RpZXNcblxuICAgICAgICByaS52YWRkKHhpLCByaSk7XG4gICAgICAgIHJpLnZzdWIoYmkucG9zaXRpb24sIHJpKTtcbiAgICAgICAgcmoudmFkZCh4aiwgcmopO1xuICAgICAgICByai52c3ViKGJqLnBvc2l0aW9uLCByaik7XG4gICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7XG4gICAgICAgIG51bUNvbnRhY3RzKys7XG5cbiAgICAgICAgaWYgKCF0aGlzLmVuYWJsZUZyaWN0aW9uUmVkdWN0aW9uKSB7XG4gICAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmVuYWJsZUZyaWN0aW9uUmVkdWN0aW9uICYmIG51bUNvbnRhY3RzKSB7XG4gICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25Gcm9tQXZlcmFnZShudW1Db250YWN0cyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3BoZXJlQ29udmV4KHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0KSB7XG4gICAgY29uc3QgdjNwb29sID0gdGhpcy52M3Bvb2w7XG4gICAgeGkudnN1Yih4aiwgY29udmV4X3RvX3NwaGVyZSk7XG4gICAgY29uc3Qgbm9ybWFscyA9IHNqLmZhY2VOb3JtYWxzO1xuICAgIGNvbnN0IGZhY2VzID0gc2ouZmFjZXM7XG4gICAgY29uc3QgdmVydHMgPSBzai52ZXJ0aWNlcztcbiAgICBjb25zdCBSID0gc2kucmFkaXVzO1xuICAgIC8vICAgICByZXR1cm47XG4gICAgLy8gfVxuXG4gICAgbGV0IGZvdW5kID0gZmFsc2U7IC8vIENoZWNrIGNvcm5lcnNcblxuICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSB2ZXJ0cy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgdiA9IHZlcnRzW2ldOyAvLyBXb3JsZCBwb3NpdGlvbiBvZiBjb3JuZXJcblxuICAgICAgY29uc3Qgd29ybGRDb3JuZXIgPSBzcGhlcmVDb252ZXhfd29ybGRDb3JuZXI7XG4gICAgICBxai52bXVsdCh2LCB3b3JsZENvcm5lcik7XG4gICAgICB4ai52YWRkKHdvcmxkQ29ybmVyLCB3b3JsZENvcm5lcik7XG4gICAgICBjb25zdCBzcGhlcmVfdG9fY29ybmVyID0gc3BoZXJlQ29udmV4X3NwaGVyZVRvQ29ybmVyO1xuICAgICAgd29ybGRDb3JuZXIudnN1Yih4aSwgc3BoZXJlX3RvX2Nvcm5lcik7XG5cbiAgICAgIGlmIChzcGhlcmVfdG9fY29ybmVyLmxlbmd0aFNxdWFyZWQoKSA8IFIgKiBSKSB7XG4gICAgICAgIGlmIChqdXN0VGVzdCkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksIGJqLCBzaSwgc2osIHJzaSwgcnNqKTtcbiAgICAgICAgci5yaS5jb3B5KHNwaGVyZV90b19jb3JuZXIpO1xuICAgICAgICByLnJpLm5vcm1hbGl6ZSgpO1xuICAgICAgICByLm5pLmNvcHkoci5yaSk7XG4gICAgICAgIHIucmkuc2NhbGUoUiwgci5yaSk7XG4gICAgICAgIHdvcmxkQ29ybmVyLnZzdWIoeGosIHIucmopOyAvLyBTaG91bGQgYmUgcmVsYXRpdmUgdG8gdGhlIGJvZHkuXG5cbiAgICAgICAgci5yaS52YWRkKHhpLCByLnJpKTtcbiAgICAgICAgci5yaS52c3ViKGJpLnBvc2l0aW9uLCByLnJpKTsgLy8gU2hvdWxkIGJlIHJlbGF0aXZlIHRvIHRoZSBib2R5LlxuXG4gICAgICAgIHIucmoudmFkZCh4aiwgci5yaik7XG4gICAgICAgIHIucmoudnN1Yihiai5wb3NpdGlvbiwgci5yaik7XG4gICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7XG4gICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH0gLy8gQ2hlY2sgc2lkZSAocGxhbmUpIGludGVyc2VjdGlvbnNcblxuXG4gICAgZm9yIChsZXQgaSA9IDAsIG5mYWNlcyA9IGZhY2VzLmxlbmd0aDsgaSAhPT0gbmZhY2VzICYmIGZvdW5kID09PSBmYWxzZTsgaSsrKSB7XG4gICAgICBjb25zdCBub3JtYWwgPSBub3JtYWxzW2ldO1xuICAgICAgY29uc3QgZmFjZSA9IGZhY2VzW2ldOyAvLyBHZXQgd29ybGQtdHJhbnNmb3JtZWQgbm9ybWFsIG9mIHRoZSBmYWNlXG5cbiAgICAgIGNvbnN0IHdvcmxkTm9ybWFsID0gc3BoZXJlQ29udmV4X3dvcmxkTm9ybWFsO1xuICAgICAgcWoudm11bHQobm9ybWFsLCB3b3JsZE5vcm1hbCk7IC8vIEdldCBhIHdvcmxkIHZlcnRleCBmcm9tIHRoZSBmYWNlXG5cbiAgICAgIGNvbnN0IHdvcmxkUG9pbnQgPSBzcGhlcmVDb252ZXhfd29ybGRQb2ludDtcbiAgICAgIHFqLnZtdWx0KHZlcnRzW2ZhY2VbMF1dLCB3b3JsZFBvaW50KTtcbiAgICAgIHdvcmxkUG9pbnQudmFkZCh4aiwgd29ybGRQb2ludCk7IC8vIEdldCBhIHBvaW50IG9uIHRoZSBzcGhlcmUsIGNsb3Nlc3QgdG8gdGhlIGZhY2Ugbm9ybWFsXG5cbiAgICAgIGNvbnN0IHdvcmxkU3BoZXJlUG9pbnRDbG9zZXN0VG9QbGFuZSA9IHNwaGVyZUNvbnZleF93b3JsZFNwaGVyZVBvaW50Q2xvc2VzdFRvUGxhbmU7XG4gICAgICB3b3JsZE5vcm1hbC5zY2FsZSgtUiwgd29ybGRTcGhlcmVQb2ludENsb3Nlc3RUb1BsYW5lKTtcbiAgICAgIHhpLnZhZGQod29ybGRTcGhlcmVQb2ludENsb3Nlc3RUb1BsYW5lLCB3b3JsZFNwaGVyZVBvaW50Q2xvc2VzdFRvUGxhbmUpOyAvLyBWZWN0b3IgZnJvbSBhIGZhY2UgcG9pbnQgdG8gdGhlIGNsb3Nlc3QgcG9pbnQgb24gdGhlIHNwaGVyZVxuXG4gICAgICBjb25zdCBwZW5ldHJhdGlvblZlYyA9IHNwaGVyZUNvbnZleF9wZW5ldHJhdGlvblZlYztcbiAgICAgIHdvcmxkU3BoZXJlUG9pbnRDbG9zZXN0VG9QbGFuZS52c3ViKHdvcmxkUG9pbnQsIHBlbmV0cmF0aW9uVmVjKTsgLy8gVGhlIHBlbmV0cmF0aW9uLiBOZWdhdGl2ZSB2YWx1ZSBtZWFucyBvdmVybGFwLlxuXG4gICAgICBjb25zdCBwZW5ldHJhdGlvbiA9IHBlbmV0cmF0aW9uVmVjLmRvdCh3b3JsZE5vcm1hbCk7XG4gICAgICBjb25zdCB3b3JsZFBvaW50VG9TcGhlcmUgPSBzcGhlcmVDb252ZXhfc3BoZXJlVG9Xb3JsZFBvaW50O1xuICAgICAgeGkudnN1Yih3b3JsZFBvaW50LCB3b3JsZFBvaW50VG9TcGhlcmUpO1xuXG4gICAgICBpZiAocGVuZXRyYXRpb24gPCAwICYmIHdvcmxkUG9pbnRUb1NwaGVyZS5kb3Qod29ybGROb3JtYWwpID4gMCkge1xuICAgICAgICAvLyBJbnRlcnNlY3RzIHBsYW5lLiBOb3cgY2hlY2sgaWYgdGhlIHNwaGVyZSBpcyBpbnNpZGUgdGhlIGZhY2UgcG9seWdvblxuICAgICAgICBjb25zdCBmYWNlVmVydHMgPSBbXTsgLy8gRmFjZSB2ZXJ0aWNlcywgaW4gd29ybGQgY29vcmRzXG5cbiAgICAgICAgZm9yIChsZXQgaiA9IDAsIE52ZXJ0cyA9IGZhY2UubGVuZ3RoOyBqICE9PSBOdmVydHM7IGorKykge1xuICAgICAgICAgIGNvbnN0IHdvcmxkVmVydGV4ID0gdjNwb29sLmdldCgpO1xuICAgICAgICAgIHFqLnZtdWx0KHZlcnRzW2ZhY2Vbal1dLCB3b3JsZFZlcnRleCk7XG4gICAgICAgICAgeGoudmFkZCh3b3JsZFZlcnRleCwgd29ybGRWZXJ0ZXgpO1xuICAgICAgICAgIGZhY2VWZXJ0cy5wdXNoKHdvcmxkVmVydGV4KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwb2ludEluUG9seWdvbihmYWNlVmVydHMsIHdvcmxkTm9ybWFsLCB4aSkpIHtcbiAgICAgICAgICAvLyBJcyB0aGUgc3BoZXJlIGNlbnRlciBpbiB0aGUgZmFjZSBwb2x5Z29uP1xuICAgICAgICAgIGlmIChqdXN0VGVzdCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opO1xuICAgICAgICAgIHdvcmxkTm9ybWFsLnNjYWxlKC1SLCByLnJpKTsgLy8gQ29udGFjdCBvZmZzZXQsIGZyb20gc3BoZXJlIGNlbnRlciB0byBjb250YWN0XG5cbiAgICAgICAgICB3b3JsZE5vcm1hbC5uZWdhdGUoci5uaSk7IC8vIE5vcm1hbCBwb2ludGluZyBvdXQgb2Ygc3BoZXJlXG5cbiAgICAgICAgICBjb25zdCBwZW5ldHJhdGlvblZlYzIgPSB2M3Bvb2wuZ2V0KCk7XG4gICAgICAgICAgd29ybGROb3JtYWwuc2NhbGUoLXBlbmV0cmF0aW9uLCBwZW5ldHJhdGlvblZlYzIpO1xuICAgICAgICAgIGNvbnN0IHBlbmV0cmF0aW9uU3BoZXJlUG9pbnQgPSB2M3Bvb2wuZ2V0KCk7XG4gICAgICAgICAgd29ybGROb3JtYWwuc2NhbGUoLVIsIHBlbmV0cmF0aW9uU3BoZXJlUG9pbnQpOyAvL3hpLnZzdWIoeGopLnZhZGQocGVuZXRyYXRpb25TcGhlcmVQb2ludCkudmFkZChwZW5ldHJhdGlvblZlYzIgLCByLnJqKTtcblxuICAgICAgICAgIHhpLnZzdWIoeGosIHIucmopO1xuICAgICAgICAgIHIucmoudmFkZChwZW5ldHJhdGlvblNwaGVyZVBvaW50LCByLnJqKTtcbiAgICAgICAgICByLnJqLnZhZGQocGVuZXRyYXRpb25WZWMyLCByLnJqKTsgLy8gU2hvdWxkIGJlIHJlbGF0aXZlIHRvIHRoZSBib2R5LlxuXG4gICAgICAgICAgci5yai52YWRkKHhqLCByLnJqKTtcbiAgICAgICAgICByLnJqLnZzdWIoYmoucG9zaXRpb24sIHIucmopOyAvLyBTaG91bGQgYmUgcmVsYXRpdmUgdG8gdGhlIGJvZHkuXG5cbiAgICAgICAgICByLnJpLnZhZGQoeGksIHIucmkpO1xuICAgICAgICAgIHIucmkudnN1YihiaS5wb3NpdGlvbiwgci5yaSk7XG4gICAgICAgICAgdjNwb29sLnJlbGVhc2UocGVuZXRyYXRpb25WZWMyKTtcbiAgICAgICAgICB2M3Bvb2wucmVsZWFzZShwZW5ldHJhdGlvblNwaGVyZVBvaW50KTtcbiAgICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpO1xuICAgICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsgLy8gUmVsZWFzZSB3b3JsZCB2ZXJ0aWNlc1xuXG4gICAgICAgICAgZm9yIChsZXQgaiA9IDAsIE5mYWNldmVydHMgPSBmYWNlVmVydHMubGVuZ3RoOyBqICE9PSBOZmFjZXZlcnRzOyBqKyspIHtcbiAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKGZhY2VWZXJ0c1tqXSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuOyAvLyBXZSBvbmx5IGV4cGVjdCAqb25lKiBmYWNlIGNvbnRhY3RcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBFZGdlP1xuICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqICE9PSBmYWNlLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAvLyBHZXQgdHdvIHdvcmxkIHRyYW5zZm9ybWVkIHZlcnRpY2VzXG4gICAgICAgICAgICBjb25zdCB2MSA9IHYzcG9vbC5nZXQoKTtcbiAgICAgICAgICAgIGNvbnN0IHYyID0gdjNwb29sLmdldCgpO1xuICAgICAgICAgICAgcWoudm11bHQodmVydHNbZmFjZVsoaiArIDEpICUgZmFjZS5sZW5ndGhdXSwgdjEpO1xuICAgICAgICAgICAgcWoudm11bHQodmVydHNbZmFjZVsoaiArIDIpICUgZmFjZS5sZW5ndGhdXSwgdjIpO1xuICAgICAgICAgICAgeGoudmFkZCh2MSwgdjEpO1xuICAgICAgICAgICAgeGoudmFkZCh2MiwgdjIpOyAvLyBDb25zdHJ1Y3QgZWRnZSB2ZWN0b3JcblxuICAgICAgICAgICAgY29uc3QgZWRnZSA9IHNwaGVyZUNvbnZleF9lZGdlO1xuICAgICAgICAgICAgdjIudnN1Yih2MSwgZWRnZSk7IC8vIENvbnN0cnVjdCB0aGUgc2FtZSB2ZWN0b3IsIGJ1dCBub3JtYWxpemVkXG5cbiAgICAgICAgICAgIGNvbnN0IGVkZ2VVbml0ID0gc3BoZXJlQ29udmV4X2VkZ2VVbml0O1xuICAgICAgICAgICAgZWRnZS51bml0KGVkZ2VVbml0KTsgLy8gcCBpcyB4aSBwcm9qZWN0ZWQgb250byB0aGUgZWRnZVxuXG4gICAgICAgICAgICBjb25zdCBwID0gdjNwb29sLmdldCgpO1xuICAgICAgICAgICAgY29uc3QgdjFfdG9feGkgPSB2M3Bvb2wuZ2V0KCk7XG4gICAgICAgICAgICB4aS52c3ViKHYxLCB2MV90b194aSk7XG4gICAgICAgICAgICBjb25zdCBkb3QgPSB2MV90b194aS5kb3QoZWRnZVVuaXQpO1xuICAgICAgICAgICAgZWRnZVVuaXQuc2NhbGUoZG90LCBwKTtcbiAgICAgICAgICAgIHAudmFkZCh2MSwgcCk7IC8vIENvbXB1dGUgYSB2ZWN0b3IgZnJvbSBwIHRvIHRoZSBjZW50ZXIgb2YgdGhlIHNwaGVyZVxuXG4gICAgICAgICAgICBjb25zdCB4aV90b19wID0gdjNwb29sLmdldCgpO1xuICAgICAgICAgICAgcC52c3ViKHhpLCB4aV90b19wKTsgLy8gQ29sbGlzaW9uIGlmIHRoZSBlZGdlLXNwaGVyZSBkaXN0YW5jZSBpcyBsZXNzIHRoYW4gdGhlIHJhZGl1c1xuICAgICAgICAgICAgLy8gQU5EIGlmIHAgaXMgaW4gYmV0d2VlbiB2MSBhbmQgdjJcblxuICAgICAgICAgICAgaWYgKGRvdCA+IDAgJiYgZG90ICogZG90IDwgZWRnZS5sZW5ndGhTcXVhcmVkKCkgJiYgeGlfdG9fcC5sZW5ndGhTcXVhcmVkKCkgPCBSICogUikge1xuICAgICAgICAgICAgICAvLyBDb2xsaXNpb24gaWYgdGhlIGVkZ2Utc3BoZXJlIGRpc3RhbmNlIGlzIGxlc3MgdGhhbiB0aGUgcmFkaXVzXG4gICAgICAgICAgICAgIC8vIEVkZ2UgY29udGFjdCFcbiAgICAgICAgICAgICAgaWYgKGp1c3RUZXN0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksIGJqLCBzaSwgc2osIHJzaSwgcnNqKTtcbiAgICAgICAgICAgICAgcC52c3ViKHhqLCByLnJqKTtcbiAgICAgICAgICAgICAgcC52c3ViKHhpLCByLm5pKTtcbiAgICAgICAgICAgICAgci5uaS5ub3JtYWxpemUoKTtcbiAgICAgICAgICAgICAgci5uaS5zY2FsZShSLCByLnJpKTsgLy8gU2hvdWxkIGJlIHJlbGF0aXZlIHRvIHRoZSBib2R5LlxuXG4gICAgICAgICAgICAgIHIucmoudmFkZCh4aiwgci5yaik7XG4gICAgICAgICAgICAgIHIucmoudnN1Yihiai5wb3NpdGlvbiwgci5yaik7IC8vIFNob3VsZCBiZSByZWxhdGl2ZSB0byB0aGUgYm9keS5cblxuICAgICAgICAgICAgICByLnJpLnZhZGQoeGksIHIucmkpO1xuICAgICAgICAgICAgICByLnJpLnZzdWIoYmkucG9zaXRpb24sIHIucmkpO1xuICAgICAgICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpO1xuICAgICAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7IC8vIFJlbGVhc2Ugd29ybGQgdmVydGljZXNcblxuICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMCwgTmZhY2V2ZXJ0cyA9IGZhY2VWZXJ0cy5sZW5ndGg7IGogIT09IE5mYWNldmVydHM7IGorKykge1xuICAgICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKGZhY2VWZXJ0c1tqXSk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICB2M3Bvb2wucmVsZWFzZSh2MSk7XG4gICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHYyKTtcbiAgICAgICAgICAgICAgdjNwb29sLnJlbGVhc2UocCk7XG4gICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHhpX3RvX3ApO1xuICAgICAgICAgICAgICB2M3Bvb2wucmVsZWFzZSh2MV90b194aSk7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdjNwb29sLnJlbGVhc2UodjEpO1xuICAgICAgICAgICAgdjNwb29sLnJlbGVhc2UodjIpO1xuICAgICAgICAgICAgdjNwb29sLnJlbGVhc2UocCk7XG4gICAgICAgICAgICB2M3Bvb2wucmVsZWFzZSh4aV90b19wKTtcbiAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHYxX3RvX3hpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gLy8gUmVsZWFzZSB3b3JsZCB2ZXJ0aWNlc1xuXG5cbiAgICAgICAgZm9yIChsZXQgaiA9IDAsIE5mYWNldmVydHMgPSBmYWNlVmVydHMubGVuZ3RoOyBqICE9PSBOZmFjZXZlcnRzOyBqKyspIHtcbiAgICAgICAgICB2M3Bvb2wucmVsZWFzZShmYWNlVmVydHNbal0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcGxhbmVDb252ZXgocGxhbmVTaGFwZSwgY29udmV4U2hhcGUsIHBsYW5lUG9zaXRpb24sIGNvbnZleFBvc2l0aW9uLCBwbGFuZVF1YXQsIGNvbnZleFF1YXQsIHBsYW5lQm9keSwgY29udmV4Qm9keSwgc2ksIHNqLCBqdXN0VGVzdCkge1xuICAgIC8vIFNpbXBseSByZXR1cm4gdGhlIHBvaW50cyBiZWhpbmQgdGhlIHBsYW5lLlxuICAgIGNvbnN0IHdvcmxkVmVydGV4ID0gcGxhbmVDb252ZXhfdjtcbiAgICBjb25zdCB3b3JsZE5vcm1hbCA9IHBsYW5lQ29udmV4X25vcm1hbDtcbiAgICB3b3JsZE5vcm1hbC5zZXQoMCwgMCwgMSk7XG4gICAgcGxhbmVRdWF0LnZtdWx0KHdvcmxkTm9ybWFsLCB3b3JsZE5vcm1hbCk7IC8vIFR1cm4gbm9ybWFsIGFjY29yZGluZyB0byBwbGFuZSBvcmllbnRhdGlvblxuXG4gICAgbGV0IG51bUNvbnRhY3RzID0gMDtcbiAgICBjb25zdCByZWxwb3MgPSBwbGFuZUNvbnZleF9yZWxwb3M7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gY29udmV4U2hhcGUudmVydGljZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIC8vIEdldCB3b3JsZCBjb252ZXggdmVydGV4XG4gICAgICB3b3JsZFZlcnRleC5jb3B5KGNvbnZleFNoYXBlLnZlcnRpY2VzW2ldKTtcbiAgICAgIGNvbnZleFF1YXQudm11bHQod29ybGRWZXJ0ZXgsIHdvcmxkVmVydGV4KTtcbiAgICAgIGNvbnZleFBvc2l0aW9uLnZhZGQod29ybGRWZXJ0ZXgsIHdvcmxkVmVydGV4KTtcbiAgICAgIHdvcmxkVmVydGV4LnZzdWIocGxhbmVQb3NpdGlvbiwgcmVscG9zKTtcbiAgICAgIGNvbnN0IGRvdCA9IHdvcmxkTm9ybWFsLmRvdChyZWxwb3MpO1xuXG4gICAgICBpZiAoZG90IDw9IDAuMCkge1xuICAgICAgICBpZiAoanVzdFRlc3QpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihwbGFuZUJvZHksIGNvbnZleEJvZHksIHBsYW5lU2hhcGUsIGNvbnZleFNoYXBlLCBzaSwgc2opOyAvLyBHZXQgdmVydGV4IHBvc2l0aW9uIHByb2plY3RlZCBvbiBwbGFuZVxuXG4gICAgICAgIGNvbnN0IHByb2plY3RlZCA9IHBsYW5lQ29udmV4X3Byb2plY3RlZDtcbiAgICAgICAgd29ybGROb3JtYWwuc2NhbGUod29ybGROb3JtYWwuZG90KHJlbHBvcyksIHByb2plY3RlZCk7XG4gICAgICAgIHdvcmxkVmVydGV4LnZzdWIocHJvamVjdGVkLCBwcm9qZWN0ZWQpO1xuICAgICAgICBwcm9qZWN0ZWQudnN1YihwbGFuZVBvc2l0aW9uLCByLnJpKTsgLy8gRnJvbSBwbGFuZSB0byB2ZXJ0ZXggcHJvamVjdGVkIG9uIHBsYW5lXG5cbiAgICAgICAgci5uaS5jb3B5KHdvcmxkTm9ybWFsKTsgLy8gQ29udGFjdCBub3JtYWwgaXMgdGhlIHBsYW5lIG5vcm1hbCBvdXQgZnJvbSBwbGFuZVxuICAgICAgICAvLyByaiBpcyBub3cganVzdCB0aGUgdmVjdG9yIGZyb20gdGhlIGNvbnZleCBjZW50ZXIgdG8gdGhlIHZlcnRleFxuXG4gICAgICAgIHdvcmxkVmVydGV4LnZzdWIoY29udmV4UG9zaXRpb24sIHIucmopOyAvLyBNYWtlIGl0IHJlbGF0aXZlIHRvIHRoZSBib2R5XG5cbiAgICAgICAgci5yaS52YWRkKHBsYW5lUG9zaXRpb24sIHIucmkpO1xuICAgICAgICByLnJpLnZzdWIocGxhbmVCb2R5LnBvc2l0aW9uLCByLnJpKTtcbiAgICAgICAgci5yai52YWRkKGNvbnZleFBvc2l0aW9uLCByLnJqKTtcbiAgICAgICAgci5yai52c3ViKGNvbnZleEJvZHkucG9zaXRpb24sIHIucmopO1xuICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpO1xuICAgICAgICBudW1Db250YWN0cysrO1xuXG4gICAgICAgIGlmICghdGhpcy5lbmFibGVGcmljdGlvblJlZHVjdGlvbikge1xuICAgICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLmVuYWJsZUZyaWN0aW9uUmVkdWN0aW9uICYmIG51bUNvbnRhY3RzKSB7XG4gICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRnJvbUF2ZXJhZ2UobnVtQ29udGFjdHMpO1xuICAgIH1cbiAgfVxuXG4gIGJveENvbnZleChzaSwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHJzaSwgcnNqLCBqdXN0VGVzdCkge1xuICAgIHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5tYXRlcmlhbCA9IHNpLm1hdGVyaWFsO1xuICAgIHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5jb2xsaXNpb25SZXNwb25zZSA9IHNpLmNvbGxpc2lvblJlc3BvbnNlO1xuICAgIHJldHVybiB0aGlzLmNvbnZleENvbnZleChzaS5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24sIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCBzaSwgc2osIGp1c3RUZXN0KTtcbiAgfVxuXG4gIHNwaGVyZUhlaWdodGZpZWxkKHNwaGVyZVNoYXBlLCBoZlNoYXBlLCBzcGhlcmVQb3MsIGhmUG9zLCBzcGhlcmVRdWF0LCBoZlF1YXQsIHNwaGVyZUJvZHksIGhmQm9keSwgcnNpLCByc2osIGp1c3RUZXN0KSB7XG4gICAgY29uc3QgZGF0YSA9IGhmU2hhcGUuZGF0YTtcbiAgICBjb25zdCByYWRpdXMgPSBzcGhlcmVTaGFwZS5yYWRpdXM7XG4gICAgY29uc3QgdyA9IGhmU2hhcGUuZWxlbWVudFNpemU7XG4gICAgY29uc3Qgd29ybGRQaWxsYXJPZmZzZXQgPSBzcGhlcmVIZWlnaHRmaWVsZF90bXAyOyAvLyBHZXQgc3BoZXJlIHBvc2l0aW9uIHRvIGhlaWdodGZpZWxkIGxvY2FsIVxuXG4gICAgY29uc3QgbG9jYWxTcGhlcmVQb3MgPSBzcGhlcmVIZWlnaHRmaWVsZF90bXAxO1xuICAgIFRyYW5zZm9ybS5wb2ludFRvTG9jYWxGcmFtZShoZlBvcywgaGZRdWF0LCBzcGhlcmVQb3MsIGxvY2FsU3BoZXJlUG9zKTsgLy8gR2V0IHRoZSBpbmRleCBvZiB0aGUgZGF0YSBwb2ludHMgdG8gdGVzdCBhZ2FpbnN0XG5cbiAgICBsZXQgaU1pblggPSBNYXRoLmZsb29yKChsb2NhbFNwaGVyZVBvcy54IC0gcmFkaXVzKSAvIHcpIC0gMTtcbiAgICBsZXQgaU1heFggPSBNYXRoLmNlaWwoKGxvY2FsU3BoZXJlUG9zLnggKyByYWRpdXMpIC8gdykgKyAxO1xuICAgIGxldCBpTWluWSA9IE1hdGguZmxvb3IoKGxvY2FsU3BoZXJlUG9zLnkgLSByYWRpdXMpIC8gdykgLSAxO1xuICAgIGxldCBpTWF4WSA9IE1hdGguY2VpbCgobG9jYWxTcGhlcmVQb3MueSArIHJhZGl1cykgLyB3KSArIDE7IC8vIEJhaWwgb3V0IGlmIHdlIGFyZSBvdXQgb2YgdGhlIHRlcnJhaW5cblxuICAgIGlmIChpTWF4WCA8IDAgfHwgaU1heFkgPCAwIHx8IGlNaW5YID4gZGF0YS5sZW5ndGggfHwgaU1pblkgPiBkYXRhWzBdLmxlbmd0aCkge1xuICAgICAgcmV0dXJuO1xuICAgIH0gLy8gQ2xhbXAgaW5kZXggdG8gZWRnZXNcblxuXG4gICAgaWYgKGlNaW5YIDwgMCkge1xuICAgICAgaU1pblggPSAwO1xuICAgIH1cblxuICAgIGlmIChpTWF4WCA8IDApIHtcbiAgICAgIGlNYXhYID0gMDtcbiAgICB9XG5cbiAgICBpZiAoaU1pblkgPCAwKSB7XG4gICAgICBpTWluWSA9IDA7XG4gICAgfVxuXG4gICAgaWYgKGlNYXhZIDwgMCkge1xuICAgICAgaU1heFkgPSAwO1xuICAgIH1cblxuICAgIGlmIChpTWluWCA+PSBkYXRhLmxlbmd0aCkge1xuICAgICAgaU1pblggPSBkYXRhLmxlbmd0aCAtIDE7XG4gICAgfVxuXG4gICAgaWYgKGlNYXhYID49IGRhdGEubGVuZ3RoKSB7XG4gICAgICBpTWF4WCA9IGRhdGEubGVuZ3RoIC0gMTtcbiAgICB9XG5cbiAgICBpZiAoaU1heFkgPj0gZGF0YVswXS5sZW5ndGgpIHtcbiAgICAgIGlNYXhZID0gZGF0YVswXS5sZW5ndGggLSAxO1xuICAgIH1cblxuICAgIGlmIChpTWluWSA+PSBkYXRhWzBdLmxlbmd0aCkge1xuICAgICAgaU1pblkgPSBkYXRhWzBdLmxlbmd0aCAtIDE7XG4gICAgfVxuXG4gICAgY29uc3QgbWluTWF4ID0gW107XG4gICAgaGZTaGFwZS5nZXRSZWN0TWluTWF4KGlNaW5YLCBpTWluWSwgaU1heFgsIGlNYXhZLCBtaW5NYXgpO1xuICAgIGNvbnN0IG1pbiA9IG1pbk1heFswXTtcbiAgICBjb25zdCBtYXggPSBtaW5NYXhbMV07IC8vIEJhaWwgb3V0IGlmIHdlIGNhbid0IHRvdWNoIHRoZSBib3VuZGluZyBoZWlnaHQgYm94XG5cbiAgICBpZiAobG9jYWxTcGhlcmVQb3MueiAtIHJhZGl1cyA+IG1heCB8fCBsb2NhbFNwaGVyZVBvcy56ICsgcmFkaXVzIDwgbWluKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgcmVzdWx0ID0gdGhpcy5yZXN1bHQ7XG5cbiAgICBmb3IgKGxldCBpID0gaU1pblg7IGkgPCBpTWF4WDsgaSsrKSB7XG4gICAgICBmb3IgKGxldCBqID0gaU1pblk7IGogPCBpTWF4WTsgaisrKSB7XG4gICAgICAgIGNvbnN0IG51bUNvbnRhY3RzQmVmb3JlID0gcmVzdWx0Lmxlbmd0aDtcbiAgICAgICAgbGV0IGludGVyc2VjdGluZyA9IGZhbHNlOyAvLyBMb3dlciB0cmlhbmdsZVxuXG4gICAgICAgIGhmU2hhcGUuZ2V0Q29udmV4VHJpYW5nbGVQaWxsYXIoaSwgaiwgZmFsc2UpO1xuICAgICAgICBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUoaGZQb3MsIGhmUXVhdCwgaGZTaGFwZS5waWxsYXJPZmZzZXQsIHdvcmxkUGlsbGFyT2Zmc2V0KTtcblxuICAgICAgICBpZiAoc3BoZXJlUG9zLmRpc3RhbmNlVG8od29ybGRQaWxsYXJPZmZzZXQpIDwgaGZTaGFwZS5waWxsYXJDb252ZXguYm91bmRpbmdTcGhlcmVSYWRpdXMgKyBzcGhlcmVTaGFwZS5ib3VuZGluZ1NwaGVyZVJhZGl1cykge1xuICAgICAgICAgIGludGVyc2VjdGluZyA9IHRoaXMuc3BoZXJlQ29udmV4KHNwaGVyZVNoYXBlLCBoZlNoYXBlLnBpbGxhckNvbnZleCwgc3BoZXJlUG9zLCB3b3JsZFBpbGxhck9mZnNldCwgc3BoZXJlUXVhdCwgaGZRdWF0LCBzcGhlcmVCb2R5LCBoZkJvZHksIHNwaGVyZVNoYXBlLCBoZlNoYXBlLCBqdXN0VGVzdCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoanVzdFRlc3QgJiYgaW50ZXJzZWN0aW5nKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gLy8gVXBwZXIgdHJpYW5nbGVcblxuXG4gICAgICAgIGhmU2hhcGUuZ2V0Q29udmV4VHJpYW5nbGVQaWxsYXIoaSwgaiwgdHJ1ZSk7XG4gICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZShoZlBvcywgaGZRdWF0LCBoZlNoYXBlLnBpbGxhck9mZnNldCwgd29ybGRQaWxsYXJPZmZzZXQpO1xuXG4gICAgICAgIGlmIChzcGhlcmVQb3MuZGlzdGFuY2VUbyh3b3JsZFBpbGxhck9mZnNldCkgPCBoZlNoYXBlLnBpbGxhckNvbnZleC5ib3VuZGluZ1NwaGVyZVJhZGl1cyArIHNwaGVyZVNoYXBlLmJvdW5kaW5nU3BoZXJlUmFkaXVzKSB7XG4gICAgICAgICAgaW50ZXJzZWN0aW5nID0gdGhpcy5zcGhlcmVDb252ZXgoc3BoZXJlU2hhcGUsIGhmU2hhcGUucGlsbGFyQ29udmV4LCBzcGhlcmVQb3MsIHdvcmxkUGlsbGFyT2Zmc2V0LCBzcGhlcmVRdWF0LCBoZlF1YXQsIHNwaGVyZUJvZHksIGhmQm9keSwgc3BoZXJlU2hhcGUsIGhmU2hhcGUsIGp1c3RUZXN0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChqdXN0VGVzdCAmJiBpbnRlcnNlY3RpbmcpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IG51bUNvbnRhY3RzID0gcmVzdWx0Lmxlbmd0aCAtIG51bUNvbnRhY3RzQmVmb3JlO1xuXG4gICAgICAgIGlmIChudW1Db250YWN0cyA+IDIpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLypcbiAgICAgICAgICAvLyBTa2lwIGFsbCBidXQgMVxuICAgICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgbnVtQ29udGFjdHMgLSAxOyBrKyspIHtcbiAgICAgICAgICAgICAgcmVzdWx0LnBvcCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgKi9cblxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGJveEhlaWdodGZpZWxkKHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0KSB7XG4gICAgc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLm1hdGVyaWFsID0gc2kubWF0ZXJpYWw7XG4gICAgc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLmNvbGxpc2lvblJlc3BvbnNlID0gc2kuY29sbGlzaW9uUmVzcG9uc2U7XG4gICAgcmV0dXJuIHRoaXMuY29udmV4SGVpZ2h0ZmllbGQoc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgc2ksIHNqLCBqdXN0VGVzdCk7XG4gIH1cblxuICBjb252ZXhIZWlnaHRmaWVsZChjb252ZXhTaGFwZSwgaGZTaGFwZSwgY29udmV4UG9zLCBoZlBvcywgY29udmV4UXVhdCwgaGZRdWF0LCBjb252ZXhCb2R5LCBoZkJvZHksIHJzaSwgcnNqLCBqdXN0VGVzdCkge1xuICAgIGNvbnN0IGRhdGEgPSBoZlNoYXBlLmRhdGE7XG4gICAgY29uc3QgdyA9IGhmU2hhcGUuZWxlbWVudFNpemU7XG4gICAgY29uc3QgcmFkaXVzID0gY29udmV4U2hhcGUuYm91bmRpbmdTcGhlcmVSYWRpdXM7XG4gICAgY29uc3Qgd29ybGRQaWxsYXJPZmZzZXQgPSBjb252ZXhIZWlnaHRmaWVsZF90bXAyO1xuICAgIGNvbnN0IGZhY2VMaXN0ID0gY29udmV4SGVpZ2h0ZmllbGRfZmFjZUxpc3Q7IC8vIEdldCBzcGhlcmUgcG9zaXRpb24gdG8gaGVpZ2h0ZmllbGQgbG9jYWwhXG5cbiAgICBjb25zdCBsb2NhbENvbnZleFBvcyA9IGNvbnZleEhlaWdodGZpZWxkX3RtcDE7XG4gICAgVHJhbnNmb3JtLnBvaW50VG9Mb2NhbEZyYW1lKGhmUG9zLCBoZlF1YXQsIGNvbnZleFBvcywgbG9jYWxDb252ZXhQb3MpOyAvLyBHZXQgdGhlIGluZGV4IG9mIHRoZSBkYXRhIHBvaW50cyB0byB0ZXN0IGFnYWluc3RcblxuICAgIGxldCBpTWluWCA9IE1hdGguZmxvb3IoKGxvY2FsQ29udmV4UG9zLnggLSByYWRpdXMpIC8gdykgLSAxO1xuICAgIGxldCBpTWF4WCA9IE1hdGguY2VpbCgobG9jYWxDb252ZXhQb3MueCArIHJhZGl1cykgLyB3KSArIDE7XG4gICAgbGV0IGlNaW5ZID0gTWF0aC5mbG9vcigobG9jYWxDb252ZXhQb3MueSAtIHJhZGl1cykgLyB3KSAtIDE7XG4gICAgbGV0IGlNYXhZID0gTWF0aC5jZWlsKChsb2NhbENvbnZleFBvcy55ICsgcmFkaXVzKSAvIHcpICsgMTsgLy8gQmFpbCBvdXQgaWYgd2UgYXJlIG91dCBvZiB0aGUgdGVycmFpblxuXG4gICAgaWYgKGlNYXhYIDwgMCB8fCBpTWF4WSA8IDAgfHwgaU1pblggPiBkYXRhLmxlbmd0aCB8fCBpTWluWSA+IGRhdGFbMF0ubGVuZ3RoKSB7XG4gICAgICByZXR1cm47XG4gICAgfSAvLyBDbGFtcCBpbmRleCB0byBlZGdlc1xuXG5cbiAgICBpZiAoaU1pblggPCAwKSB7XG4gICAgICBpTWluWCA9IDA7XG4gICAgfVxuXG4gICAgaWYgKGlNYXhYIDwgMCkge1xuICAgICAgaU1heFggPSAwO1xuICAgIH1cblxuICAgIGlmIChpTWluWSA8IDApIHtcbiAgICAgIGlNaW5ZID0gMDtcbiAgICB9XG5cbiAgICBpZiAoaU1heFkgPCAwKSB7XG4gICAgICBpTWF4WSA9IDA7XG4gICAgfVxuXG4gICAgaWYgKGlNaW5YID49IGRhdGEubGVuZ3RoKSB7XG4gICAgICBpTWluWCA9IGRhdGEubGVuZ3RoIC0gMTtcbiAgICB9XG5cbiAgICBpZiAoaU1heFggPj0gZGF0YS5sZW5ndGgpIHtcbiAgICAgIGlNYXhYID0gZGF0YS5sZW5ndGggLSAxO1xuICAgIH1cblxuICAgIGlmIChpTWF4WSA+PSBkYXRhWzBdLmxlbmd0aCkge1xuICAgICAgaU1heFkgPSBkYXRhWzBdLmxlbmd0aCAtIDE7XG4gICAgfVxuXG4gICAgaWYgKGlNaW5ZID49IGRhdGFbMF0ubGVuZ3RoKSB7XG4gICAgICBpTWluWSA9IGRhdGFbMF0ubGVuZ3RoIC0gMTtcbiAgICB9XG5cbiAgICBjb25zdCBtaW5NYXggPSBbXTtcbiAgICBoZlNoYXBlLmdldFJlY3RNaW5NYXgoaU1pblgsIGlNaW5ZLCBpTWF4WCwgaU1heFksIG1pbk1heCk7XG4gICAgY29uc3QgbWluID0gbWluTWF4WzBdO1xuICAgIGNvbnN0IG1heCA9IG1pbk1heFsxXTsgLy8gQmFpbCBvdXQgaWYgd2UncmUgY2FudCB0b3VjaCB0aGUgYm91bmRpbmcgaGVpZ2h0IGJveFxuXG4gICAgaWYgKGxvY2FsQ29udmV4UG9zLnogLSByYWRpdXMgPiBtYXggfHwgbG9jYWxDb252ZXhQb3MueiArIHJhZGl1cyA8IG1pbikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSBpTWluWDsgaSA8IGlNYXhYOyBpKyspIHtcbiAgICAgIGZvciAobGV0IGogPSBpTWluWTsgaiA8IGlNYXhZOyBqKyspIHtcbiAgICAgICAgbGV0IGludGVyc2VjdGluZyA9IGZhbHNlOyAvLyBMb3dlciB0cmlhbmdsZVxuXG4gICAgICAgIGhmU2hhcGUuZ2V0Q29udmV4VHJpYW5nbGVQaWxsYXIoaSwgaiwgZmFsc2UpO1xuICAgICAgICBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUoaGZQb3MsIGhmUXVhdCwgaGZTaGFwZS5waWxsYXJPZmZzZXQsIHdvcmxkUGlsbGFyT2Zmc2V0KTtcblxuICAgICAgICBpZiAoY29udmV4UG9zLmRpc3RhbmNlVG8od29ybGRQaWxsYXJPZmZzZXQpIDwgaGZTaGFwZS5waWxsYXJDb252ZXguYm91bmRpbmdTcGhlcmVSYWRpdXMgKyBjb252ZXhTaGFwZS5ib3VuZGluZ1NwaGVyZVJhZGl1cykge1xuICAgICAgICAgIGludGVyc2VjdGluZyA9IHRoaXMuY29udmV4Q29udmV4KGNvbnZleFNoYXBlLCBoZlNoYXBlLnBpbGxhckNvbnZleCwgY29udmV4UG9zLCB3b3JsZFBpbGxhck9mZnNldCwgY29udmV4UXVhdCwgaGZRdWF0LCBjb252ZXhCb2R5LCBoZkJvZHksIG51bGwsIG51bGwsIGp1c3RUZXN0LCBmYWNlTGlzdCwgbnVsbCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoanVzdFRlc3QgJiYgaW50ZXJzZWN0aW5nKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gLy8gVXBwZXIgdHJpYW5nbGVcblxuXG4gICAgICAgIGhmU2hhcGUuZ2V0Q29udmV4VHJpYW5nbGVQaWxsYXIoaSwgaiwgdHJ1ZSk7XG4gICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZShoZlBvcywgaGZRdWF0LCBoZlNoYXBlLnBpbGxhck9mZnNldCwgd29ybGRQaWxsYXJPZmZzZXQpO1xuXG4gICAgICAgIGlmIChjb252ZXhQb3MuZGlzdGFuY2VUbyh3b3JsZFBpbGxhck9mZnNldCkgPCBoZlNoYXBlLnBpbGxhckNvbnZleC5ib3VuZGluZ1NwaGVyZVJhZGl1cyArIGNvbnZleFNoYXBlLmJvdW5kaW5nU3BoZXJlUmFkaXVzKSB7XG4gICAgICAgICAgaW50ZXJzZWN0aW5nID0gdGhpcy5jb252ZXhDb252ZXgoY29udmV4U2hhcGUsIGhmU2hhcGUucGlsbGFyQ29udmV4LCBjb252ZXhQb3MsIHdvcmxkUGlsbGFyT2Zmc2V0LCBjb252ZXhRdWF0LCBoZlF1YXQsIGNvbnZleEJvZHksIGhmQm9keSwgbnVsbCwgbnVsbCwganVzdFRlc3QsIGZhY2VMaXN0LCBudWxsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChqdXN0VGVzdCAmJiBpbnRlcnNlY3RpbmcpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHNwaGVyZVBhcnRpY2xlKHNqLCBzaSwgeGosIHhpLCBxaiwgcWksIGJqLCBiaSwgcnNpLCByc2osIGp1c3RUZXN0KSB7XG4gICAgLy8gVGhlIG5vcm1hbCBpcyB0aGUgdW5pdCB2ZWN0b3IgZnJvbSBzcGhlcmUgY2VudGVyIHRvIHBhcnRpY2xlIGNlbnRlclxuICAgIGNvbnN0IG5vcm1hbCA9IHBhcnRpY2xlU3BoZXJlX25vcm1hbDtcbiAgICBub3JtYWwuc2V0KDAsIDAsIDEpO1xuICAgIHhpLnZzdWIoeGosIG5vcm1hbCk7XG4gICAgY29uc3QgbGVuZ3RoU3F1YXJlZCA9IG5vcm1hbC5sZW5ndGhTcXVhcmVkKCk7XG5cbiAgICBpZiAobGVuZ3RoU3F1YXJlZCA8PSBzai5yYWRpdXMgKiBzai5yYWRpdXMpIHtcbiAgICAgIGlmIChqdXN0VGVzdCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLCBiaiwgc2ksIHNqLCByc2ksIHJzaik7XG4gICAgICBub3JtYWwubm9ybWFsaXplKCk7XG4gICAgICByLnJqLmNvcHkobm9ybWFsKTtcbiAgICAgIHIucmouc2NhbGUoc2oucmFkaXVzLCByLnJqKTtcbiAgICAgIHIubmkuY29weShub3JtYWwpOyAvLyBDb250YWN0IG5vcm1hbFxuXG4gICAgICByLm5pLm5lZ2F0ZShyLm5pKTtcbiAgICAgIHIucmkuc2V0KDAsIDAsIDApOyAvLyBDZW50ZXIgb2YgcGFydGljbGVcblxuICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTtcbiAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTtcbiAgICB9XG4gIH1cblxuICBwbGFuZVBhcnRpY2xlKHNqLCBzaSwgeGosIHhpLCBxaiwgcWksIGJqLCBiaSwgcnNpLCByc2osIGp1c3RUZXN0KSB7XG4gICAgY29uc3Qgbm9ybWFsID0gcGFydGljbGVQbGFuZV9ub3JtYWw7XG4gICAgbm9ybWFsLnNldCgwLCAwLCAxKTtcbiAgICBiai5xdWF0ZXJuaW9uLnZtdWx0KG5vcm1hbCwgbm9ybWFsKTsgLy8gVHVybiBub3JtYWwgYWNjb3JkaW5nIHRvIHBsYW5lIG9yaWVudGF0aW9uXG5cbiAgICBjb25zdCByZWxwb3MgPSBwYXJ0aWNsZVBsYW5lX3JlbHBvcztcbiAgICB4aS52c3ViKGJqLnBvc2l0aW9uLCByZWxwb3MpO1xuICAgIGNvbnN0IGRvdCA9IG5vcm1hbC5kb3QocmVscG9zKTtcblxuICAgIGlmIChkb3QgPD0gMC4wKSB7XG4gICAgICBpZiAoanVzdFRlc3QpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opO1xuICAgICAgci5uaS5jb3B5KG5vcm1hbCk7IC8vIENvbnRhY3Qgbm9ybWFsIGlzIHRoZSBwbGFuZSBub3JtYWxcblxuICAgICAgci5uaS5uZWdhdGUoci5uaSk7XG4gICAgICByLnJpLnNldCgwLCAwLCAwKTsgLy8gQ2VudGVyIG9mIHBhcnRpY2xlXG4gICAgICAvLyBHZXQgcGFydGljbGUgcG9zaXRpb24gcHJvamVjdGVkIG9uIHBsYW5lXG5cbiAgICAgIGNvbnN0IHByb2plY3RlZCA9IHBhcnRpY2xlUGxhbmVfcHJvamVjdGVkO1xuICAgICAgbm9ybWFsLnNjYWxlKG5vcm1hbC5kb3QoeGkpLCBwcm9qZWN0ZWQpO1xuICAgICAgeGkudnN1Yihwcm9qZWN0ZWQsIHByb2plY3RlZCk7IC8vcHJvamVjdGVkLnZhZGQoYmoucG9zaXRpb24scHJvamVjdGVkKTtcbiAgICAgIC8vIHJqIGlzIG5vdyB0aGUgcHJvamVjdGVkIHdvcmxkIHBvc2l0aW9uIG1pbnVzIHBsYW5lIHBvc2l0aW9uXG5cbiAgICAgIHIucmouY29weShwcm9qZWN0ZWQpO1xuICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTtcbiAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTtcbiAgICB9XG4gIH1cblxuICBib3hQYXJ0aWNsZShzaSwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHJzaSwgcnNqLCBqdXN0VGVzdCkge1xuICAgIHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5tYXRlcmlhbCA9IHNpLm1hdGVyaWFsO1xuICAgIHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5jb2xsaXNpb25SZXNwb25zZSA9IHNpLmNvbGxpc2lvblJlc3BvbnNlO1xuICAgIHJldHVybiB0aGlzLmNvbnZleFBhcnRpY2xlKHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbiwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHNpLCBzaiwganVzdFRlc3QpO1xuICB9XG5cbiAgY29udmV4UGFydGljbGUoc2osIHNpLCB4aiwgeGksIHFqLCBxaSwgYmosIGJpLCByc2ksIHJzaiwganVzdFRlc3QpIHtcbiAgICBsZXQgcGVuZXRyYXRlZEZhY2VJbmRleCA9IC0xO1xuICAgIGNvbnN0IHBlbmV0cmF0ZWRGYWNlTm9ybWFsID0gY29udmV4UGFydGljbGVfcGVuZXRyYXRlZEZhY2VOb3JtYWw7XG4gICAgY29uc3Qgd29ybGRQZW5ldHJhdGlvblZlYyA9IGNvbnZleFBhcnRpY2xlX3dvcmxkUGVuZXRyYXRpb25WZWM7XG4gICAgbGV0IG1pblBlbmV0cmF0aW9uID0gbnVsbDtcblxuICAgIGNvbnN0IGxvY2FsID0gY29udmV4UGFydGljbGVfbG9jYWw7XG4gICAgbG9jYWwuY29weSh4aSk7XG4gICAgbG9jYWwudnN1Yih4aiwgbG9jYWwpOyAvLyBDb252ZXJ0IHBvc2l0aW9uIHRvIHJlbGF0aXZlIHRoZSBjb252ZXggb3JpZ2luXG5cbiAgICBxai5jb25qdWdhdGUoY3FqKTtcbiAgICBjcWoudm11bHQobG9jYWwsIGxvY2FsKTtcblxuICAgIGlmIChzai5wb2ludElzSW5zaWRlKGxvY2FsKSkge1xuICAgICAgaWYgKHNqLndvcmxkVmVydGljZXNOZWVkc1VwZGF0ZSkge1xuICAgICAgICBzai5jb21wdXRlV29ybGRWZXJ0aWNlcyh4aiwgcWopO1xuICAgICAgfVxuXG4gICAgICBpZiAoc2oud29ybGRGYWNlTm9ybWFsc05lZWRzVXBkYXRlKSB7XG4gICAgICAgIHNqLmNvbXB1dGVXb3JsZEZhY2VOb3JtYWxzKHFqKTtcbiAgICAgIH0gLy8gRm9yIGVhY2ggd29ybGQgcG9seWdvbiBpbiB0aGUgcG9seWhlZHJhXG5cblxuICAgICAgZm9yIChsZXQgaSA9IDAsIG5mYWNlcyA9IHNqLmZhY2VzLmxlbmd0aDsgaSAhPT0gbmZhY2VzOyBpKyspIHtcbiAgICAgICAgLy8gQ29uc3RydWN0IHdvcmxkIGZhY2UgdmVydGljZXNcbiAgICAgICAgY29uc3QgdmVydHMgPSBbc2oud29ybGRWZXJ0aWNlc1tzai5mYWNlc1tpXVswXV1dO1xuICAgICAgICBjb25zdCBub3JtYWwgPSBzai53b3JsZEZhY2VOb3JtYWxzW2ldOyAvLyBDaGVjayBob3cgbXVjaCB0aGUgcGFydGljbGUgcGVuZXRyYXRlcyB0aGUgcG9seWdvbiBwbGFuZS5cblxuICAgICAgICB4aS52c3ViKHZlcnRzWzBdLCBjb252ZXhQYXJ0aWNsZV92ZXJ0ZXhUb1BhcnRpY2xlKTtcbiAgICAgICAgY29uc3QgcGVuZXRyYXRpb24gPSAtbm9ybWFsLmRvdChjb252ZXhQYXJ0aWNsZV92ZXJ0ZXhUb1BhcnRpY2xlKTtcblxuICAgICAgICBpZiAobWluUGVuZXRyYXRpb24gPT09IG51bGwgfHwgTWF0aC5hYnMocGVuZXRyYXRpb24pIDwgTWF0aC5hYnMobWluUGVuZXRyYXRpb24pKSB7XG4gICAgICAgICAgaWYgKGp1c3RUZXN0KSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBtaW5QZW5ldHJhdGlvbiA9IHBlbmV0cmF0aW9uO1xuICAgICAgICAgIHBlbmV0cmF0ZWRGYWNlSW5kZXggPSBpO1xuICAgICAgICAgIHBlbmV0cmF0ZWRGYWNlTm9ybWFsLmNvcHkobm9ybWFsKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAocGVuZXRyYXRlZEZhY2VJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgLy8gU2V0dXAgY29udGFjdFxuICAgICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksIGJqLCBzaSwgc2osIHJzaSwgcnNqKTtcbiAgICAgICAgcGVuZXRyYXRlZEZhY2VOb3JtYWwuc2NhbGUobWluUGVuZXRyYXRpb24sIHdvcmxkUGVuZXRyYXRpb25WZWMpOyAvLyByaiBpcyB0aGUgcGFydGljbGUgcG9zaXRpb24gcHJvamVjdGVkIHRvIHRoZSBmYWNlXG5cbiAgICAgICAgd29ybGRQZW5ldHJhdGlvblZlYy52YWRkKHhpLCB3b3JsZFBlbmV0cmF0aW9uVmVjKTtcbiAgICAgICAgd29ybGRQZW5ldHJhdGlvblZlYy52c3ViKHhqLCB3b3JsZFBlbmV0cmF0aW9uVmVjKTtcbiAgICAgICAgci5yai5jb3B5KHdvcmxkUGVuZXRyYXRpb25WZWMpOyAvL2NvbnN0IHByb2plY3RlZFRvRmFjZSA9IHhpLnZzdWIoeGopLnZhZGQod29ybGRQZW5ldHJhdGlvblZlYyk7XG4gICAgICAgIC8vcHJvamVjdGVkVG9GYWNlLmNvcHkoci5yaik7XG4gICAgICAgIC8vcWoudm11bHQoci5yaixyLnJqKTtcblxuICAgICAgICBwZW5ldHJhdGVkRmFjZU5vcm1hbC5uZWdhdGUoci5uaSk7IC8vIENvbnRhY3Qgbm9ybWFsXG5cbiAgICAgICAgci5yaS5zZXQoMCwgMCwgMCk7IC8vIENlbnRlciBvZiBwYXJ0aWNsZVxuXG4gICAgICAgIGNvbnN0IHJpID0gci5yaTtcbiAgICAgICAgY29uc3QgcmogPSByLnJqOyAvLyBNYWtlIHJlbGF0aXZlIHRvIGJvZGllc1xuXG4gICAgICAgIHJpLnZhZGQoeGksIHJpKTtcbiAgICAgICAgcmkudnN1YihiaS5wb3NpdGlvbiwgcmkpO1xuICAgICAgICByai52YWRkKHhqLCByaik7XG4gICAgICAgIHJqLnZzdWIoYmoucG9zaXRpb24sIHJqKTtcbiAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTtcbiAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdQb2ludCBmb3VuZCBpbnNpZGUgY29udmV4LCBidXQgZGlkIG5vdCBmaW5kIHBlbmV0cmF0aW5nIGZhY2UhJyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaGVpZ2h0ZmllbGRDeWxpbmRlcihoZlNoYXBlLCBjb252ZXhTaGFwZSwgaGZQb3MsIGNvbnZleFBvcywgaGZRdWF0LCBjb252ZXhRdWF0LCBoZkJvZHksIGNvbnZleEJvZHksIHJzaSwgcnNqLCBqdXN0VGVzdCkge1xuICAgIHJldHVybiB0aGlzLmNvbnZleEhlaWdodGZpZWxkKGNvbnZleFNoYXBlLCBoZlNoYXBlLCBjb252ZXhQb3MsIGhmUG9zLCBjb252ZXhRdWF0LCBoZlF1YXQsIGNvbnZleEJvZHksIGhmQm9keSwgcnNpLCByc2osIGp1c3RUZXN0KTtcbiAgfVxuXG4gIHBhcnRpY2xlQ3lsaW5kZXIoc2ksIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCByc2ksIHJzaiwganVzdFRlc3QpIHtcbiAgICByZXR1cm4gdGhpcy5jb252ZXhQYXJ0aWNsZShzaiwgc2ksIHhqLCB4aSwgcWosIHFpLCBiaiwgYmksIHJzaSwgcnNqLCBqdXN0VGVzdCk7XG4gIH1cblxuICBzcGhlcmVUcmltZXNoKHNwaGVyZVNoYXBlLCB0cmltZXNoU2hhcGUsIHNwaGVyZVBvcywgdHJpbWVzaFBvcywgc3BoZXJlUXVhdCwgdHJpbWVzaFF1YXQsIHNwaGVyZUJvZHksIHRyaW1lc2hCb2R5LCByc2ksIHJzaiwganVzdFRlc3QpIHtcbiAgICBjb25zdCBlZGdlVmVydGV4QSA9IHNwaGVyZVRyaW1lc2hfZWRnZVZlcnRleEE7XG4gICAgY29uc3QgZWRnZVZlcnRleEIgPSBzcGhlcmVUcmltZXNoX2VkZ2VWZXJ0ZXhCO1xuICAgIGNvbnN0IGVkZ2VWZWN0b3IgPSBzcGhlcmVUcmltZXNoX2VkZ2VWZWN0b3I7XG4gICAgY29uc3QgZWRnZVZlY3RvclVuaXQgPSBzcGhlcmVUcmltZXNoX2VkZ2VWZWN0b3JVbml0O1xuICAgIGNvbnN0IGxvY2FsU3BoZXJlUG9zID0gc3BoZXJlVHJpbWVzaF9sb2NhbFNwaGVyZVBvcztcbiAgICBjb25zdCB0bXAgPSBzcGhlcmVUcmltZXNoX3RtcDtcbiAgICBjb25zdCBsb2NhbFNwaGVyZUFBQkIgPSBzcGhlcmVUcmltZXNoX2xvY2FsU3BoZXJlQUFCQjtcbiAgICBjb25zdCB2MiA9IHNwaGVyZVRyaW1lc2hfdjI7XG4gICAgY29uc3QgcmVscG9zID0gc3BoZXJlVHJpbWVzaF9yZWxwb3M7XG4gICAgY29uc3QgdHJpYW5nbGVzID0gc3BoZXJlVHJpbWVzaF90cmlhbmdsZXM7IC8vIENvbnZlcnQgc3BoZXJlIHBvc2l0aW9uIHRvIGxvY2FsIGluIHRoZSB0cmltZXNoXG5cbiAgICBUcmFuc2Zvcm0ucG9pbnRUb0xvY2FsRnJhbWUodHJpbWVzaFBvcywgdHJpbWVzaFF1YXQsIHNwaGVyZVBvcywgbG9jYWxTcGhlcmVQb3MpOyAvLyBHZXQgdGhlIGFhYmIgb2YgdGhlIHNwaGVyZSBsb2NhbGx5IGluIHRoZSB0cmltZXNoXG5cbiAgICBjb25zdCBzcGhlcmVSYWRpdXMgPSBzcGhlcmVTaGFwZS5yYWRpdXM7XG4gICAgbG9jYWxTcGhlcmVBQUJCLmxvd2VyQm91bmQuc2V0KGxvY2FsU3BoZXJlUG9zLnggLSBzcGhlcmVSYWRpdXMsIGxvY2FsU3BoZXJlUG9zLnkgLSBzcGhlcmVSYWRpdXMsIGxvY2FsU3BoZXJlUG9zLnogLSBzcGhlcmVSYWRpdXMpO1xuICAgIGxvY2FsU3BoZXJlQUFCQi51cHBlckJvdW5kLnNldChsb2NhbFNwaGVyZVBvcy54ICsgc3BoZXJlUmFkaXVzLCBsb2NhbFNwaGVyZVBvcy55ICsgc3BoZXJlUmFkaXVzLCBsb2NhbFNwaGVyZVBvcy56ICsgc3BoZXJlUmFkaXVzKTtcbiAgICB0cmltZXNoU2hhcGUuZ2V0VHJpYW5nbGVzSW5BQUJCKGxvY2FsU3BoZXJlQUFCQiwgdHJpYW5nbGVzKTsgLy9mb3IgKGxldCBpID0gMDsgaSA8IHRyaW1lc2hTaGFwZS5pbmRpY2VzLmxlbmd0aCAvIDM7IGkrKykgdHJpYW5nbGVzLnB1c2goaSk7IC8vIEFsbFxuICAgIC8vIFZlcnRpY2VzXG5cbiAgICBjb25zdCB2ID0gc3BoZXJlVHJpbWVzaF92O1xuICAgIGNvbnN0IHJhZGl1c1NxdWFyZWQgPSBzcGhlcmVTaGFwZS5yYWRpdXMgKiBzcGhlcmVTaGFwZS5yYWRpdXM7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRyaWFuZ2xlcy5sZW5ndGg7IGkrKykge1xuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCAzOyBqKyspIHtcbiAgICAgICAgdHJpbWVzaFNoYXBlLmdldFZlcnRleCh0cmltZXNoU2hhcGUuaW5kaWNlc1t0cmlhbmdsZXNbaV0gKiAzICsgal0sIHYpOyAvLyBDaGVjayB2ZXJ0ZXggb3ZlcmxhcCBpbiBzcGhlcmVcblxuICAgICAgICB2LnZzdWIobG9jYWxTcGhlcmVQb3MsIHJlbHBvcyk7XG5cbiAgICAgICAgaWYgKHJlbHBvcy5sZW5ndGhTcXVhcmVkKCkgPD0gcmFkaXVzU3F1YXJlZCkge1xuICAgICAgICAgIC8vIFNhZmUgdXBcbiAgICAgICAgICB2Mi5jb3B5KHYpO1xuICAgICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZSh0cmltZXNoUG9zLCB0cmltZXNoUXVhdCwgdjIsIHYpO1xuICAgICAgICAgIHYudnN1YihzcGhlcmVQb3MsIHJlbHBvcyk7XG5cbiAgICAgICAgICBpZiAoanVzdFRlc3QpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGxldCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oc3BoZXJlQm9keSwgdHJpbWVzaEJvZHksIHNwaGVyZVNoYXBlLCB0cmltZXNoU2hhcGUsIHJzaSwgcnNqKTtcbiAgICAgICAgICByLm5pLmNvcHkocmVscG9zKTtcbiAgICAgICAgICByLm5pLm5vcm1hbGl6ZSgpOyAvLyByaSBpcyB0aGUgdmVjdG9yIGZyb20gc3BoZXJlIGNlbnRlciB0byB0aGUgc3BoZXJlIHN1cmZhY2VcblxuICAgICAgICAgIHIucmkuY29weShyLm5pKTtcbiAgICAgICAgICByLnJpLnNjYWxlKHNwaGVyZVNoYXBlLnJhZGl1cywgci5yaSk7XG4gICAgICAgICAgci5yaS52YWRkKHNwaGVyZVBvcywgci5yaSk7XG4gICAgICAgICAgci5yaS52c3ViKHNwaGVyZUJvZHkucG9zaXRpb24sIHIucmkpO1xuICAgICAgICAgIHIucmouY29weSh2KTtcbiAgICAgICAgICByLnJqLnZzdWIodHJpbWVzaEJvZHkucG9zaXRpb24sIHIucmopOyAvLyBTdG9yZSByZXN1bHRcblxuICAgICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7XG4gICAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSAvLyBDaGVjayBhbGwgZWRnZXNcblxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0cmlhbmdsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgMzsgaisrKSB7XG4gICAgICAgIHRyaW1lc2hTaGFwZS5nZXRWZXJ0ZXgodHJpbWVzaFNoYXBlLmluZGljZXNbdHJpYW5nbGVzW2ldICogMyArIGpdLCBlZGdlVmVydGV4QSk7XG4gICAgICAgIHRyaW1lc2hTaGFwZS5nZXRWZXJ0ZXgodHJpbWVzaFNoYXBlLmluZGljZXNbdHJpYW5nbGVzW2ldICogMyArIChqICsgMSkgJSAzXSwgZWRnZVZlcnRleEIpO1xuICAgICAgICBlZGdlVmVydGV4Qi52c3ViKGVkZ2VWZXJ0ZXhBLCBlZGdlVmVjdG9yKTsgLy8gUHJvamVjdCBzcGhlcmUgcG9zaXRpb24gdG8gdGhlIGVkZ2VcblxuICAgICAgICBsb2NhbFNwaGVyZVBvcy52c3ViKGVkZ2VWZXJ0ZXhCLCB0bXApO1xuICAgICAgICBjb25zdCBwb3NpdGlvbkFsb25nRWRnZUIgPSB0bXAuZG90KGVkZ2VWZWN0b3IpO1xuICAgICAgICBsb2NhbFNwaGVyZVBvcy52c3ViKGVkZ2VWZXJ0ZXhBLCB0bXApO1xuICAgICAgICBsZXQgcG9zaXRpb25BbG9uZ0VkZ2VBID0gdG1wLmRvdChlZGdlVmVjdG9yKTtcblxuICAgICAgICBpZiAocG9zaXRpb25BbG9uZ0VkZ2VBID4gMCAmJiBwb3NpdGlvbkFsb25nRWRnZUIgPCAwKSB7XG4gICAgICAgICAgLy8gTm93IGNoZWNrIHRoZSBvcnRob2dvbmFsIGRpc3RhbmNlIGZyb20gZWRnZSB0byBzcGhlcmUgY2VudGVyXG4gICAgICAgICAgbG9jYWxTcGhlcmVQb3MudnN1YihlZGdlVmVydGV4QSwgdG1wKTtcbiAgICAgICAgICBlZGdlVmVjdG9yVW5pdC5jb3B5KGVkZ2VWZWN0b3IpO1xuICAgICAgICAgIGVkZ2VWZWN0b3JVbml0Lm5vcm1hbGl6ZSgpO1xuICAgICAgICAgIHBvc2l0aW9uQWxvbmdFZGdlQSA9IHRtcC5kb3QoZWRnZVZlY3RvclVuaXQpO1xuICAgICAgICAgIGVkZ2VWZWN0b3JVbml0LnNjYWxlKHBvc2l0aW9uQWxvbmdFZGdlQSwgdG1wKTtcbiAgICAgICAgICB0bXAudmFkZChlZGdlVmVydGV4QSwgdG1wKTsgLy8gdG1wIGlzIG5vdyB0aGUgc3BoZXJlIGNlbnRlciBwb3NpdGlvbiBwcm9qZWN0ZWQgdG8gdGhlIGVkZ2UsIGRlZmluZWQgbG9jYWxseSBpbiB0aGUgdHJpbWVzaCBmcmFtZVxuXG4gICAgICAgICAgY29uc3QgZGlzdCA9IHRtcC5kaXN0YW5jZVRvKGxvY2FsU3BoZXJlUG9zKTtcblxuICAgICAgICAgIGlmIChkaXN0IDwgc3BoZXJlU2hhcGUucmFkaXVzKSB7XG4gICAgICAgICAgICBpZiAoanVzdFRlc3QpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihzcGhlcmVCb2R5LCB0cmltZXNoQm9keSwgc3BoZXJlU2hhcGUsIHRyaW1lc2hTaGFwZSwgcnNpLCByc2opO1xuICAgICAgICAgICAgdG1wLnZzdWIobG9jYWxTcGhlcmVQb3MsIHIubmkpO1xuICAgICAgICAgICAgci5uaS5ub3JtYWxpemUoKTtcbiAgICAgICAgICAgIHIubmkuc2NhbGUoc3BoZXJlU2hhcGUucmFkaXVzLCByLnJpKTtcbiAgICAgICAgICAgIHIucmkudmFkZChzcGhlcmVQb3MsIHIucmkpO1xuICAgICAgICAgICAgci5yaS52c3ViKHNwaGVyZUJvZHkucG9zaXRpb24sIHIucmkpO1xuICAgICAgICAgICAgVHJhbnNmb3JtLnBvaW50VG9Xb3JsZEZyYW1lKHRyaW1lc2hQb3MsIHRyaW1lc2hRdWF0LCB0bXAsIHRtcCk7XG4gICAgICAgICAgICB0bXAudnN1Yih0cmltZXNoQm9keS5wb3NpdGlvbiwgci5yaik7XG4gICAgICAgICAgICBUcmFuc2Zvcm0udmVjdG9yVG9Xb3JsZEZyYW1lKHRyaW1lc2hRdWF0LCByLm5pLCByLm5pKTtcbiAgICAgICAgICAgIFRyYW5zZm9ybS52ZWN0b3JUb1dvcmxkRnJhbWUodHJpbWVzaFF1YXQsIHIucmksIHIucmkpO1xuICAgICAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IC8vIFRyaWFuZ2xlIGZhY2VzXG5cblxuICAgIGNvbnN0IHZhID0gc3BoZXJlVHJpbWVzaF92YTtcbiAgICBjb25zdCB2YiA9IHNwaGVyZVRyaW1lc2hfdmI7XG4gICAgY29uc3QgdmMgPSBzcGhlcmVUcmltZXNoX3ZjO1xuICAgIGNvbnN0IG5vcm1hbCA9IHNwaGVyZVRyaW1lc2hfbm9ybWFsO1xuXG4gICAgZm9yIChsZXQgaSA9IDAsIE4gPSB0cmlhbmdsZXMubGVuZ3RoOyBpICE9PSBOOyBpKyspIHtcbiAgICAgIHRyaW1lc2hTaGFwZS5nZXRUcmlhbmdsZVZlcnRpY2VzKHRyaWFuZ2xlc1tpXSwgdmEsIHZiLCB2Yyk7XG4gICAgICB0cmltZXNoU2hhcGUuZ2V0Tm9ybWFsKHRyaWFuZ2xlc1tpXSwgbm9ybWFsKTtcbiAgICAgIGxvY2FsU3BoZXJlUG9zLnZzdWIodmEsIHRtcCk7XG4gICAgICBsZXQgZGlzdCA9IHRtcC5kb3Qobm9ybWFsKTtcbiAgICAgIG5vcm1hbC5zY2FsZShkaXN0LCB0bXApO1xuICAgICAgbG9jYWxTcGhlcmVQb3MudnN1Yih0bXAsIHRtcCk7IC8vIHRtcCBpcyBub3cgdGhlIHNwaGVyZSBwb3NpdGlvbiBwcm9qZWN0ZWQgdG8gdGhlIHRyaWFuZ2xlIHBsYW5lXG5cbiAgICAgIGRpc3QgPSB0bXAuZGlzdGFuY2VUbyhsb2NhbFNwaGVyZVBvcyk7XG5cbiAgICAgIGlmIChSYXkucG9pbnRJblRyaWFuZ2xlKHRtcCwgdmEsIHZiLCB2YykgJiYgZGlzdCA8IHNwaGVyZVNoYXBlLnJhZGl1cykge1xuICAgICAgICBpZiAoanVzdFRlc3QpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oc3BoZXJlQm9keSwgdHJpbWVzaEJvZHksIHNwaGVyZVNoYXBlLCB0cmltZXNoU2hhcGUsIHJzaSwgcnNqKTtcbiAgICAgICAgdG1wLnZzdWIobG9jYWxTcGhlcmVQb3MsIHIubmkpO1xuICAgICAgICByLm5pLm5vcm1hbGl6ZSgpO1xuICAgICAgICByLm5pLnNjYWxlKHNwaGVyZVNoYXBlLnJhZGl1cywgci5yaSk7XG4gICAgICAgIHIucmkudmFkZChzcGhlcmVQb3MsIHIucmkpO1xuICAgICAgICByLnJpLnZzdWIoc3BoZXJlQm9keS5wb3NpdGlvbiwgci5yaSk7XG4gICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZSh0cmltZXNoUG9zLCB0cmltZXNoUXVhdCwgdG1wLCB0bXApO1xuICAgICAgICB0bXAudnN1Yih0cmltZXNoQm9keS5wb3NpdGlvbiwgci5yaik7XG4gICAgICAgIFRyYW5zZm9ybS52ZWN0b3JUb1dvcmxkRnJhbWUodHJpbWVzaFF1YXQsIHIubmksIHIubmkpO1xuICAgICAgICBUcmFuc2Zvcm0udmVjdG9yVG9Xb3JsZEZyYW1lKHRyaW1lc2hRdWF0LCByLnJpLCByLnJpKTtcbiAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTtcbiAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRyaWFuZ2xlcy5sZW5ndGggPSAwO1xuICB9XG5cbiAgcGxhbmVUcmltZXNoKHBsYW5lU2hhcGUsIHRyaW1lc2hTaGFwZSwgcGxhbmVQb3MsIHRyaW1lc2hQb3MsIHBsYW5lUXVhdCwgdHJpbWVzaFF1YXQsIHBsYW5lQm9keSwgdHJpbWVzaEJvZHksIHJzaSwgcnNqLCBqdXN0VGVzdCkge1xuICAgIC8vIE1ha2UgY29udGFjdHMhXG4gICAgY29uc3QgdiA9IG5ldyBWZWMzKCk7XG4gICAgY29uc3Qgbm9ybWFsID0gcGxhbmVUcmltZXNoX25vcm1hbDtcbiAgICBub3JtYWwuc2V0KDAsIDAsIDEpO1xuICAgIHBsYW5lUXVhdC52bXVsdChub3JtYWwsIG5vcm1hbCk7IC8vIFR1cm4gbm9ybWFsIGFjY29yZGluZyB0byBwbGFuZVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0cmltZXNoU2hhcGUudmVydGljZXMubGVuZ3RoIC8gMzsgaSsrKSB7XG4gICAgICAvLyBHZXQgd29ybGQgdmVydGV4IGZyb20gdHJpbWVzaFxuICAgICAgdHJpbWVzaFNoYXBlLmdldFZlcnRleChpLCB2KTsgLy8gU2FmZSB1cFxuXG4gICAgICBjb25zdCB2MiA9IG5ldyBWZWMzKCk7XG4gICAgICB2Mi5jb3B5KHYpO1xuICAgICAgVHJhbnNmb3JtLnBvaW50VG9Xb3JsZEZyYW1lKHRyaW1lc2hQb3MsIHRyaW1lc2hRdWF0LCB2Miwgdik7IC8vIENoZWNrIHBsYW5lIHNpZGVcblxuICAgICAgY29uc3QgcmVscG9zID0gcGxhbmVUcmltZXNoX3JlbHBvcztcbiAgICAgIHYudnN1YihwbGFuZVBvcywgcmVscG9zKTtcbiAgICAgIGNvbnN0IGRvdCA9IG5vcm1hbC5kb3QocmVscG9zKTtcblxuICAgICAgaWYgKGRvdCA8PSAwLjApIHtcbiAgICAgICAgaWYgKGp1c3RUZXN0KSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24ocGxhbmVCb2R5LCB0cmltZXNoQm9keSwgcGxhbmVTaGFwZSwgdHJpbWVzaFNoYXBlLCByc2ksIHJzaik7XG4gICAgICAgIHIubmkuY29weShub3JtYWwpOyAvLyBDb250YWN0IG5vcm1hbCBpcyB0aGUgcGxhbmUgbm9ybWFsXG4gICAgICAgIC8vIEdldCB2ZXJ0ZXggcG9zaXRpb24gcHJvamVjdGVkIG9uIHBsYW5lXG5cbiAgICAgICAgY29uc3QgcHJvamVjdGVkID0gcGxhbmVUcmltZXNoX3Byb2plY3RlZDtcbiAgICAgICAgbm9ybWFsLnNjYWxlKHJlbHBvcy5kb3Qobm9ybWFsKSwgcHJvamVjdGVkKTtcbiAgICAgICAgdi52c3ViKHByb2plY3RlZCwgcHJvamVjdGVkKTsgLy8gcmkgaXMgdGhlIHByb2plY3RlZCB3b3JsZCBwb3NpdGlvbiBtaW51cyBwbGFuZSBwb3NpdGlvblxuXG4gICAgICAgIHIucmkuY29weShwcm9qZWN0ZWQpO1xuICAgICAgICByLnJpLnZzdWIocGxhbmVCb2R5LnBvc2l0aW9uLCByLnJpKTtcbiAgICAgICAgci5yai5jb3B5KHYpO1xuICAgICAgICByLnJqLnZzdWIodHJpbWVzaEJvZHkucG9zaXRpb24sIHIucmopOyAvLyBTdG9yZSByZXN1bHRcblxuICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpO1xuICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7XG4gICAgICB9XG4gICAgfVxuICB9IC8vIGNvbnZleFRyaW1lc2goXG4gIC8vICAgc2k6IENvbnZleFBvbHloZWRyb24sIHNqOiBUcmltZXNoLCB4aTogVmVjMywgeGo6IFZlYzMsIHFpOiBRdWF0ZXJuaW9uLCBxajogUXVhdGVybmlvbixcbiAgLy8gICBiaTogQm9keSwgYmo6IEJvZHksIHJzaT86IFNoYXBlIHwgbnVsbCwgcnNqPzogU2hhcGUgfCBudWxsLFxuICAvLyAgIGZhY2VMaXN0QT86IG51bWJlcltdIHwgbnVsbCwgZmFjZUxpc3RCPzogbnVtYmVyW10gfCBudWxsLFxuICAvLyApIHtcbiAgLy8gICBjb25zdCBzZXBBeGlzID0gY29udmV4Q29udmV4X3NlcEF4aXM7XG4gIC8vICAgaWYoeGkuZGlzdGFuY2VUbyh4aikgPiBzaS5ib3VuZGluZ1NwaGVyZVJhZGl1cyArIHNqLmJvdW5kaW5nU3BoZXJlUmFkaXVzKXtcbiAgLy8gICAgICAgcmV0dXJuO1xuICAvLyAgIH1cbiAgLy8gICAvLyBDb25zdHJ1Y3QgYSB0ZW1wIGh1bGwgZm9yIGVhY2ggdHJpYW5nbGVcbiAgLy8gICBjb25zdCBodWxsQiA9IG5ldyBDb252ZXhQb2x5aGVkcm9uKCk7XG4gIC8vICAgaHVsbEIuZmFjZXMgPSBbWzAsMSwyXV07XG4gIC8vICAgY29uc3QgdmEgPSBuZXcgVmVjMygpO1xuICAvLyAgIGNvbnN0IHZiID0gbmV3IFZlYzMoKTtcbiAgLy8gICBjb25zdCB2YyA9IG5ldyBWZWMzKCk7XG4gIC8vICAgaHVsbEIudmVydGljZXMgPSBbXG4gIC8vICAgICAgIHZhLFxuICAvLyAgICAgICB2YixcbiAgLy8gICAgICAgdmNcbiAgLy8gICBdO1xuICAvLyAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2ouaW5kaWNlcy5sZW5ndGggLyAzOyBpKyspIHtcbiAgLy8gICAgICAgY29uc3QgdHJpYW5nbGVOb3JtYWwgPSBuZXcgVmVjMygpO1xuICAvLyAgICAgICBzai5nZXROb3JtYWwoaSwgdHJpYW5nbGVOb3JtYWwpO1xuICAvLyAgICAgICBodWxsQi5mYWNlTm9ybWFscyA9IFt0cmlhbmdsZU5vcm1hbF07XG4gIC8vICAgICAgIHNqLmdldFRyaWFuZ2xlVmVydGljZXMoaSwgdmEsIHZiLCB2Yyk7XG4gIC8vICAgICAgIGxldCBkID0gc2kudGVzdFNlcEF4aXModHJpYW5nbGVOb3JtYWwsIGh1bGxCLCB4aSwgcWksIHhqLCBxaik7XG4gIC8vICAgICAgIGlmKCFkKXtcbiAgLy8gICAgICAgICAgIHRyaWFuZ2xlTm9ybWFsLnNjYWxlKC0xLCB0cmlhbmdsZU5vcm1hbCk7XG4gIC8vICAgICAgICAgICBkID0gc2kudGVzdFNlcEF4aXModHJpYW5nbGVOb3JtYWwsIGh1bGxCLCB4aSwgcWksIHhqLCBxaik7XG4gIC8vICAgICAgICAgICBpZighZCl7XG4gIC8vICAgICAgICAgICAgICAgY29udGludWU7XG4gIC8vICAgICAgICAgICB9XG4gIC8vICAgICAgIH1cbiAgLy8gICAgICAgY29uc3QgcmVzOiBDb252ZXhQb2x5aGVkcm9uQ29udGFjdFBvaW50W10gPSBbXTtcbiAgLy8gICAgICAgY29uc3QgcSA9IGNvbnZleENvbnZleF9xO1xuICAvLyAgICAgICBzaS5jbGlwQWdhaW5zdEh1bGwoeGkscWksaHVsbEIseGoscWosdHJpYW5nbGVOb3JtYWwsLTEwMCwxMDAscmVzKTtcbiAgLy8gICAgICAgZm9yKGxldCBqID0gMDsgaiAhPT0gcmVzLmxlbmd0aDsgaisrKXtcbiAgLy8gICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSxiaixzaSxzaixyc2kscnNqKSxcbiAgLy8gICAgICAgICAgICAgICByaSA9IHIucmksXG4gIC8vICAgICAgICAgICAgICAgcmogPSByLnJqO1xuICAvLyAgICAgICAgICAgci5uaS5jb3B5KHRyaWFuZ2xlTm9ybWFsKTtcbiAgLy8gICAgICAgICAgIHIubmkubmVnYXRlKHIubmkpO1xuICAvLyAgICAgICAgICAgcmVzW2pdLm5vcm1hbC5uZWdhdGUocSk7XG4gIC8vICAgICAgICAgICBxLm11bHQocmVzW2pdLmRlcHRoLCBxKTtcbiAgLy8gICAgICAgICAgIHJlc1tqXS5wb2ludC52YWRkKHEsIHJpKTtcbiAgLy8gICAgICAgICAgIHJqLmNvcHkocmVzW2pdLnBvaW50KTtcbiAgLy8gICAgICAgICAgIC8vIENvbnRhY3QgcG9pbnRzIGFyZSBpbiB3b3JsZCBjb29yZGluYXRlcy4gVHJhbnNmb3JtIGJhY2sgdG8gcmVsYXRpdmVcbiAgLy8gICAgICAgICAgIHJpLnZzdWIoeGkscmkpO1xuICAvLyAgICAgICAgICAgcmoudnN1Yih4aixyaik7XG4gIC8vICAgICAgICAgICAvLyBNYWtlIHJlbGF0aXZlIHRvIGJvZGllc1xuICAvLyAgICAgICAgICAgcmkudmFkZCh4aSwgcmkpO1xuICAvLyAgICAgICAgICAgcmkudnN1YihiaS5wb3NpdGlvbiwgcmkpO1xuICAvLyAgICAgICAgICAgcmoudmFkZCh4aiwgcmopO1xuICAvLyAgICAgICAgICAgcmoudnN1Yihiai5wb3NpdGlvbiwgcmopO1xuICAvLyAgICAgICAgICAgcmVzdWx0LnB1c2gocik7XG4gIC8vICAgICAgIH1cbiAgLy8gICB9XG4gIC8vIH1cblxuXG59XG5jb25zdCBhdmVyYWdlTm9ybWFsID0gbmV3IFZlYzMoKTtcbmNvbnN0IGF2ZXJhZ2VDb250YWN0UG9pbnRBID0gbmV3IFZlYzMoKTtcbmNvbnN0IGF2ZXJhZ2VDb250YWN0UG9pbnRCID0gbmV3IFZlYzMoKTtcbmNvbnN0IHRtcFZlYzEgPSBuZXcgVmVjMygpO1xuY29uc3QgdG1wVmVjMiA9IG5ldyBWZWMzKCk7XG5jb25zdCB0bXBRdWF0MSA9IG5ldyBRdWF0ZXJuaW9uKCk7XG5jb25zdCB0bXBRdWF0MiA9IG5ldyBRdWF0ZXJuaW9uKCk7XG5cbmNvbnN0IHBsYW5lVHJpbWVzaF9ub3JtYWwgPSBuZXcgVmVjMygpO1xuY29uc3QgcGxhbmVUcmltZXNoX3JlbHBvcyA9IG5ldyBWZWMzKCk7XG5jb25zdCBwbGFuZVRyaW1lc2hfcHJvamVjdGVkID0gbmV3IFZlYzMoKTtcbmNvbnN0IHNwaGVyZVRyaW1lc2hfbm9ybWFsID0gbmV3IFZlYzMoKTtcbmNvbnN0IHNwaGVyZVRyaW1lc2hfcmVscG9zID0gbmV3IFZlYzMoKTtcbmNvbnN0IHNwaGVyZVRyaW1lc2hfdiA9IG5ldyBWZWMzKCk7XG5jb25zdCBzcGhlcmVUcmltZXNoX3YyID0gbmV3IFZlYzMoKTtcbmNvbnN0IHNwaGVyZVRyaW1lc2hfZWRnZVZlcnRleEEgPSBuZXcgVmVjMygpO1xuY29uc3Qgc3BoZXJlVHJpbWVzaF9lZGdlVmVydGV4QiA9IG5ldyBWZWMzKCk7XG5jb25zdCBzcGhlcmVUcmltZXNoX2VkZ2VWZWN0b3IgPSBuZXcgVmVjMygpO1xuY29uc3Qgc3BoZXJlVHJpbWVzaF9lZGdlVmVjdG9yVW5pdCA9IG5ldyBWZWMzKCk7XG5jb25zdCBzcGhlcmVUcmltZXNoX2xvY2FsU3BoZXJlUG9zID0gbmV3IFZlYzMoKTtcbmNvbnN0IHNwaGVyZVRyaW1lc2hfdG1wID0gbmV3IFZlYzMoKTtcbmNvbnN0IHNwaGVyZVRyaW1lc2hfdmEgPSBuZXcgVmVjMygpO1xuY29uc3Qgc3BoZXJlVHJpbWVzaF92YiA9IG5ldyBWZWMzKCk7XG5jb25zdCBzcGhlcmVUcmltZXNoX3ZjID0gbmV3IFZlYzMoKTtcbmNvbnN0IHNwaGVyZVRyaW1lc2hfbG9jYWxTcGhlcmVBQUJCID0gbmV3IEFBQkIoKTtcbmNvbnN0IHNwaGVyZVRyaW1lc2hfdHJpYW5nbGVzID0gW107XG5jb25zdCBwb2ludF9vbl9wbGFuZV90b19zcGhlcmUgPSBuZXcgVmVjMygpO1xuY29uc3QgcGxhbmVfdG9fc3BoZXJlX29ydGhvID0gbmV3IFZlYzMoKTsgLy8gU2VlIGh0dHA6Ly9idWxsZXRwaHlzaWNzLmNvbS9CdWxsZXQvQnVsbGV0RnVsbC9TcGhlcmVUcmlhbmdsZURldGVjdG9yXzhjcHBfc291cmNlLmh0bWxcblxuY29uc3QgcG9pbnRJblBvbHlnb25fZWRnZSA9IG5ldyBWZWMzKCk7XG5jb25zdCBwb2ludEluUG9seWdvbl9lZGdlX3hfbm9ybWFsID0gbmV3IFZlYzMoKTtcbmNvbnN0IHBvaW50SW5Qb2x5Z29uX3Z0cCA9IG5ldyBWZWMzKCk7XG5cbmZ1bmN0aW9uIHBvaW50SW5Qb2x5Z29uKHZlcnRzLCBub3JtYWwsIHApIHtcbiAgbGV0IHBvc2l0aXZlUmVzdWx0ID0gbnVsbDtcbiAgY29uc3QgTiA9IHZlcnRzLmxlbmd0aDtcblxuICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTjsgaSsrKSB7XG4gICAgY29uc3QgdiA9IHZlcnRzW2ldOyAvLyBHZXQgZWRnZSB0byB0aGUgbmV4dCB2ZXJ0ZXhcblxuICAgIGNvbnN0IGVkZ2UgPSBwb2ludEluUG9seWdvbl9lZGdlO1xuICAgIHZlcnRzWyhpICsgMSkgJSBOXS52c3ViKHYsIGVkZ2UpOyAvLyBHZXQgY3Jvc3MgcHJvZHVjdCBiZXR3ZWVuIHBvbHlnb24gbm9ybWFsIGFuZCB0aGUgZWRnZVxuXG4gICAgY29uc3QgZWRnZV94X25vcm1hbCA9IHBvaW50SW5Qb2x5Z29uX2VkZ2VfeF9ub3JtYWw7IC8vY29uc3QgZWRnZV94X25vcm1hbCA9IG5ldyBWZWMzKCk7XG5cbiAgICBlZGdlLmNyb3NzKG5vcm1hbCwgZWRnZV94X25vcm1hbCk7IC8vIEdldCB2ZWN0b3IgYmV0d2VlbiBwb2ludCBhbmQgY3VycmVudCB2ZXJ0ZXhcblxuICAgIGNvbnN0IHZlcnRleF90b19wID0gcG9pbnRJblBvbHlnb25fdnRwO1xuICAgIHAudnN1Yih2LCB2ZXJ0ZXhfdG9fcCk7IC8vIFRoaXMgZG90IHByb2R1Y3QgZGV0ZXJtaW5lcyB3aGljaCBzaWRlIG9mIHRoZSBlZGdlIHRoZSBwb2ludCBpc1xuXG4gICAgY29uc3QgciA9IGVkZ2VfeF9ub3JtYWwuZG90KHZlcnRleF90b19wKTsgLy8gSWYgYWxsIHN1Y2ggZG90IHByb2R1Y3RzIGhhdmUgc2FtZSBzaWduLCB3ZSBhcmUgaW5zaWRlIHRoZSBwb2x5Z29uLlxuXG4gICAgaWYgKHBvc2l0aXZlUmVzdWx0ID09PSBudWxsIHx8IHIgPiAwICYmIHBvc2l0aXZlUmVzdWx0ID09PSB0cnVlIHx8IHIgPD0gMCAmJiBwb3NpdGl2ZVJlc3VsdCA9PT0gZmFsc2UpIHtcbiAgICAgIGlmIChwb3NpdGl2ZVJlc3VsdCA9PT0gbnVsbCkge1xuICAgICAgICBwb3NpdGl2ZVJlc3VsdCA9IHIgPiAwO1xuICAgICAgfVxuXG4gICAgICBjb250aW51ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlOyAvLyBFbmNvdW50ZXJlZCBzb21lIG90aGVyIHNpZ24uIEV4aXQuXG4gICAgfVxuICB9IC8vIElmIHdlIGdvdCBoZXJlLCBhbGwgZG90IHByb2R1Y3RzIHdlcmUgb2YgdGhlIHNhbWUgc2lnbi5cblxuXG4gIHJldHVybiB0cnVlO1xufVxuXG5jb25zdCBib3hfdG9fc3BoZXJlID0gbmV3IFZlYzMoKTtcbmNvbnN0IHNwaGVyZUJveF9ucyA9IG5ldyBWZWMzKCk7XG5jb25zdCBzcGhlcmVCb3hfbnMxID0gbmV3IFZlYzMoKTtcbmNvbnN0IHNwaGVyZUJveF9uczIgPSBuZXcgVmVjMygpO1xuY29uc3Qgc3BoZXJlQm94X3NpZGVzID0gW25ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCldO1xuY29uc3Qgc3BoZXJlQm94X3NwaGVyZV90b19jb3JuZXIgPSBuZXcgVmVjMygpO1xuY29uc3Qgc3BoZXJlQm94X3NpZGVfbnMgPSBuZXcgVmVjMygpO1xuY29uc3Qgc3BoZXJlQm94X3NpZGVfbnMxID0gbmV3IFZlYzMoKTtcbmNvbnN0IHNwaGVyZUJveF9zaWRlX25zMiA9IG5ldyBWZWMzKCk7XG5jb25zdCBjb252ZXhfdG9fc3BoZXJlID0gbmV3IFZlYzMoKTtcbmNvbnN0IHNwaGVyZUNvbnZleF9lZGdlID0gbmV3IFZlYzMoKTtcbmNvbnN0IHNwaGVyZUNvbnZleF9lZGdlVW5pdCA9IG5ldyBWZWMzKCk7XG5jb25zdCBzcGhlcmVDb252ZXhfc3BoZXJlVG9Db3JuZXIgPSBuZXcgVmVjMygpO1xuY29uc3Qgc3BoZXJlQ29udmV4X3dvcmxkQ29ybmVyID0gbmV3IFZlYzMoKTtcbmNvbnN0IHNwaGVyZUNvbnZleF93b3JsZE5vcm1hbCA9IG5ldyBWZWMzKCk7XG5jb25zdCBzcGhlcmVDb252ZXhfd29ybGRQb2ludCA9IG5ldyBWZWMzKCk7XG5jb25zdCBzcGhlcmVDb252ZXhfd29ybGRTcGhlcmVQb2ludENsb3Nlc3RUb1BsYW5lID0gbmV3IFZlYzMoKTtcbmNvbnN0IHNwaGVyZUNvbnZleF9wZW5ldHJhdGlvblZlYyA9IG5ldyBWZWMzKCk7XG5jb25zdCBzcGhlcmVDb252ZXhfc3BoZXJlVG9Xb3JsZFBvaW50ID0gbmV3IFZlYzMoKTtcbmNvbnN0IHBsYW5lQ29udmV4X3YgPSBuZXcgVmVjMygpO1xuY29uc3QgcGxhbmVDb252ZXhfbm9ybWFsID0gbmV3IFZlYzMoKTtcbmNvbnN0IHBsYW5lQ29udmV4X3JlbHBvcyA9IG5ldyBWZWMzKCk7XG5jb25zdCBwbGFuZUNvbnZleF9wcm9qZWN0ZWQgPSBuZXcgVmVjMygpO1xuY29uc3QgY29udmV4Q29udmV4X3NlcEF4aXMgPSBuZXcgVmVjMygpO1xuY29uc3QgY29udmV4Q29udmV4X3EgPSBuZXcgVmVjMygpO1xuY29uc3QgcGFydGljbGVQbGFuZV9ub3JtYWwgPSBuZXcgVmVjMygpO1xuY29uc3QgcGFydGljbGVQbGFuZV9yZWxwb3MgPSBuZXcgVmVjMygpO1xuY29uc3QgcGFydGljbGVQbGFuZV9wcm9qZWN0ZWQgPSBuZXcgVmVjMygpO1xuY29uc3QgcGFydGljbGVTcGhlcmVfbm9ybWFsID0gbmV3IFZlYzMoKTsgLy8gV0lQXG5cbmNvbnN0IGNxaiA9IG5ldyBRdWF0ZXJuaW9uKCk7XG5jb25zdCBjb252ZXhQYXJ0aWNsZV9sb2NhbCA9IG5ldyBWZWMzKCk7XG5jb25zdCBjb252ZXhQYXJ0aWNsZV9wZW5ldHJhdGVkRmFjZU5vcm1hbCA9IG5ldyBWZWMzKCk7XG5jb25zdCBjb252ZXhQYXJ0aWNsZV92ZXJ0ZXhUb1BhcnRpY2xlID0gbmV3IFZlYzMoKTtcbmNvbnN0IGNvbnZleFBhcnRpY2xlX3dvcmxkUGVuZXRyYXRpb25WZWMgPSBuZXcgVmVjMygpO1xuY29uc3QgY29udmV4SGVpZ2h0ZmllbGRfdG1wMSA9IG5ldyBWZWMzKCk7XG5jb25zdCBjb252ZXhIZWlnaHRmaWVsZF90bXAyID0gbmV3IFZlYzMoKTtcbmNvbnN0IGNvbnZleEhlaWdodGZpZWxkX2ZhY2VMaXN0ID0gWzBdO1xuY29uc3Qgc3BoZXJlSGVpZ2h0ZmllbGRfdG1wMSA9IG5ldyBWZWMzKCk7XG5jb25zdCBzcGhlcmVIZWlnaHRmaWVsZF90bXAyID0gbmV3IFZlYzMoKTtcblxuY2xhc3MgT3ZlcmxhcEtlZXBlciB7XG4gIC8qKlxuICAgKiBAdG9kbyBSZW1vdmUgdXNlbGVzcyBjb25zdHJ1Y3RvclxuICAgKi9cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5jdXJyZW50ID0gdm9pZCAwO1xuICAgIHRoaXMucHJldmlvdXMgPSB2b2lkIDA7XG4gICAgdGhpcy5jdXJyZW50ID0gW107XG4gICAgdGhpcy5wcmV2aW91cyA9IFtdO1xuICB9XG4gIC8qKlxuICAgKiBnZXRLZXlcbiAgICovXG5cblxuICBnZXRLZXkoaSwgaikge1xuICAgIGlmIChqIDwgaSkge1xuICAgICAgY29uc3QgdGVtcCA9IGo7XG4gICAgICBqID0gaTtcbiAgICAgIGkgPSB0ZW1wO1xuICAgIH1cblxuICAgIHJldHVybiBpIDw8IDE2IHwgajtcbiAgfVxuICAvKipcbiAgICogc2V0XG4gICAqL1xuXG5cbiAgc2V0KGksIGopIHtcbiAgICAvLyBJbnNlcnRpb24gc29ydC4gVGhpcyB3YXkgdGhlIGRpZmYgd2lsbCBoYXZlIGxpbmVhciBjb21wbGV4aXR5LlxuICAgIGNvbnN0IGtleSA9IHRoaXMuZ2V0S2V5KGksIGopO1xuICAgIGNvbnN0IGN1cnJlbnQgPSB0aGlzLmN1cnJlbnQ7XG4gICAgbGV0IGluZGV4ID0gMDtcblxuICAgIHdoaWxlIChrZXkgPiBjdXJyZW50W2luZGV4XSkge1xuICAgICAgaW5kZXgrKztcbiAgICB9XG5cbiAgICBpZiAoa2V5ID09PSBjdXJyZW50W2luZGV4XSkge1xuICAgICAgcmV0dXJuOyAvLyBQYWlyIHdhcyBhbHJlYWR5IGFkZGVkXG4gICAgfVxuXG4gICAgZm9yIChsZXQgaiA9IGN1cnJlbnQubGVuZ3RoIC0gMTsgaiA+PSBpbmRleDsgai0tKSB7XG4gICAgICBjdXJyZW50W2ogKyAxXSA9IGN1cnJlbnRbal07XG4gICAgfVxuXG4gICAgY3VycmVudFtpbmRleF0gPSBrZXk7XG4gIH1cbiAgLyoqXG4gICAqIHRpY2tcbiAgICovXG5cblxuICB0aWNrKCkge1xuICAgIGNvbnN0IHRtcCA9IHRoaXMuY3VycmVudDtcbiAgICB0aGlzLmN1cnJlbnQgPSB0aGlzLnByZXZpb3VzO1xuICAgIHRoaXMucHJldmlvdXMgPSB0bXA7XG4gICAgdGhpcy5jdXJyZW50Lmxlbmd0aCA9IDA7XG4gIH1cbiAgLyoqXG4gICAqIGdldERpZmZcbiAgICovXG5cblxuICBnZXREaWZmKGFkZGl0aW9ucywgcmVtb3ZhbHMpIHtcbiAgICBjb25zdCBhID0gdGhpcy5jdXJyZW50O1xuICAgIGNvbnN0IGIgPSB0aGlzLnByZXZpb3VzO1xuICAgIGNvbnN0IGFsID0gYS5sZW5ndGg7XG4gICAgY29uc3QgYmwgPSBiLmxlbmd0aDtcbiAgICBsZXQgaiA9IDA7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFsOyBpKyspIHtcbiAgICAgIGxldCBmb3VuZCA9IGZhbHNlO1xuICAgICAgY29uc3Qga2V5QSA9IGFbaV07XG5cbiAgICAgIHdoaWxlIChrZXlBID4gYltqXSkge1xuICAgICAgICBqKys7XG4gICAgICB9XG5cbiAgICAgIGZvdW5kID0ga2V5QSA9PT0gYltqXTtcblxuICAgICAgaWYgKCFmb3VuZCkge1xuICAgICAgICB1bnBhY2tBbmRQdXNoKGFkZGl0aW9ucywga2V5QSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaiA9IDA7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJsOyBpKyspIHtcbiAgICAgIGxldCBmb3VuZCA9IGZhbHNlO1xuICAgICAgY29uc3Qga2V5QiA9IGJbaV07XG5cbiAgICAgIHdoaWxlIChrZXlCID4gYVtqXSkge1xuICAgICAgICBqKys7XG4gICAgICB9XG5cbiAgICAgIGZvdW5kID0gYVtqXSA9PT0ga2V5QjtcblxuICAgICAgaWYgKCFmb3VuZCkge1xuICAgICAgICB1bnBhY2tBbmRQdXNoKHJlbW92YWxzLCBrZXlCKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxufVxuXG5mdW5jdGlvbiB1bnBhY2tBbmRQdXNoKGFycmF5LCBrZXkpIHtcbiAgYXJyYXkucHVzaCgoa2V5ICYgMHhmZmZmMDAwMCkgPj4gMTYsIGtleSAmIDB4MDAwMGZmZmYpO1xufVxuXG4vKipcbiAqIFR1cGxlRGljdGlvbmFyeVxuICovXG5jbGFzcyBUdXBsZURpY3Rpb25hcnkge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmRhdGEgPSB7XG4gICAgICBrZXlzOiBbXVxuICAgIH07XG4gIH1cblxuICAvKiogZ2V0ICovXG4gIGdldChpLCBqKSB7XG4gICAgaWYgKGkgPiBqKSB7XG4gICAgICAvLyBzd2FwXG4gICAgICBjb25zdCB0ZW1wID0gajtcbiAgICAgIGogPSBpO1xuICAgICAgaSA9IHRlbXA7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuZGF0YVtpICsgXCItXCIgKyBqXTtcbiAgfVxuICAvKiogc2V0ICovXG5cblxuICBzZXQoaSwgaiwgdmFsdWUpIHtcbiAgICBpZiAoaSA+IGopIHtcbiAgICAgIGNvbnN0IHRlbXAgPSBqO1xuICAgICAgaiA9IGk7XG4gICAgICBpID0gdGVtcDtcbiAgICB9XG5cbiAgICBjb25zdCBrZXkgPSBpICsgXCItXCIgKyBqOyAvLyBDaGVjayBpZiBrZXkgYWxyZWFkeSBleGlzdHNcblxuICAgIGlmICghdGhpcy5nZXQoaSwgaikpIHtcbiAgICAgIHRoaXMuZGF0YS5rZXlzLnB1c2goa2V5KTtcbiAgICB9XG5cbiAgICB0aGlzLmRhdGFba2V5XSA9IHZhbHVlO1xuICB9XG4gIC8qKiByZXNldCAqL1xuXG5cbiAgcmVzZXQoKSB7XG4gICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTtcbiAgICBjb25zdCBrZXlzID0gZGF0YS5rZXlzO1xuXG4gICAgd2hpbGUgKGtleXMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3Qga2V5ID0ga2V5cy5wb3AoKTtcbiAgICAgIGRlbGV0ZSBkYXRhW2tleV07XG4gICAgfVxuICB9XG5cbn1cblxuLyoqXG4gKiBUaGUgcGh5c2ljcyB3b3JsZFxuICovXG5jbGFzcyBXb3JsZCBleHRlbmRzIEV2ZW50VGFyZ2V0IHtcbiAgLyoqXG4gICAqIEN1cnJlbnRseSAvIGxhc3QgdXNlZCB0aW1lc3RlcC4gSXMgc2V0IHRvIC0xIGlmIG5vdCBhdmFpbGFibGUuIFRoaXMgdmFsdWUgaXMgdXBkYXRlZCBiZWZvcmUgZWFjaCBpbnRlcm5hbCBzdGVwLCB3aGljaCBtZWFucyB0aGF0IGl0IGlzIFwiZnJlc2hcIiBpbnNpZGUgZXZlbnQgY2FsbGJhY2tzLlxuICAgKi9cblxuICAvKipcbiAgICogTWFrZXMgYm9kaWVzIGdvIHRvIHNsZWVwIHdoZW4gdGhleSd2ZSBiZWVuIGluYWN0aXZlLlxuICAgKiBAZGVmYXVsdCBmYWxzZVxuICAgKi9cblxuICAvKipcbiAgICogQWxsIHRoZSBjdXJyZW50IGNvbnRhY3RzIChpbnN0YW5jZXMgb2YgQ29udGFjdEVxdWF0aW9uKSBpbiB0aGUgd29ybGQuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBIb3cgb2Z0ZW4gdG8gbm9ybWFsaXplIHF1YXRlcm5pb25zLiBTZXQgdG8gMCBmb3IgZXZlcnkgc3RlcCwgMSBmb3IgZXZlcnkgc2Vjb25kIGV0Yy4uIEEgbGFyZ2VyIHZhbHVlIGluY3JlYXNlcyBwZXJmb3JtYW5jZS4gSWYgYm9kaWVzIHRlbmQgdG8gZXhwbG9kZSwgc2V0IHRvIGEgc21hbGxlciB2YWx1ZSAoemVybyB0byBiZSBzdXJlIG5vdGhpbmcgY2FuIGdvIHdyb25nKS5cbiAgICogQGRlZmF1bHQgMFxuICAgKi9cblxuICAvKipcbiAgICogU2V0IHRvIHRydWUgdG8gdXNlIGZhc3QgcXVhdGVybmlvbiBub3JtYWxpemF0aW9uLiBJdCBpcyBvZnRlbiBlbm91Z2ggYWNjdXJhdGUgdG8gdXNlLlxuICAgKiBJZiBib2RpZXMgdGVuZCB0byBleHBsb2RlLCBzZXQgdG8gZmFsc2UuXG4gICAqIEBkZWZhdWx0IGZhbHNlXG4gICAqL1xuXG4gIC8qKlxuICAgKiBUaGUgd2FsbC1jbG9jayB0aW1lIHNpbmNlIHNpbXVsYXRpb24gc3RhcnQuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBOdW1iZXIgb2YgdGltZXN0ZXBzIHRha2VuIHNpbmNlIHN0YXJ0LlxuICAgKi9cblxuICAvKipcbiAgICogRGVmYXVsdCBhbmQgbGFzdCB0aW1lc3RlcCBzaXplcy5cbiAgICovXG5cbiAgLyoqXG4gICAqIFRoZSBncmF2aXR5IG9mIHRoZSB3b3JsZC5cbiAgICovXG5cbiAgLyoqXG4gICAqIFRoZSBicm9hZHBoYXNlIGFsZ29yaXRobSB0byB1c2UuXG4gICAqIEBkZWZhdWx0IE5haXZlQnJvYWRwaGFzZVxuICAgKi9cblxuICAvKipcbiAgICogQWxsIGJvZGllcyBpbiB0aGlzIHdvcmxkXG4gICAqL1xuXG4gIC8qKlxuICAgKiBUcnVlIGlmIGFueSBib2RpZXMgYXJlIG5vdCBzbGVlcGluZywgZmFsc2UgaWYgZXZlcnkgYm9keSBpcyBzbGVlcGluZy5cbiAgICovXG5cbiAgLyoqXG4gICAqIFRoZSBzb2x2ZXIgYWxnb3JpdGhtIHRvIHVzZS5cbiAgICogQGRlZmF1bHQgR1NTb2x2ZXJcbiAgICovXG5cbiAgLyoqXG4gICAqIGNvbGxpc2lvbk1hdHJpeFxuICAgKi9cblxuICAvKipcbiAgICogQ29sbGlzaW9uTWF0cml4IGZyb20gdGhlIHByZXZpb3VzIHN0ZXAuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBBbGwgYWRkZWQgbWF0ZXJpYWxzLlxuICAgKiBAZGVwcmVjYXRlZFxuICAgKiBAdG9kbyBSZW1vdmVcbiAgICovXG5cbiAgLyoqXG4gICAqIEFsbCBhZGRlZCBjb250YWN0bWF0ZXJpYWxzLlxuICAgKi9cblxuICAvKipcbiAgICogVXNlZCB0byBsb29rIHVwIGEgQ29udGFjdE1hdGVyaWFsIGdpdmVuIHR3byBpbnN0YW5jZXMgb2YgTWF0ZXJpYWwuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBUaGUgZGVmYXVsdCBtYXRlcmlhbCBvZiB0aGUgYm9kaWVzLlxuICAgKi9cblxuICAvKipcbiAgICogVGhpcyBjb250YWN0IG1hdGVyaWFsIGlzIHVzZWQgaWYgbm8gc3VpdGFibGUgY29udGFjdG1hdGVyaWFsIGlzIGZvdW5kIGZvciBhIGNvbnRhY3QuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBUaW1lIGFjY3VtdWxhdG9yIGZvciBpbnRlcnBvbGF0aW9uLlxuICAgKiBAc2VlIGh0dHBzOi8vZ2FmZmVyb25nYW1lcy5jb20vZ2FtZS1waHlzaWNzL2ZpeC15b3VyLXRpbWVzdGVwL1xuICAgKi9cblxuICAvKipcbiAgICogRGlzcGF0Y2hlZCBhZnRlciBhIGJvZHkgaGFzIGJlZW4gYWRkZWQgdG8gdGhlIHdvcmxkLlxuICAgKi9cblxuICAvKipcbiAgICogRGlzcGF0Y2hlZCBhZnRlciBhIGJvZHkgaGFzIGJlZW4gcmVtb3ZlZCBmcm9tIHRoZSB3b3JsZC5cbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5kdCA9IHZvaWQgMDtcbiAgICB0aGlzLmFsbG93U2xlZXAgPSB2b2lkIDA7XG4gICAgdGhpcy5jb250YWN0cyA9IHZvaWQgMDtcbiAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25zID0gdm9pZCAwO1xuICAgIHRoaXMucXVhdE5vcm1hbGl6ZVNraXAgPSB2b2lkIDA7XG4gICAgdGhpcy5xdWF0Tm9ybWFsaXplRmFzdCA9IHZvaWQgMDtcbiAgICB0aGlzLnRpbWUgPSB2b2lkIDA7XG4gICAgdGhpcy5zdGVwbnVtYmVyID0gdm9pZCAwO1xuICAgIHRoaXMuZGVmYXVsdF9kdCA9IHZvaWQgMDtcbiAgICB0aGlzLm5leHRJZCA9IHZvaWQgMDtcbiAgICB0aGlzLmdyYXZpdHkgPSB2b2lkIDA7XG4gICAgdGhpcy5icm9hZHBoYXNlID0gdm9pZCAwO1xuICAgIHRoaXMuYm9kaWVzID0gdm9pZCAwO1xuICAgIHRoaXMuaGFzQWN0aXZlQm9kaWVzID0gdm9pZCAwO1xuICAgIHRoaXMuc29sdmVyID0gdm9pZCAwO1xuICAgIHRoaXMuY29uc3RyYWludHMgPSB2b2lkIDA7XG4gICAgdGhpcy5uYXJyb3dwaGFzZSA9IHZvaWQgMDtcbiAgICB0aGlzLmNvbGxpc2lvbk1hdHJpeCA9IHZvaWQgMDtcbiAgICB0aGlzLmNvbGxpc2lvbk1hdHJpeFByZXZpb3VzID0gdm9pZCAwO1xuICAgIHRoaXMuYm9keU92ZXJsYXBLZWVwZXIgPSB2b2lkIDA7XG4gICAgdGhpcy5zaGFwZU92ZXJsYXBLZWVwZXIgPSB2b2lkIDA7XG4gICAgdGhpcy5tYXRlcmlhbHMgPSB2b2lkIDA7XG4gICAgdGhpcy5jb250YWN0bWF0ZXJpYWxzID0gdm9pZCAwO1xuICAgIHRoaXMuY29udGFjdE1hdGVyaWFsVGFibGUgPSB2b2lkIDA7XG4gICAgdGhpcy5kZWZhdWx0TWF0ZXJpYWwgPSB2b2lkIDA7XG4gICAgdGhpcy5kZWZhdWx0Q29udGFjdE1hdGVyaWFsID0gdm9pZCAwO1xuICAgIHRoaXMuZG9Qcm9maWxpbmcgPSB2b2lkIDA7XG4gICAgdGhpcy5wcm9maWxlID0gdm9pZCAwO1xuICAgIHRoaXMuYWNjdW11bGF0b3IgPSB2b2lkIDA7XG4gICAgdGhpcy5zdWJzeXN0ZW1zID0gdm9pZCAwO1xuICAgIHRoaXMuYWRkQm9keUV2ZW50ID0gdm9pZCAwO1xuICAgIHRoaXMucmVtb3ZlQm9keUV2ZW50ID0gdm9pZCAwO1xuICAgIHRoaXMuaWRUb0JvZHlNYXAgPSB2b2lkIDA7XG4gICAgdGhpcy5kdCA9IC0xO1xuICAgIHRoaXMuYWxsb3dTbGVlcCA9ICEhb3B0aW9ucy5hbGxvd1NsZWVwO1xuICAgIHRoaXMuY29udGFjdHMgPSBbXTtcbiAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25zID0gW107XG4gICAgdGhpcy5xdWF0Tm9ybWFsaXplU2tpcCA9IG9wdGlvbnMucXVhdE5vcm1hbGl6ZVNraXAgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMucXVhdE5vcm1hbGl6ZVNraXAgOiAwO1xuICAgIHRoaXMucXVhdE5vcm1hbGl6ZUZhc3QgPSBvcHRpb25zLnF1YXROb3JtYWxpemVGYXN0ICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnF1YXROb3JtYWxpemVGYXN0IDogZmFsc2U7XG4gICAgdGhpcy50aW1lID0gMC4wO1xuICAgIHRoaXMuc3RlcG51bWJlciA9IDA7XG4gICAgdGhpcy5kZWZhdWx0X2R0ID0gMSAvIDYwO1xuICAgIHRoaXMubmV4dElkID0gMDtcbiAgICB0aGlzLmdyYXZpdHkgPSBuZXcgVmVjMygpO1xuXG4gICAgaWYgKG9wdGlvbnMuZ3Jhdml0eSkge1xuICAgICAgdGhpcy5ncmF2aXR5LmNvcHkob3B0aW9ucy5ncmF2aXR5KTtcbiAgICB9XG5cbiAgICB0aGlzLmJyb2FkcGhhc2UgPSBvcHRpb25zLmJyb2FkcGhhc2UgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuYnJvYWRwaGFzZSA6IG5ldyBOYWl2ZUJyb2FkcGhhc2UoKTtcbiAgICB0aGlzLmJvZGllcyA9IFtdO1xuICAgIHRoaXMuaGFzQWN0aXZlQm9kaWVzID0gZmFsc2U7XG4gICAgdGhpcy5zb2x2ZXIgPSBvcHRpb25zLnNvbHZlciAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5zb2x2ZXIgOiBuZXcgR1NTb2x2ZXIoKTtcbiAgICB0aGlzLmNvbnN0cmFpbnRzID0gW107XG4gICAgdGhpcy5uYXJyb3dwaGFzZSA9IG5ldyBOYXJyb3dwaGFzZSh0aGlzKTtcbiAgICB0aGlzLmNvbGxpc2lvbk1hdHJpeCA9IG5ldyBBcnJheUNvbGxpc2lvbk1hdHJpeCgpO1xuICAgIHRoaXMuY29sbGlzaW9uTWF0cml4UHJldmlvdXMgPSBuZXcgQXJyYXlDb2xsaXNpb25NYXRyaXgoKTtcbiAgICB0aGlzLmJvZHlPdmVybGFwS2VlcGVyID0gbmV3IE92ZXJsYXBLZWVwZXIoKTtcbiAgICB0aGlzLnNoYXBlT3ZlcmxhcEtlZXBlciA9IG5ldyBPdmVybGFwS2VlcGVyKCk7XG4gICAgdGhpcy5tYXRlcmlhbHMgPSBbXTtcbiAgICB0aGlzLmNvbnRhY3RtYXRlcmlhbHMgPSBbXTtcbiAgICB0aGlzLmNvbnRhY3RNYXRlcmlhbFRhYmxlID0gbmV3IFR1cGxlRGljdGlvbmFyeSgpO1xuICAgIHRoaXMuZGVmYXVsdE1hdGVyaWFsID0gbmV3IE1hdGVyaWFsKCdkZWZhdWx0Jyk7XG4gICAgdGhpcy5kZWZhdWx0Q29udGFjdE1hdGVyaWFsID0gbmV3IENvbnRhY3RNYXRlcmlhbCh0aGlzLmRlZmF1bHRNYXRlcmlhbCwgdGhpcy5kZWZhdWx0TWF0ZXJpYWwsIHtcbiAgICAgIGZyaWN0aW9uOiAwLjMsXG4gICAgICByZXN0aXR1dGlvbjogMC4wXG4gICAgfSk7XG4gICAgdGhpcy5kb1Byb2ZpbGluZyA9IGZhbHNlO1xuICAgIHRoaXMucHJvZmlsZSA9IHtcbiAgICAgIHNvbHZlOiAwLFxuICAgICAgbWFrZUNvbnRhY3RDb25zdHJhaW50czogMCxcbiAgICAgIGJyb2FkcGhhc2U6IDAsXG4gICAgICBpbnRlZ3JhdGU6IDAsXG4gICAgICBuYXJyb3dwaGFzZTogMFxuICAgIH07XG4gICAgdGhpcy5hY2N1bXVsYXRvciA9IDA7XG4gICAgdGhpcy5zdWJzeXN0ZW1zID0gW107XG4gICAgdGhpcy5hZGRCb2R5RXZlbnQgPSB7XG4gICAgICB0eXBlOiAnYWRkQm9keScsXG4gICAgICBib2R5OiBudWxsXG4gICAgfTtcbiAgICB0aGlzLnJlbW92ZUJvZHlFdmVudCA9IHtcbiAgICAgIHR5cGU6ICdyZW1vdmVCb2R5JyxcbiAgICAgIGJvZHk6IG51bGxcbiAgICB9O1xuICAgIHRoaXMuaWRUb0JvZHlNYXAgPSB7fTtcbiAgICB0aGlzLmJyb2FkcGhhc2Uuc2V0V29ybGQodGhpcyk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgY29udGFjdCBtYXRlcmlhbCBiZXR3ZWVuIG1hdGVyaWFscyBtMSBhbmQgbTJcbiAgICogQHJldHVybiBUaGUgY29udGFjdCBtYXRlcmlhbCBpZiBpdCB3YXMgZm91bmQuXG4gICAqL1xuXG5cbiAgZ2V0Q29udGFjdE1hdGVyaWFsKG0xLCBtMikge1xuICAgIHJldHVybiB0aGlzLmNvbnRhY3RNYXRlcmlhbFRhYmxlLmdldChtMS5pZCwgbTIuaWQpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgbnVtYmVyIG9mIG9iamVjdHMgaW4gdGhlIHdvcmxkLlxuICAgKiBAZGVwcmVjYXRlZFxuICAgKi9cblxuXG4gIG51bU9iamVjdHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuYm9kaWVzLmxlbmd0aDtcbiAgfVxuICAvKipcbiAgICogU3RvcmUgb2xkIGNvbGxpc2lvbiBzdGF0ZSBpbmZvXG4gICAqL1xuXG5cbiAgY29sbGlzaW9uTWF0cml4VGljaygpIHtcbiAgICBjb25zdCB0ZW1wID0gdGhpcy5jb2xsaXNpb25NYXRyaXhQcmV2aW91cztcbiAgICB0aGlzLmNvbGxpc2lvbk1hdHJpeFByZXZpb3VzID0gdGhpcy5jb2xsaXNpb25NYXRyaXg7XG4gICAgdGhpcy5jb2xsaXNpb25NYXRyaXggPSB0ZW1wO1xuICAgIHRoaXMuY29sbGlzaW9uTWF0cml4LnJlc2V0KCk7XG4gICAgdGhpcy5ib2R5T3ZlcmxhcEtlZXBlci50aWNrKCk7XG4gICAgdGhpcy5zaGFwZU92ZXJsYXBLZWVwZXIudGljaygpO1xuICB9XG4gIC8qKlxuICAgKiBBZGQgYSBjb25zdHJhaW50IHRvIHRoZSBzaW11bGF0aW9uLlxuICAgKi9cblxuXG4gIGFkZENvbnN0cmFpbnQoYykge1xuICAgIHRoaXMuY29uc3RyYWludHMucHVzaChjKTtcbiAgfVxuICAvKipcbiAgICogUmVtb3ZlcyBhIGNvbnN0cmFpbnRcbiAgICovXG5cblxuICByZW1vdmVDb25zdHJhaW50KGMpIHtcbiAgICBjb25zdCBpZHggPSB0aGlzLmNvbnN0cmFpbnRzLmluZGV4T2YoYyk7XG5cbiAgICBpZiAoaWR4ICE9PSAtMSkge1xuICAgICAgdGhpcy5jb25zdHJhaW50cy5zcGxpY2UoaWR4LCAxKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFJheWNhc3QgdGVzdFxuICAgKiBAZGVwcmVjYXRlZCBVc2UgLnJheWNhc3RBbGwsIC5yYXljYXN0Q2xvc2VzdCBvciAucmF5Y2FzdEFueSBpbnN0ZWFkLlxuICAgKi9cblxuXG4gIHJheVRlc3QoZnJvbSwgdG8sIHJlc3VsdCkge1xuICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBSYXljYXN0UmVzdWx0KSB7XG4gICAgICAvLyBEbyByYXljYXN0Q2xvc2VzdFxuICAgICAgdGhpcy5yYXljYXN0Q2xvc2VzdChmcm9tLCB0bywge1xuICAgICAgICBza2lwQmFja2ZhY2VzOiB0cnVlXG4gICAgICB9LCByZXN1bHQpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBEbyByYXljYXN0QWxsXG4gICAgICB0aGlzLnJheWNhc3RBbGwoZnJvbSwgdG8sIHtcbiAgICAgICAgc2tpcEJhY2tmYWNlczogdHJ1ZVxuICAgICAgfSwgcmVzdWx0KTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFJheSBjYXN0IGFnYWluc3QgYWxsIGJvZGllcy4gVGhlIHByb3ZpZGVkIGNhbGxiYWNrIHdpbGwgYmUgZXhlY3V0ZWQgZm9yIGVhY2ggaGl0IHdpdGggYSBSYXljYXN0UmVzdWx0IGFzIHNpbmdsZSBhcmd1bWVudC5cbiAgICogQHJldHVybiBUcnVlIGlmIGFueSBib2R5IHdhcyBoaXQuXG4gICAqL1xuXG5cbiAgcmF5Y2FzdEFsbChmcm9tLCB0bywgb3B0aW9ucyA9IHt9LCBjYWxsYmFjaykge1xuICAgIG9wdGlvbnMubW9kZSA9IFJheS5BTEw7XG4gICAgb3B0aW9ucy5mcm9tID0gZnJvbTtcbiAgICBvcHRpb25zLnRvID0gdG87XG4gICAgb3B0aW9ucy5jYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgIHJldHVybiB0bXBSYXkuaW50ZXJzZWN0V29ybGQodGhpcywgb3B0aW9ucyk7XG4gIH1cbiAgLyoqXG4gICAqIFJheSBjYXN0LCBhbmQgc3RvcCBhdCB0aGUgZmlyc3QgcmVzdWx0LiBOb3RlIHRoYXQgdGhlIG9yZGVyIGlzIHJhbmRvbSAtIGJ1dCB0aGUgbWV0aG9kIGlzIGZhc3QuXG4gICAqIEByZXR1cm4gVHJ1ZSBpZiBhbnkgYm9keSB3YXMgaGl0LlxuICAgKi9cblxuXG4gIHJheWNhc3RBbnkoZnJvbSwgdG8sIG9wdGlvbnMgPSB7fSwgcmVzdWx0KSB7XG4gICAgb3B0aW9ucy5tb2RlID0gUmF5LkFOWTtcbiAgICBvcHRpb25zLmZyb20gPSBmcm9tO1xuICAgIG9wdGlvbnMudG8gPSB0bztcbiAgICBvcHRpb25zLnJlc3VsdCA9IHJlc3VsdDtcbiAgICByZXR1cm4gdG1wUmF5LmludGVyc2VjdFdvcmxkKHRoaXMsIG9wdGlvbnMpO1xuICB9XG4gIC8qKlxuICAgKiBSYXkgY2FzdCwgYW5kIHJldHVybiBpbmZvcm1hdGlvbiBvZiB0aGUgY2xvc2VzdCBoaXQuXG4gICAqIEByZXR1cm4gVHJ1ZSBpZiBhbnkgYm9keSB3YXMgaGl0LlxuICAgKi9cblxuXG4gIHJheWNhc3RDbG9zZXN0KGZyb20sIHRvLCBvcHRpb25zID0ge30sIHJlc3VsdCkge1xuICAgIG9wdGlvbnMubW9kZSA9IFJheS5DTE9TRVNUO1xuICAgIG9wdGlvbnMuZnJvbSA9IGZyb207XG4gICAgb3B0aW9ucy50byA9IHRvO1xuICAgIG9wdGlvbnMucmVzdWx0ID0gcmVzdWx0O1xuICAgIHJldHVybiB0bXBSYXkuaW50ZXJzZWN0V29ybGQodGhpcywgb3B0aW9ucyk7XG4gIH1cbiAgLyoqXG4gICAqIEFkZCBhIHJpZ2lkIGJvZHkgdG8gdGhlIHNpbXVsYXRpb24uXG4gICAqIEB0b2RvIElmIHRoZSBzaW11bGF0aW9uIGhhcyBub3QgeWV0IHN0YXJ0ZWQsIHdoeSByZWNyZXRlIGFuZCBjb3B5IGFycmF5cyBmb3IgZWFjaCBib2R5PyBBY2N1bXVsYXRlIGluIGR5bmFtaWMgYXJyYXlzIGluIHRoaXMgY2FzZS5cbiAgICogQHRvZG8gQWRkaW5nIGFuIGFycmF5IG9mIGJvZGllcyBzaG91bGQgYmUgcG9zc2libGUuIFRoaXMgd291bGQgc2F2ZSBzb21lIGxvb3BzIHRvb1xuICAgKi9cblxuXG4gIGFkZEJvZHkoYm9keSkge1xuICAgIGlmICh0aGlzLmJvZGllcy5pbmNsdWRlcyhib2R5KSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGJvZHkuaW5kZXggPSB0aGlzLmJvZGllcy5sZW5ndGg7XG4gICAgdGhpcy5ib2RpZXMucHVzaChib2R5KTtcbiAgICBib2R5LndvcmxkID0gdGhpcztcbiAgICBib2R5LmluaXRQb3NpdGlvbi5jb3B5KGJvZHkucG9zaXRpb24pO1xuICAgIGJvZHkuaW5pdFZlbG9jaXR5LmNvcHkoYm9keS52ZWxvY2l0eSk7XG4gICAgYm9keS50aW1lTGFzdFNsZWVweSA9IHRoaXMudGltZTtcblxuICAgIGlmIChib2R5IGluc3RhbmNlb2YgQm9keSkge1xuICAgICAgYm9keS5pbml0QW5ndWxhclZlbG9jaXR5LmNvcHkoYm9keS5hbmd1bGFyVmVsb2NpdHkpO1xuICAgICAgYm9keS5pbml0UXVhdGVybmlvbi5jb3B5KGJvZHkucXVhdGVybmlvbik7XG4gICAgfVxuXG4gICAgdGhpcy5jb2xsaXNpb25NYXRyaXguc2V0TnVtT2JqZWN0cyh0aGlzLmJvZGllcy5sZW5ndGgpO1xuICAgIHRoaXMuYWRkQm9keUV2ZW50LmJvZHkgPSBib2R5O1xuICAgIHRoaXMuaWRUb0JvZHlNYXBbYm9keS5pZF0gPSBib2R5O1xuICAgIHRoaXMuZGlzcGF0Y2hFdmVudCh0aGlzLmFkZEJvZHlFdmVudCk7XG4gIH1cbiAgLyoqXG4gICAqIFJlbW92ZSBhIHJpZ2lkIGJvZHkgZnJvbSB0aGUgc2ltdWxhdGlvbi5cbiAgICovXG5cblxuICByZW1vdmVCb2R5KGJvZHkpIHtcbiAgICBib2R5LndvcmxkID0gbnVsbDtcbiAgICBjb25zdCBuID0gdGhpcy5ib2RpZXMubGVuZ3RoIC0gMTtcbiAgICBjb25zdCBib2RpZXMgPSB0aGlzLmJvZGllcztcbiAgICBjb25zdCBpZHggPSBib2RpZXMuaW5kZXhPZihib2R5KTtcblxuICAgIGlmIChpZHggIT09IC0xKSB7XG4gICAgICBib2RpZXMuc3BsaWNlKGlkeCwgMSk7IC8vIFRvZG86IHNob3VsZCB1c2UgYSBnYXJiYWdlIGZyZWUgbWV0aG9kXG4gICAgICAvLyBSZWNvbXB1dGUgaW5kZXhcblxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IGJvZGllcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBib2RpZXNbaV0uaW5kZXggPSBpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmNvbGxpc2lvbk1hdHJpeC5zZXROdW1PYmplY3RzKG4pO1xuICAgICAgdGhpcy5yZW1vdmVCb2R5RXZlbnQuYm9keSA9IGJvZHk7XG4gICAgICBkZWxldGUgdGhpcy5pZFRvQm9keU1hcFtib2R5LmlkXTtcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudCh0aGlzLnJlbW92ZUJvZHlFdmVudCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0Qm9keUJ5SWQoaWQpIHtcbiAgICByZXR1cm4gdGhpcy5pZFRvQm9keU1hcFtpZF07XG4gIH1cbiAgLyoqXG4gICAqIEB0b2RvIE1ha2UgYSBmYXN0ZXIgbWFwXG4gICAqL1xuXG5cbiAgZ2V0U2hhcGVCeUlkKGlkKSB7XG4gICAgY29uc3QgYm9kaWVzID0gdGhpcy5ib2RpZXM7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJvZGllcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3Qgc2hhcGVzID0gYm9kaWVzW2ldLnNoYXBlcztcblxuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBzaGFwZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgY29uc3Qgc2hhcGUgPSBzaGFwZXNbal07XG5cbiAgICAgICAgaWYgKHNoYXBlLmlkID09PSBpZCkge1xuICAgICAgICAgIHJldHVybiBzaGFwZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG4gIC8qKlxuICAgKiBBZGRzIGEgbWF0ZXJpYWwgdG8gdGhlIFdvcmxkLlxuICAgKiBAZGVwcmVjYXRlZFxuICAgKiBAdG9kbyBSZW1vdmVcbiAgICovXG5cblxuICBhZGRNYXRlcmlhbChtKSB7XG4gICAgdGhpcy5tYXRlcmlhbHMucHVzaChtKTtcbiAgfVxuICAvKipcbiAgICogQWRkcyBhIGNvbnRhY3QgbWF0ZXJpYWwgdG8gdGhlIFdvcmxkXG4gICAqL1xuXG5cbiAgYWRkQ29udGFjdE1hdGVyaWFsKGNtYXQpIHtcbiAgICAvLyBBZGQgY29udGFjdCBtYXRlcmlhbFxuICAgIHRoaXMuY29udGFjdG1hdGVyaWFscy5wdXNoKGNtYXQpOyAvLyBBZGQgY3VycmVudCBjb250YWN0IG1hdGVyaWFsIHRvIHRoZSBtYXRlcmlhbCB0YWJsZVxuXG4gICAgdGhpcy5jb250YWN0TWF0ZXJpYWxUYWJsZS5zZXQoY21hdC5tYXRlcmlhbHNbMF0uaWQsIGNtYXQubWF0ZXJpYWxzWzFdLmlkLCBjbWF0KTtcbiAgfVxuICAvKipcbiAgICogU3RlcCB0aGUgcGh5c2ljcyB3b3JsZCBmb3J3YXJkIGluIHRpbWUuXG4gICAqXG4gICAqIFRoZXJlIGFyZSB0d28gbW9kZXMuIFRoZSBzaW1wbGUgbW9kZSBpcyBmaXhlZCB0aW1lc3RlcHBpbmcgd2l0aG91dCBpbnRlcnBvbGF0aW9uLiBJbiB0aGlzIGNhc2UgeW91IG9ubHkgdXNlIHRoZSBmaXJzdCBhcmd1bWVudC4gVGhlIHNlY29uZCBjYXNlIHVzZXMgaW50ZXJwb2xhdGlvbi4gSW4gdGhhdCB5b3UgYWxzbyBwcm92aWRlIHRoZSB0aW1lIHNpbmNlIHRoZSBmdW5jdGlvbiB3YXMgbGFzdCB1c2VkLCBhcyB3ZWxsIGFzIHRoZSBtYXhpbXVtIGZpeGVkIHRpbWVzdGVwcyB0byB0YWtlLlxuICAgKlxuICAgKiBAcGFyYW0gZHQgVGhlIGZpeGVkIHRpbWUgc3RlcCBzaXplIHRvIHVzZS5cbiAgICogQHBhcmFtIHRpbWVTaW5jZUxhc3RDYWxsZWQgVGhlIHRpbWUgZWxhcHNlZCBzaW5jZSB0aGUgZnVuY3Rpb24gd2FzIGxhc3QgY2FsbGVkLlxuICAgKiBAcGFyYW0gbWF4U3ViU3RlcHMgTWF4aW11bSBudW1iZXIgb2YgZml4ZWQgc3RlcHMgdG8gdGFrZSBwZXIgZnVuY3Rpb24gY2FsbC5cbiAgICogQHNlZSBodHRwczovL3dlYi5hcmNoaXZlLm9yZy93ZWIvMjAxODA0MjYxNTQ1MzEvaHR0cDovL2J1bGxldHBoeXNpY3Mub3JnL21lZGlhd2lraS0xLjUuOC9pbmRleC5waHAvU3RlcHBpbmdfVGhlX1dvcmxkI1doYXRfZG9fdGhlX3BhcmFtZXRlcnNfdG9fYnREeW5hbWljc1dvcmxkOjpzdGVwU2ltdWxhdGlvbl9tZWFuLjNGXG4gICAqIEBleGFtcGxlXG4gICAqICAgICAvLyBmaXhlZCB0aW1lc3RlcHBpbmcgd2l0aG91dCBpbnRlcnBvbGF0aW9uXG4gICAqICAgICB3b3JsZC5zdGVwKDEgLyA2MClcbiAgICovXG5cblxuICBzdGVwKGR0LCB0aW1lU2luY2VMYXN0Q2FsbGVkLCBtYXhTdWJTdGVwcyA9IDEwKSB7XG4gICAgaWYgKHRpbWVTaW5jZUxhc3RDYWxsZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgLy8gRml4ZWQsIHNpbXBsZSBzdGVwcGluZ1xuICAgICAgdGhpcy5pbnRlcm5hbFN0ZXAoZHQpOyAvLyBJbmNyZW1lbnQgdGltZVxuXG4gICAgICB0aGlzLnRpbWUgKz0gZHQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuYWNjdW11bGF0b3IgKz0gdGltZVNpbmNlTGFzdENhbGxlZDtcbiAgICAgIGNvbnN0IHQwID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgICBsZXQgc3Vic3RlcHMgPSAwO1xuXG4gICAgICB3aGlsZSAodGhpcy5hY2N1bXVsYXRvciA+PSBkdCAmJiBzdWJzdGVwcyA8IG1heFN1YlN0ZXBzKSB7XG4gICAgICAgIC8vIERvIGZpeGVkIHN0ZXBzIHRvIGNhdGNoIHVwXG4gICAgICAgIHRoaXMuaW50ZXJuYWxTdGVwKGR0KTtcbiAgICAgICAgdGhpcy5hY2N1bXVsYXRvciAtPSBkdDtcbiAgICAgICAgc3Vic3RlcHMrKztcblxuICAgICAgICBpZiAocGVyZm9ybWFuY2Uubm93KCkgLSB0MCA+IGR0ICogMTAwMCkge1xuICAgICAgICAgIC8vIFRoZSBmcmFtZXJhdGUgaXMgbm90IGludGVyYWN0aXZlIGFueW1vcmUuXG4gICAgICAgICAgLy8gV2UgYXJlIGJlbG93IHRoZSB0YXJnZXQgZnJhbWVyYXRlLlxuICAgICAgICAgIC8vIEJldHRlciBiYWlsIG91dC5cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfSAvLyBSZW1vdmUgdGhlIGV4Y2VzcyBhY2N1bXVsYXRvciwgc2luY2Ugd2UgbWF5IG5vdFxuICAgICAgLy8gaGF2ZSBoYWQgZW5vdWdoIHN1YnN0ZXBzIGF2YWlsYWJsZSB0byBjYXRjaCB1cFxuXG5cbiAgICAgIHRoaXMuYWNjdW11bGF0b3IgPSB0aGlzLmFjY3VtdWxhdG9yICUgZHQ7XG4gICAgICBjb25zdCB0ID0gdGhpcy5hY2N1bXVsYXRvciAvIGR0O1xuXG4gICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gdGhpcy5ib2RpZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgY29uc3QgYiA9IHRoaXMuYm9kaWVzW2pdO1xuICAgICAgICBiLnByZXZpb3VzUG9zaXRpb24ubGVycChiLnBvc2l0aW9uLCB0LCBiLmludGVycG9sYXRlZFBvc2l0aW9uKTtcbiAgICAgICAgYi5wcmV2aW91c1F1YXRlcm5pb24uc2xlcnAoYi5xdWF0ZXJuaW9uLCB0LCBiLmludGVycG9sYXRlZFF1YXRlcm5pb24pO1xuICAgICAgICBiLnByZXZpb3VzUXVhdGVybmlvbi5ub3JtYWxpemUoKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy50aW1lICs9IHRpbWVTaW5jZUxhc3RDYWxsZWQ7XG4gICAgfVxuICB9XG5cbiAgaW50ZXJuYWxTdGVwKGR0KSB7XG4gICAgdGhpcy5kdCA9IGR0O1xuICAgIGNvbnN0IGNvbnRhY3RzID0gdGhpcy5jb250YWN0cztcbiAgICBjb25zdCBwMSA9IFdvcmxkX3N0ZXBfcDE7XG4gICAgY29uc3QgcDIgPSBXb3JsZF9zdGVwX3AyO1xuICAgIGNvbnN0IE4gPSB0aGlzLm51bU9iamVjdHMoKTtcbiAgICBjb25zdCBib2RpZXMgPSB0aGlzLmJvZGllcztcbiAgICBjb25zdCBzb2x2ZXIgPSB0aGlzLnNvbHZlcjtcbiAgICBjb25zdCBncmF2aXR5ID0gdGhpcy5ncmF2aXR5O1xuICAgIGNvbnN0IGRvUHJvZmlsaW5nID0gdGhpcy5kb1Byb2ZpbGluZztcbiAgICBjb25zdCBwcm9maWxlID0gdGhpcy5wcm9maWxlO1xuICAgIGNvbnN0IERZTkFNSUMgPSBCb2R5LkRZTkFNSUM7XG4gICAgbGV0IHByb2ZpbGluZ1N0YXJ0ID0gLUluZmluaXR5O1xuICAgIGNvbnN0IGNvbnN0cmFpbnRzID0gdGhpcy5jb25zdHJhaW50cztcbiAgICBjb25zdCBmcmljdGlvbkVxdWF0aW9uUG9vbCA9IFdvcmxkX3N0ZXBfZnJpY3Rpb25FcXVhdGlvblBvb2w7XG4gICAgZ3Jhdml0eS5sZW5ndGgoKTtcbiAgICBjb25zdCBneCA9IGdyYXZpdHkueDtcbiAgICBjb25zdCBneSA9IGdyYXZpdHkueTtcbiAgICBjb25zdCBneiA9IGdyYXZpdHkuejtcbiAgICBsZXQgaSA9IDA7XG5cbiAgICBpZiAoZG9Qcm9maWxpbmcpIHtcbiAgICAgIHByb2ZpbGluZ1N0YXJ0ID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgfSAvLyBBZGQgZ3Jhdml0eSB0byBhbGwgb2JqZWN0c1xuXG5cbiAgICBmb3IgKGkgPSAwOyBpICE9PSBOOyBpKyspIHtcbiAgICAgIGNvbnN0IGJpID0gYm9kaWVzW2ldO1xuXG4gICAgICBpZiAoYmkudHlwZSA9PT0gRFlOQU1JQykge1xuICAgICAgICAvLyBPbmx5IGZvciBkeW5hbWljIGJvZGllc1xuICAgICAgICBjb25zdCBmID0gYmkuZm9yY2U7XG4gICAgICAgIGNvbnN0IG0gPSBiaS5tYXNzO1xuICAgICAgICBmLnggKz0gbSAqIGd4O1xuICAgICAgICBmLnkgKz0gbSAqIGd5O1xuICAgICAgICBmLnogKz0gbSAqIGd6O1xuICAgICAgfVxuICAgIH0gLy8gVXBkYXRlIHN1YnN5c3RlbXNcblxuXG4gICAgZm9yIChsZXQgaSA9IDAsIE5zdWJzeXN0ZW1zID0gdGhpcy5zdWJzeXN0ZW1zLmxlbmd0aDsgaSAhPT0gTnN1YnN5c3RlbXM7IGkrKykge1xuICAgICAgdGhpcy5zdWJzeXN0ZW1zW2ldLnVwZGF0ZSgpO1xuICAgIH0gLy8gQ29sbGlzaW9uIGRldGVjdGlvblxuXG5cbiAgICBpZiAoZG9Qcm9maWxpbmcpIHtcbiAgICAgIHByb2ZpbGluZ1N0YXJ0ID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgfVxuXG4gICAgcDEubGVuZ3RoID0gMDsgLy8gQ2xlYW4gdXAgcGFpciBhcnJheXMgZnJvbSBsYXN0IHN0ZXBcblxuICAgIHAyLmxlbmd0aCA9IDA7XG4gICAgdGhpcy5icm9hZHBoYXNlLmNvbGxpc2lvblBhaXJzKHRoaXMsIHAxLCBwMik7XG5cbiAgICBpZiAoZG9Qcm9maWxpbmcpIHtcbiAgICAgIHByb2ZpbGUuYnJvYWRwaGFzZSA9IHBlcmZvcm1hbmNlLm5vdygpIC0gcHJvZmlsaW5nU3RhcnQ7XG4gICAgfSAvLyBSZW1vdmUgY29uc3RyYWluZWQgcGFpcnMgd2l0aCBjb2xsaWRlQ29ubmVjdGVkID09IGZhbHNlXG5cblxuICAgIGxldCBOY29uc3RyYWludHMgPSBjb25zdHJhaW50cy5sZW5ndGg7XG5cbiAgICBmb3IgKGkgPSAwOyBpICE9PSBOY29uc3RyYWludHM7IGkrKykge1xuICAgICAgY29uc3QgYyA9IGNvbnN0cmFpbnRzW2ldO1xuXG4gICAgICBpZiAoIWMuY29sbGlkZUNvbm5lY3RlZCkge1xuICAgICAgICBmb3IgKGxldCBqID0gcDEubGVuZ3RoIC0gMTsgaiA+PSAwOyBqIC09IDEpIHtcbiAgICAgICAgICBpZiAoYy5ib2R5QSA9PT0gcDFbal0gJiYgYy5ib2R5QiA9PT0gcDJbal0gfHwgYy5ib2R5QiA9PT0gcDFbal0gJiYgYy5ib2R5QSA9PT0gcDJbal0pIHtcbiAgICAgICAgICAgIHAxLnNwbGljZShqLCAxKTtcbiAgICAgICAgICAgIHAyLnNwbGljZShqLCAxKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmNvbGxpc2lvbk1hdHJpeFRpY2soKTsgLy8gR2VuZXJhdGUgY29udGFjdHNcblxuICAgIGlmIChkb1Byb2ZpbGluZykge1xuICAgICAgcHJvZmlsaW5nU3RhcnQgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICB9XG5cbiAgICBjb25zdCBvbGRjb250YWN0cyA9IFdvcmxkX3N0ZXBfb2xkQ29udGFjdHM7XG4gICAgY29uc3QgTm9sZENvbnRhY3RzID0gY29udGFjdHMubGVuZ3RoO1xuXG4gICAgZm9yIChpID0gMDsgaSAhPT0gTm9sZENvbnRhY3RzOyBpKyspIHtcbiAgICAgIG9sZGNvbnRhY3RzLnB1c2goY29udGFjdHNbaV0pO1xuICAgIH1cblxuICAgIGNvbnRhY3RzLmxlbmd0aCA9IDA7IC8vIFRyYW5zZmVyIEZyaWN0aW9uRXF1YXRpb24gZnJvbSBjdXJyZW50IGxpc3QgdG8gdGhlIHBvb2wgZm9yIHJldXNlXG5cbiAgICBjb25zdCBOb2xkRnJpY3Rpb25FcXVhdGlvbnMgPSB0aGlzLmZyaWN0aW9uRXF1YXRpb25zLmxlbmd0aDtcblxuICAgIGZvciAoaSA9IDA7IGkgIT09IE5vbGRGcmljdGlvbkVxdWF0aW9uczsgaSsrKSB7XG4gICAgICBmcmljdGlvbkVxdWF0aW9uUG9vbC5wdXNoKHRoaXMuZnJpY3Rpb25FcXVhdGlvbnNbaV0pO1xuICAgIH1cblxuICAgIHRoaXMuZnJpY3Rpb25FcXVhdGlvbnMubGVuZ3RoID0gMDtcbiAgICB0aGlzLm5hcnJvd3BoYXNlLmdldENvbnRhY3RzKHAxLCBwMiwgdGhpcywgY29udGFjdHMsIG9sZGNvbnRhY3RzLCAvLyBUbyBiZSByZXVzZWRcbiAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25zLCBmcmljdGlvbkVxdWF0aW9uUG9vbCk7XG5cbiAgICBpZiAoZG9Qcm9maWxpbmcpIHtcbiAgICAgIHByb2ZpbGUubmFycm93cGhhc2UgPSBwZXJmb3JtYW5jZS5ub3coKSAtIHByb2ZpbGluZ1N0YXJ0O1xuICAgIH0gLy8gTG9vcCBvdmVyIGFsbCBjb2xsaXNpb25zXG5cblxuICAgIGlmIChkb1Byb2ZpbGluZykge1xuICAgICAgcHJvZmlsaW5nU3RhcnQgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICB9IC8vIEFkZCBhbGwgZnJpY3Rpb24gZXFzXG5cblxuICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLmZyaWN0aW9uRXF1YXRpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBzb2x2ZXIuYWRkRXF1YXRpb24odGhpcy5mcmljdGlvbkVxdWF0aW9uc1tpXSk7XG4gICAgfVxuXG4gICAgY29uc3QgbmNvbnRhY3RzID0gY29udGFjdHMubGVuZ3RoO1xuXG4gICAgZm9yIChsZXQgayA9IDA7IGsgIT09IG5jb250YWN0czsgaysrKSB7XG4gICAgICAvLyBDdXJyZW50IGNvbnRhY3RcbiAgICAgIGNvbnN0IGMgPSBjb250YWN0c1trXTsgLy8gR2V0IGN1cnJlbnQgY29sbGlzaW9uIGluZGVjZXNcblxuICAgICAgY29uc3QgYmkgPSBjLmJpO1xuICAgICAgY29uc3QgYmogPSBjLmJqO1xuICAgICAgY29uc3Qgc2kgPSBjLnNpO1xuICAgICAgY29uc3Qgc2ogPSBjLnNqOyAvLyBHZXQgY29sbGlzaW9uIHByb3BlcnRpZXNcblxuICAgICAgbGV0IGNtO1xuXG4gICAgICBpZiAoYmkubWF0ZXJpYWwgJiYgYmoubWF0ZXJpYWwpIHtcbiAgICAgICAgY20gPSB0aGlzLmdldENvbnRhY3RNYXRlcmlhbChiaS5tYXRlcmlhbCwgYmoubWF0ZXJpYWwpIHx8IHRoaXMuZGVmYXVsdENvbnRhY3RNYXRlcmlhbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNtID0gdGhpcy5kZWZhdWx0Q29udGFjdE1hdGVyaWFsO1xuICAgICAgfSAvLyBjLmVuYWJsZWQgPSBiaS5jb2xsaXNpb25SZXNwb25zZSAmJiBiai5jb2xsaXNpb25SZXNwb25zZSAmJiBzaS5jb2xsaXNpb25SZXNwb25zZSAmJiBzai5jb2xsaXNpb25SZXNwb25zZTtcblxuXG4gICAgICBjbS5mcmljdGlvbjsgLy8gYy5yZXN0aXR1dGlvbiA9IGNtLnJlc3RpdHV0aW9uO1xuICAgICAgLy8gSWYgZnJpY3Rpb24gb3IgcmVzdGl0dXRpb24gd2VyZSBzcGVjaWZpZWQgaW4gdGhlIG1hdGVyaWFsLCB1c2UgdGhlbVxuXG4gICAgICBpZiAoYmkubWF0ZXJpYWwgJiYgYmoubWF0ZXJpYWwpIHtcbiAgICAgICAgaWYgKGJpLm1hdGVyaWFsLmZyaWN0aW9uID49IDAgJiYgYmoubWF0ZXJpYWwuZnJpY3Rpb24gPj0gMCkge1xuICAgICAgICAgIGJpLm1hdGVyaWFsLmZyaWN0aW9uICogYmoubWF0ZXJpYWwuZnJpY3Rpb247XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoYmkubWF0ZXJpYWwucmVzdGl0dXRpb24gPj0gMCAmJiBiai5tYXRlcmlhbC5yZXN0aXR1dGlvbiA+PSAwKSB7XG4gICAgICAgICAgYy5yZXN0aXR1dGlvbiA9IGJpLm1hdGVyaWFsLnJlc3RpdHV0aW9uICogYmoubWF0ZXJpYWwucmVzdGl0dXRpb247XG4gICAgICAgIH1cbiAgICAgIH0gLy8gYy5zZXRTcG9va1BhcmFtcyhcbiAgICAgIC8vICAgICAgICAgICBjbS5jb250YWN0RXF1YXRpb25TdGlmZm5lc3MsXG4gICAgICAvLyAgICAgICAgICAgY20uY29udGFjdEVxdWF0aW9uUmVsYXhhdGlvbixcbiAgICAgIC8vICAgICAgICAgICBkdFxuICAgICAgLy8gICAgICAgKTtcblxuXG4gICAgICBzb2x2ZXIuYWRkRXF1YXRpb24oYyk7IC8vIC8vIEFkZCBmcmljdGlvbiBjb25zdHJhaW50IGVxdWF0aW9uXG4gICAgICAvLyBpZihtdSA+IDApe1xuICAgICAgLy8gXHQvLyBDcmVhdGUgMiB0YW5nZW50IGVxdWF0aW9uc1xuICAgICAgLy8gXHRjb25zdCBtdWcgPSBtdSAqIGdub3JtO1xuICAgICAgLy8gXHRjb25zdCByZWR1Y2VkTWFzcyA9IChiaS5pbnZNYXNzICsgYmouaW52TWFzcyk7XG4gICAgICAvLyBcdGlmKHJlZHVjZWRNYXNzID4gMCl7XG4gICAgICAvLyBcdFx0cmVkdWNlZE1hc3MgPSAxL3JlZHVjZWRNYXNzO1xuICAgICAgLy8gXHR9XG4gICAgICAvLyBcdGNvbnN0IHBvb2wgPSBmcmljdGlvbkVxdWF0aW9uUG9vbDtcbiAgICAgIC8vIFx0Y29uc3QgYzEgPSBwb29sLmxlbmd0aCA/IHBvb2wucG9wKCkgOiBuZXcgRnJpY3Rpb25FcXVhdGlvbihiaSxiaixtdWcqcmVkdWNlZE1hc3MpO1xuICAgICAgLy8gXHRjb25zdCBjMiA9IHBvb2wubGVuZ3RoID8gcG9vbC5wb3AoKSA6IG5ldyBGcmljdGlvbkVxdWF0aW9uKGJpLGJqLG11ZypyZWR1Y2VkTWFzcyk7XG4gICAgICAvLyBcdHRoaXMuZnJpY3Rpb25FcXVhdGlvbnMucHVzaChjMSwgYzIpO1xuICAgICAgLy8gXHRjMS5iaSA9IGMyLmJpID0gYmk7XG4gICAgICAvLyBcdGMxLmJqID0gYzIuYmogPSBiajtcbiAgICAgIC8vIFx0YzEubWluRm9yY2UgPSBjMi5taW5Gb3JjZSA9IC1tdWcqcmVkdWNlZE1hc3M7XG4gICAgICAvLyBcdGMxLm1heEZvcmNlID0gYzIubWF4Rm9yY2UgPSBtdWcqcmVkdWNlZE1hc3M7XG4gICAgICAvLyBcdC8vIENvcHkgb3ZlciB0aGUgcmVsYXRpdmUgdmVjdG9yc1xuICAgICAgLy8gXHRjMS5yaS5jb3B5KGMucmkpO1xuICAgICAgLy8gXHRjMS5yai5jb3B5KGMucmopO1xuICAgICAgLy8gXHRjMi5yaS5jb3B5KGMucmkpO1xuICAgICAgLy8gXHRjMi5yai5jb3B5KGMucmopO1xuICAgICAgLy8gXHQvLyBDb25zdHJ1Y3QgdGFuZ2VudHNcbiAgICAgIC8vIFx0Yy5uaS50YW5nZW50cyhjMS50LCBjMi50KTtcbiAgICAgIC8vICAgICAgICAgICAvLyBTZXQgc3Bvb2sgcGFyYW1zXG4gICAgICAvLyAgICAgICAgICAgYzEuc2V0U3Bvb2tQYXJhbXMoY20uZnJpY3Rpb25FcXVhdGlvblN0aWZmbmVzcywgY20uZnJpY3Rpb25FcXVhdGlvblJlbGF4YXRpb24sIGR0KTtcbiAgICAgIC8vICAgICAgICAgICBjMi5zZXRTcG9va1BhcmFtcyhjbS5mcmljdGlvbkVxdWF0aW9uU3RpZmZuZXNzLCBjbS5mcmljdGlvbkVxdWF0aW9uUmVsYXhhdGlvbiwgZHQpO1xuICAgICAgLy8gICAgICAgICAgIGMxLmVuYWJsZWQgPSBjMi5lbmFibGVkID0gYy5lbmFibGVkO1xuICAgICAgLy8gXHQvLyBBZGQgZXF1YXRpb25zIHRvIHNvbHZlclxuICAgICAgLy8gXHRzb2x2ZXIuYWRkRXF1YXRpb24oYzEpO1xuICAgICAgLy8gXHRzb2x2ZXIuYWRkRXF1YXRpb24oYzIpO1xuICAgICAgLy8gfVxuXG4gICAgICBpZiAoYmkuYWxsb3dTbGVlcCAmJiBiaS50eXBlID09PSBCb2R5LkRZTkFNSUMgJiYgYmkuc2xlZXBTdGF0ZSA9PT0gQm9keS5TTEVFUElORyAmJiBiai5zbGVlcFN0YXRlID09PSBCb2R5LkFXQUtFICYmIGJqLnR5cGUgIT09IEJvZHkuU1RBVElDKSB7XG4gICAgICAgIGNvbnN0IHNwZWVkU3F1YXJlZEIgPSBiai52ZWxvY2l0eS5sZW5ndGhTcXVhcmVkKCkgKyBiai5hbmd1bGFyVmVsb2NpdHkubGVuZ3RoU3F1YXJlZCgpO1xuICAgICAgICBjb25zdCBzcGVlZExpbWl0U3F1YXJlZEIgPSBiai5zbGVlcFNwZWVkTGltaXQgKiogMjtcblxuICAgICAgICBpZiAoc3BlZWRTcXVhcmVkQiA+PSBzcGVlZExpbWl0U3F1YXJlZEIgKiAyKSB7XG4gICAgICAgICAgYmkud2FrZVVwQWZ0ZXJOYXJyb3dwaGFzZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGJqLmFsbG93U2xlZXAgJiYgYmoudHlwZSA9PT0gQm9keS5EWU5BTUlDICYmIGJqLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcgJiYgYmkuc2xlZXBTdGF0ZSA9PT0gQm9keS5BV0FLRSAmJiBiaS50eXBlICE9PSBCb2R5LlNUQVRJQykge1xuICAgICAgICBjb25zdCBzcGVlZFNxdWFyZWRBID0gYmkudmVsb2NpdHkubGVuZ3RoU3F1YXJlZCgpICsgYmkuYW5ndWxhclZlbG9jaXR5Lmxlbmd0aFNxdWFyZWQoKTtcbiAgICAgICAgY29uc3Qgc3BlZWRMaW1pdFNxdWFyZWRBID0gYmkuc2xlZXBTcGVlZExpbWl0ICoqIDI7XG5cbiAgICAgICAgaWYgKHNwZWVkU3F1YXJlZEEgPj0gc3BlZWRMaW1pdFNxdWFyZWRBICogMikge1xuICAgICAgICAgIGJqLndha2VVcEFmdGVyTmFycm93cGhhc2UgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9IC8vIE5vdyB3ZSBrbm93IHRoYXQgaSBhbmQgaiBhcmUgaW4gY29udGFjdC4gU2V0IGNvbGxpc2lvbiBtYXRyaXggc3RhdGVcblxuXG4gICAgICB0aGlzLmNvbGxpc2lvbk1hdHJpeC5zZXQoYmksIGJqLCB0cnVlKTtcblxuICAgICAgaWYgKCF0aGlzLmNvbGxpc2lvbk1hdHJpeFByZXZpb3VzLmdldChiaSwgYmopKSB7XG4gICAgICAgIC8vIEZpcnN0IGNvbnRhY3QhXG4gICAgICAgIC8vIFdlIHJldXNlIHRoZSBjb2xsaWRlRXZlbnQgb2JqZWN0LCBvdGhlcndpc2Ugd2Ugd2lsbCBlbmQgdXAgY3JlYXRpbmcgbmV3IG9iamVjdHMgZm9yIGVhY2ggbmV3IGNvbnRhY3QsIGV2ZW4gaWYgdGhlcmUncyBubyBldmVudCBsaXN0ZW5lciBhdHRhY2hlZC5cbiAgICAgICAgV29ybGRfc3RlcF9jb2xsaWRlRXZlbnQuYm9keSA9IGJqO1xuICAgICAgICBXb3JsZF9zdGVwX2NvbGxpZGVFdmVudC5jb250YWN0ID0gYztcbiAgICAgICAgYmkuZGlzcGF0Y2hFdmVudChXb3JsZF9zdGVwX2NvbGxpZGVFdmVudCk7XG4gICAgICAgIFdvcmxkX3N0ZXBfY29sbGlkZUV2ZW50LmJvZHkgPSBiaTtcbiAgICAgICAgYmouZGlzcGF0Y2hFdmVudChXb3JsZF9zdGVwX2NvbGxpZGVFdmVudCk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuYm9keU92ZXJsYXBLZWVwZXIuc2V0KGJpLmlkLCBiai5pZCk7XG4gICAgICB0aGlzLnNoYXBlT3ZlcmxhcEtlZXBlci5zZXQoc2kuaWQsIHNqLmlkKTtcbiAgICB9XG5cbiAgICB0aGlzLmVtaXRDb250YWN0RXZlbnRzKCk7XG5cbiAgICBpZiAoZG9Qcm9maWxpbmcpIHtcbiAgICAgIHByb2ZpbGUubWFrZUNvbnRhY3RDb25zdHJhaW50cyA9IHBlcmZvcm1hbmNlLm5vdygpIC0gcHJvZmlsaW5nU3RhcnQ7XG4gICAgICBwcm9maWxpbmdTdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgIH0gLy8gV2FrZSB1cCBib2RpZXNcblxuXG4gICAgZm9yIChpID0gMDsgaSAhPT0gTjsgaSsrKSB7XG4gICAgICBjb25zdCBiaSA9IGJvZGllc1tpXTtcblxuICAgICAgaWYgKGJpLndha2VVcEFmdGVyTmFycm93cGhhc2UpIHtcbiAgICAgICAgYmkud2FrZVVwKCk7XG4gICAgICAgIGJpLndha2VVcEFmdGVyTmFycm93cGhhc2UgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9IC8vIEFkZCB1c2VyLWFkZGVkIGNvbnN0cmFpbnRzXG5cblxuICAgIE5jb25zdHJhaW50cyA9IGNvbnN0cmFpbnRzLmxlbmd0aDtcblxuICAgIGZvciAoaSA9IDA7IGkgIT09IE5jb25zdHJhaW50czsgaSsrKSB7XG4gICAgICBjb25zdCBjID0gY29uc3RyYWludHNbaV07XG4gICAgICBjLnVwZGF0ZSgpO1xuXG4gICAgICBmb3IgKGxldCBqID0gMCwgTmVxID0gYy5lcXVhdGlvbnMubGVuZ3RoOyBqICE9PSBOZXE7IGorKykge1xuICAgICAgICBjb25zdCBlcSA9IGMuZXF1YXRpb25zW2pdO1xuICAgICAgICBzb2x2ZXIuYWRkRXF1YXRpb24oZXEpO1xuICAgICAgfVxuICAgIH0gLy8gU29sdmUgdGhlIGNvbnN0cmFpbmVkIHN5c3RlbVxuXG5cbiAgICBzb2x2ZXIuc29sdmUoZHQsIHRoaXMpO1xuXG4gICAgaWYgKGRvUHJvZmlsaW5nKSB7XG4gICAgICBwcm9maWxlLnNvbHZlID0gcGVyZm9ybWFuY2Uubm93KCkgLSBwcm9maWxpbmdTdGFydDtcbiAgICB9IC8vIFJlbW92ZSBhbGwgY29udGFjdHMgZnJvbSBzb2x2ZXJcblxuXG4gICAgc29sdmVyLnJlbW92ZUFsbEVxdWF0aW9ucygpOyAvLyBBcHBseSBkYW1waW5nLCBzZWUgaHR0cDovL2NvZGUuZ29vZ2xlLmNvbS9wL2J1bGxldC9pc3N1ZXMvZGV0YWlsP2lkPTc0IGZvciBkZXRhaWxzXG5cbiAgICBjb25zdCBwb3cgPSBNYXRoLnBvdztcblxuICAgIGZvciAoaSA9IDA7IGkgIT09IE47IGkrKykge1xuICAgICAgY29uc3QgYmkgPSBib2RpZXNbaV07XG5cbiAgICAgIGlmIChiaS50eXBlICYgRFlOQU1JQykge1xuICAgICAgICAvLyBPbmx5IGZvciBkeW5hbWljIGJvZGllc1xuICAgICAgICBjb25zdCBsZCA9IHBvdygxLjAgLSBiaS5saW5lYXJEYW1waW5nLCBkdCk7XG4gICAgICAgIGNvbnN0IHYgPSBiaS52ZWxvY2l0eTtcbiAgICAgICAgdi5zY2FsZShsZCwgdik7XG4gICAgICAgIGNvbnN0IGF2ID0gYmkuYW5ndWxhclZlbG9jaXR5O1xuXG4gICAgICAgIGlmIChhdikge1xuICAgICAgICAgIGNvbnN0IGFkID0gcG93KDEuMCAtIGJpLmFuZ3VsYXJEYW1waW5nLCBkdCk7XG4gICAgICAgICAgYXYuc2NhbGUoYWQsIGF2KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuZGlzcGF0Y2hFdmVudChXb3JsZF9zdGVwX3ByZVN0ZXBFdmVudCk7IC8vIEludm9rZSBwcmUtc3RlcCBjYWxsYmFja3NcblxuICAgIGZvciAoaSA9IDA7IGkgIT09IE47IGkrKykge1xuICAgICAgY29uc3QgYmkgPSBib2RpZXNbaV07XG5cbiAgICAgIGlmIChiaS5wcmVTdGVwKSB7XG4gICAgICAgIGJpLnByZVN0ZXAuY2FsbChiaSk7XG4gICAgICB9XG4gICAgfSAvLyBMZWFwIGZyb2dcbiAgICAvLyB2bmV3ID0gdiArIGgqZi9tXG4gICAgLy8geG5ldyA9IHggKyBoKnZuZXdcblxuXG4gICAgaWYgKGRvUHJvZmlsaW5nKSB7XG4gICAgICBwcm9maWxpbmdTdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgIH1cblxuICAgIGNvbnN0IHN0ZXBudW1iZXIgPSB0aGlzLnN0ZXBudW1iZXI7XG4gICAgY29uc3QgcXVhdE5vcm1hbGl6ZSA9IHN0ZXBudW1iZXIgJSAodGhpcy5xdWF0Tm9ybWFsaXplU2tpcCArIDEpID09PSAwO1xuICAgIGNvbnN0IHF1YXROb3JtYWxpemVGYXN0ID0gdGhpcy5xdWF0Tm9ybWFsaXplRmFzdDtcblxuICAgIGZvciAoaSA9IDA7IGkgIT09IE47IGkrKykge1xuICAgICAgYm9kaWVzW2ldLmludGVncmF0ZShkdCwgcXVhdE5vcm1hbGl6ZSwgcXVhdE5vcm1hbGl6ZUZhc3QpO1xuICAgIH1cblxuICAgIHRoaXMuY2xlYXJGb3JjZXMoKTtcbiAgICB0aGlzLmJyb2FkcGhhc2UuZGlydHkgPSB0cnVlO1xuXG4gICAgaWYgKGRvUHJvZmlsaW5nKSB7XG4gICAgICBwcm9maWxlLmludGVncmF0ZSA9IHBlcmZvcm1hbmNlLm5vdygpIC0gcHJvZmlsaW5nU3RhcnQ7XG4gICAgfSAvLyBVcGRhdGUgc3RlcCBudW1iZXJcblxuXG4gICAgdGhpcy5zdGVwbnVtYmVyICs9IDE7XG4gICAgdGhpcy5kaXNwYXRjaEV2ZW50KFdvcmxkX3N0ZXBfcG9zdFN0ZXBFdmVudCk7IC8vIEludm9rZSBwb3N0LXN0ZXAgY2FsbGJhY2tzXG5cbiAgICBmb3IgKGkgPSAwOyBpICE9PSBOOyBpKyspIHtcbiAgICAgIGNvbnN0IGJpID0gYm9kaWVzW2ldO1xuICAgICAgY29uc3QgcG9zdFN0ZXAgPSBiaS5wb3N0U3RlcDtcblxuICAgICAgaWYgKHBvc3RTdGVwKSB7XG4gICAgICAgIHBvc3RTdGVwLmNhbGwoYmkpO1xuICAgICAgfVxuICAgIH0gLy8gU2xlZXBpbmcgdXBkYXRlXG5cblxuICAgIGxldCBoYXNBY3RpdmVCb2RpZXMgPSB0cnVlO1xuXG4gICAgaWYgKHRoaXMuYWxsb3dTbGVlcCkge1xuICAgICAgaGFzQWN0aXZlQm9kaWVzID0gZmFsc2U7XG5cbiAgICAgIGZvciAoaSA9IDA7IGkgIT09IE47IGkrKykge1xuICAgICAgICBjb25zdCBiaSA9IGJvZGllc1tpXTtcbiAgICAgICAgYmkuc2xlZXBUaWNrKHRoaXMudGltZSk7XG5cbiAgICAgICAgaWYgKGJpLnNsZWVwU3RhdGUgIT09IEJvZHkuU0xFRVBJTkcpIHtcbiAgICAgICAgICBoYXNBY3RpdmVCb2RpZXMgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5oYXNBY3RpdmVCb2RpZXMgPSBoYXNBY3RpdmVCb2RpZXM7XG4gIH1cblxuICBlbWl0Q29udGFjdEV2ZW50cygpIHtcbiAgICBjb25zdCBoYXNCZWdpbkNvbnRhY3QgPSB0aGlzLmhhc0FueUV2ZW50TGlzdGVuZXIoJ2JlZ2luQ29udGFjdCcpO1xuICAgIGNvbnN0IGhhc0VuZENvbnRhY3QgPSB0aGlzLmhhc0FueUV2ZW50TGlzdGVuZXIoJ2VuZENvbnRhY3QnKTtcblxuICAgIGlmIChoYXNCZWdpbkNvbnRhY3QgfHwgaGFzRW5kQ29udGFjdCkge1xuICAgICAgdGhpcy5ib2R5T3ZlcmxhcEtlZXBlci5nZXREaWZmKGFkZGl0aW9ucywgcmVtb3ZhbHMpO1xuICAgIH1cblxuICAgIGlmIChoYXNCZWdpbkNvbnRhY3QpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gYWRkaXRpb25zLmxlbmd0aDsgaSA8IGw7IGkgKz0gMikge1xuICAgICAgICBiZWdpbkNvbnRhY3RFdmVudC5ib2R5QSA9IHRoaXMuZ2V0Qm9keUJ5SWQoYWRkaXRpb25zW2ldKTtcbiAgICAgICAgYmVnaW5Db250YWN0RXZlbnQuYm9keUIgPSB0aGlzLmdldEJvZHlCeUlkKGFkZGl0aW9uc1tpICsgMV0pO1xuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoYmVnaW5Db250YWN0RXZlbnQpO1xuICAgICAgfVxuXG4gICAgICBiZWdpbkNvbnRhY3RFdmVudC5ib2R5QSA9IGJlZ2luQ29udGFjdEV2ZW50LmJvZHlCID0gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAoaGFzRW5kQ29udGFjdCkge1xuICAgICAgZm9yIChsZXQgaSA9IDAsIGwgPSByZW1vdmFscy5sZW5ndGg7IGkgPCBsOyBpICs9IDIpIHtcbiAgICAgICAgZW5kQ29udGFjdEV2ZW50LmJvZHlBID0gdGhpcy5nZXRCb2R5QnlJZChyZW1vdmFsc1tpXSk7XG4gICAgICAgIGVuZENvbnRhY3RFdmVudC5ib2R5QiA9IHRoaXMuZ2V0Qm9keUJ5SWQocmVtb3ZhbHNbaSArIDFdKTtcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGVuZENvbnRhY3RFdmVudCk7XG4gICAgICB9XG5cbiAgICAgIGVuZENvbnRhY3RFdmVudC5ib2R5QSA9IGVuZENvbnRhY3RFdmVudC5ib2R5QiA9IG51bGw7XG4gICAgfVxuXG4gICAgYWRkaXRpb25zLmxlbmd0aCA9IHJlbW92YWxzLmxlbmd0aCA9IDA7XG4gICAgY29uc3QgaGFzQmVnaW5TaGFwZUNvbnRhY3QgPSB0aGlzLmhhc0FueUV2ZW50TGlzdGVuZXIoJ2JlZ2luU2hhcGVDb250YWN0Jyk7XG4gICAgY29uc3QgaGFzRW5kU2hhcGVDb250YWN0ID0gdGhpcy5oYXNBbnlFdmVudExpc3RlbmVyKCdlbmRTaGFwZUNvbnRhY3QnKTtcblxuICAgIGlmIChoYXNCZWdpblNoYXBlQ29udGFjdCB8fCBoYXNFbmRTaGFwZUNvbnRhY3QpIHtcbiAgICAgIHRoaXMuc2hhcGVPdmVybGFwS2VlcGVyLmdldERpZmYoYWRkaXRpb25zLCByZW1vdmFscyk7XG4gICAgfVxuXG4gICAgaWYgKGhhc0JlZ2luU2hhcGVDb250YWN0KSB7XG4gICAgICBmb3IgKGxldCBpID0gMCwgbCA9IGFkZGl0aW9ucy5sZW5ndGg7IGkgPCBsOyBpICs9IDIpIHtcbiAgICAgICAgY29uc3Qgc2hhcGVBID0gdGhpcy5nZXRTaGFwZUJ5SWQoYWRkaXRpb25zW2ldKTtcbiAgICAgICAgY29uc3Qgc2hhcGVCID0gdGhpcy5nZXRTaGFwZUJ5SWQoYWRkaXRpb25zW2kgKyAxXSk7XG4gICAgICAgIGJlZ2luU2hhcGVDb250YWN0RXZlbnQuc2hhcGVBID0gc2hhcGVBO1xuICAgICAgICBiZWdpblNoYXBlQ29udGFjdEV2ZW50LnNoYXBlQiA9IHNoYXBlQjtcbiAgICAgICAgaWYgKHNoYXBlQSkgYmVnaW5TaGFwZUNvbnRhY3RFdmVudC5ib2R5QSA9IHNoYXBlQS5ib2R5O1xuICAgICAgICBpZiAoc2hhcGVCKSBiZWdpblNoYXBlQ29udGFjdEV2ZW50LmJvZHlCID0gc2hhcGVCLmJvZHk7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChiZWdpblNoYXBlQ29udGFjdEV2ZW50KTtcbiAgICAgIH1cblxuICAgICAgYmVnaW5TaGFwZUNvbnRhY3RFdmVudC5ib2R5QSA9IGJlZ2luU2hhcGVDb250YWN0RXZlbnQuYm9keUIgPSBiZWdpblNoYXBlQ29udGFjdEV2ZW50LnNoYXBlQSA9IGJlZ2luU2hhcGVDb250YWN0RXZlbnQuc2hhcGVCID0gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAoaGFzRW5kU2hhcGVDb250YWN0KSB7XG4gICAgICBmb3IgKGxldCBpID0gMCwgbCA9IHJlbW92YWxzLmxlbmd0aDsgaSA8IGw7IGkgKz0gMikge1xuICAgICAgICBjb25zdCBzaGFwZUEgPSB0aGlzLmdldFNoYXBlQnlJZChyZW1vdmFsc1tpXSk7XG4gICAgICAgIGNvbnN0IHNoYXBlQiA9IHRoaXMuZ2V0U2hhcGVCeUlkKHJlbW92YWxzW2kgKyAxXSk7XG4gICAgICAgIGVuZFNoYXBlQ29udGFjdEV2ZW50LnNoYXBlQSA9IHNoYXBlQTtcbiAgICAgICAgZW5kU2hhcGVDb250YWN0RXZlbnQuc2hhcGVCID0gc2hhcGVCO1xuICAgICAgICBpZiAoc2hhcGVBKSBlbmRTaGFwZUNvbnRhY3RFdmVudC5ib2R5QSA9IHNoYXBlQS5ib2R5O1xuICAgICAgICBpZiAoc2hhcGVCKSBlbmRTaGFwZUNvbnRhY3RFdmVudC5ib2R5QiA9IHNoYXBlQi5ib2R5O1xuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZW5kU2hhcGVDb250YWN0RXZlbnQpO1xuICAgICAgfVxuXG4gICAgICBlbmRTaGFwZUNvbnRhY3RFdmVudC5ib2R5QSA9IGVuZFNoYXBlQ29udGFjdEV2ZW50LmJvZHlCID0gZW5kU2hhcGVDb250YWN0RXZlbnQuc2hhcGVBID0gZW5kU2hhcGVDb250YWN0RXZlbnQuc2hhcGVCID0gbnVsbDtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFNldHMgYWxsIGJvZHkgZm9yY2VzIGluIHRoZSB3b3JsZCB0byB6ZXJvLlxuICAgKi9cblxuXG4gIGNsZWFyRm9yY2VzKCkge1xuICAgIGNvbnN0IGJvZGllcyA9IHRoaXMuYm9kaWVzO1xuICAgIGNvbnN0IE4gPSBib2RpZXMubGVuZ3RoO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE47IGkrKykge1xuICAgICAgY29uc3QgYiA9IGJvZGllc1tpXTtcbiAgICAgIGIuZm9yY2U7XG4gICAgICBiLnRvcnF1ZTtcbiAgICAgIGIuZm9yY2Uuc2V0KDAsIDAsIDApO1xuICAgICAgYi50b3JxdWUuc2V0KDAsIDAsIDApO1xuICAgIH1cbiAgfVxuXG59IC8vIFRlbXAgc3R1ZmZcblxubmV3IEFBQkIoKTtcbmNvbnN0IHRtcFJheSA9IG5ldyBSYXkoKTsgLy8gcGVyZm9ybWFuY2Uubm93KCkgZmFsbGJhY2sgb24gRGF0ZS5ub3coKVxuXG5jb25zdCBwZXJmb3JtYW5jZSA9IGdsb2JhbFRoaXMucGVyZm9ybWFuY2UgfHwge307XG5cbmlmICghcGVyZm9ybWFuY2Uubm93KSB7XG4gIGxldCBub3dPZmZzZXQgPSBEYXRlLm5vdygpO1xuXG4gIGlmIChwZXJmb3JtYW5jZS50aW1pbmcgJiYgcGVyZm9ybWFuY2UudGltaW5nLm5hdmlnYXRpb25TdGFydCkge1xuICAgIG5vd09mZnNldCA9IHBlcmZvcm1hbmNlLnRpbWluZy5uYXZpZ2F0aW9uU3RhcnQ7XG4gIH1cblxuICBwZXJmb3JtYW5jZS5ub3cgPSAoKSA9PiBEYXRlLm5vdygpIC0gbm93T2Zmc2V0O1xufVxuLy8gUmV1c2FibGUgZXZlbnQgb2JqZWN0cyB0byBzYXZlIG1lbW9yeS5cblxuY29uc3QgV29ybGRfc3RlcF9wb3N0U3RlcEV2ZW50ID0ge1xuICB0eXBlOiAncG9zdFN0ZXAnXG59OyAvLyBEaXNwYXRjaGVkIGJlZm9yZSB0aGUgd29ybGQgc3RlcHMgZm9yd2FyZCBpbiB0aW1lLlxuXG5jb25zdCBXb3JsZF9zdGVwX3ByZVN0ZXBFdmVudCA9IHtcbiAgdHlwZTogJ3ByZVN0ZXAnXG59O1xuY29uc3QgV29ybGRfc3RlcF9jb2xsaWRlRXZlbnQgPSB7XG4gIHR5cGU6IEJvZHkuQ09MTElERV9FVkVOVF9OQU1FLFxuICBib2R5OiBudWxsLFxuICBjb250YWN0OiBudWxsXG59OyAvLyBQb29scyBmb3IgdW51c2VkIG9iamVjdHNcblxuY29uc3QgV29ybGRfc3RlcF9vbGRDb250YWN0cyA9IFtdO1xuY29uc3QgV29ybGRfc3RlcF9mcmljdGlvbkVxdWF0aW9uUG9vbCA9IFtdOyAvLyBSZXVzYWJsZSBhcnJheXMgZm9yIGNvbGxpc2lvbiBwYWlyc1xuXG5jb25zdCBXb3JsZF9zdGVwX3AxID0gW107XG5jb25zdCBXb3JsZF9zdGVwX3AyID0gW107IC8vIFN0dWZmIGZvciBlbWl0Q29udGFjdEV2ZW50c1xuXG5jb25zdCBhZGRpdGlvbnMgPSBbXTtcbmNvbnN0IHJlbW92YWxzID0gW107XG5jb25zdCBiZWdpbkNvbnRhY3RFdmVudCA9IHtcbiAgdHlwZTogJ2JlZ2luQ29udGFjdCcsXG4gIGJvZHlBOiBudWxsLFxuICBib2R5QjogbnVsbFxufTtcbmNvbnN0IGVuZENvbnRhY3RFdmVudCA9IHtcbiAgdHlwZTogJ2VuZENvbnRhY3QnLFxuICBib2R5QTogbnVsbCxcbiAgYm9keUI6IG51bGxcbn07XG5jb25zdCBiZWdpblNoYXBlQ29udGFjdEV2ZW50ID0ge1xuICB0eXBlOiAnYmVnaW5TaGFwZUNvbnRhY3QnLFxuICBib2R5QTogbnVsbCxcbiAgYm9keUI6IG51bGwsXG4gIHNoYXBlQTogbnVsbCxcbiAgc2hhcGVCOiBudWxsXG59O1xuY29uc3QgZW5kU2hhcGVDb250YWN0RXZlbnQgPSB7XG4gIHR5cGU6ICdlbmRTaGFwZUNvbnRhY3QnLFxuICBib2R5QTogbnVsbCxcbiAgYm9keUI6IG51bGwsXG4gIHNoYXBlQTogbnVsbCxcbiAgc2hhcGVCOiBudWxsXG59O1xuXG5leHBvcnQgeyBBQUJCLCBBcnJheUNvbGxpc2lvbk1hdHJpeCwgQk9EWV9TTEVFUF9TVEFURVMsIEJPRFlfVFlQRVMsIEJvZHksIEJveCwgQnJvYWRwaGFzZSwgQ09MTElTSU9OX1RZUEVTLCBDb25lVHdpc3RDb25zdHJhaW50LCBDb25zdHJhaW50LCBDb250YWN0RXF1YXRpb24sIENvbnRhY3RNYXRlcmlhbCwgQ29udmV4UG9seWhlZHJvbiwgQ3lsaW5kZXIsIERpc3RhbmNlQ29uc3RyYWludCwgRXF1YXRpb24sIEV2ZW50VGFyZ2V0LCBGcmljdGlvbkVxdWF0aW9uLCBHU1NvbHZlciwgR3JpZEJyb2FkcGhhc2UsIEhlaWdodGZpZWxkLCBIaW5nZUNvbnN0cmFpbnQsIEphY29iaWFuRWxlbWVudCwgTG9ja0NvbnN0cmFpbnQsIE1hdDMsIE1hdGVyaWFsLCBOYWl2ZUJyb2FkcGhhc2UsIE5hcnJvd3BoYXNlLCBPYmplY3RDb2xsaXNpb25NYXRyaXgsIFBhcnRpY2xlLCBQbGFuZSwgUG9pbnRUb1BvaW50Q29uc3RyYWludCwgUG9vbCwgUXVhdGVybmlvbiwgUkFZX01PREVTLCBSYXksIFJheWNhc3RSZXN1bHQsIFJheWNhc3RWZWhpY2xlLCBSaWdpZFZlaGljbGUsIFJvdGF0aW9uYWxFcXVhdGlvbiwgUm90YXRpb25hbE1vdG9yRXF1YXRpb24sIFNBUEJyb2FkcGhhc2UsIFNIQVBFX1RZUEVTLCBTUEhTeXN0ZW0sIFNoYXBlLCBTb2x2ZXIsIFNwaGVyZSwgU3BsaXRTb2x2ZXIsIFNwcmluZywgVHJhbnNmb3JtLCBUcmltZXNoLCBWZWMzLCBWZWMzUG9vbCwgV2hlZWxJbmZvLCBXb3JsZCB9O1xuIiwiaW1wb3J0IHtcbiAgQm9keSxcbiAgQm94LFxuICBDb252ZXhQb2x5aGVkcm9uLFxuICBDeWxpbmRlcixcbiAgSGVpZ2h0ZmllbGQsXG4gIE1hdGVyaWFsLFxuICBQYXJ0aWNsZSxcbiAgUGxhbmUsXG4gIFF1YXRlcm5pb24sXG4gIFNwaGVyZSxcbiAgVHJpbWVzaCxcbiAgVmVjMyxcbn0gZnJvbSAnY2Fubm9uLWVzJ1xuXG5jb25zdCBtYWtlVmVjMyA9IChbeCwgeSwgel0pID0+IG5ldyBWZWMzKHgsIHksIHopXG5jb25zdCBwcmVwYXJlU3BoZXJlID0gKGFyZ3MpID0+IChBcnJheS5pc0FycmF5KGFyZ3MpID8gYXJncyA6IFthcmdzXSlcbmNvbnN0IHByZXBhcmVDb252ZXhQb2x5aGVkcm9uID0gKFt2LCBmYWNlcywgbiwgYSwgYm91bmRpbmdTcGhlcmVSYWRpdXNdKSA9PiBbXG4gIHtcbiAgICB2ZXJ0aWNlczogdiA/IHYubWFwKG1ha2VWZWMzKSA6IHVuZGVmaW5lZCxcbiAgICBmYWNlcyxcbiAgICBub3JtYWxzOiBuID8gbi5tYXAobWFrZVZlYzMpIDogdW5kZWZpbmVkLFxuICAgIGF4ZXM6IGEgPyBhLm1hcChtYWtlVmVjMykgOiB1bmRlZmluZWQsXG4gICAgYm91bmRpbmdTcGhlcmVSYWRpdXMsXG4gIH0sXG5dXG5cbmZ1bmN0aW9uIGNyZWF0ZVNoYXBlKHR5cGUsIGFyZ3MpIHtcbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSAnQm94JzpcbiAgICAgIHJldHVybiBuZXcgQm94KG5ldyBWZWMzKC4uLmFyZ3MubWFwKCh2KSA9PiB2IC8gMikpKSAvLyBleHRlbnRzID0+IGhhbGZFeHRlbnRzXG4gICAgY2FzZSAnQ29udmV4UG9seWhlZHJvbic6XG4gICAgICByZXR1cm4gbmV3IENvbnZleFBvbHloZWRyb24oLi4ucHJlcGFyZUNvbnZleFBvbHloZWRyb24oYXJncykpXG4gICAgY2FzZSAnQ3lsaW5kZXInOlxuICAgICAgcmV0dXJuIG5ldyBDeWxpbmRlciguLi5hcmdzKSAvLyBbIHJhZGl1c1RvcCwgcmFkaXVzQm90dG9tLCBoZWlnaHQsIG51bVNlZ21lbnRzIF0gPSBhcmdzXG4gICAgY2FzZSAnSGVpZ2h0ZmllbGQnOlxuICAgICAgcmV0dXJuIG5ldyBIZWlnaHRmaWVsZCguLi5hcmdzKSAvLyBbIEFycmF5IGRhdGEsIG9wdGlvbnM6IHttaW5WYWx1ZSwgbWF4VmFsdWUsIGVsZW1lbnRTaXplfSAgXSA9IGFyZ3NcbiAgICBjYXNlICdQYXJ0aWNsZSc6XG4gICAgICByZXR1cm4gbmV3IFBhcnRpY2xlKCkgLy8gbm8gYXJnc1xuICAgIGNhc2UgJ1BsYW5lJzpcbiAgICAgIHJldHVybiBuZXcgUGxhbmUoKSAvLyBubyBhcmdzLCBpbmZpbml0ZSB4IGFuZCB5XG4gICAgY2FzZSAnU3BoZXJlJzpcbiAgICAgIHJldHVybiBuZXcgU3BoZXJlKC4uLnByZXBhcmVTcGhlcmUoYXJncykpIC8vIHJhZGl1cyA9IGFyZ3NcbiAgICBjYXNlICdUcmltZXNoJzpcbiAgICAgIHJldHVybiBuZXcgVHJpbWVzaCguLi5hcmdzKSAvLyBbdmVydGljZXMsIGluZGljZXNdID0gYXJnc1xuICB9XG59XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB1dWlkIHtzdHJpbmd9XG4gKiBAcGFyYW0gcHJvcHMge0JvZHlQcm9wc31cbiAqIEBwYXJhbSB0eXBlIHtCb2R5U2hhcGVUeXBlfVxuICogQHJldHVybiB7bW9kdWxlOm9iamVjdHMvQm9keS5Cb2R5fVxuICovXG5jb25zdCBwcm9wc1RvQm9keSA9ICh1dWlkLCBwcm9wcywgdHlwZSkgPT4ge1xuICBjb25zdCB7XG4gICAgYXJncyA9IFtdLFxuICAgIHBvc2l0aW9uID0gWzAsIDAsIDBdLFxuICAgIHJvdGF0aW9uID0gWzAsIDAsIDBdLFxuICAgIHZlbG9jaXR5ID0gWzAsIDAsIDBdLFxuICAgIGFuZ3VsYXJWZWxvY2l0eSA9IFswLCAwLCAwXSxcbiAgICBsaW5lYXJGYWN0b3IgPSBbMSwgMSwgMV0sXG4gICAgYW5ndWxhckZhY3RvciA9IFsxLCAxLCAxXSxcbiAgICB0eXBlOiBib2R5VHlwZSxcbiAgICBtYXNzLFxuICAgIG1hdGVyaWFsLFxuICAgIHNoYXBlcyxcbiAgICBvbkNvbGxpZGUsXG4gICAgY29sbGlzaW9uUmVzcG9uc2UsXG4gICAgLi4uZXh0cmFcbiAgfSA9IHByb3BzXG5cbiAgY29uc3QgYm9keSA9IG5ldyBCb2R5KHtcbiAgICAuLi5leHRyYSxcbiAgICBtYXNzOiBib2R5VHlwZSA9PT0gJ1N0YXRpYycgPyAwIDogbWFzcyxcbiAgICB0eXBlOiBib2R5VHlwZSA/IEJvZHlbYm9keVR5cGUudG9VcHBlckNhc2UoKV0gOiB1bmRlZmluZWQsXG4gICAgbWF0ZXJpYWw6IG1hdGVyaWFsID8gbmV3IE1hdGVyaWFsKG1hdGVyaWFsKSA6IHVuZGVmaW5lZCxcbiAgfSlcbiAgYm9keS51dWlkID0gdXVpZFxuXG4gIGlmIChjb2xsaXNpb25SZXNwb25zZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgYm9keS5jb2xsaXNpb25SZXNwb25zZSA9IGNvbGxpc2lvblJlc3BvbnNlXG4gIH1cblxuICBpZiAodHlwZSA9PT0gJ0NvbXBvdW5kJykge1xuICAgIHNoYXBlcy5mb3JFYWNoKCh7IHR5cGUsIGFyZ3MsIHBvc2l0aW9uLCByb3RhdGlvbiwgbWF0ZXJpYWwsIC4uLmV4dHJhIH0pID0+IHtcbiAgICAgIGNvbnN0IHNoYXBlQm9keSA9IGJvZHkuYWRkU2hhcGUoXG4gICAgICAgIGNyZWF0ZVNoYXBlKHR5cGUsIGFyZ3MpLFxuICAgICAgICBwb3NpdGlvbiA/IG5ldyBWZWMzKC4uLnBvc2l0aW9uKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgcm90YXRpb24gPyBuZXcgUXVhdGVybmlvbigpLnNldEZyb21FdWxlciguLi5yb3RhdGlvbikgOiB1bmRlZmluZWQsXG4gICAgICApXG4gICAgICBpZiAobWF0ZXJpYWwpIHNoYXBlQm9keS5tYXRlcmlhbCA9IG5ldyBNYXRlcmlhbChtYXRlcmlhbClcbiAgICAgIE9iamVjdC5hc3NpZ24oc2hhcGVCb2R5LCBleHRyYSlcbiAgICB9KVxuICB9IGVsc2Uge1xuICAgIGJvZHkuYWRkU2hhcGUoY3JlYXRlU2hhcGUodHlwZSwgYXJncykpXG4gIH1cblxuICBib2R5LnBvc2l0aW9uLnNldChwb3NpdGlvblswXSwgcG9zaXRpb25bMV0sIHBvc2l0aW9uWzJdKVxuICBib2R5LnF1YXRlcm5pb24uc2V0RnJvbUV1bGVyKHJvdGF0aW9uWzBdLCByb3RhdGlvblsxXSwgcm90YXRpb25bMl0pXG4gIGJvZHkudmVsb2NpdHkuc2V0KHZlbG9jaXR5WzBdLCB2ZWxvY2l0eVsxXSwgdmVsb2NpdHlbMl0pXG4gIGJvZHkuYW5ndWxhclZlbG9jaXR5LnNldChhbmd1bGFyVmVsb2NpdHlbMF0sIGFuZ3VsYXJWZWxvY2l0eVsxXSwgYW5ndWxhclZlbG9jaXR5WzJdKVxuICBib2R5LmxpbmVhckZhY3Rvci5zZXQobGluZWFyRmFjdG9yWzBdLCBsaW5lYXJGYWN0b3JbMV0sIGxpbmVhckZhY3RvclsyXSlcbiAgYm9keS5hbmd1bGFyRmFjdG9yLnNldChhbmd1bGFyRmFjdG9yWzBdLCBhbmd1bGFyRmFjdG9yWzFdLCBhbmd1bGFyRmFjdG9yWzJdKVxuICByZXR1cm4gYm9keVxufVxuXG5leHBvcnQgZGVmYXVsdCBwcm9wc1RvQm9keVxuIiwiaW1wb3J0IHtcbiAgV29ybGQsXG4gIE5haXZlQnJvYWRwaGFzZSxcbiAgU0FQQnJvYWRwaGFzZSxcbiAgVmVjMyxcbiAgUG9pbnRUb1BvaW50Q29uc3RyYWludCxcbiAgQ29uZVR3aXN0Q29uc3RyYWludCxcbiAgSGluZ2VDb25zdHJhaW50LFxuICBEaXN0YW5jZUNvbnN0cmFpbnQsXG4gIExvY2tDb25zdHJhaW50LFxuICBDb25zdHJhaW50LFxuICBTcHJpbmcsXG4gIFF1YXRlcm5pb24sXG4gIFJheSxcbiAgUmF5Y2FzdFJlc3VsdCxcbiAgUmF5Y2FzdFZlaGljbGUsXG59IGZyb20gJ2Nhbm5vbi1lcydcbmltcG9ydCBwcm9wc1RvQm9keSBmcm9tICcuL3Byb3BzVG9Cb2R5J1xuXG5jb25zdCBzdGF0ZSA9IHtcbiAgYm9kaWVzOiB7fSxcbiAgdmVoaWNsZXM6IHt9LFxuICBzcHJpbmdzOiB7fSxcbiAgc3ByaW5nSW5zdGFuY2VzOiB7fSxcbiAgcmF5czoge30sXG4gIHdvcmxkOiBuZXcgV29ybGQoKSxcbiAgY29uZmlnOiB7IHN0ZXA6IDEgLyA2MCB9LFxuICBzdWJzY3JpcHRpb25zOiB7fSxcbiAgdGVtcFZlY3RvcjogbmV3IFZlYzMoKSxcbiAgYm9kaWVzTmVlZFN5bmNpbmc6IGZhbHNlLFxuICBsYXN0Q2FsbFRpbWU6IHVuZGVmaW5lZCxcbn1cblxuZnVuY3Rpb24gc3luY0JvZGllcygpIHtcbiAgc3RhdGUuYm9kaWVzTmVlZFN5bmNpbmcgPSB0cnVlXG4gIHN0YXRlLmJvZGllcyA9IHN0YXRlLndvcmxkLmJvZGllcy5yZWR1Y2UoKGFjYywgYm9keSkgPT4gKHsgLi4uYWNjLCBbYm9keS51dWlkXTogYm9keSB9KSwge30pXG59XG5cbmZ1bmN0aW9uIGVtaXRCZWdpbkNvbnRhY3QoeyBib2R5QSwgYm9keUIgfSkge1xuICBpZiAoIWJvZHlBIHx8ICFib2R5QikgcmV0dXJuXG4gIHNlbGYucG9zdE1lc3NhZ2UoeyBvcDogJ2V2ZW50JywgdHlwZTogJ2NvbGxpZGVCZWdpbicsIGJvZHlBOiBib2R5QS51dWlkLCBib2R5QjogYm9keUIudXVpZCB9KVxufVxuXG5mdW5jdGlvbiBlbWl0RW5kQ29udGFjdCh7IGJvZHlBLCBib2R5QiB9KSB7XG4gIGlmICghYm9keUEgfHwgIWJvZHlCKSByZXR1cm5cbiAgc2VsZi5wb3N0TWVzc2FnZSh7IG9wOiAnZXZlbnQnLCB0eXBlOiAnY29sbGlkZUVuZCcsIGJvZHlBOiBib2R5QS51dWlkLCBib2R5QjogYm9keUIudXVpZCB9KVxufVxuXG5zZWxmLm9ubWVzc2FnZSA9IChlKSA9PiB7XG4gIGNvbnN0IHsgb3AsIHV1aWQsIHR5cGUsIHBvc2l0aW9ucywgcXVhdGVybmlvbnMsIHByb3BzIH0gPSBlLmRhdGFcbiAgY29uc3QgYnJvYWRwaGFzZXMgPSB7IE5haXZlQnJvYWRwaGFzZSwgU0FQQnJvYWRwaGFzZSB9XG4gIHN3aXRjaCAob3ApIHtcbiAgICBjYXNlICdpbml0Jzoge1xuICAgICAgY29uc3QgeyBncmF2aXR5LCB0b2xlcmFuY2UsIHN0ZXAsIGl0ZXJhdGlvbnMsIGFsbG93U2xlZXAsIGJyb2FkcGhhc2UsIGF4aXNJbmRleCwgZGVmYXVsdENvbnRhY3RNYXRlcmlhbCB9ID0gcHJvcHNcbiAgICAgIHN0YXRlLndvcmxkLmFsbG93U2xlZXAgPSBhbGxvd1NsZWVwXG4gICAgICBzdGF0ZS53b3JsZC5ncmF2aXR5LnNldChncmF2aXR5WzBdLCBncmF2aXR5WzFdLCBncmF2aXR5WzJdKVxuICAgICAgc3RhdGUud29ybGQuc29sdmVyLnRvbGVyYW5jZSA9IHRvbGVyYW5jZVxuICAgICAgc3RhdGUud29ybGQuc29sdmVyLml0ZXJhdGlvbnMgPSBpdGVyYXRpb25zXG4gICAgICBzdGF0ZS53b3JsZC5icm9hZHBoYXNlID0gbmV3IChicm9hZHBoYXNlc1ticm9hZHBoYXNlICsgJ0Jyb2FkcGhhc2UnXSB8fCBOYWl2ZUJyb2FkcGhhc2UpKHN0YXRlLndvcmxkKVxuICAgICAgc3RhdGUud29ybGQuYnJvYWRwaGFzZS5heGlzSW5kZXggPSBheGlzSW5kZXggPT09IHVuZGVmaW5lZCB8fCBheGlzSW5kZXggPT09IG51bGwgPyAwIDogYXhpc0luZGV4XG4gICAgICBzdGF0ZS53b3JsZC5hZGRFdmVudExpc3RlbmVyKCdiZWdpbkNvbnRhY3QnLCBlbWl0QmVnaW5Db250YWN0KVxuICAgICAgc3RhdGUud29ybGQuYWRkRXZlbnRMaXN0ZW5lcignZW5kQ29udGFjdCcsIGVtaXRFbmRDb250YWN0KVxuICAgICAgT2JqZWN0LmFzc2lnbihzdGF0ZS53b3JsZC5kZWZhdWx0Q29udGFjdE1hdGVyaWFsLCBkZWZhdWx0Q29udGFjdE1hdGVyaWFsKVxuICAgICAgc3RhdGUuY29uZmlnLnN0ZXAgPSBzdGVwXG4gICAgICBicmVha1xuICAgIH1cbiAgICBjYXNlICdzdGVwJzoge1xuICAgICAgY29uc3Qgbm93ID0gcGVyZm9ybWFuY2Uubm93KCkgLyAxMDAwXG4gICAgICBpZiAoIXN0YXRlLmxhc3RDYWxsVGltZSkge1xuICAgICAgICBzdGF0ZS53b3JsZC5zdGVwKHN0YXRlLmNvbmZpZy5zdGVwKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgdGltZVNpbmNlTGFzdENhbGwgPSBub3cgLSBzdGF0ZS5sYXN0Q2FsbFRpbWVcbiAgICAgICAgc3RhdGUud29ybGQuc3RlcChzdGF0ZS5jb25maWcuc3RlcCwgdGltZVNpbmNlTGFzdENhbGwpXG4gICAgICB9XG4gICAgICBzdGF0ZS5sYXN0Q2FsbFRpbWUgPSBub3dcblxuICAgICAgY29uc3QgbnVtYmVyT2ZCb2RpZXMgPSBzdGF0ZS53b3JsZC5ib2RpZXMubGVuZ3RoXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bWJlck9mQm9kaWVzOyBpKyspIHtcbiAgICAgICAgbGV0IGIgPSBzdGF0ZS53b3JsZC5ib2RpZXNbaV0sXG4gICAgICAgICAgcCA9IGIucG9zaXRpb24sXG4gICAgICAgICAgcSA9IGIucXVhdGVybmlvblxuICAgICAgICBwb3NpdGlvbnNbMyAqIGkgKyAwXSA9IHAueFxuICAgICAgICBwb3NpdGlvbnNbMyAqIGkgKyAxXSA9IHAueVxuICAgICAgICBwb3NpdGlvbnNbMyAqIGkgKyAyXSA9IHAuelxuICAgICAgICBxdWF0ZXJuaW9uc1s0ICogaSArIDBdID0gcS54XG4gICAgICAgIHF1YXRlcm5pb25zWzQgKiBpICsgMV0gPSBxLnlcbiAgICAgICAgcXVhdGVybmlvbnNbNCAqIGkgKyAyXSA9IHEuelxuICAgICAgICBxdWF0ZXJuaW9uc1s0ICogaSArIDNdID0gcS53XG4gICAgICB9XG4gICAgICBjb25zdCBvYnNlcnZhdGlvbnMgPSBbXVxuICAgICAgZm9yIChjb25zdCBpZCBvZiBPYmplY3Qua2V5cyhzdGF0ZS5zdWJzY3JpcHRpb25zKSkge1xuICAgICAgICBsZXQgW3V1aWQsIHR5cGUsIHRhcmdldCA9ICdib2RpZXMnXSA9IHN0YXRlLnN1YnNjcmlwdGlvbnNbaWRdXG4gICAgICAgIGxldCBvYmplY3QgPSBzdGF0ZVt0YXJnZXRdXG4gICAgICAgIGlmICghb2JqZWN0IHx8ICFvYmplY3RbdXVpZF0pIGNvbnRpbnVlXG4gICAgICAgIGxldCB2YWx1ZSA9IG9iamVjdFt1dWlkXVt0eXBlXVxuICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBWZWMzKSB2YWx1ZSA9IHZhbHVlLnRvQXJyYXkoKVxuICAgICAgICBlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIFF1YXRlcm5pb24pIHtcbiAgICAgICAgICB2YWx1ZS50b0V1bGVyKHN0YXRlLnRlbXBWZWN0b3IpXG4gICAgICAgICAgdmFsdWUgPSBzdGF0ZS50ZW1wVmVjdG9yLnRvQXJyYXkoKVxuICAgICAgICB9XG4gICAgICAgIG9ic2VydmF0aW9ucy5wdXNoKFtpZCwgdmFsdWVdKVxuICAgICAgfVxuICAgICAgY29uc3QgbWVzc2FnZSA9IHtcbiAgICAgICAgb3A6ICdmcmFtZScsXG4gICAgICAgIHBvc2l0aW9ucyxcbiAgICAgICAgcXVhdGVybmlvbnMsXG4gICAgICAgIG9ic2VydmF0aW9ucyxcbiAgICAgICAgYWN0aXZlOiBzdGF0ZS53b3JsZC5oYXNBY3RpdmVCb2RpZXMsXG4gICAgICB9XG4gICAgICBpZiAoc3RhdGUuYm9kaWVzTmVlZFN5bmNpbmcpIHtcbiAgICAgICAgbWVzc2FnZS5ib2RpZXMgPSBzdGF0ZS53b3JsZC5ib2RpZXMubWFwKChib2R5KSA9PiBib2R5LnV1aWQpXG4gICAgICAgIHN0YXRlLmJvZGllc05lZWRTeW5jaW5nID0gZmFsc2VcbiAgICAgIH1cbiAgICAgIHNlbGYucG9zdE1lc3NhZ2UobWVzc2FnZSwgW3Bvc2l0aW9ucy5idWZmZXIsIHF1YXRlcm5pb25zLmJ1ZmZlcl0pXG4gICAgICBicmVha1xuICAgIH1cbiAgICBjYXNlICdhZGRCb2RpZXMnOiB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHV1aWQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgYm9keSA9IHByb3BzVG9Cb2R5KHV1aWRbaV0sIHByb3BzW2ldLCB0eXBlKVxuICAgICAgICBzdGF0ZS53b3JsZC5hZGRCb2R5KGJvZHkpXG5cbiAgICAgICAgaWYgKHByb3BzW2ldLm9uQ29sbGlkZSlcbiAgICAgICAgICBib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ2NvbGxpZGUnLCAoeyB0eXBlLCBib2R5LCB0YXJnZXQsIGNvbnRhY3QgfSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgeyBuaSwgcmksIHJqLCBiaSwgYmosIGlkIH0gPSBjb250YWN0XG4gICAgICAgICAgICBjb25zdCBjb250YWN0UG9pbnQgPSBiaS5wb3NpdGlvbi52YWRkKHJpKVxuICAgICAgICAgICAgY29uc3QgY29udGFjdE5vcm1hbCA9IGJpID09PSBib2R5ID8gbmkgOiBuaS5zY2FsZSgtMSlcbiAgICAgICAgICAgIHNlbGYucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgICBvcDogJ2V2ZW50JyxcbiAgICAgICAgICAgICAgdHlwZSxcbiAgICAgICAgICAgICAgYm9keTogYm9keS51dWlkLFxuICAgICAgICAgICAgICB0YXJnZXQ6IHRhcmdldC51dWlkLFxuICAgICAgICAgICAgICBjb250YWN0OiB7XG4gICAgICAgICAgICAgICAgbmk6IG5pLnRvQXJyYXkoKSxcbiAgICAgICAgICAgICAgICByaTogcmkudG9BcnJheSgpLFxuICAgICAgICAgICAgICAgIHJqOiByai50b0FycmF5KCksXG4gICAgICAgICAgICAgICAgYmk6IGJpLnV1aWQsXG4gICAgICAgICAgICAgICAgYmo6IGJqLnV1aWQsXG4gICAgICAgICAgICAgICAgaW1wYWN0VmVsb2NpdHk6IGNvbnRhY3QuZ2V0SW1wYWN0VmVsb2NpdHlBbG9uZ05vcm1hbCgpLFxuICAgICAgICAgICAgICAgIC8vIFdvcmxkIHBvc2l0aW9uIG9mIHRoZSBjb250YWN0XG4gICAgICAgICAgICAgICAgY29udGFjdFBvaW50OiBjb250YWN0UG9pbnQudG9BcnJheSgpLFxuICAgICAgICAgICAgICAgIC8vIE5vcm1hbCBvZiB0aGUgY29udGFjdCwgcmVsYXRpdmUgdG8gdGhlIGNvbGxpZGluZyBib2R5XG4gICAgICAgICAgICAgICAgY29udGFjdE5vcm1hbDogY29udGFjdE5vcm1hbC50b0FycmF5KCksXG4gICAgICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGNvbGxpc2lvbkZpbHRlcnM6IHtcbiAgICAgICAgICAgICAgICBib2R5RmlsdGVyR3JvdXA6IGJvZHkuY29sbGlzaW9uRmlsdGVyR3JvdXAsXG4gICAgICAgICAgICAgICAgYm9keUZpbHRlck1hc2s6IGJvZHkuY29sbGlzaW9uRmlsdGVyTWFzayxcbiAgICAgICAgICAgICAgICB0YXJnZXRGaWx0ZXJHcm91cDogdGFyZ2V0LmNvbGxpc2lvbkZpbHRlckdyb3VwLFxuICAgICAgICAgICAgICAgIHRhcmdldEZpbHRlck1hc2s6IHRhcmdldC5jb2xsaXNpb25GaWx0ZXJNYXNrLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9KVxuICAgICAgfVxuICAgICAgc3luY0JvZGllcygpXG4gICAgICBicmVha1xuICAgIH1cbiAgICBjYXNlICdyZW1vdmVCb2RpZXMnOiB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHV1aWQubGVuZ3RoOyBpKyspIHN0YXRlLndvcmxkLnJlbW92ZUJvZHkoc3RhdGUuYm9kaWVzW3V1aWRbaV1dKVxuICAgICAgc3luY0JvZGllcygpXG4gICAgICBicmVha1xuICAgIH1cbiAgICBjYXNlICdzdWJzY3JpYmUnOiB7XG4gICAgICBjb25zdCB7IGlkLCB0eXBlLCB0YXJnZXQgfSA9IHByb3BzXG4gICAgICBzdGF0ZS5zdWJzY3JpcHRpb25zW2lkXSA9IFt1dWlkLCB0eXBlLCB0YXJnZXRdXG4gICAgICBicmVha1xuICAgIH1cbiAgICBjYXNlICd1bnN1YnNjcmliZSc6IHtcbiAgICAgIGRlbGV0ZSBzdGF0ZS5zdWJzY3JpcHRpb25zW3Byb3BzXVxuICAgICAgYnJlYWtcbiAgICB9XG4gICAgY2FzZSAnc2V0UG9zaXRpb24nOlxuICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLnBvc2l0aW9uLnNldChwcm9wc1swXSwgcHJvcHNbMV0sIHByb3BzWzJdKVxuICAgICAgYnJlYWtcbiAgICBjYXNlICdzZXRRdWF0ZXJuaW9uJzpcbiAgICAgIHN0YXRlLmJvZGllc1t1dWlkXS5xdWF0ZXJuaW9uLnNldEZyb21FdWxlcihwcm9wc1swXSwgcHJvcHNbMV0sIHByb3BzWzJdKVxuICAgICAgYnJlYWtcbiAgICBjYXNlICdzZXRWZWxvY2l0eSc6XG4gICAgICBzdGF0ZS5ib2RpZXNbdXVpZF0udmVsb2NpdHkuc2V0KHByb3BzWzBdLCBwcm9wc1sxXSwgcHJvcHNbMl0pXG4gICAgICBicmVha1xuICAgIGNhc2UgJ3NldEFuZ3VsYXJWZWxvY2l0eSc6XG4gICAgICBzdGF0ZS5ib2RpZXNbdXVpZF0uYW5ndWxhclZlbG9jaXR5LnNldChwcm9wc1swXSwgcHJvcHNbMV0sIHByb3BzWzJdKVxuICAgICAgYnJlYWtcbiAgICBjYXNlICdzZXRMaW5lYXJGYWN0b3InOlxuICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLmxpbmVhckZhY3Rvci5zZXQocHJvcHNbMF0sIHByb3BzWzFdLCBwcm9wc1syXSlcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAnc2V0QW5ndWxhckZhY3Rvcic6XG4gICAgICBzdGF0ZS5ib2RpZXNbdXVpZF0uYW5ndWxhckZhY3Rvci5zZXQocHJvcHNbMF0sIHByb3BzWzFdLCBwcm9wc1syXSlcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAnc2V0TWFzcyc6XG4gICAgICAvLyBhc3N1bWUgdGhhdCBhbiB1cGRhdGUgZnJvbSB6ZXJvLW1hc3MgaW1wbGllcyBhIG5lZWQgZm9yIGR5bmFtaWNzIG9uIHN0YXRpYyBvYmouXG4gICAgICBpZiAocHJvcHMgIT09IDAgJiYgc3RhdGUuYm9kaWVzW3V1aWRdLnR5cGUgPT09IDApIHN0YXRlLmJvZGllc1t1dWlkXS50eXBlID0gMVxuICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLm1hc3MgPSBwcm9wc1xuICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLnVwZGF0ZU1hc3NQcm9wZXJ0aWVzKClcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAnc2V0TGluZWFyRGFtcGluZyc6XG4gICAgICBzdGF0ZS5ib2RpZXNbdXVpZF0ubGluZWFyRGFtcGluZyA9IHByb3BzXG4gICAgICBicmVha1xuICAgIGNhc2UgJ3NldEFuZ3VsYXJEYW1waW5nJzpcbiAgICAgIHN0YXRlLmJvZGllc1t1dWlkXS5hbmd1bGFyRGFtcGluZyA9IHByb3BzXG4gICAgICBicmVha1xuICAgIGNhc2UgJ3NldEFsbG93U2xlZXAnOlxuICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLmFsbG93U2xlZXAgPSBwcm9wc1xuICAgICAgYnJlYWtcbiAgICBjYXNlICdzZXRTbGVlcFNwZWVkTGltaXQnOlxuICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLnNsZWVwU3BlZWRMaW1pdCA9IHByb3BzXG4gICAgICBicmVha1xuICAgIGNhc2UgJ3NldFNsZWVwVGltZUxpbWl0JzpcbiAgICAgIHN0YXRlLmJvZGllc1t1dWlkXS5zbGVlcFRpbWVMaW1pdCA9IHByb3BzXG4gICAgICBicmVha1xuICAgIGNhc2UgJ3NldENvbGxpc2lvbkZpbHRlckdyb3VwJzpcbiAgICAgIHN0YXRlLmJvZGllc1t1dWlkXS5jb2xsaXNpb25GaWx0ZXJHcm91cCA9IHByb3BzXG4gICAgICBicmVha1xuICAgIGNhc2UgJ3NldENvbGxpc2lvbkZpbHRlck1hc2snOlxuICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLmNvbGxpc2lvbkZpbHRlck1hc2sgPSBwcm9wc1xuICAgICAgYnJlYWtcbiAgICBjYXNlICdzZXRDb2xsaXNpb25SZXNwb25zZSc6XG4gICAgICBzdGF0ZS5ib2RpZXNbdXVpZF0uY29sbGlzaW9uUmVzcG9uc2UgPSBwcm9wc1xuICAgICAgYnJlYWtcbiAgICBjYXNlICdzZXRGaXhlZFJvdGF0aW9uJzpcbiAgICAgIHN0YXRlLmJvZGllc1t1dWlkXS5maXhlZFJvdGF0aW9uID0gcHJvcHNcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAnc2V0SXNUcmlnZ2VyJzpcbiAgICAgIHN0YXRlLmJvZGllc1t1dWlkXS5pc1RyaWdnZXIgPSBwcm9wc1xuICAgICAgYnJlYWtcbiAgICBjYXNlICdzZXRHcmF2aXR5JzpcbiAgICAgIHN0YXRlLndvcmxkLmdyYXZpdHkuc2V0KHByb3BzWzBdLCBwcm9wc1sxXSwgcHJvcHNbMl0pXG4gICAgICBicmVha1xuICAgIGNhc2UgJ3NldFRvbGVyYW5jZSc6XG4gICAgICBzdGF0ZS53b3JsZC5zb2x2ZXIudG9sZXJhbmNlID0gcHJvcHNcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAnc2V0U3RlcCc6XG4gICAgICBzdGF0ZS5jb25maWcuc3RlcCA9IHByb3BzXG4gICAgICBicmVha1xuICAgIGNhc2UgJ3NldEl0ZXJhdGlvbnMnOlxuICAgICAgc3RhdGUud29ybGQuc29sdmVyLml0ZXJhdGlvbnMgPSBwcm9wc1xuICAgICAgYnJlYWtcbiAgICBjYXNlICdzZXRCcm9hZHBoYXNlJzpcbiAgICAgIHN0YXRlLndvcmxkLmJyb2FkcGhhc2UgPSBuZXcgKGJyb2FkcGhhc2VzW3Byb3BzICsgJ0Jyb2FkcGhhc2UnXSB8fCBOYWl2ZUJyb2FkcGhhc2UpKHN0YXRlLndvcmxkKVxuICAgICAgYnJlYWtcbiAgICBjYXNlICdzZXRBeGlzSW5kZXgnOlxuICAgICAgc3RhdGUud29ybGQuYnJvYWRwaGFzZS5heGlzSW5kZXggPSBwcm9wcyA9PT0gdW5kZWZpbmVkIHx8IHByb3BzID09PSBudWxsID8gMCA6IHByb3BzXG4gICAgICBicmVha1xuICAgIGNhc2UgJ2FwcGx5Rm9yY2UnOlxuICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLmFwcGx5Rm9yY2UobmV3IFZlYzMoLi4ucHJvcHNbMF0pLCBuZXcgVmVjMyguLi5wcm9wc1sxXSkpXG4gICAgICBicmVha1xuICAgIGNhc2UgJ2FwcGx5SW1wdWxzZSc6XG4gICAgICBzdGF0ZS5ib2RpZXNbdXVpZF0uYXBwbHlJbXB1bHNlKG5ldyBWZWMzKC4uLnByb3BzWzBdKSwgbmV3IFZlYzMoLi4ucHJvcHNbMV0pKVxuICAgICAgYnJlYWtcbiAgICBjYXNlICdhcHBseUxvY2FsRm9yY2UnOlxuICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLmFwcGx5TG9jYWxGb3JjZShuZXcgVmVjMyguLi5wcm9wc1swXSksIG5ldyBWZWMzKC4uLnByb3BzWzFdKSlcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAnYXBwbHlMb2NhbEltcHVsc2UnOlxuICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLmFwcGx5TG9jYWxJbXB1bHNlKG5ldyBWZWMzKC4uLnByb3BzWzBdKSwgbmV3IFZlYzMoLi4ucHJvcHNbMV0pKVxuICAgICAgYnJlYWtcbiAgICBjYXNlICdhZGRDb25zdHJhaW50Jzoge1xuICAgICAgY29uc3QgW2JvZHlBLCBib2R5Qiwgb3B0bnNdID0gcHJvcHNcbiAgICAgIGxldCB7IHBpdm90QSwgcGl2b3RCLCBheGlzQSwgYXhpc0IsIC4uLm9wdGlvbnMgfSA9IG9wdG5zXG5cbiAgICAgIC8vIGlzIHRoZXJlIGEgYmV0dGVyIHdheSB0byBlbmZvcmNlIGRlZmF1bHRzP1xuICAgICAgcGl2b3RBID0gQXJyYXkuaXNBcnJheShwaXZvdEEpID8gbmV3IFZlYzMoLi4ucGl2b3RBKSA6IHVuZGVmaW5lZFxuICAgICAgcGl2b3RCID0gQXJyYXkuaXNBcnJheShwaXZvdEIpID8gbmV3IFZlYzMoLi4ucGl2b3RCKSA6IHVuZGVmaW5lZFxuICAgICAgYXhpc0EgPSBBcnJheS5pc0FycmF5KGF4aXNBKSA/IG5ldyBWZWMzKC4uLmF4aXNBKSA6IHVuZGVmaW5lZFxuICAgICAgYXhpc0IgPSBBcnJheS5pc0FycmF5KGF4aXNCKSA/IG5ldyBWZWMzKC4uLmF4aXNCKSA6IHVuZGVmaW5lZFxuXG4gICAgICBsZXQgY29uc3RyYWludFxuXG4gICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSAnUG9pbnRUb1BvaW50JzpcbiAgICAgICAgICBjb25zdHJhaW50ID0gbmV3IFBvaW50VG9Qb2ludENvbnN0cmFpbnQoXG4gICAgICAgICAgICBzdGF0ZS5ib2RpZXNbYm9keUFdLFxuICAgICAgICAgICAgcGl2b3RBLFxuICAgICAgICAgICAgc3RhdGUuYm9kaWVzW2JvZHlCXSxcbiAgICAgICAgICAgIHBpdm90QixcbiAgICAgICAgICAgIG9wdG5zLm1heEZvcmNlLFxuICAgICAgICAgIClcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdDb25lVHdpc3QnOlxuICAgICAgICAgIGNvbnN0cmFpbnQgPSBuZXcgQ29uZVR3aXN0Q29uc3RyYWludChzdGF0ZS5ib2RpZXNbYm9keUFdLCBzdGF0ZS5ib2RpZXNbYm9keUJdLCB7XG4gICAgICAgICAgICBwaXZvdEEsXG4gICAgICAgICAgICBwaXZvdEIsXG4gICAgICAgICAgICBheGlzQSxcbiAgICAgICAgICAgIGF4aXNCLFxuICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgICB9KVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ0hpbmdlJzpcbiAgICAgICAgICBjb25zdHJhaW50ID0gbmV3IEhpbmdlQ29uc3RyYWludChzdGF0ZS5ib2RpZXNbYm9keUFdLCBzdGF0ZS5ib2RpZXNbYm9keUJdLCB7XG4gICAgICAgICAgICBwaXZvdEEsXG4gICAgICAgICAgICBwaXZvdEIsXG4gICAgICAgICAgICBheGlzQSxcbiAgICAgICAgICAgIGF4aXNCLFxuICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgICB9KVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ0Rpc3RhbmNlJzpcbiAgICAgICAgICBjb25zdHJhaW50ID0gbmV3IERpc3RhbmNlQ29uc3RyYWludChzdGF0ZS5ib2RpZXNbYm9keUFdLCBzdGF0ZS5ib2RpZXNbYm9keUJdLCBvcHRucy5kaXN0YW5jZSwgb3B0bnMubWF4Rm9yY2UpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnTG9jayc6XG4gICAgICAgICAgY29uc3RyYWludCA9IG5ldyBMb2NrQ29uc3RyYWludChzdGF0ZS5ib2RpZXNbYm9keUFdLCBzdGF0ZS5ib2RpZXNbYm9keUJdLCBvcHRucylcbiAgICAgICAgICBicmVha1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGNvbnN0cmFpbnQgPSBuZXcgQ29uc3RyYWludChzdGF0ZS5ib2RpZXNbYm9keUFdLCBzdGF0ZS5ib2RpZXNbYm9keUJdLCBvcHRucylcbiAgICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY29uc3RyYWludC51dWlkID0gdXVpZFxuICAgICAgc3RhdGUud29ybGQuYWRkQ29uc3RyYWludChjb25zdHJhaW50KVxuICAgICAgYnJlYWtcbiAgICB9XG4gICAgY2FzZSAncmVtb3ZlQ29uc3RyYWludCc6XG4gICAgICBzdGF0ZS53b3JsZC5jb25zdHJhaW50cy5maWx0ZXIoKHsgdXVpZDogdGhpc0lkIH0pID0+IHRoaXNJZCA9PT0gdXVpZCkubWFwKChjKSA9PiBzdGF0ZS53b3JsZC5yZW1vdmVDb25zdHJhaW50KGMpKVxuICAgICAgYnJlYWtcblxuICAgIGNhc2UgJ2VuYWJsZUNvbnN0cmFpbnQnOlxuICAgICAgc3RhdGUud29ybGQuY29uc3RyYWludHMuZmlsdGVyKCh7IHV1aWQ6IHRoaXNJZCB9KSA9PiB0aGlzSWQgPT09IHV1aWQpLm1hcCgoYykgPT4gYy5lbmFibGUoKSlcbiAgICAgIGJyZWFrXG5cbiAgICBjYXNlICdkaXNhYmxlQ29uc3RyYWludCc6XG4gICAgICBzdGF0ZS53b3JsZC5jb25zdHJhaW50cy5maWx0ZXIoKHsgdXVpZDogdGhpc0lkIH0pID0+IHRoaXNJZCA9PT0gdXVpZCkubWFwKChjKSA9PiBjLmRpc2FibGUoKSlcbiAgICAgIGJyZWFrXG5cbiAgICBjYXNlICdlbmFibGVDb25zdHJhaW50TW90b3InOlxuICAgICAgc3RhdGUud29ybGQuY29uc3RyYWludHMuZmlsdGVyKCh7IHV1aWQ6IHRoaXNJZCB9KSA9PiB0aGlzSWQgPT09IHV1aWQpLm1hcCgoYykgPT4gYy5lbmFibGVNb3RvcigpKVxuICAgICAgYnJlYWtcblxuICAgIGNhc2UgJ2Rpc2FibGVDb25zdHJhaW50TW90b3InOlxuICAgICAgc3RhdGUud29ybGQuY29uc3RyYWludHMuZmlsdGVyKCh7IHV1aWQ6IHRoaXNJZCB9KSA9PiB0aGlzSWQgPT09IHV1aWQpLm1hcCgoYykgPT4gYy5kaXNhYmxlTW90b3IoKSlcbiAgICAgIGJyZWFrXG5cbiAgICBjYXNlICdzZXRDb25zdHJhaW50TW90b3JTcGVlZCc6XG4gICAgICBzdGF0ZS53b3JsZC5jb25zdHJhaW50cy5maWx0ZXIoKHsgdXVpZDogdGhpc0lkIH0pID0+IHRoaXNJZCA9PT0gdXVpZCkubWFwKChjKSA9PiBjLnNldE1vdG9yU3BlZWQocHJvcHMpKVxuICAgICAgYnJlYWtcblxuICAgIGNhc2UgJ3NldENvbnN0cmFpbnRNb3Rvck1heEZvcmNlJzpcbiAgICAgIHN0YXRlLndvcmxkLmNvbnN0cmFpbnRzLmZpbHRlcigoeyB1dWlkOiB0aGlzSWQgfSkgPT4gdGhpc0lkID09PSB1dWlkKS5tYXAoKGMpID0+IGMuc2V0TW90b3JNYXhGb3JjZShwcm9wcykpXG4gICAgICBicmVha1xuXG4gICAgY2FzZSAnYWRkU3ByaW5nJzoge1xuICAgICAgY29uc3QgW2JvZHlBLCBib2R5Qiwgb3B0bnNdID0gcHJvcHNcbiAgICAgIGxldCB7IHdvcmxkQW5jaG9yQSwgd29ybGRBbmNob3JCLCBsb2NhbEFuY2hvckEsIGxvY2FsQW5jaG9yQiwgcmVzdExlbmd0aCwgc3RpZmZuZXNzLCBkYW1waW5nIH0gPSBvcHRuc1xuXG4gICAgICB3b3JsZEFuY2hvckEgPSBBcnJheS5pc0FycmF5KHdvcmxkQW5jaG9yQSkgPyBuZXcgVmVjMyguLi53b3JsZEFuY2hvckEpIDogdW5kZWZpbmVkXG4gICAgICB3b3JsZEFuY2hvckIgPSBBcnJheS5pc0FycmF5KHdvcmxkQW5jaG9yQikgPyBuZXcgVmVjMyguLi53b3JsZEFuY2hvckIpIDogdW5kZWZpbmVkXG4gICAgICBsb2NhbEFuY2hvckEgPSBBcnJheS5pc0FycmF5KGxvY2FsQW5jaG9yQSkgPyBuZXcgVmVjMyguLi5sb2NhbEFuY2hvckEpIDogdW5kZWZpbmVkXG4gICAgICBsb2NhbEFuY2hvckIgPSBBcnJheS5pc0FycmF5KGxvY2FsQW5jaG9yQikgPyBuZXcgVmVjMyguLi5sb2NhbEFuY2hvckIpIDogdW5kZWZpbmVkXG5cbiAgICAgIGxldCBzcHJpbmcgPSBuZXcgU3ByaW5nKHN0YXRlLmJvZGllc1tib2R5QV0sIHN0YXRlLmJvZGllc1tib2R5Ql0sIHtcbiAgICAgICAgd29ybGRBbmNob3JBLFxuICAgICAgICB3b3JsZEFuY2hvckIsXG4gICAgICAgIGxvY2FsQW5jaG9yQSxcbiAgICAgICAgbG9jYWxBbmNob3JCLFxuICAgICAgICByZXN0TGVuZ3RoLFxuICAgICAgICBzdGlmZm5lc3MsXG4gICAgICAgIGRhbXBpbmcsXG4gICAgICB9KVxuXG4gICAgICBzcHJpbmcudXVpZCA9IHV1aWRcblxuICAgICAgbGV0IHBvc3RTdGVwU3ByaW5nID0gKCkgPT4gc3ByaW5nLmFwcGx5Rm9yY2UoKVxuXG4gICAgICBzdGF0ZS5zcHJpbmdzW3V1aWRdID0gcG9zdFN0ZXBTcHJpbmdcbiAgICAgIHN0YXRlLnNwcmluZ0luc3RhbmNlc1t1dWlkXSA9IHNwcmluZ1xuXG4gICAgICAvLyBDb21wdXRlIHRoZSBmb3JjZSBhZnRlciBlYWNoIHN0ZXBcbiAgICAgIHN0YXRlLndvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ3Bvc3RTdGVwJywgc3RhdGUuc3ByaW5nc1t1dWlkXSlcbiAgICAgIGJyZWFrXG4gICAgfVxuICAgIGNhc2UgJ3NldFNwcmluZ1N0aWZmbmVzcyc6IHtcbiAgICAgIHN0YXRlLnNwcmluZ0luc3RhbmNlc1t1dWlkXS5zdGlmZm5lc3MgPSBwcm9wc1xuICAgICAgYnJlYWtcbiAgICB9XG4gICAgY2FzZSAnc2V0U3ByaW5nUmVzdExlbmd0aCc6IHtcbiAgICAgIHN0YXRlLnNwcmluZ0luc3RhbmNlc1t1dWlkXS5yZXN0TGVuZ3RoID0gcHJvcHNcbiAgICAgIGJyZWFrXG4gICAgfVxuICAgIGNhc2UgJ3NldFNwcmluZ0RhbXBpbmcnOiB7XG4gICAgICBzdGF0ZS5zcHJpbmdJbnN0YW5jZXNbdXVpZF0uZGFtcGluZyA9IHByb3BzXG4gICAgICBicmVha1xuICAgIH1cbiAgICBjYXNlICdyZW1vdmVTcHJpbmcnOiB7XG4gICAgICBzdGF0ZS53b3JsZC5yZW1vdmVFdmVudExpc3RlbmVyKCdwb3N0U3RlcCcsIHN0YXRlLnNwcmluZ3NbdXVpZF0pXG4gICAgICBicmVha1xuICAgIH1cbiAgICBjYXNlICdhZGRSYXknOiB7XG4gICAgICBjb25zdCB7IGZyb20sIHRvLCAuLi5vcHRpb25zIH0gPSBwcm9wc1xuICAgICAgY29uc3QgcmF5ID0gbmV3IFJheShmcm9tID8gbmV3IFZlYzMoLi4uZnJvbSkgOiB1bmRlZmluZWQsIHRvID8gbmV3IFZlYzMoLi4udG8pIDogdW5kZWZpbmVkKVxuICAgICAgb3B0aW9ucy5tb2RlID0gUmF5W29wdGlvbnMubW9kZS50b1VwcGVyQ2FzZSgpXVxuICAgICAgb3B0aW9ucy5yZXN1bHQgPSBuZXcgUmF5Y2FzdFJlc3VsdCgpXG4gICAgICBzdGF0ZS5yYXlzW3V1aWRdID0gKCkgPT4ge1xuICAgICAgICByYXkuaW50ZXJzZWN0V29ybGQoc3RhdGUud29ybGQsIG9wdGlvbnMpXG4gICAgICAgIGNvbnN0IHsgYm9keSwgc2hhcGUsIHJheUZyb21Xb3JsZCwgcmF5VG9Xb3JsZCwgaGl0Tm9ybWFsV29ybGQsIGhpdFBvaW50V29ybGQsIC4uLnJlc3QgfSA9IG9wdGlvbnMucmVzdWx0XG4gICAgICAgIHNlbGYucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgIG9wOiAnZXZlbnQnLFxuICAgICAgICAgIHR5cGU6ICdyYXloaXQnLFxuICAgICAgICAgIHJheToge1xuICAgICAgICAgICAgZnJvbSxcbiAgICAgICAgICAgIHRvLFxuICAgICAgICAgICAgZGlyZWN0aW9uOiByYXkuZGlyZWN0aW9uLnRvQXJyYXkoKSxcbiAgICAgICAgICAgIGNvbGxpc2lvbkZpbHRlckdyb3VwOiByYXkuY29sbGlzaW9uRmlsdGVyR3JvdXAsXG4gICAgICAgICAgICBjb2xsaXNpb25GaWx0ZXJNYXNrOiByYXkuY29sbGlzaW9uRmlsdGVyTWFzayxcbiAgICAgICAgICAgIHV1aWQsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBib2R5OiBib2R5ID8gYm9keS51dWlkIDogbnVsbCxcbiAgICAgICAgICBzaGFwZTogc2hhcGUgPyB7IC4uLnNoYXBlLCBib2R5OiBib2R5LnV1aWQgfSA6IG51bGwsXG4gICAgICAgICAgcmF5RnJvbVdvcmxkOiByYXlGcm9tV29ybGQudG9BcnJheSgpLFxuICAgICAgICAgIHJheVRvV29ybGQ6IHJheVRvV29ybGQudG9BcnJheSgpLFxuICAgICAgICAgIGhpdE5vcm1hbFdvcmxkOiBoaXROb3JtYWxXb3JsZC50b0FycmF5KCksXG4gICAgICAgICAgaGl0UG9pbnRXb3JsZDogaGl0UG9pbnRXb3JsZC50b0FycmF5KCksXG4gICAgICAgICAgLi4ucmVzdCxcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIHN0YXRlLndvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ3ByZVN0ZXAnLCBzdGF0ZS5yYXlzW3V1aWRdKVxuICAgICAgYnJlYWtcbiAgICB9XG4gICAgY2FzZSAncmVtb3ZlUmF5Jzoge1xuICAgICAgc3RhdGUud29ybGQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncHJlU3RlcCcsIHN0YXRlLnJheXNbdXVpZF0pXG4gICAgICBkZWxldGUgc3RhdGUucmF5c1t1dWlkXVxuICAgICAgYnJlYWtcbiAgICB9XG4gICAgY2FzZSAnYWRkUmF5Y2FzdFZlaGljbGUnOiB7XG4gICAgICBjb25zdCBbY2hhc3Npc0JvZHksIHdoZWVscywgd2hlZWxJbmZvcywgaW5kZXhGb3J3YXJkQXhpcywgaW5kZXhSaWdodEF4aXMsIGluZGV4VXBBeGlzXSA9IHByb3BzXG4gICAgICBjb25zdCB2ZWhpY2xlID0gbmV3IFJheWNhc3RWZWhpY2xlKHtcbiAgICAgICAgY2hhc3Npc0JvZHk6IHN0YXRlLmJvZGllc1tjaGFzc2lzQm9keV0sXG4gICAgICAgIGluZGV4Rm9yd2FyZEF4aXM6IGluZGV4Rm9yd2FyZEF4aXMsXG4gICAgICAgIGluZGV4UmlnaHRBeGlzOiBpbmRleFJpZ2h0QXhpcyxcbiAgICAgICAgaW5kZXhVcEF4aXM6IGluZGV4VXBBeGlzLFxuICAgICAgfSlcbiAgICAgIHZlaGljbGUud29ybGQgPSBzdGF0ZS53b3JsZFxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB3aGVlbEluZm9zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHdoZWVsSW5mbyA9IHdoZWVsSW5mb3NbaV1cbiAgICAgICAgd2hlZWxJbmZvLmRpcmVjdGlvbkxvY2FsID0gbmV3IFZlYzMoLi4ud2hlZWxJbmZvLmRpcmVjdGlvbkxvY2FsKVxuICAgICAgICB3aGVlbEluZm8uY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludExvY2FsID0gbmV3IFZlYzMoLi4ud2hlZWxJbmZvLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRMb2NhbClcbiAgICAgICAgd2hlZWxJbmZvLmF4bGVMb2NhbCA9IG5ldyBWZWMzKC4uLndoZWVsSW5mby5heGxlTG9jYWwpXG4gICAgICAgIHZlaGljbGUuYWRkV2hlZWwod2hlZWxJbmZvKVxuICAgICAgfVxuXG4gICAgICB2ZWhpY2xlLnByZVN0ZXAgPSAoKSA9PiB7XG4gICAgICAgIHN0YXRlLnZlaGljbGVzW3V1aWRdLnVwZGF0ZVZlaGljbGUoc3RhdGUud29ybGQuZHQpXG4gICAgICB9XG4gICAgICA7KHZlaGljbGUucG9zdFN0ZXAgPSAoKSA9PiB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RhdGUudmVoaWNsZXNbdXVpZF0ud2hlZWxJbmZvcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHN0YXRlLnZlaGljbGVzW3V1aWRdLnVwZGF0ZVdoZWVsVHJhbnNmb3JtKGkpXG4gICAgICAgICAgY29uc3QgdCA9IHN0YXRlLnZlaGljbGVzW3V1aWRdLndoZWVsSW5mb3NbaV0ud29ybGRUcmFuc2Zvcm1cbiAgICAgICAgICBjb25zdCB3aGVlbEJvZHkgPSBzdGF0ZS5ib2RpZXNbd2hlZWxzW2ldXVxuICAgICAgICAgIHdoZWVsQm9keS5wb3NpdGlvbi5jb3B5KHQucG9zaXRpb24pXG4gICAgICAgICAgd2hlZWxCb2R5LnF1YXRlcm5pb24uY29weSh0LnF1YXRlcm5pb24pXG4gICAgICAgIH1cbiAgICAgIH0pLFxuICAgICAgICAoc3RhdGUudmVoaWNsZXNbdXVpZF0gPSB2ZWhpY2xlKVxuICAgICAgc3RhdGUud29ybGQuYWRkRXZlbnRMaXN0ZW5lcigncHJlU3RlcCcsIHN0YXRlLnZlaGljbGVzW3V1aWRdLnByZVN0ZXApXG4gICAgICBzdGF0ZS53b3JsZC5hZGRFdmVudExpc3RlbmVyKCdwb3N0U3RlcCcsIHN0YXRlLnZlaGljbGVzW3V1aWRdLnBvc3RTdGVwKVxuICAgICAgYnJlYWtcbiAgICB9XG4gICAgY2FzZSAncmVtb3ZlUmF5Y2FzdFZlaGljbGUnOiB7XG4gICAgICBzdGF0ZS53b3JsZC5yZW1vdmVFdmVudExpc3RlbmVyKCdwcmVTdGVwJywgc3RhdGUudmVoaWNsZXNbdXVpZF0ucHJlU3RlcClcbiAgICAgIHN0YXRlLndvcmxkLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Bvc3RTdGVwJywgc3RhdGUudmVoaWNsZXNbdXVpZF0ucG9zdFN0ZXApXG4gICAgICBzdGF0ZS52ZWhpY2xlc1t1dWlkXS53b3JsZCA9IG51bGxcbiAgICAgIGRlbGV0ZSBzdGF0ZS52ZWhpY2xlc1t1dWlkXVxuICAgICAgYnJlYWtcbiAgICB9XG4gICAgY2FzZSAnc2V0UmF5Y2FzdFZlaGljbGVTdGVlcmluZ1ZhbHVlJzoge1xuICAgICAgY29uc3QgW3ZhbHVlLCB3aGVlbEluZGV4XSA9IHByb3BzXG4gICAgICBzdGF0ZS52ZWhpY2xlc1t1dWlkXS5zZXRTdGVlcmluZ1ZhbHVlKHZhbHVlLCB3aGVlbEluZGV4KVxuICAgICAgYnJlYWtcbiAgICB9XG4gICAgY2FzZSAnYXBwbHlSYXljYXN0VmVoaWNsZUVuZ2luZUZvcmNlJzoge1xuICAgICAgY29uc3QgW3ZhbHVlLCB3aGVlbEluZGV4XSA9IHByb3BzXG4gICAgICBzdGF0ZS52ZWhpY2xlc1t1dWlkXS5hcHBseUVuZ2luZUZvcmNlKHZhbHVlLCB3aGVlbEluZGV4KVxuICAgICAgYnJlYWtcbiAgICB9XG4gICAgY2FzZSAnc2V0UmF5Y2FzdFZlaGljbGVCcmFrZSc6IHtcbiAgICAgIGNvbnN0IFticmFrZSwgd2hlZWxJbmRleF0gPSBwcm9wc1xuICAgICAgc3RhdGUudmVoaWNsZXNbdXVpZF0uc2V0QnJha2UoYnJha2UsIHdoZWVsSW5kZXgpXG4gICAgICBicmVha1xuICAgIH1cbiAgfVxufVxuIl0sIm5hbWVzIjpbIk1hdDMiLCJjb25zdHJ1Y3RvciIsImVsZW1lbnRzIiwiaWRlbnRpdHkiLCJlIiwic2V0WmVybyIsInNldFRyYWNlIiwidmVjdG9yIiwieCIsInkiLCJ6IiwiZ2V0VHJhY2UiLCJ0YXJnZXQiLCJWZWMzIiwidm11bHQiLCJ2Iiwic211bHQiLCJzIiwiaSIsImxlbmd0aCIsIm1tdWx0IiwibWF0cml4IiwiQSIsIkIiLCJUIiwiYTExIiwiYTEyIiwiYTEzIiwiYTIxIiwiYTIyIiwiYTIzIiwiYTMxIiwiYTMyIiwiYTMzIiwiYjExIiwiYjEyIiwiYjEzIiwiYjIxIiwiYjIyIiwiYjIzIiwiYjMxIiwiYjMyIiwiYjMzIiwic2NhbGUiLCJ0Iiwic29sdmUiLCJiIiwibnIiLCJuYyIsImVxbnMiLCJqIiwicHVzaCIsIm4iLCJrIiwibnAiLCJrcCIsInAiLCJtdWx0aXBsaWVyIiwiaXNOYU4iLCJJbmZpbml0eSIsInRvU3RyaW5nIiwicm93IiwiY29sdW1uIiwidmFsdWUiLCJ1bmRlZmluZWQiLCJjb3B5IiwiciIsInNlcCIsInJldmVyc2UiLCJyZXZlcnNlX2VxbnMiLCJzZXRSb3RhdGlvbkZyb21RdWF0ZXJuaW9uIiwicSIsInciLCJ4MiIsInkyIiwiejIiLCJ4eCIsInh5IiwieHoiLCJ5eSIsInl6IiwienoiLCJ3eCIsInd5Iiwid3oiLCJ0cmFuc3Bvc2UiLCJNIiwidG1wIiwiY3Jvc3MiLCJ2eCIsInZ5IiwidnoiLCJzZXQiLCJ2YWRkIiwidnN1YiIsImNyb3NzbWF0Iiwibm9ybWFsaXplIiwiTWF0aCIsInNxcnQiLCJpbnZOIiwidW5pdCIsIm5pbnYiLCJsZW5ndGhTcXVhcmVkIiwiZG90IiwiZGlzdGFuY2VUbyIsInB4IiwicHkiLCJweiIsImRpc3RhbmNlU3F1YXJlZCIsInNjYWxhciIsInZtdWwiLCJhZGRTY2FsZWRWZWN0b3IiLCJpc1plcm8iLCJuZWdhdGUiLCJ0YW5nZW50cyIsInQxIiwidDIiLCJub3JtIiwiVmVjM190YW5nZW50c19uIiwiaW5vcm0iLCJyYW5kVmVjIiwiVmVjM190YW5nZW50c19yYW5kVmVjIiwiYWJzIiwidG9BcnJheSIsImxlcnAiLCJhbG1vc3RFcXVhbHMiLCJwcmVjaXNpb24iLCJhbG1vc3RaZXJvIiwiaXNBbnRpcGFyYWxsZWxUbyIsImFudGlwX25lZyIsImNsb25lIiwiWkVSTyIsIlVOSVRfWCIsIlVOSVRfWSIsIlVOSVRfWiIsIkFBQkIiLCJvcHRpb25zIiwibG93ZXJCb3VuZCIsInVwcGVyQm91bmQiLCJzZXRGcm9tUG9pbnRzIiwicG9pbnRzIiwicG9zaXRpb24iLCJxdWF0ZXJuaW9uIiwic2tpblNpemUiLCJsIiwidSIsInRtcCQxIiwiYWFiYiIsImV4dGVuZCIsIm1pbiIsIm1heCIsIm92ZXJsYXBzIiwibDEiLCJ1MSIsImwyIiwidTIiLCJvdmVybGFwc1giLCJvdmVybGFwc1kiLCJvdmVybGFwc1oiLCJ2b2x1bWUiLCJjb250YWlucyIsImdldENvcm5lcnMiLCJhIiwiYyIsImQiLCJmIiwiZyIsImgiLCJ0b0xvY2FsRnJhbWUiLCJmcmFtZSIsImNvcm5lcnMiLCJ0cmFuc2Zvcm1JbnRvRnJhbWVfY29ybmVycyIsImNvcm5lciIsInBvaW50VG9Mb2NhbCIsInRvV29ybGRGcmFtZSIsInBvaW50VG9Xb3JsZCIsIm92ZXJsYXBzUmF5IiwicmF5IiwiZGlyZWN0aW9uIiwiZnJvbSIsImRpckZyYWNYIiwiZGlyRnJhY1kiLCJkaXJGcmFjWiIsInQzIiwidDQiLCJ0NSIsInQ2IiwidG1pbiIsInRtYXgiLCJBcnJheUNvbGxpc2lvbk1hdHJpeCIsImdldCIsImJpIiwiYmoiLCJpbmRleCIsInRlbXAiLCJyZXNldCIsInNldE51bU9iamVjdHMiLCJFdmVudFRhcmdldCIsIl9saXN0ZW5lcnMiLCJhZGRFdmVudExpc3RlbmVyIiwidHlwZSIsImxpc3RlbmVyIiwibGlzdGVuZXJzIiwiaW5jbHVkZXMiLCJoYXNFdmVudExpc3RlbmVyIiwiaGFzQW55RXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJpbmRleE9mIiwic3BsaWNlIiwiZGlzcGF0Y2hFdmVudCIsImV2ZW50IiwibGlzdGVuZXJBcnJheSIsImNhbGwiLCJRdWF0ZXJuaW9uIiwic2V0RnJvbUF4aXNBbmdsZSIsImFuZ2xlIiwic2luIiwiY29zIiwidG9BeGlzQW5nbGUiLCJ0YXJnZXRBeGlzIiwiYWNvcyIsInNldEZyb21WZWN0b3JzIiwic2Z2X3QxIiwic2Z2X3QyIiwiUEkiLCJtdWx0IiwicXVhdCIsImF4IiwiYXkiLCJheiIsImF3IiwiYngiLCJieSIsImJ6IiwiYnciLCJpbnZlcnNlIiwiY29uanVnYXRlIiwiaW5vcm0yIiwibm9ybWFsaXplRmFzdCIsInF4IiwicXkiLCJxeiIsInF3IiwiaXgiLCJpeSIsIml6IiwiaXciLCJ0b0V1bGVyIiwib3JkZXIiLCJoZWFkaW5nIiwiYXR0aXR1ZGUiLCJiYW5rIiwidGVzdCIsImF0YW4yIiwic3F4Iiwic3F5Iiwic3F6IiwiYXNpbiIsIkVycm9yIiwic2V0RnJvbUV1bGVyIiwiYzEiLCJjMiIsImMzIiwiczEiLCJzMiIsInMzIiwic2xlcnAiLCJ0b1F1YXQiLCJvbWVnYSIsImNvc29tIiwic2lub20iLCJzY2FsZTAiLCJzY2FsZTEiLCJpbnRlZ3JhdGUiLCJhbmd1bGFyVmVsb2NpdHkiLCJkdCIsImFuZ3VsYXJGYWN0b3IiLCJoYWxmX2R0IiwiU0hBUEVfVFlQRVMiLCJTUEhFUkUiLCJQTEFORSIsIkJPWCIsIkNPTVBPVU5EIiwiQ09OVkVYUE9MWUhFRFJPTiIsIkhFSUdIVEZJRUxEIiwiUEFSVElDTEUiLCJDWUxJTkRFUiIsIlRSSU1FU0giLCJTaGFwZSIsImlkIiwiYm91bmRpbmdTcGhlcmVSYWRpdXMiLCJjb2xsaXNpb25SZXNwb25zZSIsImNvbGxpc2lvbkZpbHRlckdyb3VwIiwiY29sbGlzaW9uRmlsdGVyTWFzayIsIm1hdGVyaWFsIiwiYm9keSIsImlkQ291bnRlciIsInVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzIiwiY2FsY3VsYXRlTG9jYWxJbmVydGlhIiwibWFzcyIsImNhbGN1bGF0ZVdvcmxkQUFCQiIsInBvcyIsInR5cGVzIiwiVHJhbnNmb3JtIiwid29ybGRQb2ludCIsInJlc3VsdCIsInBvaW50VG9Mb2NhbEZyYW1lIiwibG9jYWxQb2ludCIsInBvaW50VG9Xb3JsZEZyYW1lIiwidmVjdG9yVG9Xb3JsZEZyYW1lIiwibG9jYWxWZWN0b3IiLCJ0bXBRdWF0JDEiLCJ2ZWN0b3JUb0xvY2FsRnJhbWUiLCJ3b3JsZFZlY3RvciIsIkNvbnZleFBvbHloZWRyb24iLCJwcm9wcyIsInZlcnRpY2VzIiwiZmFjZXMiLCJub3JtYWxzIiwiYXhlcyIsImZhY2VOb3JtYWxzIiwid29ybGRWZXJ0aWNlcyIsIndvcmxkVmVydGljZXNOZWVkc1VwZGF0ZSIsIndvcmxkRmFjZU5vcm1hbHMiLCJ3b3JsZEZhY2VOb3JtYWxzTmVlZHNVcGRhdGUiLCJ1bmlxdWVBeGVzIiwidW5pcXVlRWRnZXMiLCJjb21wdXRlTm9ybWFscyIsInNsaWNlIiwiY29tcHV0ZUVkZ2VzIiwiZWRnZXMiLCJlZGdlIiwiZmFjZSIsIm51bVZlcnRpY2VzIiwiZm91bmQiLCJnZXRGYWNlTm9ybWFsIiwidmVydGV4IiwiY29uc29sZSIsImVycm9yIiwid2FybiIsInZhIiwidmIiLCJ2YyIsImNvbXB1dGVOb3JtYWwiLCJjYiIsImFiIiwiY2xpcEFnYWluc3RIdWxsIiwicG9zQSIsInF1YXRBIiwiaHVsbEIiLCJwb3NCIiwicXVhdEIiLCJzZXBhcmF0aW5nTm9ybWFsIiwibWluRGlzdCIsIm1heERpc3QiLCJXb3JsZE5vcm1hbCIsImNsb3Nlc3RGYWNlQiIsImRtYXgiLCJOdW1iZXIiLCJNQVhfVkFMVUUiLCJ3b3JsZFZlcnRzQjEiLCJ3b3JsZGIiLCJjbGlwRmFjZUFnYWluc3RIdWxsIiwiZmluZFNlcGFyYXRpbmdBeGlzIiwiZmFjZUxpc3RBIiwiZmFjZUxpc3RCIiwiZmFjZUFOb3JtYWxXUzMiLCJXb3JsZG5vcm1hbDEiLCJkZWx0YUMiLCJ3b3JsZEVkZ2UwIiwid29ybGRFZGdlMSIsIkNyb3NzIiwiZG1pbiIsImh1bGxBIiwibnVtRmFjZXNBIiwiZmkiLCJ0ZXN0U2VwQXhpcyIsIm51bUZhY2VzQiIsImUwIiwiZTEiLCJkaXN0IiwiYXhpcyIsInByb2plY3QiLCJtYXhtaW5BIiwibWF4bWluQiIsIm1heEEiLCJtaW5BIiwibWF4QiIsIm1pbkIiLCJkMCIsImQxIiwiZGVwdGgiLCJhYWJibWF4IiwiYWFiYm1pbiIsImNvbXB1dGVMb2NhbEFBQkIiLCJnZXRQbGFuZUNvbnN0YW50T2ZGYWNlIiwiZmFjZV9pIiwiZmFjZUFOb3JtYWxXUyIsImVkZ2UwIiwiV29ybGRFZGdlMCIsIndvcmxkUGxhbmVBbm9ybWFsMSIsInBsYW5lTm9ybWFsV1MxIiwid29ybGRBMSIsImxvY2FsUGxhbmVOb3JtYWwiLCJwbGFuZU5vcm1hbFdTIiwid29ybGRWZXJ0c0IyIiwicFZ0eEluIiwicFZ0eE91dCIsImNsb3Nlc3RGYWNlQSIsInBvbHlBIiwiY29ubmVjdGVkRmFjZXMiLCJudW1WZXJ0aWNlc0EiLCJvdGhlckZhY2UiLCJsb2NhbFBsYW5lRXEiLCJwbGFuZUVxV1MiLCJjbGlwRmFjZUFnYWluc3RQbGFuZSIsInNoaWZ0IiwibG9nIiwicG9pbnQiLCJub3JtYWwiLCJpblZlcnRpY2VzIiwib3V0VmVydGljZXMiLCJwbGFuZU5vcm1hbCIsInBsYW5lQ29uc3RhbnQiLCJuX2RvdF9maXJzdCIsIm5fZG90X2xhc3QiLCJudW1WZXJ0cyIsImZpcnN0VmVydGV4IiwibGFzdFZlcnRleCIsInZpIiwibmV3diIsImNvbXB1dGVXb3JsZFZlcnRpY2VzIiwidmVydHMiLCJ3b3JsZFZlcnRzIiwiY29tcHV0ZVdvcmxkRmFjZU5vcm1hbHMiLCJOIiwid29ybGROb3JtYWxzIiwibWF4MiIsIm5vcm0yIiwibWlueCIsIm1pbnkiLCJtaW56IiwibWF4eCIsIm1heHkiLCJtYXh6IiwidGVtcFdvcmxkVmVydGV4IiwiZ2V0QXZlcmFnZVBvaW50TG9jYWwiLCJ0cmFuc2Zvcm1BbGxQb2ludHMiLCJvZmZzZXQiLCJwb2ludElzSW5zaWRlIiwicG9pbnRJbnNpZGUiLCJ2VG9QIiwicjEiLCJ2VG9Qb2ludEluc2lkZSIsInIyIiwic2hhcGUiLCJsb2NhbEF4aXMiLCJwcm9qZWN0X2xvY2FsQXhpcyIsImxvY2FsT3JpZ2luIiwicHJvamVjdF9sb2NhbE9yaWdpbiIsInZzIiwiYWRkIiwidmFsIiwiQm94IiwiaGFsZkV4dGVudHMiLCJjb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24iLCJ1cGRhdGVDb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24iLCJzeCIsInN5Iiwic3oiLCJWIiwiY2FsY3VsYXRlSW5lcnRpYSIsImdldFNpZGVOb3JtYWxzIiwic2l4VGFyZ2V0VmVjdG9ycyIsInNpZGVzIiwiZXgiLCJmb3JFYWNoV29ybGRDb3JuZXIiLCJjYWxsYmFjayIsIndvcmxkQ29ybmVyVGVtcFBvcyIsIndvcmxkQ29ybmVyc1RlbXAiLCJ3YyIsIkJPRFlfVFlQRVMiLCJEWU5BTUlDIiwiU1RBVElDIiwiS0lORU1BVElDIiwiQk9EWV9TTEVFUF9TVEFURVMiLCJBV0FLRSIsIlNMRUVQWSIsIlNMRUVQSU5HIiwiQm9keSIsIndvcmxkIiwicHJlU3RlcCIsInBvc3RTdGVwIiwidmxhbWJkYSIsInByZXZpb3VzUG9zaXRpb24iLCJpbnRlcnBvbGF0ZWRQb3NpdGlvbiIsImluaXRQb3NpdGlvbiIsInZlbG9jaXR5IiwiaW5pdFZlbG9jaXR5IiwiZm9yY2UiLCJpbnZNYXNzIiwibGluZWFyRGFtcGluZyIsImFsbG93U2xlZXAiLCJzbGVlcFN0YXRlIiwic2xlZXBTcGVlZExpbWl0Iiwic2xlZXBUaW1lTGltaXQiLCJ0aW1lTGFzdFNsZWVweSIsIndha2VVcEFmdGVyTmFycm93cGhhc2UiLCJ0b3JxdWUiLCJpbml0UXVhdGVybmlvbiIsInByZXZpb3VzUXVhdGVybmlvbiIsImludGVycG9sYXRlZFF1YXRlcm5pb24iLCJpbml0QW5ndWxhclZlbG9jaXR5Iiwic2hhcGVzIiwic2hhcGVPZmZzZXRzIiwic2hhcGVPcmllbnRhdGlvbnMiLCJpbmVydGlhIiwiaW52SW5lcnRpYSIsImludkluZXJ0aWFXb3JsZCIsImludk1hc3NTb2x2ZSIsImludkluZXJ0aWFTb2x2ZSIsImludkluZXJ0aWFXb3JsZFNvbHZlIiwiZml4ZWRSb3RhdGlvbiIsImFuZ3VsYXJEYW1waW5nIiwibGluZWFyRmFjdG9yIiwiYWFiYk5lZWRzVXBkYXRlIiwiYm91bmRpbmdSYWRpdXMiLCJ3bGFtYmRhIiwiaXNUcmlnZ2VyIiwiQm9vbGVhbiIsImFkZFNoYXBlIiwidXBkYXRlTWFzc1Byb3BlcnRpZXMiLCJ3YWtlVXAiLCJwcmV2U3RhdGUiLCJ3YWtldXBFdmVudCIsInNsZWVwIiwic2xlZXBUaWNrIiwidGltZSIsInNwZWVkU3F1YXJlZCIsInNwZWVkTGltaXRTcXVhcmVkIiwic2xlZXB5RXZlbnQiLCJzbGVlcEV2ZW50IiwidXBkYXRlU29sdmVNYXNzUHJvcGVydGllcyIsIl9vZmZzZXQiLCJfb3JpZW50YXRpb24iLCJvcmllbnRhdGlvbiIsInVwZGF0ZUJvdW5kaW5nUmFkaXVzIiwicmVtb3ZlU2hhcGUiLCJyYWRpdXMiLCJ1cGRhdGVBQUJCIiwidG1wVmVjIiwidG1wUXVhdCIsImJvZHlRdWF0Iiwic2hhcGVBQUJCIiwidXBkYXRlQUFCQl9zaGFwZUFBQkIiLCJ1cGRhdGVJbmVydGlhV29ybGQiLCJJIiwibTEiLCJ1aXdfbTEiLCJtMiIsInVpd19tMiIsImFwcGx5Rm9yY2UiLCJyZWxhdGl2ZVBvaW50Iiwicm90Rm9yY2UiLCJCb2R5X2FwcGx5Rm9yY2Vfcm90Rm9yY2UiLCJhcHBseUxvY2FsRm9yY2UiLCJsb2NhbEZvcmNlIiwid29ybGRGb3JjZSIsIkJvZHlfYXBwbHlMb2NhbEZvcmNlX3dvcmxkRm9yY2UiLCJyZWxhdGl2ZVBvaW50V29ybGQiLCJCb2R5X2FwcGx5TG9jYWxGb3JjZV9yZWxhdGl2ZVBvaW50V29ybGQiLCJhcHBseVRvcnF1ZSIsImFwcGx5SW1wdWxzZSIsImltcHVsc2UiLCJ2ZWxvIiwiQm9keV9hcHBseUltcHVsc2VfdmVsbyIsInJvdFZlbG8iLCJCb2R5X2FwcGx5SW1wdWxzZV9yb3RWZWxvIiwiYXBwbHlMb2NhbEltcHVsc2UiLCJsb2NhbEltcHVsc2UiLCJ3b3JsZEltcHVsc2UiLCJCb2R5X2FwcGx5TG9jYWxJbXB1bHNlX3dvcmxkSW1wdWxzZSIsIkJvZHlfYXBwbHlMb2NhbEltcHVsc2VfcmVsYXRpdmVQb2ludCIsIkJvZHlfdXBkYXRlTWFzc1Byb3BlcnRpZXNfaGFsZkV4dGVudHMiLCJmaXhlZCIsImdldFZlbG9jaXR5QXRXb3JsZFBvaW50IiwicXVhdE5vcm1hbGl6ZSIsInF1YXROb3JtYWxpemVGYXN0IiwiYW5ndWxhclZlbG8iLCJpTWR0IiwidHgiLCJ0eSIsInR6IiwiQ09MTElERV9FVkVOVF9OQU1FIiwiQnJvYWRwaGFzZSIsInVzZUJvdW5kaW5nQm94ZXMiLCJkaXJ0eSIsImNvbGxpc2lvblBhaXJzIiwicDEiLCJwMiIsIm5lZWRCcm9hZHBoYXNlQ29sbGlzaW9uIiwiYm9keUEiLCJib2R5QiIsImludGVyc2VjdGlvblRlc3QiLCJwYWlyczEiLCJwYWlyczIiLCJkb0JvdW5kaW5nQm94QnJvYWRwaGFzZSIsImRvQm91bmRpbmdTcGhlcmVCcm9hZHBoYXNlIiwiQnJvYWRwaGFzZV9jb2xsaXNpb25QYWlyc19yIiwiYm91bmRpbmdSYWRpdXNTdW0yIiwibWFrZVBhaXJzVW5pcXVlIiwiQnJvYWRwaGFzZV9tYWtlUGFpcnNVbmlxdWVfdGVtcCIsIkJyb2FkcGhhc2VfbWFrZVBhaXJzVW5pcXVlX3AxIiwiQnJvYWRwaGFzZV9tYWtlUGFpcnNVbmlxdWVfcDIiLCJpZDEiLCJpZDIiLCJrZXkiLCJrZXlzIiwicG9wIiwicGFpckluZGV4Iiwic2V0V29ybGQiLCJib3VuZGluZ1NwaGVyZUNoZWNrIiwic2EiLCJzYiIsInBvdyIsImFhYmJRdWVyeSIsIk5haXZlQnJvYWRwaGFzZSIsImJvZGllcyIsIlJheWNhc3RSZXN1bHQiLCJyYXlGcm9tV29ybGQiLCJyYXlUb1dvcmxkIiwiaGl0Tm9ybWFsV29ybGQiLCJoaXRQb2ludFdvcmxkIiwiaGFzSGl0IiwiaGl0RmFjZUluZGV4IiwiZGlzdGFuY2UiLCJzaG91bGRTdG9wIiwiYWJvcnQiLCJfU2hhcGUkdHlwZXMkU1BIRVJFIiwiX1NoYXBlJHR5cGVzJFBMQU5FIiwiX1NoYXBlJHR5cGVzJEJPWCIsIl9TaGFwZSR0eXBlcyRDWUxJTkRFUiIsIl9TaGFwZSR0eXBlcyRDT05WRVhQTyIsIl9TaGFwZSR0eXBlcyRIRUlHSFRGSSIsIl9TaGFwZSR0eXBlcyRUUklNRVNIIiwiUkFZX01PREVTIiwiQ0xPU0VTVCIsIkFOWSIsIkFMTCIsIlJheSIsIl9pbnRlcnNlY3RTcGhlcmUiLCJfaW50ZXJzZWN0UGxhbmUiLCJfaW50ZXJzZWN0Qm94IiwiX2ludGVyc2VjdENvbnZleCIsIl9pbnRlcnNlY3RIZWlnaHRmaWVsZCIsIl9pbnRlcnNlY3RUcmltZXNoIiwidG8iLCJjaGVja0NvbGxpc2lvblJlc3BvbnNlIiwic2tpcEJhY2tmYWNlcyIsIm1vZGUiLCJpbnRlcnNlY3RXb3JsZCIsInVwZGF0ZURpcmVjdGlvbiIsImdldEFBQkIiLCJ0bXBBQUJCJDEiLCJ0bXBBcnJheSIsImJyb2FkcGhhc2UiLCJpbnRlcnNlY3RCb2RpZXMiLCJpbnRlcnNlY3RCb2R5IiwieGkiLCJpbnRlcnNlY3RCb2R5X3hpIiwicWkiLCJpbnRlcnNlY3RCb2R5X3FpIiwiaW50ZXJzZWN0U2hhcGUiLCJkaXN0YW5jZUZyb21JbnRlcnNlY3Rpb24iLCJpbnRlcnNlY3RNZXRob2QiLCJib3giLCJyZXBvcnRlZFNoYXBlIiwid29ybGROb3JtYWwiLCJsZW4iLCJwbGFuZVRvRnJvbSIsInBsYW5lVG9UbyIsIm5fZG90X2RpciIsInBsYW5lUG9pbnRUb0Zyb20iLCJkaXJfc2NhbGVkX3dpdGhfdCIsInJlcG9ydEludGVyc2VjdGlvbiIsImRhdGEiLCJlbGVtZW50U2l6ZSIsImxvY2FsUmF5IiwiaW50ZXJzZWN0SGVpZ2h0ZmllbGRfbG9jYWxSYXkiLCJpbnRlcnNlY3RIZWlnaHRmaWVsZF9pbmRleCIsImlNaW5YIiwiaU1pblkiLCJpTWF4WCIsImlNYXhZIiwiZ2V0SW5kZXhPZlBvc2l0aW9uIiwiZ2V0QWFiYkF0SW5kZXgiLCJnZXRDb252ZXhUcmlhbmdsZVBpbGxhciIsInBpbGxhck9mZnNldCIsIndvcmxkUGlsbGFyT2Zmc2V0IiwicGlsbGFyQ29udmV4IiwiaW50ZXJzZWN0Q29udmV4T3B0aW9ucyIsInNwaGVyZSIsImRlbHRhIiwiaW50ZXJzZWN0aW9uUG9pbnQiLCJSYXlfaW50ZXJzZWN0U3BoZXJlX2ludGVyc2VjdGlvblBvaW50IiwiUmF5X2ludGVyc2VjdFNwaGVyZV9ub3JtYWwiLCJkMiIsImludGVyc2VjdENvbnZleF9ub3JtYWwiLCJpbnRlcnNlY3RDb252ZXhfdmVjdG9yIiwiZmFjZUxpc3QiLCJmcm9tVG9EaXN0YW5jZSIsIk5mYWNlcyIsImZhY2VOb3JtYWwiLCJpbnRlcnNlY3RQb2ludCIsInBvaW50SW5UcmlhbmdsZSIsIm1lc2giLCJpbnRlcnNlY3RUcmltZXNoX25vcm1hbCIsInRyaWFuZ2xlcyIsImludGVyc2VjdFRyaW1lc2hfdHJpYW5nbGVzIiwidHJlZVRyYW5zZm9ybSIsImludGVyc2VjdFRyaW1lc2hfdHJlZVRyYW5zZm9ybSIsImxvY2FsRGlyZWN0aW9uIiwiaW50ZXJzZWN0VHJpbWVzaF9sb2NhbERpcmVjdGlvbiIsImxvY2FsRnJvbSIsImludGVyc2VjdFRyaW1lc2hfbG9jYWxGcm9tIiwibG9jYWxUbyIsImludGVyc2VjdFRyaW1lc2hfbG9jYWxUbyIsIndvcmxkSW50ZXJzZWN0UG9pbnQiLCJpbnRlcnNlY3RUcmltZXNoX3dvcmxkSW50ZXJzZWN0UG9pbnQiLCJpbnRlcnNlY3RUcmltZXNoX3dvcmxkTm9ybWFsIiwiaW5kaWNlcyIsImZyb21Ub0Rpc3RhbmNlU3F1YXJlZCIsInRyZWUiLCJyYXlRdWVyeSIsInRyaWFuZ2xlc0luZGV4IiwiZ2V0Tm9ybWFsIiwiZ2V0VmVydGV4Iiwic3F1YXJlZERpc3RhbmNlIiwidjAiLCJ2MSIsInYyIiwiZG90MDAiLCJkb3QwMSIsImRvdDAyIiwiZG90MTEiLCJkb3QxMiIsImludGVyc2VjdCIsIlNBUEJyb2FkcGhhc2UiLCJjaGVja0JvdW5kcyIsImF4aXNJbmRleCIsImJpUG9zIiwiYmpQb3MiLCJyaSIsInJqIiwiYm91bmRBMiIsImJvdW5kQjEiLCJpbnNlcnRpb25Tb3J0WCIsImluc2VydGlvblNvcnRZIiwiaW5zZXJ0aW9uU29ydFoiLCJheGlzTGlzdCIsIl9hZGRCb2R5SGFuZGxlciIsIl9yZW1vdmVCb2R5SGFuZGxlciIsImlkeCIsInNvcnRMaXN0IiwiYXV0b0RldGVjdEF4aXMiLCJzdW1YIiwic3VtWDIiLCJzdW1ZIiwic3VtWTIiLCJzdW1aIiwic3VtWjIiLCJjZW50ZXJYIiwiY2VudGVyWSIsImNlbnRlcloiLCJ2YXJpYW5jZVgiLCJ2YXJpYW5jZVkiLCJ2YXJpYW5jZVoiLCJVdGlscyIsImRlZmF1bHRzIiwiQ29uc3RyYWludCIsImVxdWF0aW9ucyIsImNvbGxpZGVDb25uZWN0ZWQiLCJ3YWtlVXBCb2RpZXMiLCJ1cGRhdGUiLCJlbmFibGUiLCJlcXMiLCJlbmFibGVkIiwiZGlzYWJsZSIsIkphY29iaWFuRWxlbWVudCIsInNwYXRpYWwiLCJyb3RhdGlvbmFsIiwibXVsdGlwbHlFbGVtZW50IiwiZWxlbWVudCIsIm11bHRpcGx5VmVjdG9ycyIsIkVxdWF0aW9uIiwibWluRm9yY2UiLCJtYXhGb3JjZSIsInNpIiwic2oiLCJlcHMiLCJqYWNvYmlhbkVsZW1lbnRBIiwiamFjb2JpYW5FbGVtZW50QiIsInNldFNwb29rUGFyYW1zIiwic3RpZmZuZXNzIiwicmVsYXhhdGlvbiIsInRpbWVTdGVwIiwiY29tcHV0ZUIiLCJHVyIsImNvbXB1dGVHVyIsIkdxIiwiY29tcHV0ZUdxIiwiR2lNZiIsImNvbXB1dGVHaU1mIiwiR0EiLCJHQiIsInhqIiwidmoiLCJ3aSIsIndqIiwiY29tcHV0ZUdXbGFtYmRhIiwidGkiLCJmaiIsInRqIiwiaW52TWFzc2kiLCJpbnZNYXNzaiIsImlNZmkiLCJpTWZqIiwiaW52SWlfdm11bHRfdGF1aSIsImludklqX3ZtdWx0X3RhdWoiLCJjb21wdXRlR2lNR3QiLCJpbnZJaSIsImludklqIiwiYWRkVG9XbGFtYmRhIiwiZGVsdGFsYW1iZGEiLCJhZGRUb1dsYW1iZGFfdGVtcCIsImNvbXB1dGVDIiwiQ29udGFjdEVxdWF0aW9uIiwicmVzdGl0dXRpb24iLCJuaSIsInJpeG4iLCJDb250YWN0RXF1YXRpb25fY29tcHV0ZUJfdGVtcDEiLCJyanhuIiwiQ29udGFjdEVxdWF0aW9uX2NvbXB1dGVCX3RlbXAyIiwicGVuZXRyYXRpb25WZWMiLCJDb250YWN0RXF1YXRpb25fY29tcHV0ZUJfdGVtcDMiLCJlUGx1c09uZSIsImdldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWwiLCJDb250YWN0RXF1YXRpb25fZ2V0SW1wYWN0VmVsb2NpdHlBbG9uZ05vcm1hbF92aSIsIkNvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3ZqIiwiQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfeGkiLCJDb250YWN0RXF1YXRpb25fZ2V0SW1wYWN0VmVsb2NpdHlBbG9uZ05vcm1hbF94aiIsInJlbFZlbCIsIkNvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3JlbFZlbCIsIlBvaW50VG9Qb2ludENvbnN0cmFpbnQiLCJwaXZvdEEiLCJwaXZvdEIiLCJlcXVhdGlvblgiLCJlcXVhdGlvblkiLCJlcXVhdGlvbloiLCJDb25lRXF1YXRpb24iLCJheGlzQSIsImF4aXNCIiwibmoiLCJuaXhuaiIsInRtcFZlYzEkMiIsIm5qeG5pIiwidG1wVmVjMiQyIiwiUm90YXRpb25hbEVxdWF0aW9uIiwibWF4QW5nbGUiLCJ0bXBWZWMxJDEiLCJ0bXBWZWMyJDEiLCJDb25lVHdpc3RDb25zdHJhaW50IiwidHdpc3RBbmdsZSIsImNvbmVFcXVhdGlvbiIsInR3aXN0RXF1YXRpb24iLCJjb25lIiwidHdpc3QiLCJEaXN0YW5jZUNvbnN0cmFpbnQiLCJkaXN0YW5jZUVxdWF0aW9uIiwiZXEiLCJoYWxmRGlzdCIsIkxvY2tDb25zdHJhaW50IiwiaGFsZldheSIsInhBIiwieEIiLCJ5QSIsInlCIiwiekEiLCJ6QiIsInJvdGF0aW9uYWxFcXVhdGlvbjEiLCJyb3RhdGlvbmFsRXF1YXRpb24yIiwicm90YXRpb25hbEVxdWF0aW9uMyIsIm1vdG9yRXF1YXRpb24iLCJyMyIsIlJvdGF0aW9uYWxNb3RvckVxdWF0aW9uIiwidGFyZ2V0VmVsb2NpdHkiLCJIaW5nZUNvbnN0cmFpbnQiLCJyb3RhdGlvbmFsMSIsInJvdGF0aW9uYWwyIiwibW90b3IiLCJlbmFibGVNb3RvciIsImRpc2FibGVNb3RvciIsInNldE1vdG9yU3BlZWQiLCJzcGVlZCIsInNldE1vdG9yTWF4Rm9yY2UiLCJ3b3JsZEF4aXNBIiwiSGluZ2VDb25zdHJhaW50X3VwZGF0ZV90bXBWZWMxIiwid29ybGRBeGlzQiIsIkhpbmdlQ29uc3RyYWludF91cGRhdGVfdG1wVmVjMiIsIkZyaWN0aW9uRXF1YXRpb24iLCJzbGlwRm9yY2UiLCJyaXh0IiwiRnJpY3Rpb25FcXVhdGlvbl9jb21wdXRlQl90ZW1wMSIsInJqeHQiLCJGcmljdGlvbkVxdWF0aW9uX2NvbXB1dGVCX3RlbXAyIiwiQ29udGFjdE1hdGVyaWFsIiwibWF0ZXJpYWxzIiwiZnJpY3Rpb24iLCJjb250YWN0RXF1YXRpb25TdGlmZm5lc3MiLCJjb250YWN0RXF1YXRpb25SZWxheGF0aW9uIiwiZnJpY3Rpb25FcXVhdGlvblN0aWZmbmVzcyIsImZyaWN0aW9uRXF1YXRpb25SZWxheGF0aW9uIiwiTWF0ZXJpYWwiLCJuYW1lIiwiU3ByaW5nIiwicmVzdExlbmd0aCIsImRhbXBpbmciLCJsb2NhbEFuY2hvckEiLCJsb2NhbEFuY2hvckIiLCJ3b3JsZEFuY2hvckEiLCJzZXRXb3JsZEFuY2hvckEiLCJ3b3JsZEFuY2hvckIiLCJzZXRXb3JsZEFuY2hvckIiLCJnZXRXb3JsZEFuY2hvckEiLCJnZXRXb3JsZEFuY2hvckIiLCJhcHBseUZvcmNlX3IiLCJyX3VuaXQiLCJhcHBseUZvcmNlX3JfdW5pdCIsImFwcGx5Rm9yY2VfdSIsImFwcGx5Rm9yY2VfZiIsImFwcGx5Rm9yY2VfdG1wIiwiYXBwbHlGb3JjZV93b3JsZEFuY2hvckEiLCJhcHBseUZvcmNlX3dvcmxkQW5jaG9yQiIsImFwcGx5Rm9yY2VfcmkiLCJhcHBseUZvcmNlX3JqIiwicmlfeF9mIiwiYXBwbHlGb3JjZV9yaV94X2YiLCJyal94X2YiLCJhcHBseUZvcmNlX3JqX3hfZiIsInJsZW4iLCJXaGVlbEluZm8iLCJtYXhTdXNwZW5zaW9uVHJhdmVsIiwiY3VzdG9tU2xpZGluZ1JvdGF0aW9uYWxTcGVlZCIsInVzZUN1c3RvbVNsaWRpbmdSb3RhdGlvbmFsU3BlZWQiLCJzbGlkaW5nIiwiY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludExvY2FsIiwiY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludFdvcmxkIiwiZGlyZWN0aW9uTG9jYWwiLCJkaXJlY3Rpb25Xb3JsZCIsImF4bGVMb2NhbCIsImF4bGVXb3JsZCIsInN1c3BlbnNpb25SZXN0TGVuZ3RoIiwic3VzcGVuc2lvbk1heExlbmd0aCIsInN1c3BlbnNpb25TdGlmZm5lc3MiLCJkYW1waW5nQ29tcHJlc3Npb24iLCJkYW1waW5nUmVsYXhhdGlvbiIsImZyaWN0aW9uU2xpcCIsImZvcndhcmRBY2NlbGVyYXRpb24iLCJzaWRlQWNjZWxlcmF0aW9uIiwic3RlZXJpbmciLCJyb3RhdGlvbiIsImRlbHRhUm90YXRpb24iLCJyb2xsSW5mbHVlbmNlIiwibWF4U3VzcGVuc2lvbkZvcmNlIiwiZW5naW5lRm9yY2UiLCJicmFrZSIsImlzRnJvbnRXaGVlbCIsImNsaXBwZWRJbnZDb250YWN0RG90U3VzcGVuc2lvbiIsInN1c3BlbnNpb25SZWxhdGl2ZVZlbG9jaXR5Iiwic3VzcGVuc2lvbkZvcmNlIiwic2xpcEluZm8iLCJza2lkSW5mbyIsInN1c3BlbnNpb25MZW5ndGgiLCJzaWRlSW1wdWxzZSIsImZvcndhcmRJbXB1bHNlIiwicmF5Y2FzdFJlc3VsdCIsIndvcmxkVHJhbnNmb3JtIiwiaXNJbkNvbnRhY3QiLCJ1cGRhdGVXaGVlbCIsImNoYXNzaXMiLCJyZWxwb3MiLCJjaGFzc2lzX3ZlbG9jaXR5X2F0X2NvbnRhY3RQb2ludCIsInByb2pWZWwiLCJpbnYiLCJSYXljYXN0VmVoaWNsZSIsImNoYXNzaXNCb2R5Iiwid2hlZWxJbmZvcyIsImluZGV4UmlnaHRBeGlzIiwiaW5kZXhGb3J3YXJkQXhpcyIsImluZGV4VXBBeGlzIiwiY29uc3RyYWludHMiLCJwcmVTdGVwQ2FsbGJhY2siLCJjdXJyZW50VmVoaWNsZVNwZWVkS21Ib3VyIiwibnVtV2hlZWxzT25Hcm91bmQiLCJhZGRXaGVlbCIsImluZm8iLCJzZXRTdGVlcmluZ1ZhbHVlIiwid2hlZWxJbmRleCIsIndoZWVsIiwiYXBwbHlFbmdpbmVGb3JjZSIsInNldEJyYWtlIiwiYWRkVG9Xb3JsZCIsImFkZEJvZHkiLCJ0aGF0IiwidXBkYXRlVmVoaWNsZSIsImdldFZlaGljbGVBeGlzV29ybGQiLCJudW1XaGVlbHMiLCJ1cGRhdGVXaGVlbFRyYW5zZm9ybSIsImZvcndhcmRXb3JsZCIsImNhc3RSYXkiLCJ1cGRhdGVTdXNwZW5zaW9uIiwidXBkYXRlRnJpY3Rpb24iLCJoaXROb3JtYWxXb3JsZFNjYWxlZFdpdGhQcm9qIiwiZndkIiwidmVsIiwibSIsInByb2oiLCJwcm9qMiIsImRlbHRhVGltZSIsImNoYXNzaXNNYXNzIiwid19pdCIsInN1c3BfbGVuZ3RoIiwiY3VycmVudF9sZW5ndGgiLCJsZW5ndGhfZGlmZiIsInByb2plY3RlZF9yZWxfdmVsIiwic3VzcF9kYW1waW5nIiwicmVtb3ZlRnJvbVdvcmxkIiwicmVtb3ZlQm9keSIsInJheXZlY3RvciIsImNhc3RSYXlfcmF5dmVjdG9yIiwiY2FzdFJheV90YXJnZXQiLCJ1cGRhdGVXaGVlbFRyYW5zZm9ybVdvcmxkIiwicmF5bGVuIiwic291cmNlIiwib2xkU3RhdGUiLCJyYXlUZXN0Iiwib2JqZWN0IiwiZ3JvdW5kT2JqZWN0IiwiaGl0RGlzdGFuY2UiLCJtaW5TdXNwZW5zaW9uTGVuZ3RoIiwibWF4U3VzcGVuc2lvbkxlbmd0aCIsImRlbm9taW5hdG9yIiwidXAiLCJ0bXBWZWM0IiwicmlnaHQiLCJ0bXBWZWM1IiwidG1wVmVjNiIsInN0ZWVyaW5nT3JuIiwicm90YXRpbmdPcm4iLCJnZXRXaGVlbFRyYW5zZm9ybVdvcmxkIiwic3VyZk5vcm1hbFdTX3NjYWxlZF9wcm9qIiwidXBkYXRlRnJpY3Rpb25fc3VyZk5vcm1hbFdTX3NjYWxlZF9wcm9qIiwiZm9yd2FyZFdTIiwidXBkYXRlRnJpY3Rpb25fZm9yd2FyZFdTIiwiYXhsZSIsInVwZGF0ZUZyaWN0aW9uX2F4bGUiLCJheGxlaSIsIndoZWVsVHJhbnMiLCJkaXJlY3Rpb25zIiwic3VyZk5vcm1hbFdTIiwicmVzb2x2ZVNpbmdsZUJpbGF0ZXJhbCIsInNpZGVGcmljdGlvblN0aWZmbmVzczIiLCJzaWRlRmFjdG9yIiwiZndkRmFjdG9yIiwicm9sbGluZ0ZyaWN0aW9uIiwiZGVmYXVsdFJvbGxpbmdGcmljdGlvbkltcHVsc2UiLCJtYXhJbXB1bHNlIiwiY2FsY1JvbGxpbmdGcmljdGlvbiIsImZhY3RvciIsIm1heGltcCIsIm1heGltcFNpZGUiLCJtYXhpbXBTcXVhcmVkIiwiaW1wdWxzZVNxdWFyZWQiLCJyZWxfcG9zIiwicmVsX3BvczIiLCJzaWRlSW1wIiwiY2FsY1JvbGxpbmdGcmljdGlvbl92ZWwxIiwiY2FsY1JvbGxpbmdGcmljdGlvbl92ZWwyIiwiY2FsY1JvbGxpbmdGcmljdGlvbl92ZWwiLCJib2R5MCIsImJvZHkxIiwiZnJpY3Rpb25Qb3NXb3JsZCIsImZyaWN0aW9uRGlyZWN0aW9uV29ybGQiLCJqMSIsImNvbnRhY3RQb3NXb3JsZCIsInZlbDEiLCJ2ZWwyIiwidnJlbCIsImRlbm9tMCIsImNvbXB1dGVJbXB1bHNlRGVub21pbmF0b3IiLCJkZW5vbTEiLCJqYWNEaWFnQUJJbnYiLCJjb21wdXRlSW1wdWxzZURlbm9taW5hdG9yX3IwIiwiY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcl9jMCIsImNvbXB1dGVJbXB1bHNlRGVub21pbmF0b3JfdmVjIiwiY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcl9tIiwicjAiLCJjMCIsInZlYyIsInJlc29sdmVTaW5nbGVCaWxhdGVyYWxfdmVsMSIsInJlc29sdmVTaW5nbGVCaWxhdGVyYWxfdmVsMiIsInJlc29sdmVTaW5nbGVCaWxhdGVyYWxfdmVsIiwicG9zMSIsImJvZHkyIiwicG9zMiIsIm5vcm1hbExlblNxciIsInJlbF92ZWwiLCJjb250YWN0RGFtcGluZyIsIm1hc3NUZXJtIiwiU3BoZXJlIiwiQ3lsaW5kZXIiLCJyYWRpdXNUb3AiLCJyYWRpdXNCb3R0b20iLCJoZWlnaHQiLCJudW1TZWdtZW50cyIsImJvdHRvbWZhY2UiLCJ0b3BmYWNlIiwidGhldGEiLCJ0aGV0YU4iLCJQYXJ0aWNsZSIsIlBsYW5lIiwid29ybGROb3JtYWxOZWVkc1VwZGF0ZSIsImNvbXB1dGVXb3JsZE5vcm1hbCIsInRlbXBOb3JtYWwiLCJtYXhWYWwiLCJIZWlnaHRmaWVsZCIsIm1heFZhbHVlIiwibWluVmFsdWUiLCJjYWNoZUVuYWJsZWQiLCJfY2FjaGVkUGlsbGFycyIsInVwZGF0ZU1pblZhbHVlIiwidXBkYXRlTWF4VmFsdWUiLCJzZXRIZWlnaHRWYWx1ZUF0SW5kZXgiLCJ5aSIsImNsZWFyQ2FjaGVkQ29udmV4VHJpYW5nbGVQaWxsYXIiLCJnZXRSZWN0TWluTWF4IiwiY2xhbXAiLCJmbG9vciIsImdldFRyaWFuZ2xlQXQiLCJlZGdlQ2xhbXAiLCJnZXRIZWlnaHRBdF9pZHgiLCJsb3dlckRpc3QyIiwidXBwZXJEaXN0MiIsInVwcGVyIiwiZ2V0VHJpYW5nbGUiLCJnZXROb3JtYWxBdCIsImdldE5vcm1hbEF0X2EiLCJnZXROb3JtYWxBdF9iIiwiZ2V0Tm9ybWFsQXRfYyIsImdldE5vcm1hbEF0X2UwIiwiZ2V0Tm9ybWFsQXRfZTEiLCJnZXRIZWlnaHRBdCIsImdldEhlaWdodEF0X2EiLCJnZXRIZWlnaHRBdF9iIiwiZ2V0SGVpZ2h0QXRfYyIsImJhcnljZW50cmljV2VpZ2h0cyIsImdldEhlaWdodEF0X3dlaWdodHMiLCJnZXRDYWNoZUNvbnZleFRyaWFuZ2xlUGlsbGFyS2V5IiwiZ2V0VXBwZXJUcmlhbmdsZSIsImdldENhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyIiwic2V0Q2FjaGVkQ29udmV4VHJpYW5nbGVQaWxsYXIiLCJjb252ZXgiLCJvZmZzZXRSZXN1bHQiLCJzZXRIZWlnaHRzRnJvbUltYWdlIiwiaW1hZ2UiLCJjYW52YXMiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJ3aWR0aCIsImNvbnRleHQiLCJnZXRDb250ZXh0IiwiZHJhd0ltYWdlIiwiaW1hZ2VEYXRhIiwiZ2V0SW1hZ2VEYXRhIiwidW5zaGlmdCIsImN4IiwiY3kiLCJPY3RyZWVOb2RlIiwicm9vdCIsImNoaWxkcmVuIiwiaW5zZXJ0IiwiZWxlbWVudERhdGEiLCJsZXZlbCIsIm5vZGVEYXRhIiwibWF4RGVwdGgiLCJzdWJkaXZpZGVkIiwic3ViZGl2aWRlIiwiaGFsZkRpYWdvbmFsIiwiY2hpbGQiLCJxdWV1ZSIsIm5vZGUiLCJBcnJheSIsInByb3RvdHlwZSIsImFwcGx5IiwidG1wQUFCQiIsInJlbW92ZUVtcHR5Tm9kZXMiLCJPY3RyZWUiLCJUcmltZXNoIiwiRmxvYXQzMkFycmF5IiwiSW50MTZBcnJheSIsInVwZGF0ZUVkZ2VzIiwidXBkYXRlTm9ybWFscyIsInVwZGF0ZVRyZWUiLCJ0cmlhbmdsZUFBQkIiLCJpMyIsIl9nZXRVbnNjYWxlZFZlcnRleCIsImdldFRyaWFuZ2xlc0luQUFCQiIsInVuc2NhbGVkQUFCQiIsImlzeCIsImlzeSIsImlzeiIsInNldFNjYWxlIiwid2FzVW5pZm9ybSIsImlzVW5pZm9ybSIsImNvbXB1dGVOb3JtYWxzX24iLCJPYmplY3QiLCJzcGxpdCIsInBhcnNlSW50IiwiZ2V0RWRnZVZlcnRleCIsImVkZ2VJbmRleCIsImZpcnN0T3JTZWNvbmQiLCJ2ZXJ0ZXhTdG9yZSIsInZlcnRleEluZGV4IiwiZ2V0RWRnZVZlY3RvciIsInZlY3RvclN0b3JlIiwiZ2V0RWRnZVZlY3Rvcl92YSIsImdldEVkZ2VWZWN0b3JfdmIiLCJvdXQiLCJnZXRXb3JsZFZlcnRleCIsImdldFRyaWFuZ2xlVmVydGljZXMiLCJjbGlfYWFiYiIsImNvbXB1dGVMb2NhbEFBQkJfd29ybGRWZXJ0IiwiY2FsY3VsYXRlV29ybGRBQUJCX2ZyYW1lIiwiY2FsY3VsYXRlV29ybGRBQUJCX2FhYmIiLCJjcmVhdGVUb3J1cyIsInR1YmUiLCJyYWRpYWxTZWdtZW50cyIsInR1YnVsYXJTZWdtZW50cyIsImFyYyIsIlNvbHZlciIsImFkZEVxdWF0aW9uIiwicmVtb3ZlRXF1YXRpb24iLCJyZW1vdmVBbGxFcXVhdGlvbnMiLCJHU1NvbHZlciIsIml0ZXJhdGlvbnMiLCJ0b2xlcmFuY2UiLCJpdGVyIiwibWF4SXRlciIsInRvbFNxdWFyZWQiLCJOZXEiLCJOYm9kaWVzIiwiaW52QyIsImRlbHRhbGFtYmRhVG90IiwiR1dsYW1iZGEiLCJsYW1iZGFqIiwiaW52Q3MiLCJHU1NvbHZlcl9zb2x2ZV9pbnZDcyIsIkJzIiwiR1NTb2x2ZXJfc29sdmVfQnMiLCJsYW1iZGEiLCJHU1NvbHZlcl9zb2x2ZV9sYW1iZGEiLCJpbnZEdCIsIlBvb2wiLCJvYmplY3RzIiwicmVsZWFzZSIsImFyZ3MiLCJOYXJncyIsImNvbnN0cnVjdE9iamVjdCIsInJlc2l6ZSIsInNpemUiLCJWZWMzUG9vbCIsIl9DT0xMSVNJT05fVFlQRVMkc3BoZSIsIl9DT0xMSVNJT05fVFlQRVMkc3BoZTIiLCJfQ09MTElTSU9OX1RZUEVTJGJveEIiLCJfQ09MTElTSU9OX1RZUEVTJHNwaGUzIiwiX0NPTExJU0lPTl9UWVBFUyRwbGFuIiwiX0NPTExJU0lPTl9UWVBFUyRjb252IiwiX0NPTExJU0lPTl9UWVBFUyRzcGhlNCIsIl9DT0xMSVNJT05fVFlQRVMkcGxhbjIiLCJfQ09MTElTSU9OX1RZUEVTJGJveEMiLCJfQ09MTElTSU9OX1RZUEVTJHNwaGU1IiwiX0NPTExJU0lPTl9UWVBFUyRib3hIIiwiX0NPTExJU0lPTl9UWVBFUyRjb252MiIsIl9DT0xMSVNJT05fVFlQRVMkc3BoZTYiLCJfQ09MTElTSU9OX1RZUEVTJHBsYW4zIiwiX0NPTExJU0lPTl9UWVBFUyRib3hQIiwiX0NPTExJU0lPTl9UWVBFUyRjb252MyIsIl9DT0xMSVNJT05fVFlQRVMkY3lsaSIsIl9DT0xMSVNJT05fVFlQRVMkc3BoZTciLCJfQ09MTElTSU9OX1RZUEVTJHBsYW40IiwiX0NPTExJU0lPTl9UWVBFUyRib3hDMiIsIl9DT0xMSVNJT05fVFlQRVMkY29udjQiLCJfQ09MTElTSU9OX1RZUEVTJGhlaWciLCJfQ09MTElTSU9OX1RZUEVTJHBhcnQiLCJfQ09MTElTSU9OX1RZUEVTJHNwaGU4IiwiX0NPTExJU0lPTl9UWVBFUyRwbGFuNSIsIkNPTExJU0lPTl9UWVBFUyIsInNwaGVyZVNwaGVyZSIsInNwaGVyZVBsYW5lIiwiYm94Qm94Iiwic3BoZXJlQm94IiwicGxhbmVCb3giLCJjb252ZXhDb252ZXgiLCJzcGhlcmVDb252ZXgiLCJwbGFuZUNvbnZleCIsImJveENvbnZleCIsInNwaGVyZUhlaWdodGZpZWxkIiwiYm94SGVpZ2h0ZmllbGQiLCJjb252ZXhIZWlnaHRmaWVsZCIsInNwaGVyZVBhcnRpY2xlIiwicGxhbmVQYXJ0aWNsZSIsImJveFBhcnRpY2xlIiwiY29udmV4UGFydGljbGUiLCJjeWxpbmRlckN5bGluZGVyIiwic3BoZXJlQ3lsaW5kZXIiLCJwbGFuZUN5bGluZGVyIiwiYm94Q3lsaW5kZXIiLCJjb252ZXhDeWxpbmRlciIsImhlaWdodGZpZWxkQ3lsaW5kZXIiLCJwYXJ0aWNsZUN5bGluZGVyIiwic3BoZXJlVHJpbWVzaCIsInBsYW5lVHJpbWVzaCIsIk5hcnJvd3BoYXNlIiwiY29udGFjdFBvaW50UG9vbCIsImZyaWN0aW9uRXF1YXRpb25Qb29sIiwiZnJpY3Rpb25SZXN1bHQiLCJ2M3Bvb2wiLCJjdXJyZW50Q29udGFjdE1hdGVyaWFsIiwiZW5hYmxlRnJpY3Rpb25SZWR1Y3Rpb24iLCJkZWZhdWx0Q29udGFjdE1hdGVyaWFsIiwiY3JlYXRlQ29udGFjdEVxdWF0aW9uIiwib3ZlcnJpZGVTaGFwZUEiLCJvdmVycmlkZVNoYXBlQiIsImNtIiwibWF0QSIsIm1hdEIiLCJjcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0IiwiY29udGFjdEVxdWF0aW9uIiwib3V0QXJyYXkiLCJzaGFwZUEiLCJzaGFwZUIiLCJtdWciLCJncmF2aXR5IiwicmVkdWNlZE1hc3MiLCJwb29sIiwiY3JlYXRlRnJpY3Rpb25Gcm9tQXZlcmFnZSIsIm51bUNvbnRhY3RzIiwiZjEiLCJmMiIsImF2ZXJhZ2VOb3JtYWwiLCJhdmVyYWdlQ29udGFjdFBvaW50QSIsImF2ZXJhZ2VDb250YWN0UG9pbnRCIiwiaW52TnVtQ29udGFjdHMiLCJnZXRDb250YWN0cyIsIm9sZGNvbnRhY3RzIiwiZnJpY3Rpb25Qb29sIiwidG1wUXVhdDEiLCJxaiIsInRtcFF1YXQyIiwidG1wVmVjMSIsInRtcFZlYzIiLCJib2R5Q29udGFjdE1hdGVyaWFsIiwiZ2V0Q29udGFjdE1hdGVyaWFsIiwianVzdFRlc3QiLCJzaGFwZUNvbnRhY3RNYXRlcmlhbCIsInJlc29sdmVySW5kZXgiLCJyZXNvbHZlciIsInJldHZhbCIsInNoYXBlT3ZlcmxhcEtlZXBlciIsImJvZHlPdmVybGFwS2VlcGVyIiwicnNpIiwicnNqIiwiY29udGFjdEVxIiwicG9pbnRfb25fcGxhbmVfdG9fc3BoZXJlIiwicGxhbmVfdG9fc3BoZXJlX29ydGhvIiwic3BoZXJlQm94X3NpZGVzIiwiYm94X3RvX3NwaGVyZSIsIlIiLCJzaWRlX25zIiwic3BoZXJlQm94X3NpZGVfbnMiLCJzaWRlX25zMSIsInNwaGVyZUJveF9zaWRlX25zMSIsInNpZGVfbnMyIiwic3BoZXJlQm94X3NpZGVfbnMyIiwic2lkZV9oIiwic2lkZV9wZW5ldHJhdGlvbnMiLCJzaWRlX2RvdDEiLCJzaWRlX2RvdDIiLCJzaWRlX2Rpc3RhbmNlIiwibnNpZGVzIiwibnMiLCJzcGhlcmVCb3hfbnMiLCJuczEiLCJzcGhlcmVCb3hfbnMxIiwibnMyIiwic3BoZXJlQm94X25zMiIsImgxIiwiaDIiLCJkb3QxIiwiZG90MiIsInNwaGVyZV90b19jb3JuZXIiLCJzcGhlcmVCb3hfc3BoZXJlX3RvX2Nvcm5lciIsImVkZ2VUYW5nZW50IiwiZWRnZUNlbnRlciIsIm9ydGhvZ29uYWwiLCJOc2lkZXMiLCJvcnRob25vcm0iLCJ0ZGlzdCIsIm5kaXN0IiwicmVzIiwic2VwQXhpcyIsImNvbnZleENvbnZleF9zZXBBeGlzIiwiY29udmV4Q29udmV4X3EiLCJjb252ZXhfdG9fc3BoZXJlIiwid29ybGRDb3JuZXIiLCJzcGhlcmVDb252ZXhfd29ybGRDb3JuZXIiLCJzcGhlcmVDb252ZXhfc3BoZXJlVG9Db3JuZXIiLCJuZmFjZXMiLCJzcGhlcmVDb252ZXhfd29ybGROb3JtYWwiLCJzcGhlcmVDb252ZXhfd29ybGRQb2ludCIsIndvcmxkU3BoZXJlUG9pbnRDbG9zZXN0VG9QbGFuZSIsInNwaGVyZUNvbnZleF93b3JsZFNwaGVyZVBvaW50Q2xvc2VzdFRvUGxhbmUiLCJzcGhlcmVDb252ZXhfcGVuZXRyYXRpb25WZWMiLCJwZW5ldHJhdGlvbiIsIndvcmxkUG9pbnRUb1NwaGVyZSIsInNwaGVyZUNvbnZleF9zcGhlcmVUb1dvcmxkUG9pbnQiLCJmYWNlVmVydHMiLCJOdmVydHMiLCJ3b3JsZFZlcnRleCIsInBvaW50SW5Qb2x5Z29uIiwicGVuZXRyYXRpb25WZWMyIiwicGVuZXRyYXRpb25TcGhlcmVQb2ludCIsIk5mYWNldmVydHMiLCJzcGhlcmVDb252ZXhfZWRnZSIsImVkZ2VVbml0Iiwic3BoZXJlQ29udmV4X2VkZ2VVbml0IiwidjFfdG9feGkiLCJ4aV90b19wIiwicGxhbmVTaGFwZSIsImNvbnZleFNoYXBlIiwicGxhbmVQb3NpdGlvbiIsImNvbnZleFBvc2l0aW9uIiwicGxhbmVRdWF0IiwiY29udmV4UXVhdCIsInBsYW5lQm9keSIsImNvbnZleEJvZHkiLCJwbGFuZUNvbnZleF92IiwicGxhbmVDb252ZXhfbm9ybWFsIiwicGxhbmVDb252ZXhfcmVscG9zIiwicHJvamVjdGVkIiwicGxhbmVDb252ZXhfcHJvamVjdGVkIiwic3BoZXJlU2hhcGUiLCJoZlNoYXBlIiwic3BoZXJlUG9zIiwiaGZQb3MiLCJzcGhlcmVRdWF0IiwiaGZRdWF0Iiwic3BoZXJlQm9keSIsImhmQm9keSIsInNwaGVyZUhlaWdodGZpZWxkX3RtcDIiLCJsb2NhbFNwaGVyZVBvcyIsInNwaGVyZUhlaWdodGZpZWxkX3RtcDEiLCJjZWlsIiwibWluTWF4IiwibnVtQ29udGFjdHNCZWZvcmUiLCJpbnRlcnNlY3RpbmciLCJjb252ZXhQb3MiLCJjb252ZXhIZWlnaHRmaWVsZF90bXAyIiwiY29udmV4SGVpZ2h0ZmllbGRfZmFjZUxpc3QiLCJsb2NhbENvbnZleFBvcyIsImNvbnZleEhlaWdodGZpZWxkX3RtcDEiLCJwYXJ0aWNsZVNwaGVyZV9ub3JtYWwiLCJwYXJ0aWNsZVBsYW5lX25vcm1hbCIsInBhcnRpY2xlUGxhbmVfcmVscG9zIiwicGFydGljbGVQbGFuZV9wcm9qZWN0ZWQiLCJwZW5ldHJhdGVkRmFjZUluZGV4IiwicGVuZXRyYXRlZEZhY2VOb3JtYWwiLCJjb252ZXhQYXJ0aWNsZV9wZW5ldHJhdGVkRmFjZU5vcm1hbCIsIndvcmxkUGVuZXRyYXRpb25WZWMiLCJjb252ZXhQYXJ0aWNsZV93b3JsZFBlbmV0cmF0aW9uVmVjIiwibWluUGVuZXRyYXRpb24iLCJsb2NhbCIsImNvbnZleFBhcnRpY2xlX2xvY2FsIiwiY3FqIiwiY29udmV4UGFydGljbGVfdmVydGV4VG9QYXJ0aWNsZSIsInRyaW1lc2hTaGFwZSIsInRyaW1lc2hQb3MiLCJ0cmltZXNoUXVhdCIsInRyaW1lc2hCb2R5IiwiZWRnZVZlcnRleEEiLCJzcGhlcmVUcmltZXNoX2VkZ2VWZXJ0ZXhBIiwiZWRnZVZlcnRleEIiLCJzcGhlcmVUcmltZXNoX2VkZ2VWZXJ0ZXhCIiwiZWRnZVZlY3RvciIsInNwaGVyZVRyaW1lc2hfZWRnZVZlY3RvciIsImVkZ2VWZWN0b3JVbml0Iiwic3BoZXJlVHJpbWVzaF9lZGdlVmVjdG9yVW5pdCIsInNwaGVyZVRyaW1lc2hfbG9jYWxTcGhlcmVQb3MiLCJzcGhlcmVUcmltZXNoX3RtcCIsImxvY2FsU3BoZXJlQUFCQiIsInNwaGVyZVRyaW1lc2hfbG9jYWxTcGhlcmVBQUJCIiwic3BoZXJlVHJpbWVzaF92MiIsInNwaGVyZVRyaW1lc2hfcmVscG9zIiwic3BoZXJlVHJpbWVzaF90cmlhbmdsZXMiLCJzcGhlcmVSYWRpdXMiLCJzcGhlcmVUcmltZXNoX3YiLCJyYWRpdXNTcXVhcmVkIiwicG9zaXRpb25BbG9uZ0VkZ2VCIiwicG9zaXRpb25BbG9uZ0VkZ2VBIiwic3BoZXJlVHJpbWVzaF92YSIsInNwaGVyZVRyaW1lc2hfdmIiLCJzcGhlcmVUcmltZXNoX3ZjIiwic3BoZXJlVHJpbWVzaF9ub3JtYWwiLCJwbGFuZVBvcyIsInBsYW5lVHJpbWVzaF9ub3JtYWwiLCJwbGFuZVRyaW1lc2hfcmVscG9zIiwicGxhbmVUcmltZXNoX3Byb2plY3RlZCIsInBvaW50SW5Qb2x5Z29uX2VkZ2UiLCJwb2ludEluUG9seWdvbl9lZGdlX3hfbm9ybWFsIiwicG9pbnRJblBvbHlnb25fdnRwIiwicG9zaXRpdmVSZXN1bHQiLCJlZGdlX3hfbm9ybWFsIiwidmVydGV4X3RvX3AiLCJPdmVybGFwS2VlcGVyIiwiY3VycmVudCIsInByZXZpb3VzIiwiZ2V0S2V5IiwidGljayIsImdldERpZmYiLCJhZGRpdGlvbnMiLCJyZW1vdmFscyIsImFsIiwiYmwiLCJrZXlBIiwidW5wYWNrQW5kUHVzaCIsImtleUIiLCJhcnJheSIsIlR1cGxlRGljdGlvbmFyeSIsIldvcmxkIiwiY29udGFjdHMiLCJmcmljdGlvbkVxdWF0aW9ucyIsInF1YXROb3JtYWxpemVTa2lwIiwic3RlcG51bWJlciIsImRlZmF1bHRfZHQiLCJuZXh0SWQiLCJoYXNBY3RpdmVCb2RpZXMiLCJzb2x2ZXIiLCJuYXJyb3dwaGFzZSIsImNvbGxpc2lvbk1hdHJpeCIsImNvbGxpc2lvbk1hdHJpeFByZXZpb3VzIiwiY29udGFjdG1hdGVyaWFscyIsImNvbnRhY3RNYXRlcmlhbFRhYmxlIiwiZGVmYXVsdE1hdGVyaWFsIiwiZG9Qcm9maWxpbmciLCJwcm9maWxlIiwiYWNjdW11bGF0b3IiLCJzdWJzeXN0ZW1zIiwiYWRkQm9keUV2ZW50IiwicmVtb3ZlQm9keUV2ZW50IiwiaWRUb0JvZHlNYXAiLCJtYWtlQ29udGFjdENvbnN0cmFpbnRzIiwibnVtT2JqZWN0cyIsImNvbGxpc2lvbk1hdHJpeFRpY2siLCJhZGRDb25zdHJhaW50IiwicmVtb3ZlQ29uc3RyYWludCIsInJheWNhc3RDbG9zZXN0IiwicmF5Y2FzdEFsbCIsInRtcFJheSIsInJheWNhc3RBbnkiLCJnZXRCb2R5QnlJZCIsImdldFNoYXBlQnlJZCIsImFkZE1hdGVyaWFsIiwiYWRkQ29udGFjdE1hdGVyaWFsIiwiY21hdCIsInN0ZXAiLCJ0aW1lU2luY2VMYXN0Q2FsbGVkIiwibWF4U3ViU3RlcHMiLCJpbnRlcm5hbFN0ZXAiLCJ0MCIsInBlcmZvcm1hbmNlIiwibm93Iiwic3Vic3RlcHMiLCJXb3JsZF9zdGVwX3AxIiwiV29ybGRfc3RlcF9wMiIsInByb2ZpbGluZ1N0YXJ0IiwiV29ybGRfc3RlcF9mcmljdGlvbkVxdWF0aW9uUG9vbCIsImd4IiwiZ3kiLCJneiIsIk5zdWJzeXN0ZW1zIiwiTmNvbnN0cmFpbnRzIiwiV29ybGRfc3RlcF9vbGRDb250YWN0cyIsIk5vbGRDb250YWN0cyIsIk5vbGRGcmljdGlvbkVxdWF0aW9ucyIsIm5jb250YWN0cyIsInNwZWVkU3F1YXJlZEIiLCJzcGVlZExpbWl0U3F1YXJlZEIiLCJzcGVlZFNxdWFyZWRBIiwic3BlZWRMaW1pdFNxdWFyZWRBIiwiV29ybGRfc3RlcF9jb2xsaWRlRXZlbnQiLCJjb250YWN0IiwiZW1pdENvbnRhY3RFdmVudHMiLCJsZCIsImF2IiwiYWQiLCJXb3JsZF9zdGVwX3ByZVN0ZXBFdmVudCIsImNsZWFyRm9yY2VzIiwiV29ybGRfc3RlcF9wb3N0U3RlcEV2ZW50IiwiaGFzQmVnaW5Db250YWN0IiwiaGFzRW5kQ29udGFjdCIsImJlZ2luQ29udGFjdEV2ZW50IiwiZW5kQ29udGFjdEV2ZW50IiwiaGFzQmVnaW5TaGFwZUNvbnRhY3QiLCJoYXNFbmRTaGFwZUNvbnRhY3QiLCJiZWdpblNoYXBlQ29udGFjdEV2ZW50IiwiZW5kU2hhcGVDb250YWN0RXZlbnQiLCJnbG9iYWxUaGlzIiwibm93T2Zmc2V0IiwiRGF0ZSIsInRpbWluZyIsIm5hdmlnYXRpb25TdGFydCIsIm1ha2VWZWMzIiwicHJlcGFyZVNwaGVyZSIsImlzQXJyYXkiLCJwcmVwYXJlQ29udmV4UG9seWhlZHJvbiIsIm1hcCIsImNyZWF0ZVNoYXBlIiwicHJvcHNUb0JvZHkiLCJ1dWlkIiwiYm9keVR5cGUiLCJvbkNvbGxpZGUiLCJleHRyYSIsInRvVXBwZXJDYXNlIiwiZm9yRWFjaCIsInNoYXBlQm9keSIsImFzc2lnbiIsInN0YXRlIiwidmVoaWNsZXMiLCJzcHJpbmdzIiwic3ByaW5nSW5zdGFuY2VzIiwicmF5cyIsImNvbmZpZyIsInN1YnNjcmlwdGlvbnMiLCJ0ZW1wVmVjdG9yIiwiYm9kaWVzTmVlZFN5bmNpbmciLCJsYXN0Q2FsbFRpbWUiLCJzeW5jQm9kaWVzIiwicmVkdWNlIiwiYWNjIiwiZW1pdEJlZ2luQ29udGFjdCIsInNlbGYiLCJwb3N0TWVzc2FnZSIsIm9wIiwiZW1pdEVuZENvbnRhY3QiLCJvbm1lc3NhZ2UiLCJwb3NpdGlvbnMiLCJxdWF0ZXJuaW9ucyIsImJyb2FkcGhhc2VzIiwidGltZVNpbmNlTGFzdENhbGwiLCJudW1iZXJPZkJvZGllcyIsIm9ic2VydmF0aW9ucyIsIm1lc3NhZ2UiLCJhY3RpdmUiLCJidWZmZXIiLCJjb250YWN0UG9pbnQiLCJjb250YWN0Tm9ybWFsIiwiaW1wYWN0VmVsb2NpdHkiLCJjb2xsaXNpb25GaWx0ZXJzIiwiYm9keUZpbHRlckdyb3VwIiwiYm9keUZpbHRlck1hc2siLCJ0YXJnZXRGaWx0ZXJHcm91cCIsInRhcmdldEZpbHRlck1hc2siLCJvcHRucyIsImNvbnN0cmFpbnQiLCJmaWx0ZXIiLCJ0aGlzSWQiLCJzcHJpbmciLCJwb3N0U3RlcFNwcmluZyIsInJlc3QiLCJ3aGVlbHMiLCJ2ZWhpY2xlIiwid2hlZWxJbmZvIiwid2hlZWxCb2R5Il0sIm1hcHBpbmdzIjoiOzs7RUFBQTtFQUNBO0VBQ0E7RUE0RUE7RUFDQTtFQUNBO0VBQ0E7OztFQUNBLE1BQU1BLElBQU4sQ0FBVztFQUNUO0VBQ0Y7RUFDQTs7RUFFRTtFQUNGO0VBQ0E7RUFDRUMsRUFBQUEsV0FBVyxDQUFDQyxRQUFRLEdBQUcsQ0FBQyxDQUFELEVBQUksQ0FBSixFQUFPLENBQVAsRUFBVSxDQUFWLEVBQWEsQ0FBYixFQUFnQixDQUFoQixFQUFtQixDQUFuQixFQUFzQixDQUF0QixFQUF5QixDQUF6QixDQUFaLEVBQXlDO0VBQ2xELFNBQUtBLFFBQUwsR0FBZ0IsS0FBSyxDQUFyQjtFQUNBLFNBQUtBLFFBQUwsR0FBZ0JBLFFBQWhCO0VBQ0Q7RUFDRDtFQUNGO0VBQ0E7RUFDQTtFQUNBOzs7RUFHRUMsRUFBQUEsUUFBUSxHQUFHO0VBQ1QsVUFBTUMsQ0FBQyxHQUFHLEtBQUtGLFFBQWY7RUFDQUUsSUFBQUEsQ0FBQyxDQUFDLENBQUQsQ0FBRCxHQUFPLENBQVA7RUFDQUEsSUFBQUEsQ0FBQyxDQUFDLENBQUQsQ0FBRCxHQUFPLENBQVA7RUFDQUEsSUFBQUEsQ0FBQyxDQUFDLENBQUQsQ0FBRCxHQUFPLENBQVA7RUFDQUEsSUFBQUEsQ0FBQyxDQUFDLENBQUQsQ0FBRCxHQUFPLENBQVA7RUFDQUEsSUFBQUEsQ0FBQyxDQUFDLENBQUQsQ0FBRCxHQUFPLENBQVA7RUFDQUEsSUFBQUEsQ0FBQyxDQUFDLENBQUQsQ0FBRCxHQUFPLENBQVA7RUFDQUEsSUFBQUEsQ0FBQyxDQUFDLENBQUQsQ0FBRCxHQUFPLENBQVA7RUFDQUEsSUFBQUEsQ0FBQyxDQUFDLENBQUQsQ0FBRCxHQUFPLENBQVA7RUFDQUEsSUFBQUEsQ0FBQyxDQUFDLENBQUQsQ0FBRCxHQUFPLENBQVA7RUFDRDtFQUNEO0VBQ0Y7RUFDQTs7O0VBR0VDLEVBQUFBLE9BQU8sR0FBRztFQUNSLFVBQU1ELENBQUMsR0FBRyxLQUFLRixRQUFmO0VBQ0FFLElBQUFBLENBQUMsQ0FBQyxDQUFELENBQUQsR0FBTyxDQUFQO0VBQ0FBLElBQUFBLENBQUMsQ0FBQyxDQUFELENBQUQsR0FBTyxDQUFQO0VBQ0FBLElBQUFBLENBQUMsQ0FBQyxDQUFELENBQUQsR0FBTyxDQUFQO0VBQ0FBLElBQUFBLENBQUMsQ0FBQyxDQUFELENBQUQsR0FBTyxDQUFQO0VBQ0FBLElBQUFBLENBQUMsQ0FBQyxDQUFELENBQUQsR0FBTyxDQUFQO0VBQ0FBLElBQUFBLENBQUMsQ0FBQyxDQUFELENBQUQsR0FBTyxDQUFQO0VBQ0FBLElBQUFBLENBQUMsQ0FBQyxDQUFELENBQUQsR0FBTyxDQUFQO0VBQ0FBLElBQUFBLENBQUMsQ0FBQyxDQUFELENBQUQsR0FBTyxDQUFQO0VBQ0FBLElBQUFBLENBQUMsQ0FBQyxDQUFELENBQUQsR0FBTyxDQUFQO0VBQ0Q7RUFDRDtFQUNGO0VBQ0E7OztFQUdFRSxFQUFBQSxRQUFRLENBQUNDLE1BQUQsRUFBUztFQUNmLFVBQU1ILENBQUMsR0FBRyxLQUFLRixRQUFmO0VBQ0FFLElBQUFBLENBQUMsQ0FBQyxDQUFELENBQUQsR0FBT0csTUFBTSxDQUFDQyxDQUFkO0VBQ0FKLElBQUFBLENBQUMsQ0FBQyxDQUFELENBQUQsR0FBT0csTUFBTSxDQUFDRSxDQUFkO0VBQ0FMLElBQUFBLENBQUMsQ0FBQyxDQUFELENBQUQsR0FBT0csTUFBTSxDQUFDRyxDQUFkO0VBQ0Q7RUFDRDtFQUNGO0VBQ0E7OztFQUdFQyxF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QUFmO0VBQ0EsVUFBTU0sRUFBRSxHQUFHdkUsQ0FBQyxHQUFHa0UsRUFBZjtFQUNBLFVBQU1NLEVBQUUsR0FBR3ZFLENBQUMsR0FBR2lFLEVBQWY7RUFDQSxVQUFNTyxFQUFFLEdBQUdWLENBQUMsR0FBR0MsRUFBZjtFQUNBLFVBQU1VLEVBQUUsR0FBR1gsQ0FBQyxHQUFHRSxFQUFmO0VBQ0EsVUFBTVUsRUFBRSxHQUFHWixDQUFDLEdBQUdHLEVBQWY7RUFDQSxVQUFNdkUsQ0FBQyxHQUFHLEtBQUtGLFFBQWY7RUFDQUUsSUFBQUEsQ0FBQyxDQUFDLElBQUksQ0FBSixHQUFRLENBQVQsQ0FBRCxHQUFlLEtBQUsyRSxFQUFFLEdBQUdFLEVBQVYsQ0FBZjtFQUNBN0UsSUFBQUEsQ0FBQyxDQUFDLElBQUksQ0FBSixHQUFRLENBQVQsQ0FBRCxHQUFleUUsRUFBRSxHQUFHTyxFQUFwQjtFQUNBaEYsSUFBQUEsQ0FBQyxDQUFDLElBQUksQ0FBSixHQUFRLENBQVQsQ0FBRCxHQUFlMEUsRUFBRSxHQUFHSyxFQUFwQjtFQUNBL0UsSUFBQUEsQ0FBQyxDQUFDLElBQUksQ0FBSixHQUFRLENBQVQsQ0FBRCxHQUFleUUsRUFBRSxHQUFHTyxFQUFwQjtFQUNBaEYsSUFBQUEsQ0FBQyxDQUFDLElBQUksQ0FBSixHQUFRLENBQVQsQ0FBRCxHQUFlLEtBQUt3RSxFQUFFLEdBQUdLLEVBQVYsQ0FBZjtFQUNBN0UsSUFBQUEsQ0FBQyxDQUFDLElBQUksQ0FBSixHQUFRLENBQVQsQ0FBRCxHQUFlNEUsRUFBRSxHQUFHRSxFQUFwQjtFQUNBOUUsSUFBQUEsQ0FBQyxDQUFDLElBQUksQ0FBSixHQUFRLENBQVQsQ0FBRCxHQUFlMEUsRUFBRSxHQUFHSyxFQUFwQjtFQUNBL0UsSUFBQUEsQ0FBQyxDQUFDLElBQUksQ0FBSixHQUFRLENBQVQsQ0FBRCxHQUFlNEUsRUFBRSxHQUFHRSxFQUFwQjtFQUNBOUUsSUFBQUEsQ0FBQyxDQUFDLElBQUksQ0FBSixHQUFRLENBQVQsQ0FBRCxHQUFlLEtBQUt3RSxFQUFFLEdBQUdHLEVBQVYs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LEVBQUFBLFFBQVEsRUFBRTtFQVJjLENBQTFCO0VBVUE7RUFDQTtFQUNBOztFQUVBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBOztFQUNBLE1BQU1DLElBQU4sU0FBbUJwUyxXQUFuQixDQUErQjtFQUM3QjtFQUNGO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7RUFFRTtFQUNGO0VBQ0E7O0VBRUU7RUFDRjtFQUNBOztFQUVFO0VBQ0Y7RUFDQTs7RUFFRTtFQUNGO0VBQ0E7O0VBRUU7RUFDRjtFQUNBOztFQUVFO0VBQ0Y7RUFDQTs7RUFFRTtFQUNGO0VBQ0E7RUFDQTs7RUFFRTtFQUNGO0VBQ0E7RUFDQTs7RUFFRTtFQUNGO0VBQ0E7RUFDQTs7RUFFRTtFQUNGO0VBQ0E7O0VBRUU7RUFDRjtFQUNBOztFQUVFO0VBQ0Y7RUFDQTs7RUFFRTtFQUNGO0VBQ0E7RUFDQTs7RUFFRTtFQUNGO0VBQ0E7RUFDQTs7RUFFRTtFQUNGO0VBQ0E7RUFDQTs7RUFFRTtFQUNGO0VBQ0E7RUFDQTs7RUFFRTtFQUNGO0VBQ0E7O0VBRUU7RUFDRjtFQUNBOztFQUVFO0VBQ0Y7RUFDQTs7RUFFRTtFQUNGO0VBQ0E7O0VBRUU7RUFDRjtFQUNBOztFQUVFO0VBQ0Y7RUFDQTs7RUFFRTtFQUNGO0VBQ0E7O0VBRUU7RUFDRjtFQUNBO0VBQ0E7O0VBRUU7RUFDRjtFQUNBOztFQUVFO0VBQ0Y7RUFDQTtFQUNBOztFQUVFO0VBQ0Y7RUFDQTs7RUFFRTtFQUNGO0VBQ0E7RUFDQTs7RUFFRTtFQUNGO0VBQ0E7O0VBRUU7RUFDRjtFQUNBO0VBQ0E7O0VBRUU7RUFDRjtFQUNBO0VBQ0E7O0VBRUU7RUFDRjtFQUNBOztFQUVFO0VBQ0Y7RUFDQTs7RUFFRTtFQUNGO0VBQ0E7O0VBRUU7RUFDRjtFQUNBOztFQUVFO0VBQ0Y7RUFDQTs7RUFFRTtFQUNGO0VBQ0E7O0VBRUU7RUFDRjtFQUNBOztFQUVFO0VBQ0Y7RUFDQTs7RUFFRTtFQUNGO0VBQ0E7O0VBRUU7RUFDRjtFQUNBOztFQUVFO0VBQ0Y7RUFDQTtF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', false);
/* eslint-enable */

function useUpdateWorldPropsEffect({
  worker,
  gravity,
  tolerance,
  step,
  iterations,
  broadphase,
  axisIndex
}) {
  useEffect(() => void worker.postMessage({
    op: 'setGravity',
    props: gravity
  }), [gravity]);
  useEffect(() => void worker.postMessage({
    op: 'setTolerance',
    props: tolerance
  }), [tolerance]);
  useEffect(() => void worker.postMessage({
    op: 'setStep',
    props: step
  }), [step]);
  useEffect(() => void worker.postMessage({
    op: 'setIterations',
    props: iterations
  }), [iterations]);
  useEffect(() => void worker.postMessage({
    op: 'setBroadphase',
    props: broadphase
  }), [broadphase]);
  useEffect(() => void worker.postMessage({
    op: 'setAxisIndex',
    props: axisIndex
  }), [axisIndex]);
}

const v$1 = new Vector3();
const s$1 = new Vector3(1, 1, 1);
const q$1 = new Quaternion$1();
const m = new Matrix4();

function apply(index, buffers, object) {
  if (index !== undefined) {
    m.compose(v$1.fromArray(buffers.positions, index * 3), q$1.fromArray(buffers.quaternions, index * 4), object ? object.scale : s$1);

    if (object) {
      object.matrixAutoUpdate = false;
      object.matrix.copy(m);
    }

    return m;
  }

  return m.identity();
}

function Provider({
  children,
  shouldInvalidate = true,
  step = 1 / 60,
  gravity = [0, -10, 0],
  tolerance = 0.001,
  iterations = 5,
  allowSleep = false,
  broadphase = 'Naive',
  axisIndex = 0,
  defaultContactMaterial = {
    contactEquationStiffness: 1e6
  },
  size = 1000
}) {
  const {
    invalidate
  } = useThree();
  const [worker] = useState(() => new WorkerFactory());
  const [refs] = useState({});
  const [buffers] = useState(() => ({
    positions: new Float32Array(size * 3),
    quaternions: new Float32Array(size * 4)
  }));
  const [events] = useState({});
  const [subscriptions] = useState({});
  const bodies = useRef({});
  const loop = useCallback(() => {
    if (buffers.positions.byteLength !== 0 && buffers.quaternions.byteLength !== 0) {
      worker.postMessage({
        op: 'step',
        ...buffers
      }, [buffers.positions.buffer, buffers.quaternions.buffer]);
    }
  }, []); // Run loop *after* all the physics objects have ran theirs!
  // Otherwise the buffers will be invalidated by the browser

  useFrame(loop);
  useLayoutEffect(() => {
    worker.postMessage({
      op: 'init',
      props: {
        gravity,
        tolerance,
        step,
        iterations,
        broadphase,
        allowSleep,
        axisIndex,
        defaultContactMaterial
      }
    });
    let i = 0;
    let body;

    worker.onmessage = e => {
      switch (e.data.op) {
        case 'frame':
          buffers.positions = e.data.positions;
          buffers.quaternions = e.data.quaternions;

          if (e.data.bodies) {
            for (i = 0; i < e.data.bodies.length; i++) {
              body = e.data.bodies[i];
              bodies.current[body] = e.data.bodies.indexOf(body);
            }
          }

          e.data.observations.forEach(([key, value]) => {
            if (subscriptions[key]) subscriptions[key](value);
          });

          if (e.data.active) {
            for (const ref of Object.values(refs)) {
              if (ref instanceof InstancedMesh) {
                for (let i = 0; i < ref.count; i++) {
                  const index = bodies.current[`${ref.uuid}/${i}`];

                  if (index !== undefined) {
                    ref.setMatrixAt(i, apply(index, buffers));
                  }

                  ref.instanceMatrix.needsUpdate = true;
                }
              } else {
                apply(bodies.current[ref.uuid], buffers, ref);
              }
            }

            if (shouldInvalidate) {
              invalidate();
            }
          }

          break;

        case 'event':
          switch (e.data.type) {
            case 'collide':
              events[e.data.target]({ ...e.data,
                target: refs[e.data.target],
                body: refs[e.data.body],
                contact: { ...e.data.contact,
                  bi: refs[e.data.contact.bi],
                  bj: refs[e.data.contact.bj]
                }
              });
              break;

            case 'collideBegin':
              if (events[e.data.bodyA]) {
                events[e.data.bodyA]({
                  op: 'event',
                  type: 'collideBegin',
                  target: refs[e.data.bodyA],
                  body: refs[e.data.bodyB]
                });
              }

              if (events[e.data.bodyB]) {
                events[e.data.bodyB]({
                  op: 'event',
                  type: 'collideBegin',
                  target: refs[e.data.bodyB],
                  body: refs[e.data.bodyA]
                });
              }

              break;

            case 'collideEnd':
              if (events[e.data.bodyA]) {
                events[e.data.bodyA]({
                  op: 'event',
                  type: 'collideEnd',
                  target: refs[e.data.bodyA],
                  body: refs[e.data.bodyB]
                });
              }

              if (events[e.data.bodyB]) {
                events[e.data.bodyB]({
                  op: 'event',
                  type: 'collideEnd',
                  target: refs[e.data.bodyB],
                  body: refs[e.data.bodyA]
                });
              }

              break;

            case 'rayhit':
              if (!events[e.data.ray.uuid]) break;
              events[e.data.ray.uuid]({ ...e.data,
                body: e.data.body ? refs[e.data.body] : null
              });
              break;
          }

          break;
      }
    };

    return () => worker.terminate();
  }, []);
  useUpdateWorldPropsEffect({
    worker,
    axisIndex,
    broadphase,
    gravity,
    iterations,
    step,
    tolerance
  });
  const api = useMemo(() => ({
    worker,
    bodies,
    refs,
    buffers,
    events,
    subscriptions
  }), [worker, bodies, refs, buffers, events, subscriptions]);
  return /*#__PURE__*/React.createElement(context.Provider, {
    value: api
  }, children);
}

/**
 * Records what objects are colliding with each other
 */
/**
 * A 3x3 matrix.
 * Authored by {@link http://github.com/schteppe/ schteppe}
 */


class Mat3 {
  /**
   * A vector of length 9, containing all matrix elements.
   */

  /**
   * @param elements A vector of length 9, containing all matrix elements.
   */
  constructor(elements = [0, 0, 0, 0, 0, 0, 0, 0, 0]) {
    this.elements = void 0;
    this.elements = elements;
  }
  /**
   * Sets the matrix to identity
   * @todo Should perhaps be renamed to `setIdentity()` to be more clear.
   * @todo Create another function that immediately creates an identity matrix eg. `eye()`
   */


  identity() {
    const e = this.elements;
    e[0] = 1;
    e[1] = 0;
    e[2] = 0;
    e[3] = 0;
    e[4] = 1;
    e[5] = 0;
    e[6] = 0;
    e[7] = 0;
    e[8] = 1;
  }
  /**
   * Set all elements to zero
   */


  setZero() {
    const e = this.elements;
    e[0] = 0;
    e[1] = 0;
    e[2] = 0;
    e[3] = 0;
    e[4] = 0;
    e[5] = 0;
    e[6] = 0;
    e[7] = 0;
    e[8] = 0;
  }
  /**
   * Sets the matrix diagonal elements from a Vec3
   */


  setTrace(vector) {
    const e = this.elements;
    e[0] = vector.x;
    e[4] = vector.y;
    e[8] = vector.z;
  }
  /**
   * Gets the matrix diagonal elements
   */


  getTrace(target = new Vec3()) {
    const e = this.elements;
    target.x = e[0];
    target.y = e[4];
    target.z = e[8];
    return target;
  }
  /**
   * Matrix-Vector multiplication
   * @param v The vector to multiply with
   * @param target Optional, target to save the result in.
   */


  vmult(v, target = new Vec3()) {
    const e = this.elements;
    const x = v.x;
    const y = v.y;
    const z = v.z;
    target.x = e[0] * x + e[1] * y + e[2] * z;
    target.y = e[3] * x + e[4] * y + e[5] * z;
    target.z = e[6] * x + e[7] * y + e[8] * z;
    return target;
  }
  /**
   * Matrix-scalar multiplication
   */


  smult(s) {
    for (let i = 0; i < this.elements.length; i++) {
      this.elements[i] *= s;
    }
  }
  /**
   * Matrix multiplication
   * @param matrix Matrix to multiply with from left side.
   */


  mmult(matrix, target = new Mat3()) {
    const A = this.elements;
    const B = matrix.elements;
    const T = target.elements;
    const a11 = A[0],
          a12 = A[1],
          a13 = A[2],
          a21 = A[3],
          a22 = A[4],
          a23 = A[5],
          a31 = A[6],
          a32 = A[7],
          a33 = A[8];
    const b11 = B[0],
          b12 = B[1],
          b13 = B[2],
          b21 = B[3],
          b22 = B[4],
          b23 = B[5],
          b31 = B[6],
          b32 = B[7],
          b33 = B[8];
    T[0] = a11 * b11 + a12 * b21 + a13 * b31;
    T[1] = a11 * b12 + a12 * b22 + a13 * b32;
    T[2] = a11 * b13 + a12 * b23 + a13 * b33;
    T[3] = a21 * b11 + a22 * b21 + a23 * b31;
    T[4] = a21 * b12 + a22 * b22 + a23 * b32;
    T[5] = a21 * b13 + a22 * b23 + a23 * b33;
    T[6] = a31 * b11 + a32 * b21 + a33 * b31;
    T[7] = a31 * b12 + a32 * b22 + a33 * b32;
    T[8] = a31 * b13 + a32 * b23 + a33 * b33;
    return target;
  }
  /**
   * Scale each column of the matrix
   */


  scale(vector, target = new Mat3()) {
    const e = this.elements;
    const t = target.elements;

    for (let i = 0; i !== 3; i++) {
      t[3 * i + 0] = vector.x * e[3 * i + 0];
      t[3 * i + 1] = vector.y * e[3 * i + 1];
      t[3 * i + 2] = vector.z * e[3 * i + 2];
    }

    return target;
  }
  /**
   * Solve Ax=b
   * @param b The right hand side
   * @param target Optional. Target vector to save in.
   * @return The solution x
   * @todo should reuse arrays
   */


  solve(b, target = new Vec3()) {
    // Construct equations
    const nr = 3; // num rows

    const nc = 4; // num cols

    const eqns = [];
    let i;
    let j;

    for (i = 0; i < nr * nc; i++) {
      eqns.push(0);
    }

    for (i = 0; i < 3; i++) {
      for (j = 0; j < 3; j++) {
        eqns[i + nc * j] = this.elements[i + 3 * j];
      }
    }

    eqns[3 + 4 * 0] = b.x;
    eqns[3 + 4 * 1] = b.y;
    eqns[3 + 4 * 2] = b.z; // Compute right upper triangular version of the matrix - Gauss elimination

    let n = 3;
    const k = n;
    let np;
    const kp = 4; // num rows

    let p;

    do {
      i = k - n;

      if (eqns[i + nc * i] === 0) {
        // the pivot is null, swap lines
        for (j = i + 1; j < k; j++) {
          if (eqns[i + nc * j] !== 0) {
            np = kp;

            do {
              // do ligne( i ) = ligne( i ) + ligne( k )
              p = kp - np;
              eqns[p + nc * i] += eqns[p + nc * j];
            } while (--np);

            break;
          }
        }
      }

      if (eqns[i + nc * i] !== 0) {
        for (j = i + 1; j < k; j++) {
          const multiplier = eqns[i + nc * j] / eqns[i + nc * i];
          np = kp;

          do {
            // do ligne( k ) = ligne( k ) - multiplier * ligne( i )
            p = kp - np;
            eqns[p + nc * j] = p <= i ? 0 : eqns[p + nc * j] - eqns[p + nc * i] * multiplier;
          } while (--np);
        }
      }
    } while (--n); // Get the solution


    target.z = eqns[2 * nc + 3] / eqns[2 * nc + 2];
    target.y = (eqns[1 * nc + 3] - eqns[1 * nc + 2] * target.z) / eqns[1 * nc + 1];
    target.x = (eqns[0 * nc + 3] - eqns[0 * nc + 2] * target.z - eqns[0 * nc + 1] * target.y) / eqns[0 * nc + 0];

    if (isNaN(target.x) || isNaN(target.y) || isNaN(target.z) || target.x === Infinity || target.y === Infinity || target.z === Infinity) {
      throw "Could not solve equation! Got x=[" + target.toString() + "], b=[" + b.toString() + "], A=[" + this.toString() + "]";
    }

    return target;
  }
  /**
   * Get an element in the matrix by index. Index starts at 0, not 1!!!
   * @param value If provided, the matrix element will be set to this value.
   */


  e(row, column, value) {
    if (value === undefined) {
      return this.elements[column + 3 * row];
    } else {
      // Set value
      this.elements[column + 3 * row] = value;
    }
  }
  /**
   * Copy another matrix into this matrix object.
   */


  copy(matrix) {
    for (let i = 0; i < matrix.elements.length; i++) {
      this.elements[i] = matrix.elements[i];
    }

    return this;
  }
  /**
   * Returns a string representation of the matrix.
   */


  toString() {
    let r = '';
    const sep = ',';

    for (let i = 0; i < 9; i++) {
      r += this.elements[i] + sep;
    }

    return r;
  }
  /**
   * reverse the matrix
   * @param target Target matrix to save in.
   * @return The solution x
   */


  reverse(target = new Mat3()) {
    // Construct equations
    const nr = 3; // num rows

    const nc = 6; // num cols

    const eqns = reverse_eqns;
    let i;
    let j;

    for (i = 0; i < 3; i++) {
      for (j = 0; j < 3; j++) {
        eqns[i + nc * j] = this.elements[i + 3 * j];
      }
    }

    eqns[3 + 6 * 0] = 1;
    eqns[3 + 6 * 1] = 0;
    eqns[3 + 6 * 2] = 0;
    eqns[4 + 6 * 0] = 0;
    eqns[4 + 6 * 1] = 1;
    eqns[4 + 6 * 2] = 0;
    eqns[5 + 6 * 0] = 0;
    eqns[5 + 6 * 1] = 0;
    eqns[5 + 6 * 2] = 1; // Compute right upper triangular version of the matrix - Gauss elimination

    let n = 3;
    const k = n;
    let np;
    const kp = nc; // num rows

    let p;

    do {
      i = k - n;

      if (eqns[i + nc * i] === 0) {
        // the pivot is null, swap lines
        for (j = i + 1; j < k; j++) {
          if (eqns[i + nc * j] !== 0) {
            np = kp;

            do {
              // do line( i ) = line( i ) + line( k )
              p = kp - np;
              eqns[p + nc * i] += eqns[p + nc * j];
            } while (--np);

            break;
          }
        }
      }

      if (eqns[i + nc * i] !== 0) {
        for (j = i + 1; j < k; j++) {
          const multiplier = eqns[i + nc * j] / eqns[i + nc * i];
          np = kp;

          do {
            // do line( k ) = line( k ) - multiplier * line( i )
            p = kp - np;
            eqns[p + nc * j] = p <= i ? 0 : eqns[p + nc * j] - eqns[p + nc * i] * multiplier;
          } while (--np);
        }
      }
    } while (--n); // eliminate the upper left triangle of the matrix


    i = 2;

    do {
      j = i - 1;

      do {
        const multiplier = eqns[i + nc * j] / eqns[i + nc * i];
        np = nc;

        do {
          p = nc - np;
          eqns[p + nc * j] = eqns[p + nc * j] - eqns[p + nc * i] * multiplier;
        } while (--np);
      } while (j--);
    } while (--i); // operations on the diagonal


    i = 2;

    do {
      const multiplier = 1 / eqns[i + nc * i];
      np = nc;

      do {
        p = nc - np;
        eqns[p + nc * i] = eqns[p + nc * i] * multiplier;
      } while (--np);
    } while (i--);

    i = 2;

    do {
      j = 2;

      do {
        p = eqns[nr + j + nc * i];

        if (isNaN(p) || p === Infinity) {
          throw "Could not reverse! A=[" + this.toString() + "]";
        }

        target.e(i, j, p);
      } while (j--);
    } while (i--);

    return target;
  }
  /**
   * Set the matrix from a quaterion
   */


  setRotationFromQuaternion(q) {
    const x = q.x;
    const y = q.y;
    const z = q.z;
    const w = q.w;
    const x2 = x + x;
    const y2 = y + y;
    const z2 = z + z;
    const xx = x * x2;
    const xy = x * y2;
    const xz = x * z2;
    const yy = y * y2;
    const yz = y * z2;
    const zz = z * z2;
    const wx = w * x2;
    const wy = w * y2;
    const wz = w * z2;
    const e = this.elements;
    e[3 * 0 + 0] = 1 - (yy + zz);
    e[3 * 0 + 1] = xy - wz;
    e[3 * 0 + 2] = xz + wy;
    e[3 * 1 + 0] = xy + wz;
    e[3 * 1 + 1] = 1 - (xx + zz);
    e[3 * 1 + 2] = yz - wx;
    e[3 * 2 + 0] = xz - wy;
    e[3 * 2 + 1] = yz + wx;
    e[3 * 2 + 2] = 1 - (xx + yy);
    return this;
  }
  /**
   * Transpose the matrix
   * @param target Optional. Where to store the result.
   * @return The target Mat3, or a new Mat3 if target was omitted.
   */


  transpose(target = new Mat3()) {
    const M = this.elements;
    const T = target.elements;
    let tmp; //Set diagonals

    T[0] = M[0];
    T[4] = M[4];
    T[8] = M[8];
    tmp = M[1];
    T[1] = M[3];
    T[3] = tmp;
    tmp = M[2];
    T[2] = M[6];
    T[6] = tmp;
    tmp = M[5];
    T[5] = M[7];
    T[7] = tmp;
    return target;
  }

}

const reverse_eqns = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
/**
 * 3-dimensional vector
 * @example
 *     const v = new Vec3(1, 2, 3)
 *     console.log('x=' + v.x) // x=1
 */

class Vec3 {
  constructor(x = 0.0, y = 0.0, z = 0.0) {
    this.x = void 0;
    this.y = void 0;
    this.z = void 0;
    this.x = x;
    this.y = y;
    this.z = z;
  }
  /**
   * Vector cross product
   * @param target Optional target to save in.
   */


  cross(vector, target = new Vec3()) {
    const vx = vector.x;
    const vy = vector.y;
    const vz = vector.z;
    const x = this.x;
    const y = this.y;
    const z = this.z;
    target.x = y * vz - z * vy;
    target.y = z * vx - x * vz;
    target.z = x * vy - y * vx;
    return target;
  }
  /**
   * Set the vectors' 3 elements
   */


  set(x, y, z) {
    this.x = x;
    this.y = y;
    this.z = z;
    return this;
  }
  /**
   * Set all components of the vector to zero.
   */


  setZero() {
    this.x = this.y = this.z = 0;
  }
  /**
   * Vector addition
   */


  vadd(vector, target) {
    if (target) {
      target.x = vector.x + this.x;
      target.y = vector.y + this.y;
      target.z = vector.z + this.z;
    } else {
      return new Vec3(this.x + vector.x, this.y + vector.y, this.z + vector.z);
    }
  }
  /**
   * Vector subtraction
   * @param target Optional target to save in.
   */


  vsub(vector, target) {
    if (target) {
      target.x = this.x - vector.x;
      target.y = this.y - vector.y;
      target.z = this.z - vector.z;
    } else {
      return new Vec3(this.x - vector.x, this.y - vector.y, this.z - vector.z);
    }
  }
  /**
   * Get the cross product matrix a_cross from a vector, such that a x b = a_cross * b = c
   *
   * See {@link https://www8.cs.umu.se/kurser/TDBD24/VT06/lectures/Lecture6.pdf Ume University Lecture}
   */


  crossmat() {
    return new Mat3([0, -this.z, this.y, this.z, 0, -this.x, -this.y, this.x, 0]);
  }
  /**
   * Normalize the vector. Note that this changes the values in the vector.
    * @return Returns the norm of the vector
   */


  normalize() {
    const x = this.x;
    const y = this.y;
    const z = this.z;
    const n = Math.sqrt(x * x + y * y + z * z);

    if (n > 0.0) {
      const invN = 1 / n;
      this.x *= invN;
      this.y *= invN;
      this.z *= invN;
    } else {
      // Make something up
      this.x = 0;
      this.y = 0;
      this.z = 0;
    }

    return n;
  }
  /**
   * Get the version of this vector that is of length 1.
   * @param target Optional target to save in
   * @return Returns the unit vector
   */


  unit(target = new Vec3()) {
    const x = this.x;
    const y = this.y;
    const z = this.z;
    let ninv = Math.sqrt(x * x + y * y + z * z);

    if (ninv > 0.0) {
      ninv = 1.0 / ninv;
      target.x = x * ninv;
      target.y = y * ninv;
      target.z = z * ninv;
    } else {
      target.x = 1;
      target.y = 0;
      target.z = 0;
    }

    return target;
  }
  /**
   * Get the length of the vector
   */


  length() {
    const x = this.x;
    const y = this.y;
    const z = this.z;
    return Math.sqrt(x * x + y * y + z * z);
  }
  /**
   * Get the squared length of the vector.
   */


  lengthSquared() {
    return this.dot(this);
  }
  /**
   * Get distance from this point to another point
   */


  distanceTo(p) {
    const x = this.x;
    const y = this.y;
    const z = this.z;
    const px = p.x;
    const py = p.y;
    const pz = p.z;
    return Math.sqrt((px - x) * (px - x) + (py - y) * (py - y) + (pz - z) * (pz - z));
  }
  /**
   * Get squared distance from this point to another point
   */


  distanceSquared(p) {
    const x = this.x;
    const y = this.y;
    const z = this.z;
    const px = p.x;
    const py = p.y;
    const pz = p.z;
    return (px - x) * (px - x) + (py - y) * (py - y) + (pz - z) * (pz - z);
  }
  /**
   * Multiply all the components of the vector with a scalar.
   * @param target The vector to save the result in.
   */


  scale(scalar, target = new Vec3()) {
    const x = this.x;
    const y = this.y;
    const z = this.z;
    target.x = scalar * x;
    target.y = scalar * y;
    target.z = scalar * z;
    return target;
  }
  /**
   * Multiply the vector with an other vector, component-wise.
   * @param target The vector to save the result in.
   */


  vmul(vector, target = new Vec3()) {
    target.x = vector.x * this.x;
    target.y = vector.y * this.y;
    target.z = vector.z * this.z;
    return target;
  }
  /**
   * Scale a vector and add it to this vector. Save the result in "target". (target = this + vector * scalar)
   * @param target The vector to save the result in.
   */


  addScaledVector(scalar, vector, target = new Vec3()) {
    target.x = this.x + scalar * vector.x;
    target.y = this.y + scalar * vector.y;
    target.z = this.z + scalar * vector.z;
    return target;
  }
  /**
   * Calculate dot product
   * @param vector
   */


  dot(vector) {
    return this.x * vector.x + this.y * vector.y + this.z * vector.z;
  }

  isZero() {
    return this.x === 0 && this.y === 0 && this.z === 0;
  }
  /**
   * Make the vector point in the opposite direction.
   * @param target Optional target to save in
   */


  negate(target = new Vec3()) {
    target.x = -this.x;
    target.y = -this.y;
    target.z = -this.z;
    return target;
  }
  /**
   * Compute two artificial tangents to the vector
   * @param t1 Vector object to save the first tangent in
   * @param t2 Vector object to save the second tangent in
   */


  tangents(t1, t2) {
    const norm = this.length();

    if (norm > 0.0) {
      const n = Vec3_tangents_n;
      const inorm = 1 / norm;
      n.set(this.x * inorm, this.y * inorm, this.z * inorm);
      const randVec = Vec3_tangents_randVec;

      if (Math.abs(n.x) < 0.9) {
        randVec.set(1, 0, 0);
        n.cross(randVec, t1);
      } else {
        randVec.set(0, 1, 0);
        n.cross(randVec, t1);
      }

      n.cross(t1, t2);
    } else {
      // The normal length is zero, make something up
      t1.set(1, 0, 0);
      t2.set(0, 1, 0);
    }
  }
  /**
   * Converts to a more readable format
   */


  toString() {
    return this.x + "," + this.y + "," + this.z;
  }
  /**
   * Converts to an array
   */


  toArray() {
    return [this.x, this.y, this.z];
  }
  /**
   * Copies value of source to this vector.
   */


  copy(vector) {
    this.x = vector.x;
    this.y = vector.y;
    this.z = vector.z;
    return this;
  }
  /**
   * Do a linear interpolation between two vectors
   * @param t A number between 0 and 1. 0 will make this function return u, and 1 will make it return v. Numbers in between will generate a vector in between them.
   */


  lerp(vector, t, target) {
    const x = this.x;
    const y = this.y;
    const z = this.z;
    target.x = x + (vector.x - x) * t;
    target.y = y + (vector.y - y) * t;
    target.z = z + (vector.z - z) * t;
  }
  /**
   * Check if a vector equals is almost equal to another one.
   */


  almostEquals(vector, precision = 1e-6) {
    if (Math.abs(this.x - vector.x) > precision || Math.abs(this.y - vector.y) > precision || Math.abs(this.z - vector.z) > precision) {
      return false;
    }

    return true;
  }
  /**
   * Check if a vector is almost zero
   */


  almostZero(precision = 1e-6) {
    if (Math.abs(this.x) > precision || Math.abs(this.y) > precision || Math.abs(this.z) > precision) {
      return false;
    }

    return true;
  }
  /**
   * Check if the vector is anti-parallel to another vector.
   * @param precision Set to zero for exact comparisons
   */


  isAntiparallelTo(vector, precision) {
    this.negate(antip_neg);
    return antip_neg.almostEquals(vector, precision);
  }
  /**
   * Clone the vector
   */


  clone() {
    return new Vec3(this.x, this.y, this.z);
  }

}

Vec3.ZERO = void 0;
Vec3.UNIT_X = void 0;
Vec3.UNIT_Y = void 0;
Vec3.UNIT_Z = void 0;
Vec3.ZERO = new Vec3(0, 0, 0);
Vec3.UNIT_X = new Vec3(1, 0, 0);
Vec3.UNIT_Y = new Vec3(0, 1, 0);
Vec3.UNIT_Z = new Vec3(0, 0, 1);
const Vec3_tangents_n = new Vec3();
const Vec3_tangents_randVec = new Vec3();
const antip_neg = new Vec3();
/**
 * Axis aligned bounding box class.
 */

class AABB {
  /**
   * The lower bound of the bounding box
   */

  /**
   * The upper bound of the bounding box
   */
  constructor(options = {}) {
    this.lowerBound = void 0;
    this.upperBound = void 0;
    this.lowerBound = new Vec3();
    this.upperBound = new Vec3();

    if (options.lowerBound) {
      this.lowerBound.copy(options.lowerBound);
    }

    if (options.upperBound) {
      this.upperBound.copy(options.upperBound);
    }
  }
  /**
   * Set the AABB bounds from a set of points.
   * @param points An array of Vec3's.
   * @return The self object
   */


  setFromPoints(points, position, quaternion, skinSize) {
    const l = this.lowerBound;
    const u = this.upperBound;
    const q = quaternion; // Set to the first point

    l.copy(points[0]);

    if (q) {
      q.vmult(l, l);
    }

    u.copy(l);

    for (let i = 1; i < points.length; i++) {
      let p = points[i];

      if (q) {
        q.vmult(p, tmp$1);
        p = tmp$1;
      }

      if (p.x > u.x) {
        u.x = p.x;
      }

      if (p.x < l.x) {
        l.x = p.x;
      }

      if (p.y > u.y) {
        u.y = p.y;
      }

      if (p.y < l.y) {
        l.y = p.y;
      }

      if (p.z > u.z) {
        u.z = p.z;
      }

      if (p.z < l.z) {
        l.z = p.z;
      }
    } // Add offset


    if (position) {
      position.vadd(l, l);
      position.vadd(u, u);
    }

    if (skinSize) {
      l.x -= skinSize;
      l.y -= skinSize;
      l.z -= skinSize;
      u.x += skinSize;
      u.y += skinSize;
      u.z += skinSize;
    }

    return this;
  }
  /**
   * Copy bounds from an AABB to this AABB
   * @param aabb Source to copy from
   * @return The this object, for chainability
   */


  copy(aabb) {
    this.lowerBound.copy(aabb.lowerBound);
    this.upperBound.copy(aabb.upperBound);
    return this;
  }
  /**
   * Clone an AABB
   */


  clone() {
    return new AABB().copy(this);
  }
  /**
   * Extend this AABB so that it covers the given AABB too.
   */


  extend(aabb) {
    this.lowerBound.x = Math.min(this.lowerBound.x, aabb.lowerBound.x);
    this.upperBound.x = Math.max(this.upperBound.x, aabb.upperBound.x);
    this.lowerBound.y = Math.min(this.lowerBound.y, aabb.lowerBound.y);
    this.upperBound.y = Math.max(this.upperBound.y, aabb.upperBound.y);
    this.lowerBound.z = Math.min(this.lowerBound.z, aabb.lowerBound.z);
    this.upperBound.z = Math.max(this.upperBound.z, aabb.upperBound.z);
  }
  /**
   * Returns true if the given AABB overlaps this AABB.
   */


  overlaps(aabb) {
    const l1 = this.lowerBound;
    const u1 = this.upperBound;
    const l2 = aabb.lowerBound;
    const u2 = aabb.upperBound; //      l2        u2
    //      |---------|
    // |--------|
    // l1       u1

    const overlapsX = l2.x <= u1.x && u1.x <= u2.x || l1.x <= u2.x && u2.x <= u1.x;
    const overlapsY = l2.y <= u1.y && u1.y <= u2.y || l1.y <= u2.y && u2.y <= u1.y;
    const overlapsZ = l2.z <= u1.z && u1.z <= u2.z || l1.z <= u2.z && u2.z <= u1.z;
    return overlapsX && overlapsY && overlapsZ;
  } // Mostly for debugging


  volume() {
    const l = this.lowerBound;
    const u = this.upperBound;
    return (u.x - l.x) * (u.y - l.y) * (u.z - l.z);
  }
  /**
   * Returns true if the given AABB is fully contained in this AABB.
   */


  contains(aabb) {
    const l1 = this.lowerBound;
    const u1 = this.upperBound;
    const l2 = aabb.lowerBound;
    const u2 = aabb.upperBound; //      l2        u2
    //      |---------|
    // |---------------|
    // l1              u1

    return l1.x <= l2.x && u1.x >= u2.x && l1.y <= l2.y && u1.y >= u2.y && l1.z <= l2.z && u1.z >= u2.z;
  }

  getCorners(a, b, c, d, e, f, g, h) {
    const l = this.lowerBound;
    const u = this.upperBound;
    a.copy(l);
    b.set(u.x, l.y, l.z);
    c.set(u.x, u.y, l.z);
    d.set(l.x, u.y, u.z);
    e.set(u.x, l.y, u.z);
    f.set(l.x, u.y, l.z);
    g.set(l.x, l.y, u.z);
    h.copy(u);
  }
  /**
   * Get the representation of an AABB in another frame.
   * @return The "target" AABB object.
   */


  toLocalFrame(frame, target) {
    const corners = transformIntoFrame_corners;
    const a = corners[0];
    const b = corners[1];
    const c = corners[2];
    const d = corners[3];
    const e = corners[4];
    const f = corners[5];
    const g = corners[6];
    const h = corners[7]; // Get corners in current frame

    this.getCorners(a, b, c, d, e, f, g, h); // Transform them to new local frame

    for (let i = 0; i !== 8; i++) {
      const corner = corners[i];
      frame.pointToLocal(corner, corner);
    }

    return target.setFromPoints(corners);
  }
  /**
   * Get the representation of an AABB in the global frame.
   * @return The "target" AABB object.
   */


  toWorldFrame(frame, target) {
    const corners = transformIntoFrame_corners;
    const a = corners[0];
    const b = corners[1];
    const c = corners[2];
    const d = corners[3];
    const e = corners[4];
    const f = corners[5];
    const g = corners[6];
    const h = corners[7]; // Get corners in current frame

    this.getCorners(a, b, c, d, e, f, g, h); // Transform them to new local frame

    for (let i = 0; i !== 8; i++) {
      const corner = corners[i];
      frame.pointToWorld(corner, corner);
    }

    return target.setFromPoints(corners);
  }
  /**
   * Check if the AABB is hit by a ray.
   */


  overlapsRay(ray) {
    const {
      direction,
      from
    } = ray; // const t = 0
    // ray.direction is unit direction vector of ray

    const dirFracX = 1 / direction.x;
    const dirFracY = 1 / direction.y;
    const dirFracZ = 1 / direction.z; // this.lowerBound is the corner of AABB with minimal coordinates - left bottom, rt is maximal corner

    const t1 = (this.lowerBound.x - from.x) * dirFracX;
    const t2 = (this.upperBound.x - from.x) * dirFracX;
    const t3 = (this.lowerBound.y - from.y) * dirFracY;
    const t4 = (this.upperBound.y - from.y) * dirFracY;
    const t5 = (this.lowerBound.z - from.z) * dirFracZ;
    const t6 = (this.upperBound.z - from.z) * dirFracZ; // const tmin = Math.max(Math.max(Math.min(t1, t2), Math.min(t3, t4)));
    // const tmax = Math.min(Math.min(Math.max(t1, t2), Math.max(t3, t4)));

    const tmin = Math.max(Math.max(Math.min(t1, t2), Math.min(t3, t4)), Math.min(t5, t6));
    const tmax = Math.min(Math.min(Math.max(t1, t2), Math.max(t3, t4)), Math.max(t5, t6)); // if tmax < 0, ray (line) is intersecting AABB, but whole AABB is behing us

    if (tmax < 0) {
      //t = tmax;
      return false;
    } // if tmin > tmax, ray doesn't intersect AABB


    if (tmin > tmax) {
      //t = tmax;
      return false;
    }

    return true;
  }

}

const tmp$1 = new Vec3();
const transformIntoFrame_corners = [new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3()];
/**
 * Base class for objects that dispatches events.
 */


class EventTarget {
  constructor() {
    this._listeners = void 0;
  }
  /**
   * Add an event listener
   * @return The self object, for chainability.
   */


  addEventListener(type, listener) {
    if (this._listeners === undefined) {
      this._listeners = {};
    }

    const listeners = this._listeners;

    if (listeners[type] === undefined) {
      listeners[type] = [];
    }

    if (!listeners[type].includes(listener)) {
      listeners[type].push(listener);
    }

    return this;
  }
  /**
   * Check if an event listener is added
   */


  hasEventListener(type, listener) {
    if (this._listeners === undefined) {
      return false;
    }

    const listeners = this._listeners;

    if (listeners[type] !== undefined && listeners[type].includes(listener)) {
      return true;
    }

    return false;
  }
  /**
   * Check if any event listener of the given type is added
   */


  hasAnyEventListener(type) {
    if (this._listeners === undefined) {
      return false;
    }

    const listeners = this._listeners;
    return listeners[type] !== undefined;
  }
  /**
   * Remove an event listener
   * @return The self object, for chainability.
   */


  removeEventListener(type, listener) {
    if (this._listeners === undefined) {
      return this;
    }

    const listeners = this._listeners;

    if (listeners[type] === undefined) {
      return this;
    }

    const index = listeners[type].indexOf(listener);

    if (index !== -1) {
      listeners[type].splice(index, 1);
    }

    return this;
  }
  /**
   * Emit an event.
   * @return The self object, for chainability.
   */


  dispatchEvent(event) {
    if (this._listeners === undefined) {
      return this;
    }

    const listeners = this._listeners;
    const listenerArray = listeners[event.type];

    if (listenerArray !== undefined) {
      event.target = this;

      for (let i = 0, l = listenerArray.length; i < l; i++) {
        listenerArray[i].call(this, event);
      }
    }

    return this;
  }

}
/**
 * A Quaternion describes a rotation in 3D space. The Quaternion is mathematically defined as Q = x*i + y*j + z*k + w, where (i,j,k) are imaginary basis vectors. (x,y,z) can be seen as a vector related to the axis of rotation, while the real multiplier, w, is related to the amount of rotation.
 * @param x Multiplier of the imaginary basis vector i.
 * @param y Multiplier of the imaginary basis vector j.
 * @param z Multiplier of the imaginary basis vector k.
 * @param w Multiplier of the real part.
 * @see http://en.wikipedia.org/wiki/Quaternion
 */


class Quaternion {
  constructor(x = 0, y = 0, z = 0, w = 1) {
    this.x = void 0;
    this.y = void 0;
    this.z = void 0;
    this.w = void 0;
    this.x = x;
    this.y = y;
    this.z = z;
    this.w = w;
  }
  /**
   * Set the value of the quaternion.
   */


  set(x, y, z, w) {
    this.x = x;
    this.y = y;
    this.z = z;
    this.w = w;
    return this;
  }
  /**
   * Convert to a readable format
   * @return "x,y,z,w"
   */


  toString() {
    return this.x + "," + this.y + "," + this.z + "," + this.w;
  }
  /**
   * Convert to an Array
   * @return [x, y, z, w]
   */


  toArray() {
    return [this.x, this.y, this.z, this.w];
  }
  /**
   * Set the quaternion components given an axis and an angle in radians.
   */


  setFromAxisAngle(vector, angle) {
    const s = Math.sin(angle * 0.5);
    this.x = vector.x * s;
    this.y = vector.y * s;
    this.z = vector.z * s;
    this.w = Math.cos(angle * 0.5);
    return this;
  }
  /**
   * Converts the quaternion to [ axis, angle ] representation.
   * @param targetAxis A vector object to reuse for storing the axis.
   * @return An array, first element is the axis and the second is the angle in radians.
   */


  toAxisAngle(targetAxis = new Vec3()) {
    this.normalize(); // if w>1 acos and sqrt will produce errors, this cant happen if quaternion is normalised

    const angle = 2 * Math.acos(this.w);
    const s = Math.sqrt(1 - this.w * this.w); // assuming quaternion normalised then w is less than 1, so term always positive.

    if (s < 0.001) {
      // test to avoid divide by zero, s is always positive due to sqrt
      // if s close to zero then direction of axis not important
      targetAxis.x = this.x; // if it is important that axis is normalised then replace with x=1; y=z=0;

      targetAxis.y = this.y;
      targetAxis.z = this.z;
    } else {
      targetAxis.x = this.x / s; // normalise axis

      targetAxis.y = this.y / s;
      targetAxis.z = this.z / s;
    }

    return [targetAxis, angle];
  }
  /**
   * Set the quaternion value given two vectors. The resulting rotation will be the needed rotation to rotate u to v.
   */


  setFromVectors(u, v) {
    if (u.isAntiparallelTo(v)) {
      const t1 = sfv_t1;
      const t2 = sfv_t2;
      u.tangents(t1, t2);
      this.setFromAxisAngle(t1, Math.PI);
    } else {
      const a = u.cross(v);
      this.x = a.x;
      this.y = a.y;
      this.z = a.z;
      this.w = Math.sqrt(u.length() ** 2 * v.length() ** 2) + u.dot(v);
      this.normalize();
    }

    return this;
  }
  /**
   * Multiply the quaternion with an other quaternion.
   */


  mult(quat, target = new Quaternion()) {
    const ax = this.x;
    const ay = this.y;
    const az = this.z;
    const aw = this.w;
    const bx = quat.x;
    const by = quat.y;
    const bz = quat.z;
    const bw = quat.w;
    target.x = ax * bw + aw * bx + ay * bz - az * by;
    target.y = ay * bw + aw * by + az * bx - ax * bz;
    target.z = az * bw + aw * bz + ax * by - ay * bx;
    target.w = aw * bw - ax * bx - ay * by - az * bz;
    return target;
  }
  /**
   * Get the inverse quaternion rotation.
   */


  inverse(target = new Quaternion()) {
    const x = this.x;
    const y = this.y;
    const z = this.z;
    const w = this.w;
    this.conjugate(target);
    const inorm2 = 1 / (x * x + y * y + z * z + w * w);
    target.x *= inorm2;
    target.y *= inorm2;
    target.z *= inorm2;
    target.w *= inorm2;
    return target;
  }
  /**
   * Get the quaternion conjugate
   */


  conjugate(target = new Quaternion()) {
    target.x = -this.x;
    target.y = -this.y;
    target.z = -this.z;
    target.w = this.w;
    return target;
  }
  /**
   * Normalize the quaternion. Note that this changes the values of the quaternion.
   */


  normalize() {
    let l = Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w);

    if (l === 0) {
      this.x = 0;
      this.y = 0;
      this.z = 0;
      this.w = 0;
    } else {
      l = 1 / l;
      this.x *= l;
      this.y *= l;
      this.z *= l;
      this.w *= l;
    }

    return this;
  }
  /**
   * Approximation of quaternion normalization. Works best when quat is already almost-normalized.
   * @author unphased, https://github.com/unphased
   */


  normalizeFast() {
    const f = (3.0 - (this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w)) / 2.0;

    if (f === 0) {
      this.x = 0;
      this.y = 0;
      this.z = 0;
      this.w = 0;
    } else {
      this.x *= f;
      this.y *= f;
      this.z *= f;
      this.w *= f;
    }

    return this;
  }
  /**
   * Multiply the quaternion by a vector
   */


  vmult(v, target = new Vec3()) {
    const x = v.x;
    const y = v.y;
    const z = v.z;
    const qx = this.x;
    const qy = this.y;
    const qz = this.z;
    const qw = this.w; // q*v

    const ix = qw * x + qy * z - qz * y;
    const iy = qw * y + qz * x - qx * z;
    const iz = qw * z + qx * y - qy * x;
    const iw = -qx * x - qy * y - qz * z;
    target.x = ix * qw + iw * -qx + iy * -qz - iz * -qy;
    target.y = iy * qw + iw * -qy + iz * -qx - ix * -qz;
    target.z = iz * qw + iw * -qz + ix * -qy - iy * -qx;
    return target;
  }
  /**
   * Copies value of source to this quaternion.
   * @return this
   */


  copy(quat) {
    this.x = quat.x;
    this.y = quat.y;
    this.z = quat.z;
    this.w = quat.w;
    return this;
  }
  /**
   * Convert the quaternion to euler angle representation. Order: YZX, as this page describes: https://www.euclideanspace.com/maths/standards/index.htm
   * @param order Three-character string, defaults to "YZX"
   */


  toEuler(target, order = 'YZX') {
    let heading;
    let attitude;
    let bank;
    const x = this.x;
    const y = this.y;
    const z = this.z;
    const w = this.w;

    switch (order) {
      case 'YZX':
        const test = x * y + z * w;

        if (test > 0.499) {
          // singularity at north pole
          heading = 2 * Math.atan2(x, w);
          attitude = Math.PI / 2;
          bank = 0;
        }

        if (test < -0.499) {
          // singularity at south pole
          heading = -2 * Math.atan2(x, w);
          attitude = -Math.PI / 2;
          bank = 0;
        }

        if (heading === undefined) {
          const sqx = x * x;
          const sqy = y * y;
          const sqz = z * z;
          heading = Math.atan2(2 * y * w - 2 * x * z, 1 - 2 * sqy - 2 * sqz); // Heading

          attitude = Math.asin(2 * test); // attitude

          bank = Math.atan2(2 * x * w - 2 * y * z, 1 - 2 * sqx - 2 * sqz); // bank
        }

        break;

      default:
        throw new Error("Euler order " + order + " not supported yet.");
    }

    target.y = heading;
    target.z = attitude;
    target.x = bank;
  }
  /**
   * @param order The order to apply angles: 'XYZ' or 'YXZ' or any other combination.
   *
   * See {@link https://www.mathworks.com/matlabcentral/fileexchange/20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors MathWorks} reference
   */


  setFromEuler(x, y, z, order = 'XYZ') {
    const c1 = Math.cos(x / 2);
    const c2 = Math.cos(y / 2);
    const c3 = Math.cos(z / 2);
    const s1 = Math.sin(x / 2);
    const s2 = Math.sin(y / 2);
    const s3 = Math.sin(z / 2);

    if (order === 'XYZ') {
      this.x = s1 * c2 * c3 + c1 * s2 * s3;
      this.y = c1 * s2 * c3 - s1 * c2 * s3;
      this.z = c1 * c2 * s3 + s1 * s2 * c3;
      this.w = c1 * c2 * c3 - s1 * s2 * s3;
    } else if (order === 'YXZ') {
      this.x = s1 * c2 * c3 + c1 * s2 * s3;
      this.y = c1 * s2 * c3 - s1 * c2 * s3;
      this.z = c1 * c2 * s3 - s1 * s2 * c3;
      this.w = c1 * c2 * c3 + s1 * s2 * s3;
    } else if (order === 'ZXY') {
      this.x = s1 * c2 * c3 - c1 * s2 * s3;
      this.y = c1 * s2 * c3 + s1 * c2 * s3;
      this.z = c1 * c2 * s3 + s1 * s2 * c3;
      this.w = c1 * c2 * c3 - s1 * s2 * s3;
    } else if (order === 'ZYX') {
      this.x = s1 * c2 * c3 - c1 * s2 * s3;
      this.y = c1 * s2 * c3 + s1 * c2 * s3;
      this.z = c1 * c2 * s3 - s1 * s2 * c3;
      this.w = c1 * c2 * c3 + s1 * s2 * s3;
    } else if (order === 'YZX') {
      this.x = s1 * c2 * c3 + c1 * s2 * s3;
      this.y = c1 * s2 * c3 + s1 * c2 * s3;
      this.z = c1 * c2 * s3 - s1 * s2 * c3;
      this.w = c1 * c2 * c3 - s1 * s2 * s3;
    } else if (order === 'XZY') {
      this.x = s1 * c2 * c3 - c1 * s2 * s3;
      this.y = c1 * s2 * c3 - s1 * c2 * s3;
      this.z = c1 * c2 * s3 + s1 * s2 * c3;
      this.w = c1 * c2 * c3 + s1 * s2 * s3;
    }

    return this;
  }

  clone() {
    return new Quaternion(this.x, this.y, this.z, this.w);
  }
  /**
   * Performs a spherical linear interpolation between two quat
   *
   * @param toQuat second operand
   * @param t interpolation amount between the self quaternion and toQuat
   * @param target A quaternion to store the result in. If not provided, a new one will be created.
   * @returns {Quaternion} The "target" object
   */


  slerp(toQuat, t, target = new Quaternion()) {
    const ax = this.x;
    const ay = this.y;
    const az = this.z;
    const aw = this.w;
    let bx = toQuat.x;
    let by = toQuat.y;
    let bz = toQuat.z;
    let bw = toQuat.w;
    let omega;
    let cosom;
    let sinom;
    let scale0;
    let scale1; // calc cosine

    cosom = ax * bx + ay * by + az * bz + aw * bw; // adjust signs (if necessary)

    if (cosom < 0.0) {
      cosom = -cosom;
      bx = -bx;
      by = -by;
      bz = -bz;
      bw = -bw;
    } // calculate coefficients


    if (1.0 - cosom > 0.000001) {
      // standard case (slerp)
      omega = Math.acos(cosom);
      sinom = Math.sin(omega);
      scale0 = Math.sin((1.0 - t) * omega) / sinom;
      scale1 = Math.sin(t * omega) / sinom;
    } else {
      // "from" and "to" quaternions are very close
      //  ... so we can do a linear interpolation
      scale0 = 1.0 - t;
      scale1 = t;
    } // calculate final values


    target.x = scale0 * ax + scale1 * bx;
    target.y = scale0 * ay + scale1 * by;
    target.z = scale0 * az + scale1 * bz;
    target.w = scale0 * aw + scale1 * bw;
    return target;
  }
  /**
   * Rotate an absolute orientation quaternion given an angular velocity and a time step.
   */


  integrate(angularVelocity, dt, angularFactor, target = new Quaternion()) {
    const ax = angularVelocity.x * angularFactor.x,
          ay = angularVelocity.y * angularFactor.y,
          az = angularVelocity.z * angularFactor.z,
          bx = this.x,
          by = this.y,
          bz = this.z,
          bw = this.w;
    const half_dt = dt * 0.5;
    target.x += half_dt * (ax * bw + ay * bz - az * by);
    target.y += half_dt * (ay * bw + az * bx - ax * bz);
    target.z += half_dt * (az * bw + ax * by - ay * bx);
    target.w += half_dt * (-ax * bx - ay * by - az * bz);
    return target;
  }

}

const sfv_t1 = new Vec3();
const sfv_t2 = new Vec3();
/**
 * The available shape types.
 */

const SHAPE_TYPES = {
  /** SPHERE */
  SPHERE: 1,

  /** PLANE */
  PLANE: 2,

  /** BOX */
  BOX: 4,

  /** COMPOUND */
  COMPOUND: 8,

  /** CONVEXPOLYHEDRON */
  CONVEXPOLYHEDRON: 16,

  /** HEIGHTFIELD */
  HEIGHTFIELD: 32,

  /** PARTICLE */
  PARTICLE: 64,

  /** CYLINDER */
  CYLINDER: 128,

  /** TRIMESH */
  TRIMESH: 256
};
/**
 * ShapeType
 */

/**
 * Base class for shapes
 */

class Shape {
  /**
   * Identifier of the Shape.
   */

  /**
   * The type of this shape. Must be set to an int > 0 by subclasses.
   */

  /**
   * The local bounding sphere radius of this shape.
   */

  /**
   * Whether to produce contact forces when in contact with other bodies. Note that contacts will be generated, but they will be disabled.
   * @default true
   */

  /**
   * @default 1
   */

  /**
   * @default -1
   */

  /**
   * Optional material of the shape that regulates contact properties.
   */

  /**
   * The body to which the shape is added to.
   */

  /**
   * All the Shape types.
   */
  constructor(options = {}) {
    this.id = void 0;
    this.type = void 0;
    this.boundingSphereRadius = void 0;
    this.collisionResponse = void 0;
    this.collisionFilterGroup = void 0;
    this.collisionFilterMask = void 0;
    this.material = void 0;
    this.body = void 0;
    this.id = Shape.idCounter++;
    this.type = options.type || 0;
    this.boundingSphereRadius = 0;
    this.collisionResponse = options.collisionResponse ? options.collisionResponse : true;
    this.collisionFilterGroup = options.collisionFilterGroup !== undefined ? options.collisionFilterGroup : 1;
    this.collisionFilterMask = options.collisionFilterMask !== undefined ? options.collisionFilterMask : -1;
    this.material = options.material ? options.material : null;
    this.body = null;
  }
  /**
   * Computes the bounding sphere radius.
   * The result is stored in the property `.boundingSphereRadius`
   */


  updateBoundingSphereRadius() {
    throw "computeBoundingSphereRadius() not implemented for shape type " + this.type;
  }
  /**
   * Get the volume of this shape
   */


  volume() {
    throw "volume() not implemented for shape type " + this.type;
  }
  /**
   * Calculates the inertia in the local frame for this shape.
   * @see http://en.wikipedia.org/wiki/List_of_moments_of_inertia
   */


  calculateLocalInertia(mass, target) {
    throw "calculateLocalInertia() not implemented for shape type " + this.type;
  }
  /**
   * @todo use abstract for these kind of methods
   */


  calculateWorldAABB(pos, quat, min, max) {
    throw "calculateWorldAABB() not implemented for shape type " + this.type;
  }

}

Shape.idCounter = 0;
Shape.types = SHAPE_TYPES;
/**
 * Transformation utilities.
 */

class Transform {
  /**
   * position
   */

  /**
   * quaternion
   */
  constructor(options = {}) {
    this.position = void 0;
    this.quaternion = void 0;
    this.position = new Vec3();
    this.quaternion = new Quaternion();

    if (options.position) {
      this.position.copy(options.position);
    }

    if (options.quaternion) {
      this.quaternion.copy(options.quaternion);
    }
  }
  /**
   * Get a global point in local transform coordinates.
   */


  pointToLocal(worldPoint, result) {
    return Transform.pointToLocalFrame(this.position, this.quaternion, worldPoint, result);
  }
  /**
   * Get a local point in global transform coordinates.
   */


  pointToWorld(localPoint, result) {
    return Transform.pointToWorldFrame(this.position, this.quaternion, localPoint, result);
  }
  /**
   * vectorToWorldFrame
   */


  vectorToWorldFrame(localVector, result = new Vec3()) {
    this.quaternion.vmult(localVector, result);
    return result;
  }
  /**
   * pointToLocalFrame
   */


  static pointToLocalFrame(position, quaternion, worldPoint, result = new Vec3()) {
    worldPoint.vsub(position, result);
    quaternion.conjugate(tmpQuat$1);
    tmpQuat$1.vmult(result, result);
    return result;
  }
  /**
   * pointToWorldFrame
   */


  static pointToWorldFrame(position, quaternion, localPoint, result = new Vec3()) {
    quaternion.vmult(localPoint, result);
    result.vadd(position, result);
    return result;
  }
  /**
   * vectorToWorldFrame
   */


  static vectorToWorldFrame(quaternion, localVector, result = new Vec3()) {
    quaternion.vmult(localVector, result);
    return result;
  }
  /**
   * vectorToLocalFrame
   */


  static vectorToLocalFrame(position, quaternion, worldVector, result = new Vec3()) {
    quaternion.w *= -1;
    quaternion.vmult(worldVector, result);
    quaternion.w *= -1;
    return result;
  }

}

const tmpQuat$1 = new Quaternion();
/**
 * A set of polygons describing a convex shape.
 *
 * The shape MUST be convex for the code to work properly. No polygons may be coplanar (contained
 * in the same 3D plane), instead these should be merged into one polygon.
 *
 * @author qiao / https://github.com/qiao (original author, see https://github.com/qiao/three.js/commit/85026f0c769e4000148a67d45a9e9b9c5108836f)
 * @author schteppe / https://github.com/schteppe
 * @see https://www.altdevblogaday.com/2011/05/13/contact-generation-between-3d-convex-meshes/
 *
 * @todo Move the clipping functions to ContactGenerator?
 * @todo Automatically merge coplanar polygons in constructor.
 * @example
 *     const convexShape = new CANNON.ConvexPolyhedron({ vertices, faces })
 *     const convexBody = new CANNON.Body({ mass: 1, shape: convexShape })
 *     world.addBody(convexBody)
 */

class ConvexPolyhedron extends Shape {
  /** vertices */

  /**
   * Array of integer arrays, indicating which vertices each face consists of
   */

  /** faceNormals */

  /** worldVertices */

  /** worldVerticesNeedsUpdate */

  /** worldFaceNormals */

  /** worldFaceNormalsNeedsUpdate */

  /**
   * If given, these locally defined, normalized axes are the only ones being checked when doing separating axis check.
   */

  /** uniqueEdges */

  /**
   * @param vertices An array of Vec3's
   * @param faces Array of integer arrays, describing which vertices that is included in each face.
   */
  constructor(props = {}) {
    const {
      vertices = [],
      faces = [],
      normals = [],
      axes,
      boundingSphereRadius
    } = props;
    super({
      type: Shape.types.CONVEXPOLYHEDRON
    });
    this.vertices = void 0;
    this.faces = void 0;
    this.faceNormals = void 0;
    this.worldVertices = void 0;
    this.worldVerticesNeedsUpdate = void 0;
    this.worldFaceNormals = void 0;
    this.worldFaceNormalsNeedsUpdate = void 0;
    this.uniqueAxes = void 0;
    this.uniqueEdges = void 0;
    this.vertices = vertices;
    this.faces = faces;
    this.faceNormals = normals;

    if (this.faceNormals.length === 0) {
      this.computeNormals();
    }

    if (!boundingSphereRadius) {
      this.updateBoundingSphereRadius();
    } else {
      this.boundingSphereRadius = boundingSphereRadius;
    }

    this.worldVertices = []; // World transformed version of .vertices

    this.worldVerticesNeedsUpdate = true;
    this.worldFaceNormals = []; // World transformed version of .faceNormals

    this.worldFaceNormalsNeedsUpdate = true;
    this.uniqueAxes = axes ? axes.slice() : null;
    this.uniqueEdges = [];
    this.computeEdges();
  }
  /**
   * Computes uniqueEdges
   */


  computeEdges() {
    const faces = this.faces;
    const vertices = this.vertices;
    const edges = this.uniqueEdges;
    edges.length = 0;
    const edge = new Vec3();

    for (let i = 0; i !== faces.length; i++) {
      const face = faces[i];
      const numVertices = face.length;

      for (let j = 0; j !== numVertices; j++) {
        const k = (j + 1) % numVertices;
        vertices[face[j]].vsub(vertices[face[k]], edge);
        edge.normalize();
        let found = false;

        for (let p = 0; p !== edges.length; p++) {
          if (edges[p].almostEquals(edge) || edges[p].almostEquals(edge)) {
            found = true;
            break;
          }
        }

        if (!found) {
          edges.push(edge.clone());
        }
      }
    }
  }
  /**
   * Compute the normals of the faces.
   * Will reuse existing Vec3 objects in the `faceNormals` array if they exist.
   */


  computeNormals() {
    this.faceNormals.length = this.faces.length; // Generate normals

    for (let i = 0; i < this.faces.length; i++) {
      // Check so all vertices exists for this face
      for (let j = 0; j < this.faces[i].length; j++) {
        if (!this.vertices[this.faces[i][j]]) {
          throw new Error("Vertex " + this.faces[i][j] + " not found!");
        }
      }

      const n = this.faceNormals[i] || new Vec3();
      this.getFaceNormal(i, n);
      n.negate(n);
      this.faceNormals[i] = n;
      const vertex = this.vertices[this.faces[i][0]];

      if (n.dot(vertex) < 0) {
        console.error(".faceNormals[" + i + "] = Vec3(" + n.toString() + ") looks like it points into the shape? The vertices follow. Make sure they are ordered CCW around the normal, using the right hand rule.");

        for (let j = 0; j < this.faces[i].length; j++) {
          console.warn(".vertices[" + this.faces[i][j] + "] = Vec3(" + this.vertices[this.faces[i][j]].toString() + ")");
        }
      }
    }
  }
  /**
   * Compute the normal of a face from its vertices
   */


  getFaceNormal(i, target) {
    const f = this.faces[i];
    const va = this.vertices[f[0]];
    const vb = this.vertices[f[1]];
    const vc = this.vertices[f[2]];
    ConvexPolyhedron.computeNormal(va, vb, vc, target);
  }
  /**
   * Get face normal given 3 vertices
   */


  static computeNormal(va, vb, vc, target) {
    const cb = new Vec3();
    const ab = new Vec3();
    vb.vsub(va, ab);
    vc.vsub(vb, cb);
    cb.cross(ab, target);

    if (!target.isZero()) {
      target.normalize();
    }
  }
  /**
   * @param minDist Clamp distance
   * @param result The an array of contact point objects, see clipFaceAgainstHull
   */


  clipAgainstHull(posA, quatA, hullB, posB, quatB, separatingNormal, minDist, maxDist, result) {
    const WorldNormal = new Vec3();
    let closestFaceB = -1;
    let dmax = -Number.MAX_VALUE;

    for (let face = 0; face < hullB.faces.length; face++) {
      WorldNormal.copy(hullB.faceNormals[face]);
      quatB.vmult(WorldNormal, WorldNormal);
      const d = WorldNormal.dot(separatingNormal);

      if (d > dmax) {
        dmax = d;
        closestFaceB = face;
      }
    }

    const worldVertsB1 = [];

    for (let i = 0; i < hullB.faces[closestFaceB].length; i++) {
      const b = hullB.vertices[hullB.faces[closestFaceB][i]];
      const worldb = new Vec3();
      worldb.copy(b);
      quatB.vmult(worldb, worldb);
      posB.vadd(worldb, worldb);
      worldVertsB1.push(worldb);
    }

    if (closestFaceB >= 0) {
      this.clipFaceAgainstHull(separatingNormal, posA, quatA, worldVertsB1, minDist, maxDist, result);
    }
  }
  /**
   * Find the separating axis between this hull and another
   * @param target The target vector to save the axis in
   * @return Returns false if a separation is found, else true
   */


  findSeparatingAxis(hullB, posA, quatA, posB, quatB, target, faceListA, faceListB) {
    const faceANormalWS3 = new Vec3();
    const Worldnormal1 = new Vec3();
    const deltaC = new Vec3();
    const worldEdge0 = new Vec3();
    const worldEdge1 = new Vec3();
    const Cross = new Vec3();
    let dmin = Number.MAX_VALUE;
    const hullA = this;

    if (!hullA.uniqueAxes) {
      const numFacesA = faceListA ? faceListA.length : hullA.faces.length; // Test face normals from hullA

      for (let i = 0; i < numFacesA; i++) {
        const fi = faceListA ? faceListA[i] : i; // Get world face normal

        faceANormalWS3.copy(hullA.faceNormals[fi]);
        quatA.vmult(faceANormalWS3, faceANormalWS3);
        const d = hullA.testSepAxis(faceANormalWS3, hullB, posA, quatA, posB, quatB);

        if (d === false) {
          return false;
        }

        if (d < dmin) {
          dmin = d;
          target.copy(faceANormalWS3);
        }
      }
    } else {
      // Test unique axes
      for (let i = 0; i !== hullA.uniqueAxes.length; i++) {
        // Get world axis
        quatA.vmult(hullA.uniqueAxes[i], faceANormalWS3);
        const d = hullA.testSepAxis(faceANormalWS3, hullB, posA, quatA, posB, quatB);

        if (d === false) {
          return false;
        }

        if (d < dmin) {
          dmin = d;
          target.copy(faceANormalWS3);
        }
      }
    }

    if (!hullB.uniqueAxes) {
      // Test face normals from hullB
      const numFacesB = faceListB ? faceListB.length : hullB.faces.length;

      for (let i = 0; i < numFacesB; i++) {
        const fi = faceListB ? faceListB[i] : i;
        Worldnormal1.copy(hullB.faceNormals[fi]);
        quatB.vmult(Worldnormal1, Worldnormal1);
        const d = hullA.testSepAxis(Worldnormal1, hullB, posA, quatA, posB, quatB);

        if (d === false) {
          return false;
        }

        if (d < dmin) {
          dmin = d;
          target.copy(Worldnormal1);
        }
      }
    } else {
      // Test unique axes in B
      for (let i = 0; i !== hullB.uniqueAxes.length; i++) {
        quatB.vmult(hullB.uniqueAxes[i], Worldnormal1);
        const d = hullA.testSepAxis(Worldnormal1, hullB, posA, quatA, posB, quatB);

        if (d === false) {
          return false;
        }

        if (d < dmin) {
          dmin = d;
          target.copy(Worldnormal1);
        }
      }
    } // Test edges


    for (let e0 = 0; e0 !== hullA.uniqueEdges.length; e0++) {
      // Get world edge
      quatA.vmult(hullA.uniqueEdges[e0], worldEdge0);

      for (let e1 = 0; e1 !== hullB.uniqueEdges.length; e1++) {
        // Get world edge 2
        quatB.vmult(hullB.uniqueEdges[e1], worldEdge1);
        worldEdge0.cross(worldEdge1, Cross);

        if (!Cross.almostZero()) {
          Cross.normalize();
          const dist = hullA.testSepAxis(Cross, hullB, posA, quatA, posB, quatB);

          if (dist === false) {
            return false;
          }

          if (dist < dmin) {
            dmin = dist;
            target.copy(Cross);
          }
        }
      }
    }

    posB.vsub(posA, deltaC);

    if (deltaC.dot(target) > 0.0) {
      target.negate(target);
    }

    return true;
  }
  /**
   * Test separating axis against two hulls. Both hulls are projected onto the axis and the overlap size is returned if there is one.
   * @return The overlap depth, or FALSE if no penetration.
   */


  testSepAxis(axis, hullB, posA, quatA, posB, quatB) {
    const hullA = this;
    ConvexPolyhedron.project(hullA, axis, posA, quatA, maxminA);
    ConvexPolyhedron.project(hullB, axis, posB, quatB, maxminB);
    const maxA = maxminA[0];
    const minA = maxminA[1];
    const maxB = maxminB[0];
    const minB = maxminB[1];

    if (maxA < minB || maxB < minA) {
      return false; // Separated
    }

    const d0 = maxA - minB;
    const d1 = maxB - minA;
    const depth = d0 < d1 ? d0 : d1;
    return depth;
  }
  /**
   * calculateLocalInertia
   */


  calculateLocalInertia(mass, target) {
    // Approximate with box inertia
    // Exact inertia calculation is overkill, but see http://geometrictools.com/Documentation/PolyhedralMassProperties.pdf for the correct way to do it
    const aabbmax = new Vec3();
    const aabbmin = new Vec3();
    this.computeLocalAABB(aabbmin, aabbmax);
    const x = aabbmax.x - aabbmin.x;
    const y = aabbmax.y - aabbmin.y;
    const z = aabbmax.z - aabbmin.z;
    target.x = 1.0 / 12.0 * mass * (2 * y * 2 * y + 2 * z * 2 * z);
    target.y = 1.0 / 12.0 * mass * (2 * x * 2 * x + 2 * z * 2 * z);
    target.z = 1.0 / 12.0 * mass * (2 * y * 2 * y + 2 * x * 2 * x);
  }
  /**
   * @param face_i Index of the face
   */


  getPlaneConstantOfFace(face_i) {
    const f = this.faces[face_i];
    const n = this.faceNormals[face_i];
    const v = this.vertices[f[0]];
    const c = -n.dot(v);
    return c;
  }
  /**
   * Clip a face against a hull.
   * @param worldVertsB1 An array of Vec3 with vertices in the world frame.
   * @param minDist Distance clamping
   * @param Array result Array to store resulting contact points in. Will be objects with properties: point, depth, normal. These are represented in world coordinates.
   */


  clipFaceAgainstHull(separatingNormal, posA, quatA, worldVertsB1, minDist, maxDist, result) {
    const faceANormalWS = new Vec3();
    const edge0 = new Vec3();
    const WorldEdge0 = new Vec3();
    const worldPlaneAnormal1 = new Vec3();
    const planeNormalWS1 = new Vec3();
    const worldA1 = new Vec3();
    const localPlaneNormal = new Vec3();
    const planeNormalWS = new Vec3();
    const hullA = this;
    const worldVertsB2 = [];
    const pVtxIn = worldVertsB1;
    const pVtxOut = worldVertsB2;
    let closestFaceA = -1;
    let dmin = Number.MAX_VALUE; // Find the face with normal closest to the separating axis

    for (let face = 0; face < hullA.faces.length; face++) {
      faceANormalWS.copy(hullA.faceNormals[face]);
      quatA.vmult(faceANormalWS, faceANormalWS);
      const d = faceANormalWS.dot(separatingNormal);

      if (d < dmin) {
        dmin = d;
        closestFaceA = face;
      }
    }

    if (closestFaceA < 0) {
      return;
    } // Get the face and construct connected faces


    const polyA = hullA.faces[closestFaceA];
    polyA.connectedFaces = [];

    for (let i = 0; i < hullA.faces.length; i++) {
      for (let j = 0; j < hullA.faces[i].length; j++) {
        if (
        /* Sharing a vertex*/
        polyA.indexOf(hullA.faces[i][j]) !== -1 &&
        /* Not the one we are looking for connections from */
        i !== closestFaceA &&
        /* Not already added */
        polyA.connectedFaces.indexOf(i) === -1) {
          polyA.connectedFaces.push(i);
        }
      }
    } // Clip the polygon to the back of the planes of all faces of hull A,
    // that are adjacent to the witness face


    const numVerticesA = polyA.length;

    for (let i = 0; i < numVerticesA; i++) {
      const a = hullA.vertices[polyA[i]];
      const b = hullA.vertices[polyA[(i + 1) % numVerticesA]];
      a.vsub(b, edge0);
      WorldEdge0.copy(edge0);
      quatA.vmult(WorldEdge0, WorldEdge0);
      posA.vadd(WorldEdge0, WorldEdge0);
      worldPlaneAnormal1.copy(this.faceNormals[closestFaceA]);
      quatA.vmult(worldPlaneAnormal1, worldPlaneAnormal1);
      posA.vadd(worldPlaneAnormal1, worldPlaneAnormal1);
      WorldEdge0.cross(worldPlaneAnormal1, planeNormalWS1);
      planeNormalWS1.negate(planeNormalWS1);
      worldA1.copy(a);
      quatA.vmult(worldA1, worldA1);
      posA.vadd(worldA1, worldA1);
      const otherFace = polyA.connectedFaces[i];
      localPlaneNormal.copy(this.faceNormals[otherFace]);
      const localPlaneEq = this.getPlaneConstantOfFace(otherFace);
      planeNormalWS.copy(localPlaneNormal);
      quatA.vmult(planeNormalWS, planeNormalWS);
      const planeEqWS = localPlaneEq - planeNormalWS.dot(posA); // Clip face against our constructed plane

      this.clipFaceAgainstPlane(pVtxIn, pVtxOut, planeNormalWS, planeEqWS); // Throw away all clipped points, but save the remaining until next clip

      while (pVtxIn.length) {
        pVtxIn.shift();
      }

      while (pVtxOut.length) {
        pVtxIn.push(pVtxOut.shift());
      }
    } // only keep contact points that are behind the witness face


    localPlaneNormal.copy(this.faceNormals[closestFaceA]);
    const localPlaneEq = this.getPlaneConstantOfFace(closestFaceA);
    planeNormalWS.copy(localPlaneNormal);
    quatA.vmult(planeNormalWS, planeNormalWS);
    const planeEqWS = localPlaneEq - planeNormalWS.dot(posA);

    for (let i = 0; i < pVtxIn.length; i++) {
      let depth = planeNormalWS.dot(pVtxIn[i]) + planeEqWS; // ???

      if (depth <= minDist) {
        console.log("clamped: depth=" + depth + " to minDist=" + minDist);
        depth = minDist;
      }

      if (depth <= maxDist) {
        const point = pVtxIn[i];

        if (depth <= 1e-6) {
          const p = {
            point,
            normal: planeNormalWS,
            depth
          };
          result.push(p);
        }
      }
    }
  }
  /**
   * Clip a face in a hull against the back of a plane.
   * @param planeConstant The constant in the mathematical plane equation
   */


  clipFaceAgainstPlane(inVertices, outVertices, planeNormal, planeConstant) {
    let n_dot_first;
    let n_dot_last;
    const numVerts = inVertices.length;

    if (numVerts < 2) {
      return outVertices;
    }

    let firstVertex = inVertices[inVertices.length - 1];
    let lastVertex = inVertices[0];
    n_dot_first = planeNormal.dot(firstVertex) + planeConstant;

    for (let vi = 0; vi < numVerts; vi++) {
      lastVertex = inVertices[vi];
      n_dot_last = planeNormal.dot(lastVertex) + planeConstant;

      if (n_dot_first < 0) {
        if (n_dot_last < 0) {
          // Start < 0, end < 0, so output lastVertex
          const newv = new Vec3();
          newv.copy(lastVertex);
          outVertices.push(newv);
        } else {
          // Start < 0, end >= 0, so output intersection
          const newv = new Vec3();
          firstVertex.lerp(lastVertex, n_dot_first / (n_dot_first - n_dot_last), newv);
          outVertices.push(newv);
        }
      } else {
        if (n_dot_last < 0) {
          // Start >= 0, end < 0 so output intersection and end
          const newv = new Vec3();
          firstVertex.lerp(lastVertex, n_dot_first / (n_dot_first - n_dot_last), newv);
          outVertices.push(newv);
          outVertices.push(lastVertex);
        }
      }

      firstVertex = lastVertex;
      n_dot_first = n_dot_last;
    }

    return outVertices;
  }
  /**
   * Updates `.worldVertices` and sets `.worldVerticesNeedsUpdate` to false.
   */


  computeWorldVertices(position, quat) {
    while (this.worldVertices.length < this.vertices.length) {
      this.worldVertices.push(new Vec3());
    }

    const verts = this.vertices;
    const worldVerts = this.worldVertices;

    for (let i = 0; i !== this.vertices.length; i++) {
      quat.vmult(verts[i], worldVerts[i]);
      position.vadd(worldVerts[i], worldVerts[i]);
    }

    this.worldVerticesNeedsUpdate = false;
  }

  computeLocalAABB(aabbmin, aabbmax) {
    const vertices = this.vertices;
    aabbmin.set(Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE);
    aabbmax.set(-Number.MAX_VALUE, -Number.MAX_VALUE, -Number.MAX_VALUE);

    for (let i = 0; i < this.vertices.length; i++) {
      const v = vertices[i];

      if (v.x < aabbmin.x) {
        aabbmin.x = v.x;
      } else if (v.x > aabbmax.x) {
        aabbmax.x = v.x;
      }

      if (v.y < aabbmin.y) {
        aabbmin.y = v.y;
      } else if (v.y > aabbmax.y) {
        aabbmax.y = v.y;
      }

      if (v.z < aabbmin.z) {
        aabbmin.z = v.z;
      } else if (v.z > aabbmax.z) {
        aabbmax.z = v.z;
      }
    }
  }
  /**
   * Updates `worldVertices` and sets `worldVerticesNeedsUpdate` to false.
   */


  computeWorldFaceNormals(quat) {
    const N = this.faceNormals.length;

    while (this.worldFaceNormals.length < N) {
      this.worldFaceNormals.push(new Vec3());
    }

    const normals = this.faceNormals;
    const worldNormals = this.worldFaceNormals;

    for (let i = 0; i !== N; i++) {
      quat.vmult(normals[i], worldNormals[i]);
    }

    this.worldFaceNormalsNeedsUpdate = false;
  }
  /**
   * updateBoundingSphereRadius
   */


  updateBoundingSphereRadius() {
    // Assume points are distributed with local (0,0,0) as center
    let max2 = 0;
    const verts = this.vertices;

    for (let i = 0; i !== verts.length; i++) {
      const norm2 = verts[i].lengthSquared();

      if (norm2 > max2) {
        max2 = norm2;
      }
    }

    this.boundingSphereRadius = Math.sqrt(max2);
  }
  /**
   * calculateWorldAABB
   */


  calculateWorldAABB(pos, quat, min, max) {
    const verts = this.vertices;
    let minx;
    let miny;
    let minz;
    let maxx;
    let maxy;
    let maxz;
    let tempWorldVertex = new Vec3();

    for (let i = 0; i < verts.length; i++) {
      tempWorldVertex.copy(verts[i]);
      quat.vmult(tempWorldVertex, tempWorldVertex);
      pos.vadd(tempWorldVertex, tempWorldVertex);
      const v = tempWorldVertex;

      if (minx === undefined || v.x < minx) {
        minx = v.x;
      }

      if (maxx === undefined || v.x > maxx) {
        maxx = v.x;
      }

      if (miny === undefined || v.y < miny) {
        miny = v.y;
      }

      if (maxy === undefined || v.y > maxy) {
        maxy = v.y;
      }

      if (minz === undefined || v.z < minz) {
        minz = v.z;
      }

      if (maxz === undefined || v.z > maxz) {
        maxz = v.z;
      }
    }

    min.set(minx, miny, minz);
    max.set(maxx, maxy, maxz);
  }
  /**
   * Get approximate convex volume
   */


  volume() {
    return 4.0 * Math.PI * this.boundingSphereRadius / 3.0;
  }
  /**
   * Get an average of all the vertices positions
   */


  getAveragePointLocal(target = new Vec3()) {
    const verts = this.vertices;

    for (let i = 0; i < verts.length; i++) {
      target.vadd(verts[i], target);
    }

    target.scale(1 / verts.length, target);
    return target;
  }
  /**
   * Transform all local points. Will change the .vertices
   */


  transformAllPoints(offset, quat) {
    const n = this.vertices.length;
    const verts = this.vertices; // Apply rotation

    if (quat) {
      // Rotate vertices
      for (let i = 0; i < n; i++) {
        const v = verts[i];
        quat.vmult(v, v);
      } // Rotate face normals


      for (let i = 0; i < this.faceNormals.length; i++) {
        const v = this.faceNormals[i];
        quat.vmult(v, v);
      }
      /*
            // Rotate edges
            for(let i=0; i<this.uniqueEdges.length; i++){
                const v = this.uniqueEdges[i];
                quat.vmult(v,v);
            }*/

    } // Apply offset


    if (offset) {
      for (let i = 0; i < n; i++) {
        const v = verts[i];
        v.vadd(offset, v);
      }
    }
  }
  /**
   * Checks whether p is inside the polyhedra. Must be in local coords.
   * The point lies outside of the convex hull of the other points if and only if the direction
   * of all the vectors from it to those other points are on less than one half of a sphere around it.
   * @param p A point given in local coordinates
   */


  pointIsInside(p) {
    const verts = this.vertices;
    const faces = this.faces;
    const normals = this.faceNormals;
    const pointInside = new Vec3();
    this.getAveragePointLocal(pointInside);

    for (let i = 0; i < this.faces.length; i++) {
      let n = normals[i];
      const v = verts[faces[i][0]]; // We only need one point in the face
      // This dot product determines which side of the edge the point is

      const vToP = new Vec3();
      p.vsub(v, vToP);
      const r1 = n.dot(vToP);
      const vToPointInside = new Vec3();
      pointInside.vsub(v, vToPointInside);
      const r2 = n.dot(vToPointInside);

      if (r1 < 0 && r2 > 0 || r1 > 0 && r2 < 0) {
        return false; // Encountered some other sign. Exit.
      }
    } // If we got here, all dot products were of the same sign.


    return -1;
  }
  /**
   * Get max and min dot product of a convex hull at position (pos,quat) projected onto an axis.
   * Results are saved in the array maxmin.
   * @param result result[0] and result[1] will be set to maximum and minimum, respectively.
   */


  static project(shape, axis, pos, quat, result) {
    const n = shape.vertices.length;
    const localAxis = project_localAxis;
    let max = 0;
    let min = 0;
    const localOrigin = project_localOrigin;
    const vs = shape.vertices;
    localOrigin.setZero(); // Transform the axis to local

    Transform.vectorToLocalFrame(pos, quat, axis, localAxis);
    Transform.pointToLocalFrame(pos, quat, localOrigin, localOrigin);
    const add = localOrigin.dot(localAxis);
    min = max = vs[0].dot(localAxis);

    for (let i = 1; i < n; i++) {
      const val = vs[i].dot(localAxis);

      if (val > max) {
        max = val;
      }

      if (val < min) {
        min = val;
      }
    }

    min -= add;
    max -= add;

    if (min > max) {
      // Inconsistent - swap
      const temp = min;
      min = max;
      max = temp;
    } // Output


    result[0] = max;
    result[1] = min;
  }

}

const maxminA = [];
const maxminB = [];
const project_localAxis = new Vec3();
const project_localOrigin = new Vec3();
/**
 * A 3d box shape.
 * @example
 *     const size = 1
 *     const halfExtents = new CANNON.Vec3(size, size, size)
 *     const boxShape = new CANNON.Box(halfExtents)
 *     const boxBody = new CANNON.Body({ mass: 1, shape: boxShape })
 *     world.addBody(boxBody)
 */

class Box extends Shape {
  /**
   * The half extents of the box.
   */

  /**
   * Used by the contact generator to make contacts with other convex polyhedra for example.
   */
  constructor(halfExtents) {
    super({
      type: Shape.types.BOX
    });
    this.halfExtents = void 0;
    this.convexPolyhedronRepresentation = void 0;
    this.halfExtents = halfExtents;
    this.convexPolyhedronRepresentation = null;
    this.updateConvexPolyhedronRepresentation();
    this.updateBoundingSphereRadius();
  }
  /**
   * Updates the local convex polyhedron representation used for some collisions.
   */


  updateConvexPolyhedronRepresentation() {
    const sx = this.halfExtents.x;
    const sy = this.halfExtents.y;
    const sz = this.halfExtents.z;
    const V = Vec3;
    const vertices = [new V(-sx, -sy, -sz), new V(sx, -sy, -sz), new V(sx, sy, -sz), new V(-sx, sy, -sz), new V(-sx, -sy, sz), new V(sx, -sy, sz), new V(sx, sy, sz), new V(-sx, sy, sz)];
    const faces = [[3, 2, 1, 0], // -z
    [4, 5, 6, 7], // +z
    [5, 4, 0, 1], // -y
    [2, 3, 7, 6], // +y
    [0, 4, 7, 3], // -x
    [1, 2, 6, 5] // +x
    ];
    const axes = [new V(0, 0, 1), new V(0, 1, 0), new V(1, 0, 0)];
    const h = new ConvexPolyhedron({
      vertices,
      faces,
      axes
    });
    this.convexPolyhedronRepresentation = h;
    h.material = this.material;
  }
  /**
   * Calculate the inertia of the box.
   */


  calculateLocalInertia(mass, target = new Vec3()) {
    Box.calculateInertia(this.halfExtents, mass, target);
    return target;
  }

  static calculateInertia(halfExtents, mass, target) {
    const e = halfExtents;
    target.x = 1.0 / 12.0 * mass * (2 * e.y * 2 * e.y + 2 * e.z * 2 * e.z);
    target.y = 1.0 / 12.0 * mass * (2 * e.x * 2 * e.x + 2 * e.z * 2 * e.z);
    target.z = 1.0 / 12.0 * mass * (2 * e.y * 2 * e.y + 2 * e.x * 2 * e.x);
  }
  /**
   * Get the box 6 side normals
   * @param sixTargetVectors An array of 6 vectors, to store the resulting side normals in.
   * @param quat Orientation to apply to the normal vectors. If not provided, the vectors will be in respect to the local frame.
   */


  getSideNormals(sixTargetVectors, quat) {
    const sides = sixTargetVectors;
    const ex = this.halfExtents;
    sides[0].set(ex.x, 0, 0);
    sides[1].set(0, ex.y, 0);
    sides[2].set(0, 0, ex.z);
    sides[3].set(-ex.x, 0, 0);
    sides[4].set(0, -ex.y, 0);
    sides[5].set(0, 0, -ex.z);

    if (quat !== undefined) {
      for (let i = 0; i !== sides.length; i++) {
        quat.vmult(sides[i], sides[i]);
      }
    }

    return sides;
  }
  /**
   * Returns the volume of the box.
   */


  volume() {
    return 8.0 * this.halfExtents.x * this.halfExtents.y * this.halfExtents.z;
  }
  /**
   * updateBoundingSphereRadius
   */


  updateBoundingSphereRadius() {
    this.boundingSphereRadius = this.halfExtents.length();
  }
  /**
   * forEachWorldCorner
   */


  forEachWorldCorner(pos, quat, callback) {
    const e = this.halfExtents;
    const corners = [[e.x, e.y, e.z], [-e.x, e.y, e.z], [-e.x, -e.y, e.z], [-e.x, -e.y, -e.z], [e.x, -e.y, -e.z], [e.x, e.y, -e.z], [-e.x, e.y, -e.z], [e.x, -e.y, e.z]];

    for (let i = 0; i < corners.length; i++) {
      worldCornerTempPos.set(corners[i][0], corners[i][1], corners[i][2]);
      quat.vmult(worldCornerTempPos, worldCornerTempPos);
      pos.vadd(worldCornerTempPos, worldCornerTempPos);
      callback(worldCornerTempPos.x, worldCornerTempPos.y, worldCornerTempPos.z);
    }
  }
  /**
   * calculateWorldAABB
   */


  calculateWorldAABB(pos, quat, min, max) {
    const e = this.halfExtents;
    worldCornersTemp[0].set(e.x, e.y, e.z);
    worldCornersTemp[1].set(-e.x, e.y, e.z);
    worldCornersTemp[2].set(-e.x, -e.y, e.z);
    worldCornersTemp[3].set(-e.x, -e.y, -e.z);
    worldCornersTemp[4].set(e.x, -e.y, -e.z);
    worldCornersTemp[5].set(e.x, e.y, -e.z);
    worldCornersTemp[6].set(-e.x, e.y, -e.z);
    worldCornersTemp[7].set(e.x, -e.y, e.z);
    const wc = worldCornersTemp[0];
    quat.vmult(wc, wc);
    pos.vadd(wc, wc);
    max.copy(wc);
    min.copy(wc);

    for (let i = 1; i < 8; i++) {
      const wc = worldCornersTemp[i];
      quat.vmult(wc, wc);
      pos.vadd(wc, wc);
      const x = wc.x;
      const y = wc.y;
      const z = wc.z;

      if (x > max.x) {
        max.x = x;
      }

      if (y > max.y) {
        max.y = y;
      }

      if (z > max.z) {
        max.z = z;
      }

      if (x < min.x) {
        min.x = x;
      }

      if (y < min.y) {
        min.y = y;
      }

      if (z < min.z) {
        min.z = z;
      }
    } // Get each axis max
    // min.set(Infinity,Infinity,Infinity);
    // max.set(-Infinity,-Infinity,-Infinity);
    // this.forEachWorldCorner(pos,quat,function(x,y,z){
    //     if(x > max.x){
    //         max.x = x;
    //     }
    //     if(y > max.y){
    //         max.y = y;
    //     }
    //     if(z > max.z){
    //         max.z = z;
    //     }
    //     if(x < min.x){
    //         min.x = x;
    //     }
    //     if(y < min.y){
    //         min.y = y;
    //     }
    //     if(z < min.z){
    //         min.z = z;
    //     }
    // });

  }

}

const worldCornerTempPos = new Vec3();
const worldCornersTemp = [new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3()];
/**
 * BODY_TYPES
 */

const BODY_TYPES = {
  /** DYNAMIC */
  DYNAMIC: 1,

  /** STATIC */
  STATIC: 2,

  /** KINEMATIC */
  KINEMATIC: 4
};
/**
 * BodyType
 */

/**
 * BODY_SLEEP_STATES
 */

const BODY_SLEEP_STATES = {
  /** AWAKE */
  AWAKE: 0,

  /** SLEEPY */
  SLEEPY: 1,

  /** SLEEPING */
  SLEEPING: 2
};
/**
 * BodySleepState
 */

/**
 * Base class for all body types.
 * @example
 *     const shape = new CANNON.Sphere(1)
 *     const body = new CANNON.Body({
 *       mass: 1,
 *       shape,
 *     })
 *     world.addBody(body)
 */

class Body extends EventTarget {
  /**
   * Dispatched after two bodies collide. This event is dispatched on each
   * of the two bodies involved in the collision.
   * @event collide
   * @param body The body that was involved in the collision.
   * @param contact The details of the collision.
   */

  /**
   * A dynamic body is fully simulated. Can be moved manually by the user, but normally they move according to forces. A dynamic body can collide with all body types. A dynamic body always has finite, non-zero mass.
   */

  /**
   * A static body does not move during simulation and behaves as if it has infinite mass. Static bodies can be moved manually by setting the position of the body. The velocity of a static body is always zero. Static bodies do not collide with other static or kinematic bodies.
   */

  /**
   * A kinematic body moves under simulation according to its velocity. They do not respond to forces. They can be moved manually, but normally a kinematic body is moved by setting its velocity. A kinematic body behaves as if it has infinite mass. Kinematic bodies do not collide with other static or kinematic bodies.
   */

  /**
   * AWAKE
   */

  /**
   * SLEEPY
   */

  /**
   * SLEEPING
   */

  /**
   * Dispatched after a sleeping body has woken up.
   * @event wakeup
   */

  /**
   * Dispatched after a body has gone in to the sleepy state.
   * @event sleepy
   */

  /**
   * Dispatched after a body has fallen asleep.
   * @event sleep
   */

  /**
   * Identifier of the body.
   */

  /**
   * Position of body in World.bodies. Updated by World and used in ArrayCollisionMatrix.
   */

  /**
   * Reference to the world the body is living in.
   */

  /**
   * Callback function that is used BEFORE stepping the system. Use it to apply forces, for example. Inside the function, "this" will refer to this Body object. Deprecated - use World events instead.
   * @deprecated Use World events instead
   */

  /**
   * Callback function that is used AFTER stepping the system. Inside the function, "this" will refer to this Body object. Deprecated - use World events instead.
   * @deprecated Use World events instead
   */

  /**
   * The collision group the body belongs to.
   * @default 1
   */

  /**
   * The collision group the body can collide with.
   * @default -1
   */

  /**
   * Whether to produce contact forces when in contact with other bodies. Note that contacts will be generated, but they will be disabled - i.e. "collide" events will be raised, but forces will not be altered.
   */

  /**
   * World space position of the body.
   */

  /**
   * Interpolated position of the body.
   */

  /**
   * Initial position of the body.
   */

  /**
   * World space velocity of the body.
   */

  /**
   * Initial velocity of the body.
   */

  /**
   * Linear force on the body in world space.
   */

  /**
   * The mass of the body.
   * @default 0
   */

  /**
   * The physics material of the body. It defines the body interaction with other bodies.
   */

  /**
   * How much to damp the body velocity each step. It can go from 0 to 1.
   * @default 0.01
   */

  /**
   * One of: `Body.DYNAMIC`, `Body.STATIC` and `Body.KINEMATIC`.
   */

  /**
   * If true, the body will automatically fall to sleep.
   * @default true
   */

  /**
   * Current sleep state.
   */

  /**
   * If the speed (the norm of the velocity) is smaller than this value, the body is considered sleepy.
   * @default 0.1
   */

  /**
   * If the body has been sleepy for this sleepTimeLimit seconds, it is considered sleeping.
   * @default 1
   */

  /**
   * World space rotational force on the body, around center of mass.
   */

  /**
   * World space orientation of the body.
   */

  /**
   * Initial quaternion of the body.
   */

  /**
   * Interpolated orientation of the body.
   */

  /**
   * Angular velocity of the body, in world space. Think of the angular velocity as a vector, which the body rotates around. The length of this vector determines how fast (in radians per second) the body rotates.
   */

  /**
   * Initial angular velocity of the body.
   */

  /**
   * List of Shapes that have been added to the body.
   */

  /**
   * Position of each Shape in the body, given in local Body space.
   */

  /**
   * Orientation of each Shape, given in local Body space.
   */

  /**
   * The inertia of the body.
   */

  /**
   * Set to true if you don't want the body to rotate. Make sure to run .updateMassProperties() if you change this after the body creation.
   * @default false
   */

  /**
   * How much to damp the body angular velocity each step. It can go from 0 to 1.
   * @default 0.01
   */

  /**
   * Use this property to limit the motion along any world axis. (1,1,1) will allow motion along all axes while (0,0,0) allows none.
   */

  /**
   * Use this property to limit the rotational motion along any world axis. (1,1,1) will allow rotation along all axes while (0,0,0) allows none.
   */

  /**
   * World space bounding box of the body and its shapes.
   */

  /**
   * Indicates if the AABB needs to be updated before use.
   */

  /**
   * Total bounding radius of the Body including its shapes, relative to body.position.
   */

  /**
   * When true the body behaves like a trigger. It does not collide
   * with other bodies but collision events are still triggered.
   * @default false
   */
  constructor(options = {}) {
    super();
    this.id = void 0;
    this.index = void 0;
    this.world = void 0;
    this.preStep = void 0;
    this.postStep = void 0;
    this.vlambda = void 0;
    this.collisionFilterGroup = void 0;
    this.collisionFilterMask = void 0;
    this.collisionResponse = void 0;
    this.position = void 0;
    this.previousPosition = void 0;
    this.interpolatedPosition = void 0;
    this.initPosition = void 0;
    this.velocity = void 0;
    this.initVelocity = void 0;
    this.force = void 0;
    this.mass = void 0;
    this.invMass = void 0;
    this.material = void 0;
    this.linearDamping = void 0;
    this.type = void 0;
    this.allowSleep = void 0;
    this.sleepState = void 0;
    this.sleepSpeedLimit = void 0;
    this.sleepTimeLimit = void 0;
    this.timeLastSleepy = void 0;
    this.wakeUpAfterNarrowphase = void 0;
    this.torque = void 0;
    this.quaternion = void 0;
    this.initQuaternion = void 0;
    this.previousQuaternion = void 0;
    this.interpolatedQuaternion = void 0;
    this.angularVelocity = void 0;
    this.initAngularVelocity = void 0;
    this.shapes = void 0;
    this.shapeOffsets = void 0;
    this.shapeOrientations = void 0;
    this.inertia = void 0;
    this.invInertia = void 0;
    this.invInertiaWorld = void 0;
    this.invMassSolve = void 0;
    this.invInertiaSolve = void 0;
    this.invInertiaWorldSolve = void 0;
    this.fixedRotation = void 0;
    this.angularDamping = void 0;
    this.linearFactor = void 0;
    this.angularFactor = void 0;
    this.aabb = void 0;
    this.aabbNeedsUpdate = void 0;
    this.boundingRadius = void 0;
    this.wlambda = void 0;
    this.isTrigger = void 0;
    this.id = Body.idCounter++;
    this.index = -1;
    this.world = null;
    this.preStep = null;
    this.postStep = null;
    this.vlambda = new Vec3();
    this.collisionFilterGroup = typeof options.collisionFilterGroup === 'number' ? options.collisionFilterGroup : 1;
    this.collisionFilterMask = typeof options.collisionFilterMask === 'number' ? options.collisionFilterMask : -1;
    this.collisionResponse = typeof options.collisionResponse === 'boolean' ? options.collisionResponse : true;
    this.position = new Vec3();
    this.previousPosition = new Vec3();
    this.interpolatedPosition = new Vec3();
    this.initPosition = new Vec3();

    if (options.position) {
      this.position.copy(options.position);
      this.previousPosition.copy(options.position);
      this.interpolatedPosition.copy(options.position);
      this.initPosition.copy(options.position);
    }

    this.velocity = new Vec3();

    if (options.velocity) {
      this.velocity.copy(options.velocity);
    }

    this.initVelocity = new Vec3();
    this.force = new Vec3();
    const mass = typeof options.mass === 'number' ? options.mass : 0;
    this.mass = mass;
    this.invMass = mass > 0 ? 1.0 / mass : 0;
    this.material = options.material || null;
    this.linearDamping = typeof options.linearDamping === 'number' ? options.linearDamping : 0.01;
    this.type = mass <= 0.0 ? Body.STATIC : Body.DYNAMIC;

    if (typeof options.type === typeof Body.STATIC) {
      this.type = options.type;
    }

    this.allowSleep = typeof options.allowSleep !== 'undefined' ? options.allowSleep : true;
    this.sleepState = Body.AWAKE;
    this.sleepSpeedLimit = typeof options.sleepSpeedLimit !== 'undefined' ? options.sleepSpeedLimit : 0.1;
    this.sleepTimeLimit = typeof options.sleepTimeLimit !== 'undefined' ? options.sleepTimeLimit : 1;
    this.timeLastSleepy = 0;
    this.wakeUpAfterNarrowphase = false;
    this.torque = new Vec3();
    this.quaternion = new Quaternion();
    this.initQuaternion = new Quaternion();
    this.previousQuaternion = new Quaternion();
    this.interpolatedQuaternion = new Quaternion();

    if (options.quaternion) {
      this.quaternion.copy(options.quaternion);
      this.initQuaternion.copy(options.quaternion);
      this.previousQuaternion.copy(options.quaternion);
      this.interpolatedQuaternion.copy(options.quaternion);
    }

    this.angularVelocity = new Vec3();

    if (options.angularVelocity) {
      this.angularVelocity.copy(options.angularVelocity);
    }

    this.initAngularVelocity = new Vec3();
    this.shapes = [];
    this.shapeOffsets = [];
    this.shapeOrientations = [];
    this.inertia = new Vec3();
    this.invInertia = new Vec3();
    this.invInertiaWorld = new Mat3();
    this.invMassSolve = 0;
    this.invInertiaSolve = new Vec3();
    this.invInertiaWorldSolve = new Mat3();
    this.fixedRotation = typeof options.fixedRotation !== 'undefined' ? options.fixedRotation : false;
    this.angularDamping = typeof options.angularDamping !== 'undefined' ? options.angularDamping : 0.01;
    this.linearFactor = new Vec3(1, 1, 1);

    if (options.linearFactor) {
      this.linearFactor.copy(options.linearFactor);
    }

    this.angularFactor = new Vec3(1, 1, 1);

    if (options.angularFactor) {
      this.angularFactor.copy(options.angularFactor);
    }

    this.aabb = new AABB();
    this.aabbNeedsUpdate = true;
    this.boundingRadius = 0;
    this.wlambda = new Vec3();
    this.isTrigger = Boolean(options.isTrigger);

    if (options.shape) {
      this.addShape(options.shape);
    }

    this.updateMassProperties();
  }
  /**
   * Wake the body up.
   */


  wakeUp() {
    const prevState = this.sleepState;
    this.sleepState = Body.AWAKE;
    this.wakeUpAfterNarrowphase = false;

    if (prevState === Body.SLEEPING) {
      this.dispatchEvent(Body.wakeupEvent);
    }
  }
  /**
   * Force body sleep
   */


  sleep() {
    this.sleepState = Body.SLEEPING;
    this.velocity.set(0, 0, 0);
    this.angularVelocity.set(0, 0, 0);
    this.wakeUpAfterNarrowphase = false;
  }
  /**
   * Called every timestep to update internal sleep timer and change sleep state if needed.
   * @param time The world time in seconds
   */


  sleepTick(time) {
    if (this.allowSleep) {
      const sleepState = this.sleepState;
      const speedSquared = this.velocity.lengthSquared() + this.angularVelocity.lengthSquared();
      const speedLimitSquared = this.sleepSpeedLimit ** 2;

      if (sleepState === Body.AWAKE && speedSquared < speedLimitSquared) {
        this.sleepState = Body.SLEEPY; // Sleepy

        this.timeLastSleepy = time;
        this.dispatchEvent(Body.sleepyEvent);
      } else if (sleepState === Body.SLEEPY && speedSquared > speedLimitSquared) {
        this.wakeUp(); // Wake up
      } else if (sleepState === Body.SLEEPY && time - this.timeLastSleepy > this.sleepTimeLimit) {
        this.sleep(); // Sleeping

        this.dispatchEvent(Body.sleepEvent);
      }
    }
  }
  /**
   * If the body is sleeping, it should be immovable / have infinite mass during solve. We solve it by having a separate "solve mass".
   */


  updateSolveMassProperties() {
    if (this.sleepState === Body.SLEEPING || this.type === Body.KINEMATIC) {
      this.invMassSolve = 0;
      this.invInertiaSolve.setZero();
      this.invInertiaWorldSolve.setZero();
    } else {
      this.invMassSolve = this.invMass;
      this.invInertiaSolve.copy(this.invInertia);
      this.invInertiaWorldSolve.copy(this.invInertiaWorld);
    }
  }
  /**
   * Convert a world point to local body frame.
   */


  pointToLocalFrame(worldPoint, result = new Vec3()) {
    worldPoint.vsub(this.position, result);
    this.quaternion.conjugate().vmult(result, result);
    return result;
  }
  /**
   * Convert a world vector to local body frame.
   */


  vectorToLocalFrame(worldVector, result = new Vec3()) {
    this.quaternion.conjugate().vmult(worldVector, result);
    return result;
  }
  /**
   * Convert a local body point to world frame.
   */


  pointToWorldFrame(localPoint, result = new Vec3()) {
    this.quaternion.vmult(localPoint, result);
    result.vadd(this.position, result);
    return result;
  }
  /**
   * Convert a local body point to world frame.
   */


  vectorToWorldFrame(localVector, result = new Vec3()) {
    this.quaternion.vmult(localVector, result);
    return result;
  }
  /**
   * Add a shape to the body with a local offset and orientation.
   * @return The body object, for chainability.
   */


  addShape(shape, _offset, _orientation) {
    const offset = new Vec3();
    const orientation = new Quaternion();

    if (_offset) {
      offset.copy(_offset);
    }

    if (_orientation) {
      orientation.copy(_orientation);
    }

    this.shapes.push(shape);
    this.shapeOffsets.push(offset);
    this.shapeOrientations.push(orientation);
    this.updateMassProperties();
    this.updateBoundingRadius();
    this.aabbNeedsUpdate = true;
    shape.body = this;
    return this;
  }
  /**
   * Remove a shape from the body.
   * @return The body object, for chainability.
   */


  removeShape(shape) {
    const index = this.shapes.indexOf(shape);

    if (index === -1) {
      console.warn('Shape does not belong to the body');
      return this;
    }

    this.shapes.splice(index, 1);
    this.shapeOffsets.splice(index, 1);
    this.shapeOrientations.splice(index, 1);
    this.updateMassProperties();
    this.updateBoundingRadius();
    this.aabbNeedsUpdate = true;
    shape.body = null;
    return this;
  }
  /**
   * Update the bounding radius of the body. Should be done if any of the shapes are changed.
   */


  updateBoundingRadius() {
    const shapes = this.shapes;
    const shapeOffsets = this.shapeOffsets;
    const N = shapes.length;
    let radius = 0;

    for (let i = 0; i !== N; i++) {
      const shape = shapes[i];
      shape.updateBoundingSphereRadius();
      const offset = shapeOffsets[i].length();
      const r = shape.boundingSphereRadius;

      if (offset + r > radius) {
        radius = offset + r;
      }
    }

    this.boundingRadius = radius;
  }
  /**
   * Updates the .aabb
   */


  updateAABB() {
    const shapes = this.shapes;
    const shapeOffsets = this.shapeOffsets;
    const shapeOrientations = this.shapeOrientations;
    const N = shapes.length;
    const offset = tmpVec;
    const orientation = tmpQuat;
    const bodyQuat = this.quaternion;
    const aabb = this.aabb;
    const shapeAABB = updateAABB_shapeAABB;

    for (let i = 0; i !== N; i++) {
      const shape = shapes[i]; // Get shape world position

      bodyQuat.vmult(shapeOffsets[i], offset);
      offset.vadd(this.position, offset); // Get shape world quaternion

      bodyQuat.mult(shapeOrientations[i], orientation); // Get shape AABB

      shape.calculateWorldAABB(offset, orientation, shapeAABB.lowerBound, shapeAABB.upperBound);

      if (i === 0) {
        aabb.copy(shapeAABB);
      } else {
        aabb.extend(shapeAABB);
      }
    }

    this.aabbNeedsUpdate = false;
  }
  /**
   * Update `.inertiaWorld` and `.invInertiaWorld`
   */


  updateInertiaWorld(force) {
    const I = this.invInertia;
    if (I.x === I.y && I.y === I.z && !force) ;else {
      const m1 = uiw_m1;
      const m2 = uiw_m2;
      m1.setRotationFromQuaternion(this.quaternion);
      m1.transpose(m2);
      m1.scale(I, m1);
      m1.mmult(m2, this.invInertiaWorld);
    }
  }
  /**
   * Apply force to a point of the body. This could for example be a point on the Body surface.
   * Applying force this way will add to Body.force and Body.torque.
   * @param force The amount of force to add.
   * @param relativePoint A point relative to the center of mass to apply the force on.
   */


  applyForce(force, relativePoint = new Vec3()) {
    // Needed?
    if (this.type !== Body.DYNAMIC) {
      return;
    }

    if (this.sleepState === Body.SLEEPING) {
      this.wakeUp();
    } // Compute produced rotational force


    const rotForce = Body_applyForce_rotForce;
    relativePoint.cross(force, rotForce); // Add linear force

    this.force.vadd(force, this.force); // Add rotational force

    this.torque.vadd(rotForce, this.torque);
  }
  /**
   * Apply force to a local point in the body.
   * @param force The force vector to apply, defined locally in the body frame.
   * @param localPoint A local point in the body to apply the force on.
   */


  applyLocalForce(localForce, localPoint = new Vec3()) {
    if (this.type !== Body.DYNAMIC) {
      return;
    }

    const worldForce = Body_applyLocalForce_worldForce;
    const relativePointWorld = Body_applyLocalForce_relativePointWorld; // Transform the force vector to world space

    this.vectorToWorldFrame(localForce, worldForce);
    this.vectorToWorldFrame(localPoint, relativePointWorld);
    this.applyForce(worldForce, relativePointWorld);
  }
  /**
   * Apply torque to the body.
   * @param torque The amount of torque to add.
   */


  applyTorque(torque) {
    if (this.type !== Body.DYNAMIC) {
      return;
    }

    if (this.sleepState === Body.SLEEPING) {
      this.wakeUp();
    } // Add rotational force


    this.torque.vadd(torque, this.torque);
  }
  /**
   * Apply impulse to a point of the body. This could for example be a point on the Body surface.
   * An impulse is a force added to a body during a short period of time (impulse = force * time).
   * Impulses will be added to Body.velocity and Body.angularVelocity.
   * @param impulse The amount of impulse to add.
   * @param relativePoint A point relative to the center of mass to apply the force on.
   */


  applyImpulse(impulse, relativePoint = new Vec3()) {
    if (this.type !== Body.DYNAMIC) {
      return;
    }

    if (this.sleepState === Body.SLEEPING) {
      this.wakeUp();
    } // Compute point position relative to the body center


    const r = relativePoint; // Compute produced central impulse velocity

    const velo = Body_applyImpulse_velo;
    velo.copy(impulse);
    velo.scale(this.invMass, velo); // Add linear impulse

    this.velocity.vadd(velo, this.velocity); // Compute produced rotational impulse velocity

    const rotVelo = Body_applyImpulse_rotVelo;
    r.cross(impulse, rotVelo);
    /*
     rotVelo.x *= this.invInertia.x;
     rotVelo.y *= this.invInertia.y;
     rotVelo.z *= this.invInertia.z;
     */

    this.invInertiaWorld.vmult(rotVelo, rotVelo); // Add rotational Impulse

    this.angularVelocity.vadd(rotVelo, this.angularVelocity);
  }
  /**
   * Apply locally-defined impulse to a local point in the body.
   * @param force The force vector to apply, defined locally in the body frame.
   * @param localPoint A local point in the body to apply the force on.
   */


  applyLocalImpulse(localImpulse, localPoint = new Vec3()) {
    if (this.type !== Body.DYNAMIC) {
      return;
    }

    const worldImpulse = Body_applyLocalImpulse_worldImpulse;
    const relativePointWorld = Body_applyLocalImpulse_relativePoint; // Transform the force vector to world space

    this.vectorToWorldFrame(localImpulse, worldImpulse);
    this.vectorToWorldFrame(localPoint, relativePointWorld);
    this.applyImpulse(worldImpulse, relativePointWorld);
  }
  /**
   * Should be called whenever you change the body shape or mass.
   */


  updateMassProperties() {
    const halfExtents = Body_updateMassProperties_halfExtents;
    this.invMass = this.mass > 0 ? 1.0 / this.mass : 0;
    const I = this.inertia;
    const fixed = this.fixedRotation; // Approximate with AABB box

    this.updateAABB();
    halfExtents.set((this.aabb.upperBound.x - this.aabb.lowerBound.x) / 2, (this.aabb.upperBound.y - this.aabb.lowerBound.y) / 2, (this.aabb.upperBound.z - this.aabb.lowerBound.z) / 2);
    Box.calculateInertia(halfExtents, this.mass, I);
    this.invInertia.set(I.x > 0 && !fixed ? 1.0 / I.x : 0, I.y > 0 && !fixed ? 1.0 / I.y : 0, I.z > 0 && !fixed ? 1.0 / I.z : 0);
    this.updateInertiaWorld(true);
  }
  /**
   * Get world velocity of a point in the body.
   * @param worldPoint
   * @param result
   * @return The result vector.
   */


  getVelocityAtWorldPoint(worldPoint, result) {
    const r = new Vec3();
    worldPoint.vsub(this.position, r);
    this.angularVelocity.cross(r, result);
    this.velocity.vadd(result, result);
    return result;
  }
  /**
   * Move the body forward in time.
   * @param dt Time step
   * @param quatNormalize Set to true to normalize the body quaternion
   * @param quatNormalizeFast If the quaternion should be normalized using "fast" quaternion normalization
   */


  integrate(dt, quatNormalize, quatNormalizeFast) {
    // Save previous position
    this.previousPosition.copy(this.position);
    this.previousQuaternion.copy(this.quaternion);

    if (!(this.type === Body.DYNAMIC || this.type === Body.KINEMATIC) || this.sleepState === Body.SLEEPING) {
      // Only for dynamic
      return;
    }

    const velo = this.velocity;
    const angularVelo = this.angularVelocity;
    const pos = this.position;
    const force = this.force;
    const torque = this.torque;
    const quat = this.quaternion;
    const invMass = this.invMass;
    const invInertia = this.invInertiaWorld;
    const linearFactor = this.linearFactor;
    const iMdt = invMass * dt;
    velo.x += force.x * iMdt * linearFactor.x;
    velo.y += force.y * iMdt * linearFactor.y;
    velo.z += force.z * iMdt * linearFactor.z;
    const e = invInertia.elements;
    const angularFactor = this.angularFactor;
    const tx = torque.x * angularFactor.x;
    const ty = torque.y * angularFactor.y;
    const tz = torque.z * angularFactor.z;
    angularVelo.x += dt * (e[0] * tx + e[1] * ty + e[2] * tz);
    angularVelo.y += dt * (e[3] * tx + e[4] * ty + e[5] * tz);
    angularVelo.z += dt * (e[6] * tx + e[7] * ty + e[8] * tz); // Use new velocity  - leap frog

    pos.x += velo.x * dt;
    pos.y += velo.y * dt;
    pos.z += velo.z * dt;
    quat.integrate(this.angularVelocity, dt, this.angularFactor, quat);

    if (quatNormalize) {
      if (quatNormalizeFast) {
        quat.normalizeFast();
      } else {
        quat.normalize();
      }
    }

    this.aabbNeedsUpdate = true; // Update world inertia

    this.updateInertiaWorld();
  }

}

Body.idCounter = 0;
Body.COLLIDE_EVENT_NAME = 'collide';
Body.DYNAMIC = BODY_TYPES.DYNAMIC;
Body.STATIC = BODY_TYPES.STATIC;
Body.KINEMATIC = BODY_TYPES.KINEMATIC;
Body.AWAKE = BODY_SLEEP_STATES.AWAKE;
Body.SLEEPY = BODY_SLEEP_STATES.SLEEPY;
Body.SLEEPING = BODY_SLEEP_STATES.SLEEPING;
Body.wakeupEvent = {
  type: 'wakeup'
};
Body.sleepyEvent = {
  type: 'sleepy'
};
Body.sleepEvent = {
  type: 'sleep'
};
const tmpVec = new Vec3();
const tmpQuat = new Quaternion();
const updateAABB_shapeAABB = new AABB();
const uiw_m1 = new Mat3();
const uiw_m2 = new Mat3();
const Body_applyForce_rotForce = new Vec3();
const Body_applyLocalForce_worldForce = new Vec3();
const Body_applyLocalForce_relativePointWorld = new Vec3();
const Body_applyImpulse_velo = new Vec3();
const Body_applyImpulse_rotVelo = new Vec3();
const Body_applyLocalImpulse_worldImpulse = new Vec3();
const Body_applyLocalImpulse_relativePoint = new Vec3();
const Body_updateMassProperties_halfExtents = new Vec3();


new Vec3();

new Vec3();
/**
 * Storage for Ray casting data
 */


class RaycastResult {
  /**
   * rayFromWorld
   */

  /**
   * rayToWorld
   */

  /**
   * hitNormalWorld
   */

  /**
   * hitPointWorld
   */

  /**
   * hasHit
   */

  /**
   * shape
   */

  /**
   * body
   */

  /**
   * The index of the hit triangle, if the hit shape was a trimesh
   */

  /**
   * Distance to the hit. Will be set to -1 if there was no hit
   */

  /**
   * If the ray should stop traversing the bodies
   */
  constructor() {
    this.rayFromWorld = void 0;
    this.rayToWorld = void 0;
    this.hitNormalWorld = void 0;
    this.hitPointWorld = void 0;
    this.hasHit = void 0;
    this.shape = void 0;
    this.body = void 0;
    this.hitFaceIndex = void 0;
    this.distance = void 0;
    this.shouldStop = void 0;
    this.rayFromWorld = new Vec3();
    this.rayToWorld = new Vec3();
    this.hitNormalWorld = new Vec3();
    this.hitPointWorld = new Vec3();
    this.hasHit = false;
    this.shape = null;
    this.body = null;
    this.hitFaceIndex = -1;
    this.distance = -1;
    this.shouldStop = false;
  }
  /**
   * Reset all result data.
   */


  reset() {
    this.rayFromWorld.setZero();
    this.rayToWorld.setZero();
    this.hitNormalWorld.setZero();
    this.hitPointWorld.setZero();
    this.hasHit = false;
    this.shape = null;
    this.body = null;
    this.hitFaceIndex = -1;
    this.distance = -1;
    this.shouldStop = false;
  }
  /**
   * abort
   */


  abort() {
    this.shouldStop = true;
  }
  /**
   * Set result data.
   */


  set(rayFromWorld, rayToWorld, hitNormalWorld, hitPointWorld, shape, body, distance) {
    this.rayFromWorld.copy(rayFromWorld);
    this.rayToWorld.copy(rayToWorld);
    this.hitNormalWorld.copy(hitNormalWorld);
    this.hitPointWorld.copy(hitPointWorld);
    this.shape = shape;
    this.body = body;
    this.distance = distance;
  }

}

let _Shape$types$SPHERE, _Shape$types$PLANE, _Shape$types$BOX, _Shape$types$CYLINDER, _Shape$types$CONVEXPO, _Shape$types$HEIGHTFI, _Shape$types$TRIMESH;
/**
 * RAY_MODES
 */


const RAY_MODES = {
  /** CLOSEST */
  CLOSEST: 1,

  /** ANY */
  ANY: 2,

  /** ALL */
  ALL: 4
};
/**
 * RayMode
 */

_Shape$types$SPHERE = Shape.types.SPHERE;
_Shape$types$PLANE = Shape.types.PLANE;
_Shape$types$BOX = Shape.types.BOX;
_Shape$types$CYLINDER = Shape.types.CYLINDER;
_Shape$types$CONVEXPO = Shape.types.CONVEXPOLYHEDRON;
_Shape$types$HEIGHTFI = Shape.types.HEIGHTFIELD;
_Shape$types$TRIMESH = Shape.types.TRIMESH;
/**
 * A line in 3D space that intersects bodies and return points.
 */

class Ray {
  /**
   * from
   */

  /**
   * to
   */

  /**
   * direction
   */

  /**
   * The precision of the ray. Used when checking parallelity etc.
   * @default 0.0001
   */

  /**
   * Set to `false` if you don't want the Ray to take `collisionResponse` flags into account on bodies and shapes.
   * @default true
   */

  /**
   * If set to `true`, the ray skips any hits with normal.dot(rayDirection) < 0.
   * @default false
   */

  /**
   * collisionFilterMask
   * @default -1
   */

  /**
   * collisionFilterGroup
   * @default -1
   */

  /**
   * The intersection mode. Should be Ray.ANY, Ray.ALL or Ray.CLOSEST.
   * @default RAY.ANY
   */

  /**
   * Current result object.
   */

  /**
   * Will be set to `true` during intersectWorld() if the ray hit anything.
   */

  /**
   * User-provided result callback. Will be used if mode is Ray.ALL.
   */

  /**
   * CLOSEST
   */

  /**
   * ANY
   */

  /**
   * ALL
   */
  get [_Shape$types$SPHERE]() {
    return this._intersectSphere;
  }

  get [_Shape$types$PLANE]() {
    return this._intersectPlane;
  }

  get [_Shape$types$BOX]() {
    return this._intersectBox;
  }

  get [_Shape$types$CYLINDER]() {
    return this._intersectConvex;
  }

  get [_Shape$types$CONVEXPO]() {
    return this._intersectConvex;
  }

  get [_Shape$types$HEIGHTFI]() {
    return this._intersectHeightfield;
  }

  get [_Shape$types$TRIMESH]() {
    return this._intersectTrimesh;
  }

  constructor(from = new Vec3(), to = new Vec3()) {
    this.from = void 0;
    this.to = void 0;
    this.direction = void 0;
    this.precision = void 0;
    this.checkCollisionResponse = void 0;
    this.skipBackfaces = void 0;
    this.collisionFilterMask = void 0;
    this.collisionFilterGroup = void 0;
    this.mode = void 0;
    this.result = void 0;
    this.hasHit = void 0;
    this.callback = void 0;
    this.from = from.clone();
    this.to = to.clone();
    this.direction = new Vec3();
    this.precision = 0.0001;
    this.checkCollisionResponse = true;
    this.skipBackfaces = false;
    this.collisionFilterMask = -1;
    this.collisionFilterGroup = -1;
    this.mode = Ray.ANY;
    this.result = new RaycastResult();
    this.hasHit = false;

    this.callback = result => {};
  }
  /**
   * Do itersection against all bodies in the given World.
   * @return True if the ray hit anything, otherwise false.
   */


  intersectWorld(world, options) {
    this.mode = options.mode || Ray.ANY;
    this.result = options.result || new RaycastResult();
    this.skipBackfaces = !!options.skipBackfaces;
    this.collisionFilterMask = typeof options.collisionFilterMask !== 'undefined' ? options.collisionFilterMask : -1;
    this.collisionFilterGroup = typeof options.collisionFilterGroup !== 'undefined' ? options.collisionFilterGroup : -1;
    this.checkCollisionResponse = typeof options.checkCollisionResponse !== 'undefined' ? options.checkCollisionResponse : true;

    if (options.from) {
      this.from.copy(options.from);
    }

    if (options.to) {
      this.to.copy(options.to);
    }

    this.callback = options.callback || (() => {});

    this.hasHit = false;
    this.result.reset();
    this.updateDirection();
    this.getAABB(tmpAABB$1);
    tmpArray.length = 0;
    world.broadphase.aabbQuery(world, tmpAABB$1, tmpArray);
    this.intersectBodies(tmpArray);
    return this.hasHit;
  }
  /**
   * Shoot a ray at a body, get back information about the hit.
   * @deprecated @param result set the result property of the Ray instead.
   */


  intersectBody(body, result) {
    if (result) {
      this.result = result;
      this.updateDirection();
    }

    const checkCollisionResponse = this.checkCollisionResponse;

    if (checkCollisionResponse && !body.collisionResponse) {
      return;
    }

    if ((this.collisionFilterGroup & body.collisionFilterMask) === 0 || (body.collisionFilterGroup & this.collisionFilterMask) === 0) {
      return;
    }

    const xi = intersectBody_xi;
    const qi = intersectBody_qi;

    for (let i = 0, N = body.shapes.length; i < N; i++) {
      const shape = body.shapes[i];

      if (checkCollisionResponse && !shape.collisionResponse) {
        continue; // Skip
      }

      body.quaternion.mult(body.shapeOrientations[i], qi);
      body.quaternion.vmult(body.shapeOffsets[i], xi);
      xi.vadd(body.position, xi);
      this.intersectShape(shape, qi, xi, body);

      if (this.result.shouldStop) {
        break;
      }
    }
  }
  /**
   * Shoot a ray at an array bodies, get back information about the hit.
   * @param bodies An array of Body objects.
   * @deprecated @param result set the result property of the Ray instead.
   *
   */


  intersectBodies(bodies, result) {
    if (result) {
      this.result = result;
      this.updateDirection();
    }

    for (let i = 0, l = bodies.length; !this.result.shouldStop && i < l; i++) {
      this.intersectBody(bodies[i]);
    }
  }
  /**
   * Updates the direction vector.
   */


  updateDirection() {
    this.to.vsub(this.from, this.direction);
    this.direction.normalize();
  }

  intersectShape(shape, quat, position, body) {
    const from = this.from; // Checking boundingSphere

    const distance = distanceFromIntersection(from, this.direction, position);

    if (distance > shape.boundingSphereRadius) {
      return;
    }

    const intersectMethod = this[shape.type];

    if (intersectMethod) {
      intersectMethod.call(this, shape, quat, position, body, shape);
    }
  }

  _intersectBox(box, quat, position, body, reportedShape) {
    return this._intersectConvex(box.convexPolyhedronRepresentation, quat, position, body, reportedShape);
  }

  _intersectPlane(shape, quat, position, body, reportedShape) {
    const from = this.from;
    const to = this.to;
    const direction = this.direction; // Get plane normal

    const worldNormal = new Vec3(0, 0, 1);
    quat.vmult(worldNormal, worldNormal);
    const len = new Vec3();
    from.vsub(position, len);
    const planeToFrom = len.dot(worldNormal);
    to.vsub(position, len);
    const planeToTo = len.dot(worldNormal);

    if (planeToFrom * planeToTo > 0) {
      // "from" and "to" are on the same side of the plane... bail out
      return;
    }

    if (from.distanceTo(to) < planeToFrom) {
      return;
    }

    const n_dot_dir = worldNormal.dot(direction);

    if (Math.abs(n_dot_dir) < this.precision) {
      // No intersection
      return;
    }

    const planePointToFrom = new Vec3();
    const dir_scaled_with_t = new Vec3();
    const hitPointWorld = new Vec3();
    from.vsub(position, planePointToFrom);
    const t = -worldNormal.dot(planePointToFrom) / n_dot_dir;
    direction.scale(t, dir_scaled_with_t);
    from.vadd(dir_scaled_with_t, hitPointWorld);
    this.reportIntersection(worldNormal, hitPointWorld, reportedShape, body, -1);
  }
  /**
   * Get the world AABB of the ray.
   */


  getAABB(aabb) {
    const {
      lowerBound,
      upperBound
    } = aabb;
    const to = this.to;
    const from = this.from;
    lowerBound.x = Math.min(to.x, from.x);
    lowerBound.y = Math.min(to.y, from.y);
    lowerBound.z = Math.min(to.z, from.z);
    upperBound.x = Math.max(to.x, from.x);
    upperBound.y = Math.max(to.y, from.y);
    upperBound.z = Math.max(to.z, from.z);
  }

  _intersectHeightfield(shape, quat, position, body, reportedShape) {
    shape.data;
    shape.elementSize; // Convert the ray to local heightfield coordinates

    const localRay = intersectHeightfield_localRay; //new Ray(this.from, this.to);

    localRay.from.copy(this.from);
    localRay.to.copy(this.to);
    Transform.pointToLocalFrame(position, quat, localRay.from, localRay.from);
    Transform.pointToLocalFrame(position, quat, localRay.to, localRay.to);
    localRay.updateDirection(); // Get the index of the data points to test against

    const index = intersectHeightfield_index;
    let iMinX;
    let iMinY;
    let iMaxX;
    let iMaxY; // Set to max

    iMinX = iMinY = 0;
    iMaxX = iMaxY = shape.data.length - 1;
    const aabb = new AABB();
    localRay.getAABB(aabb);
    shape.getIndexOfPosition(aabb.lowerBound.x, aabb.lowerBound.y, index, true);
    iMinX = Math.max(iMinX, index[0]);
    iMinY = Math.max(iMinY, index[1]);
    shape.getIndexOfPosition(aabb.upperBound.x, aabb.upperBound.y, index, true);
    iMaxX = Math.min(iMaxX, index[0] + 1);
    iMaxY = Math.min(iMaxY, index[1] + 1);

    for (let i = iMinX; i < iMaxX; i++) {
      for (let j = iMinY; j < iMaxY; j++) {
        if (this.result.shouldStop) {
          return;
        }

        shape.getAabbAtIndex(i, j, aabb);

        if (!aabb.overlapsRay(localRay)) {
          continue;
        } // Lower triangle


        shape.getConvexTrianglePillar(i, j, false);
        Transform.pointToWorldFrame(position, quat, shape.pillarOffset, worldPillarOffset);

        this._intersectConvex(shape.pillarConvex, quat, worldPillarOffset, body, reportedShape, intersectConvexOptions);

        if (this.result.shouldStop) {
          return;
        } // Upper triangle


        shape.getConvexTrianglePillar(i, j, true);
        Transform.pointToWorldFrame(position, quat, shape.pillarOffset, worldPillarOffset);

        this._intersectConvex(shape.pillarConvex, quat, worldPillarOffset, body, reportedShape, intersectConvexOptions);
      }
    }
  }

  _intersectSphere(sphere, quat, position, body, reportedShape) {
    const from = this.from;
    const to = this.to;
    const r = sphere.radius;
    const a = (to.x - from.x) ** 2 + (to.y - from.y) ** 2 + (to.z - from.z) ** 2;
    const b = 2 * ((to.x - from.x) * (from.x - position.x) + (to.y - from.y) * (from.y - position.y) + (to.z - from.z) * (from.z - position.z));
    const c = (from.x - position.x) ** 2 + (from.y - position.y) ** 2 + (from.z - position.z) ** 2 - r ** 2;
    const delta = b ** 2 - 4 * a * c;
    const intersectionPoint = Ray_intersectSphere_intersectionPoint;
    const normal = Ray_intersectSphere_normal;

    if (delta < 0) {
      // No intersection
      return;
    } else if (delta === 0) {
      // single intersection point
      from.lerp(to, delta, intersectionPoint);
      intersectionPoint.vsub(position, normal);
      normal.normalize();
      this.reportIntersection(normal, intersectionPoint, reportedShape, body, -1);
    } else {
      const d1 = (-b - Math.sqrt(delta)) / (2 * a);
      const d2 = (-b + Math.sqrt(delta)) / (2 * a);

      if (d1 >= 0 && d1 <= 1) {
        from.lerp(to, d1, intersectionPoint);
        intersectionPoint.vsub(position, normal);
        normal.normalize();
        this.reportIntersection(normal, intersectionPoint, reportedShape, body, -1);
      }

      if (this.result.shouldStop) {
        return;
      }

      if (d2 >= 0 && d2 <= 1) {
        from.lerp(to, d2, intersectionPoint);
        intersectionPoint.vsub(position, normal);
        normal.normalize();
        this.reportIntersection(normal, intersectionPoint, reportedShape, body, -1);
      }
    }
  }

  _intersectConvex(shape, quat, position, body, reportedShape, options) {
    const normal = intersectConvex_normal;
    const vector = intersectConvex_vector;
    const faceList = options && options.faceList || null; // Checking faces

    const faces = shape.faces;
    const vertices = shape.vertices;
    const normals = shape.faceNormals;
    const direction = this.direction;
    const from = this.from;
    const to = this.to;
    const fromToDistance = from.distanceTo(to);
    const Nfaces = faceList ? faceList.length : faces.length;
    const result = this.result;

    for (let j = 0; !result.shouldStop && j < Nfaces; j++) {
      const fi = faceList ? faceList[j] : j;
      const face = faces[fi];
      const faceNormal = normals[fi];
      const q = quat;
      const x = position; // determine if ray intersects the plane of the face
      // note: this works regardless of the direction of the face normal
      // Get plane point in world coordinates...

      vector.copy(vertices[face[0]]);
      q.vmult(vector, vector);
      vector.vadd(x, vector); // ...but make it relative to the ray from. We'll fix this later.

      vector.vsub(from, vector); // Get plane normal

      q.vmult(faceNormal, normal); // If this dot product is negative, we have something interesting

      const dot = direction.dot(normal); // Bail out if ray and plane are parallel

      if (Math.abs(dot) < this.precision) {
        continue;
      } // calc distance to plane


      const scalar = normal.dot(vector) / dot; // if negative distance, then plane is behind ray

      if (scalar < 0) {
        continue;
      } // if (dot < 0) {
      // Intersection point is from + direction * scalar


      direction.scale(scalar, intersectPoint);
      intersectPoint.vadd(from, intersectPoint); // a is the point we compare points b and c with.

      a.copy(vertices[face[0]]);
      q.vmult(a, a);
      x.vadd(a, a);

      for (let i = 1; !result.shouldStop && i < face.length - 1; i++) {
        // Transform 3 vertices to world coords
        b.copy(vertices[face[i]]);
        c.copy(vertices[face[i + 1]]);
        q.vmult(b, b);
        q.vmult(c, c);
        x.vadd(b, b);
        x.vadd(c, c);
        const distance = intersectPoint.distanceTo(from);

        if (!(Ray.pointInTriangle(intersectPoint, a, b, c) || Ray.pointInTriangle(intersectPoint, b, a, c)) || distance > fromToDistance) {
          continue;
        }

        this.reportIntersection(normal, intersectPoint, reportedShape, body, fi);
      } // }

    }
  }
  /**
   * @todo Optimize by transforming the world to local space first.
   * @todo Use Octree lookup
   */


  _intersectTrimesh(mesh, quat, position, body, reportedShape, options) {
    const normal = intersectTrimesh_normal;
    const triangles = intersectTrimesh_triangles;
    const treeTransform = intersectTrimesh_treeTransform;
    const vector = intersectConvex_vector;
    const localDirection = intersectTrimesh_localDirection;
    const localFrom = intersectTrimesh_localFrom;
    const localTo = intersectTrimesh_localTo;
    const worldIntersectPoint = intersectTrimesh_worldIntersectPoint;
    const worldNormal = intersectTrimesh_worldNormal; // Checking faces

    const indices = mesh.indices;
    mesh.vertices; // const normals = mesh.faceNormals

    const from = this.from;
    const to = this.to;
    const direction = this.direction;
    treeTransform.position.copy(position);
    treeTransform.quaternion.copy(quat); // Transform ray to local space!

    Transform.vectorToLocalFrame(position, quat, direction, localDirection);
    Transform.pointToLocalFrame(position, quat, from, localFrom);
    Transform.pointToLocalFrame(position, quat, to, localTo);
    localTo.x *= mesh.scale.x;
    localTo.y *= mesh.scale.y;
    localTo.z *= mesh.scale.z;
    localFrom.x *= mesh.scale.x;
    localFrom.y *= mesh.scale.y;
    localFrom.z *= mesh.scale.z;
    localTo.vsub(localFrom, localDirection);
    localDirection.normalize();
    const fromToDistanceSquared = localFrom.distanceSquared(localTo);
    mesh.tree.rayQuery(this, treeTransform, triangles);

    for (let i = 0, N = triangles.length; !this.result.shouldStop && i !== N; i++) {
      const trianglesIndex = triangles[i];
      mesh.getNormal(trianglesIndex, normal); // determine if ray intersects the plane of the face
      // note: this works regardless of the direction of the face normal
      // Get plane point in world coordinates...

      mesh.getVertex(indices[trianglesIndex * 3], a); // ...but make it relative to the ray from. We'll fix this later.

      a.vsub(localFrom, vector); // If this dot product is negative, we have something interesting

      const dot = localDirection.dot(normal); // Bail out if ray and plane are parallel
      // if (Math.abs( dot ) < this.precision){
      //     continue;
      // }
      // calc distance to plane

      const scalar = normal.dot(vector) / dot; // if negative distance, then plane is behind ray

      if (scalar < 0) {
        continue;
      } // Intersection point is from + direction * scalar


      localDirection.scale(scalar, intersectPoint);
      intersectPoint.vadd(localFrom, intersectPoint); // Get triangle vertices

      mesh.getVertex(indices[trianglesIndex * 3 + 1], b);
      mesh.getVertex(indices[trianglesIndex * 3 + 2], c);
      const squaredDistance = intersectPoint.distanceSquared(localFrom);

      if (!(Ray.pointInTriangle(intersectPoint, b, a, c) || Ray.pointInTriangle(intersectPoint, a, b, c)) || squaredDistance > fromToDistanceSquared) {
        continue;
      } // transform intersectpoint and normal to world


      Transform.vectorToWorldFrame(quat, normal, worldNormal);
      Transform.pointToWorldFrame(position, quat, intersectPoint, worldIntersectPoint);
      this.reportIntersection(worldNormal, worldIntersectPoint, reportedShape, body, trianglesIndex);
    }

    triangles.length = 0;
  }
  /**
   * @return True if the intersections should continue
   */


  reportIntersection(normal, hitPointWorld, shape, body, hitFaceIndex) {
    const from = this.from;
    const to = this.to;
    const distance = from.distanceTo(hitPointWorld);
    const result = this.result; // Skip back faces?

    if (this.skipBackfaces && normal.dot(this.direction) > 0) {
      return;
    }

    result.hitFaceIndex = typeof hitFaceIndex !== 'undefined' ? hitFaceIndex : -1;

    switch (this.mode) {
      case Ray.ALL:
        this.hasHit = true;
        result.set(from, to, normal, hitPointWorld, shape, body, distance);
        result.hasHit = true;
        this.callback(result);
        break;

      case Ray.CLOSEST:
        // Store if closer than current closest
        if (distance < result.distance || !result.hasHit) {
          this.hasHit = true;
          result.hasHit = true;
          result.set(from, to, normal, hitPointWorld, shape, body, distance);
        }

        break;

      case Ray.ANY:
        // Report and stop.
        this.hasHit = true;
        result.hasHit = true;
        result.set(from, to, normal, hitPointWorld, shape, body, distance);
        result.shouldStop = true;
        break;
    }
  }
  /**
   * As per "Barycentric Technique" as named
   * {@link https://www.blackpawn.com/texts/pointinpoly/default.html here} but without the division
   */


  static pointInTriangle(p, a, b, c) {
    c.vsub(a, v0);
    b.vsub(a, v1);
    p.vsub(a, v2);
    const dot00 = v0.dot(v0);
    const dot01 = v0.dot(v1);
    const dot02 = v0.dot(v2);
    const dot11 = v1.dot(v1);
    const dot12 = v1.dot(v2);
    let u;
    let v;
    return (u = dot11 * dot02 - dot01 * dot12) >= 0 && (v = dot00 * dot12 - dot01 * dot02) >= 0 && u + v < dot00 * dot11 - dot01 * dot01;
  }

}

Ray.CLOSEST = RAY_MODES.CLOSEST;
Ray.ANY = RAY_MODES.ANY;
Ray.ALL = RAY_MODES.ALL;
const tmpAABB$1 = new AABB();
const tmpArray = [];
const v1 = new Vec3();
const v2 = new Vec3();
const intersectBody_xi = new Vec3();
const intersectBody_qi = new Quaternion();
const intersectPoint = new Vec3();
const a = new Vec3();
const b = new Vec3();
const c = new Vec3();
const intersectConvexOptions = {
  faceList: [0]
};
const worldPillarOffset = new Vec3();
const intersectHeightfield_localRay = new Ray();
const intersectHeightfield_index = [];
const Ray_intersectSphere_intersectionPoint = new Vec3();
const Ray_intersectSphere_normal = new Vec3();
const intersectConvex_normal = new Vec3();
const intersectConvex_vector = new Vec3();
const intersectTrimesh_normal = new Vec3();
const intersectTrimesh_localDirection = new Vec3();
const intersectTrimesh_localFrom = new Vec3();
const intersectTrimesh_localTo = new Vec3();
const intersectTrimesh_worldNormal = new Vec3();
const intersectTrimesh_worldIntersectPoint = new Vec3();
new AABB();
const intersectTrimesh_triangles = [];
const intersectTrimesh_treeTransform = new Transform();
const v0 = new Vec3();
const intersect = new Vec3();

function distanceFromIntersection(from, direction, position) {
  // v0 is vector from from to position
  position.vsub(from, v0);
  const dot = v0.dot(direction); // intersect = direction*dot + from

  direction.scale(dot, intersect);
  intersect.vadd(from, intersect);
  const distance = position.distanceTo(intersect);
  return distance;
}

class Utils {
  /**
   * Extend an options object with default values.
   * @param options The options object. May be falsy: in this case, a new object is created and returned.
   * @param defaults An object containing default values.
   * @return The modified options object.
   */
  static defaults(options = {}, defaults) {
    for (let key in defaults) {
      if (!(key in options)) {
        options[key] = defaults[key];
      }
    }

    return options;
  }

}
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();

new Vec3(); // Temp vectors

new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();

new Vec3();
new Vec3();

new Vec3();
new Vec3();

new Vec3();
new Vec3();

new Vec3();
new Vec3();
/**
 * Defines a physics material.
 */

class Material {
  /**
   * Material name.
   * If options is a string, name will be set to that string.
   * @todo Deprecate this
   */

  /** Material id. */

  /**
   * Friction for this material.
   * If non-negative, it will be used instead of the friction given by ContactMaterials. If there's no matching ContactMaterial, the value from `defaultContactMaterial` in the World will be used.
   */

  /**
   * Restitution for this material.
   * If non-negative, it will be used instead of the restitution given by ContactMaterials. If there's no matching ContactMaterial, the value from `defaultContactMaterial` in the World will be used.
   */
  constructor(options = {}) {
    this.name = void 0;
    this.id = void 0;
    this.friction = void 0;
    this.restitution = void 0;
    let name = ''; // Backwards compatibility fix

    if (typeof options === 'string') {
      //console.warn(`Passing a string to MaterialOptions is deprecated, and has no effect`)
      name = options;
      options = {};
    }

    this.name = name;
    this.id = Material.idCounter++;
    this.friction = typeof options.friction !== 'undefined' ? options.friction : -1;
    this.restitution = typeof options.restitution !== 'undefined' ? options.restitution : -1;
  }

}

Material.idCounter = 0;

new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();

new Vec3();
new Vec3();

new Vec3();
new Vec3();
new Vec3();
new Ray();
new Vec3();
new Vec3();
[new Vec3(1, 0, 0), new Vec3(0, 1, 0), new Vec3(0, 0, 1)];
new Vec3();
new Vec3();
new Vec3();
new Vec3();

new Vec3();
new Vec3();
new Vec3();
new Vec3();

new Vec3();
new Vec3();
new Vec3(); // bilateral constraint between two dynamic objects
/**
 * Spherical shape
 * @example
 *     const radius = 1
 *     const sphereShape = new CANNON.Sphere(radius)
 *     const sphereBody = new CANNON.Body({ mass: 1, shape: sphereShape })
 *     world.addBody(sphereBody)
 */


class Sphere extends Shape {
  /**
   * The radius of the sphere.
   */

  /**
   *
   * @param radius The radius of the sphere, a non-negative number.
   */
  constructor(radius) {
    super({
      type: Shape.types.SPHERE
    });
    this.radius = void 0;
    this.radius = radius !== undefined ? radius : 1.0;

    if (this.radius < 0) {
      throw new Error('The sphere radius cannot be negative.');
    }

    this.updateBoundingSphereRadius();
  }
  /** calculateLocalInertia */


  calculateLocalInertia(mass, target = new Vec3()) {
    const I = 2.0 * mass * this.radius * this.radius / 5.0;
    target.x = I;
    target.y = I;
    target.z = I;
    return target;
  }
  /** volume */


  volume() {
    return 4.0 * Math.PI * Math.pow(this.radius, 3) / 3.0;
  }

  updateBoundingSphereRadius() {
    this.boundingSphereRadius = this.radius;
  }

  calculateWorldAABB(pos, quat, min, max) {
    const r = this.radius;
    const axes = ['x', 'y', 'z'];

    for (let i = 0; i < axes.length; i++) {
      const ax = axes[i];
      min[ax] = pos[ax] - r;
      max[ax] = pos[ax] + r;
    }
  }

}

new Vec3();
new Vec3();

new Vec3(); // Temp vectors for calculation

new Vec3(); // Relative velocity

new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
/**
 * Cylinder class.
 * @example
 *     const radiusTop = 0.5
 *     const radiusBottom = 0.5
 *     const height = 2
 *     const numSegments = 12
 *     const cylinderShape = new CANNON.Cylinder(radiusTop, radiusBottom, height, numSegments)
 *     const cylinderBody = new CANNON.Body({ mass: 1, shape: cylinderShape })
 *     world.addBody(cylinderBody)
 */

class Cylinder extends ConvexPolyhedron {
  /** The radius of the top of the Cylinder. */

  /** The radius of the bottom of the Cylinder. */

  /** The height of the Cylinder. */

  /** The number of segments to build the cylinder out of. */

  /**
   * @param radiusTop The radius of the top of the Cylinder.
   * @param radiusBottom The radius of the bottom of the Cylinder.
   * @param height The height of the Cylinder.
   * @param numSegments The number of segments to build the cylinder out of.
   */
  constructor(radiusTop = 1, radiusBottom = 1, height = 1, numSegments = 8) {
    if (radiusTop < 0) {
      throw new Error('The cylinder radiusTop cannot be negative.');
    }

    if (radiusBottom < 0) {
      throw new Error('The cylinder radiusBottom cannot be negative.');
    }

    const N = numSegments;
    const vertices = [];
    const axes = [];
    const faces = [];
    const bottomface = [];
    const topface = [];
    const cos = Math.cos;
    const sin = Math.sin; // First bottom point

    vertices.push(new Vec3(-radiusBottom * sin(0), -height * 0.5, radiusBottom * cos(0)));
    bottomface.push(0); // First top point

    vertices.push(new Vec3(-radiusTop * sin(0), height * 0.5, radiusTop * cos(0)));
    topface.push(1);

    for (let i = 0; i < N; i++) {
      const theta = 2 * Math.PI / N * (i + 1);
      const thetaN = 2 * Math.PI / N * (i + 0.5);

      if (i < N - 1) {
        // Bottom
        vertices.push(new Vec3(-radiusBottom * sin(theta), -height * 0.5, radiusBottom * cos(theta)));
        bottomface.push(2 * i + 2); // Top

        vertices.push(new Vec3(-radiusTop * sin(theta), height * 0.5, radiusTop * cos(theta)));
        topface.push(2 * i + 3); // Face

        faces.push([2 * i, 2 * i + 1, 2 * i + 3, 2 * i + 2]);
      } else {
        faces.push([2 * i, 2 * i + 1, 1, 0]); // Connect
      } // Axis: we can cut off half of them if we have even number of segments


      if (N % 2 === 1 || i < N / 2) {
        axes.push(new Vec3(-sin(thetaN), 0, cos(thetaN)));
      }
    }

    faces.push(bottomface);
    axes.push(new Vec3(0, 1, 0)); // Reorder top face

    const temp = [];

    for (let i = 0; i < topface.length; i++) {
      temp.push(topface[topface.length - i - 1]);
    }

    faces.push(temp);
    super({
      vertices,
      faces,
      axes
    });
    this.radiusTop = void 0;
    this.radiusBottom = void 0;
    this.height = void 0;
    this.numSegments = void 0;
    this.type = Shape.types.CYLINDER;
    this.radiusTop = radiusTop;
    this.radiusBottom = radiusBottom;
    this.height = height;
    this.numSegments = numSegments;
  }

}
/**
 * Particle shape.
 * @example
 *     const particleShape = new CANNON.Particle()
 *     const particleBody = new CANNON.Body({ mass: 1, shape: particleShape })
 *     world.addBody(particleBody)
 */


class Particle extends Shape {
  constructor() {
    super({
      type: Shape.types.PARTICLE
    });
  }
  /**
   * calculateLocalInertia
   */


  calculateLocalInertia(mass, target = new Vec3()) {
    target.set(0, 0, 0);
    return target;
  }

  volume() {
    return 0;
  }

  updateBoundingSphereRadius() {
    this.boundingSphereRadius = 0;
  }

  calculateWorldAABB(pos, quat, min, max) {
    // Get each axis max
    min.copy(pos);
    max.copy(pos);
  }

}
/**
 * A plane, facing in the Z direction. The plane has its surface at z=0 and everything below z=0 is assumed to be solid plane. To make the plane face in some other direction than z, you must put it inside a Body and rotate that body. See the demos.
 * @example
 *     const planeShape = new CANNON.Plane()
 *     const planeBody = new CANNON.Body({ mass: 0, shape:  planeShape })
 *     planeBody.quaternion.setFromEuler(-Math.PI / 2, 0, 0) // make it face up
 *     world.addBody(planeBody)
 */


class Plane extends Shape {
  /** worldNormal */

  /** worldNormalNeedsUpdate */
  constructor() {
    super({
      type: Shape.types.PLANE
    }); // World oriented normal

    this.worldNormal = void 0;
    this.worldNormalNeedsUpdate = void 0;
    this.boundingSphereRadius = void 0;
    this.worldNormal = new Vec3();
    this.worldNormalNeedsUpdate = true;
    this.boundingSphereRadius = Number.MAX_VALUE;
  }
  /** computeWorldNormal */


  computeWorldNormal(quat) {
    const n = this.worldNormal;
    n.set(0, 0, 1);
    quat.vmult(n, n);
    this.worldNormalNeedsUpdate = false;
  }

  calculateLocalInertia(mass, target = new Vec3()) {
    return target;
  }

  volume() {
    return (// The plane is infinite...
      Number.MAX_VALUE
    );
  }

  calculateWorldAABB(pos, quat, min, max) {
    // The plane AABB is infinite, except if the normal is pointing along any axis
    tempNormal.set(0, 0, 1); // Default plane normal is z

    quat.vmult(tempNormal, tempNormal);
    const maxVal = Number.MAX_VALUE;
    min.set(-maxVal, -maxVal, -maxVal);
    max.set(maxVal, maxVal, maxVal);

    if (tempNormal.x === 1) {
      max.x = pos.x;
    } else if (tempNormal.x === -1) {
      min.x = pos.x;
    }

    if (tempNormal.y === 1) {
      max.y = pos.y;
    } else if (tempNormal.y === -1) {
      min.y = pos.y;
    }

    if (tempNormal.z === 1) {
      max.z = pos.z;
    } else if (tempNormal.z === -1) {
      min.z = pos.z;
    }
  }

  updateBoundingSphereRadius() {
    this.boundingSphereRadius = Number.MAX_VALUE;
  }

}

const tempNormal = new Vec3();
/**
 * Heightfield shape class. Height data is given as an array. These data points are spread out evenly with a given distance.
 * @todo Should be possible to use along all axes, not just y
 * @todo should be possible to scale along all axes
 * @todo Refactor elementSize to elementSizeX and elementSizeY
 *
 * @example
 *     // Generate some height data (y-values).
 *     const data = []
 *     for (let i = 0; i < 1000; i++) {
 *         const y = 0.5 * Math.cos(0.2 * i)
 *         data.push(y)
 *     }
 *
 *     // Create the heightfield shape
 *     const heightfieldShape = new CANNON.Heightfield(data, {
 *         elementSize: 1 // Distance between the data points in X and Y directions
 *     })
 *     const heightfieldBody = new CANNON.Body({ shape: heightfieldShape })
 *     world.addBody(heightfieldBody)
 */

class Heightfield extends Shape {
  /**
   * An array of numbers, or height values, that are spread out along the x axis.
   */

  /**
   * Max value of the data points in the data array.
   */

  /**
   * Minimum value of the data points in the data array.
   */

  /**
   * World spacing between the data points in X and Y direction.
   * @todo elementSizeX and Y
   * @default 1
   */

  /**
   * @default true
   */

  /**
   * @param data An array of numbers, or height values, that are spread out along the x axis.
   */
  constructor(data, options = {}) {
    options = Utils.defaults(options, {
      maxValue: null,
      minValue: null,
      elementSize: 1
    });
    super({
      type: Shape.types.HEIGHTFIELD
    });
    this.data = void 0;
    this.maxValue = void 0;
    this.minValue = void 0;
    this.elementSize = void 0;
    this.cacheEnabled = void 0;
    this.pillarConvex = void 0;
    this.pillarOffset = void 0;
    this._cachedPillars = void 0;
    this.data = data;
    this.maxValue = options.maxValue;
    this.minValue = options.minValue;
    this.elementSize = options.elementSize;

    if (options.minValue === null) {
      this.updateMinValue();
    }

    if (options.maxValue === null) {
      this.updateMaxValue();
    }

    this.cacheEnabled = true;
    this.pillarConvex = new ConvexPolyhedron();
    this.pillarOffset = new Vec3();
    this.updateBoundingSphereRadius(); // "i_j_isUpper" => { convex: ..., offset: ... }
    // for example:
    // _cachedPillars["0_2_1"]

    this._cachedPillars = {};
  }
  /**
   * Call whenever you change the data array.
   */


  update() {
    this._cachedPillars = {};
  }
  /**
   * Update the `minValue` property
   */


  updateMinValue() {
    const data = this.data;
    let minValue = data[0][0];

    for (let i = 0; i !== data.length; i++) {
      for (let j = 0; j !== data[i].length; j++) {
        const v = data[i][j];

        if (v < minValue) {
          minValue = v;
        }
      }
    }

    this.minValue = minValue;
  }
  /**
   * Update the `maxValue` property
   */


  updateMaxValue() {
    const data = this.data;
    let maxValue = data[0][0];

    for (let i = 0; i !== data.length; i++) {
      for (let j = 0; j !== data[i].length; j++) {
        const v = data[i][j];

        if (v > maxValue) {
          maxValue = v;
        }
      }
    }

    this.maxValue = maxValue;
  }
  /**
   * Set the height value at an index. Don't forget to update maxValue and minValue after you're done.
   */


  setHeightValueAtIndex(xi, yi, value) {
    const data = this.data;
    data[xi][yi] = value; // Invalidate cache

    this.clearCachedConvexTrianglePillar(xi, yi, false);

    if (xi > 0) {
      this.clearCachedConvexTrianglePillar(xi - 1, yi, true);
      this.clearCachedConvexTrianglePillar(xi - 1, yi, false);
    }

    if (yi > 0) {
      this.clearCachedConvexTrianglePillar(xi, yi - 1, true);
      this.clearCachedConvexTrianglePillar(xi, yi - 1, false);
    }

    if (yi > 0 && xi > 0) {
      this.clearCachedConvexTrianglePillar(xi - 1, yi - 1, true);
    }
  }
  /**
   * Get max/min in a rectangle in the matrix data
   * @param result An array to store the results in.
   * @return The result array, if it was passed in. Minimum will be at position 0 and max at 1.
   */


  getRectMinMax(iMinX, iMinY, iMaxX, iMaxY, result = []) {
    // Get max and min of the data
    const data = this.data; // Set first value

    let max = this.minValue;

    for (let i = iMinX; i <= iMaxX; i++) {
      for (let j = iMinY; j <= iMaxY; j++) {
        const height = data[i][j];

        if (height > max) {
          max = height;
        }
      }
    }

    result[0] = this.minValue;
    result[1] = max;
  }
  /**
   * Get the index of a local position on the heightfield. The indexes indicate the rectangles, so if your terrain is made of N x N height data points, you will have rectangle indexes ranging from 0 to N-1.
   * @param result Two-element array
   * @param clamp If the position should be clamped to the heightfield edge.
   */


  getIndexOfPosition(x, y, result, clamp) {
    // Get the index of the data points to test against
    const w = this.elementSize;
    const data = this.data;
    let xi = Math.floor(x / w);
    let yi = Math.floor(y / w);
    result[0] = xi;
    result[1] = yi;

    if (clamp) {
      // Clamp index to edges
      if (xi < 0) {
        xi = 0;
      }

      if (yi < 0) {
        yi = 0;
      }

      if (xi >= data.length - 1) {
        xi = data.length - 1;
      }

      if (yi >= data[0].length - 1) {
        yi = data[0].length - 1;
      }
    } // Bail out if we are out of the terrain


    if (xi < 0 || yi < 0 || xi >= data.length - 1 || yi >= data[0].length - 1) {
      return false;
    }

    return true;
  }

  getTriangleAt(x, y, edgeClamp, a, b, c) {
    const idx = getHeightAt_idx;
    this.getIndexOfPosition(x, y, idx, edgeClamp);
    let xi = idx[0];
    let yi = idx[1];
    const data = this.data;

    if (edgeClamp) {
      xi = Math.min(data.length - 2, Math.max(0, xi));
      yi = Math.min(data[0].length - 2, Math.max(0, yi));
    }

    const elementSize = this.elementSize;
    const lowerDist2 = (x / elementSize - xi) ** 2 + (y / elementSize - yi) ** 2;
    const upperDist2 = (x / elementSize - (xi + 1)) ** 2 + (y / elementSize - (yi + 1)) ** 2;
    const upper = lowerDist2 > upperDist2;
    this.getTriangle(xi, yi, upper, a, b, c);
    return upper;
  }

  getNormalAt(x, y, edgeClamp, result) {
    const a = getNormalAt_a;
    const b = getNormalAt_b;
    const c = getNormalAt_c;
    const e0 = getNormalAt_e0;
    const e1 = getNormalAt_e1;
    this.getTriangleAt(x, y, edgeClamp, a, b, c);
    b.vsub(a, e0);
    c.vsub(a, e1);
    e0.cross(e1, result);
    result.normalize();
  }
  /**
   * Get an AABB of a square in the heightfield
   * @param xi
   * @param yi
   * @param result
   */


  getAabbAtIndex(xi, yi, {
    lowerBound,
    upperBound
  }) {
    const data = this.data;
    const elementSize = this.elementSize;
    lowerBound.set(xi * elementSize, yi * elementSize, data[xi][yi]);
    upperBound.set((xi + 1) * elementSize, (yi + 1) * elementSize, data[xi + 1][yi + 1]);
  }
  /**
   * Get the height in the heightfield at a given position
   */


  getHeightAt(x, y, edgeClamp) {
    const data = this.data;
    const a = getHeightAt_a;
    const b = getHeightAt_b;
    const c = getHeightAt_c;
    const idx = getHeightAt_idx;
    this.getIndexOfPosition(x, y, idx, edgeClamp);
    let xi = idx[0];
    let yi = idx[1];

    if (edgeClamp) {
      xi = Math.min(data.length - 2, Math.max(0, xi));
      yi = Math.min(data[0].length - 2, Math.max(0, yi));
    }

    const upper = this.getTriangleAt(x, y, edgeClamp, a, b, c);
    barycentricWeights(x, y, a.x, a.y, b.x, b.y, c.x, c.y, getHeightAt_weights);
    const w = getHeightAt_weights;

    if (upper) {
      // Top triangle verts
      return data[xi + 1][yi + 1] * w.x + data[xi][yi + 1] * w.y + data[xi + 1][yi] * w.z;
    } else {
      // Top triangle verts
      return data[xi][yi] * w.x + data[xi + 1][yi] * w.y + data[xi][yi + 1] * w.z;
    }
  }

  getCacheConvexTrianglePillarKey(xi, yi, getUpperTriangle) {
    return xi + "_" + yi + "_" + (getUpperTriangle ? 1 : 0);
  }

  getCachedConvexTrianglePillar(xi, yi, getUpperTriangle) {
    return this._cachedPillars[this.getCacheConvexTrianglePillarKey(xi, yi, getUpperTriangle)];
  }

  setCachedConvexTrianglePillar(xi, yi, getUpperTriangle, convex, offset) {
    this._cachedPillars[this.getCacheConvexTrianglePillarKey(xi, yi, getUpperTriangle)] = {
      convex,
      offset
    };
  }

  clearCachedConvexTrianglePillar(xi, yi, getUpperTriangle) {
    delete this._cachedPillars[this.getCacheConvexTrianglePillarKey(xi, yi, getUpperTriangle)];
  }
  /**
   * Get a triangle from the heightfield
   */


  getTriangle(xi, yi, upper, a, b, c) {
    const data = this.data;
    const elementSize = this.elementSize;

    if (upper) {
      // Top triangle verts
      a.set((xi + 1) * elementSize, (yi + 1) * elementSize, data[xi + 1][yi + 1]);
      b.set(xi * elementSize, (yi + 1) * elementSize, data[xi][yi + 1]);
      c.set((xi + 1) * elementSize, yi * elementSize, data[xi + 1][yi]);
    } else {
      // Top triangle verts
      a.set(xi * elementSize, yi * elementSize, data[xi][yi]);
      b.set((xi + 1) * elementSize, yi * elementSize, data[xi + 1][yi]);
      c.set(xi * elementSize, (yi + 1) * elementSize, data[xi][yi + 1]);
    }
  }
  /**
   * Get a triangle in the terrain in the form of a triangular convex shape.
   */


  getConvexTrianglePillar(xi, yi, getUpperTriangle) {
    let result = this.pillarConvex;
    let offsetResult = this.pillarOffset;

    if (this.cacheEnabled) {
      const data = this.getCachedConvexTrianglePillar(xi, yi, getUpperTriangle);

      if (data) {
        this.pillarConvex = data.convex;
        this.pillarOffset = data.offset;
        return;
      }

      result = new ConvexPolyhedron();
      offsetResult = new Vec3();
      this.pillarConvex = result;
      this.pillarOffset = offsetResult;
    }

    const data = this.data;
    const elementSize = this.elementSize;
    const faces = result.faces; // Reuse verts if possible

    result.vertices.length = 6;

    for (let i = 0; i < 6; i++) {
      if (!result.vertices[i]) {
        result.vertices[i] = new Vec3();
      }
    } // Reuse faces if possible


    faces.length = 5;

    for (let i = 0; i < 5; i++) {
      if (!faces[i]) {
        faces[i] = [];
      }
    }

    const verts = result.vertices;
    const h = (Math.min(data[xi][yi], data[xi + 1][yi], data[xi][yi + 1], data[xi + 1][yi + 1]) - this.minValue) / 2 + this.minValue;

    if (!getUpperTriangle) {
      // Center of the triangle pillar - all polygons are given relative to this one
      offsetResult.set((xi + 0.25) * elementSize, // sort of center of a triangle
      (yi + 0.25) * elementSize, h // vertical center
      ); // Top triangle verts

      verts[0].set(-0.25 * elementSize, -0.25 * elementSize, data[xi][yi] - h);
      verts[1].set(0.75 * elementSize, -0.25 * elementSize, data[xi + 1][yi] - h);
      verts[2].set(-0.25 * elementSize, 0.75 * elementSize, data[xi][yi + 1] - h); // bottom triangle verts

      verts[3].set(-0.25 * elementSize, -0.25 * elementSize, -Math.abs(h) - 1);
      verts[4].set(0.75 * elementSize, -0.25 * elementSize, -Math.abs(h) - 1);
      verts[5].set(-0.25 * elementSize, 0.75 * elementSize, -Math.abs(h) - 1); // top triangle

      faces[0][0] = 0;
      faces[0][1] = 1;
      faces[0][2] = 2; // bottom triangle

      faces[1][0] = 5;
      faces[1][1] = 4;
      faces[1][2] = 3; // -x facing quad

      faces[2][0] = 0;
      faces[2][1] = 2;
      faces[2][2] = 5;
      faces[2][3] = 3; // -y facing quad

      faces[3][0] = 1;
      faces[3][1] = 0;
      faces[3][2] = 3;
      faces[3][3] = 4; // +xy facing quad

      faces[4][0] = 4;
      faces[4][1] = 5;
      faces[4][2] = 2;
      faces[4][3] = 1;
    } else {
      // Center of the triangle pillar - all polygons are given relative to this one
      offsetResult.set((xi + 0.75) * elementSize, // sort of center of a triangle
      (yi + 0.75) * elementSize, h // vertical center
      ); // Top triangle verts

      verts[0].set(0.25 * elementSize, 0.25 * elementSize, data[xi + 1][yi + 1] - h);
      verts[1].set(-0.75 * elementSize, 0.25 * elementSize, data[xi][yi + 1] - h);
      verts[2].set(0.25 * elementSize, -0.75 * elementSize, data[xi + 1][yi] - h); // bottom triangle verts

      verts[3].set(0.25 * elementSize, 0.25 * elementSize, -Math.abs(h) - 1);
      verts[4].set(-0.75 * elementSize, 0.25 * elementSize, -Math.abs(h) - 1);
      verts[5].set(0.25 * elementSize, -0.75 * elementSize, -Math.abs(h) - 1); // Top triangle

      faces[0][0] = 0;
      faces[0][1] = 1;
      faces[0][2] = 2; // bottom triangle

      faces[1][0] = 5;
      faces[1][1] = 4;
      faces[1][2] = 3; // +x facing quad

      faces[2][0] = 2;
      faces[2][1] = 5;
      faces[2][2] = 3;
      faces[2][3] = 0; // +y facing quad

      faces[3][0] = 3;
      faces[3][1] = 4;
      faces[3][2] = 1;
      faces[3][3] = 0; // -xy facing quad

      faces[4][0] = 1;
      faces[4][1] = 4;
      faces[4][2] = 5;
      faces[4][3] = 2;
    }

    result.computeNormals();
    result.computeEdges();
    result.updateBoundingSphereRadius();
    this.setCachedConvexTrianglePillar(xi, yi, getUpperTriangle, result, offsetResult);
  }

  calculateLocalInertia(mass, target = new Vec3()) {
    target.set(0, 0, 0);
    return target;
  }

  volume() {
    return (// The terrain is infinite
      Number.MAX_VALUE
    );
  }

  calculateWorldAABB(pos, quat, min, max) {
    /** @TODO do it properly */
    min.set(-Number.MAX_VALUE, -Number.MAX_VALUE, -Number.MAX_VALUE);
    max.set(Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE);
  }

  updateBoundingSphereRadius() {
    // Use the bounding box of the min/max values
    const data = this.data;
    const s = this.elementSize;
    this.boundingSphereRadius = new Vec3(data.length * s, data[0].length * s, Math.max(Math.abs(this.maxValue), Math.abs(this.minValue))).length();
  }
  /**
   * Sets the height values from an image. Currently only supported in browser.
   */


  setHeightsFromImage(image, scale) {
    const {
      x,
      z,
      y
    } = scale;
    const canvas = document.createElement('canvas');
    canvas.width = image.width;
    canvas.height = image.height;
    const context = canvas.getContext('2d');
    context.drawImage(image, 0, 0);
    const imageData = context.getImageData(0, 0, image.width, image.height);
    const matrix = this.data;
    matrix.length = 0;
    this.elementSize = Math.abs(x) / imageData.width;

    for (let i = 0; i < imageData.height; i++) {
      const row = [];

      for (let j = 0; j < imageData.width; j++) {
        const a = imageData.data[(i * imageData.height + j) * 4];
        const b = imageData.data[(i * imageData.height + j) * 4 + 1];
        const c = imageData.data[(i * imageData.height + j) * 4 + 2];
        const height = (a + b + c) / 4 / 255 * z;

        if (x < 0) {
          row.push(height);
        } else {
          row.unshift(height);
        }
      }

      if (y < 0) {
        matrix.unshift(row);
      } else {
        matrix.push(row);
      }
    }

    this.updateMaxValue();
    this.updateMinValue();
    this.update();
  }

}

const getHeightAt_idx = [];
const getHeightAt_weights = new Vec3();
const getHeightAt_a = new Vec3();
const getHeightAt_b = new Vec3();
const getHeightAt_c = new Vec3();
const getNormalAt_a = new Vec3();
const getNormalAt_b = new Vec3();
const getNormalAt_c = new Vec3();
const getNormalAt_e0 = new Vec3();
const getNormalAt_e1 = new Vec3(); // from https://en.wikipedia.org/wiki/Barycentric_coordinate_system

function barycentricWeights(x, y, ax, ay, bx, by, cx, cy, result) {
  result.x = ((by - cy) * (x - cx) + (cx - bx) * (y - cy)) / ((by - cy) * (ax - cx) + (cx - bx) * (ay - cy));
  result.y = ((cy - ay) * (x - cx) + (ax - cx) * (y - cy)) / ((by - cy) * (ax - cx) + (cx - bx) * (ay - cy));
  result.z = 1 - result.x - result.y;
}
/**
 * OctreeNode
 */


class OctreeNode {
  /** The root node */

  /** Boundary of this node */

  /** Contained data at the current node level */

  /** Children to this node */
  constructor(options = {}) {
    this.root = void 0;
    this.aabb = void 0;
    this.data = void 0;
    this.children = void 0;
    this.root = options.root || null;
    this.aabb = options.aabb ? options.aabb.clone() : new AABB();
    this.data = [];
    this.children = [];
  }
  /**
   * reset
   */


  reset() {
    this.children.length = this.data.length = 0;
  }
  /**
   * Insert data into this node
   * @return True if successful, otherwise false
   */


  insert(aabb, elementData, level = 0) {
    const nodeData = this.data; // Ignore objects that do not belong in this node

    if (!this.aabb.contains(aabb)) {
      return false; // object cannot be added
    }

    const children = this.children;
    const maxDepth = this.maxDepth || this.root.maxDepth;

    if (level < maxDepth) {
      // Subdivide if there are no children yet
      let subdivided = false;

      if (!children.length) {
        this.subdivide();
        subdivided = true;
      } // add to whichever node will accept it


      for (let i = 0; i !== 8; i++) {
        if (children[i].insert(aabb, elementData, level + 1)) {
          return true;
        }
      }

      if (subdivided) {
        // No children accepted! Might as well just remove em since they contain none
        children.length = 0;
      }
    } // Too deep, or children didnt want it. add it in current node


    nodeData.push(elementData);
    return true;
  }
  /**
   * Create 8 equally sized children nodes and put them in the `children` array.
   */


  subdivide() {
    const aabb = this.aabb;
    const l = aabb.lowerBound;
    const u = aabb.upperBound;
    const children = this.children;
    children.push(new OctreeNode({
      aabb: new AABB({
        lowerBound: new Vec3(0, 0, 0)
      })
    }), new OctreeNode({
      aabb: new AABB({
        lowerBound: new Vec3(1, 0, 0)
      })
    }), new OctreeNode({
      aabb: new AABB({
        lowerBound: new Vec3(1, 1, 0)
      })
    }), new OctreeNode({
      aabb: new AABB({
        lowerBound: new Vec3(1, 1, 1)
      })
    }), new OctreeNode({
      aabb: new AABB({
        lowerBound: new Vec3(0, 1, 1)
      })
    }), new OctreeNode({
      aabb: new AABB({
        lowerBound: new Vec3(0, 0, 1)
      })
    }), new OctreeNode({
      aabb: new AABB({
        lowerBound: new Vec3(1, 0, 1)
      })
    }), new OctreeNode({
      aabb: new AABB({
        lowerBound: new Vec3(0, 1, 0)
      })
    }));
    u.vsub(l, halfDiagonal);
    halfDiagonal.scale(0.5, halfDiagonal);
    const root = this.root || this;

    for (let i = 0; i !== 8; i++) {
      const child = children[i]; // Set current node as root

      child.root = root; // Compute bounds

      const lowerBound = child.aabb.lowerBound;
      lowerBound.x *= halfDiagonal.x;
      lowerBound.y *= halfDiagonal.y;
      lowerBound.z *= halfDiagonal.z;
      lowerBound.vadd(l, lowerBound); // Upper bound is always lower bound + halfDiagonal

      lowerBound.vadd(halfDiagonal, child.aabb.upperBound);
    }
  }
  /**
   * Get all data, potentially within an AABB
   * @return The "result" object
   */


  aabbQuery(aabb, result) {
    this.data; // abort if the range does not intersect this node
    // if (!this.aabb.overlaps(aabb)){
    //     return result;
    // }
    // Add objects at this level
    // Array.prototype.push.apply(result, nodeData);
    // Add child data
    // @todo unwrap recursion into a queue / loop, that's faster in JS

    this.children; // for (let i = 0, N = this.children.length; i !== N; i++) {
    //     children[i].aabbQuery(aabb, result);
    // }

    const queue = [this];

    while (queue.length) {
      const node = queue.pop();

      if (node.aabb.overlaps(aabb)) {
        Array.prototype.push.apply(result, node.data);
      }

      Array.prototype.push.apply(queue, node.children);
    }

    return result;
  }
  /**
   * Get all data, potentially intersected by a ray.
   * @return The "result" object
   */


  rayQuery(ray, treeTransform, result) {
    // Use aabb query for now.

    /** @todo implement real ray query which needs less lookups */
    ray.getAABB(tmpAABB);
    tmpAABB.toLocalFrame(treeTransform, tmpAABB);
    this.aabbQuery(tmpAABB, result);
    return result;
  }
  /**
   * removeEmptyNodes
   */


  removeEmptyNodes() {
    for (let i = this.children.length - 1; i >= 0; i--) {
      this.children[i].removeEmptyNodes();

      if (!this.children[i].children.length && !this.children[i].data.length) {
        this.children.splice(i, 1);
      }
    }
  }

}
/**
 * Octree
 */


class Octree extends OctreeNode {
  /**
   * Maximum subdivision depth
   * @default 8
   */

  /**
   * @param aabb The total AABB of the tree
   */
  constructor(aabb, options = {}) {
    super({
      root: null,
      aabb
    });
    this.maxDepth = void 0;
    this.maxDepth = typeof options.maxDepth !== 'undefined' ? options.maxDepth : 8;
  }

}

const halfDiagonal = new Vec3();
const tmpAABB = new AABB();
/**
 * Trimesh.
 * @example
 *     // How to make a mesh with a single triangle
 *     const vertices = [
 *         0, 0, 0, // vertex 0
 *         1, 0, 0, // vertex 1
 *         0, 1, 0  // vertex 2
 *     ]
 *     const indices = [
 *         0, 1, 2  // triangle 0
 *     ]
 *     const trimeshShape = new CANNON.Trimesh(vertices, indices)
 */

class Trimesh extends Shape {
  /**
   * vertices
   */

  /**
   * Array of integers, indicating which vertices each triangle consists of. The length of this array is thus 3 times the number of triangles.
   */

  /**
   * The normals data.
   */

  /**
   * The local AABB of the mesh.
   */

  /**
   * References to vertex pairs, making up all unique edges in the trimesh.
   */

  /**
   * Local scaling of the mesh. Use .setScale() to set it.
   */

  /**
   * The indexed triangles. Use .updateTree() to update it.
   */
  constructor(vertices, indices) {
    super({
      type: Shape.types.TRIMESH
    });
    this.vertices = void 0;
    this.indices = void 0;
    this.normals = void 0;
    this.aabb = void 0;
    this.edges = void 0;
    this.scale = void 0;
    this.tree = void 0;
    this.vertices = new Float32Array(vertices);
    this.indices = new Int16Array(indices);
    this.normals = new Float32Array(indices.length);
    this.aabb = new AABB();
    this.edges = null;
    this.scale = new Vec3(1, 1, 1);
    this.tree = new Octree();
    this.updateEdges();
    this.updateNormals();
    this.updateAABB();
    this.updateBoundingSphereRadius();
    this.updateTree();
  }
  /**
   * updateTree
   */


  updateTree() {
    const tree = this.tree;
    tree.reset();
    tree.aabb.copy(this.aabb);
    const scale = this.scale; // The local mesh AABB is scaled, but the octree AABB should be unscaled

    tree.aabb.lowerBound.x *= 1 / scale.x;
    tree.aabb.lowerBound.y *= 1 / scale.y;
    tree.aabb.lowerBound.z *= 1 / scale.z;
    tree.aabb.upperBound.x *= 1 / scale.x;
    tree.aabb.upperBound.y *= 1 / scale.y;
    tree.aabb.upperBound.z *= 1 / scale.z; // Insert all triangles

    const triangleAABB = new AABB();
    const a = new Vec3();
    const b = new Vec3();
    const c = new Vec3();
    const points = [a, b, c];

    for (let i = 0; i < this.indices.length / 3; i++) {
      //this.getTriangleVertices(i, a, b, c);
      // Get unscaled triangle verts
      const i3 = i * 3;

      this._getUnscaledVertex(this.indices[i3], a);

      this._getUnscaledVertex(this.indices[i3 + 1], b);

      this._getUnscaledVertex(this.indices[i3 + 2], c);

      triangleAABB.setFromPoints(points);
      tree.insert(triangleAABB, i);
    }

    tree.removeEmptyNodes();
  }
  /**
   * Get triangles in a local AABB from the trimesh.
   * @param result An array of integers, referencing the queried triangles.
   */


  getTrianglesInAABB(aabb, result) {
    unscaledAABB.copy(aabb); // Scale it to local

    const scale = this.scale;
    const isx = scale.x;
    const isy = scale.y;
    const isz = scale.z;
    const l = unscaledAABB.lowerBound;
    const u = unscaledAABB.upperBound;
    l.x /= isx;
    l.y /= isy;
    l.z /= isz;
    u.x /= isx;
    u.y /= isy;
    u.z /= isz;
    return this.tree.aabbQuery(unscaledAABB, result);
  }
  /**
   * setScale
   */


  setScale(scale) {
    const wasUniform = this.scale.x === this.scale.y && this.scale.y === this.scale.z;
    const isUniform = scale.x === scale.y && scale.y === scale.z;

    if (!(wasUniform && isUniform)) {
      // Non-uniform scaling. Need to update normals.
      this.updateNormals();
    }

    this.scale.copy(scale);
    this.updateAABB();
    this.updateBoundingSphereRadius();
  }
  /**
   * Compute the normals of the faces. Will save in the `.normals` array.
   */


  updateNormals() {
    const n = computeNormals_n; // Generate normals

    const normals = this.normals;

    for (let i = 0; i < this.indices.length / 3; i++) {
      const i3 = i * 3;
      const a = this.indices[i3];
      const b = this.indices[i3 + 1];
      const c = this.indices[i3 + 2];
      this.getVertex(a, va);
      this.getVertex(b, vb);
      this.getVertex(c, vc);
      Trimesh.computeNormal(vb, va, vc, n);
      normals[i3] = n.x;
      normals[i3 + 1] = n.y;
      normals[i3 + 2] = n.z;
    }
  }
  /**
   * Update the `.edges` property
   */


  updateEdges() {
    const edges = {};

    const add = (a, b) => {
      const key = a < b ? a + "_" + b : b + "_" + a;
      edges[key] = true;
    };

    for (let i = 0; i < this.indices.length / 3; i++) {
      const i3 = i * 3;
      const a = this.indices[i3];
      const b = this.indices[i3 + 1];
      const c = this.indices[i3 + 2];
      add(a, b);
      add(b, c);
      add(c, a);
    }

    const keys = Object.keys(edges);
    this.edges = new Int16Array(keys.length * 2);

    for (let i = 0; i < keys.length; i++) {
      const indices = keys[i].split('_');
      this.edges[2 * i] = parseInt(indices[0], 10);
      this.edges[2 * i + 1] = parseInt(indices[1], 10);
    }
  }
  /**
   * Get an edge vertex
   * @param firstOrSecond 0 or 1, depending on which one of the vertices you need.
   * @param vertexStore Where to store the result
   */


  getEdgeVertex(edgeIndex, firstOrSecond, vertexStore) {
    const vertexIndex = this.edges[edgeIndex * 2 + (firstOrSecond ? 1 : 0)];
    this.getVertex(vertexIndex, vertexStore);
  }
  /**
   * Get a vector along an edge.
   */


  getEdgeVector(edgeIndex, vectorStore) {
    const va = getEdgeVector_va;
    const vb = getEdgeVector_vb;
    this.getEdgeVertex(edgeIndex, 0, va);
    this.getEdgeVertex(edgeIndex, 1, vb);
    vb.vsub(va, vectorStore);
  }
  /**
   * Get face normal given 3 vertices
   */


  static computeNormal(va, vb, vc, target) {
    vb.vsub(va, ab);
    vc.vsub(vb, cb);
    cb.cross(ab, target);

    if (!target.isZero()) {
      target.normalize();
    }
  }
  /**
   * Get vertex i.
   * @return The "out" vector object
   */


  getVertex(i, out) {
    const scale = this.scale;

    this._getUnscaledVertex(i, out);

    out.x *= scale.x;
    out.y *= scale.y;
    out.z *= scale.z;
    return out;
  }
  /**
   * Get raw vertex i
   * @return The "out" vector object
   */


  _getUnscaledVertex(i, out) {
    const i3 = i * 3;
    const vertices = this.vertices;
    return out.set(vertices[i3], vertices[i3 + 1], vertices[i3 + 2]);
  }
  /**
   * Get a vertex from the trimesh,transformed by the given position and quaternion.
   * @return The "out" vector object
   */


  getWorldVertex(i, pos, quat, out) {
    this.getVertex(i, out);
    Transform.pointToWorldFrame(pos, quat, out, out);
    return out;
  }
  /**
   * Get the three vertices for triangle i.
   */


  getTriangleVertices(i, a, b, c) {
    const i3 = i * 3;
    this.getVertex(this.indices[i3], a);
    this.getVertex(this.indices[i3 + 1], b);
    this.getVertex(this.indices[i3 + 2], c);
  }
  /**
   * Compute the normal of triangle i.
   * @return The "target" vector object
   */


  getNormal(i, target) {
    const i3 = i * 3;
    return target.set(this.normals[i3], this.normals[i3 + 1], this.normals[i3 + 2]);
  }
  /**
   * @return The "target" vector object
   */


  calculateLocalInertia(mass, target) {
    // Approximate with box inertia
    // Exact inertia calculation is overkill, but see http://geometrictools.com/Documentation/PolyhedralMassProperties.pdf for the correct way to do it
    this.computeLocalAABB(cli_aabb);
    const x = cli_aabb.upperBound.x - cli_aabb.lowerBound.x;
    const y = cli_aabb.upperBound.y - cli_aabb.lowerBound.y;
    const z = cli_aabb.upperBound.z - cli_aabb.lowerBound.z;
    return target.set(1.0 / 12.0 * mass * (2 * y * 2 * y + 2 * z * 2 * z), 1.0 / 12.0 * mass * (2 * x * 2 * x + 2 * z * 2 * z), 1.0 / 12.0 * mass * (2 * y * 2 * y + 2 * x * 2 * x));
  }
  /**
   * Compute the local AABB for the trimesh
   */


  computeLocalAABB(aabb) {
    const l = aabb.lowerBound;
    const u = aabb.upperBound;
    const n = this.vertices.length;
    this.vertices;
    const v = computeLocalAABB_worldVert;
    this.getVertex(0, v);
    l.copy(v);
    u.copy(v);

    for (let i = 0; i !== n; i++) {
      this.getVertex(i, v);

      if (v.x < l.x) {
        l.x = v.x;
      } else if (v.x > u.x) {
        u.x = v.x;
      }

      if (v.y < l.y) {
        l.y = v.y;
      } else if (v.y > u.y) {
        u.y = v.y;
      }

      if (v.z < l.z) {
        l.z = v.z;
      } else if (v.z > u.z) {
        u.z = v.z;
      }
    }
  }
  /**
   * Update the `.aabb` property
   */


  updateAABB() {
    this.computeLocalAABB(this.aabb);
  }
  /**
   * Will update the `.boundingSphereRadius` property
   */


  updateBoundingSphereRadius() {
    // Assume points are distributed with local (0,0,0) as center
    let max2 = 0;
    const vertices = this.vertices;
    const v = new Vec3();

    for (let i = 0, N = vertices.length / 3; i !== N; i++) {
      this.getVertex(i, v);
      const norm2 = v.lengthSquared();

      if (norm2 > max2) {
        max2 = norm2;
      }
    }

    this.boundingSphereRadius = Math.sqrt(max2);
  }
  /**
   * calculateWorldAABB
   */


  calculateWorldAABB(pos, quat, min, max) {
    /*
        const n = this.vertices.length / 3,
            verts = this.vertices;
        const minx,miny,minz,maxx,maxy,maxz;
         const v = tempWorldVertex;
        for(let i=0; i<n; i++){
            this.getVertex(i, v);
            quat.vmult(v, v);
            pos.vadd(v, v);
            if (v.x < minx || minx===undefined){
                minx = v.x;
            } else if(v.x > maxx || maxx===undefined){
                maxx = v.x;
            }
             if (v.y < miny || miny===undefined){
                miny = v.y;
            } else if(v.y > maxy || maxy===undefined){
                maxy = v.y;
            }
             if (v.z < minz || minz===undefined){
                minz = v.z;
            } else if(v.z > maxz || maxz===undefined){
                maxz = v.z;
            }
        }
        min.set(minx,miny,minz);
        max.set(maxx,maxy,maxz);
        */
    // Faster approximation using local AABB
    const frame = calculateWorldAABB_frame;
    const result = calculateWorldAABB_aabb;
    frame.position = pos;
    frame.quaternion = quat;
    this.aabb.toWorldFrame(frame, result);
    min.copy(result.lowerBound);
    max.copy(result.upperBound);
  }
  /**
   * Get approximate volume
   */


  volume() {
    return 4.0 * Math.PI * this.boundingSphereRadius / 3.0;
  }
  /**
   * Create a Trimesh instance, shaped as a torus.
   */


  static createTorus(radius = 1, tube = 0.5, radialSegments = 8, tubularSegments = 6, arc = Math.PI * 2) {
    const vertices = [];
    const indices = [];

    for (let j = 0; j <= radialSegments; j++) {
      for (let i = 0; i <= tubularSegments; i++) {
        const u = i / tubularSegments * arc;
        const v = j / radialSegments * Math.PI * 2;
        const x = (radius + tube * Math.cos(v)) * Math.cos(u);
        const y = (radius + tube * Math.cos(v)) * Math.sin(u);
        const z = tube * Math.sin(v);
        vertices.push(x, y, z);
      }
    }

    for (let j = 1; j <= radialSegments; j++) {
      for (let i = 1; i <= tubularSegments; i++) {
        const a = (tubularSegments + 1) * j + i - 1;
        const b = (tubularSegments + 1) * (j - 1) + i - 1;
        const c = (tubularSegments + 1) * (j - 1) + i;
        const d = (tubularSegments + 1) * j + i;
        indices.push(a, b, d);
        indices.push(b, c, d);
      }
    }

    return new Trimesh(vertices, indices);
  }

}

const computeNormals_n = new Vec3();
const unscaledAABB = new AABB();
const getEdgeVector_va = new Vec3();
const getEdgeVector_vb = new Vec3();
const cb = new Vec3();
const ab = new Vec3();
const va = new Vec3();
const vb = new Vec3();
const vc = new Vec3();
const cli_aabb = new AABB();
const computeLocalAABB_worldVert = new Vec3();
const calculateWorldAABB_frame = new Transform();
const calculateWorldAABB_aabb = new AABB();
// the first part of the method is formed by the
// shape type that comes before, in the second part
// there is the shape type that comes after in the SHAPE_TYPES list


({
  sphereSphere: Shape.types.SPHERE,
  spherePlane: Shape.types.SPHERE | Shape.types.PLANE,
  boxBox: Shape.types.BOX | Shape.types.BOX,
  sphereBox: Shape.types.SPHERE | Shape.types.BOX,
  planeBox: Shape.types.PLANE | Shape.types.BOX,
  convexConvex: Shape.types.CONVEXPOLYHEDRON,
  sphereConvex: Shape.types.SPHERE | Shape.types.CONVEXPOLYHEDRON,
  planeConvex: Shape.types.PLANE | Shape.types.CONVEXPOLYHEDRON,
  boxConvex: Shape.types.BOX | Shape.types.CONVEXPOLYHEDRON,
  sphereHeightfield: Shape.types.SPHERE | Shape.types.HEIGHTFIELD,
  boxHeightfield: Shape.types.BOX | Shape.types.HEIGHTFIELD,
  convexHeightfield: Shape.types.CONVEXPOLYHEDRON | Shape.types.HEIGHTFIELD,
  sphereParticle: Shape.types.PARTICLE | Shape.types.SPHERE,
  planeParticle: Shape.types.PLANE | Shape.types.PARTICLE,
  boxParticle: Shape.types.BOX | Shape.types.PARTICLE,
  convexParticle: Shape.types.PARTICLE | Shape.types.CONVEXPOLYHEDRON,
  cylinderCylinder: Shape.types.CYLINDER,
  sphereCylinder: Shape.types.SPHERE | Shape.types.CYLINDER,
  planeCylinder: Shape.types.PLANE | Shape.types.CYLINDER,
  boxCylinder: Shape.types.BOX | Shape.types.CYLINDER,
  convexCylinder: Shape.types.CONVEXPOLYHEDRON | Shape.types.CYLINDER,
  heightfieldCylinder: Shape.types.HEIGHTFIELD | Shape.types.CYLINDER,
  particleCylinder: Shape.types.PARTICLE | Shape.types.CYLINDER,
  sphereTrimesh: Shape.types.SPHERE | Shape.types.TRIMESH,
  planeTrimesh: Shape.types.PLANE | Shape.types.TRIMESH
});

new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Quaternion();
new Quaternion();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new AABB();
new Vec3();
new Vec3(); // See http://bulletphysics.com/Bullet/BulletFull/SphereTriangleDetector_8cpp_source.html

new Vec3();
new Vec3();
new Vec3();

new Vec3();
new Vec3();
new Vec3();
new Vec3();
[new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3()];
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3(); // WIP

new Quaternion();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();


new AABB();
new Ray(); // performance.now() fallback on Date.now()

const performance = globalThis.performance || {};

if (!performance.now) {
  let nowOffset = Date.now();

  if (performance.timing && performance.timing.navigationStart) {
    nowOffset = performance.timing.navigationStart;
  }

  performance.now = () => Date.now() - nowOffset;
} // Reusable event objects to save memory.

function cannonDebugger(scene, bodies, {
  color = 0x00ff00,
  scale = 1,
  onInit,
  onUpdate,
  autoUpdate
} = {}) {
  const _meshes = [];

  const _material = new MeshBasicMaterial({
    color: color != null ? color : 0x00ff00,
    wireframe: true
  });

  const _tempVec0 = new Vec3();

  const _tempVec1 = new Vec3();

  const _tempVec2 = new Vec3();

  const _tempQuat0 = new Quaternion();

  const _sphereGeometry = new SphereGeometry(1);

  const _boxGeometry = new BoxGeometry(1, 1, 1);

  const _planeGeometry = new PlaneGeometry(10, 10, 10, 10);

  function createConvexPolyhedronGeometry(shape) {
    const geometry = new BufferGeometry(); // Add vertices

    const positions = [];

    for (let i = 0; i < shape.vertices.length; i++) {
      const vertex = shape.vertices[i];
      positions.push(vertex.x, vertex.y, vertex.z);
    }

    geometry.setAttribute('position', new Float32BufferAttribute(positions, 3)); // Add faces

    const indices = [];

    for (let i = 0; i < shape.faces.length; i++) {
      const face = shape.faces[i];
      const a = face[0];

      for (let j = 1; j < face.length - 1; j++) {
        const b = face[j];
        const c = face[j + 1];
        indices.push(a, b, c);
      }
    }

    geometry.setIndex(indices);
    geometry.computeBoundingSphere();
    geometry.computeVertexNormals();
    return geometry;
  }

  function createTrimeshGeometry(shape) {
    const geometry = new BufferGeometry();
    const positions = [];
    const v0 = _tempVec0;
    const v1 = _tempVec1;
    const v2 = _tempVec2;

    for (let i = 0; i < shape.indices.length / 3; i++) {
      shape.getTriangleVertices(i, v0, v1, v2);
      positions.push(v0.x, v0.y, v0.z);
      positions.push(v1.x, v1.y, v1.z);
      positions.push(v2.x, v2.y, v2.z);
    }

    geometry.setAttribute('position', new Float32BufferAttribute(positions, 3));
    geometry.computeBoundingSphere();
    geometry.computeVertexNormals();
    return geometry;
  }

  function createHeightfieldGeometry(shape) {
    const geometry = new BufferGeometry();
    const s = shape.elementSize || 1; // assumes square heightfield, else i*x, j*y

    const positions = shape.data.flatMap((row, i) => row.flatMap((z, j) => [i * s, j * s, z]));
    const indices = [];

    for (let xi = 0; xi < shape.data.length - 1; xi++) {
      for (let yi = 0; yi < shape.data[xi].length - 1; yi++) {
        const stride = shape.data[xi].length;
        const index = xi * stride + yi;
        indices.push(index + 1, index + stride, index + stride + 1);
        indices.push(index + stride, index + 1, index);
      }
    }

    geometry.setIndex(indices);
    geometry.setAttribute('position', new Float32BufferAttribute(positions, 3));
    geometry.computeBoundingSphere();
    geometry.computeVertexNormals();
    return geometry;
  }

  function createMesh(shape) {
    let mesh = new Mesh();
    const {
      SPHERE,
      BOX,
      PLANE,
      CYLINDER,
      CONVEXPOLYHEDRON,
      TRIMESH,
      HEIGHTFIELD
    } = Shape.types;

    switch (shape.type) {
      case SPHERE:
        {
          mesh = new Mesh(_sphereGeometry, _material);
          break;
        }

      case BOX:
        {
          mesh = new Mesh(_boxGeometry, _material);
          break;
        }

      case PLANE:
        {
          mesh = new Mesh(_planeGeometry, _material);
          break;
        }

      case CYLINDER:
        {
          const geometry = new CylinderGeometry(shape.radiusTop, shape.radiusBottom, shape.height, shape.numSegments);
          mesh = new Mesh(geometry, _material);
          shape.geometryId = geometry.id;
          break;
        }

      case CONVEXPOLYHEDRON:
        {
          const geometry = createConvexPolyhedronGeometry(shape);
          mesh = new Mesh(geometry, _material);
          shape.geometryId = geometry.id;
          break;
        }

      case TRIMESH:
        {
          const geometry = createTrimeshGeometry(shape);
          mesh = new Mesh(geometry, _material);
          shape.geometryId = geometry.id;
          break;
        }

      case HEIGHTFIELD:
        {
          const geometry = createHeightfieldGeometry(shape);
          mesh = new Mesh(geometry, _material);
          shape.geometryId = geometry.id;
          break;
        }
    }

    scene.add(mesh);
    return mesh;
  }

  function scaleMesh(mesh, shape) {
    const {
      SPHERE,
      BOX,
      PLANE,
      CYLINDER,
      CONVEXPOLYHEDRON,
      TRIMESH,
      HEIGHTFIELD
    } = Shape.types;

    switch (shape.type) {
      case SPHERE:
        {
          const {
            radius
          } = shape;
          mesh.scale.set(radius * scale, radius * scale, radius * scale);
          break;
        }

      case BOX:
        {
          mesh.scale.copy(shape.halfExtents);
          mesh.scale.multiplyScalar(2 * scale);
          break;
        }

      case PLANE:
        {
          break;
        }

      case CYLINDER:
        {
          mesh.scale.set(1 * scale, 1 * scale, 1 * scale);
          break;
        }

      case CONVEXPOLYHEDRON:
        {
          mesh.scale.set(1 * scale, 1 * scale, 1 * scale);
          break;
        }

      case TRIMESH:
        {
          mesh.scale.copy(shape.scale).multiplyScalar(scale);
          break;
        }

      case HEIGHTFIELD:
        {
          mesh.scale.set(1 * scale, 1 * scale, 1 * scale);
          break;
        }
    }
  }

  function typeMatch(mesh, shape) {
    if (!mesh) return false;
    const {
      geometry
    } = mesh;
    return geometry instanceof SphereGeometry && shape.type === Shape.types.SPHERE || geometry instanceof BoxGeometry && shape.type === Shape.types.BOX || geometry instanceof PlaneGeometry && shape.type === Shape.types.PLANE || geometry.id === shape.geometryId && shape.type === Shape.types.CYLINDER || geometry.id === shape.geometryId && shape.type === Shape.types.CONVEXPOLYHEDRON || geometry.id === shape.geometryId && shape.type === Shape.types.TRIMESH || geometry.id === shape.geometryId && shape.type === Shape.types.HEIGHTFIELD;
  }

  function updateMesh(index, shape) {
    let mesh = _meshes[index];
    let didCreateNewMesh = false;

    if (!typeMatch(mesh, shape)) {
      if (mesh) scene.remove(mesh);
      _meshes[index] = mesh = createMesh(shape);
      didCreateNewMesh = true;
    }

    scaleMesh(mesh, shape);
    return didCreateNewMesh;
  }

  function update() {
    const meshes = _meshes;
    const shapeWorldPosition = _tempVec0;
    const shapeWorldQuaternion = _tempQuat0;
    let meshIndex = 0;

    for (const body of bodies) {
      for (let i = 0; i !== body.shapes.length; i++) {
        const shape = body.shapes[i];
        const didCreateNewMesh = updateMesh(meshIndex, shape);
        const mesh = meshes[meshIndex];

        if (mesh) {
          // Get world position
          body.quaternion.vmult(body.shapeOffsets[i], shapeWorldPosition);
          body.position.vadd(shapeWorldPosition, shapeWorldPosition); // Get world quaternion

          body.quaternion.mult(body.shapeOrientations[i], shapeWorldQuaternion); // Copy to meshes

          mesh.position.copy(shapeWorldPosition);
          mesh.quaternion.copy(shapeWorldQuaternion);
          if (didCreateNewMesh && onInit instanceof Function) onInit(body, mesh, shape);
          if (!didCreateNewMesh && onUpdate instanceof Function) onUpdate(body, mesh, shape);
        }

        meshIndex++;
      }
    }

    for (let i = meshIndex; i < meshes.length; i++) {
      const mesh = meshes[i];
      if (mesh) scene.remove(mesh);
    }

    meshes.length = meshIndex;
    if (autoUpdate !== false) requestAnimationFrame(update);
  }

  if (autoUpdate !== false) requestAnimationFrame(update);
  return {
    update
  };
}

const makeVec3 = ([x, y, z]) => new Vec3(x, y, z);

const prepareSphere = args => Array.isArray(args) ? args : [args];

const prepareConvexPolyhedron = ([v, faces, n, a, boundingSphereRadius]) => [{
  vertices: v ? v.map(makeVec3) : undefined,
  faces,
  normals: n ? n.map(makeVec3) : undefined,
  axes: a ? a.map(makeVec3) : undefined,
  boundingSphereRadius
}];

function createShape(type, args) {
  switch (type) {
    case 'Box':
      return new Box(new Vec3(...args.map(v => v / 2)));
    // extents => halfExtents

    case 'ConvexPolyhedron':
      return new ConvexPolyhedron(...prepareConvexPolyhedron(args));

    case 'Cylinder':
      return new Cylinder(...args);
    // [ radiusTop, radiusBottom, height, numSegments ] = args

    case 'Heightfield':
      return new Heightfield(...args);
    // [ Array data, options: {minValue, maxValue, elementSize}  ] = args

    case 'Particle':
      return new Particle();
    // no args

    case 'Plane':
      return new Plane();
    // no args, infinite x and y

    case 'Sphere':
      return new Sphere(...prepareSphere(args));
    // radius = args

    case 'Trimesh':
      return new Trimesh(...args);
    // [vertices, indices] = args
  }
}
/**
 *
 * @param uuid {string}
 * @param props {BodyProps}
 * @param type {BodyShapeType}
 * @return {module:objects/Body.Body}
 */


const propsToBody = (uuid, props, type) => {
  const {
    args = [],
    position = [0, 0, 0],
    rotation = [0, 0, 0],
    velocity = [0, 0, 0],
    angularVelocity = [0, 0, 0],
    linearFactor = [1, 1, 1],
    angularFactor = [1, 1, 1],
    type: bodyType,
    mass,
    material,
    shapes,
    onCollide,
    collisionResponse,
    ...extra
  } = props;
  const body = new Body({ ...extra,
    mass: bodyType === 'Static' ? 0 : mass,
    type: bodyType ? Body[bodyType.toUpperCase()] : undefined,
    material: material ? new Material(material) : undefined
  });
  body.uuid = uuid;

  if (collisionResponse !== undefined) {
    body.collisionResponse = collisionResponse;
  }

  if (type === 'Compound') {
    shapes.forEach(({
      type,
      args,
      position,
      rotation,
      material,
      ...extra
    }) => {
      const shapeBody = body.addShape(createShape(type, args), position ? new Vec3(...position) : undefined, rotation ? new Quaternion().setFromEuler(...rotation) : undefined);
      if (material) shapeBody.material = new Material(material);
      Object.assign(shapeBody, extra);
    });
  } else {
    body.addShape(createShape(type, args));
  }

  body.position.set(position[0], position[1], position[2]);
  body.quaternion.setFromEuler(rotation[0], rotation[1], rotation[2]);
  body.velocity.set(velocity[0], velocity[1], velocity[2]);
  body.angularVelocity.set(angularVelocity[0], angularVelocity[1], angularVelocity[2]);
  body.linearFactor.set(linearFactor[0], linearFactor[1], linearFactor[2]);
  body.angularFactor.set(angularFactor[0], angularFactor[1], angularFactor[2]);
  return body;
};

const v = new Vector3();
const s = new Vector3(1, 1, 1);
const q = new Quaternion$1();
function Debug({
  color = 'black',
  scale = 1,
  children,
  impl = cannonDebugger
}) {
  const [debugInfo] = useState({
    bodies: [],
    refs: {}
  });
  const {
    refs
  } = useContext(context);
  const [scene] = useState(() => new Scene());
  const instance = useRef();
  let lastBodies = 0;
  useFrame(() => {
    if (!instance.current || lastBodies !== debugInfo.bodies.length) {
      lastBodies = debugInfo.bodies.length;
      scene.children = [];
      instance.current = impl(scene, debugInfo.bodies, {
        color,
        scale,
        autoUpdate: false
      });
    }

    for (const uuid in debugInfo.refs) {
      refs[uuid].matrix.decompose(v, q, s);
      debugInfo.refs[uuid].position.copy(v);
      debugInfo.refs[uuid].quaternion.copy(q);
    }

    instance.current.update();
  });
  const api = useMemo(() => ({
    add(id, props, type) {
      const body = propsToBody(id, props, type);
      debugInfo.bodies.push(body);
      debugInfo.refs[id] = body;
    },

    remove(id) {
      const debugBodyIndex = debugInfo.bodies.indexOf(debugInfo.refs[id]);
      if (debugBodyIndex > -1) debugInfo.bodies.splice(debugBodyIndex, 1);
      delete debugInfo.refs[id];
    }

  }), []);
  return /*#__PURE__*/React.createElement(debugContext.Provider, {
    value: api
  }, /*#__PURE__*/React.createElement("primitive", {
    object: scene
  }), children);
}

const temp = new Object3D();

function opString(action, type) {
  return action + type.charAt(0).toUpperCase() + type.slice(1);
}

function getUUID(ref, index) {
  return index !== undefined ? `${ref.current.uuid}/${index}` : ref.current.uuid;
}

function post(ref, worker, op, index, props) {
  return ref.current && worker.postMessage({
    op,
    uuid: getUUID(ref, index),
    props
  });
}

function subscribe(ref, worker, subscriptions, type, index, target) {
  return callback => {
    const id = subscriptionGuid++;
    subscriptions[id] = callback;
    post(ref, worker, 'subscribe', index, {
      id,
      type,
      target: target === undefined || target === null ? 'bodies' : target
    });
    return () => {
      delete subscriptions[id];
      worker.postMessage({
        op: 'unsubscribe',
        props: id
      });
    };
  };
}

function prepare(object, props) {
  object.userData = props.userData || {};
  object.position.set(...(props.position || [0, 0, 0]));
  object.rotation.set(...(props.rotation || [0, 0, 0]));
  object.updateMatrix();
}

function setupCollision(events, {
  onCollide,
  onCollideBegin,
  onCollideEnd
}, id) {
  if (onCollide || onCollideBegin || onCollideEnd) {
    events[id] = ev => {
      switch (ev.type) {
        case 'collide':
          if (onCollide) onCollide(ev);
          break;

        case 'collideBegin':
          if (onCollideBegin) onCollideBegin(ev);
          break;

        case 'collideEnd':
          if (onCollideEnd) onCollideEnd(ev);
          break;
      }
    };
  }
}

let subscriptionGuid = 0;

function useBody(type, fn, argsFn, fwdRef, deps = []) {
  const localRef = useRef(null);
  const ref = fwdRef ? fwdRef : localRef;
  const {
    worker,
    refs,
    events,
    subscriptions
  } = useContext(context);
  const debugApi = useContext(debugContext);
  useLayoutEffect(() => {
    if (!ref.current) {
      // When the reference isn't used we create a stub
      // The body doesn't have a visual representation but can still be constrained
      ref.current = new Object3D();
    }

    const object = ref.current;
    const currentWorker = worker;
    const objectCount = object instanceof InstancedMesh ? (object.instanceMatrix.setUsage(DynamicDrawUsage), object.count) : 1;
    const uuid = object instanceof InstancedMesh ? new Array(objectCount).fill(0).map((_, i) => `${object.uuid}/${i}`) : [object.uuid];
    const props = object instanceof InstancedMesh ? uuid.map((id, i) => {
      const props = fn(i);
      prepare(temp, props);
      object.setMatrixAt(i, temp.matrix);
      object.instanceMatrix.needsUpdate = true;
      refs[id] = object;
      if (debugApi) debugApi.add(id, props, type);
      setupCollision(events, props, id);
      return { ...props,
        args: argsFn(props.args)
      };
    }) : uuid.map((id, i) => {
      const props = fn(i);
      prepare(object, props);
      refs[id] = object;
      if (debugApi) debugApi.add(id, props, type);
      setupCollision(events, props, id);
      return { ...props,
        args: argsFn(props.args)
      };
    }); // Register on mount, unregister on unmount

    currentWorker.postMessage({
      op: 'addBodies',
      type,
      uuid,
      props: props.map(({
        onCollide,
        onCollideBegin,
        onCollideEnd,
        ...serializableProps
      }) => {
        return {
          onCollide: Boolean(onCollide),
          ...serializableProps
        };
      })
    });
    return () => {
      uuid.forEach(id => {
        delete refs[id];
        if (debugApi) debugApi.remove(id);
        delete events[id];
      });
      currentWorker.postMessage({
        op: 'removeBodies',
        uuid
      });
    };
  }, deps);
  const api = useMemo(() => {
    const makeVec = (type, index) => ({
      set: (x, y, z) => post(ref, worker, opString('set', type), index, [x, y, z]),
      copy: ({
        x,
        y,
        z
      }) => post(ref, worker, opString('set', type), index, [x, y, z]),
      subscribe: subscribe(ref, worker, subscriptions, type, index)
    });

    const makeAtomic = (type, index) => ({
      set: value => post(ref, worker, opString('set', type), index, value),
      subscribe: subscribe(ref, worker, subscriptions, type, index)
    });

    function makeApi(index) {
      return {
        // Vectors
        position: makeVec('position', index),
        rotation: makeVec('quaternion', index),
        velocity: makeVec('velocity', index),
        angularVelocity: makeVec('angularVelocity', index),
        linearFactor: makeVec('linearFactor', index),
        angularFactor: makeVec('angularFactor', index),
        // Atomic props
        mass: makeAtomic('mass', index),
        linearDamping: makeAtomic('linearDamping', index),
        angularDamping: makeAtomic('angularDamping', index),
        allowSleep: makeAtomic('allowSleep', index),
        sleepSpeedLimit: makeAtomic('sleepSpeedLimit', index),
        sleepTimeLimit: makeAtomic('sleepTimeLimit', index),
        collisionFilterGroup: makeAtomic('collisionFilterGroup', index),
        collisionFilterMask: makeAtomic('collisionFilterMask', index),
        collisionResponse: makeAtomic('collisionResponse', index),
        fixedRotation: makeAtomic('fixedRotation', index),
        userData: makeAtomic('userData', index),
        isTrigger: makeAtomic('isTrigger', index),

        // Apply functions
        applyForce(force, worldPoint) {
          post(ref, worker, 'applyForce', index, [force, worldPoint]);
        },

        applyImpulse(impulse, worldPoint) {
          post(ref, worker, 'applyImpulse', index, [impulse, worldPoint]);
        },

        applyLocalForce(force, localPoint) {
          post(ref, worker, 'applyLocalForce', index, [force, localPoint]);
        },

        applyLocalImpulse(impulse, localPoint) {
          post(ref, worker, 'applyLocalImpulse', index, [impulse, localPoint]);
        }

      };
    }

    const cache = {};
    return { ...makeApi(undefined),
      at: index => cache[index] || (cache[index] = makeApi(index))
    };
  }, []);
  return [ref, api];
}

function makeTriplet(v) {
  return v instanceof Vector3 ? [v.x, v.y, v.z] : v;
}

function usePlane(fn, fwdRef, deps) {
  return useBody('Plane', fn, () => [], fwdRef, deps);
}
function useBox(fn, fwdRef, deps) {
  const defaultBoxArgs = [1, 1, 1];
  return useBody('Box', fn, (args = defaultBoxArgs) => args, fwdRef, deps);
}
function useCylinder(fn, fwdRef, deps) {
  return useBody('Cylinder', fn, (args = []) => args, fwdRef, deps);
}
function useHeightfield(fn, fwdRef, deps) {
  return useBody('Heightfield', fn, args => args, fwdRef, deps);
}
function useParticle(fn, fwdRef, deps) {
  return useBody('Particle', fn, () => [], fwdRef, deps);
}
function useSphere(fn, fwdRef, deps) {
  return useBody('Sphere', fn, (radius = 1) => [radius], fwdRef, deps);
}
function useTrimesh(fn, fwdRef, deps) {
  return useBody('Trimesh', fn, args => args, fwdRef, deps);
}
function useConvexPolyhedron(fn, fwdRef, deps) {
  return useBody('ConvexPolyhedron', fn, ([vertices, faces, normals, axes, boundingSphereRadius] = []) => [vertices && vertices.map(makeTriplet), faces, normals && normals.map(makeTriplet), axes && axes.map(makeTriplet), boundingSphereRadius], fwdRef, deps);
}
function useCompoundBody(fn, fwdRef, deps) {
  return useBody('Compound', fn, args => args, fwdRef, deps);
}

function useConstraint(type, bodyA, bodyB, optns = {}, deps = []) {
  const {
    worker
  } = useContext(context);
  const uuid = MathUtils.generateUUID();
  const nullRef1 = useRef(null);
  const nullRef2 = useRef(null);
  bodyA = bodyA === undefined || bodyA === null ? nullRef1 : bodyA;
  bodyB = bodyB === undefined || bodyB === null ? nullRef2 : bodyB;
  useEffect(() => {
    if (bodyA.current && bodyB.current) {
      worker.postMessage({
        op: 'addConstraint',
        uuid,
        type,
        props: [bodyA.current.uuid, bodyB.current.uuid, optns]
      });
      return () => worker.postMessage({
        op: 'removeConstraint',
        uuid
      });
    }
  }, deps);
  const api = useMemo(() => {
    const enableDisable = {
      enable: () => worker.postMessage({
        op: 'enableConstraint',
        uuid
      }),
      disable: () => worker.postMessage({
        op: 'disableConstraint',
        uuid
      })
    };

    if (type === 'Hinge') {
      return { ...enableDisable,
        enableMotor: () => worker.postMessage({
          op: 'enableConstraintMotor',
          uuid
        }),
        disableMotor: () => worker.postMessage({
          op: 'disableConstraintMotor',
          uuid
        }),
        setMotorSpeed: value => worker.postMessage({
          op: 'setConstraintMotorSpeed',
          uuid,
          props: value
        }),
        setMotorMaxForce: value => worker.postMessage({
          op: 'setConstraintMotorMaxForce',
          uuid,
          props: value
        })
      };
    }

    return enableDisable;
  }, deps);
  return [bodyA, bodyB, api];
}

function usePointToPointConstraint(bodyA, bodyB, optns, deps = []) {
  return useConstraint('PointToPoint', bodyA, bodyB, optns, deps);
}
function useConeTwistConstraint(bodyA, bodyB, optns, deps = []) {
  return useConstraint('ConeTwist', bodyA, bodyB, optns, deps);
}
function useDistanceConstraint(bodyA, bodyB, optns, deps = []) {
  return useConstraint('Distance', bodyA, bodyB, optns, deps);
}
function useHingeConstraint(bodyA, bodyB, optns, deps = []) {
  return useConstraint('Hinge', bodyA, bodyB, optns, deps);
}
function useLockConstraint(bodyA, bodyB, optns, deps = []) {
  return useConstraint('Lock', bodyA, bodyB, optns, deps);
}
function useSpring(bodyA, bodyB, optns, deps = []) {
  const {
    worker
  } = useContext(context);
  const [uuid] = useState(() => MathUtils.generateUUID());
  const nullRef1 = useRef(null);
  const nullRef2 = useRef(null);
  bodyA = bodyA === undefined || bodyA === null ? nullRef1 : bodyA;
  bodyB = bodyB === undefined || bodyB === null ? nullRef2 : bodyB;
  useEffect(() => {
    if (bodyA.current && bodyB.current) {
      worker.postMessage({
        op: 'addSpring',
        uuid,
        props: [bodyA.current.uuid, bodyB.current.uuid, optns]
      });
      return () => {
        worker.postMessage({
          op: 'removeSpring',
          uuid
        });
      };
    }
  }, deps);
  const api = useMemo(() => ({
    setStiffness: value => worker.postMessage({
      op: 'setSpringStiffness',
      props: value,
      uuid
    }),
    setRestLength: value => worker.postMessage({
      op: 'setSpringRestLength',
      props: value,
      uuid
    }),
    setDamping: value => worker.postMessage({
      op: 'setSpringDamping',
      props: value,
      uuid
    })
  }), deps);
  return [bodyA, bodyB, api];
}

function useRay(mode, options, callback, deps = []) {
  const {
    worker,
    events
  } = useContext(context);
  const [uuid] = useState(() => MathUtils.generateUUID());
  useEffect(() => {
    events[uuid] = callback;
    worker.postMessage({
      op: 'addRay',
      uuid,
      props: {
        mode,
        ...options
      }
    });
    return () => {
      worker.postMessage({
        op: 'removeRay',
        uuid
      });
      delete events[uuid];
    };
  }, deps);
}

function useRaycastClosest(options, callback, deps = []) {
  useRay('Closest', options, callback, deps);
}
function useRaycastAny(options, callback, deps = []) {
  useRay('Any', options, callback, deps);
}
function useRaycastAll(options, callback, deps = []) {
  useRay('All', options, callback, deps);
}
function useRaycastVehicle(fn, fwdRef, deps = []) {
  const ref = fwdRef ? fwdRef : useRef(null);
  const {
    worker,
    subscriptions
  } = useContext(context);
  useLayoutEffect(() => {
    var _raycastVehicleProps$;

    if (!ref.current) {
      // When the reference isn't used we create a stub
      // The body doesn't have a visual representation but can still be constrained
      ref.current = new Object3D();
    }

    const currentWorker = worker;
    const uuid = [ref.current.uuid];
    const raycastVehicleProps = fn();
    currentWorker.postMessage({
      op: 'addRaycastVehicle',
      uuid,
      props: [(_raycastVehicleProps$ = raycastVehicleProps.chassisBody.current) == null ? void 0 : _raycastVehicleProps$.uuid, raycastVehicleProps.wheels.map(wheel => {
        var _wheel$current;

        return (_wheel$current = wheel.current) == null ? void 0 : _wheel$current.uuid;
      }), raycastVehicleProps.wheelInfos, (raycastVehicleProps == null ? void 0 : raycastVehicleProps.indexForwardAxis) || 2, (raycastVehicleProps == null ? void 0 : raycastVehicleProps.indexRightAxis) || 0, (raycastVehicleProps == null ? void 0 : raycastVehicleProps.indexUpAxis) || 1]
    });
    return () => {
      currentWorker.postMessage({
        op: 'removeRaycastVehicle',
        uuid
      });
    };
  }, deps);
  const api = useMemo(() => {
    const post = (op, props) => ref.current && worker.postMessage({
      op,
      uuid: ref.current.uuid,
      props
    });

    return {
      sliding: {
        subscribe: subscribe(ref, worker, subscriptions, 'sliding', undefined, 'vehicles')
      },

      setSteeringValue(value, wheelIndex) {
        post('setRaycastVehicleSteeringValue', [value, wheelIndex]);
      },

      applyEngineForce(value, wheelIndex) {
        post('applyRaycastVehicleEngineForce', [value, wheelIndex]);
      },

      setBrake(brake, wheelIndex) {
        post('setRaycastVehicleBrake', [brake, wheelIndex]);
      }

    };
  }, deps);
  return [ref, api];
}

function Physics(props) {
  return /*#__PURE__*/React.createElement(Suspense, {
    fallback: null
  }, /*#__PURE__*/React.createElement(Provider, props));
}

export { Debug, Physics, context, useBox, useCompoundBody, useConeTwistConstraint, useConvexPolyhedron, useCylinder, useDistanceConstraint, useHeightfield, useHingeConstraint, useLockConstraint, useParticle, usePlane, usePointToPointConstraint, useRaycastAll, useRaycastAny, useRaycastClosest, useRaycastVehicle, useSphere, useSpring, useTrimesh };
